<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r4498 - rl/trunk/engine/script/swig
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4498%20-%20rl/trunk/engine/script/swig&In-Reply-To=%3C200809030647.m836lbfP024367%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001554.html">
   <LINK REL="Next"  HREF="001556.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r4498 - rl/trunk/engine/script/swig</H1>
    <B>blakharaz at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4498%20-%20rl/trunk/engine/script/swig&In-Reply-To=%3C200809030647.m836lbfP024367%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r4498 - rl/trunk/engine/script/swig">blakharaz at mail.berlios.de
       </A><BR>
    <I>Wed Sep  3 08:47:37 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001554.html">[Dsa-hl-svn] r4497 - rl/trunk/Mac/tools
</A></li>
        <LI>Next message: <A HREF="001556.html">[Dsa-hl-svn] r4499 - rl/trunk/Mac/Rastullah.xcodeproj
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1555">[ date ]</a>
              <a href="thread.html#1555">[ thread ]</a>
              <a href="subject.html#1555">[ subject ]</a>
              <a href="author.html#1555">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: blakharaz
Date: 2008-09-03 08:47:34 +0200 (Wed, 03 Sep 2008)
New Revision: 4498

Modified:
   rl/trunk/engine/script/swig/RlExports.i
   rl/trunk/engine/script/swig/TypeOgreColourValue.swig
   rl/trunk/engine/script/swig/TypeOgreQuaternion.swig
   rl/trunk/engine/script/swig/TypeOgreRadian.swig
   rl/trunk/engine/script/swig/TypeOgreStringVector.swig
   rl/trunk/engine/script/swig/TypeOgreVector3.swig
   rl/trunk/engine/script/swig/TypeRlCeGuiString.swig
   rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig
   rl/trunk/engine/script/swig/TypeRlProperty.swig
   rl/trunk/engine/script/swig/TypeRlPropertyKeys.swig
   rl/trunk/engine/script/swig/TypeStdPairIntInt.swig
Log:
Less blocks and source code in cxx generated by SWIG

Modified: rl/trunk/engine/script/swig/RlExports.i
===================================================================
--- rl/trunk/engine/script/swig/RlExports.i	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/RlExports.i	2008-09-03 06:47:34 UTC (rev 4498)
@@ -131,6 +131,43 @@
 
 
 // Converting C++ Exceptions to Ruby Exceptions
+%{
+enum RlExceptionClass 
+{
+    RLEX_UNKNOWN,
+    RLEX_CEGUI,
+    RLEX_STL,
+    RLEX_SWIG_DIRECTOR
+};
+
+void throwRubyException(RlExceptionClass clazz, const char* exceptionMessage)
+{
+    static VALUE ceguiException = rb_define_class(&quot;CeguiException&quot;, rb_eRuntimeError);
+    static VALUE stdException = rb_define_class(&quot;StdException&quot;, rb_eRuntimeError);
+	static VALUE swigException = rb_define_class(&quot;SwigDirectorException&quot;, rb_eRuntimeError);
+    static VALUE unknownException = rb_define_class(&quot;UnknownException&quot;, rb_eRuntimeError);
+
+    VALUE rubyClass;
+    if (clazz == RLEX_CEGUI)
+    {
+        rubyClass = ceguiException;
+    }
+    else if (clazz == RLEX_STL)
+    {
+        rubyClass = stdException;
+    }
+    else if (clazz == RLEX_SWIG_DIRECTOR)
+    {
+        rubyClass = swigException;
+    }
+    else //if (clazz == RLEX_UNKNOWN)
+    {
+        rubyClass = unknownException;
+    }
+    rb_raise(rubyClass, exceptionMessage);
+}
+%}
+
 %exception %{
   try 
   {
@@ -138,23 +175,19 @@
   }
   catch (CEGUI::Exception&amp; ce) 
   {
-    static VALUE ceguiException = rb_define_class(&quot;CeguiException&quot;, rb_eRuntimeError);
-    rb_raise(ceguiException, ce.getMessage().c_str());
+    throwRubyException(RLEX_CEGUI, ce.getMessage().c_str());
   }
   catch (std::exception&amp; se) 
   {
-    static VALUE stdException = rb_define_class(&quot;StdException&quot;, rb_eRuntimeError);
-    rb_raise(stdException, se.what());
+    throwRubyException(RLEX_STL, se.what());
   }
   catch (Swig::DirectorException&amp; de)
   {
-	static VALUE swigException = rb_define_class(&quot;SwigDirectorException&quot;, rb_eRuntimeError);
-	rb_raise(swigException, de.getMessage().c_str());
+	throwRubyException(RLEX_SWIG_DIRECTOR, de.getMessage().c_str());
   }
   catch (...) 
   {
-    static VALUE unknownException = rb_define_class(&quot;UnknownException&quot;, rb_eRuntimeError);
-    rb_raise(unknownException,&quot;Unbekannte Exception&quot;);
+    throwRubyException(RLEX_UNKNOWN, &quot;Unknown exception&quot;);
   }
 %}
 

Modified: rl/trunk/engine/script/swig/TypeOgreColourValue.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreColourValue.swig	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/TypeOgreColourValue.swig	2008-09-03 06:47:34 UTC (rev 4498)
@@ -69,19 +69,17 @@
 %}
 
 %typemap(in) Ogre::ColourValue, const Ogre::ColourValue
-{
-   Ogre::ColourValue vec(0.0, 0.0, 0.0, 0.0);
-   convertRubyToColourValue( $input, &amp; vec );
-   $1 = vec;
-}
+%{
+   $1 = ColourValue(0.0, 0.0, 0.0, 0.0);
+   convertRubyToColourValue( $input, &amp; $1 );
+%}
 
 %typemap(in) Ogre::ColourValue*, Ogre::ColourValue&amp;,
    const Ogre::ColourValue*, const Ogre::ColourValue&amp;
-{
-   Ogre::ColourValue* vec = new Ogre::ColourValue(0.0, 0.0, 0.0, 0.0);
-   convertRubyToColourValue(  $input, vec );
-   $1 = vec;
-}
+%{
+   $1 = new Ogre::ColourValue(0.0, 0.0, 0.0, 0.0);
+   convertRubyToColourValue(  $input, $1 );
+%}
 
 %{
 // Helper method for creating the ruby Array

Modified: rl/trunk/engine/script/swig/TypeOgreQuaternion.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreQuaternion.swig	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/TypeOgreQuaternion.swig	2008-09-03 06:47:34 UTC (rev 4498)
@@ -77,7 +77,7 @@
 
 %{
 // Helper method for converting ruby input to a Quaternion
-static Ogre::Quaternion* convertRubyToQuaternion( VALUE input, Ogre::Quaternion* quat )
+static void convertRubyToQuaternion( VALUE input, Ogre::Quaternion* quat )
 {
    if (RARRAY(input)-&gt;len == 2)
    {
@@ -114,24 +114,20 @@
 	   quat-&gt;y = NUM2DBL(rb_ary_entry(input, 2));
 	   quat-&gt;z = NUM2DBL(rb_ary_entry(input, 3));
    }
-
-   return quat;
 }
 %}
 
 %typemap(in) Ogre::Quaternion, const Ogre::Quaternion
-{
-   Ogre::Quaternion quat;
-   convertRubyToQuaternion( $input, &amp; quat );
-   $1 = quat;
-}
+%{
+   convertRubyToQuaternion( $input, &amp; $1 );
+%}
 
 %typemap(in) Ogre::Quaternion*, Ogre::Quaternion&amp;,
    const Ogre::Quaternion*, const Ogre::Quaternion&amp;
-{
-   Ogre::Quaternion* quat = new Ogre::Quaternion();  
-   $1 = convertRubyToQuaternion( $input, quat );
-}
+%{
+   $1 = new Ogre::Quaternion();  
+   convertRubyToQuaternion( $input, $1 );
+%}
 
 
 %{

Modified: rl/trunk/engine/script/swig/TypeOgreRadian.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreRadian.swig	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/TypeOgreRadian.swig	2008-09-03 06:47:34 UTC (rev 4498)
@@ -1,49 +1,52 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
- */
-
-/* Radian / Degree all Ruby Values are interpreted as DEGREE! */
-%typemap(typecheck) Ogre::Radian, const Ogre::Radian&amp; = double;
-
-%typemap(in) Ogre::Radian, const Ogre::Radian, Ogre::Radian&amp;, const Ogre::Radian&amp; {
-    if (TYPE($input) == T_FLOAT) {
-		$1 = Ogre::Degree(RFLOAT($input)-&gt;value);
-    } else if (TYPE($input) == T_FIXNUM) {
-		$1 = Ogre::Degree(FIX2INT($input));
-    } else {
-        throw Swig::DirectorTypeMismatchException(&quot;float or fixnum expected&quot;);
-    }
-}
-%typemap(in) Ogre::Radian*, const Ogre::Radian*, Ogre::Radian&amp;, const Ogre::Radian&amp; {
-    if (TYPE($input) == T_FLOAT) {
-		$1 = new Ogre::Radian(Ogre::Degree(RFLOAT($input)-&gt;value));
-    } else if (TYPE($input) == T_FIXNUM) {
-		$1 = new Ogre::Radian(Ogre::Degree(FIX2INT($input)));
-    } else {
-        throw Swig::DirectorTypeMismatchException(&quot;float or fixnum expected&quot;);
-    }
-}
-
-%typemap(freearg) Ogre::Radian*, const Ogre::Radian*, Ogre::Radian&amp;, const Ogre::Radian&amp; 
-&quot;   delete $1;&quot;
-
-%typemap(out) Ogre::Radian, const Ogre::Radian {
-     $result = rb_float_new($1.valueDegrees());
-}
-%typemap(out) Ogre::Radian&amp;, const Ogre::Radian&amp; {
-     $result = rb_float_new($1-&gt;valueDegrees());
-}
-
-
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
+ */
+
+/* Radian / Degree all Ruby Values are interpreted as DEGREE! */
+%typemap(typecheck) Ogre::Radian, const Ogre::Radian&amp; = double;
+
+%typemap(in) Ogre::Radian, const Ogre::Radian, Ogre::Radian&amp;, const Ogre::Radian&amp; 
+%{
+    if (TYPE($input) == T_FLOAT) {
+		$1 = Ogre::Degree(RFLOAT($input)-&gt;value);
+    } else if (TYPE($input) == T_FIXNUM) {
+		$1 = Ogre::Degree(FIX2INT($input));
+    } else {
+        throw Swig::DirectorTypeMismatchException(&quot;float or fixnum expected&quot;);
+    }
+%}
+
+%typemap(in) Ogre::Radian*, const Ogre::Radian*, Ogre::Radian&amp;, const Ogre::Radian&amp;
+%{
+    if (TYPE($input) == T_FLOAT) {
+		$1 = new Ogre::Radian(Ogre::Degree(RFLOAT($input)-&gt;value));
+    } else if (TYPE($input) == T_FIXNUM) {
+		$1 = new Ogre::Radian(Ogre::Degree(FIX2INT($input)));
+    } else {
+        throw Swig::DirectorTypeMismatchException(&quot;float or fixnum expected&quot;);
+    }
+%}
+
+%typemap(freearg) Ogre::Radian*, const Ogre::Radian*, Ogre::Radian&amp;, const Ogre::Radian&amp; 
+    &quot;delete $1;&quot;
+
+%typemap(out) Ogre::Radian, const Ogre::Radian 
+    &quot;$result = rb_float_new($1.valueDegrees());&quot;
+
+%typemap(out) Ogre::Radian&amp;, const Ogre::Radian&amp; 
+    &quot;$result = rb_float_new($1-&gt;valueDegrees());&quot;
+
+
+

Modified: rl/trunk/engine/script/swig/TypeOgreStringVector.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreStringVector.swig	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/TypeOgreStringVector.swig	2008-09-03 06:47:34 UTC (rev 4498)
@@ -1,75 +1,74 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
- */
-
-%typemap(freearg) Ogre::StringVector &amp;, const Ogre::StringVector &amp; {
-  delete $1;
-}
-
-%typemap(out) Ogre::StringVector, const Ogre::StringVector {
-  VALUE arr = rb_ary_new2($1.size()); 
-  StringVector::iterator i = $1.begin(), iend = $1.end();
-  for ( ; i!=iend; i++ )
-    rb_ary_push(arr, rb_str_new2(*i));
-  $result = arr;
-}
-
-%typemap(in) Ogre::StringVector , const Ogre::StringVector {
-  Check_Type($input, T_ARRAY);
-  Ogre::StringVector vec;
-  int len = RARRAY($input)-&gt;len;
-  for (int i=0; i!=len; i++) {
-    VALUE inst = rb_ary_entry($input, i);
-    vec.push_back(Ogre::String(StringValuePtr(inst)));
-  }
-  $1 = vec;
-}
-
-%typemap(directorin) Ogre::StringVector &amp;, const Ogre::StringVector &amp; {
-  VALUE arr = rb_ary_new2($1-&gt;size()); 
-  StringVector::iterator i = $1-&gt;begin(), iend = $1-&gt;end();
-  for ( ; i!=iend; i++ )
-    rb_ary_push(arr, rb_str_new2(&amp;(*i)));
-  $result = arr;
-}
-%typemap(directorin) Ogre::StringVector, const Ogre::StringVector {
-  VALUE arr = rb_ary_new2($1.size()); 
-  StringVector::iterator i = $1.begin(), iend = $1.end();
-  for ( ; i!=iend; i++ )
-    rb_ary_push(arr, rb_str_new2(*i));
-  $result = arr;
-}
-
-%typemap(directorout) Ogre::StringVector , const Ogre::StringVector {
-  Check_Type($input, T_ARRAY);
-  Ogre::StringVector vec;
-  int len = RARRAY($input)-&gt;len;
-  for (int i=0; i!=len; i++) {
-    VALUE inst = rb_ary_entry($input, i);
-    vec.push_back(Ogre::String(StringValuePtr(inst)));
-  }
-  $result = vec;
-}
-
-%typemap(directorout) Ogre::StringVector *, const Ogre::StringVector* , Ogre::StringVector &amp;, const Ogre::StringVector&amp; {
-  Check_Type($input, T_ARRAY);
-  Ogre::StringVector *vec = new Ogre::StringVector;
-  int len = RARRAY($input)-&gt;len;
-  for (int i=0; i!=len; i++) {
-    VALUE inst = rb_ary_entry($input, i);
-    vec-&gt;push_back(Ogre::String(StringValuePtr(inst)));
-  }
-  $result = vec;
-}
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
+ */
+
+%typemap(freearg) Ogre::StringVector &amp;, const Ogre::StringVector &amp; 
+    &quot;delete $1;&quot;
+
+
+%typemap(out) Ogre::StringVector, const Ogre::StringVector 
+%{
+  $result = rb_ary_new2($1.size()); 
+  for (StringVector::iterator i = $1.begin(), iend = $1.end() ; i!=iend; i++ )
+  {
+    rb_ary_push($result, rb_str_new2(*i));
+  }
+%}
+
+%typemap(in) Ogre::StringVector , const Ogre::StringVector 
+%{
+  Check_Type($input, T_ARRAY);
+  int len = RARRAY($input)-&gt;len;
+  for (int i=0; i!=len; i++) {
+    VALUE inst = rb_ary_entry($input, i);
+    $1.push_back(Ogre::String(StringValuePtr(inst)));
+  }
+%}
+
+%typemap(directorin) Ogre::StringVector &amp;, const Ogre::StringVector &amp;
+%{
+  $result = rb_ary_new2($1-&gt;size()); 
+  for (StringVector::iterator i = $1-&gt;begin(), iend = $1-&gt;end(); i!=iend; i++ ) 
+  {
+    rb_ary_push($result, rb_str_new2(*i));
+  }
+%}
+%typemap(directorin) Ogre::StringVector, const Ogre::StringVector 
+%{
+  $result = rb_ary_new2($1.size()); 
+  for (StringVector::iterator i = $1.begin(), iend = $1.end(); i!=iend; i++ ) 
+  {
+    rb_ary_push($result, rb_str_new2(*i));
+  }
+%}
+
+%typemap(directorout) Ogre::StringVector , const Ogre::StringVector 
+%{
+  Check_Type($input, T_ARRAY);
+  for (int i=0, len = RARRAY($input)-&gt;len; i!=len; i++) {
+    VALUE inst = rb_ary_entry($input, i);
+    $result.push_back(Ogre::String(StringValuePtr(inst)));
+  }
+%}
+
+%typemap(directorout) Ogre::StringVector *, const Ogre::StringVector* , Ogre::StringVector &amp;, const Ogre::StringVector&amp; 
+%{
+  Check_Type($input, T_ARRAY);
+  $result = new Ogre::StringVector();
+  for (int i=0, len = RARRAY($input)-&gt;len; i!=len; i++) {
+    VALUE inst = rb_ary_entry($input, i);
+    $result-&gt;push_back(Ogre::String(StringValuePtr(inst)));
+  }
+%}

Modified: rl/trunk/engine/script/swig/TypeOgreVector3.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreVector3.swig	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/TypeOgreVector3.swig	2008-09-03 06:47:34 UTC (rev 4498)
@@ -62,19 +62,16 @@
 %}
 
 %typemap(in) Ogre::Vector3, const Ogre::Vector3
-{
-   Ogre::Vector3 vec(0.0, 0.0, 0.0);
-   convertRubyToVector3( $input, &amp; vec );
-   $1 = vec;
-}
+%{
+   convertRubyToVector3( $input, &amp; $1 );
+%}
 
 %typemap(in) Ogre::Vector3*, Ogre::Vector3&amp;,
    const Ogre::Vector3*, const Ogre::Vector3&amp;
-{
-   Ogre::Vector3* vec = new Ogre::Vector3(0.0, 0.0, 0.0);
+%{
+   $1 = new Ogre::Vector3(0.0, 0.0, 0.0);
    convertRubyToVector3(  $input, vec );
-   $1 = vec;
-}
+%}
 
 %{
 // Helper method for creating the ruby Array

Modified: rl/trunk/engine/script/swig/TypeRlCeGuiString.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeRlCeGuiString.swig	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/TypeRlCeGuiString.swig	2008-09-03 06:47:34 UTC (rev 4498)
@@ -32,9 +32,10 @@
     &quot;Check_Type($input, T_STRING);
     $1 = new rl::CeGuiString(
 		reinterpret_cast&lt;CEGUI::utf8*&gt;(StringValuePtr($input)));&quot;
-%typemap(freearg) rl::CeGuiString*, rl::CeGuiString&amp;, const rl::CeGuiString*, const rl::CeGuiString&amp;  {
-   delete $1;
-}
+
+%typemap(freearg) rl::CeGuiString*, rl::CeGuiString&amp;, const rl::CeGuiString*, const rl::CeGuiString&amp;
+   &quot;delete $1;&quot;
+
 %typemap(out) rl::CeGuiString*, rl::CeGuiString&amp;,  const rl::CeGuiString*, const rl::CeGuiString&amp; 
      &quot;$result = rb_str_buf_new2($1-&gt;c_str());&quot;
 
@@ -48,10 +49,8 @@
 	&quot;$input = rb_str_buf_new2($1-&gt;c_str());&quot;
 
 %typemap(directorout) rl::CeGuiString, const rl::CeGuiString 
-    &quot;$result = rl::CeGuiString(
-		reinterpret_cast&lt;CEGUI::utf8*&gt;(StringValuePtr($input)));&quot;
+    &quot;$result = rl::CeGuiString(reinterpret_cast&lt;CEGUI::utf8*&gt;(StringValuePtr($input)));&quot;
 
 %typemap(directorout) const rl::CeGuiString &amp;, rl::CeGuiString&amp;  
     &quot;$result = new rl::CeGuiString();
-     $result-&gt;append( 
-		reinterpret_cast&lt;CEGUI::utf8*&gt;(StringValuePtr($input)) );&quot;
+     $result-&gt;append(reinterpret_cast&lt;CEGUI::utf8*&gt;(StringValuePtr($input)));&quot;

Modified: rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig	2008-09-03 06:47:34 UTC (rev 4498)
@@ -19,19 +19,17 @@
 
 
 %typemap(directorin) rl::CeGuiStringVector &amp;, const rl::CeGuiStringVector &amp; {
-  VALUE arr = rb_ary_new2($1-&gt;size()); 
+  $result = rb_ary_new2($1-&gt;size()); 
   rl::CeGuiStringVector::iterator i = $1-&gt;begin(), iend = $1-&gt;end();
   for ( ; i!=iend; i++ )
-    rb_ary_push(arr, rb_str_new2(&amp;(*i)));
-  $result = arr;
+    rb_ary_push($result, rb_str_new2(&amp;(*i)));
 }
 
 %typemap(directorin) rl::CeGuiStringVector, const rl::CeGuiStringVector {
-  VALUE arr = rb_ary_new2($1.size()); 
+  $result = rb_ary_new2($1.size()); 
   rl::CeGuiStringVector::iterator i = $1.begin(), iend = $1.end();
   for ( ; i!=iend; i++ )
-    rb_ary_push(arr, rb_str_new2(*i));
-  $result = arr;
+    rb_ary_push($result, rb_str_new2(*i));
 }
 
 %typemap(directorout) rl::CeGuiStringVector , const rl::CeGuiStringVector {

Modified: rl/trunk/engine/script/swig/TypeRlProperty.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeRlProperty.swig	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/TypeRlProperty.swig	2008-09-03 06:47:34 UTC (rev 4498)
@@ -213,7 +213,7 @@
 
 
 %typemap(typecheck) rl::Property, const rl::Property, rl::Property&amp;, const rl::Property&amp;, rl::Property*, const rl::Property* 
-{
+&quot;
     if (TYPE($input) == T_FLOAT 
         || TYPE($input) == T_FIXNUM 
 	    || TYPE($input) == T_STRING
@@ -226,7 +226,7 @@
     }
     
     return 0;
-}
+&quot;
 
 %typemap(in) rl::Property, const rl::Property
 &quot;   
@@ -249,9 +249,7 @@
 &quot;   delete $1;&quot;
 
 %typemap(directorout) rl::Property, const rl::Property, rl::Property&amp;, const rl::Property&amp;
-&quot;   
-	$result = rl::convertValueToProperty($1);
-&quot;
+&quot;   $result = rl::convertValueToProperty($1);&quot;
 
 %typemap(directorout) rl::Property*, const rl::Property*
 &quot;   

Modified: rl/trunk/engine/script/swig/TypeRlPropertyKeys.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeRlPropertyKeys.swig	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/TypeRlPropertyKeys.swig	2008-09-03 06:47:34 UTC (rev 4498)
@@ -50,14 +50,14 @@
 
 
 %typemap(typecheck) rl::PropertyKeys, const rl::PropertyKeys 
-{
+&quot;
     if (TYPE($input) == T_ARRAY) 
     {
         return 1;
     }
     
     return 0;
-}
+&quot;
 
 %typemap(in) rl::PropertyKeys, const rl::PropertyKeys
 &quot;   

Modified: rl/trunk/engine/script/swig/TypeStdPairIntInt.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeStdPairIntInt.swig	2008-09-02 05:26:41 UTC (rev 4497)
+++ rl/trunk/engine/script/swig/TypeStdPairIntInt.swig	2008-09-03 06:47:34 UTC (rev 4498)
@@ -18,46 +18,38 @@
 	std::pair&lt;int,int&gt;*, std::pair&lt;int,int&gt;&amp;, 
 	const std::pair&lt;int,int&gt;*, const std::pair&lt;int,int&gt;&amp;, 
 	std::pair&lt;int,int&gt;, const std::pair&lt;int,int&gt;
-{
-   $1 = TYPE($input) == T_ARRAY &amp;&amp; RARRAY($input)-&gt;len == 2 ? 1 : 0;
-}
+&quot;   $1 = TYPE($input) == T_ARRAY &amp;&amp; RARRAY($input)-&gt;len == 2 ? 1 : 0; &quot;
 
 
 %typemap(in) std::pair&lt;int,int&gt;*, std::pair&lt;int,int&gt;&amp;,
    const std::pair&lt;int,int&gt;*, const std::pair&lt;int,int&gt;&amp;
-{
-	std::pair&lt;int, int&gt;* val = new std::pair&lt;int, int&gt;();
-	val-&gt;first = NUM2INT(rb_ary_entry($input, 0)), 
-	val-&gt;second = NUM2INT(rb_ary_entry($input, 1));
-	
-	$1 = val;
-}
+&quot;
+	$1 = new std::pair&lt;int, int&gt;();
+	$1-&gt;first = NUM2INT(rb_ary_entry($input, 0)), 
+	$1-&gt;second = NUM2INT(rb_ary_entry($input, 1));
+&quot;
+
 %typemap(freearg) std::pair&lt;int,int&gt;*, std::pair&lt;int,int&gt;&amp;, 
-const std::pair&lt;int,int&gt;*, const std::pair&lt;int,int&gt;&amp;  {
-   delete $1;
-}
+const std::pair&lt;int,int&gt;*, const std::pair&lt;int,int&gt;&amp;
+   &quot;delete $1;&quot;
 
 %typemap(in) std::pair&lt;int,int&gt;, const std::pair&lt;int,int&gt;
-{
+&quot;
 	$1.first = NUM2INT(rb_ary_entry($input, 0)), 
 	$1.second = NUM2INT(rb_ary_entry($input, 1));
-}
+&quot;
 
 %typemap(out) std::pair&lt;int,int&gt;, const std::pair&lt;int,int&gt;
-{
-	VALUE array = rb_ary_new();
-	rb_ary_push(array, rb_int_new($1.first));
-	rb_ary_push(array, rb_int_new($1.second));
-	$result = array;
-}
+&quot;
+	$result = rb_ary_new();
+	rb_ary_push($result, rb_int_new($1.first));
+	rb_ary_push($result, rb_int_new($1.second));
+&quot;
 
 %typemap(out) std::pair&lt;int,int&gt;*, std::pair&lt;int,int&gt;&amp;,
    const std::pair&lt;int,int&gt;*, const std::pair&lt;int,int&gt;&amp;
-{
-	VALUE array = rb_ary_new();
-	rb_ary_push(array, rb_int_new($1-&gt;first));
-	rb_ary_push(array, rb_int_new($1-&gt;second));
-	$result = array;
-}
-
-
+&quot;
+	$result = rb_ary_new();
+	rb_ary_push($result, rb_int_new($1-&gt;first));
+	rb_ary_push($result, rb_int_new($1-&gt;second));
+&quot;
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001554.html">[Dsa-hl-svn] r4497 - rl/trunk/Mac/tools
</A></li>
	<LI>Next message: <A HREF="001556.html">[Dsa-hl-svn] r4499 - rl/trunk/Mac/Rastullah.xcodeproj
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1555">[ date ]</a>
              <a href="thread.html#1555">[ thread ]</a>
              <a href="subject.html#1555">[ subject ]</a>
              <a href="author.html#1555">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
