<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r4528 - in rl/branches/persistence: ai/include core	core/include core/src rules/include rules/src script/include	script/src script/swig ui/include ui/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4528%20-%20in%20rl/branches/persistence%3A%20ai/include%20core%0A%09core/include%20core/src%20rules/include%20rules/src%20script/include%0A%09script/src%20script/swig%20ui/include%20ui/src&In-Reply-To=%3C200809281610.m8SGAt0K017757%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001584.html">
   <LINK REL="Next"  HREF="001586.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r4528 - in rl/branches/persistence: ai/include core	core/include core/src rules/include rules/src script/include	script/src script/swig ui/include ui/src</H1>
    <B>timm at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4528%20-%20in%20rl/branches/persistence%3A%20ai/include%20core%0A%09core/include%20core/src%20rules/include%20rules/src%20script/include%0A%09script/src%20script/swig%20ui/include%20ui/src&In-Reply-To=%3C200809281610.m8SGAt0K017757%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r4528 - in rl/branches/persistence: ai/include core	core/include core/src rules/include rules/src script/include	script/src script/swig ui/include ui/src">timm at mail.berlios.de
       </A><BR>
    <I>Sun Sep 28 18:10:55 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001584.html">[Dsa-hl-svn] r4527 - rl/branches
</A></li>
        <LI>Next message: <A HREF="001586.html">[Dsa-hl-svn] r4529 - in rl/trunk/engine/rules: include src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1585">[ date ]</a>
              <a href="thread.html#1585">[ thread ]</a>
              <a href="subject.html#1585">[ subject ]</a>
              <a href="author.html#1585">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: timm
Date: 2008-09-28 18:10:32 +0200 (Sun, 28 Sep 2008)
New Revision: 4528

Modified:
   rl/branches/persistence/ai/include/SteeringVehicle.h
   rl/branches/persistence/core/RlCore2005.vcproj
   rl/branches/persistence/core/include/Job.h
   rl/branches/persistence/core/include/SaveAble.h
   rl/branches/persistence/core/include/SaveAbleCollection.h
   rl/branches/persistence/core/src/Job.cpp
   rl/branches/persistence/core/src/SaveAble.cpp
   rl/branches/persistence/rules/include/Armor.h
   rl/branches/persistence/rules/include/Container.h
   rl/branches/persistence/rules/include/Creature.h
   rl/branches/persistence/rules/include/CreatureController.h
   rl/branches/persistence/rules/include/DsaManager.h
   rl/branches/persistence/rules/include/GameObject.h
   rl/branches/persistence/rules/include/GameObjectManager.h
   rl/branches/persistence/rules/include/Item.h
   rl/branches/persistence/rules/include/Weapon.h
   rl/branches/persistence/rules/src/Armor.cpp
   rl/branches/persistence/rules/src/Container.cpp
   rl/branches/persistence/rules/src/Creature.cpp
   rl/branches/persistence/rules/src/DsaDataLoader.cpp
   rl/branches/persistence/rules/src/DsaManager.cpp
   rl/branches/persistence/rules/src/GameObject.cpp
   rl/branches/persistence/rules/src/GameObjectManager.cpp
   rl/branches/persistence/rules/src/Item.cpp
   rl/branches/persistence/rules/src/Weapon.cpp
   rl/branches/persistence/script/include/UnifiedFactory.h
   rl/branches/persistence/script/src/GameObjectNodeProcessor.cpp
   rl/branches/persistence/script/src/Scene.cpp
   rl/branches/persistence/script/swig/RlCore.head.swig
   rl/branches/persistence/script/swig/RlCore.swig
   rl/branches/persistence/script/swig/RlRules.swig
   rl/branches/persistence/script/swig/RlScript.swig
   rl/branches/persistence/ui/include/ControlState.h
   rl/branches/persistence/ui/include/UiSubsystem.h
   rl/branches/persistence/ui/src/ContainerContentWindow.cpp
   rl/branches/persistence/ui/src/InventoryWindow.cpp
   rl/branches/persistence/ui/src/UiSubsystem.cpp
Log:
- changed id of game object from int to ceguistring
- game object and job are saveables now

Modified: rl/branches/persistence/ai/include/SteeringVehicle.h
===================================================================
--- rl/branches/persistence/ai/include/SteeringVehicle.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/ai/include/SteeringVehicle.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -292,7 +292,7 @@
 		//! the yaw angle in radians
 		//Ogre::Radian mYaw;
 
-        int mCreatureId;
+        CeGuiString mCreatureId;
 
         bool refetchCreature();
 

Modified: rl/branches/persistence/core/RlCore2005.vcproj
===================================================================
--- rl/branches/persistence/core/RlCore2005.vcproj	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/core/RlCore2005.vcproj	2008-09-28 16:10:32 UTC (rev 4528)
@@ -568,42 +568,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\include\SaveAble.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\include\SaveAbleCollection.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\include\SaveAbleFactory.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\include\SaveAbleManager.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\include\SaveGameData.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\include\SaveGameFile.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\include\SaveGameFileReader.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\include\SaveGameFileWriter.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\include\SaveGameManager.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\include\SceneQuery.h&quot;
 				&gt;
 			&lt;/File&gt;
@@ -699,6 +663,46 @@
 					&gt;
 				&lt;/File&gt;
 			&lt;/Filter&gt;
+			&lt;Filter
+				Name=&quot;SaveGame&quot;
+				&gt;
+				&lt;File
+					RelativePath=&quot;.\include\SaveAble.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\SaveAbleCollection.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\SaveAbleFactory.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\SaveAbleManager.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\SaveGameData.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\SaveGameFile.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\SaveGameFileReader.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\SaveGameFileWriter.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\SaveGameManager.h&quot;
+					&gt;
+				&lt;/File&gt;
+			&lt;/Filter&gt;
 		&lt;/Filter&gt;
 		&lt;Filter
 			Name=&quot;Source Files&quot;
@@ -889,42 +893,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\src\SaveAble.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\src\SaveAbleCollection.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\src\SaveAbleFactory.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\src\SaveAbleManager.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\src\SaveGameData.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\src\SaveGameFile.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\src\SaveGameFileReader.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\src\SaveGameFileWriter.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\src\SaveGameManager.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\src\SceneQuery.cpp&quot;
 				&gt;
 			&lt;/File&gt;
@@ -1044,6 +1012,46 @@
 					&gt;
 				&lt;/File&gt;
 			&lt;/Filter&gt;
+			&lt;Filter
+				Name=&quot;SaveGame&quot;
+				&gt;
+				&lt;File
+					RelativePath=&quot;.\src\SaveAble.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\SaveAbleCollection.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\SaveAbleFactory.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\SaveAbleManager.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\SaveGameData.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\SaveGameFile.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\SaveGameFileReader.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\SaveGameFileWriter.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\SaveGameManager.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+			&lt;/Filter&gt;
 		&lt;/Filter&gt;
 		&lt;Filter
 			Name=&quot;Resource Files&quot;

Modified: rl/branches/persistence/core/include/Job.h
===================================================================
--- rl/branches/persistence/core/include/Job.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/core/include/Job.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -20,11 +20,12 @@
 #include &quot;CorePrerequisites.h&quot;
 
 #include &quot;TimeSource.h&quot;
-#include &quot;Properties.h&quot;
 
+#include &quot;SaveAble.h&quot;
+
 namespace rl
 {
-    class _RlCoreExport AbstractJob : public PropertyHolder
+    class _RlCoreExport AbstractJob : public SaveAble
     {
     public:
         enum JobPersistenceType

Modified: rl/branches/persistence/core/include/SaveAble.h
===================================================================
--- rl/branches/persistence/core/include/SaveAble.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/core/include/SaveAble.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -27,14 +27,15 @@
 {
 	class SaveAble;
 
-	class SaveAblePtr : public Ogre::SharedPtr&lt;SaveAble&gt;
+	class _RlCoreExport SaveAblePtr : public Ogre::SharedPtr&lt;SaveAble&gt;
 	{
 	};
 
-	class SaveAble : public PropertyHolder
+	class _RlCoreExport SaveAble : public PropertyHolder
 	{
 	public:
-		SaveAble(int id, bool isSaveAble = true);
+		SaveAble(const CeGuiString &amp;id, bool isSaveAble = true);
+		~SaveAble();
 		void setSaveAble(bool enable);
 		bool isSaveAble();
 
@@ -44,10 +45,10 @@
 		
 		SaveAblePtr getParent() const { return mParentSaveAble; };
 
-		int getId();
+		CeGuiString getId() const;
 	protected:
 		SaveAblePtr mParentSaveAble;
-		int mId;
+		CeGuiString mId;
 		bool mIsSaveAble;
 	};	
 

Modified: rl/branches/persistence/core/include/SaveAbleCollection.h
===================================================================
--- rl/branches/persistence/core/include/SaveAbleCollection.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/core/include/SaveAbleCollection.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -27,6 +27,7 @@
 		void deattachSaveAble(SaveAblePtr saveAble);
 		void deattachSaveAble(int id);
 		void deattachAllSaveAbles();
+		Ogre::String getId();
 	protected:
 		Ogre::String mId;
 	};

Modified: rl/branches/persistence/core/src/Job.cpp
===================================================================
--- rl/branches/persistence/core/src/Job.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/core/src/Job.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -22,7 +22,8 @@
 {
     AbstractJob::AbstractJob(bool isDiscardable, bool destroyWhenDone)
         : mIsDiscardable(isDiscardable), 
-        mDestroyWhenDone(destroyWhenDone)
+        mDestroyWhenDone(destroyWhenDone),
+		SaveAble(&quot;&quot;)
     {
     }
 

Modified: rl/branches/persistence/core/src/SaveAble.cpp
===================================================================
--- rl/branches/persistence/core/src/SaveAble.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/core/src/SaveAble.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -23,10 +23,14 @@
 
 namespace rl
 {
-	SaveAble::SaveAble(int id, bool isSaveAble)
+	SaveAble::SaveAble(const CeGuiString &amp;id, bool isSaveAble)
 	{
 	}
 
+	SaveAble::~SaveAble()
+	{
+	}
+
 	void SaveAble::setSaveAble(bool enable)
 	{
 		mIsSaveAble = true;
@@ -51,7 +55,7 @@
 		return PropertyKeys();
 	}
 
-	int SaveAble::getId()
+	CeGuiString SaveAble::getId() const
 	{
 		return mId;
 	}

Modified: rl/branches/persistence/rules/include/Armor.h
===================================================================
--- rl/branches/persistence/rules/include/Armor.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/include/Armor.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -34,7 +34,7 @@
         static const Ogre::String PROPERTY_G_RS;
 
         // Konstruktor und Destruktor
-		Armor (unsigned int id);
+		Armor (const CeGuiString &amp;id);
 		virtual ~Armor();
 		 
 

Modified: rl/branches/persistence/rules/include/Container.h
===================================================================
--- rl/branches/persistence/rules/include/Container.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/include/Container.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -40,7 +40,7 @@
 		/** Creates a new container
 		 * @param id the gameobject ID
 		 */
-        Container(int id);
+		Container(const CeGuiString &amp;id);
         virtual ~Container(void);
 
 		/// Get the weight capacity (in Stein)

Modified: rl/branches/persistence/rules/include/Creature.h
===================================================================
--- rl/branches/persistence/rules/include/Creature.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/include/Creature.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -149,7 +149,7 @@
             static const Wert WERT_KAMPFUNFAEHIGKEITSSCHWELLE; 
             static const Wert WERT_REGENERATION;
     			
-			Creature(unsigned int id);
+			Creature(const CeGuiString &amp;id);
 
             /// Der Standarddestruktor.
             virtual ~Creature();

Modified: rl/branches/persistence/rules/include/CreatureController.h
===================================================================
--- rl/branches/persistence/rules/include/CreatureController.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/include/CreatureController.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -153,7 +153,7 @@
 
     protected:
         Creature *mCreature;
-        int mGameObjectId;
+		CeGuiString mGameObjectId;
         AbstractLocation mAbstractLocation;
         
         AbstractMovement *mMovement;

Modified: rl/branches/persistence/rules/include/DsaManager.h
===================================================================
--- rl/branches/persistence/rules/include/DsaManager.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/include/DsaManager.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -77,7 +77,7 @@
         Talent* getTalent(const CeGuiString talentName) const;
         Kampftechnik* getKampftechnik(const CeGuiString kampftechnikName) const;
         Eigenschaft* getEigenschaft(const CeGuiString eigenschaftName) const;
-		Creature* getCreature(int id) const;        
+		Creature* getCreature(const CeGuiString &amp;id) const;        
 				
 		int getSteigerKosten(int column, int from, int to) const;
 		int getSteigerKosten(int column, int from) const;
@@ -94,7 +94,7 @@
         Ogre::Real mTimeScale;
 
         typedef std::map&lt;CeGuiString, Talent*&gt; TalentMap;
-		typedef std::map&lt;int, Creature*&gt; CreatureMap;
+		typedef std::map&lt;CeGuiString, Creature*&gt; CreatureMap;
         typedef std::map&lt;CeGuiString, Kampftechnik*&gt; KampftechnikMap;
 		typedef std::map&lt;CeGuiString, Eigenschaft*&gt; EigenschaftMap;
 		EigenschaftMap mEigenschaften;

Modified: rl/branches/persistence/rules/include/GameObject.h
===================================================================
--- rl/branches/persistence/rules/include/GameObject.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/include/GameObject.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -21,6 +21,7 @@
 
 #include &quot;Action.h&quot;
 #include &quot;Actor.h&quot;
+#include &quot;SaveAble.h&quot;
 #include &quot;RulesConstants.h&quot;
 #include &quot;ObjectStateChangeEventSource.h&quot;
 #include &quot;Properties.h&quot;
@@ -40,11 +41,11 @@
     class _RlRulesExport GameObject 
         : public ActorNotifiedObject, 
           public ObjectStateChangeEventSource,
-          public PropertyHolder
+		  public SaveAble
     {
     public:
         typedef std::vector&lt;std::pair&lt;Action*, int&gt; &gt; ActionOptionVector;
-        static const unsigned int NO_OBJECT_ID = 0;
+		static const CeGuiString NO_OBJECT_ID;
         
         static const Ogre::String CLASS_NAME;
 
@@ -68,11 +69,9 @@
         static const CeGuiString DEFAULT_VIEW_OBJECT_ACTION;
         static const CeGuiString DEFAULT_VIEW_OBJECT_ACTION_DEBUG;
 
-        GameObject(unsigned int id);
+		GameObject(const CeGuiString &amp;id);
         virtual ~GameObject();
 
-        int getId() const;
-
         const CeGuiString&amp; getClassId() const;
         void setClassId(const CeGuiString&amp; classId);
         
@@ -192,7 +191,6 @@
         void _checkEffects();
 
     protected:
-        int mId;
         GameObjectState mState;
         
         CeGuiString mName;

Modified: rl/branches/persistence/rules/include/GameObjectManager.h
===================================================================
--- rl/branches/persistence/rules/include/GameObjectManager.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/include/GameObjectManager.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -35,8 +35,8 @@
     public:
         GameObjectFactory();
 
-        GameObject* createGameObject(const Ogre::String&amp; classname, unsigned int id);
-        virtual GameObject* createRubyGameObject(const Ogre::String&amp; classname, unsigned int id) = 0;
+		GameObject* createGameObject(const Ogre::String&amp; classname, const CeGuiString &amp;id);
+        virtual GameObject* createRubyGameObject(const Ogre::String&amp; classname, const CeGuiString &amp;id) = 0;
     };
 
     class _RlRulesExport GameObjectManager : 
@@ -48,10 +48,10 @@
         GameObjectManager();
         ~GameObjectManager();
 
-        GameObject* getGameObject(unsigned int id) const;
-        GameObject* createGameObject(const CeGuiString&amp; classId, unsigned int id = 0);
+		GameObject* getGameObject(const CeGuiString &amp;id) const;
+		GameObject* createGameObject(const CeGuiString&amp; classId, const CeGuiString &amp;id = &quot;&quot;);
 		
-        void deleteGameObject(unsigned int id);
+		void deleteGameObject(const CeGuiString &amp;id);
         void deleteGameObject(GameObject* obj);
         void deleteAllGameObjects();
 
@@ -79,7 +79,7 @@
 
         Ogre::StringVector mScriptPatterns;
 
-        std::map&lt;unsigned int, GameObject*&gt; mGameObjects;
+		std::map&lt;CeGuiString, GameObject*&gt; mGameObjects;
         ClassPropertyMap mClassProperties;
         unsigned int mGeneratedId;
         GameObjectFactory* mGameObjectFactory;

Modified: rl/branches/persistence/rules/include/Item.h
===================================================================
--- rl/branches/persistence/rules/include/Item.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/include/Item.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -62,7 +62,7 @@
         static const Ogre::String PROPERTY_SIZE;
         static const Ogre::String PROPERTY_SUBMESHNAME;
 
-		Item(unsigned int id);
+		Item(const CeGuiString &amp;id);
         virtual ~Item(void);
 
 		void setItemType(ItemType itemType);

Modified: rl/branches/persistence/rules/include/Weapon.h
===================================================================
--- rl/branches/persistence/rules/include/Weapon.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/include/Weapon.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -50,7 +50,7 @@
         static const Ogre::String PROPERTY_TP_KAMPFTECHNIK;
         static const Ogre::String PROPERTY_NATURAL;
 
-		Weapon (unsigned int id);
+		Weapon (const CeGuiString &amp;id);
         virtual ~Weapon(void);
 
 		void setTp(int d6, int d20, int mod);

Modified: rl/branches/persistence/rules/src/Armor.cpp
===================================================================
--- rl/branches/persistence/rules/src/Armor.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/src/Armor.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -31,7 +31,7 @@
     const Ogre::String Armor::PROPERTY_G_BE = &quot;g_be&quot;;
     const Ogre::String Armor::PROPERTY_G_RS = &quot;g_rs&quot;;
 
-	Armor::Armor(unsigned int id)
+	Armor::Armor(const CeGuiString &amp;id)
 		: Item(id),
 		mGRS(0),
 		mGBE(0),

Modified: rl/branches/persistence/rules/src/Container.cpp
===================================================================
--- rl/branches/persistence/rules/src/Container.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/src/Container.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -38,7 +38,7 @@
     const Ogre::String Container::PROPERTY_CONTENT_OBJECTS = &quot;objects&quot;;
     const Ogre::String Container::PROPERTY_CONTENT_POSITIONS = &quot;positions&quot;;
 
-    Container::Container(int id)
+	Container::Container(const CeGuiString &amp;id)
         : Item(id),
           mCapacity(0.0),
 		  mVolume(std::make_pair(1,1))

Modified: rl/branches/persistence/rules/src/Creature.cpp
===================================================================
--- rl/branches/persistence/rules/src/Creature.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/src/Creature.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -82,7 +82,7 @@
 
 
 
-    Creature::Creature(unsigned int id)
+	Creature::Creature(const CeGuiString &amp;id)
         : GameObject(id),
 		mCurrentLe(0),
         mCurrentAu(0),

Modified: rl/branches/persistence/rules/src/DsaDataLoader.cpp
===================================================================
--- rl/branches/persistence/rules/src/DsaDataLoader.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/src/DsaDataLoader.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -234,7 +234,7 @@
 			getValueAsString(getChildNamed(personXml, &quot;Beschreibung&quot;));
 
         //@warning replace this by correct loading process
-		Creature* rval = new Creature(10000);
+		Creature* rval = new Creature(&quot;10000&quot;);
         rval-&gt;setName(name);
         rval-&gt;setDescription(desc);
 

Modified: rl/branches/persistence/rules/src/DsaManager.cpp
===================================================================
--- rl/branches/persistence/rules/src/DsaManager.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/src/DsaManager.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -291,7 +291,7 @@
 		return sum;
 	}
 
-	Creature* DsaManager::getCreature(int id) const
+	Creature* DsaManager::getCreature(const CeGuiString &amp;id) const
 	{
 		CreatureMap::const_iterator it = mCreatures.find(id);
         if (it != mCreatures.end())

Modified: rl/branches/persistence/rules/src/GameObject.cpp
===================================================================
--- rl/branches/persistence/rules/src/GameObject.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/src/GameObject.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -41,6 +41,8 @@
 
     const Ogre::String GameObject::CLASS_NAME = &quot;GameObject&quot;;
 
+	const CeGuiString GameObject::NO_OBJECT_ID = &quot;&quot;;
+
     const Ogre::String GameObject::PROPERTY_CLASS_ID = &quot;classid&quot;;
     const Ogre::String GameObject::PROPERTY_OBJECT_ID = &quot;id&quot;;
     const Ogre::String GameObject::PROPERTY_BASE_CLASS = &quot;baseclass&quot;;
@@ -58,9 +60,8 @@
     const Ogre::String GameObject::PROPERTY_ACTIONS = &quot;actions&quot;;
     const Ogre::String GameObject::PROPERTY_DEFAULT_ACTION = &quot;defaultaction&quot;;
 
-    GameObject::GameObject(unsigned int id)
-        :   mId(id),
-            mName(&quot;&quot;),
+	GameObject::GameObject(const CeGuiString &amp;id)
+        :   mName(&quot;&quot;),
             mDescription(&quot;&quot;),
             mMeshfile(&quot;&quot;),
 			mMeshParts(),
@@ -74,7 +75,8 @@
             mGeometryType(GT_NONE),
             mDefaultAction(DEFAULT_VIEW_OBJECT_ACTION),
             mState(GOS_LOADED),
-            mScene(&quot;&quot;)
+            mScene(&quot;&quot;),
+			SaveAble(id)
     {
         mEffectManager = new EffectManager(this);
 
@@ -106,11 +108,6 @@
     	delete mEffectManager;
     }
 
-    int GameObject::getId() const
-    {
-        return mId;
-    }
-
     const CeGuiString&amp; GameObject::getClassId() const
     {
         return mClassId;
@@ -185,7 +182,7 @@
 
         mActions.push_back(make_pair(action, option));
         LOG_MESSAGE(Logger::RULES,
-            &quot;Bei GameObject #&quot;+CEGUI::PropertyHelper::intToString(mId)+
+            &quot;Bei GameObject #&quot; + mId +
             &quot; (&quot;+getName()+&quot;) wurde Aktion &quot;+action-&gt;getName().c_str()+&quot; hinzugefuegt.&quot;);
     }
 
@@ -644,7 +641,7 @@
     {
         if (!mActor)
         {
-            Ogre::String actorName = Ogre::StringConverter::toString(mId);
+            Ogre::String actorName = mId.c_str();
 			Actor* actor = NULL;
 
 			if (mMeshfile.empty() &amp;&amp; mMeshParts.empty())
@@ -652,7 +649,7 @@
 				LOG_ERROR(
 					Logger::RULES,
 					&quot;Neither mesh file nor mesh parts are set on gameobject '&quot; + getName()
-					+ &quot;' (id: &quot; + getId() + &quot;). Can't create actor!&quot;);
+					+ &quot;' (id: &quot; + getId().c_str() + &quot;). Can't create actor!&quot;);
 			}
 			else if (!mMeshParts.empty())
 			{
@@ -728,7 +725,7 @@
                 LOG_ERROR(
                     Logger::RULES,
                     &quot;Error placing gameobject '&quot;
-                    + Ogre::StringConverter::toString(mId)
+                    + mId
                     + &quot;' into scene &quot;
                     + mMeshfile);
             }

Modified: rl/branches/persistence/rules/src/GameObjectManager.cpp
===================================================================
--- rl/branches/persistence/rules/src/GameObjectManager.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/src/GameObjectManager.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -80,9 +80,9 @@
 
     }
 
-    GameObject* GameObjectManager::getGameObject(unsigned int id) const
+	GameObject* GameObjectManager::getGameObject(const CeGuiString &amp;id) const
     {
-        std::map&lt;unsigned int, GameObject*&gt;::const_iterator it
+		std::map&lt;CeGuiString , GameObject*&gt;::const_iterator it
                 = mGameObjects.find(id);
 
         if (it != mGameObjects.end())
@@ -96,7 +96,7 @@
     std::list&lt;GameObject*&gt; GameObjectManager::getAllGameObjects() const
     {
         std::list&lt;GameObject*&gt; gos;
-        std::map&lt;unsigned int, GameObject*&gt;::const_iterator it;
+		std::map&lt;CeGuiString, GameObject*&gt;::const_iterator it;
 
         //
         //    Run through all GOs and put them into the list
@@ -115,11 +115,11 @@
     }
 
     GameObject* GameObjectManager::createGameObject(
-        const CeGuiString&amp; classId, unsigned int id)
+		const CeGuiString&amp; classId,const CeGuiString &amp;id)
     {
 		LOG_MESSAGE(&quot;GameObjectManager&quot;, &quot;Create/Get GameObject of type &quot; + classId
-			+ &quot; #&quot; + Ogre::StringConverter::toString((int)id));
-        unsigned int goId;
+			+ &quot; #&quot; + id);
+		CeGuiString goId;
 
         if (id != GameObject::NO_OBJECT_ID)
         {
@@ -155,7 +155,7 @@
         return go;
     }
 
-    void GameObjectManager::deleteGameObject(unsigned int id)
+	void GameObjectManager::deleteGameObject(const CeGuiString &amp;id)
     {
         if(mGameObjects.find(id) != mGameObjects.end())
         {
@@ -200,7 +200,7 @@
 		if (posDivider != CeGuiString::npos)
 		{
 			Ogre::String classId(serializedString.substr(0, posDivider).c_str());
-			unsigned int goid = CEGUI::PropertyHelper::stringToUint(serializedString.substr(posDivider+1));
+			Ogre::String goid = serializedString.substr(posDivider+1).c_str();
 			return createGameObject(classId, goid);
 		}
 
@@ -209,7 +209,7 @@
 
 	Property GameObjectManager::toProperty(const GameObject* const go) const
 	{
-		return Property(go-&gt;getClassId() + &quot;|&quot; + CEGUI::PropertyHelper::uintToString(go-&gt;getId()));
+		return Property(go-&gt;getClassId() + &quot;|&quot; + go-&gt;getId());
 	}
 
     const PropertyRecordPtr GameObjectManager::getClassProperties(const CeGuiString&amp; classId) const
@@ -261,7 +261,7 @@
     {
     }
 
-    GameObject* GameObjectFactory::createGameObject(const Ogre::String&amp; classname, unsigned int id)
+	GameObject* GameObjectFactory::createGameObject(const Ogre::String&amp; classname, const CeGuiString &amp;id)
     {
         if (classname == GameObject::CLASS_NAME)
         {

Modified: rl/branches/persistence/rules/src/Item.cpp
===================================================================
--- rl/branches/persistence/rules/src/Item.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/src/Item.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -34,7 +34,7 @@
     const Ogre::String Item::PROPERTY_SIZE = &quot;size&quot;;
     const Ogre::String Item::PROPERTY_SUBMESHNAME = &quot;submeshfile&quot;;
 
-    Item::Item(unsigned int id)
+	Item::Item(const CeGuiString &amp;id)
         : GameObject(id),
 		mItemType(ITEMTYPE_OTHER),
 		mImageName(&quot;&quot;),

Modified: rl/branches/persistence/rules/src/Weapon.cpp
===================================================================
--- rl/branches/persistence/rules/src/Weapon.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/rules/src/Weapon.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -37,7 +37,7 @@
     const Ogre::String Weapon::PROPERTY_TP_KAMPFTECHNIK = &quot;kampftechnik&quot;;
     const Ogre::String Weapon::PROPERTY_NATURAL = &quot;natural&quot;;
 
-	Weapon::Weapon(unsigned int id)
+	Weapon::Weapon(const CeGuiString &amp;id)
 		: Item(id),
         mTp(0, 0, 0),
 		mTpKk(0, 0),

Modified: rl/branches/persistence/script/include/UnifiedFactory.h
===================================================================
--- rl/branches/persistence/script/include/UnifiedFactory.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/script/include/UnifiedFactory.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -35,7 +35,7 @@
 
         virtual Trigger* createTrigger(const Ogre::String&amp; classname, const Ogre::String&amp; name) = 0;
         virtual Effect* createEffect(const Ogre::String&amp; name, int stufe) = 0;
-        virtual GameObject* createRubyGameObject(const Ogre::String&amp; classname, unsigned int id) = 0;
+        virtual GameObject* createRubyGameObject(const Ogre::String&amp; classname, const CeGuiString &amp;id) = 0;
         virtual SteeringBehaviour* createBehaviour(const Ogre::String&amp; classname) = 0;
     };
 }

Modified: rl/branches/persistence/script/src/GameObjectNodeProcessor.cpp
===================================================================
--- rl/branches/persistence/script/src/GameObjectNodeProcessor.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/script/src/GameObjectNodeProcessor.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -40,7 +40,7 @@
 
         Ogre::String classname = getAttributeValueAsStdString(nodeElem, &quot;class&quot;);
 
-        unsigned int goid = GameObject::NO_OBJECT_ID;
+        CeGuiString goid = GameObject::NO_OBJECT_ID;
 
         if (hasAttribute(nodeElem, &quot;id&quot;))
         {

Modified: rl/branches/persistence/script/src/Scene.cpp
===================================================================
--- rl/branches/persistence/script/src/Scene.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/script/src/Scene.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -102,7 +102,7 @@
                 PropertyRecord cur(it-&gt;toMap());
                 GameObject* go = GameObjectManager::getSingleton().createGameObject(
                     cur.getProperty(GameObject::PROPERTY_CLASS_ID).toString(),
-                    cur.getProperty(GameObject::PROPERTY_OBJECT_ID).toInt());
+					cur.getProperty(GameObject::PROPERTY_OBJECT_ID).toString());
             }
         }
         else

Modified: rl/branches/persistence/script/swig/RlCore.head.swig
===================================================================
--- rl/branches/persistence/script/swig/RlCore.head.swig	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/script/swig/RlCore.head.swig	2008-09-28 16:10:32 UTC (rev 4528)
@@ -69,6 +69,8 @@
 #include &quot;LinearSoundFadeFunctor.h&quot;
 #include &quot;PolynomicSoundFadeFunctor.h&quot;
 #include &quot;TimeSource.h&quot;
+#include &quot;SaveAble.h&quot;
+#include &quot;SaveAbleManager.h&quot;
 
 #undef message
 #undef send

Modified: rl/branches/persistence/script/swig/RlCore.swig
===================================================================
--- rl/branches/persistence/script/swig/RlCore.swig	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/script/swig/RlCore.swig	2008-09-28 16:10:32 UTC (rev 4528)
@@ -456,14 +456,14 @@
 	rl::Sound* getSound();
 };
 
-class SoundStitchingObject : public rl::ActorControlledObject
-{
-public:
-    /// Konstruktor
-    SoundStitchingObject(rl::SoundStitching *stitching, const Ogre::String &amp;name);
-    /// Destruktor
-    virtual ~SoundStitchingObject();
-      
+class SoundStitchingObject : public rl::ActorControlledObject
+{
+public:
+    /// Konstruktor
+    SoundStitchingObject(rl::SoundStitching *stitching, const Ogre::String &amp;name);
+    /// Destruktor
+    virtual ~SoundStitchingObject();
+      
     /**
      * Interne Methode. Wird vom Aktor aufgerufen, wenn sich dessen
      * Status gendert hat. (Position, Orientierung, etc)
@@ -478,59 +478,59 @@
     
     
     virtual Ogre::String getObjectType() const;
-
-    // Wollen wir 3D?
-    bool is3d() const;
-    // Setzen des 3D-Flags.
-    void set3d(bool is3d);
-
-    // Sollen der Sound wiederholt werden?
-    bool isLooping() const;
-    // Setzen des Loop-Flags.
-    void setLooping(bool looping);
-    float getLength() const;
-    /// Pausiert den Sound.
+
+    // Wollen wir 3D?
+    bool is3d() const;
+    // Setzen des 3D-Flags.
+    void set3d(bool is3d);
+
+    // Sollen der Sound wiederholt werden?
+    bool isLooping() const;
+    // Setzen des Loop-Flags.
+    void setLooping(bool looping);
+    float getLength() const;
+    /// Pausiert den Sound.
     void pause();
     /// Pausiert den Sound.
-    void pause(bool pausing);
-    /// Ist der Sound pausiert?
-    bool isPaused();
-    /// Stoppt den Sound.
-    virtual void stop();
-    /// Gibt die eingestellte relative Lautstaerke der Soundquelle zurueck (0.0 ... 1.0)
-    const Ogre::Real getVolume() const; 
-    /// Setzt die relative Lautstaerke der Soundquelle (0.0 .. 1.0).
-    void setVolume(const Ogre::Real gain);
-    // Sets the priority of this sound
-    void setPriority(const int priority);
-    // Gets the priority of this sound
-    const int getPriority() const;
+    void pause(bool pausing);
+    /// Ist der Sound pausiert?
+    bool isPaused();
+    /// Stoppt den Sound.
+    virtual void stop();
+    /// Gibt die eingestellte relative Lautstaerke der Soundquelle zurueck (0.0 ... 1.0)
+    const Ogre::Real getVolume() const; 
+    /// Setzt die relative Lautstaerke der Soundquelle (0.0 .. 1.0).
+    void setVolume(const Ogre::Real gain);
+    // Sets the priority of this sound
+    void setPriority(const int priority);
+    // Gets the priority of this sound
+    const int getPriority() const;
 	/// L&#228;dt den Ton
 	void load();
     /// Entl&#228;dt den Sound.
     void unload();
     /// Aktivieren
     virtual void setActive(bool active);
-
-    /// Start sound sequence
-    void start();
-    /// Spielt den Sound ab.
-    virtual void play(bool destroyWhenDone=false);
-    /// Laeuft der Sound noch
-    virtual const bool isPlaying() const = 0;
-	virtual bool isMeshObject() const;
-
-    /// Count of configured slots.
-    unsigned int getNumSlots();
-    /// Add a sound resource to the cache overwritting existing sound resource.
-    virtual void addSoundToCache(rl::CeGuiString label, rl::SoundResourcePtr sound);
-    /// Assign a sound recource to a slot.
-    virtual void putSoundIntoSlot(unsigned int, rl::CeGuiString label) = 0;
-    /// Get the slot of the plaing sound.
-    virtual unsigned int getPlayingSlot() = 0;
-}; 
-
 
+    /// Start sound sequence
+    void start();
+    /// Spielt den Sound ab.
+    virtual void play(bool destroyWhenDone=false);
+    /// Laeuft der Sound noch
+    virtual const bool isPlaying() const = 0;
+	virtual bool isMeshObject() const;
+
+    /// Count of configured slots.
+    unsigned int getNumSlots();
+    /// Add a sound resource to the cache overwritting existing sound resource.
+    virtual void addSoundToCache(rl::CeGuiString label, rl::SoundResourcePtr sound);
+    /// Assign a sound recource to a slot.
+    virtual void putSoundIntoSlot(unsigned int, rl::CeGuiString label) = 0;
+    /// Get the slot of the plaing sound.
+    virtual unsigned int getPlayingSlot() = 0;
+}; 
+
+
 class ParticleSystemObject : public rl::ActorControlledObject
 {
 public:
@@ -788,6 +788,24 @@
     void setPaused(bool paused);
 };
 
+%feature(&quot;director&quot;) SaveAble;
+class rl::SaveAble
+{
+public:
+	SaveAble(const rl::CeGuiString &amp;id, bool isSaveAble = true);
+	~SaveAble();
+	void setSaveAble(bool enable);
+	bool isSaveAble();
+
+	const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
+    void setProperty(const rl::CeGuiString&amp; key, const rl::Property&amp; value);
+    rl::PropertyKeys getAllPropertyKeys() const;
+	
+	rl::SaveAblePtr getParent() const;
+
+	rl::CeGuiString getId() const;
+};
+
 class Sound 
 {
 private:

Modified: rl/branches/persistence/script/swig/RlRules.swig
===================================================================
--- rl/branches/persistence/script/swig/RlRules.swig	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/script/swig/RlRules.swig	2008-09-28 16:10:32 UTC (rev 4528)
@@ -108,14 +108,14 @@
       
         static DsaManager&amp; getSingleton();
         rl::Talent* getTalent(const rl::CeGuiString name) const;
-        rl::Creature* getCreature(const int id) const;
+        rl::Creature* getCreature(const rl::CeGuiString &amp;id) const;
     };
     
     %feature(&quot;director&quot;) GameObjectFactory; 
     class GameObjectFactory
     {
     public:
-        virtual rl::GameObject* createRubyGameObject(const Ogre::String&amp; classname, unsigned int id) = 0;
+        virtual rl::GameObject* createRubyGameObject(const Ogre::String&amp; classname, const rl::CeGuiString &amp;id) = 0;
         GameObjectFactory();
         virtual ~GameObjectFactory();
     };
@@ -124,8 +124,8 @@
     {
     public:
         static rl::GameObjectManager&amp; getSingleton();
-        rl::GameObject* createGameObject(const Ogre::String&amp; classId, unsigned int id = 0);
-        rl::GameObject* getGameObject(unsigned int id) const;
+        rl::GameObject* createGameObject(const Ogre::String&amp; classId, const rl::CeGuiString &amp;id = &quot;&quot;);
+        rl::GameObject* getGameObject(const rl::CeGuiString id) const;
         void setGameObjectFactory(rl::GameObjectFactory* gof);
 
     private:
@@ -367,14 +367,12 @@
     %constant unsigned long QUERYFLAG_PLAYER = rl::QUERYFLAG_PLAYER;
     
     %feature(&quot;director&quot;) GameObject;
-    class GameObject: public ObjectStateChangeEventSource
+    class GameObject: public ObjectStateChangeEventSource, public SaveAble
     {
     public:
-        GameObject(unsigned int id);
+        GameObject(const rl::CeGuiString &amp;id);
         virtual ~GameObject();
 
-        virtual unsigned int getId();
-
         virtual const rl::CeGuiString getName() const;
         virtual void setName(rl::CeGuiString name);
 
@@ -479,7 +477,7 @@
             ITEMTYPE_ALL_ITEMS  = ~(0)
         };
     
-        Item(unsigned int id);
+        Item(const rl::CeGuiString &amp;id);
         virtual ~Item();
         
         virtual void placeIntoScene();
@@ -513,7 +511,7 @@
     public:
         enum Distanzklasse { DK_H=0, DK_N, DK_S, DK_P };
 
-        Weapon(unsigned int id);
+        Weapon(const rl::CeGuiString &amp;id);
         virtual ~Weapon();
                 
         void setTp(int d6, int d20, int mod);
@@ -547,7 +545,7 @@
         static const CeGuiString Armor::PROPERTY_G_BE = &quot;g_be&quot;;
         static const CeGuiString Armor::PROPERTY_G_RS = &quot;g_rs&quot;;
         
-        Armor(unsigned int id);
+        Armor(const rl::CeGuiString &amp;id);
         virtual ~Armor();
 
         virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
@@ -562,7 +560,7 @@
     class Container : public Item
     {
     public:
-        Container(unsigned int id);
+        Container(const rl::CeGuiString &amp;id);
         virtual ~Container();
 
         Ogre::Real getCapacity() const;
@@ -729,7 +727,7 @@
         static const Creature::Wert Creature::WERT_REGENERATION = &quot;Regeneration&quot;;
         
         
-        Creature(unsigned int id);
+        Creature(const rl::CeGuiString &amp;id);
         virtual ~Creature();
 
         virtual int getLe();

Modified: rl/branches/persistence/script/swig/RlScript.swig
===================================================================
--- rl/branches/persistence/script/swig/RlScript.swig	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/script/swig/RlScript.swig	2008-09-28 16:10:32 UTC (rev 4528)
@@ -64,7 +64,7 @@
 
 		virtual rl::Trigger* createTrigger(const Ogre::String&amp; classname, const Ogre::String&amp; triggername) = 0;
         virtual rl::Effect* createEffect(const Ogre::String&amp; name, int stufe) = 0;
-        virtual rl::GameObject* createRubyGameObject(const Ogre::String&amp; classname, unsigned int id) = 0;
+        virtual rl::GameObject* createRubyGameObject(const Ogre::String&amp; classname, const rl::CeGuiString &amp;id) = 0;
         virtual rl::SteeringBehaviour* createBehaviour(const Ogre::String&amp; classname) = 0;
     };
 

Modified: rl/branches/persistence/ui/include/ControlState.h
===================================================================
--- rl/branches/persistence/ui/include/ControlState.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/ui/include/ControlState.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -77,7 +77,7 @@
         bool isMouseUsedByCegui() const;
 
         Creature* mCharacter;
-        int mCharacterId;
+        CeGuiString mCharacterId;
 
         Actor* mCameraActor;
         Actor* mCharacterActor;

Modified: rl/branches/persistence/ui/include/UiSubsystem.h
===================================================================
--- rl/branches/persistence/ui/include/UiSubsystem.h	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/ui/include/UiSubsystem.h	2008-09-28 16:10:32 UTC (rev 4528)
@@ -58,7 +58,7 @@
 
     private:
         Creature* mCharacter;
-        int mCharacterId;
+        CeGuiString mCharacterId;
 
 	    MessagePump::ScopedConnection mSceneClearingConnection;
         MessagePump::ScopedConnection mGameObjectsLoadedConnection;

Modified: rl/branches/persistence/ui/src/ContainerContentWindow.cpp
===================================================================
--- rl/branches/persistence/ui/src/ContainerContentWindow.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/ui/src/ContainerContentWindow.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -209,7 +209,7 @@
 
 		CeGuiString dragContainerName =
 			mWindow-&gt;getName() +  &quot;/item/&quot;
-			+ Ogre::StringConverter::toString(item-&gt;getId())+&quot;_DragContainer&quot;;
+			+ item-&gt;getId()+&quot;_DragContainer&quot;;
 
 		itemhandler = new ItemIconDragContainer(item,
 			dragContainerName);

Modified: rl/branches/persistence/ui/src/InventoryWindow.cpp
===================================================================
--- rl/branches/persistence/ui/src/InventoryWindow.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/ui/src/InventoryWindow.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -194,7 +194,7 @@
     {
 		CeGuiString dragContainerName =
 			mWindow-&gt;getName() +  &quot;/item/&quot;
-			+ Ogre::StringConverter::toString(item-&gt;getId())+&quot;_DragContainer&quot;+
+			+ item-&gt;getId()+&quot;_DragContainer&quot;+
 			(description?&quot;_D&quot;:&quot;_I&quot;);
         return dragContainerName;
     }

Modified: rl/branches/persistence/ui/src/UiSubsystem.cpp
===================================================================
--- rl/branches/persistence/ui/src/UiSubsystem.cpp	2008-09-28 16:08:40 UTC (rev 4527)
+++ rl/branches/persistence/ui/src/UiSubsystem.cpp	2008-09-28 16:10:32 UTC (rev 4528)
@@ -203,7 +203,7 @@
 
     bool UiSubsystem::onGameObjectsLoaded()
     {
-        if (mCharacterId != -1)
+        if (mCharacterId != &quot;&quot;)
         {
             Creature* character = static_cast&lt;Creature*&gt;(GameObjectManager::getSingleton().getGameObject(mCharacterId));
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001584.html">[Dsa-hl-svn] r4527 - rl/branches
</A></li>
	<LI>Next message: <A HREF="001586.html">[Dsa-hl-svn] r4529 - in rl/trunk/engine/rules: include src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1585">[ date ]</a>
              <a href="thread.html#1585">[ thread ]</a>
              <a href="subject.html#1585">[ subject ]</a>
              <a href="author.html#1585">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
