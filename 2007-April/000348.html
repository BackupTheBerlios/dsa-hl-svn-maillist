<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r3277 - in modules: common/scripts minidemo/scripts	techdemo2/scripts techdemo2/scripts/maps
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r3277%20-%20in%20modules%3A%20common/scripts%20minidemo/scripts%0A%09techdemo2/scripts%20techdemo2/scripts/maps&In-Reply-To=%3C200704121216.l3CCGI0Z007753%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000347.html">
   <LINK REL="Next"  HREF="000349.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r3277 - in modules: common/scripts minidemo/scripts	techdemo2/scripts techdemo2/scripts/maps</H1>
    <B>blakharaz at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r3277%20-%20in%20modules%3A%20common/scripts%20minidemo/scripts%0A%09techdemo2/scripts%20techdemo2/scripts/maps&In-Reply-To=%3C200704121216.l3CCGI0Z007753%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r3277 - in modules: common/scripts minidemo/scripts	techdemo2/scripts techdemo2/scripts/maps">blakharaz at mail.berlios.de
       </A><BR>
    <I>Thu Apr 12 14:16:18 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000347.html">[Dsa-hl-svn] r3276 - in modules: regressiontest/scripts ruchin	ruchin/materials
</A></li>
        <LI>Next message: <A HREF="000349.html">[Dsa-hl-svn] r3278 - rl/trunk/engine/script/swig
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#348">[ date ]</a>
              <a href="thread.html#348">[ thread ]</a>
              <a href="subject.html#348">[ subject ]</a>
              <a href="author.html#348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: blakharaz
Date: 2007-04-12 14:16:10 +0200 (Thu, 12 Apr 2007)
New Revision: 3277

Added:
   modules/techdemo2/scripts/maps/techdemo2_buch.rb
   modules/techdemo2/scripts/maps/techdemo2map1.rb
   modules/techdemo2/scripts/maps/techdemo2map2.rb
Removed:
   modules/techdemo2/scripts/maps/Techdemo2_buch.rb
   modules/techdemo2/scripts/maps/Techdemo2map1.rb
   modules/techdemo2/scripts/maps/Techdemo2map2.rb
Modified:
   modules/common/scripts/areahelper.rb
   modules/minidemo/scripts/area.rb
   modules/techdemo2/scripts/schnetzeln.rb
Log:
Fixed some constants, renamed TD2 scripts to lower case


Modified: modules/common/scripts/areahelper.rb
===================================================================
--- modules/common/scripts/areahelper.rb	2007-04-12 11:43:13 UTC (rev 3276)
+++ modules/common/scripts/areahelper.rb	2007-04-12 12:16:10 UTC (rev 3277)
@@ -71,7 +71,7 @@
     #
     # @param actorOrPosition The Actor or the Position of the area
     # @param radius The radius of the sphere in meters, default 1.0
-    # @param flags The types of Actors on which the Area will react, default Actor::QGF_ALL
+    # @param flags The types of Actors on which the Area will react, default RlScript::QUERYFLAG_ALL
     # @param inProc The procedure to be called when the Area is entered, default nil
     # @param outProc The procedure to be called when the Area is left, default nil
     # @param inTimes The number of times the Area can be entered before its deleted, default 1
@@ -81,17 +81,17 @@
     #
     # @returns The created listener
     #
-    # @example  AreaHelper::createLimitedTimesSphereArea( [0.0,0.0,0.0], 1.0, Actor::QGF_PLAYER, Proc.new {|e| p &quot;enter&quot;}, Proc.new {|e| p &quot;exit&quot;}, -1, 0 )
+    # @example  AreaHelper::createLimitedTimesSphereArea( [0.0,0.0,0.0], 1.0, RlScript::QUERYFLAG_PLAYER, Proc.new {|e| p &quot;enter&quot;}, Proc.new {|e| p &quot;exit&quot;}, -1, 0 )
     #           Creates a Sphere at 0,0,0 which will react on all players, will
     #           be enterable unlimited times, but remove itself on leaving. 
     #           It will print 'enter' on entering, and 'exit' on leaving, 
     #           which will never occur.
-    # @example  AreaHelper::createLimitedTimesSphereArea( [0.0,0.0,0.0], 1.0, Actor::QGF_PLAYER, Proc.new { p &quot;enter&quot; } )
+    # @example  AreaHelper::createLimitedTimesSphereArea( [0.0,0.0,0.0], 1.0, RlScript::QUERYFLAG_PLAYER, Proc.new { p &quot;enter&quot; } )
     #           Creates a Sphere at 0,0,0 which will react on all players, will
     #           be enterable one time.
     #           It will print 'enter' on entering, and does nothing on leaving.
     #
-    def AreaHelper.createLimitedTimesSphereArea( actorOrPosition, radius=1.0, flags=Actor::QGF_ALL, inProc=nil, outProc=nil, inTimes=1, outTimes=1 )
+    def AreaHelper.createLimitedTimesSphereArea( actorOrPosition, radius=1.0, flags=RlScript::QUERYFLAG_ALL, inProc=nil, outProc=nil, inTimes=1, outTimes=1 )
         # We have not yet created an Actor
         actorCreated = false
         # It's an array, possibly a Position
@@ -131,7 +131,7 @@
 end
 
 
-# AreaHelper::createLimitedTimesSphereArea( [0.0,0.0,0.0], 1.0, Actor::QGF_PLAYER, Proc.new {|e| p &quot;enter&quot;}, Proc.new {|e| p &quot;exit&quot;}, -1, 0 )
-# AreaHelper::createLimitedTimesSphereArea( [0.0,0.0,0.0], 1.0, Actor::QGF_PLAYER, Proc.new { p &quot;enter&quot; } )
+# AreaHelper::createLimitedTimesSphereArea( [0.0,0.0,0.0], 1.0, RlScript::QUERYFLAG_PLAYER, Proc.new {|e| p &quot;enter&quot;}, Proc.new {|e| p &quot;exit&quot;}, -1, 0 )
+# AreaHelper::createLimitedTimesSphereArea( [0.0,0.0,0.0], 1.0, RlScript::QUERYFLAG_PLAYER, Proc.new { p &quot;enter&quot; } )
 
 

Modified: modules/minidemo/scripts/area.rb
===================================================================
--- modules/minidemo/scripts/area.rb	2007-04-12 11:43:13 UTC (rev 3276)
+++ modules/minidemo/scripts/area.rb	2007-04-12 12:16:10 UTC (rev 3277)
@@ -4,13 +4,13 @@
 
 print( &quot;Area-Tests wird geladen&quot; );
 
-$AM.getActor( &quot;Held&quot; ).setQueryMask( Actor::QGF_PLAYER )
+$AM.getActor( &quot;Held&quot; ).setQueryMask( RlScript::QUERYFLAG_PLAYER )
 
 kugelDings = $AM.createSoundSampleActor( &quot;Kugel-Zentrum&quot;, &quot;lachen.ogg&quot; )
 kugelDings.placeIntoScene( [4.150, 0.5, -3.00] )
 
 # Will be executed only once
-AreaHelper::createLimitedTimesSphereArea( kugelDings, 0.5, Actor::QGF_PLAYER, 
+AreaHelper::createLimitedTimesSphereArea( kugelDings, 0.5, RlScript::QUERYFLAG_PLAYER, 
     Proc.new { |e| e.getSource().getActor().getControlledObject().play(); $WF.showMessageWindow( &quot;Das ist die dunkle Ecke&quot; ); } )
 
 print( &quot;Area-Tests fertig geladen&quot; );
\ No newline at end of file

Deleted: modules/techdemo2/scripts/maps/Techdemo2_buch.rb
===================================================================
--- modules/techdemo2/scripts/maps/Techdemo2_buch.rb	2007-04-12 11:43:13 UTC (rev 3276)
+++ modules/techdemo2/scripts/maps/Techdemo2_buch.rb	2007-04-12 12:16:10 UTC (rev 3277)
@@ -1,40 +0,0 @@
-#==================================
-#		Tagebuch
-#==================================
-$tagebuchtexte = Hash.new
-#$tagebuchtexte['name'] = ['titel','text'] 
-
-
-#Hauptquest f&#252;r alle
-
-#Map1 laden
-$tagebuchtexte['dorf1'] = ['Probleme mit Wilden Tieren I','Gestern bin ich mit einem Problem in einem der umliegenden D&#246;rfer betraut worden. In einer kleinen Siedlung zwischen Wandleth und Ruchin haben die Menschen wohl Probleme mit Raubtieren.Die Dorferste, Sonja hei&#223;t sie, kam vor einigen Tagen pers&#246;nlich bei uns vorbei und meinte, dies sei ein Fall f&#252;r die Stadtwache. Meine Instruktionen sind klar: In das Dorf gehen und den Menschen helfen ihre Probleme in den Griff zu kriegen. Hoffentlich verlangt man von mir nicht einen Bogen in die Hand zu nehmen und Tiere zu jagen. Es ist jetzt fr&#252;her Abend und ich sehe die H&#228;user schon. Ich sollte wohl zuerst Sonja aufsuchen um genau herausfinden was eigentlich los ist.']
-
-#Erstes Gespr&#228;che mit Sonja
-$tagebuchtexte['dorf2'] = ['Probleme mit Wilden Tieren II','Ich habe mit Sonja geredet. Um mehr &#252;ber die Sache zu erfahren soll ich mit einigen Dorfbewohnern reden. Ihr Mann, Jarn, wohnt in ihrem Haus. Wolfram, ein Dichter, wohnt in einem zweiten und ein gewisser Tsafried h&#228;lt sich anscheinend gerne in einer kleinen Baumgruppe in der N&#228;he auf. Wenn ich alle Informationen habe, die ich brauche soll ich wieder zu ihr zur&#252;ckkehren und wir besprechen dann was zu tun ist. Scheinbar ist doch mehr an der Sache als einfach nur ein hungriges Tier.'] 
-
-#Quest mit dem Reden geschafft. Questlistener?
-$tagebuchtexte['dorf3'] = ['Probleme mit Wilden Tieren III','Ich habe mit allen dreien gesprochen. Das Bild f&#252;gt sich zusammen. Offenbar gibt es einen alten Mann, der im Wald lebt und manchmal mit den Dorfbewohnern Handel treibt. Dieser ist vor einer Woche verschwunden und niemand wei&#223; wo er ist. Kurz danach haben die &#220;bergriffe der W&#246;lfe begonnen. W&#228;hrend Wolfram sich nur sicher ist, dass der Mann aus dem Wald ganz sicher mit den W&#246;lfen im Dorf zu tun hat, sich aber nicht festlegen will ob er nun auch Opfer oder ob er Verursacher ist sieht Jarn die Sache eindeutig: Der Mann aus dem Wald hetzt die W&#246;lfe gegen das Dorf, weil neidisch auf dessen Leben ist, besonders auf seine Frau Sonja, die mit dem Alten Mann Handel treibt und sich in einer &#252;berlegenen Situation zu befinden scheint. Sie gibt ihm wohl weniger als er verdient hat. Tsafried hingegen ist genau der anderen Meinung. Er ist von der Unschuld des Mannes &#252;berzeugt. Dieser scheint so etwas wie ein Mentor oder !
 Lehrer f&#252;r ihn zu sein und Tsafried macht sich gro&#223;e Sorgen, dass etwas im Wald passiert ist, dass den Mann abh&#228;lt ins Dorf zu kommen. Das scheint auch irgend etwas mit dem auftauchen der W&#246;lfe zu tun zu haben. Tsafried bittet mich im Wald nachzusehen. Nichts anderes habe ich vor! Ich sollte mit Sonja reden um weitere Schritte einzuleiten.'] 
-
-#Hauptquests Spaltung
-#Map2 laden
-$tagebuchtexte['retten0'] = ['Der Turm','Der verlassene Turm, von dem mir erz&#228;hlt wurde, ist ganz in der N&#228;he. Ich kann ihn &#252;ber den Baumwipfeln schon sehen. Hier sollte ich wieder vorsichtiger sein, was auch immer auch f&#252;r das Verschwinden verantwortlich ist, es k&#246;nnte es auch auf mich abgesehen haben. Ich sollte mich etwas umschauen und nach dem Vermissten suchen.'] 
-$tagebuchtexte['schnetzeln0'] = ['Der Turm','Der verlassene Turm, von dem mir erz&#228;hlt wurde, ist ganz in der N&#228;he. Ich kann ihn &#252;ber den Baumwipfeln schon sehen. Hier sollte ich wieder vorsichtiger sein. Wer wei&#223; auf welche Weise mit der alte Kauz auflauern wird. Sobald ich ihn sehe werde ich ihn fangen und festsetzen. Das wichtigste ist jetzt die Sicherheit der Dorfbewohner, und die ist nur gew&#228;hrleistet wenn der Alte Mann unsch&#228;dlich gemacht worden ist.'] 
-
-#Nach dem abschlu&#223;gespr&#228;ch mit Sonja
-$tagebuchtexte['retten1'] = ['Der alte Mann aus dem Wald I','Es ist eindeutig: Seit der alte Mann aus dem Wald hier nicht mehr gesehen wurde haben die Wolf&#252;bergriffe eingesetzt. Er mu&#223; sie vorher auf eine rechtschaffende Weise vom Dorf ferngehalten haben um die Bewohner zu sch&#252;tzen und nun ist etwas geschehen, was ihn davon abh&#228;lt. Ich sollte in den Wald gehen und nach dem rechten sehen. Aber ich sollte vorsichtig sein, immerhin gibt es dort W&#246;lfe, die nicht davor scheuen in ein Dorf voller Menschen zu kommen.'] 
-$tagebuchtexte['schnetzeln1'] = ['Der alte Mann aus dem Wald I','Nun ist es raus: Der alte Mann aus dem Wald hetzt die W&#246;lfe auf die Dorfbewohner! Allein diese Tatsache ist unheimlich genug und kann schon nicht mit den Zw&#246;lfen gef&#228;llen Dingen zugehen. Ich werde in den Wald gehen und ihn festsetzen, notfalls mit Gewalt. Dieser Verr&#252;ckte ist eine Gefahr f&#252;r die &#214;ffentlichkeit.'] 
-
-#druidentod.tb und waldwoelfe_retten.rb
-$tagebuchtexte['retten2'] = ['Der alte Mann aus dem Wald II','Geschafft! Ein gro&#223;er Wolf hatte den Vermissten angefallen und ihn im Turm festgesetzt, wo ich ihn verwundet und fiebrig fand. Ich musste den Wolf t&#246;ten und habe den alten Mann notd&#252;rftig versorgt. Ich sollte nun ins Dorf zur&#252;ckkehren und alles berichten, die Dorfbewohner k&#246;nnen sich dann um alles weitere k&#252;mmern, nun wo der Weg wieder frei ist.'] 
-$tagebuchtexte['schnetzeln2'] = ['Der alte Mann aus dem Wald II','Geschafft! Als ich auf ihn traf setzte er sich zur Wehr und ich mu&#223;te in kampfunf&#228;hig machen. So wird er zumindest niemanden mehr bel&#228;stigen. Ich denke, nun wird sich der Wald, und damit auch die W&#246;lfe, wieder beruhigen.'] 
-
-#Nebenquests
-#Wolfsrams T&#252;r Dialog
-$tagebuchtexte['wolfram'] = ['Wolfram &#246;ffnet die T&#252;r nicht','Ich war an Wolframs T&#252;r. Er &#246;ffnet mir nicht, aber ich h&#246;rte, dass er zuhause ist! Ich mu&#223; ihn dazu bringen mir die T&#252;r zu &#246;ffnen.'] 
-
-#Jarns Dialog
-$tagebuchtexte['paket'] = ['&quot;Ein seltsames Paket','Ich habe mich einverstanden erkl&#228;rt ein Paket von Jarn zu Wolfram zu bringen. Dieser wohnt gleich gegen&#252;ber. Ich frage mich was dort drinnen ist. Waren das gerade Ger&#228;usche aus dem Inneneren?'] 
-
-#Sonjas Dialog
-$tagebuchtexte['aufenthalt'] = ['Aufenhaltsort des alten Mannes aus dem Wald','Zuletzt wurde der Mann in der N&#228;he eines verlassenen Turms gefunden. Sonja hat mir den Weg erkl&#228;rt, ich mu&#223; einfach nur einem Pfad au&#223;erhalb des Dorfes folgen.'] 

Deleted: modules/techdemo2/scripts/maps/Techdemo2map1.rb
===================================================================
--- modules/techdemo2/scripts/maps/Techdemo2map1.rb	2007-04-12 11:43:13 UTC (rev 3276)
+++ modules/techdemo2/scripts/maps/Techdemo2map1.rb	2007-04-12 12:16:10 UTC (rev 3277)
@@ -1,111 +0,0 @@
-load &quot;embed.rb&quot;
-
-require 'player.rb'
-require 'hero.rb'
-require 'door.rb'
-
-# Physik aktivieren
-$PM.setEnabled(true);
-
-$SCRIPT.log(&quot;init map 'Techdemo2'...&quot;);
-
-$SCRIPT.log(&quot;Held erstellen&quot;);
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1).getGameObject();
-$hero.placeIntoScene()
-PlayerSettings.preparePlayer($hero)
-$UI.setActiveCharacter($hero)
-$SCRIPT.log(&quot;Held erstellt&quot;);
-
-$heroVehicle = $AI.createAgent(AgentManager::AGENT_PLAYER, $hero);	
-$SCRIPT.log(&quot;SteeringVehicle f&#252;r Held erstellen...&quot;);
-
-
-$World = $CORE.getWorld();
-$World.setSkyBox(true, &quot;rl/desert07&quot;, 100.0);
-$SCRIPT.log(&quot;skybox set&quot;);
-
-
-$SCRIPT.log(&quot;Tageslicht erstellen..&quot;);
-sunlight = $AM.createLightActor(&quot;sunlight&quot;, LightObject::LT_DIRECTIONAL);
-sunlight.getControlledObject().setDirection(-0.17101, -0.873647, 0.969846);
-sunlight.getControlledObject().setCastShadows(true);
-sunlight.getControlledObject().setDiffuseColour(0.8,0.8,0.8);
-$SCRIPT.log(&quot;Tageslicht erstellt.&quot;);
-
-
-$SCRIPT.log(&quot;T&#252;ren einsetzen&quot;);
-door1 = $GOM.createGameObjectProxy(&quot;door&quot;).getGameObject()
-door1.setMeshfile(&quot;arc_door_02.mesh&quot;);
-door1.setPosition([-12.9124, -6.86492, 13.7133]);
-door1.setOrientation([0, -120, 0]);
-door1.setDescription(&quot;Eine Holzt&#252;r&quot;);
-
-door2 = $GOM.createGameObjectProxy(&quot;door&quot;).getGameObject()
-door2.setMeshfile(&quot;arc_door_02.mesh&quot;);
-door2.setPosition([-34.6458, -6.2058, 14.9355]);
-door2.setOrientation([0, -212.5, 0]);
-door2.setDescription(&quot;Eine Holzt&#252;r&quot;);
-
-door1.placeIntoScene();
-door2.placeIntoScene();
-$SCRIPT.log(&quot;T&#252;ren gesetzt&quot;);
-
-
-$SCRIPT.log(&quot;Dorf-Thema laden&quot;);
-techdemoDorf = $AM.createSoundSampleActor( &quot;techdemoDorf&quot;, &quot;techdemo001.ogg&quot; ); 
-techdemoDorf.getControlledObject().set3d(false);
-$SCRIPT.log(&quot; Loopen&quot;);
-techdemoDorf.getControlledObject().setLooping( true );
-$SCRIPT.log(&quot; Laden&quot;);
-techdemoDorf.getControlledObject().load();
-$SCRIPT.log(&quot;Dorf-Thema fertig&quot;);
-
-$World.setFog( World::FOG_EXP, [0.1,0.08,0.01,0.1], 0.00503, 10.0, 100.0);
-
-$SCRIPT.log(&quot;Quests laden&quot;);
-load( &quot;Techdemo2_quests.rb&quot; );
-load( &quot;Techdemo2_buch.rb&quot; );
-$SCRIPT.log(&quot;Quests geladen&quot;);
-
-$SCRIPT.log(&quot;SteeringBehaviours laden&quot;);
-load(&quot;steering.rb&quot;);
-
-$SCRIPT.log(&quot;NSCs laden&quot;);
-load( &quot;sonja.rb&quot; );
-load( &quot;jarn.rb&quot; );
-load( &quot;tsafried.rb&quot; );
-load( &quot;bauer.rb&quot; );
-load( &quot;wirt.rb&quot; );
-load( &quot;forrest.rb&quot;);
-load( &quot;wolframstuer.rb&quot; );
-$SCRIPT.log(&quot;NSCs geladen&quot;);
-
-$SCRIPT.log(&quot;Weiteres laden&quot;);
-load( &quot;viecher.rb&quot; );
-load( &quot;buchderkultur.rb&quot; );
-$SCRIPT.log(&quot;Weiteres geladen&quot;);
-
-#Musik als letztes Starten
-techdemoDorf.getControlledObject().play();
-
-# Tagebucheintrag
-entry = $tagebuchtexte['dorf1']
-RulesSubsystem.getSingleton().getQuestBook().addJournalEntry( entry[0], entry[1] );
-
-
-#******** mapchange - abh&#228;ngig vom Questzustand **********
-$SCRIPT.log(&quot;Mapchange: Kugel-Zentrum Actor erstellen&quot;);
-kugelDings = $AM.createEmptyActor( &quot;Kugel-Zentrum&quot; );
-$SCRIPT.log(&quot;Mapchange: Kugel-Zentrum Actor in die Szene einf&#252;gen&quot;);
-kugelDings.placeIntoScene( [-56.2, -1.1, -75.0] );
-
-require 'techdemo2_mapchange.rb'
-#Erstellen mit 
-mapchangeListener = Td2LevelwechselListener.new(&quot;techdemo2map2_01.scene&quot;, &quot;Techdemo2&quot;, &quot;Techdemo2map2.rb&quot;); 
-
-$SCRIPT.log(&quot;Mapchange: MapchangeListener hinzuf&#252;gen&quot;);
-$GameEveMgr.addSphereAreaListener( kugelDings, 10.000, mapchangeListener, RlScript::QUERYFLAG_PLAYER );
-
-
-$SCRIPT.log(&quot;map 'Techdemo2' initialisiert.&quot;);
-$WF.toggleCharacterStateWindow()

Deleted: modules/techdemo2/scripts/maps/Techdemo2map2.rb
===================================================================
--- modules/techdemo2/scripts/maps/Techdemo2map2.rb	2007-04-12 11:43:13 UTC (rev 3276)
+++ modules/techdemo2/scripts/maps/Techdemo2map2.rb	2007-04-12 12:16:10 UTC (rev 3277)
@@ -1,185 +0,0 @@
-load &quot;embed.rb&quot;
-
-require 'player.rb'
-require 'hero.rb'
-
-# Physik aktivieren
-$PM.setEnabled(true);
-
-$SCRIPT.log(&quot;Held erstellen&quot;);
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1).getGameObject();
-$hero.placeIntoScene()
-PlayerSettings.preparePlayer($hero)
-$UI.setActiveCharacter($hero)
-$SCRIPT.log(&quot;Held erstellt&quot;);
-
-$heroVehicle = $AI.createAgent(AgentManager::AGENT_PLAYER, $hero);	
-$SCRIPT.log(&quot;SteeringVehicle f&#252;r Held erstellen...&quot;);
-
-
-$SCRIPT.log(&quot;init map 'Techdemo2'...&quot;);
-$World = $CORE.getWorld()
-$World.setSkyBox(true, &quot;rl/desert07&quot;, 100.0)
-$SCRIPT.log(&quot;skybox set&quot;);
-
-$SCRIPT.log(&quot;Weiler erstellen..&quot;);
-weiler = $AM.createMeshActor(&quot;weiler&quot;, &quot;nat_wasser_techdemo2.mesh&quot;, PhysicsManager::GT_NONE, 0.0);
-weiler.placeIntoScene([25.0, -79.0, -138.0]);
-$SCRIPT.log(&quot;Weiler erstellt&quot;);
-
-$SCRIPT.log(&quot;Tageslicht erstellen..&quot;);
-sunlight = $AM.createLightActor(&quot;sunlight&quot;, LightObject::LT_DIRECTIONAL);
-sunlight.getControlledObject().setDirection(-0.17101, -0.873647, 0.969846);
-sunlight.getControlledObject().setCastShadows(true);
-sunlight.getControlledObject().setDiffuseColour(0.8,0.8,0.8);
-$SCRIPT.log(&quot;Tageslicht erstellt.&quot;);
-
-
-#shadowlight = $AM.createLightActor(&quot;shadowlight&quot;, LightObject::LT_SPOTLIGHT);
-#shadowlight.setPosition(0.0, 1000.0, 0.0);
-#shadowlight.getControlledObject().setDirection(-0.17101, -0.873647, 0.969846);
-#shadowlight.getControlledObject().setCastShadows(true);
-#shadowlight.getControlledObject().setDiffuseColour(0.0,0.0,0.0);
-
-
-$SCRIPT.log(&quot;Druidenwald-Thema laden&quot;);
-techdemoDruidenWald = $AM.createSoundSampleActor( &quot;techdemoDruidenWald&quot;, &quot;techdemo002.ogg&quot; ); 
-techdemoDruidenWald.getControlledObject().set3d(false);
-$SCRIPT.log(&quot; Loopen&quot;);
-techdemoDruidenWald.getControlledObject().setLooping( true );
-$SCRIPT.log(&quot; Laden&quot;);
-techdemoDruidenWald.getControlledObject().load();
-$SCRIPT.log(&quot;Druidenwald-Thema fertig&quot;);
-
-$SCRIPT.log(&quot;Ruchins Ruche -Thema laden&quot;);
-ruchinsRuhe = $AM.createSoundSampleActor( &quot;ruchinsRuhe&quot;, &quot;ruchin002.ogg&quot; ); 
-ruchinsRuhe.getControlledObject().set3d(false);
-$SCRIPT.log(&quot; Loopen&quot;);
-ruchinsRuhe.getControlledObject().setLooping( true );
-$SCRIPT.log(&quot; Laden&quot;);
-ruchinsRuhe.getControlledObject().load();
-$SCRIPT.log(&quot;Ruchins Ruche -Thema fertig&quot;);
-
-$SCRIPT.log(&quot;Kampf -Thema laden&quot;);
-kampfMusik = $AM.createSoundSampleActor( &quot;kampfMusik&quot;, &quot;ruchin004.ogg&quot; ); 
-kampfMusik.getControlledObject().set3d(false);
-$SCRIPT.log(&quot; Loopen&quot;);
-kampfMusik.getControlledObject().setLooping( true );
-$SCRIPT.log(&quot; Laden&quot;);
-kampfMusik.getControlledObject().load();
-$SCRIPT.log(&quot;Kampf -Thema fertig&quot;);
-
-#Zu laut, da stimmt inzwischen was nicht. 
-$SCRIPT.log(&quot;Wind laden&quot;);
-wind = $AM.createSoundSampleActor( &quot;wind&quot;, &quot;wind_hintergrund_001.ogg&quot; ); 
-wind.getControlledObject().set3d(false);
-$SCRIPT.log(&quot; Loopen&quot;);
-wind.getControlledObject().setLooping( true );
-$SCRIPT.log(&quot; Abspielen&quot;);
-#wind.getControlledObject().play();
-$SCRIPT.log(&quot; Volumen&quot;);
-wind.getControlledObject().setVolume( 0.15 )
-
-windBoee = $AM.createSoundSampleActor( &quot;windBoee&quot;, &quot;wind_boee_001.ogg&quot; ); 
-windBoee.getControlledObject().set3d(true);
-$SCRIPT.log(&quot; Loopen&quot;);
-windBoee.getControlledObject().setLooping( true );
-$SCRIPT.log(&quot; Setzen&quot;);
-windBoee.placeIntoScene([12.97, -58.20, -220.37]);
-$SCRIPT.log(&quot; Abspielen&quot;);
-#windBoee.getControlledObject().play();
-$SCRIPT.log(&quot; Volumen&quot;);
-windBoee.getControlledObject().setVolume( 1.0 )
-
-windBaum2 = $AM.createSoundSampleActor( &quot;windBaum2&quot;, &quot;wind_baumrascheln_001.ogg&quot; ); 
-windBaum2.getControlledObject().set3d(true);
-$SCRIPT.log(&quot; Loopen&quot;);
-windBaum2.getControlledObject().setLooping( true );
-$SCRIPT.log(&quot; Setzen&quot;);
-windBaum2.placeIntoScene([-12.51, -65.07, -89.64]);
-$SCRIPT.log(&quot; Abspielen&quot;);
-#windBaum2.getControlledObject().play();
-$SCRIPT.log(&quot; Volumen&quot;);
-windBaum2.getControlledObject().setVolume( 0.7 )
-
-windBaum = $AM.createSoundSampleActor( &quot;windBaum&quot;, &quot;wind_baumrascheln_001.ogg&quot; ); 
-windBaum.getControlledObject().set3d(true);
-$SCRIPT.log(&quot; Loopen&quot;);
-windBaum.getControlledObject().setLooping( true );
-$SCRIPT.log(&quot; Setzen&quot;);
-windBaum.placeIntoScene([-17.36, -73.56, -124.78]);
-$SCRIPT.log(&quot; Abspielen&quot;);
-#windBaum.getControlledObject().play();
-$SCRIPT.log(&quot; Volumen&quot;);
-windBaum.getControlledObject().setVolume( 0.7 )
-$SCRIPT.log(&quot;Wind fertig&quot;);
-
-
-
-$World.setFog( World::FOG_EXP, [0.1,0.08,0.01,0.1], 0.00503, 10.0, 100.0);
-
-#nur ein Test! Ist mit Mapwechsel nicht mehr n&#246;tig
-#$SCRIPT.log(&quot;IN DER MAPWECHSEL VERSION RAUSNEHMEN!&quot;);
-#load(&quot;techdemo2_quests.rb&quot;);
-#Test zuende
-
-
-$SCRIPT.log(&quot;SteeringBehaviours laden&quot;);
-load(&quot;steering.rb&quot;);
-
-if (RulesSubsystem.getSingleton().getQuestBook().getQuest(&quot;hauptquest41&quot;).getState() == Quest::ASSIGNED)
-	# Tagebuch
-	entry = $tagebuchtexte['schnetzeln0']
-	RulesSubsystem.getSingleton().getQuestBook().addJournalEntry( entry[0], entry[1] );
-	load( &quot;schnetzeln.rb&quot; );
-	#Steinschlag
-	@mSteinschlagSound = $AM.createSoundSampleActor(&quot;Steinschlag&quot;,&quot;steinschlag_wenig_zu_vielen.ogg&quot;);
-	@mSteinschlagSound.getControlledObject().set3d(false);
-	@mSteinschlagSound.getControlledObject().load();
-end
-
-if (RulesSubsystem.getSingleton().getQuestBook().getQuest(&quot;hauptquest42&quot;).getState() == Quest::ASSIGNED)
-	# Tagebuch
-	entry = $tagebuchtexte['retten0']
-	RulesSubsystem.getSingleton().getQuestBook().addJournalEntry( entry[0], entry[1] );
-	load( &quot;retten.rb&quot; );
-end
-
-#Musik als letztes abspielen
-techdemoDruidenWald.getControlledObject().play();
-
-
-#******** mapchange **********
-$SCRIPT.log(&quot;Mapchange: Kugel-Zentrum Actor erstellen&quot;);
-kugelDings = $AM.createEmptyActor( &quot;Kugel-Zentrum&quot; );
-$SCRIPT.log(&quot;Mapchange: Kugel-Zentrum Actor in die Szene einf&#252;gen&quot;);
-kugelDings.placeIntoScene( [ 23.7184276580811, -36.9368743896484, 7.94406747817993] );
-
-
-
-class LevelwechselListener &lt; GameAreaListener
-	def initialize( targetscene, resourcegrp, targetrbfile )
-		super()
-		@targetScene = targetscene
-		@targetRbFile = targetrbfile
-		@resourcegrp = resourcegrp 
-	end
- 
-	def areaLeft(anEvent)
-	end
- 
-	# Zone betreten
-	def areaEntered(anEvent)
-		#Kein mapchange zur&#252;ck!
-		$WF.showMessageWindow( &quot;Ihr m&#252;sst eure Gruppe erst sammeln, bevor Ihr das Gebiet verlassen k&#246;nnt.&quot; );
-	end
-end
- 
-#Erstellen mit 
-MapchangeListener = LevelwechselListener.new(&quot;techdemo2map1_02.scene&quot;, &quot;Techdemo2&quot;, &quot;Techdemo2map1.rb&quot;); 
-
-$SCRIPT.log(&quot;Mapchange: MapchangeListener hinzuf&#252;gen&quot;);
-$GameEveMgr.addSphereAreaListener( kugelDings, 5.000, MapchangeListener, Actor::QGF_PLAYER );
-
-$SCRIPT.log(&quot;map 'Techdemo2' initialisiert.&quot;);
-$WF.toggleCharacterStateWindow()
\ No newline at end of file

Copied: modules/techdemo2/scripts/maps/techdemo2_buch.rb (from rev 3272, modules/techdemo2/scripts/maps/Techdemo2_buch.rb)

Copied: modules/techdemo2/scripts/maps/techdemo2map1.rb (from rev 3272, modules/techdemo2/scripts/maps/Techdemo2map1.rb)
===================================================================
--- modules/techdemo2/scripts/maps/Techdemo2map1.rb	2007-04-12 09:01:02 UTC (rev 3272)
+++ modules/techdemo2/scripts/maps/techdemo2map1.rb	2007-04-12 12:16:10 UTC (rev 3277)
@@ -0,0 +1,111 @@
+load &quot;embed.rb&quot;
+
+require 'player.rb'
+require 'hero.rb'
+require 'door.rb'
+
+# Physik aktivieren
+$PM.setEnabled(true);
+
+$SCRIPT.log(&quot;init map 'Techdemo2'...&quot;);
+
+$SCRIPT.log(&quot;Held erstellen&quot;);
+$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1).getGameObject();
+$hero.placeIntoScene()
+PlayerSettings.preparePlayer($hero)
+$UI.setActiveCharacter($hero)
+$SCRIPT.log(&quot;Held erstellt&quot;);
+
+$heroVehicle = $AI.createAgent(AgentManager::AGENT_PLAYER, $hero);	
+$SCRIPT.log(&quot;SteeringVehicle f&#252;r Held erstellen...&quot;);
+
+
+$World = $CORE.getWorld();
+$World.setSkyBox(true, &quot;rl/desert07&quot;, 100.0);
+$SCRIPT.log(&quot;skybox set&quot;);
+
+
+$SCRIPT.log(&quot;Tageslicht erstellen..&quot;);
+sunlight = $AM.createLightActor(&quot;sunlight&quot;, LightObject::LT_DIRECTIONAL);
+sunlight.getControlledObject().setDirection(-0.17101, -0.873647, 0.969846);
+sunlight.getControlledObject().setCastShadows(true);
+sunlight.getControlledObject().setDiffuseColour(0.8,0.8,0.8);
+$SCRIPT.log(&quot;Tageslicht erstellt.&quot;);
+
+
+$SCRIPT.log(&quot;T&#252;ren einsetzen&quot;);
+door1 = $GOM.createGameObjectProxy(&quot;door&quot;).getGameObject()
+door1.setMeshfile(&quot;arc_door_02.mesh&quot;);
+door1.setPosition([-12.9124, -6.86492, 13.7133]);
+door1.setOrientation([0, -120, 0]);
+door1.setDescription(&quot;Eine Holzt&#252;r&quot;);
+
+door2 = $GOM.createGameObjectProxy(&quot;door&quot;).getGameObject()
+door2.setMeshfile(&quot;arc_door_02.mesh&quot;);
+door2.setPosition([-34.6458, -6.2058, 14.9355]);
+door2.setOrientation([0, -212.5, 0]);
+door2.setDescription(&quot;Eine Holzt&#252;r&quot;);
+
+door1.placeIntoScene();
+door2.placeIntoScene();
+$SCRIPT.log(&quot;T&#252;ren gesetzt&quot;);
+
+
+$SCRIPT.log(&quot;Dorf-Thema laden&quot;);
+techdemoDorf = $AM.createSoundSampleActor( &quot;techdemoDorf&quot;, &quot;techdemo001.ogg&quot; ); 
+techdemoDorf.getControlledObject().set3d(false);
+$SCRIPT.log(&quot; Loopen&quot;);
+techdemoDorf.getControlledObject().setLooping( true );
+$SCRIPT.log(&quot; Laden&quot;);
+techdemoDorf.getControlledObject().load();
+$SCRIPT.log(&quot;Dorf-Thema fertig&quot;);
+
+$World.setFog( World::FOG_EXP, [0.1,0.08,0.01,0.1], 0.00503, 10.0, 100.0);
+
+$SCRIPT.log(&quot;Quests laden&quot;);
+load( &quot;techdemo2_quests.rb&quot; );
+load( &quot;techdemo2_buch.rb&quot; );
+$SCRIPT.log(&quot;Quests geladen&quot;);
+
+$SCRIPT.log(&quot;SteeringBehaviours laden&quot;);
+load(&quot;steering.rb&quot;);
+
+$SCRIPT.log(&quot;NSCs laden&quot;);
+load( &quot;sonja.rb&quot; );
+load( &quot;jarn.rb&quot; );
+load( &quot;tsafried.rb&quot; );
+load( &quot;bauer.rb&quot; );
+load( &quot;wirt.rb&quot; );
+load( &quot;forrest.rb&quot;);
+load( &quot;wolframstuer.rb&quot; );
+$SCRIPT.log(&quot;NSCs geladen&quot;);
+
+$SCRIPT.log(&quot;Weiteres laden&quot;);
+load( &quot;viecher.rb&quot; );
+load( &quot;buchderkultur.rb&quot; );
+$SCRIPT.log(&quot;Weiteres geladen&quot;);
+
+#Musik als letztes Starten
+techdemoDorf.getControlledObject().play();
+
+# Tagebucheintrag
+entry = $tagebuchtexte['dorf1']
+RulesSubsystem.getSingleton().getQuestBook().addJournalEntry( entry[0], entry[1] );
+
+
+#******** mapchange - abh&#228;ngig vom Questzustand **********
+$SCRIPT.log(&quot;Mapchange: Kugel-Zentrum Actor erstellen&quot;);
+kugelDings = $AM.createEmptyActor( &quot;Kugel-Zentrum&quot; );
+$SCRIPT.log(&quot;Mapchange: Kugel-Zentrum Actor in die Szene einf&#252;gen&quot;);
+kugelDings.placeIntoScene( [-56.2, -1.1, -75.0] );
+
+require 'techdemo2_mapchange.rb'
+#Erstellen mit 
+mapchangeListener = Td2LevelwechselListener.new(&quot;techdemo2map2_01.scene&quot;, &quot;Techdemo2&quot;, &quot;techdemo2map2.rb&quot;); 
+
+$SCRIPT.log(&quot;Mapchange: MapchangeListener hinzuf&#252;gen&quot;);
+$GameEveMgr.addSphereAreaListener( kugelDings, 10.000, mapchangeListener, RlScript::QUERYFLAG_PLAYER );
+
+
+$SCRIPT.log(&quot;map 'Techdemo2' initialisiert.&quot;);
+$WF.toggleCharacterStateWindow()

Copied: modules/techdemo2/scripts/maps/techdemo2map2.rb (from rev 3272, modules/techdemo2/scripts/maps/Techdemo2map2.rb)
===================================================================
--- modules/techdemo2/scripts/maps/Techdemo2map2.rb	2007-04-12 09:01:02 UTC (rev 3272)
+++ modules/techdemo2/scripts/maps/techdemo2map2.rb	2007-04-12 12:16:10 UTC (rev 3277)
@@ -0,0 +1,185 @@
+load &quot;embed.rb&quot;
+
+require 'player.rb'
+require 'hero.rb'
+
+# Physik aktivieren
+$PM.setEnabled(true);
+
+$SCRIPT.log(&quot;Held erstellen&quot;);
+$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1).getGameObject();
+$hero.placeIntoScene()
+PlayerSettings.preparePlayer($hero)
+$UI.setActiveCharacter($hero)
+$SCRIPT.log(&quot;Held erstellt&quot;);
+
+$heroVehicle = $AI.createAgent(AgentManager::AGENT_PLAYER, $hero);	
+$SCRIPT.log(&quot;SteeringVehicle f&#252;r Held erstellen...&quot;);
+
+
+$SCRIPT.log(&quot;init map 'Techdemo2'...&quot;);
+$World = $CORE.getWorld()
+$World.setSkyBox(true, &quot;rl/desert07&quot;, 100.0)
+$SCRIPT.log(&quot;skybox set&quot;);
+
+$SCRIPT.log(&quot;Weiler erstellen..&quot;);
+weiler = $AM.createMeshActor(&quot;weiler&quot;, &quot;nat_wasser_techdemo2.mesh&quot;, PhysicsManager::GT_NONE, 0.0);
+weiler.placeIntoScene([25.0, -79.0, -138.0]);
+$SCRIPT.log(&quot;Weiler erstellt&quot;);
+
+$SCRIPT.log(&quot;Tageslicht erstellen..&quot;);
+sunlight = $AM.createLightActor(&quot;sunlight&quot;, LightObject::LT_DIRECTIONAL);
+sunlight.getControlledObject().setDirection(-0.17101, -0.873647, 0.969846);
+sunlight.getControlledObject().setCastShadows(true);
+sunlight.getControlledObject().setDiffuseColour(0.8,0.8,0.8);
+$SCRIPT.log(&quot;Tageslicht erstellt.&quot;);
+
+
+#shadowlight = $AM.createLightActor(&quot;shadowlight&quot;, LightObject::LT_SPOTLIGHT);
+#shadowlight.setPosition(0.0, 1000.0, 0.0);
+#shadowlight.getControlledObject().setDirection(-0.17101, -0.873647, 0.969846);
+#shadowlight.getControlledObject().setCastShadows(true);
+#shadowlight.getControlledObject().setDiffuseColour(0.0,0.0,0.0);
+
+
+$SCRIPT.log(&quot;Druidenwald-Thema laden&quot;);
+techdemoDruidenWald = $AM.createSoundSampleActor( &quot;techdemoDruidenWald&quot;, &quot;techdemo002.ogg&quot; ); 
+techdemoDruidenWald.getControlledObject().set3d(false);
+$SCRIPT.log(&quot; Loopen&quot;);
+techdemoDruidenWald.getControlledObject().setLooping( true );
+$SCRIPT.log(&quot; Laden&quot;);
+techdemoDruidenWald.getControlledObject().load();
+$SCRIPT.log(&quot;Druidenwald-Thema fertig&quot;);
+
+$SCRIPT.log(&quot;Ruchins Ruche -Thema laden&quot;);
+ruchinsRuhe = $AM.createSoundSampleActor( &quot;ruchinsRuhe&quot;, &quot;ruchin002.ogg&quot; ); 
+ruchinsRuhe.getControlledObject().set3d(false);
+$SCRIPT.log(&quot; Loopen&quot;);
+ruchinsRuhe.getControlledObject().setLooping( true );
+$SCRIPT.log(&quot; Laden&quot;);
+ruchinsRuhe.getControlledObject().load();
+$SCRIPT.log(&quot;Ruchins Ruche -Thema fertig&quot;);
+
+$SCRIPT.log(&quot;Kampf -Thema laden&quot;);
+kampfMusik = $AM.createSoundSampleActor( &quot;kampfMusik&quot;, &quot;ruchin004.ogg&quot; ); 
+kampfMusik.getControlledObject().set3d(false);
+$SCRIPT.log(&quot; Loopen&quot;);
+kampfMusik.getControlledObject().setLooping( true );
+$SCRIPT.log(&quot; Laden&quot;);
+kampfMusik.getControlledObject().load();
+$SCRIPT.log(&quot;Kampf -Thema fertig&quot;);
+
+#Zu laut, da stimmt inzwischen was nicht. 
+$SCRIPT.log(&quot;Wind laden&quot;);
+wind = $AM.createSoundSampleActor( &quot;wind&quot;, &quot;wind_hintergrund_001.ogg&quot; ); 
+wind.getControlledObject().set3d(false);
+$SCRIPT.log(&quot; Loopen&quot;);
+wind.getControlledObject().setLooping( true );
+$SCRIPT.log(&quot; Abspielen&quot;);
+#wind.getControlledObject().play();
+$SCRIPT.log(&quot; Volumen&quot;);
+wind.getControlledObject().setVolume( 0.15 )
+
+windBoee = $AM.createSoundSampleActor( &quot;windBoee&quot;, &quot;wind_boee_001.ogg&quot; ); 
+windBoee.getControlledObject().set3d(true);
+$SCRIPT.log(&quot; Loopen&quot;);
+windBoee.getControlledObject().setLooping( true );
+$SCRIPT.log(&quot; Setzen&quot;);
+windBoee.placeIntoScene([12.97, -58.20, -220.37]);
+$SCRIPT.log(&quot; Abspielen&quot;);
+#windBoee.getControlledObject().play();
+$SCRIPT.log(&quot; Volumen&quot;);
+windBoee.getControlledObject().setVolume( 1.0 )
+
+windBaum2 = $AM.createSoundSampleActor( &quot;windBaum2&quot;, &quot;wind_baumrascheln_001.ogg&quot; ); 
+windBaum2.getControlledObject().set3d(true);
+$SCRIPT.log(&quot; Loopen&quot;);
+windBaum2.getControlledObject().setLooping( true );
+$SCRIPT.log(&quot; Setzen&quot;);
+windBaum2.placeIntoScene([-12.51, -65.07, -89.64]);
+$SCRIPT.log(&quot; Abspielen&quot;);
+#windBaum2.getControlledObject().play();
+$SCRIPT.log(&quot; Volumen&quot;);
+windBaum2.getControlledObject().setVolume( 0.7 )
+
+windBaum = $AM.createSoundSampleActor( &quot;windBaum&quot;, &quot;wind_baumrascheln_001.ogg&quot; ); 
+windBaum.getControlledObject().set3d(true);
+$SCRIPT.log(&quot; Loopen&quot;);
+windBaum.getControlledObject().setLooping( true );
+$SCRIPT.log(&quot; Setzen&quot;);
+windBaum.placeIntoScene([-17.36, -73.56, -124.78]);
+$SCRIPT.log(&quot; Abspielen&quot;);
+#windBaum.getControlledObject().play();
+$SCRIPT.log(&quot; Volumen&quot;);
+windBaum.getControlledObject().setVolume( 0.7 )
+$SCRIPT.log(&quot;Wind fertig&quot;);
+
+
+
+$World.setFog( World::FOG_EXP, [0.1,0.08,0.01,0.1], 0.00503, 10.0, 100.0);
+
+#nur ein Test! Ist mit Mapwechsel nicht mehr n&#246;tig
+#$SCRIPT.log(&quot;IN DER MAPWECHSEL VERSION RAUSNEHMEN!&quot;);
+#load(&quot;techdemo2_quests.rb&quot;);
+#Test zuende
+
+
+$SCRIPT.log(&quot;SteeringBehaviours laden&quot;);
+load(&quot;steering.rb&quot;);
+
+if (RulesSubsystem.getSingleton().getQuestBook().getQuest(&quot;hauptquest41&quot;).getState() == Quest::ASSIGNED)
+	# Tagebuch
+	entry = $tagebuchtexte['schnetzeln0']
+	RulesSubsystem.getSingleton().getQuestBook().addJournalEntry( entry[0], entry[1] );
+	load( &quot;schnetzeln.rb&quot; );
+	#Steinschlag
+	@mSteinschlagSound = $AM.createSoundSampleActor(&quot;Steinschlag&quot;,&quot;steinschlag_wenig_zu_vielen.ogg&quot;);
+	@mSteinschlagSound.getControlledObject().set3d(false);
+	@mSteinschlagSound.getControlledObject().load();
+end
+
+if (RulesSubsystem.getSingleton().getQuestBook().getQuest(&quot;hauptquest42&quot;).getState() == Quest::ASSIGNED)
+	# Tagebuch
+	entry = $tagebuchtexte['retten0']
+	RulesSubsystem.getSingleton().getQuestBook().addJournalEntry( entry[0], entry[1] );
+	load( &quot;retten.rb&quot; );
+end
+
+#Musik als letztes abspielen
+techdemoDruidenWald.getControlledObject().play();
+
+
+#******** mapchange **********
+$SCRIPT.log(&quot;Mapchange: Kugel-Zentrum Actor erstellen&quot;);
+kugelDings = $AM.createEmptyActor( &quot;Kugel-Zentrum&quot; );
+$SCRIPT.log(&quot;Mapchange: Kugel-Zentrum Actor in die Szene einf&#252;gen&quot;);
+kugelDings.placeIntoScene( [ 23.7184276580811, -36.9368743896484, 7.94406747817993] );
+
+
+
+class LevelwechselListener &lt; GameAreaListener
+	def initialize( targetscene, resourcegrp, targetrbfile )
+		super()
+		@targetScene = targetscene
+		@targetRbFile = targetrbfile
+		@resourcegrp = resourcegrp 
+	end
+ 
+	def areaLeft(anEvent)
+	end
+ 
+	# Zone betreten
+	def areaEntered(anEvent)
+		#Kein mapchange zur&#252;ck!
+		$WF.showMessageWindow( &quot;Ihr m&#252;sst eure Gruppe erst sammeln, bevor Ihr das Gebiet verlassen k&#246;nnt.&quot; );
+	end
+end
+ 
+#Erstellen mit 
+MapchangeListener = LevelwechselListener.new(&quot;techdemo2map1_02.scene&quot;, &quot;Techdemo2&quot;, &quot;techdemo2map1.rb&quot;); 
+
+$SCRIPT.log(&quot;Mapchange: MapchangeListener hinzuf&#252;gen&quot;);
+$GameEveMgr.addSphereAreaListener( kugelDings, 5.000, MapchangeListener, RlScript::QUERYFLAG_PLAYER );
+
+$SCRIPT.log(&quot;map 'Techdemo2' initialisiert.&quot;);
+$WF.toggleCharacterStateWindow()

Modified: modules/techdemo2/scripts/schnetzeln.rb
===================================================================
--- modules/techdemo2/scripts/schnetzeln.rb	2007-04-12 11:43:13 UTC (rev 3276)
+++ modules/techdemo2/scripts/schnetzeln.rb	2007-04-12 12:16:10 UTC (rev 3277)
@@ -20,7 +20,7 @@
 RulesSubsystem.getSingleton().getQuestBook().getQuest(&quot;hauptquest51&quot;).setState(Quest::ASSIGNED)
 
 $SCRIPT.log(&quot;FieserAlter wird geladen&quot;);
-	$GOM.createGameObjectProxy(&quot;SchnetzelDruide&quot;).getGameObject().placeIntoScene();
+$GOM.createGameObjectProxy(&quot;SchnetzelDruide&quot;).getGameObject().placeIntoScene();
 $SCRIPT.log(&quot;FieserAlter geladen&quot;);
 
 
@@ -94,4 +94,4 @@
 areaListener = TurmeingangListener.new();
 
 $SCRIPT.log(&quot;Turmeingang: TurmeingangListener hinzuf&#252;gen&quot;);
-$GameEveMgr.addSphereAreaListener( turmEingang, 1.000, areaListener, Actor::QGF_PLAYER );
\ No newline at end of file
+$GameEveMgr.addSphereAreaListener( turmEingang, 1.000, areaListener, RlScript::QUERYFLAG_PLAYER );
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000347.html">[Dsa-hl-svn] r3276 - in modules: regressiontest/scripts ruchin	ruchin/materials
</A></li>
	<LI>Next message: <A HREF="000349.html">[Dsa-hl-svn] r3278 - rl/trunk/engine/script/swig
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#348">[ date ]</a>
              <a href="thread.html#348">[ thread ]</a>
              <a href="subject.html#348">[ subject ]</a>
              <a href="author.html#348">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
