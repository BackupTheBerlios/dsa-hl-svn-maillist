<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r3344 - modules/aitest/scripts	modules/aitest/scripts/maps modules/combattest/scripts/maps	modules/regressiontest/scripts modules/regressiontest/scripts/maps	modules/ruchin/scripts/maps modules/techdemo/maps	modules/techdemo/scripts/maps modules/techdemo2/scripts	modules/techdemo2/scripts/maps rl/trunk/engine/rules	rl/trunk/engine/rules/include rl/trunk/engine/rules/src	rl/trunk/engine/script/swig
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r3344%20-%20modules/aitest/scripts%0A%09modules/aitest/scripts/maps%20modules/combattest/scripts/maps%0A%09modules/regressiontest/scripts%20modules/regressiontest/scripts/maps%0A%09modules/ruchin/scripts/maps%20modules/techdemo/maps%0A%09modules/techdemo/scripts/maps%20modules/techdemo2/scripts%0A%09modules/techdemo2/scripts/maps%20rl/trunk/engine/rules%0A%09rl/trunk/engine/rules/include%20rl/trunk/engine/rules/src%0A%09rl/trunk/engine/script/swig&In-Reply-To=%3C200704262033.l3QKXx7O032486%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000414.html">
   <LINK REL="Next"  HREF="000416.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r3344 - modules/aitest/scripts	modules/aitest/scripts/maps modules/combattest/scripts/maps	modules/regressiontest/scripts modules/regressiontest/scripts/maps	modules/ruchin/scripts/maps modules/techdemo/maps	modules/techdemo/scripts/maps modules/techdemo2/scripts	modules/techdemo2/scripts/maps rl/trunk/engine/rules	rl/trunk/engine/rules/include rl/trunk/engine/rules/src	rl/trunk/engine/script/swig</H1>
    <B>blakharaz at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r3344%20-%20modules/aitest/scripts%0A%09modules/aitest/scripts/maps%20modules/combattest/scripts/maps%0A%09modules/regressiontest/scripts%20modules/regressiontest/scripts/maps%0A%09modules/ruchin/scripts/maps%20modules/techdemo/maps%0A%09modules/techdemo/scripts/maps%20modules/techdemo2/scripts%0A%09modules/techdemo2/scripts/maps%20rl/trunk/engine/rules%0A%09rl/trunk/engine/rules/include%20rl/trunk/engine/rules/src%0A%09rl/trunk/engine/script/swig&In-Reply-To=%3C200704262033.l3QKXx7O032486%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r3344 - modules/aitest/scripts	modules/aitest/scripts/maps modules/combattest/scripts/maps	modules/regressiontest/scripts modules/regressiontest/scripts/maps	modules/ruchin/scripts/maps modules/techdemo/maps	modules/techdemo/scripts/maps modules/techdemo2/scripts	modules/techdemo2/scripts/maps rl/trunk/engine/rules	rl/trunk/engine/rules/include rl/trunk/engine/rules/src	rl/trunk/engine/script/swig">blakharaz at mail.berlios.de
       </A><BR>
    <I>Thu Apr 26 22:33:59 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000414.html">[Dsa-hl-svn] r3343 - in rl/trunk/engine/ui: include src
</A></li>
        <LI>Next message: <A HREF="000416.html">[Dsa-hl-svn] r3345 - rl/trunk/engine/ui/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#415">[ date ]</a>
              <a href="thread.html#415">[ thread ]</a>
              <a href="subject.html#415">[ subject ]</a>
              <a href="author.html#415">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: blakharaz
Date: 2007-04-26 22:32:58 +0200 (Thu, 26 Apr 2007)
New Revision: 3344

Added:
   modules/techdemo/maps/techdemo_all_except_terrain.rlmap.xml
Removed:
   modules/techdemo/maps/techdemo_gameobjects.rlmap.xml
   modules/techdemo/maps/techdemo_lights.rlmap.xml
   rl/trunk/engine/rules/include/GameObjectProxy.h
   rl/trunk/engine/rules/src/GameObjectProxy.cpp
Modified:
   modules/aitest/scripts/NpcCapsuleTest.rb
   modules/aitest/scripts/NpcTest.rb
   modules/aitest/scripts/doortest.rb
   modules/aitest/scripts/maps/aitest.rb
   modules/aitest/scripts/maps/aitest2.rb
   modules/aitest/scripts/maps/aitestold.rb
   modules/combattest/scripts/maps/combattest.rb
   modules/regressiontest/scripts/ErrorHandlingTest.rb
   modules/regressiontest/scripts/GameObjectCreationTest.rb
   modules/regressiontest/scripts/GameObjectStatesTest.rb
   modules/regressiontest/scripts/InventoryTest.rb
   modules/regressiontest/scripts/JobSequenceTest.rb
   modules/regressiontest/scripts/MapLoadingTest.rb
   modules/regressiontest/scripts/NpcCapsuleTest.rb
   modules/regressiontest/scripts/NpcTest.rb
   modules/regressiontest/scripts/SoundTest.rb
   modules/regressiontest/scripts/TimeTest.rb
   modules/regressiontest/scripts/doortest.rb
   modules/regressiontest/scripts/effecttest.rb
   modules/regressiontest/scripts/maps/regressiontest.rb
   modules/ruchin/scripts/maps/maptest.rb
   modules/techdemo/scripts/maps/techdemo.rb
   modules/techdemo/scripts/maps/techdemo_spinne.rb
   modules/techdemo2/scripts/bauer.rb
   modules/techdemo2/scripts/buchderkultur.rb
   modules/techdemo2/scripts/druidentod.rb
   modules/techdemo2/scripts/forrest.rb
   modules/techdemo2/scripts/jarn.rb
   modules/techdemo2/scripts/kampf.rb
   modules/techdemo2/scripts/maps/techdemo2_mapchange.rb
   modules/techdemo2/scripts/maps/techdemo2map1.rb
   modules/techdemo2/scripts/maps/techdemo2map2.rb
   modules/techdemo2/scripts/retten.rb
   modules/techdemo2/scripts/schnetzeln.rb
   modules/techdemo2/scripts/sonja.rb
   modules/techdemo2/scripts/sonja2.rb
   modules/techdemo2/scripts/tsafried.rb
   modules/techdemo2/scripts/waldwoelfe_retten.rb
   modules/techdemo2/scripts/waldwoelfe_schnetzeln.rb
   modules/techdemo2/scripts/wirt.rb
   modules/techdemo2/scripts/wolf.rb
   modules/techdemo2/scripts/wolframstuer.rb
   modules/techdemo2/scripts/wolframstuer_oeffnen.rb
   rl/trunk/engine/rules/RlRules2005.vcproj
   rl/trunk/engine/rules/include/GameObject.h
   rl/trunk/engine/rules/include/GameObjectManager.h
   rl/trunk/engine/rules/src/GameObject.cpp
   rl/trunk/engine/rules/src/GameObjectManager.cpp
   rl/trunk/engine/rules/src/GameObjectNodeProcessor.cpp
   rl/trunk/engine/script/swig/RlRules.head.swig
   rl/trunk/engine/script/swig/RlRules.swig
Log:
Removed GameObjectProxy class since it was not really used, just as an obstacle :)
 Think about proxies again when they are really needed (e.g. swapping game objects from memory to hard disk)

Modified: modules/aitest/scripts/NpcCapsuleTest.rb
===================================================================
--- modules/aitest/scripts/NpcCapsuleTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/aitest/scripts/NpcCapsuleTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -12,8 +12,8 @@
         #                                   min_base, max_base, &quot;alpha_red&quot;)
         #base.placeIntoScene(center);
 
-        npc1proxy = $GOM.createGameObjectProxy(&quot;TestPersonCapsule&quot;);
-        npc1 = npc1proxy.getGameObject();
+        npc1proxy = $GOM.createGameObject(&quot;TestPersonCapsule&quot;);
+        npc1 = npc1proxy;
         npc1.setPosition(rel_pos([0.0, height, 0.0]));
 
         npc1.placeIntoScene();

Modified: modules/aitest/scripts/NpcTest.rb
===================================================================
--- modules/aitest/scripts/NpcTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/aitest/scripts/NpcTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -12,8 +12,8 @@
                                            min_base, max_base, &quot;alpha_blue&quot;)
         base.placeIntoScene(center);
 
-        npc1proxy = $GOM.createGameObjectProxy(&quot;TestPerson&quot;);
-        npc1 = npc1proxy.getGameObject();
+        npc1proxy = $GOM.createGameObject(&quot;TestPerson&quot;);
+        npc1 = npc1proxy;
         npc1.setPosition(rel_pos([0.0, height, 0.0]));
 
         npc1.placeIntoScene();

Modified: modules/aitest/scripts/doortest.rb
===================================================================
--- modules/aitest/scripts/doortest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/aitest/scripts/doortest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -38,21 +38,21 @@
         base.placeIntoScene(center);
 
         # The door with the door knob
-        door1 = $GOM.createGameObjectProxy(&quot;door&quot;).getGameObject();
+        door1 = $GOM.createGameObject(&quot;door&quot;);
 	door1.setDescription(&quot;Eine Holztuer&quot;);
 	door1.setPosition(rel_pos([1.5, height, 0.0]));
         # Place door and add door actions. Initially the door is not open but can be opened.
         door1.placeIntoScene()
 
         # The door without a working door knob, to be opened with
-        door2 = $GOM.createGameObjectProxy(&quot;door&quot;).getGameObject();
+        door2 = $GOM.createGameObject(&quot;door&quot;);
 	door2.setDescription(&quot;Eine Holztuer.\nDiese Tuer hat weder Klinke noch Schloesser&quot;);
 	door2.setPosition(rel_pos([-1.5, height, 0.0]));
         # Place door and add door actions. Initially door is not open and cannot be opened.
         door2.placeIntoScene()
 
         # The switch to open the second door
-        switch = $GOM.createGameObjectProxy(&quot;switch3way&quot;).getGameObject();
+        switch = $GOM.createGameObject(&quot;switch3way&quot;);
         switch.setPosition(rel_pos([2.25, height, 2.0]));
 	switch.placeIntoScene();
 

Modified: modules/aitest/scripts/maps/aitest.rb
===================================================================
--- modules/aitest/scripts/maps/aitest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/aitest/scripts/maps/aitest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -24,16 +24,16 @@
 $SCRIPT.log(&quot;init map 'regressiontest'...&quot;)
 
 $SCRIPT.log(&quot;Create hero&quot;)
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1);
+$hero = $GOM.createGameObject(&quot;hero&quot;, 1);
 
 $SCRIPT.log(&quot;Place hero into scene&quot;)
-$hero.getGameObject().placeIntoScene()
+$hero.placeIntoScene()
 
 $SCRIPT.log(&quot;Prepare hero for being the active character&quot;)
-PlayerSettings.preparePlayer($hero.getGameObject())
+PlayerSettings.preparePlayer($hero)
 
 $SCRIPT.log(&quot;Set hero as active character&quot;)
-$UI.setActiveCharacter($hero.getGameObject())
+$UI.setActiveCharacter($hero)
 $SCRIPT.log(&quot;Hero ready&quot;)
 
 $SCRIPT.log(&quot;map 'regressiontest' initialisiert.&quot;);
@@ -62,7 +62,7 @@
 #$MyAS.initastar()
 #$IM.linkKeyToRubyCommand('H',&quot;$MyAS.calcFromTo([9.3,8.2,-10,-3])&quot;);
 
-wolf = $GOM.createGameObjectProxy(&quot;Wolf&quot;).getGameObject()
+wolf = $GOM.createGameObject(&quot;Wolf&quot;)
 wolf.placeIntoScene
 wolf.setPosition [0.0,0.0,-5.0]
 

Modified: modules/aitest/scripts/maps/aitest2.rb
===================================================================
--- modules/aitest/scripts/maps/aitest2.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/aitest/scripts/maps/aitest2.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -24,18 +24,18 @@
 $SCRIPT.log(&quot;init map 'aitest'...&quot;)
 
 $SCRIPT.log(&quot;Create hero&quot;)
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1);
+$hero = $GOM.createGameObject(&quot;hero&quot;, 1);
 
 $SCRIPT.log(&quot;Place hero into scene&quot;)
-#$hero.getGameObject().setPosition([1.0, 0.0, 0.0]);
-$hero.getGameObject().placeIntoScene()
+#$hero.setPosition([1.0, 0.0, 0.0]);
+$hero.placeIntoScene()
 
 
 $SCRIPT.log(&quot;Prepare hero for being the active character&quot;)
-PlayerSettings.preparePlayer($hero.getGameObject())
+PlayerSettings.preparePlayer($hero)
 
 $SCRIPT.log(&quot;Set hero as active character&quot;)
-$UI.setActiveCharacter($hero.getGameObject())
+$UI.setActiveCharacter($hero)
 
 $SCRIPT.log(&quot;Hero ready&quot;)
 

Modified: modules/aitest/scripts/maps/aitestold.rb
===================================================================
--- modules/aitest/scripts/maps/aitestold.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/aitest/scripts/maps/aitestold.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -24,18 +24,18 @@
 $SCRIPT.log(&quot;init map 'aitest'...&quot;)
 
 $SCRIPT.log(&quot;Create hero&quot;)
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1);
+$hero = $GOM.createGameObject(&quot;hero&quot;, 1);
 
 $SCRIPT.log(&quot;Place hero into scene&quot;)
-#$hero.getGameObject().setPosition([1.0, 0.0, 0.0]);
-$hero.getGameObject().placeIntoScene()
+#$hero.setPosition([1.0, 0.0, 0.0]);
+$hero.placeIntoScene()
 
 
 $SCRIPT.log(&quot;Prepare hero for being the active character&quot;)
-PlayerSettings.preparePlayer($hero.getGameObject())
+PlayerSettings.preparePlayer($hero)
 
 $SCRIPT.log(&quot;Set hero as active character&quot;)
-$UI.setActiveCharacter($hero.getGameObject())
+$UI.setActiveCharacter($hero)
 
 $SCRIPT.log(&quot;Hero ready&quot;)
 

Modified: modules/combattest/scripts/maps/combattest.rb
===================================================================
--- modules/combattest/scripts/maps/combattest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/combattest/scripts/maps/combattest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -7,19 +7,19 @@
 $SCRIPT.log(&quot;init map 'regressiontest'...&quot;)
 
 $SCRIPT.log(&quot;Create hero&quot;)
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1);
+$hero = $GOM.createGameObject(&quot;hero&quot;, 1);
 
 $SCRIPT.log(&quot;Place hero into scene&quot;)
-$hero.getGameObject().placeIntoScene()
+$hero.placeIntoScene()
 
 $SCRIPT.log(&quot;Prepare hero for being the active character&quot;)
-PlayerSettings.preparePlayer($hero.getGameObject())
+PlayerSettings.preparePlayer($hero)
 
 $SCRIPT.log(&quot;Set hero as active character&quot;)
-$UI.setActiveCharacter($hero.getGameObject())
+$UI.setActiveCharacter($hero)
 $SCRIPT.log(&quot;Hero ready&quot;)
 
-wolf = $GOM.createGameObjectProxy(&quot;Wolf&quot;).getGameObject()
+wolf = $GOM.createGameObject(&quot;Wolf&quot;)
 wolf.placeIntoScene
 wolf.setPosition [0.0,0.0,-5.0]
 wolf.setAlignment(Creature::ALIGNMENT_ENEMY)

Modified: modules/regressiontest/scripts/ErrorHandlingTest.rb
===================================================================
--- modules/regressiontest/scripts/ErrorHandlingTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/ErrorHandlingTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -28,7 +28,7 @@
                                           &quot;alpha_orange&quot;)
         base.placeIntoScene(center);
 
-        eh = $GOM.createGameObjectProxy(&quot;ErrorHandling&quot;).getGameObject();
+        eh = $GOM.createGameObject(&quot;ErrorHandling&quot;);
         eh.addAction(DirectorErrorAction.new());
         eh.placeIntoScene();
         eh.setPosition(rel_pos([0.0, height, 0.0]));

Modified: modules/regressiontest/scripts/GameObjectCreationTest.rb
===================================================================
--- modules/regressiontest/scripts/GameObjectCreationTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/GameObjectCreationTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -4,10 +4,10 @@
   def initialize(center)
     super(center)
 
-    appl = $GOM.createGameObjectProxy(&quot;apple&quot;);
-    appl.getGameObject().setPosition([0,0,0]);
+    appl = $GOM.createGameObject(&quot;apple&quot;);
+    appl.setPosition([0,0,0]);
 
-    appl2 = $GOM.createGameObjectProxy(&quot;apple&quot;, 15);
-    appl2.getGameObject().setPosition([0,1,0]);
+    appl2 = $GOM.createGameObject(&quot;apple&quot;, 15);
+    appl2.setPosition([0,1,0]);
   end
 end
\ No newline at end of file

Modified: modules/regressiontest/scripts/GameObjectStatesTest.rb
===================================================================
--- modules/regressiontest/scripts/GameObjectStatesTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/GameObjectStatesTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -4,11 +4,11 @@
   def initialize(center)
     super(center)
 
-    appl2 = $GOM.createGameObjectProxy(&quot;apple&quot;, 15);
+    appl2 = $GOM.createGameObject(&quot;apple&quot;, 15);
     p &quot;appl2 created&quot;
-    appl2.getGameObject().placeIntoScene();
+    appl2.placeIntoScene();
     p &quot;set appl2 into scene&quot;
-    appl2.getGameObject().setPosition(rel_pos([1, 1, 1]));
-    p appl2.getGameObject().getPosition()
+    appl2.setPosition(rel_pos([1, 1, 1]));
+    p appl2.getPosition()
   end
 end
\ No newline at end of file

Modified: modules/regressiontest/scripts/InventoryTest.rb
===================================================================
--- modules/regressiontest/scripts/InventoryTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/InventoryTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -5,8 +5,8 @@
   def initialize(center)
     super(center)
 
-    hero = $GOM.getGameObjectProxy(1).getGameObject();
-    backpack = $GOM.createGameObjectProxy(&quot;leather backpack&quot;).getGameObject();
+    hero = $GOM.getGameObject(1);
+    backpack = $GOM.createGameObject(&quot;leather backpack&quot;);
     #backpack.addAction(ShowContainerContentAction.new());
     #backpack.setPosition(center);
     #backpack.placeIntoScene();
@@ -15,22 +15,22 @@
     hero.getInventory().hold(backpack, &quot;Back&quot;);
     
     $SCRIPT.log(&quot;InventoryTest #2: Put a loaded object into container.&quot;);
-    sword_loaded_to_inventory = $GOM.createGameObjectProxy(&quot;shortsword&quot;).getGameObject();
+    sword_loaded_to_inventory = $GOM.createGameObject(&quot;shortsword&quot;);
     hero.getInventory().getItem(&quot;Back&quot;).addItem(sword_loaded_to_inventory);
 
     $SCRIPT.log(&quot;InventoryTest #3: Put an object from the scene into container.&quot;);
-    sword_in_scene_to_inventory = $GOM.createGameObjectProxy(&quot;shortsword&quot;).getGameObject();
+    sword_in_scene_to_inventory = $GOM.createGameObject(&quot;shortsword&quot;);
     sword_in_scene_to_inventory.placeIntoScene();
     hero.getInventory().getItem(&quot;Back&quot;).addItem(sword_in_scene_to_inventory);
 
     $SCRIPT.log(&quot;InventoryTest #4: Put an object attached to the hero into container.&quot;);
-    sword_held_to_inventory = $GOM.createGameObjectProxy(&quot;shortsword&quot;).getGameObject();
+    sword_held_to_inventory = $GOM.createGameObject(&quot;shortsword&quot;);
     hero.getInventory().hold(sword_held_to_inventory, &quot;Left Hand&quot;);
     hero.getInventory().dropItem(&quot;Left Hand&quot;)
     hero.getInventory().getItem(&quot;Back&quot;).addItem(sword_held_to_inventory);
 
     $SCRIPT.log(&quot;InventoryTest #5: Put an object from a container into the hero's hand.&quot;);
-    sword_inventory_to_hold = $GOM.createGameObjectProxy(&quot;shortsword&quot;).getGameObject();
+    sword_inventory_to_hold = $GOM.createGameObject(&quot;shortsword&quot;);
     hero.getInventory().getItem(&quot;Back&quot;).addItem(sword_inventory_to_hold)
     hero.getInventory().getItem(&quot;Back&quot;).removeItem(sword_inventory_to_hold)
     hero.getInventory().hold(sword_inventory_to_hold, &quot;Right Hand&quot;);

Modified: modules/regressiontest/scripts/JobSequenceTest.rb
===================================================================
--- modules/regressiontest/scripts/JobSequenceTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/JobSequenceTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -38,8 +38,8 @@
                                            min_base, max_base, &quot;alpha_green&quot;)
         base.placeIntoScene(center);
 
-        chest = $GOM.createGameObjectProxy(
-            &quot;JobSequenceTestChest&quot;).getGameObject();
+        chest = $GOM.createGameObject(
+            &quot;JobSequenceTestChest&quot;);
         chest.addAction(JobSequenceTestAction.new());
         chest.placeIntoScene();
         chest.setPosition(rel_pos([0.0, height, 0.0]));

Modified: modules/regressiontest/scripts/MapLoadingTest.rb
===================================================================
--- modules/regressiontest/scripts/MapLoadingTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/MapLoadingTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -11,33 +11,33 @@
         loader.loadMap(&quot;regressiontest_maploadingtest.rlmap.xml&quot;);
         
 		p &quot;--- Built-in GO class, created by MapLoader ---&quot;
-        builtIn = GameObjectManager.getSingleton().getGameObjectProxy(10)
+        builtIn = GameObjectManager.getSingleton().getGameObject(10)
         p builtIn
-        p builtIn.getGameObject()
-        p builtIn.getGameObject().getActor()
+        p builtIn
+        p builtIn.getActor()
 
 		p &quot;--- Custom GO class, created by MapLoader ---&quot;
-        custom = GameObjectManager.getSingleton().getGameObjectProxy(11)
+        custom = GameObjectManager.getSingleton().getGameObject(11)
         p custom
-        p custom.getGameObject()
-        p custom.getGameObject().getActor()
+        p custom
+        p custom.getActor()
         
 		p &quot;--- Built-in GO class, created by Ruby script ---&quot;
-        builtIn2 = GameObjectManager.getSingleton().createGameObjectProxy(&quot;builtin_go&quot;, 10)
-        builtIn2.getGameObject().setName(builtIn2.getGameObject().getName() + &quot;_2&quot;)
-        builtIn2.getGameObject().setPosition([-6, 0, -10.0])
-        builtIn2.getGameObject().setState(GOS_IN_SCENE)
+        builtIn2 = GameObjectManager.getSingleton().createGameObject(&quot;builtin_go&quot;, 10)
+        builtIn2.setName(builtIn2.getName() + &quot;_2&quot;)
+        builtIn2.setPosition([-6, 0, -10.0])
+        builtIn2.setState(GOS_IN_SCENE)
         p builtIn2
-        p builtIn2.getGameObject()
-        p builtIn2.getGameObject().getActor()
+        p builtIn2
+        p builtIn2.getActor()
 
 		p &quot;--- Custom GO class, created by Ruby script ---&quot;
-        custom2 = GameObjectManager.getSingleton().createGameObjectProxy(&quot;custom_go&quot;, 11)
-        custom2.getGameObject().setName(custom2.getGameObject().getName() + &quot;_2&quot;)
-        custom2.getGameObject().setPosition([-6, 0, -11.0])
-        custom2.getGameObject().setState(GOS_IN_SCENE)
+        custom2 = GameObjectManager.getSingleton().createGameObject(&quot;custom_go&quot;, 11)
+        custom2.setName(custom2.getName() + &quot;_2&quot;)
+        custom2.setPosition([-6, 0, -11.0])
+        custom2.setState(GOS_IN_SCENE)
         p custom2
-        p custom2.getGameObject()
-        p custom2.getGameObject().getActor()
+        p custom2
+        p custom2.getActor()
     end
 end

Modified: modules/regressiontest/scripts/NpcCapsuleTest.rb
===================================================================
--- modules/regressiontest/scripts/NpcCapsuleTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/NpcCapsuleTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -12,8 +12,8 @@
                                            min_base, max_base, &quot;alpha_red&quot;)
         base.placeIntoScene(center);
 
-        npc1proxy = $GOM.createGameObjectProxy(&quot;TestPersonCapsule&quot;);
-        npc1 = npc1proxy.getGameObject();
+        npc1proxy = $GOM.createGameObject(&quot;TestPersonCapsule&quot;);
+        npc1 = npc1proxy;
         npc1.setPosition(rel_pos([0.0, height, 0.0]));
 
         npc1.placeIntoScene();

Modified: modules/regressiontest/scripts/NpcTest.rb
===================================================================
--- modules/regressiontest/scripts/NpcTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/NpcTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -12,8 +12,8 @@
                                            min_base, max_base, &quot;alpha_blue&quot;)
         base.placeIntoScene(center);
 
-        npc1proxy = $GOM.createGameObjectProxy(&quot;TestPerson&quot;);
-        npc1 = npc1proxy.getGameObject();
+        npc1proxy = $GOM.createGameObject(&quot;TestPerson&quot;);
+        npc1 = npc1proxy;
         npc1.setPosition(rel_pos([0.0, height, 0.0]));
 
         npc1.placeIntoScene();

Modified: modules/regressiontest/scripts/SoundTest.rb
===================================================================
--- modules/regressiontest/scripts/SoundTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/SoundTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -16,7 +16,7 @@
         0.step(2 * PI, step) do |radian|
             x = cos(radian) * @@radius
             y = sin(radian) * @@radius
-            fackel = $GOM.createGameObjectProxy(&quot;torch&quot;).getGameObject()
+            fackel = $GOM.createGameObject(&quot;torch&quot;)
             fackel.setDescription(&quot;Fackel&quot; + radian.to_s)
             fackel.setPosition(rel_pos([x, @@height, y]))
             fackel.placeIntoScene()

Modified: modules/regressiontest/scripts/TimeTest.rb
===================================================================
--- modules/regressiontest/scripts/TimeTest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/TimeTest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -31,7 +31,7 @@
                                           &quot;alpha_orange&quot;)
         base.placeIntoScene(center);
 
-        scheit = $GOM.createGameObjectProxy(&quot;Holzscheit&quot;).getGameObject();
+        scheit = $GOM.createGameObject(&quot;Holzscheit&quot;);
         scheit.addAction(TimeCheckAction.new());
         scheit.placeIntoScene();
         scheit.setPosition(rel_pos([0.0, height, 0.0]));

Modified: modules/regressiontest/scripts/doortest.rb
===================================================================
--- modules/regressiontest/scripts/doortest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/doortest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -38,21 +38,21 @@
         base.placeIntoScene(center);
 
         # The door with the door knob
-        door1 = $GOM.createGameObjectProxy(&quot;door&quot;).getGameObject();
+        door1 = $GOM.createGameObject(&quot;door&quot;);
 	door1.setDescription(&quot;Eine Holztuer&quot;);
 	door1.setPosition(rel_pos([1.5, height, 0.0]));
         # Place door and add door actions. Initially the door is not open but can be opened.
         door1.placeIntoScene()
 
         # The door without a working door knob, to be opened with
-        door2 = $GOM.createGameObjectProxy(&quot;door&quot;).getGameObject();
+        door2 = $GOM.createGameObject(&quot;door&quot;);
 	door2.setDescription(&quot;Eine Holztuer.\nDiese Tuer hat weder Klinke noch Schloesser&quot;);
 	door2.setPosition(rel_pos([-1.5, height, 0.0]));
         # Place door and add door actions. Initially door is not open and cannot be opened.
         door2.placeIntoScene()
 
         # The switch to open the second door
-        switch = $GOM.createGameObjectProxy(&quot;switch3way&quot;).getGameObject();
+        switch = $GOM.createGameObject(&quot;switch3way&quot;);
         switch.setPosition(rel_pos([2.25, height, 2.0]));
 	switch.placeIntoScene();
 

Modified: modules/regressiontest/scripts/effecttest.rb
===================================================================
--- modules/regressiontest/scripts/effecttest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/effecttest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -18,7 +18,7 @@
   
   def doAction(go, user, target)
      p &quot;Du wirst versteinert.&quot;;
-     $hero.getGameObject().addEffectWithCheckTime($paralueseffect, 1 * Date::ONE_SPIELRUNDE);
+     $hero.addEffectWithCheckTime($paralueseffect, 1 * Date::ONE_SPIELRUNDE);
      p &quot;Du solltest dich jetzt eine Weile nicht mehr bewegen k&#195;&#182;nnen.&quot;;
   end
 end
@@ -34,12 +34,12 @@
   
   def doAction(go, user, target)
      p &quot;KO normal: &quot; 
-     p $hero.getGameObject().getEigenschaft(&quot;KO&quot;);
+     p $hero.getEigenschaft(&quot;KO&quot;);
      p &quot;Du wirst resistent gegen Krankheiten.&quot;;
-     $hero.getGameObject().addEffect($resistenzeffect);
+     $hero.addEffect($resistenzeffect);
      p &quot;Effekt angewendet.&quot;;
      p &quot;KO gegen Krankheiten: &quot; 
-     p $hero.getGameObject().getEigenschaft(&quot;KO&quot;, Effect::MODTAG_KRANKHEIT);
+     p $hero.getEigenschaft(&quot;KO&quot;, Effect::MODTAG_KRANKHEIT);
   end
 end
 
@@ -58,7 +58,7 @@
                                           &quot;alpha_yellow&quot;)
         base.placeIntoScene(center);
 
-        bottich = $GOM.createGameObjectProxy(&quot;EffectTest&quot;).getGameObject();
+        bottich = $GOM.createGameObject(&quot;EffectTest&quot;);
         bottich.addAction(ParaluesAction.new());
         bottich.addAction(ResistenzAction.new());
         bottich.placeIntoScene();

Modified: modules/regressiontest/scripts/maps/regressiontest.rb
===================================================================
--- modules/regressiontest/scripts/maps/regressiontest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/regressiontest/scripts/maps/regressiontest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -22,19 +22,19 @@
 $SCRIPT.log(&quot;init map 'regressiontest'...&quot;)
 
 $SCRIPT.log(&quot;Create hero&quot;)
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1);
+$hero = $GOM.createGameObject(&quot;hero&quot;, 1);
 
 $SCRIPT.log(&quot;Place hero into scene&quot;)
-#$hero.getGameObject().setPosition([0.0, 1.0, 0.0]);
-$hero.getGameObject().setState(GOS_IN_SCENE)
+#$hero.setPosition([0.0, 1.0, 0.0]);
+$hero.setState(GOS_IN_SCENE)
 
 
 
 $SCRIPT.log(&quot;Prepare hero for being the active character&quot;)
-PlayerSettings.preparePlayer($hero.getGameObject())
+PlayerSettings.preparePlayer($hero)
 
 $SCRIPT.log(&quot;Set hero as active character&quot;)
-$UI.setActiveCharacter($hero.getGameObject())
+$UI.setActiveCharacter($hero)
 
 $SCRIPT.log(&quot;Hero ready&quot;)
 

Modified: modules/ruchin/scripts/maps/maptest.rb
===================================================================
--- modules/ruchin/scripts/maps/maptest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/ruchin/scripts/maps/maptest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -35,7 +35,7 @@
 
 
 $SCRIPT.log(&quot;Create hero&quot;)
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1).getGameObject();
+$hero = $GOM.createGameObject(&quot;hero&quot;, 1);
 
 $SCRIPT.log(&quot;Place hero into scene&quot;)
 $hero.placeIntoScene();

Added: modules/techdemo/maps/techdemo_all_except_terrain.rlmap.xml
===================================================================
--- modules/techdemo/maps/techdemo_all_except_terrain.rlmap.xml	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo/maps/techdemo_all_except_terrain.rlmap.xml	2007-04-26 20:32:58 UTC (rev 3344)
@@ -0,0 +1,53 @@
+&#239;&#187;&#191;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;rastullahmap formatVersion=&quot;0.4.0&quot;&gt;
+	&lt;nodes&gt;
+&lt;!--		&lt;gameobject class=&quot;hero&quot; id=&quot;1&quot; state=&quot;IN_SCENE&quot;&gt;
+			&lt;position x=&quot;0&quot; y=&quot;0.7&quot; z=&quot;0&quot;/&gt;
+		&lt;/gameobject&gt;--&gt;
+		&lt;gameobject class=&quot;ArnolfGrossschaedel&quot; state=&quot;IN_SCENE&quot;&gt;
+			&lt;position x=&quot;29.9182&quot; y=&quot;-0.6554&quot; z=&quot;9.590&quot;/&gt;
+            &lt;rotation qw=&quot;0.766&quot; qx=&quot;0.0&quot; qy=&quot;-0.642&quot; qz=&quot;0.0&quot; /&gt;
+		&lt;/gameobject&gt;
+        &lt;gameobject class=&quot;Waldspinne&quot; state=&quot;IN_SCENE&quot;&gt;
+			&lt;position x=&quot;-20.4&quot; y=&quot;3.43&quot; z=&quot;-82&quot;/&gt;
+        &lt;/gameobject&gt;
+		&lt;gameobject class=&quot;door&quot; id=&quot;7&quot; state=&quot;IN_SCENE&quot;&gt;
+			&lt;position x=&quot;141.95&quot; y=&quot;7.2&quot; z=&quot;32.55&quot;/&gt;
+            &lt;rotation qw=&quot;0.965&quot; qx=&quot;0.0&quot; qy=&quot;0.258&quot; qz=&quot;0.0&quot; /&gt;
+		&lt;/gameobject&gt;
+		&lt;gameobject class=&quot;switch3way&quot; id=&quot;8&quot; state=&quot;IN_SCENE&quot;&gt;
+			&lt;position x=&quot;114.8&quot; y=&quot;10.7&quot; z=&quot;34.75&quot;/&gt;
+            &lt;rotation qw=&quot;0.704&quot; qx=&quot;-0.061&quot; qy=&quot;-0.061&quot; qz=&quot;0.704&quot; /&gt;
+		&lt;/gameobject&gt;
+		&lt;gameobject class=&quot;chest&quot; id=&quot;9&quot; state=&quot;IN_SCENE&quot;&gt;
+			&lt;position x=&quot;123.53&quot; y=&quot;9.5&quot; z=&quot;47.25&quot;/&gt;
+		&lt;/gameobject&gt;
+		&lt;gameobject class=&quot;torch&quot; id=&quot;10&quot; state=&quot;LOADED&quot;/&gt;
+		&lt;gameobject class=&quot;Heiltrank&quot; state=&quot;IN_SCENE&quot;&gt;
+			&lt;position x=&quot;155.59&quot; y=&quot;6.75&quot; z=&quot;20.96&quot;/&gt;            
+		&lt;/gameobject&gt;
+		&lt;gameobject class=&quot;Fels&quot; id=&quot;11&quot; state=&quot;LOADED&quot;&gt;
+			&lt;position x=&quot;105.51&quot; y=&quot;26.05&quot; z=&quot;40.35&quot;/&gt;
+		&lt;/gameobject&gt;
+		&lt;gameobject class=&quot;Fels&quot; id=&quot;12&quot; state=&quot;LOADED&quot;&gt;
+			&lt;position x=&quot;99.85&quot; y=&quot;21.37&quot; z=&quot;45.87&quot;/&gt;
+		&lt;/gameobject&gt;
+		&lt;gameobject class=&quot;Fels&quot; id=&quot;13&quot; state=&quot;LOADED&quot;&gt;
+			&lt;position x=&quot;94.43&quot; y=&quot;30.1&quot; z=&quot;44.11&quot;/&gt;
+		&lt;/gameobject&gt;
+		&lt;gameobject class=&quot;rockpile&quot; id=&quot;14&quot; state=&quot;IN_SCENE&quot;&gt;
+			&lt;position x=&quot;94.43&quot; y=&quot;10.1&quot; z=&quot;44.11&quot;/&gt;            
+		&lt;/gameobject&gt;
+        &lt;light name=&quot;sunlight&quot; type=&quot;directional&quot; visible=&quot;true&quot; castShadows=&quot;false&quot;&gt;
+            &lt;colourDiffuse r=&quot;0.8&quot; g=&quot;0.8&quot; b=&quot;0.7&quot;/&gt;
+            &lt;colourSpecular r=&quot;0.8&quot; g=&quot;0.8&quot; b=&quot;0.7&quot;/&gt;
+            &lt;direction x=&quot;0.7&quot; y=&quot;-2&quot; z=&quot;0.8&quot;/&gt;
+        &lt;/light&gt;
+	&lt;/nodes&gt;
+	&lt;sky type=&quot;box&quot; material=&quot;rl/dsa07&quot; range=&quot;500&quot;/&gt;
+	&lt;zones&gt;
+		&lt;zone type=&quot;default&quot;&gt;
+			&lt;light name=&quot;sunlight&quot;/&gt;
+		&lt;/zone&gt;
+	&lt;/zones&gt;
+&lt;/rastullahmap&gt;

Deleted: modules/techdemo/maps/techdemo_gameobjects.rlmap.xml
===================================================================
--- modules/techdemo/maps/techdemo_gameobjects.rlmap.xml	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo/maps/techdemo_gameobjects.rlmap.xml	2007-04-26 20:32:58 UTC (rev 3344)
@@ -1,39 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
-&lt;rastullahmap formatVersion=&quot;0.4.0&quot;&gt;
-	&lt;nodes&gt;
-		&lt;gameobject class=&quot;ArnolfGrossschaedel&quot; state=&quot;IN_SCENE&quot;&gt;
-			&lt;position x=&quot;29.9182&quot; y=&quot;-0.6554&quot; z=&quot;9.590&quot;/&gt;
-      &lt;rotation qw=&quot;0.766&quot; qx=&quot;0.0&quot; qy=&quot;-0.642&quot; qz=&quot;0.0&quot; /&gt;
-		&lt;/gameobject&gt;
-    &lt;gameobject class=&quot;Waldspinne&quot; state=&quot;IN_SCENE&quot;/&gt;
-			&lt;position x=&quot;-20.4&quot; y=&quot;3.43&quot; z=&quot;-82&quot;/&gt;
-		&lt;/gameobject&gt;
-    &lt;gameobject class=&quot;door&quot; id=&quot;7&quot; state=&quot;IN_SCENE&quot;/&gt;
-			&lt;position x=&quot;141.95&quot; y=&quot;7.2&quot; z=&quot;32.55&quot;/&gt;
-      &lt;rotation qw=&quot;0.965&quot; qx=&quot;0.0&quot; qy=&quot;0.258&quot; qz=&quot;0.0&quot; /&gt;
-		&lt;/gameobject&gt;
-    &lt;gameobject class=&quot;switch3way&quot; id=&quot;8&quot; state=&quot;IN_SCENE&quot;/&gt;
-			&lt;position x=&quot;114.8&quot; y=&quot;10.7&quot; z=&quot;34.75&quot;/&gt;
-      &lt;rotation qw=&quot;0.704&quot; qx=&quot;-0.061&quot; qy=&quot;-0.061&quot; qz=&quot;0.704&quot; /&gt;
-		&lt;/gameobject&gt;
-    &lt;gameobject class=&quot;chest&quot; id=&quot;9&quot; state=&quot;IN_SCENE&quot;/&gt;
-			&lt;position x=&quot;123.53&quot; y=&quot;9.5&quot; z=&quot;47.25&quot;/&gt;
-		&lt;/gameobject&gt;
-    &lt;gameobject class=&quot;torch&quot; id=&quot;10&quot; state=&quot;LOADED&quot;/&gt;
-		&lt;gameobject class=&quot;Heiltrank&quot; state=&quot;IN_SCENE&quot;&gt;
-			&lt;position x=&quot;155.59&quot; y=&quot;6.75&quot; z=&quot;20.96&quot;/&gt;            
-		&lt;/gameobject&gt;
-		&lt;gameobject class=&quot;Fels&quot; id=&quot;11&quot; state=&quot;LOADED&quot;&gt;
-			&lt;position x=&quot;105.51&quot; y=&quot;26.05&quot; z=&quot;40.35&quot;/&gt;
-		&lt;/gameobject&gt;
-		&lt;gameobject class=&quot;Fels&quot; id=&quot;12&quot; state=&quot;LOADED&quot;&gt;
-			&lt;position x=&quot;99.85&quot; y=&quot;21.37&quot; z=&quot;45.87&quot;/&gt;
-		&lt;/gameobject&gt;
-		&lt;gameobject class=&quot;Fels&quot; id=&quot;13&quot; state=&quot;LOADED&quot;&gt;
-			&lt;position x=&quot;94.43&quot; y=&quot;30.1&quot; z=&quot;44.11&quot;/&gt;
-		&lt;/gameobject&gt;
-		&lt;gameobject class=&quot;rockpile&quot; id=&quot;14&quot; state=&quot;IN_SCENE&quot;&gt;
-			&lt;position x=&quot;94.43&quot; y=&quot;10.1&quot; z=&quot;44.11&quot;/&gt;            
-		&lt;/gameobject&gt;
-	&lt;/nodes&gt;
-&lt;/rastullahmap&gt;

Deleted: modules/techdemo/maps/techdemo_lights.rlmap.xml
===================================================================
--- modules/techdemo/maps/techdemo_lights.rlmap.xml	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo/maps/techdemo_lights.rlmap.xml	2007-04-26 20:32:58 UTC (rev 3344)
@@ -1,24 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
-&lt;rastullahmap formatVersion=&quot;0.4.0&quot;&gt;
-  &lt;nodes&gt;
-    &lt;light name=&quot;light1&quot; type=&quot;point&quot; visible=&quot;true&quot; castShadows=&quot;false&quot;&gt;
-      &lt;position x=&quot;29.9182&quot; y=&quot;2&quot; z=&quot;9.590&quot;/&gt;
-      &lt;colourDiffuse r=&quot;1&quot; g=&quot;0&quot; b=&quot;0&quot; /&gt;
-      &lt;colourSpecular r=&quot;1&quot; g=&quot;0&quot; b=&quot;0&quot; /&gt;
-      &lt;lightAttenuation range=&quot;2.0&quot; constant=&quot;1.0&quot; linear=&quot;0.0&quot; quadratic=&quot;0.0&quot;/&gt;
-    &lt;/light&gt;
-    &lt;light name=&quot;light2&quot; type=&quot;spot&quot; visible=&quot;true&quot; castShadows=&quot;false&quot;&gt;
-      &lt;position x=&quot;15.9182&quot; y=&quot;2&quot; z=&quot;9.590&quot;/&gt;
-      &lt;colourDiffuse r=&quot;0&quot; g=&quot;1&quot; b=&quot;0&quot; /&gt;
-      &lt;colourSpecular r=&quot;0&quot; g=&quot;1&quot; b=&quot;0&quot; /&gt;
-      &lt;lightAttenuation range=&quot;20.0&quot; constant=&quot;1.0&quot; linear=&quot;0.0&quot; quadratic=&quot;0.0&quot;/&gt;
-      &lt;spotlightrange inner=&quot;20&quot; outer=&quot;40&quot; falloff=&quot;0.5&quot; /&gt;
-      &lt;direction x=&quot;0&quot; y=&quot;-1&quot; z=&quot;0.5&quot; /&gt;
-    &lt;/light&gt;
-    &lt;light name=&quot;light3&quot; type=&quot;directional&quot; visible=&quot;true&quot; castShadows=&quot;false&quot;&gt;
-      &lt;colourDiffuse r=&quot;0&quot; g=&quot;0&quot; b=&quot;1&quot; /&gt;
-      &lt;colourSpecular r=&quot;0&quot; g=&quot;0&quot; b=&quot;1&quot; /&gt;
-      &lt;direction x=&quot;1&quot; y=&quot;-1&quot; z=&quot;0&quot; /&gt;
-    &lt;/light&gt;
-  &lt;/nodes&gt;
-&lt;/rastullahmap&gt;

Modified: modules/techdemo/scripts/maps/techdemo.rb
===================================================================
--- modules/techdemo/scripts/maps/techdemo.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo/scripts/maps/techdemo.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -16,7 +16,7 @@
 $SCRIPT.log(&quot;Welten-Thema fertig&quot;);
 
 $SCRIPT.log(&quot;Get hero&quot;)
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1).getGameObject();
+$hero = $GOM.createGameObject(&quot;hero&quot;, 1);
 $hero.setPosition([0, 0.7, 0]);
 $hero.placeIntoScene();
 
@@ -28,27 +28,22 @@
 
 $World.setFog( World::FOG_EXP, [0.8,0.8,1.0,0.5], 0.00003, 0.4, 1.0);
 
-p &quot;This should not be nil since this GO is placed into scene: &quot; + $GOM.getGameObjectProxy(7).getGameObject().getActor()
-
 tueroeffner = CaveDoorOpener.new(
-	$GOM.getGameObjectProxy(7).getGameObject(), 
-	$GOM.getGameObjectProxy(8).getGameObject())
+	$GOM.getGameObject(7), 
+	$GOM.getGameObject(8))
 
-truhe = $GOM.getGameObjectProxy(9).getGameObject();
-truhe.addItem($GOM.getGameObjectProxy(10).getGameObject())
+truhe = $GOM.getGameObject(9);
+truhe.addItem($GOM.getGameObject(10))
 
 
-luftfels1 = $GOM.getGameObjectProxy(11).getGameObject()
-luftfels2 = $GOM.getGameObjectProxy(12).getGameObject()
-luftfels3 = $GOM.getGameObjectProxy(13).getGameObject()
+luftfels1 = $GOM.getGameObject(11)
+luftfels2 = $GOM.getGameObject(12)
+luftfels3 = $GOM.getGameObject(13)
 
 $SCRIPT.log(&quot;Steinschlag: SteinschlagzoneListener erstellen&quot;);
 areaListener = SteinschlagzoneListener.new(luftfels1, luftfels2, luftfels3 );
 
-felshaufen = $GOM.getGameObjectProxy(14).getGameObject()
-p felshaufen
-p felshaufen.getActor()
-p felshaufen.getActor().getPhysicalThing()
+felshaufen = $GOM.getGameObject(14)
 felshaufen.getActor().getPhysicalThing().setContactListener( 
 	RockpileContactListener.new($felshaufen, luftfels1, luftfels2, luftfels3) );
 

Modified: modules/techdemo/scripts/maps/techdemo_spinne.rb
===================================================================
--- modules/techdemo/scripts/maps/techdemo_spinne.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo/scripts/maps/techdemo_spinne.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -18,7 +18,7 @@
 
 	def animationFinished(anEvent)
 		$SCRIPT.log(&quot;SpiderDie animationFinished.&quot;);
-		anEvent.getAnimation().getMeshObject().getActor().getGameObject().die(@mPlayer)
+		anEvent.getAnimation().getMeshObject().getActor().die(@mPlayer)
 	end
 	
 	def animationPaused(anEvent)

Modified: modules/techdemo2/scripts/bauer.rb
===================================================================
--- modules/techdemo2/scripts/bauer.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/bauer.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -4,7 +4,7 @@
 
 print( &quot;Bauer wird geladen&quot; );
 
-bower = $GOM.createGameObjectProxy(&quot;Bauer&quot;).getGameObject();
+bower = $GOM.createGameObject(&quot;Bauer&quot;);
 bower.placeIntoScene()
 
 bowerAnim = bower.getActor().getControlledObject().startAnimation(&quot;reden&quot;);

Modified: modules/techdemo2/scripts/buchderkultur.rb
===================================================================
--- modules/techdemo2/scripts/buchderkultur.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/buchderkultur.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -51,5 +51,5 @@
     end
 end
 
-buchDK = $GOM.createGameObjectProxy(&quot;Buch der Kultur&quot;).getGameObject();
+buchDK = $GOM.createGameObject(&quot;Buch der Kultur&quot;);
 buchDK.placeIntoScene();

Modified: modules/techdemo2/scripts/druidentod.rb
===================================================================
--- modules/techdemo2/scripts/druidentod.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/druidentod.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -2,7 +2,7 @@
 
 $UI.getActiveCharacter().getActor().getControlledObject().startAnimation(&quot;kampf_schwerter_angriff_1&quot;, 1.0, 1)
 
-#Ger&#228;usch
+#Ger&#239;&#191;&#189;usch
 @mTodSound = $AM.createSoundSampleActor(&quot;TodSound&quot;,&quot;altermann005.ogg&quot;);
 @mTodSound.getControlledObject().set3d(false);
 @mTodSound.getControlledObject().load();
@@ -16,7 +16,7 @@
 $AM.getActor(&quot;Alter Mann&quot;).getControlledObject().startAnimation(&quot;kampf_schwerter_getroffen&quot;, 0.8, 1); 
 $AM.getActor(&quot;Alter Mann&quot;).getControlledObject().startAnimation(&quot;reden&quot;, 3.0, 7); 
 
-#Physiksto&#223; an den Druiden
+#Physiksto&#239;&#191;&#189; an den Druiden
 $AM.getActor(&quot;Alter Mann&quot;).getPhysicalThing().unfreeze();
 $AM.getActor(&quot;Alter Mann&quot;).getPhysicalThing().addForce([30000.0, 5000.0, 95000.0]);
 
@@ -30,9 +30,9 @@
 fade.setDeleteOnFinish( true )
 
 #Schwert wegstecken
-$AM.getActor(&quot;Held&quot;).getGameObject().detachWeapon();  
+$AM.getActor(&quot;Held&quot;).detachWeapon();  
 
-#Tagebucheintr&#228;ge bei T&#246;tung einstellen
+#Tagebucheintr&#239;&#191;&#189;ge bei T&#239;&#191;&#189;tung einstellen
 entry = $tagebuchtexte['schnetzeln2']
 RulesSubsystem.getSingleton().getQuestBook().addJournalEntry( entry[0], entry[1] );
 

Modified: modules/techdemo2/scripts/forrest.rb
===================================================================
--- modules/techdemo2/scripts/forrest.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/forrest.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -17,5 +17,5 @@
 #agent.addSteeringBehaviour(DefaultWanderBehaviour.new);
 #agent.addSteeringBehaviour(AvoidObstaclesBehaviour.new);
 #agent.addSteeringBehaviour(DialogBehaviour.new($heroVehicle));
-$GOM.createGameObjectProxy(&quot;Forrest&quot;).getGameObject().placeIntoScene();
+$GOM.createGameObject(&quot;Forrest&quot;).placeIntoScene();
 print(&quot;Forrest fertig geladen&quot;);

Modified: modules/techdemo2/scripts/jarn.rb
===================================================================
--- modules/techdemo2/scripts/jarn.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/jarn.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -19,6 +19,6 @@
 ##agent.addSteeringBehaviour(AvoidObstaclesBehaviour.new);
 #agent.addSteeringBehaviour(DialogBehaviour.new($heroVehicle));
 
-$GOM.createGameObjectProxy(&quot;Jarn&quot;).getGameObject().placeIntoScene();
+$GOM.createGameObject(&quot;Jarn&quot;).placeIntoScene();
 
 print(&quot;Jarn Bot fertig geladen&quot;);

Modified: modules/techdemo2/scripts/kampf.rb
===================================================================
--- modules/techdemo2/scripts/kampf.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/kampf.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -1,11 +1,11 @@
-#&lt;!-- Script f&#252;rs Schwert mit Ger&#228;usch und Musikwechsel auf Kampf! kampf.rb--&gt;
+#&lt;!-- Script f&#239;&#191;&#189;rs Schwert mit Ger&#239;&#191;&#189;usch und Musikwechsel auf Kampf! kampf.rb--&gt;
 
 #Musik zum Kampf wechseln
 
 	$AM.getActor(&quot;techdemoDruidenWald&quot;).getControlledObject().stop()
 	$AM.getActor(&quot;kampfMusik&quot;).getControlledObject().play()
 
-#Ger&#228;usch
+#Ger&#239;&#191;&#189;usch
 	@mSchwertziehenSound = $AM.createSoundSampleActor(&quot;Schwertziehen&quot;,&quot;schwert.ogg&quot;);
 	@mSchwertziehenSound.getControlledObject().set3d(false);
 	@mSchwertziehenSound.getControlledObject().load();
@@ -27,6 +27,6 @@
 	 end 
 	end
 
-	held = $AM.getActor(&quot;Held&quot;).getGameObject();
+	held = $AM.getActor(&quot;Held&quot;);
 	schwertH = Kurzschwert.new()
 	held.addWeapon(schwertH)
\ No newline at end of file

Modified: modules/techdemo2/scripts/maps/techdemo2_mapchange.rb
===================================================================
--- modules/techdemo2/scripts/maps/techdemo2_mapchange.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/maps/techdemo2_mapchange.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -15,7 +15,7 @@
 		if (questBook.getQuest(&quot;aufenthaltsort&quot;).getState() == Quest::SUCCEEDED &amp;&amp; 
 			(questBook.getQuest(&quot;hauptquest42&quot;).getState() == Quest::ASSIGNED || 
 			 questBook.getQuest(&quot;hauptquest41&quot;).getState() == Quest::ASSIGNED) )
-			$AM.getActor(&quot;Held&quot;).getGameObject().detachWeapon();  
+			$AM.getActor(&quot;Held&quot;).detachWeapon();  
 			$CORE.loadMap(&quot;Octree&quot;, @targetScene, @resourcegrp, @targetRbFile); 
 		else
 			$WF.showMessageWindow( &quot;Ihr wisst noch nicht wohin ihr wollt - und was ihr an diesem Ort suchen wollt. Findet es erst heraus!&quot; );

Modified: modules/techdemo2/scripts/maps/techdemo2map1.rb
===================================================================
--- modules/techdemo2/scripts/maps/techdemo2map1.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/maps/techdemo2map1.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -10,7 +10,7 @@
 $SCRIPT.log(&quot;init map 'Techdemo2'...&quot;);
 
 $SCRIPT.log(&quot;Held erstellen&quot;);
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1).getGameObject();
+$hero = $GOM.createGameObject(&quot;hero&quot;, 1);
 $hero.placeIntoScene()
 PlayerSettings.preparePlayer($hero)
 $UI.setActiveCharacter($hero)
@@ -34,13 +34,13 @@
 
 
 $SCRIPT.log(&quot;T&#195;&#188;ren einsetzen&quot;);
-door1 = $GOM.createGameObjectProxy(&quot;door&quot;).getGameObject()
+door1 = $GOM.createGameObject(&quot;door&quot;)
 door1.setMeshfile(&quot;arc_door_02.mesh&quot;);
 door1.setPosition([-12.9124, -6.86492, 13.7133]);
 door1.setOrientation([0, -120, 0]);
 door1.setDescription(&quot;Eine Holzt&#195;&#188;r&quot;);
 
-door2 = $GOM.createGameObjectProxy(&quot;door&quot;).getGameObject()
+door2 = $GOM.createGameObject(&quot;door&quot;)
 door2.setMeshfile(&quot;arc_door_02.mesh&quot;);
 door2.setPosition([-34.6458, -6.2058, 14.9355]);
 door2.setOrientation([0, -212.5, 0]);

Modified: modules/techdemo2/scripts/maps/techdemo2map2.rb
===================================================================
--- modules/techdemo2/scripts/maps/techdemo2map2.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/maps/techdemo2map2.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -7,7 +7,7 @@
 $PM.setEnabled(true);
 
 $SCRIPT.log(&quot;Held erstellen&quot;);
-$hero = $GOM.createGameObjectProxy(&quot;hero&quot;, 1).getGameObject();
+$hero = $GOM.createGameObject(&quot;hero&quot;, 1);
 $hero.placeIntoScene()
 PlayerSettings.preparePlayer($hero)
 $UI.setActiveCharacter($hero)

Modified: modules/techdemo2/scripts/retten.rb
===================================================================
--- modules/techdemo2/scripts/retten.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/retten.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -19,7 +19,7 @@
 RulesSubsystem.getSingleton().getQuestBook().getQuest(&quot;hauptquest52&quot;).setState(Quest::ASSIGNED)
 
 $SCRIPT.log(&quot;NetterAlter wird geladen&quot;);
-  $GOM.createGameObjectProxy(&quot;RettungsDruide&quot;).getGameObject().placeIntoScene();
+  $GOM.createGameObject(&quot;RettungsDruide&quot;).placeIntoScene();
 $SCRIPT.log(&quot;NetterAlter geladen&quot;);
 
 

Modified: modules/techdemo2/scripts/schnetzeln.rb
===================================================================
--- modules/techdemo2/scripts/schnetzeln.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/schnetzeln.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -20,7 +20,7 @@
 RulesSubsystem.getSingleton().getQuestBook().getQuest(&quot;hauptquest51&quot;).setState(Quest::ASSIGNED)
 
 $SCRIPT.log(&quot;FieserAlter wird geladen&quot;);
-$GOM.createGameObjectProxy(&quot;SchnetzelDruide&quot;).getGameObject().placeIntoScene();
+$GOM.createGameObject(&quot;SchnetzelDruide&quot;).placeIntoScene();
 $SCRIPT.log(&quot;FieserAlter geladen&quot;);
 
 

Modified: modules/techdemo2/scripts/sonja.rb
===================================================================
--- modules/techdemo2/scripts/sonja.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/sonja.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -3,5 +3,5 @@
 load( &quot;npc.rb&quot; );
 
 print( &quot;Sonja Bot wird geladen&quot; );
-$GOM.createGameObjectProxy(&quot;Sonja&quot;).getGameObject().placeIntoScene();
+$GOM.createGameObject(&quot;Sonja&quot;).placeIntoScene();
 print( &quot;Sonja Bot fertig geladen&quot; );
\ No newline at end of file

Modified: modules/techdemo2/scripts/sonja2.rb
===================================================================
--- modules/techdemo2/scripts/sonja2.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/sonja2.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -8,7 +8,7 @@
 
 print( &quot;Sonjversion Map2 wird geladen&quot; );
 print( &quot;Definiere Listener&quot; );
-$GOM.createGameObjectProxy(&quot;Sonj&quot;).getGameObject().placeIntoScene();
+$GOM.createGameObject(&quot;Sonj&quot;).placeIntoScene();
 print( &quot;Sonja version Map2 fertig geladen&quot; );
 
 #Musik

Modified: modules/techdemo2/scripts/tsafried.rb
===================================================================
--- modules/techdemo2/scripts/tsafried.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/tsafried.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -6,6 +6,6 @@
 
 print( &quot;Definiere Listener&quot; );
 
-$GOM.createGameObjectProxy(&quot;Tsafried&quot;).getGameObject().placeIntoScene();
+$GOM.createGameObject(&quot;Tsafried&quot;).placeIntoScene();
 
 print( &quot;Tsafried Bot fertig geladen&quot; );
\ No newline at end of file

Modified: modules/techdemo2/scripts/waldwoelfe_retten.rb
===================================================================
--- modules/techdemo2/scripts/waldwoelfe_retten.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/waldwoelfe_retten.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -16,7 +16,7 @@
 	
 	if (RulesSubsystem.getSingleton().getQuestBook().getQuest(&quot;hauptquest522&quot;).getState() == Quest::SUCCEEDED)
 		#Schwert wegstecken
-			$AM.getActor(&quot;Held&quot;).getGameObject().detachWeapon();  
+			$AM.getActor(&quot;Held&quot;).detachWeapon();  
 			entry = $tagebuchtexte['retten2']
 			RulesSubsystem.getSingleton().getQuestBook().addJournalEntry( entry[0], entry[1] );
 		load(&quot;sonja2.rb&quot;);

Modified: modules/techdemo2/scripts/waldwoelfe_schnetzeln.rb
===================================================================
--- modules/techdemo2/scripts/waldwoelfe_schnetzeln.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/waldwoelfe_schnetzeln.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -19,7 +19,7 @@
 
 # Die Positionen durchgehen
 positions.each { |pos|
-    se = $GOM.createGameObjectProxy(&quot;Wolf&quot;).getGameObject();
+    se = $GOM.createGameObject(&quot;Wolf&quot;);
     
     se.setPosition(pos);
     se.getActor().placeIntoScene();

Modified: modules/techdemo2/scripts/wirt.rb
===================================================================
--- modules/techdemo2/scripts/wirt.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/wirt.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -6,7 +6,7 @@
 
 print( &quot;Definiere Listener&quot; );
 
-wirt = $GOM.createGameObjectProxy(&quot;Wirt&quot;).getGameObject();
+wirt = $GOM.createGameObject(&quot;Wirt&quot;);
 wirt.placeIntoScene()
  
 wirtAnim = wirt.getActor().getControlledObject().startAnimation(&quot;reden&quot;);

Modified: modules/techdemo2/scripts/wolf.rb
===================================================================
--- modules/techdemo2/scripts/wolf.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/wolf.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -9,7 +9,7 @@
 	&quot;Geschafft! Ein gro&#195;&#159;er Wolf hatte den Vermissten angefallen und ihn im Turm festgesetzt, wo ich ihn verwundet und fiebrig fand. Ich musste den Wolf t&#195;&#182;ten und habe den alten Mann notd&#195;&#188;rftig versorgt. Ich sollte nun ins Dorf zur&#195;&#188;ckkehren und alles berichten, die Dorfbewohner k&#195;&#182;nnen sich dann um alles weitere k&#195;&#188;mmern, nun wo der Weg wieder frei ist.&quot;);
 
 #Waffe wegstecken wenn Wolfi tot ist
-# $AM.getActor(&quot;Held&quot;).getGameObject().detachWeapon();  
+# $AM.getActor(&quot;Held&quot;).detachWeapon();  
 
 #am Ende sonja2.rb laden
 

Modified: modules/techdemo2/scripts/wolframstuer.rb
===================================================================
--- modules/techdemo2/scripts/wolframstuer.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/wolframstuer.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -30,7 +30,7 @@
 
 print( &quot;Definiere Listener&quot; );
 
-wolframstuer = $GOM.createGameObjectProxy(&quot;WolframsTuer&quot;).getGameObject()
+wolframstuer = $GOM.createGameObject(&quot;WolframsTuer&quot;)
 wolframstuer.placeIntoScene();
 wolframstuer.addAction(TurTalkAction.new())
 

Modified: modules/techdemo2/scripts/wolframstuer_oeffnen.rb
===================================================================
--- modules/techdemo2/scripts/wolframstuer_oeffnen.rb	2007-04-26 20:13:36 UTC (rev 3343)
+++ modules/techdemo2/scripts/wolframstuer_oeffnen.rb	2007-04-26 20:32:58 UTC (rev 3344)
@@ -19,7 +19,7 @@
 
 print( &quot;Definiere Listener&quot; );
 
-$GOM.createGameObjectProxy(&quot;Wolfram&quot;).getGameObject().placeIntoScene();
+$GOM.createGameObject(&quot;Wolfram&quot;).placeIntoScene();
 
 tuer = $AM.getActor(&quot;WolframsTuer&quot;)
 tuer.getControlledObject().startAnimation(&quot;auf&quot;,1.0,1)

Modified: rl/trunk/engine/rules/RlRules2005.vcproj
===================================================================
--- rl/trunk/engine/rules/RlRules2005.vcproj	2007-04-26 20:13:36 UTC (rev 3343)
+++ rl/trunk/engine/rules/RlRules2005.vcproj	2007-04-26 20:32:58 UTC (rev 3344)
@@ -333,10 +333,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\src\GameObjectProxy.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\src\Inventory.cpp&quot;
 				&gt;
 			&lt;/File&gt;
@@ -543,10 +539,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\include\GameObjectProxy.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\include\GameObjectStateListener.h&quot;
 				&gt;
 			&lt;/File&gt;

Modified: rl/trunk/engine/rules/include/GameObject.h
===================================================================
--- rl/trunk/engine/rules/include/GameObject.h	2007-04-26 20:13:36 UTC (rev 3343)
+++ rl/trunk/engine/rules/include/GameObject.h	2007-04-26 20:32:58 UTC (rev 3344)
@@ -46,10 +46,14 @@
     {
     public:
     	typedef std::vector&lt;std::pair&lt;Action*, int&gt; &gt; ActionOptionVector;
-
+		static const unsigned int NO_OBJECT_ID = 0;
+        
         static const Ogre::String CLASS_NAME;
 
-        static const Ogre::String PROPERTY_POSITION; 
+        static const Ogre::String PROPERTY_CLASS_ID;
+        static const Ogre::String PROPERTY_OBJECT_ID;
+        static const Ogre::String PROPERTY_BASE_CLASS;
+		static const Ogre::String PROPERTY_POSITION; 
         static const Ogre::String PROPERTY_ORIENTATION; 
         static const Ogre::String PROPERTY_NAME;
         static const Ogre::String PROPERTY_DESCRIPTION; 

Modified: rl/trunk/engine/rules/include/GameObjectManager.h
===================================================================
--- rl/trunk/engine/rules/include/GameObjectManager.h	2007-04-26 20:13:36 UTC (rev 3343)
+++ rl/trunk/engine/rules/include/GameObjectManager.h	2007-04-26 20:32:58 UTC (rev 3344)
@@ -27,7 +27,6 @@
 namespace rl
 {
     class GameObject;
-    class GameObjectProxy;
     class PropertySet;
 
     class _RlRulesExport GameObjectFactory
@@ -48,9 +47,8 @@
         GameObjectManager();
         ~GameObjectManager();
 
-        GameObjectProxy&amp; createGameObjectProxy(const Ogre::String&amp; classId, unsigned int id = 0);
-        GameObjectProxy* getGameObjectProxy(unsigned int id) const;
-        GameObject* createGameObject(const GameObjectProxy* proxy);
+        GameObject* getGameObject(unsigned int id) const;
+        GameObject* createGameObject(const Ogre::String&amp; classId, unsigned int id = 0);
         void setGameObjectFactory(GameObjectFactory* gof);
         void loadProperties(const Ogre::String&amp; module);
 
@@ -72,8 +70,7 @@
 
         Ogre::StringVector mScriptPatterns;
 
-        std::map&lt;unsigned int, GameObjectProxy*&gt; mGameObjectProxys;
-        std::map&lt;const GameObjectProxy*, GameObject*&gt; mGameObjects;
+        std::map&lt;unsigned int, GameObject*&gt; mGameObjects;
         ClassPropertyMap mClassProperties;
         unsigned int mGeneratedId;
         GameObjectFactory* mGameObjectFactory;

Deleted: rl/trunk/engine/rules/include/GameObjectProxy.h
===================================================================
--- rl/trunk/engine/rules/include/GameObjectProxy.h	2007-04-26 20:13:36 UTC (rev 3343)
+++ rl/trunk/engine/rules/include/GameObjectProxy.h	2007-04-26 20:32:58 UTC (rev 3344)
@@ -1,60 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-
-#ifndef __GAMEOBJECTPROXY_H__
-#define __GAMEOBJECTPROXY_H__
-
-#include &quot;RulesPrerequisites.h&quot;
-#include &quot;GameObjectConstants.h&quot;
-#include &quot;Properties.h&quot;
-
-namespace rl
-{
-    class GameObject;
-
-    class _RlRulesExport GameObjectProxy
-    {
-    public:
-        static const unsigned int NO_OBJECT_ID = 0;
-        static const Ogre::String PROPERTY_CLASS_ID;
-        static const Ogre::String PROPERTY_OBJECT_ID;
-        static const Ogre::String PROPERTY_BASE_CLASS;
-
-
-        GameObjectProxy(const Ogre::String&amp; classid, unsigned int id);
-
-        GameObject* getGameObject();
-
-        unsigned int getId() const;
-        const Ogre::String&amp; getClassId() const;
-
-        void unload();
-        void load();
-
-        GameObjectState getState() const;
-
-    private:
-        unsigned int mId;
-        Ogre::String mClassId;
-        GameObject* mGameObject;
-        const PropertySet* mProperties;
-
-        void createGameObject();
-        void deleteGameObject();
-    };
-}
-
-#endif //__GAMEOBJECTPROXY_H__

Modified: rl/trunk/engine/rules/src/GameObject.cpp
===================================================================
--- rl/trunk/engine/rules/src/GameObject.cpp	2007-04-26 20:13:36 UTC (rev 3343)
+++ rl/trunk/engine/rules/src/GameObject.cpp	2007-04-26 20:32:58 UTC (rev 3344)
@@ -36,6 +36,8 @@
 
     const Ogre::String GameObject::CLASS_NAME = &quot;GameObject&quot;;
 
+    const Ogre::String GameObject::PROPERTY_CLASS_ID = &quot;classid&quot;; 
+    const Ogre::String GameObject::PROPERTY_BASE_CLASS = &quot;baseclass&quot;; 
     const Ogre::String GameObject::PROPERTY_POSITION = &quot;position&quot;; 
     const Ogre::String GameObject::PROPERTY_ORIENTATION = &quot;orientation&quot;; 
     const Ogre::String GameObject::PROPERTY_NAME = &quot;name&quot;; 

Modified: rl/trunk/engine/rules/src/GameObjectManager.cpp
===================================================================
--- rl/trunk/engine/rules/src/GameObjectManager.cpp	2007-04-26 20:13:36 UTC (rev 3343)
+++ rl/trunk/engine/rules/src/GameObjectManager.cpp	2007-04-26 20:32:58 UTC (rev 3344)
@@ -21,7 +21,6 @@
 #include &quot;Creature.h&quot;
 #include &quot;Exception.h&quot;
 #include &quot;GameObject.h&quot;
-#include &quot;GameObjectProxy.h&quot;
 #include &quot;Item.h&quot;
 #include &quot;Person.h&quot;
 #include &quot;Properties.h&quot;
@@ -40,7 +39,6 @@
     {
         mGeneratedId = 1&lt;&lt;16;
         mGameObjects.clear();
-        mGameObjectProxys.clear();
 
         mScriptPatterns.push_back(&quot;*.gof&quot;);
         Ogre::ResourceGroupManager::getSingleton()._registerScriptLoader(this);
@@ -69,27 +67,43 @@
         for(std::vector&lt;PropertySet*&gt;::iterator it = psset.begin(); it != psset.end(); it++)
         {
             PropertySet* curPs = *it;
-            Ogre::String classId = curPs-&gt;getProperty(GameObjectProxy::PROPERTY_CLASS_ID).toString().c_str();
+            Ogre::String classId = curPs-&gt;getProperty(GameObject::PROPERTY_CLASS_ID).toString().c_str();
             mClassProperties[classId] = curPs;
         }
         delete propReader;
 
     }
 
-    GameObjectProxy&amp; GameObjectManager::createGameObjectProxy(
-        const Ogre::String&amp; classId, 
-        unsigned int id)
+    GameObject* GameObjectManager::getGameObject(unsigned int id) const
     {
+        std::map&lt;unsigned int, GameObject*&gt;::const_iterator it 
+                = mGameObjects.find(id);
 
-		unsigned int goId = GameObjectProxy::NO_OBJECT_ID;
+        if (it != mGameObjects.end())
+        {
+            return (*it).second;
+        }
 
-        if (id != GameObjectProxy::NO_OBJECT_ID)
+        return NULL;
+    }
+
+    unsigned int GameObjectManager::generateId()
+    {
+        return mGeneratedId++;
+    }
+
+    GameObject* GameObjectManager::createGameObject(
+		const Ogre::String&amp; classId, unsigned int id)
+    {
+		unsigned int goId;
+
+		if (id != GameObject::NO_OBJECT_ID)
         {
-            GameObjectProxy* gopInMap = getGameObjectProxy(id);
+            GameObject* goInMap = getGameObject(id);
 
-            if (gopInMap != NULL)
+            if (goInMap != NULL)
             {
-                return *gopInMap;
+                return goInMap;
             }
             else
             {
@@ -101,42 +115,16 @@
             goId = generateId();
         }
 
-        GameObjectProxy* gop = new GameObjectProxy(classId, goId);
+        PropertySet* ps = getClassProperties(classId);
+        Ogre::String classname =  ps-&gt;getProperty(GameObject::PROPERTY_BASE_CLASS).toString().c_str();
 
-        mGameObjectProxys[goId] = gop;
-        return *gop;
-    }
-
-    GameObjectProxy* GameObjectManager::getGameObjectProxy(unsigned int id) const
-    {
-        std::map&lt;unsigned int, GameObjectProxy*&gt;::const_iterator it 
-                = mGameObjectProxys.find(id);
-
-        if (it != mGameObjectProxys.end())
-        {
-            return (*it).second;
-        }
-
-        return NULL;
-    }
-
-    unsigned int GameObjectManager::generateId()
-    {
-        return mGeneratedId++;
-    }
-
-    GameObject* GameObjectManager::createGameObject(const rl::GameObjectProxy *proxy)
-    {
-        PropertySet* ps = getClassProperties(proxy-&gt;getClassId());
-        Ogre::String classname =  ps-&gt;getProperty(GameObjectProxy::PROPERTY_BASE_CLASS).toString().c_str();
-
         GameObject* go = mGameObjectFactory
             -&gt;createGameObject(
                 classname, 
-                proxy-&gt;getId());
+                goId);
         
         go-&gt;setProperties(ps);
-        mGameObjects[proxy] = go;
+        mGameObjects[goId] = go;
         return go;
     }
 

Modified: rl/trunk/engine/rules/src/GameObjectNodeProcessor.cpp
===================================================================
--- rl/trunk/engine/rules/src/GameObjectNodeProcessor.cpp	2007-04-26 20:13:36 UTC (rev 3343)
+++ rl/trunk/engine/rules/src/GameObjectNodeProcessor.cpp	2007-04-26 20:32:58 UTC (rev 3344)
@@ -19,7 +19,6 @@
 
 #include &quot;GameObject.h&quot;
 #include &quot;GameObjectManager.h&quot;
-#include &quot;GameObjectProxy.h&quot;
 #include &quot;PropertyReader.h&quot;
 #include &quot;XmlHelper.h&quot;
 
@@ -41,27 +40,27 @@
         
         Ogre::String classname = XmlHelper::getAttributeValueAsStdString(nodeElem, &quot;class&quot;);
         
-        unsigned int goid = GameObjectProxy::NO_OBJECT_ID;
+        unsigned int goid = GameObject::NO_OBJECT_ID;
 
         if (XmlHelper::hasAttribute(nodeElem, &quot;id&quot;))
         {
             goid = XmlHelper::getAttributeValueAsInteger(nodeElem, &quot;id&quot;);
         }
 
-        GameObjectProxy gop = GameObjectManager::getSingleton().createGameObjectProxy(classname, goid);
+        GameObject* go = GameObjectManager::getSingleton().createGameObject(classname, goid);
 
         DOMElement* posElem = XmlHelper::getChildNamed(nodeElem, &quot;position&quot;);
         if (posElem != NULL)
         {
             Vector3 pos = processVector3(posElem);
-            gop.getGameObject()-&gt;setPosition(pos);
+            go-&gt;setPosition(pos);
         }
 
         DOMElement* oriElem = XmlHelper::getChildNamed(nodeElem, &quot;rotation&quot;);
         if (oriElem != NULL)
         {
             Quaternion ori = processQuaternion(oriElem);
-            gop.getGameObject()-&gt;setOrientation(ori);
+            go-&gt;setOrientation(ori);
         }
 
         DOMNodeList* goElChildNodes = nodeElem-&gt;getChildNodes();
@@ -74,7 +73,7 @@
                 PropertyEntry propEntry = getXmlPropertyReader()-&gt;processProperty(static_cast&lt;DOMElement*&gt;(cur));
                 if (propEntry.first != &quot;&quot;)
                 {
-                    gop.getGameObject()-&gt;setProperty(propEntry.first, propEntry.second);
+                    go-&gt;setProperty(propEntry.first, propEntry.second);
                 }
             }
         }
@@ -104,7 +103,7 @@
 				state = GOS_READY;
 			}
 		}
-		gop.getGameObject()-&gt;setState(state);
+		go-&gt;setState(state);
 
         return true;
     }

Deleted: rl/trunk/engine/rules/src/GameObjectProxy.cpp
===================================================================
--- rl/trunk/engine/rules/src/GameObjectProxy.cpp	2007-04-26 20:13:36 UTC (rev 3343)
+++ rl/trunk/engine/rules/src/GameObjectProxy.cpp	2007-04-26 20:32:58 UTC (rev 3344)
@@ -1,85 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-#include &quot;GameObjectProxy.h&quot;
-
-#include &quot;Actor.h&quot;
-#include &quot;ActorManager.h&quot;
-#include &quot;GameObject.h&quot;
-#include &quot;GameObjectManager.h&quot;
-
-namespace rl
-{
-    const Ogre::String GameObjectProxy::PROPERTY_CLASS_ID = &quot;classid&quot;;
-    const Ogre::String GameObjectProxy::PROPERTY_OBJECT_ID = &quot;objectid&quot;;
-    const Ogre::String GameObjectProxy::PROPERTY_BASE_CLASS = &quot;baseclass&quot;;
-
-    GameObjectProxy::GameObjectProxy(const Ogre::String&amp; classId, unsigned int goId)
-        : mId(goId),
-          mClassId(classId),
-          mGameObject(NULL),
-          mProperties(NULL)
-    {
-    }
-
-    GameObject* GameObjectProxy::getGameObject()
-    {
-        if (mGameObject == NULL)
-        {
-            load();
-        }
-        return mGameObject;
-    }
-
-    const Ogre::String&amp; GameObjectProxy::getClassId() const
-    {
-        return mClassId;
-    }
-
-    unsigned int GameObjectProxy::getId() const
-    {
-        return mId;
-    }
-
-    GameObjectState GameObjectProxy::getState() const
-    {
-        if (mGameObject != NULL)
-        {
-            return mGameObject-&gt;getState();
-        }
-
-        return GOS_UNLOADED;
-    }
-
-    void GameObjectProxy::load()
-    {
-        if (mGameObject == NULL)
-        {
-            mGameObject = GameObjectManager::getSingleton().createGameObject(this);
-            if (mProperties != NULL)
-            {
-                mGameObject-&gt;setProperties(mProperties);
-            }
-        }
-    }
-
-    void GameObjectProxy::unload()
-    {
-        mProperties = mGameObject-&gt;getAllProperties();
-        delete mGameObject;
-        mGameObject = NULL;
-    }
-}
-

Modified: rl/trunk/engine/script/swig/RlRules.head.swig
===================================================================
--- rl/trunk/engine/script/swig/RlRules.head.swig	2007-04-26 20:13:36 UTC (rev 3343)
+++ rl/trunk/engine/script/swig/RlRules.head.swig	2007-04-26 20:32:58 UTC (rev 3344)
@@ -30,7 +30,6 @@
 #include &quot;EigenschaftenStateSet.h&quot;
 #include &quot;GameObject.h&quot;
 #include &quot;GameObjectManager.h&quot;
-#include &quot;GameObjectProxy.h&quot;
 #include &quot;Inventory.h&quot;
 #include &quot;Item.h&quot;
 #include &quot;MapLoader.h&quot;

Modified: rl/trunk/engine/script/swig/RlRules.swig
===================================================================
--- rl/trunk/engine/script/swig/RlRules.swig	2007-04-26 20:13:36 UTC (rev 3343)
+++ rl/trunk/engine/script/swig/RlRules.swig	2007-04-26 20:32:58 UTC (rev 3344)
@@ -108,21 +108,6 @@
         rl::Person* getPerson(const int id) const;
     };
     
-    class GameObjectProxy
-    {
-    private:
-        GameObjectProxy(const Ogre::String&amp; classid, unsigned int id);
-        
-    public:       
-        rl::GameObject* getGameObject();
-
-        unsigned int getId() const;
-        const Ogre::String&amp; getClassId() const;
-        
-        void load();
-        void unload();
-    };
-    
     %feature(&quot;director&quot;) GameObjectFactory; 
     class GameObjectFactory
     {
@@ -136,8 +121,8 @@
     {
     public:
         static rl::GameObjectManager&amp; getSingleton();
-        rl::GameObjectProxy&amp; createGameObjectProxy(const Ogre::String&amp; classId, unsigned int id = 0);
-        rl::GameObjectProxy* getGameObjectProxy(unsigned int id) const;
+        rl::GameObject* createGameObject(const Ogre::String&amp; classId, unsigned int id = 0);
+        rl::GameObject* getGameObject(unsigned int id) const;
         void setGameObjectFactory(rl::GameObjectFactory* gof);
 
     private:


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000414.html">[Dsa-hl-svn] r3343 - in rl/trunk/engine/ui: include src
</A></li>
	<LI>Next message: <A HREF="000416.html">[Dsa-hl-svn] r3345 - rl/trunk/engine/ui/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#415">[ date ]</a>
              <a href="thread.html#415">[ thread ]</a>
              <a href="subject.html#415">[ subject ]</a>
              <a href="author.html#415">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
