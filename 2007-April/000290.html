<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r3219 - in rl/trunk: . engine engine/startup/src	engine/ui engine/ui/include engine/ui/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r3219%20-%20in%20rl/trunk%3A%20.%20engine%20engine/startup/src%0A%09engine/ui%20engine/ui/include%20engine/ui/src&In-Reply-To=%3C200704021452.l32EqZwZ020749%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000289.html">
   <LINK REL="Next"  HREF="000291.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r3219 - in rl/trunk: . engine engine/startup/src	engine/ui engine/ui/include engine/ui/src</H1>
    <B>blakharaz at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r3219%20-%20in%20rl/trunk%3A%20.%20engine%20engine/startup/src%0A%09engine/ui%20engine/ui/include%20engine/ui/src&In-Reply-To=%3C200704021452.l32EqZwZ020749%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r3219 - in rl/trunk: . engine engine/startup/src	engine/ui engine/ui/include engine/ui/src">blakharaz at mail.berlios.de
       </A><BR>
    <I>Mon Apr  2 16:52:35 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000289.html">[Dsa-hl-svn] r3218 - modules/common/gui/windows	modules/common/scripts rl/trunk/engine/ui	rl/trunk/engine/ui/include rl/trunk/engine/ui/src
</A></li>
        <LI>Next message: <A HREF="000291.html">[Dsa-hl-svn] r3220 - rl/trunk/engine/rules/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#290">[ date ]</a>
              <a href="thread.html#290">[ thread ]</a>
              <a href="subject.html#290">[ subject ]</a>
              <a href="author.html#290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: blakharaz
Date: 2007-04-02 16:52:27 +0200 (Mon, 02 Apr 2007)
New Revision: 3219

Added:
   rl/trunk/engine/ui/include/ListboxWrappedTextItem.h
   rl/trunk/engine/ui/src/ListboxWrappedTextItem.cpp
Removed:
   rl/trunk/engine/uicomponents/
Modified:
   rl/trunk/Rastullah2005.sln
   rl/trunk/engine/Makefile.am
   rl/trunk/engine/startup/src/Makefile.am
   rl/trunk/engine/ui/RlUI2005.vcproj
   rl/trunk/engine/ui/include/Makefile.am
   rl/trunk/engine/ui/src/Makefile.am
Log:
Removed UiComponents DLL (not needed anymore because CEGUI 0.5 is not under LGPL anymore)

Modified: rl/trunk/Rastullah2005.sln
===================================================================
--- rl/trunk/Rastullah2005.sln	2007-04-02 10:17:07 UTC (rev 3218)
+++ rl/trunk/Rastullah2005.sln	2007-04-02 14:52:27 UTC (rev 3219)
@@ -24,7 +24,6 @@
 	ProjectSection(ProjectDependencies) = postProject
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25} = {53FE20F3-E726-44FE-BBEC-D29CAE210D25}
 		{D3185FC6-9384-431A-A237-80284F859B21} = {D3185FC6-9384-431A-A237-80284F859B21}
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851} = {ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}
 		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070} = {1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}
 		{0935F495-4540-40E3-AC8F-AA54C85DC5B2} = {0935F495-4540-40E3-AC8F-AA54C85DC5B2}
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7} = {C3E78B89-587B-499A-BE7D-4FE8564F0CD7}
@@ -36,7 +35,6 @@
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25} = {53FE20F3-E726-44FE-BBEC-D29CAE210D25}
 		{9A41EAE4-302A-4823-8F20-FA1AD58189A1} = {9A41EAE4-302A-4823-8F20-FA1AD58189A1}
 		{D3185FC6-9384-431A-A237-80284F859B21} = {D3185FC6-9384-431A-A237-80284F859B21}
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851} = {ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}
 		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070} = {1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}
 		{0935F495-4540-40E3-AC8F-AA54C85DC5B2} = {0935F495-4540-40E3-AC8F-AA54C85DC5B2}
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7} = {C3E78B89-587B-499A-BE7D-4FE8564F0CD7}
@@ -46,14 +44,11 @@
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlUI&quot;, &quot;engine\ui\RlUI2005.vcproj&quot;, &quot;{53FE20F3-E726-44FE-BBEC-D29CAE210D25}&quot;
 	ProjectSection(ProjectDependencies) = postProject
 		{D3185FC6-9384-431A-A237-80284F859B21} = {D3185FC6-9384-431A-A237-80284F859B21}
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851} = {ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}
 		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070} = {1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}
 		{0935F495-4540-40E3-AC8F-AA54C85DC5B2} = {0935F495-4540-40E3-AC8F-AA54C85DC5B2}
 		{6361481B-A6D5-4BC2-826C-C26A49C631A8} = {6361481B-A6D5-4BC2-826C-C26A49C631A8}
 	EndProjectSection
 EndProject
-Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlUIComponents&quot;, &quot;engine\uicomponents\RlUIComponents2005.vcproj&quot;, &quot;{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}&quot;
-EndProject
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlAI&quot;, &quot;engine\ai\RlAI2005.vcproj&quot;, &quot;{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}&quot;
 	ProjectSection(ProjectDependencies) = postProject
 		{6361481B-A6D5-4BC2-826C-C26A49C631A8} = {6361481B-A6D5-4BC2-826C-C26A49C631A8}
@@ -125,12 +120,6 @@
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.Release|Win32.Build.0 = Release|Win32
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.Debug|Win32.ActiveCfg = Debug|Win32
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.Debug|Win32.Build.0 = Debug|Win32
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.Release|Win32.ActiveCfg = Release|Win32
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.Release|Win32.Build.0 = Release|Win32
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.Debug|Win32.ActiveCfg = Debug|Win32
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.Debug|Win32.Build.0 = Debug|Win32
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.Release|Win32.ActiveCfg = Release|Win32

Modified: rl/trunk/engine/Makefile.am
===================================================================
--- rl/trunk/engine/Makefile.am	2007-04-02 10:17:07 UTC (rev 3218)
+++ rl/trunk/engine/Makefile.am	2007-04-02 14:52:27 UTC (rev 3219)
@@ -1,2 +1,2 @@
-SUBDIRS = common dialog ai uicomponents ui core rules script startup
+SUBDIRS = common dialog ai ui core rules script startup
 

Modified: rl/trunk/engine/startup/src/Makefile.am
===================================================================
--- rl/trunk/engine/startup/src/Makefile.am	2007-04-02 10:17:07 UTC (rev 3218)
+++ rl/trunk/engine/startup/src/Makefile.am	2007-04-02 14:52:27 UTC (rev 3219)
@@ -8,7 +8,6 @@
     $(top_builddir)/engine/common/src/libRlCommon.la \
     $(top_builddir)/engine/core/src/libRlCore.la \
     $(top_builddir)/engine/ui/src/libRlUi.la \
-    $(top_builddir)/engine/uicomponents/src/libRlUiComponents.la \
     $(top_builddir)/engine/dialog/src/libRlDialog.la \
     $(top_builddir)/engine/rules/src/libRlRules.la \
     $(top_builddir)/engine/script/src/libRlScript.la \

Modified: rl/trunk/engine/ui/RlUI2005.vcproj
===================================================================
--- rl/trunk/engine/ui/RlUI2005.vcproj	2007-04-02 10:17:07 UTC (rev 3218)
+++ rl/trunk/engine/ui/RlUI2005.vcproj	2007-04-02 14:52:27 UTC (rev 3219)
@@ -47,7 +47,7 @@
 			&lt;Tool
 				Name=&quot;VCCLCompilerTool&quot;
 				Optimization=&quot;0&quot;
-				AdditionalIncludeDirectories=&quot;.\include;..\uicomponents\include;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\include\OgreNewt;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\ois\includes&quot;
+				AdditionalIncludeDirectories=&quot;.\include;;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\include\OgreNewt;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\ois\includes&quot;
 				PreprocessorDefinitions=&quot;WITH_FMOD3;_WINDOWS,_DEBUG,WIN32,RLUI_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
 				MinimalRebuild=&quot;true&quot;
 				BasicRuntimeChecks=&quot;3&quot;
@@ -82,7 +82,7 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCore.lib RlRules.lib RlUiComponents.lib msvcrt-ruby18.lib OgreMain_d.lib OgreGuiRenderer_d.lib CEGUIBase_d.lib xerces-c_2D.lib OgreNewt_d.lib Newton.lib OIS_d.lib&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlRules.lib msvcrt-ruby18.lib OgreMain_d.lib OgreGuiRenderer_d.lib CEGUIBase_d.lib xerces-c_2D.lib OgreNewt_d.lib Newton.lib OIS_d.lib&quot;
 				ShowProgress=&quot;0&quot;
 				OutputFile=&quot;$(OutDir)/RlUI.dll&quot;
 				LinkIncremental=&quot;2&quot;
@@ -158,7 +158,7 @@
 				Optimization=&quot;3&quot;
 				EnableIntrinsicFunctions=&quot;true&quot;
 				FavorSizeOrSpeed=&quot;1&quot;
-				AdditionalIncludeDirectories=&quot;.\include;..\uicomponents\include;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\include\OgreNewt;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\ois\includes&quot;
+				AdditionalIncludeDirectories=&quot;.\include;;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\include\OgreNewt;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\ois\includes&quot;
 				PreprocessorDefinitions=&quot;WITH_FMOD3;NDEBUG,_WINDOWS,WIN32,RLUI_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
 				StringPooling=&quot;false&quot;
 				ExceptionHandling=&quot;1&quot;
@@ -190,7 +190,7 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCore.lib RlRules.lib RlUiComponents.lib msvcrt-ruby18.lib OgreMain.lib OgreGuiRenderer.lib CEGUIBase.lib xerces-c_2.lib OgreNewt.lib Newton.lib OIS.lib&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlRules.lib msvcrt-ruby18.lib OgreMain.lib OgreGuiRenderer.lib CEGUIBase.lib xerces-c_2.lib OgreNewt.lib Newton.lib OIS.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlUI.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				SuppressStartupBanner=&quot;true&quot;
@@ -260,7 +260,7 @@
 				Optimization=&quot;3&quot;
 				EnableIntrinsicFunctions=&quot;true&quot;
 				FavorSizeOrSpeed=&quot;1&quot;
-				AdditionalIncludeDirectories=&quot;.\include;..\uicomponents\include;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\include\OgreNewt;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include\;..\..\dependencies\ois\includes&quot;
+				AdditionalIncludeDirectories=&quot;.\include;;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\include\OgreNewt;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\ois\includes&quot;
 				PreprocessorDefinitions=&quot;WITH_FMOD3;NDEBUG,_WINDOWS,WIN32,RLUI_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
 				StringPooling=&quot;false&quot;
 				ExceptionHandling=&quot;1&quot;
@@ -292,7 +292,7 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCore.lib RlRules.lib RlUiComponents.lib msvcrt-ruby18.lib OgreMain.lib OgreGuiRenderer.lib CEGUIBase.lib xerces-c_2.lib OgreNewt.lib Newton.lib OIS.lib&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlRules.lib msvcrt-ruby18.lib OgreMain.lib OgreGuiRenderer.lib CEGUIBase.lib xerces-c_2.lib OgreNewt.lib Newton.lib OIS.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlUI.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				SuppressStartupBanner=&quot;true&quot;
@@ -481,6 +481,10 @@
 					&gt;
 				&lt;/File&gt;
 				&lt;File
+					RelativePath=&quot;.\include\ListboxWrappedTextItem.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
 					RelativePath=&quot;.\include\LogWindow.h&quot;
 					&gt;
 				&lt;/File&gt;
@@ -662,6 +666,10 @@
 					&gt;
 				&lt;/File&gt;
 				&lt;File
+					RelativePath=&quot;.\src\ListboxWrappedTextItem.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
 					RelativePath=&quot;.\src\LogWindow.cpp&quot;
 					&gt;
 				&lt;/File&gt;

Added: rl/trunk/engine/ui/include/ListboxWrappedTextItem.h
===================================================================
--- rl/trunk/engine/ui/include/ListboxWrappedTextItem.h	2007-04-02 10:17:07 UTC (rev 3218)
+++ rl/trunk/engine/ui/include/ListboxWrappedTextItem.h	2007-04-02 14:52:27 UTC (rev 3219)
@@ -0,0 +1,214 @@
+/************************************************************************
+         filename:       ListboxWrappedTextItem.h
+         created:        2/6/2004
+         author:         Paul D Turner &amp; The CEGUI Development Team, Philipp Walser
+         
+         purpose:        Interface for list box text items with line wrapping
+*************************************************************************/
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Perl Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Perl Artistic License for more details.
+*
+*  You should have received a copy of the Perl Artistic License
+*  along with this program; if not you can get it here
+*  <A HREF="http://www.perldoc.com/perl5.6/Artistic.html.">http://www.perldoc.com/perl5.6/Artistic.html.</A>
+*/
+#ifndef _ListboxWrappedTextItem_h_
+#define _ListboxWrappedTextItem_h_
+
+#include &quot;elements/CEGUIListboxTextItem.h&quot;
+#include &quot;CEGUIFont.h&quot;
+
+namespace CEGUI {
+
+class ListboxWrappedTextItem : public ListboxItem
+{
+public:
+	/*************************************************************************
+		Constants
+	*************************************************************************/
+	static const colour	DefaultTextColour;			//!&lt; Default text colour.
+
+
+	/*************************************************************************
+		Construction and Destruction
+	*************************************************************************/
+	/*!
+	\brief
+		base class constructor
+	*/
+	ListboxWrappedTextItem(
+		const String&amp; text, 
+        int padding = 0,
+        bool draw_bullet = false,
+		uint item_id = 0, 
+		void* item_data = NULL,
+		bool disabled = false, 
+		bool auto_delete = true);
+
+	/*!
+	\brief
+		base class destructor
+	*/
+	virtual ~ListboxWrappedTextItem();
+
+
+	/*************************************************************************
+		Accessor methods
+	*************************************************************************/
+	/*!
+	\brief
+		Return a pointer to the font being used by this ListboxTextItem
+
+		This method will try a number of places to find a font to be used.  If no font can be
+		found, NULL is returned.
+
+	\return
+		Font to be used for rendering this item
+	*/
+	const Font*	getFont(void) const;
+
+
+	/*!
+	\brief
+		Return the current colours used for text rendering.
+
+	\return
+		ColourRect object describing the currently set colours
+	*/
+	ColourRect	getTextColours(void) const		{return d_textCols;}
+	
+	
+	/*!
+	\brief
+		Return the text format used for text rendering.
+
+	\return
+		TextFormatting value describing the currently set text format
+	*/
+	const TextFormatting&amp; getTextFormatting() const;
+
+
+	/*************************************************************************
+		Manipulator methods
+	*************************************************************************/
+	/*!
+	\brief
+		Set the font to be used by this ListboxTextItem
+
+	\param font
+		Font to be used for rendering this item
+
+	\return
+		Nothing
+	*/
+	void	setFont(const Font* font)		{d_font = font;}
+
+
+	/*!
+	\brief
+		Set the font to be used by this ListboxTextItem
+
+	\param font_name
+		String object containing the name of the Font to be used for rendering this item
+
+	\return
+		Nothing
+	*/
+	void	setFont(const String&amp; font_name);
+
+
+	/*!
+	\brief
+		Set the colours used for text rendering.
+
+	\param cols
+		ColourRect object describing the colours to be used.
+
+	\return
+		Nothing.
+	*/
+	void	setTextColours(const ColourRect&amp; cols)			{d_textCols = cols;}
+
+
+	/*!
+	\brief
+		Set the colours used for text rendering.
+
+	\param top_left_colour
+		Colour (as ARGB value) to be applied to the top-left corner of each text glyph rendered.
+
+	\param top_right_colour
+		Colour (as ARGB value) to be applied to the top-right corner of each text glyph rendered.
+
+	\param bottom_left_colour
+		Colour (as ARGB value) to be applied to the bottom-left corner of each text glyph rendered.
+
+	\param bottom_right_colour
+		Colour (as ARGB value) to be applied to the bottom-right corner of each text glyph rendered.
+
+	\return 
+		Nothing.
+	*/
+	void	setTextColours(colour top_left_colour, colour top_right_colour, colour bottom_left_colour, colour bottom_right_colour);
+
+
+	/*!
+	\brief
+		Set the colours used for text rendering.
+
+	\param col
+		colour value to be used when rendering.
+
+	\return
+		Nothing.
+	*/
+	void	setTextColours(colour col)		{setTextColours(col, col, col, col);}
+
+
+	/*!
+	\brief
+		Set the text format used for text rendering.
+
+	\param fmt
+		TextFormat to be used when rendering.
+
+	\return
+		Nothing.
+	*/
+	void setTextFormatting(TextFormatting fmt);
+
+
+	/*************************************************************************
+		Required implementations of pure virtuals from the base class.
+	*************************************************************************/
+    Size getPixelSize(void) const;
+    void draw(const Vector3&amp; position, float alpha, const Rect&amp; clipper) const;
+    void draw(RenderCache&amp; cache,const Rect&amp; targetRect, float zBase,  float alpha, const Rect* clipper) const;
+
+protected:
+	/*************************************************************************
+		Implementation Data
+	*************************************************************************/
+    static const String ds_bullet;
+	ColourRect       d_textCols;        //!&lt; Colours used for rendering the text.
+	const Font*		 d_font;            //!&lt; Font used for rendering text.
+    const int        d_padding;         //!&lt; Padding in pixels to the bottom side of cliprect
+    const bool       d_draw_bullet;     //!&lt; Start an item with a bullet sign.
+
+
+
+private:
+	TextFormatting d_textFormatting;
+};
+
+}
+
+#endif

Modified: rl/trunk/engine/ui/include/Makefile.am
===================================================================
--- rl/trunk/engine/ui/include/Makefile.am	2007-04-02 10:17:07 UTC (rev 3218)
+++ rl/trunk/engine/ui/include/Makefile.am	2007-04-02 14:52:27 UTC (rev 3219)
@@ -25,12 +25,12 @@
 	InputManager.h \
 	InventoryWindow.h \
 	JournalWindow.h \
+	ListboxWrappedTextItem.h \
 	LogWindow.h \
 	MainMenuWindow.h \
 	MainMenuEngineWindow.h \
 	MessageWindow.h \
 	MovementCharacterController.h \
-	LogWindow.h \
 	ObjectDescriptionWindow.h \
 	PlaylistWindow.h \
 	RenderSystemConfigComponent.h \

Added: rl/trunk/engine/ui/src/ListboxWrappedTextItem.cpp
===================================================================
--- rl/trunk/engine/ui/src/ListboxWrappedTextItem.cpp	2007-04-02 10:17:07 UTC (rev 3218)
+++ rl/trunk/engine/ui/src/ListboxWrappedTextItem.cpp	2007-04-02 14:52:27 UTC (rev 3219)
@@ -0,0 +1,220 @@
+/************************************************************************
+	filename: 	ListboxWrappedTextItem.cpp
+	created:	01/8/2006
+	author:		Paul D Turner &amp; The CEGUI Development Team, Philipp Walser
+	
+	purpose:	Implementation of List box text items with WordWrapping
+*************************************************************************/
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Perl Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Perl Artistic License for more details.
+*
+*  You should have received a copy of the Perl Artistic License
+*  along with this program; if not you can get it here
+*  <A HREF="http://www.perldoc.com/perl5.6/Artistic.html.">http://www.perldoc.com/perl5.6/Artistic.html.</A>
+*/
+#include &quot;ListboxWrappedTextItem.h&quot;
+#include &quot;CEGUIFontManager.h&quot;
+#include &quot;CEGUIFont.h&quot;
+#include &quot;CEGUIWindow.h&quot;
+#include &quot;CEGUIImage.h&quot;
+
+// Start of CEGUI namespace section
+namespace CEGUI
+{
+    /*************************************************************************
+    Constants
+    *************************************************************************/
+    const colour    ListboxWrappedTextItem::DefaultTextColour   = 0xFFFFFFFF;
+    const String    ListboxWrappedTextItem::ds_bullet           = &quot; - &quot;;
+
+
+    /*************************************************************************
+    Constructor
+    *************************************************************************/
+    ListboxWrappedTextItem::ListboxWrappedTextItem(const String&amp; text, int padding,
+        bool draw_bullet, uint item_id,
+        void* item_data, bool disabled, bool auto_delete) :
+    ListboxItem(text, item_id, item_data, disabled, auto_delete),
+        d_textCols(DefaultTextColour, DefaultTextColour, DefaultTextColour, DefaultTextColour),
+        d_padding(padding), d_draw_bullet(draw_bullet),
+        d_font(0), d_textFormatting(WordWrapLeftAligned)
+    {
+    }
+
+    /*************************************************************************
+    Destructor
+    *************************************************************************/
+    ListboxWrappedTextItem::~ListboxWrappedTextItem()
+    {
+    }
+
+
+    /*************************************************************************
+    Return a pointer to the font being used by this ListboxWrappedTextItem
+    *************************************************************************/
+    const Font* ListboxWrappedTextItem::getFont(void) const
+    {
+        // prefer out own font
+        if (d_font)
+        {
+            return d_font;
+        }
+        // try our owner window's font setting (may be null if owner uses no existant default font)
+        else if (d_owner)
+        {
+            return d_owner-&gt;getFont();
+        }
+        // no owner, just use the default (which may be NULL anyway)
+        else
+        {
+            return System::getSingleton().getDefaultFont();
+        }
+
+    }
+
+
+    /*************************************************************************
+    Set the font to be used by this ListboxWrappedTextItem
+    *************************************************************************/
+    void ListboxWrappedTextItem::setFont(const String&amp; font_name)
+    {
+        setFont(FontManager::getSingleton().getFont(font_name));
+    }
+
+    /*************************************************************************
+    Return the rendered pixel size of this list box item.
+    *************************************************************************/
+    Size ListboxWrappedTextItem::getPixelSize(void) const
+    {
+        Size size(0,0);
+
+        if (d_owner != NULL)
+        {
+            size.d_width = d_owner-&gt;getWidth().asAbsolute(0.0f) - 25.0f;
+        }
+
+        Font* font = const_cast&lt;Font*&gt;(getFont());
+
+        if (font != NULL)
+        {
+            size.d_height = PixelAligned(font-&gt;getLineSpacing());
+            if(size.d_width == 0)
+            {
+                size.d_width = PixelAligned(font-&gt;getTextExtent(d_itemText));
+            }
+
+            Rect formatRect;
+
+            formatRect.setPosition(CEGUI::Point(0,0));
+            if (d_draw_bullet)
+            {
+                formatRect.d_left = font-&gt;getTextExtent(ds_bullet);
+            }
+            formatRect.setSize(size);
+            uint lines = font-&gt;getFormattedLineCount(d_itemText, formatRect, d_textFormatting);
+            size.d_height *= lines;
+            size.d_height += d_padding;		
+        }
+
+        return size;
+    }
+
+
+    /*************************************************************************
+    Draw the list box item in its current state.
+    *************************************************************************/
+    void ListboxWrappedTextItem::draw(const Vector3&amp; position, float alpha, const Rect&amp; clipper) const
+    {
+        if (d_selected &amp;&amp; (d_selectBrush != 0))
+        {
+            d_selectBrush-&gt;draw(clipper, position.d_z, clipper,
+                getModulateAlphaColourRect(d_selectCols, alpha));
+        }
+
+        Font* font = const_cast&lt;Font*&gt;(getFont());
+
+        if (font)
+        {
+            float left_offset = 0;
+            if (d_draw_bullet)
+            {
+                left_offset = font-&gt;getTextExtent(ds_bullet);
+            }
+
+            Vector3 finalPos = position;
+            finalPos.d_y -= PixelAligned((font-&gt;getLineSpacing() - font-&gt;getBaseline()) * 0.5f);
+            Rect draw_area = Rect(finalPos.d_x, finalPos.d_y,
+                clipper.d_right, finalPos.d_y);
+            font-&gt;drawText(ds_bullet, draw_area, finalPos.d_z, clipper, d_textFormatting, 
+                getModulateAlphaColourRect(d_textCols, alpha));
+            draw_area.d_left += left_offset;
+            font-&gt;drawText(d_itemText, draw_area, finalPos.d_z, clipper, d_textFormatting, 
+                getModulateAlphaColourRect(d_textCols, alpha));  
+        }
+
+    }
+
+    void ListboxWrappedTextItem::draw(RenderCache&amp; cache,const Rect&amp; targetRect,
+        float zBase, float alpha, const Rect* clipper) const
+    {
+        if (d_selected &amp;&amp; d_selectBrush != 0)
+        {
+            cache.cacheImage(*d_selectBrush, targetRect, zBase,
+                getModulateAlphaColourRect(d_selectCols, alpha), clipper);
+        }
+
+        Font* font = const_cast&lt;Font*&gt;(getFont());
+
+        if (font)
+        {
+            float left_offset = 0;
+            if (d_draw_bullet)
+            {
+                left_offset = font-&gt;getTextExtent(ds_bullet);
+            }
+
+            Rect finalPos = targetRect;
+            finalPos.d_top -= (font-&gt;getLineSpacing() - font-&gt;getBaseline()) * 0.5f;
+            cache.cacheText(ds_bullet, font, d_textFormatting, finalPos, zBase,
+                getModulateAlphaColourRect(d_textCols, alpha), clipper);
+            finalPos.d_left += left_offset;
+            cache.cacheText(d_itemText, font, d_textFormatting, finalPos, zBase,
+                getModulateAlphaColourRect(d_textCols, alpha), clipper);
+        }
+    }
+
+
+    /*************************************************************************
+    Set the colours used for text rendering.	
+    *************************************************************************/
+    void ListboxWrappedTextItem::setTextColours(colour top_left_colour,
+        colour top_right_colour,
+        colour bottom_left_colour,
+        colour bottom_right_colour)
+    {
+        d_textCols.d_top_left		= top_left_colour;
+        d_textCols.d_top_right		= top_right_colour;
+        d_textCols.d_bottom_left	= bottom_left_colour;
+        d_textCols.d_bottom_right	= bottom_right_colour;
+    }
+
+    void ListboxWrappedTextItem::setTextFormatting(TextFormatting fmt)
+    {
+        d_textFormatting = fmt;
+    }
+
+    const TextFormatting&amp; ListboxWrappedTextItem::getTextFormatting() const
+    {
+        return d_textFormatting;
+    }
+
+
+} // End of  CEGUI namespace section

Modified: rl/trunk/engine/ui/src/Makefile.am
===================================================================
--- rl/trunk/engine/ui/src/Makefile.am	2007-04-02 10:17:07 UTC (rev 3218)
+++ rl/trunk/engine/ui/src/Makefile.am	2007-04-02 14:52:27 UTC (rev 3219)
@@ -1,11 +1,10 @@
 INCLUDES = $(RUBY_CFLAGS) $(OGRE_CFLAGS) $(CEGUI_CFLAGS) $(CEGUIOGRE_CFLAGS) \
 	$(STLPORT_CFLAGS) $(OIS_CFLAGS) -I../include -I../../common/include  -I../../core/include \
 	-I../../rules/include -I../components/include -I../../dialog/include \
-	-I../../startup/include -I../../uicomponents/include 
+	-I../../startup/include 
 
 lib_LTLIBRARIES = libRlUi.la
 libRlUi_la_LIBADD = \
-    $(top_builddir)/engine/uicomponents/src/libRlUiComponents.la \
     $(RUBY_LIBS) $(LIBS) $(CEGUI_LIBS) $(OGRE_LIBS) $(CEGUIOGRE_LIBS) $(OIS_LIBS)
 
 libRlUi_la_SOURCES = \
@@ -35,6 +34,7 @@
 	InputManager.cpp \
 	InventoryWindow.cpp \
 	JournalWindow.cpp \
+	ListboxWrappedTextItem.cpp \
 	LogWindow.cpp \
 	MainMenuWindow.cpp \
 	MainMenuEngineWindow.cpp \


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000289.html">[Dsa-hl-svn] r3218 - modules/common/gui/windows	modules/common/scripts rl/trunk/engine/ui	rl/trunk/engine/ui/include rl/trunk/engine/ui/src
</A></li>
	<LI>Next message: <A HREF="000291.html">[Dsa-hl-svn] r3220 - rl/trunk/engine/rules/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#290">[ date ]</a>
              <a href="thread.html#290">[ thread ]</a>
              <a href="subject.html#290">[ subject ]</a>
              <a href="author.html#290">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
