<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r4022 - in modules: common/materials/programs	common/materials/tiled common/models ruchin/maps	ruchin/materials ruchin/materials/textures ruchin/models	ruchin/scripts ruchin/scripts/maps techdemo2/materials/textures
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4022%20-%20in%20modules%3A%20common/materials/programs%0A%09common/materials/tiled%20common/models%20ruchin/maps%0A%09ruchin/materials%20ruchin/materials/textures%20ruchin/models%0A%09ruchin/scripts%20ruchin/scripts/maps%20techdemo2/materials/textures&In-Reply-To=%3C200712121417.lBCEHxaW019752%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001092.html">
   <LINK REL="Next"  HREF="001094.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r4022 - in modules: common/materials/programs	common/materials/tiled common/models ruchin/maps	ruchin/materials ruchin/materials/textures ruchin/models	ruchin/scripts ruchin/scripts/maps techdemo2/materials/textures</H1>
    <B>pnyx at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4022%20-%20in%20modules%3A%20common/materials/programs%0A%09common/materials/tiled%20common/models%20ruchin/maps%0A%09ruchin/materials%20ruchin/materials/textures%20ruchin/models%0A%09ruchin/scripts%20ruchin/scripts/maps%20techdemo2/materials/textures&In-Reply-To=%3C200712121417.lBCEHxaW019752%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r4022 - in modules: common/materials/programs	common/materials/tiled common/models ruchin/maps	ruchin/materials ruchin/materials/textures ruchin/models	ruchin/scripts ruchin/scripts/maps techdemo2/materials/textures">pnyx at mail.berlios.de
       </A><BR>
    <I>Wed Dec 12 15:17:59 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001092.html">[Dsa-hl-svn] r4021 - rl/trunk/engine/ui/src
</A></li>
        <LI>Next message: <A HREF="001094.html">[Dsa-hl-svn] r4023 - in modules: common/materials/programs	ruchin/maps ruchin/materials/textures ruchin/models	ruchin/scripts/maps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1093">[ date ]</a>
              <a href="thread.html#1093">[ thread ]</a>
              <a href="subject.html#1093">[ subject ]</a>
              <a href="author.html#1093">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: pnyx
Date: 2007-12-12 15:10:26 +0100 (Wed, 12 Dec 2007)
New Revision: 4022

Added:
   modules/common/materials/programs/Basic_Pixel_Shader_AO.source
   modules/common/materials/programs/Basic_Vertex_Shader_AO.material
   modules/common/models/men_human_female_hair_long01_normal.mesh
   modules/ruchin/materials/textures/ruchin_ao_ground.png
   modules/ruchin/materials/textures/ruchin_ao_n.png
   modules/ruchin/materials/textures/ruchin_ao_p.png
   modules/ruchin/materials/textures/ruchin_ao_s.png
   modules/ruchin/models/Ruchin_Graveyard_wall.mesh
Removed:
   modules/ruchin/materials/textures/Ruchin_ao_Ground.dds
   modules/ruchin/materials/textures/Ruchin_ao_l.dds
   modules/ruchin/materials/textures/Ruchin_ao_l_inside.dds
   modules/ruchin/materials/textures/Ruchin_ao_m.dds
   modules/ruchin/materials/textures/Ruchin_ao_p.dds
   modules/ruchin/materials/textures/Ruchin_ao_s.dds
   modules/ruchin/materials/textures/ruchin_ao_s_n.png
Modified:
   modules/common/materials/programs/TerrainVColorBlending.material
   modules/common/materials/programs/TerrainVColorBlending_Pixel_Shader.source
   modules/common/materials/programs/TerrainVColorBlending_Vertex_Shader.source
   modules/common/materials/tiled/erdboden01.dds
   modules/common/materials/tiled/laub01.dds
   modules/common/models/men_human_female.skeleton
   modules/common/models/men_human_female_armor_garethplatte.mesh
   modules/common/models/men_human_female_armor_kroetenhaut.mesh
   modules/common/models/men_human_female_backpack_leather_01.mesh
   modules/common/models/men_human_female_backpack_leather_01_smalll.mesh
   modules/common/models/men_human_female_cloth_long.mesh
   modules/common/models/men_human_female_cloth_short.mesh
   modules/common/models/men_human_female_cloth_short_02.mesh
   modules/common/models/men_human_female_feet_boots_01.mesh
   modules/common/models/men_human_female_feet_nude.mesh
   modules/common/models/men_human_female_hair_long_01_normal.mesh
   modules/common/models/men_human_female_hand_nude.mesh
   modules/common/models/men_human_female_head_02.mesh
   modules/common/models/men_human_female_leg_pants_01_long.mesh
   modules/common/models/men_human_female_legs_underpants.mesh
   modules/common/models/men_human_female_torso.mesh
   modules/common/models/men_human_male.skeleton
   modules/ruchin/maps/ruchin_lightzones.rlmap.xml
   modules/ruchin/materials/feuertest.material
   modules/ruchin/materials/feuertest.particle
   modules/ruchin/materials/textures/Statue_02_normals.png
   modules/ruchin/materials/textures/ruchin_atlasmap.png
   modules/ruchin/models/House_dummies.mesh
   modules/ruchin/models/Ruchin_Hesi_innen.mesh
   modules/ruchin/models/Ruchin_Hexe_innen.mesh
   modules/ruchin/models/Ruchin_g.mesh
   modules/ruchin/models/Ruchin_ground.material
   modules/ruchin/models/Ruchin_ground.mesh
   modules/ruchin/models/Ruchin_l.mesh
   modules/ruchin/models/Ruchin_l_innen.mesh
   modules/ruchin/models/Ruchin_map.mesh
   modules/ruchin/models/Ruchin_n.mesh
   modules/ruchin/models/Ruchin_p.mesh
   modules/ruchin/models/Ruchin_plateau.mesh
   modules/ruchin/models/Ruchin_s.mesh
   modules/ruchin/models/Ruchin_t.mesh
   modules/ruchin/models/Ruchintest.material
   modules/ruchin/models/arc_regal_02.mesh
   modules/ruchin/models/ruchin_terrain.material
   modules/ruchin/scripts/maps/maptest.rb
   modules/ruchin/scripts/particle.rb
   modules/techdemo2/materials/textures/nat_baum_shadix_03.dds
Log:
added some aoMaps to Ruchin and other stuff


Added: modules/common/materials/programs/Basic_Pixel_Shader_AO.source
===================================================================
--- modules/common/materials/programs/Basic_Pixel_Shader_AO.source	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/common/materials/programs/Basic_Pixel_Shader_AO.source	2007-12-12 14:10:26 UTC (rev 4022)
@@ -0,0 +1,21 @@
+sampler2D baseMap;
+sampler2D aoMap;
+
+struct PS_INPUT 
+{
+   float2 Texcoord : TEXCOORD0;
+   float2 Texcoord1: TEXCOORD1;
+   float2 Texcoord2: TEXCOORD2;
+   float4 Color    : TEXCOORD3;
+   
+};
+
+float4 ps_main( PS_INPUT Input ) : COLOR0
+{
+	float4 color =  tex2D( baseMap, Input.Texcoord );
+   return float4( color.rgb * Input.Color * saturate(tex2D(aoMap, Input.Texcoord1)+0.5)  	,color.a);
+   
+}
+
+
+

Added: modules/common/materials/programs/Basic_Vertex_Shader_AO.material
===================================================================
--- modules/common/materials/programs/Basic_Vertex_Shader_AO.material	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/common/materials/programs/Basic_Vertex_Shader_AO.material	2007-12-12 14:10:26 UTC (rev 4022)
@@ -0,0 +1,87 @@
+//Effect: Textured
+
+//DirectX 9.0 HLSL Pixel Shader ps_2_0
+fragment_program Basic_Pixel_Shader_AO hlsl
+{
+	source Basic_Pixel_Shader_AO.source
+	target ps_2_0
+	entry_point ps_main
+}
+
+
+material Basic_Vertex_Shader_AO
+{
+	technique hlsl
+	{
+		receive_shadows on
+		//Rendering Pass: Pass 0 (pass index: #0 )
+		pass
+		{
+			alpha_rejection greater 128
+			//DirectX 9.0 HLSL Pixel Shader ps_2_0
+			fragment_program_ref Basic_Pixel_Shader_AO
+			{
+			}
+			//DirectX 9.0 HLSL Vertex Shader vs_2_0
+			vertex_program_ref Basic_Vertex_Shader
+			{
+				// param_named_auto
+
+				param_named_auto Light1_attenuation light_attenuation 0
+				param_named_auto Light1_color light_diffuse_colour 0
+				param_named_auto Light1_position light_position_object_space 0
+				param_named Light1_spec_power float 0.3
+				
+				param_named_auto Light2_attenuation light_attenuation 1
+				param_named_auto Light2_color light_diffuse_colour 1
+				param_named_auto Light2_position light_position_object_space 1
+				param_named Light2_spec_power float 0.3
+				
+				param_named_auto Light3_attenuation light_attenuation 2
+				param_named_auto Light3_color light_diffuse_colour 2
+				param_named_auto Light3_position light_position_object_space 2
+				param_named Light3_spec_power float 0.3
+				
+				
+				param_named_auto matViewProjection worldviewproj_matrix
+				param_named_auto vViewPosition camera_position_object_space
+				
+				
+				param_named skycolor float4 0.5 0.5 0.5 1.0
+				param_named groundcolor float4 0.10 0.10 0.10 1.0
+			}
+			
+			// HLSL Vertex Shader
+			shadow_receiver_vertex_program_ref Basic_Vertex_Shader_SR
+			{
+				//Shader Constant: matWorldViewProjection
+				param_named_auto matWorldViewProjection worldviewproj_matrix
+				//Shader Constant: matWorld
+				param_named_auto matWorld world_matrix
+				//Shader Constant: matTextureViewProjection
+				param_named_auto matTextureViewProjection texture_viewproj_matrix
+			}
+
+			texture_unit
+			{
+				texture_alias diffuse
+
+			}
+			texture_unit
+			{
+				texture_alias ambient
+
+			}
+		}
+	}
+	technique
+	{
+        pass
+        {
+            texture_unit
+            {
+                texture_alias diffuse
+            }
+        }
+    }
+}

Modified: modules/common/materials/programs/TerrainVColorBlending.material
===================================================================
--- modules/common/materials/programs/TerrainVColorBlending.material	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/common/materials/programs/TerrainVColorBlending.material	2007-12-12 14:10:26 UTC (rev 4022)
@@ -54,17 +54,19 @@
 			vertex_program_ref TerrainVColorBlending_Vertex_Shader_glsl
 			{
 				param_named_auto matViewProjection worldviewproj_matrix
-				param_named Light_Ambient float4 0.000000 0.000000 0.000000 1.000000
 				
 				//Lights:
 				param_named_auto Light_Attenuation0 light_attenuation 0
 				param_named_auto Light_Attenuation1 light_attenuation 1
+				param_named_auto Light_Attenuation2 light_attenuation 2
 				
 				param_named_auto Light_Color0  light_diffuse_colour 0
 				param_named_auto Light_Color1  light_diffuse_colour 1
+				param_named_auto Light_Color2  light_diffuse_colour 2
 				
 				param_named_auto Light_Position0 light_position 0
 				param_named_auto Light_Position1 light_position 1
+				param_named_auto Light_Position2 light_position 2
 
 				param_named skycolor float4 0.2 0.2 0.2 1.0
 				param_named groundcolor float4 0.10 0.10 0.10 1.0
@@ -90,18 +92,10 @@
 			
 			
 			
-			shadow_receiver_vertex_program_ref Basic_Vertex_Shader_SR
-			{
-				//Shader Constant: matWorldViewProjection
-				param_named_auto matWorldViewProjection worldviewproj_matrix
-				//Shader Constant: matWorld
-				param_named_auto matWorld world_matrix
-				//Shader Constant: matTextureViewProjection
-				param_named_auto matTextureViewProjection texture_viewproj_matrix
-			}
 			
 			
 			
+			
 			//Texture Schwarz
 			texture_unit
 			{
@@ -159,17 +153,18 @@
 			vertex_program_ref TerrainVColorBlending_Vertex_Shader
 			{
 				param_named_auto matViewProjection worldviewproj_matrix
-				param_named Light_Ambient float4 0.000000 0.000000 0.000000 1.000000
-				
 				//Lights:
 				param_named_auto Light_Attenuation0 light_attenuation 0
 				param_named_auto Light_Attenuation1 light_attenuation 1
+				param_named_auto Light_Attenuation2 light_attenuation 2
 				
 				param_named_auto Light_Color0  light_diffuse_colour 0
 				param_named_auto Light_Color1  light_diffuse_colour 1
+				param_named_auto Light_Color2  light_diffuse_colour 2
 				
 				param_named_auto Light_Position0 light_position 0
 				param_named_auto Light_Position1 light_position 1
+				param_named_auto Light_Position2 light_position 2
 
 				param_named skycolor float4 0.2 0.2 0.2 1.0
 				param_named groundcolor float4 0.10 0.10 0.10 1.0
@@ -195,18 +190,10 @@
 			
 			
 			
-			shadow_receiver_vertex_program_ref Basic_Vertex_Shader_SR
-			{
-				//Shader Constant: matWorldViewProjection
-				param_named_auto matWorldViewProjection worldviewproj_matrix
-				//Shader Constant: matWorld
-				param_named_auto matWorld world_matrix
-				//Shader Constant: matTextureViewProjection
-				param_named_auto matTextureViewProjection texture_viewproj_matrix
-			}
 			
 			
 			
+			
 			//Texture Schwarz
 			texture_unit
 			{

Modified: modules/common/materials/programs/TerrainVColorBlending_Pixel_Shader.source
===================================================================
--- modules/common/materials/programs/TerrainVColorBlending_Pixel_Shader.source	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/common/materials/programs/TerrainVColorBlending_Pixel_Shader.source	2007-12-12 14:10:26 UTC (rev 4022)
@@ -13,12 +13,12 @@
                float4 UV2 : TEXCOORD2,
                float4 UV3 : TEXCOORD3,
                float4 UV4 : TEXCOORD4,
-               float4 Light:COLOR1) : COLOR0
+               float4 Light:TEXCOORD5) : COLOR0
 {   
    
 ///*   
 
-
+	float4 ambient = saturate(tex2D(Texture5,UV4.zw)+0.5);
    
    float4 TexColor = float4(tex2D(Texture0,UV0.xy).rgb,tex2D(Texture0,UV0.zw).a);
    TexColor = lerp(TexColor,float4(tex2D(Texture1,UV1.xy).rgb,tex2D(Texture1,UV1.zw).a),Color.r);
@@ -26,8 +26,9 @@
    TexColor = lerp(TexColor,float4(tex2D(Texture3,UV3.xy).rgb,tex2D(Texture3,UV3.zw).a),Color.b);
    TexColor = lerp(float4(tex2D(Texture4,UV4.xy).rgb,tex2D(Texture4,UV4.zw * scale_Detail4).a),TexColor,Color.a);
    
+   
 
-  return TexColor * (TexColor.a+ 0.5) * ((tex2D(Texture5,UV4.zw)-0.5) + Light);
+  return TexColor * (TexColor.a+ 0.5) * ( float4(Light.xyz,1)* ambient) ;
   //return float4(Color.aaaa);
 
 }

Modified: modules/common/materials/programs/TerrainVColorBlending_Vertex_Shader.source
===================================================================
--- modules/common/materials/programs/TerrainVColorBlending_Vertex_Shader.source	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/common/materials/programs/TerrainVColorBlending_Vertex_Shader.source	2007-12-12 14:10:26 UTC (rev 4022)
@@ -11,7 +11,6 @@
 uniform float scale_Detail2;
 uniform float scale_Detail3;
 
-uniform float4 Light_Ambient;
 uniform float4 Light_Color0;
 uniform float4 Light_Position0;
 uniform float4 Light_Attenuation0;
@@ -20,10 +19,14 @@
 uniform float4 Light_Position1;
 uniform float4 Light_Attenuation1;
 
-float4 skycolor;
-float4 groundcolor;
+uniform float4 Light_Color2;
+uniform float4 Light_Position2;
+uniform float4 Light_Attenuation2;
 
+uniform float4 skycolor;
+uniform float4 groundcolor;
 
+
 struct VS_OUTPUT 
 {
    float4 Position : POSITION0;
@@ -33,7 +36,7 @@
    float4 UV2 : TEXCOORD2;
    float4 UV3 : TEXCOORD3;
    float4 UV4 : TEXCOORD4;
-   float4 Light: COLOR1;
+   float4 Light:TEXCOORD5;
 };
 
 VS_OUTPUT vs_main( float4 Position : POSITION0,
@@ -42,7 +45,6 @@
                    float3 Normal: NORMAL)
 {
    VS_OUTPUT Output;
-   UV = Position.xz /4;
    
    Output.UV0 = float4(UV*scale_Texture0,UV*scale_Detail0);
    Output.UV1 = float4(UV*scale_Texture1,UV*scale_Detail1);
@@ -50,36 +52,51 @@
    Output.UV3 = float4(UV*scale_Texture3,UV*scale_Detail3);
    Output.UV4 = float4(UV*scale_Texture4,UV);
    
+   Output.Light = lerp(skycolor,groundcolor,(dot(Normal, float3(0,-1,0))+1)/2 );
    
    Output.Position = mul( matViewProjection, Position );
    
    Output.Color = Color;
    
    // ######## Light 0 #########
-   float3 LightDir0 = Light_Position0 - Position * Light_Position0.w;
-   float Dist0 = length(LightDir0);
-   LightDir0 /= Dist0;
+   float3 LightDir = Light_Position0 - Position * Light_Position0.w;
+   float Dist = length(LightDir);
+   LightDir /= Dist;
    
-   float DistAttn0 = saturate(1/(Light_Attenuation0.y +
-                                Light_Attenuation0.z * Dist0 +
-                                Light_Attenuation0.w * Dist0 * Dist0));
-   float AngleAttn0= saturate(dot(Normal,LightDir0));
+   float DistAttn = clamp(1/ (Light_Attenuation0.y +
+                              Light_Attenuation0.z * Dist +
+                              Light_Attenuation0.w * Dist * Dist)*saturate(Light_Attenuation0.x-Dist)
+                          ,0,1);
+   float AngleAttn= saturate(dot(Normal,LightDir));
+   Output.Light += Light_Color0 * DistAttn * AngleAttn;
    
-   
    // ######## Light 1 #########
-   float3 LightDir1 = Light_Position1 - Position * Light_Position1.w;
-   float Dist1 = length(LightDir1);
-   LightDir1 /= Dist1;
+   LightDir = Light_Position1 - Position * Light_Position1.w;
+   Dist = length(LightDir);
+   LightDir /= Dist;
    
-   float DistAttn1 = saturate(1/(Light_Attenuation1.y +
-                                Light_Attenuation1.z * Dist1 +
-                                Light_Attenuation1.w * Dist1 * Dist1));
-   float AngleAttn1= saturate(dot(Normal,LightDir1));
+   DistAttn = clamp(1/ (Light_Attenuation1.y +
+                              Light_Attenuation1.z * Dist +
+                              Light_Attenuation1.w * Dist * Dist)*saturate(Light_Attenuation1.x-Dist)
+                          ,0,1);
+   AngleAttn= saturate(dot(Normal,LightDir));
+   Output.Light += Light_Color1 * DistAttn * AngleAttn;
    
+   // ######## Light 2 #########
+   LightDir = Light_Position2 - Position * Light_Position2.w;
+   Dist = length(LightDir);
+   LightDir /= Dist;
    
-   // Light Output
-   Output.Light =lerp(skycolor,groundcolor,(dot(Normal, float3(0,-1,0))+1)/2 ) +(Light_Ambient-0.5 + ((Light_Color0 * DistAttn0 * AngleAttn0) + (Light_Color1 * DistAttn1 * AngleAttn1))*1.25);
+   DistAttn = clamp(1/ (Light_Attenuation2.y +
+                              Light_Attenuation2.z * Dist +
+                              Light_Attenuation2.w * Dist * Dist)*saturate(Light_Attenuation2.x-Dist)
+                          ,0,1);
+   AngleAttn= saturate(dot(Normal,LightDir));
+   Output.Light += Light_Color2 * DistAttn * AngleAttn;
    
+   // Light Output 
+   //Output.Light +=(Light_Color0 * DistAttn0 * AngleAttn0) + (Light_Color1 * DistAttn1 * AngleAttn1)+ (Light_Color2 * DistAttn2 * AngleAttn2);
+   
    return( Output );
    
 }

Modified: modules/common/materials/tiled/erdboden01.dds
===================================================================
(Binary files differ)

Modified: modules/common/materials/tiled/laub01.dds
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female.skeleton
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_armor_garethplatte.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_armor_kroetenhaut.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_backpack_leather_01.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_backpack_leather_01_smalll.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_cloth_long.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_cloth_short.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_cloth_short_02.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_feet_boots_01.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_feet_nude.mesh
===================================================================
(Binary files differ)

Added: modules/common/models/men_human_female_hair_long01_normal.mesh
===================================================================
(Binary files differ)


Property changes on: modules/common/models/men_human_female_hair_long01_normal.mesh
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: modules/common/models/men_human_female_hair_long_01_normal.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_hand_nude.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_head_02.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_leg_pants_01_long.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_legs_underpants.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_female_torso.mesh
===================================================================
(Binary files differ)

Modified: modules/common/models/men_human_male.skeleton
===================================================================
(Binary files differ)

Modified: modules/ruchin/maps/ruchin_lightzones.rlmap.xml
===================================================================
--- modules/ruchin/maps/ruchin_lightzones.rlmap.xml	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/ruchin/maps/ruchin_lightzones.rlmap.xml	2007-12-12 14:10:26 UTC (rev 4022)
@@ -1,6 +1,13 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;rastullahmap formatVersion=&quot;0.4.0&quot;&gt;
 	&lt;nodes&gt;
+		&lt;entity name=&quot;Ruchin_Graveyard_wall&quot; meshfile=&quot;Ruchin_Graveyard_wall.mesh&quot; visible=&quot;true&quot; receivesShadow=&quot;true&quot;&gt;
+			&lt;position x=&quot;30.0&quot; y=&quot;0.0&quot; z=&quot;60.0&quot; /&gt;
+			&lt;rotation qx=&quot;0.0&quot; qy=&quot;0.0&quot; qz=&quot;0.0&quot; qw=&quot;1.0&quot; /&gt;
+			&lt;scale x=&quot;1.0&quot; y=&quot;1.0&quot; z=&quot;1.0&quot; /&gt;
+			&lt;staticgeometrygroup id=&quot;0&quot;/&gt;
+			&lt;renderingdistance data=&quot;100&quot; /&gt; 
+		&lt;/entity&gt;	
 	
 		&lt;entity name=&quot;Ruchin_plateau&quot; meshfile=&quot;Ruchin_plateau.mesh&quot; visible=&quot;true&quot; receivesShadow=&quot;true&quot;&gt;
 			&lt;position x=&quot;100.0&quot; y=&quot;0.0&quot; z=&quot;-80.0&quot; /&gt;
@@ -158,7 +165,7 @@
 			&lt;renderingdistance data=&quot;100&quot; /&gt;
 		&lt;/entity&gt;
 		&lt;entity name=&quot;Ruchin_ground&quot; meshfile =&quot;Ruchin_ground.mesh&quot; visible=&quot;true&quot; receivesShadow=&quot;true&quot;&gt;
-			&lt;position x=&quot;35.0&quot; y=&quot;0.0&quot; z=&quot;-20.0&quot; /&gt;
+			&lt;position x=&quot;0.0&quot; y=&quot;0.0&quot; z=&quot;0.0&quot; /&gt;
 			&lt;rotation qx=&quot;0.0&quot; qy=&quot;0.0&quot; qz=&quot;0.0&quot; qw=&quot;0.0&quot; /&gt;
 			&lt;scale x=&quot;1.0&quot; y=&quot;1.0&quot; z=&quot;1.0&quot; /&gt;
 			&lt;staticgeometrygroup id=&quot;2&quot;/&gt;
@@ -337,18 +344,15 @@
 		&lt;/light&gt;
 		
 		&lt;light name=&quot;sun&quot; type=&quot;directional&quot; visible=&quot;true&quot; castShadows=&quot;true&quot;&gt;
-			&lt;colourDiffuse r=&quot;0.8&quot; g=&quot;0.8&quot; b=&quot;0.8&quot; /&gt;
-			&lt;colourDiffuse r=&quot;0.8&quot; g=&quot;0.8&quot; b=&quot;0.8&quot; /&gt;
+			&lt;colourDiffuse r=&quot;0.9&quot; g=&quot;0.8&quot; b=&quot;0.8&quot; /&gt;
 			&lt;direction x=&quot;-0.17101&quot; y=&quot;-0.873647&quot; z=&quot;0.969846&quot; /&gt;
 		&lt;/light&gt;
 	&lt;/nodes&gt;
 	&lt;zones&gt;
 		&lt;zone name=&quot;default&quot;&gt;
 			&lt;light name=&quot;sun&quot;/&gt;
-			&lt;light name=&quot;Ruchin_l_Light2&quot;/&gt;
-			&lt;light name=&quot;Ruchin_l_Light1&quot;/&gt;
-			&lt;light name=&quot;templeLight1&quot;/&gt;
-			&lt;light name=&quot;templeLight2&quot;/&gt;
+			
+			&lt;sound name=&quot;ruchin001.ogg&quot;/&gt;
 		&lt;/zone&gt;
 		&lt;zone name=&quot;temple_zone&quot;&gt;
 			&lt;area type=&quot;mesh&quot; meshfile=&quot;temple_lightzone.mesh&quot;&gt;

Modified: modules/ruchin/materials/feuertest.material
===================================================================
--- modules/ruchin/materials/feuertest.material	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/ruchin/materials/feuertest.material	2007-12-12 14:10:26 UTC (rev 4022)
@@ -1,4 +1,4 @@
-material feuertest
+material feuertest2
 {
 	technique
 	{

Modified: modules/ruchin/materials/feuertest.particle
===================================================================
--- modules/ruchin/materials/feuertest.particle	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/ruchin/materials/feuertest.particle	2007-12-12 14:10:26 UTC (rev 4022)
@@ -1,4 +1,4 @@
-feuertest
+feuertest2
 {
 	quota	70
 	material	feuertest

Deleted: modules/ruchin/materials/textures/Ruchin_ao_Ground.dds
===================================================================
(Binary files differ)

Deleted: modules/ruchin/materials/textures/Ruchin_ao_l.dds
===================================================================
(Binary files differ)

Deleted: modules/ruchin/materials/textures/Ruchin_ao_l_inside.dds
===================================================================
(Binary files differ)

Deleted: modules/ruchin/materials/textures/Ruchin_ao_m.dds
===================================================================
(Binary files differ)

Deleted: modules/ruchin/materials/textures/Ruchin_ao_p.dds
===================================================================
(Binary files differ)

Deleted: modules/ruchin/materials/textures/Ruchin_ao_s.dds
===================================================================
(Binary files differ)

Modified: modules/ruchin/materials/textures/Statue_02_normals.png
===================================================================
(Binary files differ)

Added: modules/ruchin/materials/textures/ruchin_ao_ground.png
===================================================================
(Binary files differ)


Property changes on: modules/ruchin/materials/textures/ruchin_ao_ground.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: modules/ruchin/materials/textures/ruchin_ao_n.png
===================================================================
(Binary files differ)


Property changes on: modules/ruchin/materials/textures/ruchin_ao_n.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: modules/ruchin/materials/textures/ruchin_ao_p.png
===================================================================
(Binary files differ)


Property changes on: modules/ruchin/materials/textures/ruchin_ao_p.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: modules/ruchin/materials/textures/ruchin_ao_s.png
===================================================================
(Binary files differ)


Property changes on: modules/ruchin/materials/textures/ruchin_ao_s.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Deleted: modules/ruchin/materials/textures/ruchin_ao_s_n.png
===================================================================
(Binary files differ)

Modified: modules/ruchin/materials/textures/ruchin_atlasmap.png
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/House_dummies.mesh
===================================================================
(Binary files differ)

Added: modules/ruchin/models/Ruchin_Graveyard_wall.mesh
===================================================================
(Binary files differ)


Property changes on: modules/ruchin/models/Ruchin_Graveyard_wall.mesh
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: modules/ruchin/models/Ruchin_Hesi_innen.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_Hexe_innen.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_g.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_ground.material
===================================================================
--- modules/ruchin/models/Ruchin_ground.material	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/ruchin/models/Ruchin_ground.material	2007-12-12 14:10:26 UTC (rev 4022)
@@ -1,12 +1,12 @@
+
 material Ruchin_ground: TerrainVColorBlending
 {
-
    set_texture_alias black       erdboden01.dds
    set_texture_alias red         laub01.dds
    set_texture_alias green       nat_gras_01.dds
    set_texture_alias blue        nat_steingrund_01.dds
-   set_texture_alias alpha       nat_steingrund_01.dds
-   set_texture_alias Lightingmap Ligthingmap_default.png
+   set_texture_alias alpha       felsen2.dds
+   set_texture_alias Lightingmap Ruchin_ao_ground.png
    
    
    technique glsl
@@ -15,26 +15,26 @@
       {
          fragment_program_ref
          {
-            param_named scale_Detail4 float 0.050000 // Alpha
+            param_named scale_Detail4 float 30.050000 // Alpha
          }
 
          vertex_program_ref
          {
             param_named Light_Ambient float4 0.500000 0.500000 0.500000 1.000000
 
-            param_named scale_Texture0 float 0.58000 // Schwarz
-            param_named scale_Detail0 float 0.020000
+            param_named scale_Texture0 float 30.58000 // Schwarz
+            param_named scale_Detail0 float 30.020000
 
-            param_named scale_Texture1 float 0.5700 // Rot
-            param_named scale_Detail1 float 1.00000
+            param_named scale_Texture1 float 30.7500 // Rot
+            param_named scale_Detail1 float 30.00000
 
-            param_named scale_Texture2 float 0.28500 // Gruen
-            param_named scale_Detail2 float 0.60000
+            param_named scale_Texture2 float 30.28500 // Gruen
+            param_named scale_Detail2 float 30.60000
 
-            param_named scale_Texture3 float 0.88000 // Blau
-            param_named scale_Detail3 float 1.00000
+            param_named scale_Texture3 float 30.88000 // Blau
+            param_named scale_Detail3 float 30.00000
 
-            param_named scale_Texture4 float 0.016000 // Alpha
+            param_named scale_Texture4 float 30.016000 // Alpha
          }
       }
    }
@@ -45,26 +45,26 @@
       {
          fragment_program_ref
          {
-            param_named scale_Detail4 float 0.050000 // Alpha
+            param_named scale_Detail4 float 30.050000 // Alpha
          }
 
          vertex_program_ref
          {
             param_named Light_Ambient float4 0.500000 0.500000 0.500000 1.000000
 
-            param_named scale_Texture0 float 0.58000 // Schwarz
-            param_named scale_Detail0 float 0.020000
+            param_named scale_Texture0 float 30.58000 // Schwarz
+            param_named scale_Detail0 float 30.020000
 
-            param_named scale_Texture1 float 0.5700 // Rot
-            param_named scale_Detail1 float 1.00000
+            param_named scale_Texture1 float 30.7500 // Rot
+            param_named scale_Detail1 float 30.00000
 
-            param_named scale_Texture2 float 0.28500 // Gruen
-            param_named scale_Detail2 float 0.60000
+            param_named scale_Texture2 float 30.28500 // Gruen
+            param_named scale_Detail2 float 30.60000
 
-            param_named scale_Texture3 float 0.88000 // Blau
-            param_named scale_Detail3 float 1.00000
+            param_named scale_Texture3 float 30.88000 // Blau
+            param_named scale_Detail3 float 30.00000
 
-            param_named scale_Texture4 float 0.016000 // Alpha
+            param_named scale_Texture4 float 30.016000 // Alpha
          }
       }
    }

Modified: modules/ruchin/models/Ruchin_ground.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_l.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_l_innen.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_map.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_n.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_p.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_plateau.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_s.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchin_t.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/Ruchintest.material
===================================================================
--- modules/ruchin/models/Ruchintest.material	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/ruchin/models/Ruchintest.material	2007-12-12 14:10:26 UTC (rev 4022)
@@ -109,32 +109,43 @@
 } 
 
 
-material Ruchin_s : Basic_Vertex_Shader
+
+material Ruchin/base : Basic_Vertex_Shader
 {
 set_texture_alias diffuse ruchin_atlasmap.png
 
 }
 
-material Ruchin_p : Basic_Vertex_Shader
+material Ruchin/Schiefer : Basic_Vertex_Shader
 {
-set_texture_alias diffuse ruchin_atlasmap.png
+set_texture_alias diffuse arc_schieferdach.png
 
 }
 
-material Ruchin/base : Basic_Vertex_Shader
+material Ruchin/glas : Basic_Vertex_Shader_Alpha
 {
+set_texture_alias diffuse ruchin_atlasmap.dds
+
+}
+// ruchin_ao_n.png
+
+material Ruchin_n : Basic_Vertex_Shader_AO
+{
 set_texture_alias diffuse ruchin_atlasmap.png
+set_texture_alias ambient ruchin_ao_n.png
 
 }
 
-material Ruchin/Schiefer : Basic_Vertex_Shader
+material Ruchin_p : Basic_Vertex_Shader_AO
 {
-set_texture_alias diffuse arc_schieferdach.png
+set_texture_alias diffuse ruchin_atlasmap.png
+set_texture_alias ambient ruchin_ao_p.png
 
 }
 
-material Ruchin/glas : Basic_Vertex_Shader_Alpha
+material Ruchin_s : Basic_Vertex_Shader_AO
 {
-set_texture_alias diffuse ruchin_atlasmap.dds
+set_texture_alias diffuse ruchin_atlasmap.png
+set_texture_alias ambient ruchin_ao_s.png
 
 }

Modified: modules/ruchin/models/arc_regal_02.mesh
===================================================================
(Binary files differ)

Modified: modules/ruchin/models/ruchin_terrain.material
===================================================================
--- modules/ruchin/models/ruchin_terrain.material	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/ruchin/models/ruchin_terrain.material	2007-12-12 14:10:26 UTC (rev 4022)
@@ -15,26 +15,26 @@
       {
          fragment_program_ref
          {
-            param_named scale_Detail4 float 0.050000 // Alpha
+            param_named scale_Detail4 float 20.050000 // Alpha
          }
 
          vertex_program_ref
          {
             param_named Light_Ambient float4 0.500000 0.500000 0.500000 1.000000
 
-            param_named scale_Texture0 float 0.018000 // Schwarz
-            param_named scale_Detail0 float 0.020000
+            param_named scale_Texture0 float 20.018000 // Schwarz
+            param_named scale_Detail0 float 20.020000
 
-            param_named scale_Texture1 float 0.005700 // Rot
-            param_named scale_Detail1 float 0.100000
+            param_named scale_Texture1 float 20.005700 // Rot
+            param_named scale_Detail1 float 20.100000
 
-            param_named scale_Texture2 float 0.028500 // Gruen
-            param_named scale_Detail2 float 0.060000
+            param_named scale_Texture2 float 20.028500 // Gruen
+            param_named scale_Detail2 float 20.060000
 
-            param_named scale_Texture3 float 0.008000 // Blau
-            param_named scale_Detail3 float 0.050000
+            param_named scale_Texture3 float 20.008000 // Blau
+            param_named scale_Detail3 float 20.050000
 
-            param_named scale_Texture4 float 0.016000 // Alpha
+            param_named scale_Texture4 float 20.016000 // Alpha
          }
       }
    }
@@ -45,26 +45,26 @@
       {
          fragment_program_ref
          {
-            param_named scale_Detail4 float 0.050000 // Alpha
+            param_named scale_Detail4 float 20.050000 // Alpha
          }
 
          vertex_program_ref
          {
             param_named Light_Ambient float4 0.500000 0.500000 0.500000 1.000000
 
-            param_named scale_Texture0 float 0.018000 // Schwarz
-            param_named scale_Detail0 float 0.020000
+            param_named scale_Texture0 float 20.018000 // Schwarz
+            param_named scale_Detail0 float 20.020000
 
-            param_named scale_Texture1 float 0.005700 // Rot
-            param_named scale_Detail1 float 0.100000
+            param_named scale_Texture1 float 20.005700 // Rot
+            param_named scale_Detail1 float 20.100000
 
-            param_named scale_Texture2 float 0.028500 // Gruen
-            param_named scale_Detail2 float 0.060000
+            param_named scale_Texture2 float 20.028500 // Gruen
+            param_named scale_Detail2 float 20.060000
 
-            param_named scale_Texture3 float 0.008000 // Blau
-            param_named scale_Detail3 float 0.050000
+            param_named scale_Texture3 float 20.008000 // Blau
+            param_named scale_Detail3 float 20.050000
 
-            param_named scale_Texture4 float 0.016000 // Alpha
+            param_named scale_Texture4 float 20.016000 // Alpha
          }
       }
    }

Modified: modules/ruchin/scripts/maps/maptest.rb
===================================================================
--- modules/ruchin/scripts/maps/maptest.rb	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/ruchin/scripts/maps/maptest.rb	2007-12-12 14:10:26 UTC (rev 4022)
@@ -4,6 +4,7 @@
 require 'hero.rb'
 require 'mckhero.rb'
 require 'door.rb'
+require 'torch.rb'
 
 # Physik aktivieren
 $PM.setEnabled(true);
@@ -78,6 +79,13 @@
 loader = MapLoader.new(&quot;ruchin&quot;);
 loader.loadMap(&quot;ruchin_lightzones.rlmap.xml&quot;);
 
+$SCRIPT.log(&quot;Fackellicht erstellen..&quot;);
+fackellicht = $AM.createLightActor(&quot;Das Licht der Fackel&quot;, LightObject::LT_POINT );
+fackellicht.getControlledObject().setCastShadows(false);
+fackellicht.getControlledObject().setDiffuseColour(0.8,0.7,0.6);
+fackellicht.getControlledObject().setAttenuation(5.0, 0.79,  -0.21, 0.268 );
+$hero.getActor().attachToSlot( fackellicht, &quot;Bip01 R SlotHand&quot; );
+$SCRIPT.log(&quot;Fackellicht erstellt.&quot;);
 ##########################
 
 load &quot;particle.rb&quot;

Modified: modules/ruchin/scripts/particle.rb
===================================================================
--- modules/ruchin/scripts/particle.rb	2007-12-07 22:02:55 UTC (rev 4021)
+++ modules/ruchin/scripts/particle.rb	2007-12-12 14:10:26 UTC (rev 4022)
@@ -1,12 +1,12 @@
 
 
-tavernfire1 = $AM.createParticleSystemActor(&quot;tavernfire1&quot;, &quot;feuertest&quot; );
+tavernfire1 = $AM.createParticleSystemActor(&quot;tavernfire1&quot;, &quot;feuertest2&quot; );
 tavernfire1.placeIntoScene( 36.74,-3.90,35.93, 1.0, 0.0, 0.0, 0.0 );
 
-templefire1 = $AM.createParticleSystemActor(&quot;templefire1&quot;, &quot;feuertest&quot; );
+templefire1 = $AM.createParticleSystemActor(&quot;templefire1&quot;, &quot;feuertest2&quot; );
 templefire1.placeIntoScene( 123.28,3.0,-22.19, 1.0, 0.0, 0.0, 0.0 );
 
-templefire2 = $AM.createParticleSystemActor(&quot;templefire2&quot;, &quot;feuertest&quot; );
+templefire2 = $AM.createParticleSystemActor(&quot;templefire2&quot;, &quot;feuertest2&quot; );
 templefire2.placeIntoScene( 123.28,3.0,-18.93, 1.0, 0.0, 0.0, 0.0 );
 
 #nebel = $AM.createParticleSystemActor(&quot;nebel&quot;, &quot;nebel&quot; );

Modified: modules/techdemo2/materials/textures/nat_baum_shadix_03.dds
===================================================================
(Binary files differ)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001092.html">[Dsa-hl-svn] r4021 - rl/trunk/engine/ui/src
</A></li>
	<LI>Next message: <A HREF="001094.html">[Dsa-hl-svn] r4023 - in modules: common/materials/programs	ruchin/maps ruchin/materials/textures ruchin/models	ruchin/scripts/maps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1093">[ date ]</a>
              <a href="thread.html#1093">[ thread ]</a>
              <a href="subject.html#1093">[ subject ]</a>
              <a href="author.html#1093">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
