<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r2949 - in rl/trunk: . engine/ai engine/common	engine/common/include engine/common/src engine/core	engine/core/include engine/core/src engine/dialog	engine/rules engine/rules/src engine/script engine/startup	engine/startup/src engine/ui engine/ui/include engine/ui/src	engine/uicomponents engine/uicomponents/src	plugins/fmod4driver plugins/openaldriver tools
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r2949%20-%20in%20rl/trunk%3A%20.%20engine/ai%20engine/common%0A%09engine/common/include%20engine/common/src%20engine/core%0A%09engine/core/include%20engine/core/src%20engine/dialog%0A%09engine/rules%20engine/rules/src%20engine/script%20engine/startup%0A%09engine/startup/src%20engine/ui%20engine/ui/include%20engine/ui/src%0A%09engine/uicomponents%20engine/uicomponents/src%0A%09plugins/fmod4driver%20plugins/openaldriver%20tools&In-Reply-To=%3C200701082007.l08K7FFh004836%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000019.html">
   <LINK REL="Next"  HREF="000021.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r2949 - in rl/trunk: . engine/ai engine/common	engine/common/include engine/common/src engine/core	engine/core/include engine/core/src engine/dialog	engine/rules engine/rules/src engine/script engine/startup	engine/startup/src engine/ui engine/ui/include engine/ui/src	engine/uicomponents engine/uicomponents/src	plugins/fmod4driver plugins/openaldriver tools</H1>
    <B>tanis at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r2949%20-%20in%20rl/trunk%3A%20.%20engine/ai%20engine/common%0A%09engine/common/include%20engine/common/src%20engine/core%0A%09engine/core/include%20engine/core/src%20engine/dialog%0A%09engine/rules%20engine/rules/src%20engine/script%20engine/startup%0A%09engine/startup/src%20engine/ui%20engine/ui/include%20engine/ui/src%0A%09engine/uicomponents%20engine/uicomponents/src%0A%09plugins/fmod4driver%20plugins/openaldriver%20tools&In-Reply-To=%3C200701082007.l08K7FFh004836%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r2949 - in rl/trunk: . engine/ai engine/common	engine/common/include engine/common/src engine/core	engine/core/include engine/core/src engine/dialog	engine/rules engine/rules/src engine/script engine/startup	engine/startup/src engine/ui engine/ui/include engine/ui/src	engine/uicomponents engine/uicomponents/src	plugins/fmod4driver plugins/openaldriver tools">tanis at mail.berlios.de
       </A><BR>
    <I>Mon Jan  8 21:07:15 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000019.html">[Dsa-hl-svn] r2948 - dependencies/OgreNewt/src
</A></li>
        <LI>Next message: <A HREF="000021.html">[Dsa-hl-svn] r2950 - in modules: common/gui/fonts	common/gui/imagesets common/gui/schemes common/gui/windows	common/gui/windows/buttons common/materials config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20">[ date ]</a>
              <a href="thread.html#20">[ thread ]</a>
              <a href="subject.html#20">[ subject ]</a>
              <a href="author.html#20">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tanis
Date: 2007-01-08 21:06:52 +0100 (Mon, 08 Jan 2007)
New Revision: 2949

Added:
   rl/trunk/engine/ui/include/CeGuiHelper.h
Modified:
   rl/trunk/Rastullah2005.sln
   rl/trunk/engine/ai/RlAI2005.vcproj
   rl/trunk/engine/common/RlCommon2005.vcproj
   rl/trunk/engine/common/include/FixRubyHeaders.h
   rl/trunk/engine/common/src/XmlResource.cpp
   rl/trunk/engine/core/RlCore2005.vcproj
   rl/trunk/engine/core/include/CoreSubsystem.h
   rl/trunk/engine/core/src/CoreSubsystem.cpp
   rl/trunk/engine/core/src/DotSceneLoader.cpp
   rl/trunk/engine/core/src/MovableText.cpp
   rl/trunk/engine/core/src/SoundResource.cpp
   rl/trunk/engine/dialog/RlDialog2005.vcproj
   rl/trunk/engine/rules/RlRules2005.vcproj
   rl/trunk/engine/rules/src/Creature.cpp
   rl/trunk/engine/script/RlScript2005.vcproj
   rl/trunk/engine/startup/RlStartup2005.vcproj
   rl/trunk/engine/startup/src/RastullahMain.cpp
   rl/trunk/engine/ui/RlUI2005.vcproj
   rl/trunk/engine/ui/include/ActionChoiceWindow.h
   rl/trunk/engine/ui/include/CeGuiWindow.h
   rl/trunk/engine/ui/include/CharacterSheetWindow.h
   rl/trunk/engine/ui/include/CharacterStateWindow.h
   rl/trunk/engine/ui/include/CommandMapper.h
   rl/trunk/engine/ui/include/CommandMapperWindow.h
   rl/trunk/engine/ui/include/DebugWindow.h
   rl/trunk/engine/ui/include/DialogWindow.h
   rl/trunk/engine/ui/include/InfoPopup.h
   rl/trunk/engine/ui/include/InputManager.h
   rl/trunk/engine/ui/include/InventoryWindow.h
   rl/trunk/engine/ui/include/JournalWindow.h
   rl/trunk/engine/ui/src/ActionChoiceWindow.cpp
   rl/trunk/engine/ui/src/CeGuiWindow.cpp
   rl/trunk/engine/ui/src/CharacterSheetWindow.cpp
   rl/trunk/engine/ui/src/CharacterStateWindow.cpp
   rl/trunk/engine/ui/src/CommandMapper.cpp
   rl/trunk/engine/ui/src/CommandMapperWindow.cpp
   rl/trunk/engine/ui/src/Console.cpp
   rl/trunk/engine/ui/src/DebugWindow.cpp
   rl/trunk/engine/ui/src/DialogWindow.cpp
   rl/trunk/engine/ui/src/InfoPopup.cpp
   rl/trunk/engine/ui/src/InputManager.cpp
   rl/trunk/engine/ui/src/InventoryWindow.cpp
   rl/trunk/engine/ui/src/JournalWindow.cpp
   rl/trunk/engine/ui/src/PlaylistWindow.cpp
   rl/trunk/engine/ui/src/UiSubsystem.cpp
   rl/trunk/engine/ui/src/WindowFactory.cpp
   rl/trunk/engine/ui/src/WindowUpdater.cpp
   rl/trunk/engine/uicomponents/RlUIComponents2005.vcproj
   rl/trunk/engine/uicomponents/src/ListboxWrappedTextItem.cpp
   rl/trunk/plugins/fmod4driver/RlFmod4Driver.vcproj
   rl/trunk/plugins/openaldriver/RlOpenALDriver.vcproj
   rl/trunk/tools/copy_dependencies.bat
Log:
Necessary changes for Eihort and Cegui 0.5
You now need a recent Eihort CVS checkout and cegui0.5 for RL to run.

Modified: rl/trunk/Rastullah2005.sln
===================================================================
--- rl/trunk/Rastullah2005.sln	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/Rastullah2005.sln	2007-01-08 20:06:52 UTC (rev 2949)
@@ -54,13 +54,6 @@
 EndProject
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlUIComponents&quot;, &quot;engine\uicomponents\RlUIComponents2005.vcproj&quot;, &quot;{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}&quot;
 EndProject
-Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlFmod3Driver&quot;, &quot;plugins\fmod3driver\RlFmod3Driver.vcproj&quot;, &quot;{CA8B2801-7638-48E7-AE8D-5DAB955EAF84}&quot;
-	ProjectSection(ProjectDependencies) = postProject
-		{0935F495-4540-40E3-AC8F-AA54C85DC5B2} = {0935F495-4540-40E3-AC8F-AA54C85DC5B2}
-		{D3185FC6-9384-431A-A237-80284F859B21} = {D3185FC6-9384-431A-A237-80284F859B21}
-		{53FE20F3-E726-44FE-BBEC-D29CAE210D25} = {53FE20F3-E726-44FE-BBEC-D29CAE210D25}
-	EndProjectSection
-EndProject
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlAI&quot;, &quot;engine\ai\RlAI2005.vcproj&quot;, &quot;{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}&quot;
 	ProjectSection(ProjectDependencies) = postProject
 		{0935F495-4540-40E3-AC8F-AA54C85DC5B2} = {0935F495-4540-40E3-AC8F-AA54C85DC5B2}
@@ -85,82 +78,76 @@
 Global
 	GlobalSection(SolutionConfigurationPlatforms) = preSolution
 		Debug|Win32 = Debug|Win32
-		Profile|Win32 = Profile|Win32
 		Release|Win32 = Release|Win32
+		ReleaseWithSymbols|Win32 = ReleaseWithSymbols|Win32
 	EndGlobalSection
 	GlobalSection(ProjectConfigurationPlatforms) = postSolution
 		{D3185FC6-9384-431A-A237-80284F859B21}.Debug|Win32.ActiveCfg = Debug|Win32
 		{D3185FC6-9384-431A-A237-80284F859B21}.Debug|Win32.Build.0 = Debug|Win32
-		{D3185FC6-9384-431A-A237-80284F859B21}.Profile|Win32.ActiveCfg = Release|Win32
-		{D3185FC6-9384-431A-A237-80284F859B21}.Profile|Win32.Build.0 = Release|Win32
 		{D3185FC6-9384-431A-A237-80284F859B21}.Release|Win32.ActiveCfg = Release|Win32
 		{D3185FC6-9384-431A-A237-80284F859B21}.Release|Win32.Build.0 = Release|Win32
+		{D3185FC6-9384-431A-A237-80284F859B21}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{D3185FC6-9384-431A-A237-80284F859B21}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{0935F495-4540-40E3-AC8F-AA54C85DC5B2}.Debug|Win32.ActiveCfg = Debug|Win32
 		{0935F495-4540-40E3-AC8F-AA54C85DC5B2}.Debug|Win32.Build.0 = Debug|Win32
-		{0935F495-4540-40E3-AC8F-AA54C85DC5B2}.Profile|Win32.ActiveCfg = Release|Win32
-		{0935F495-4540-40E3-AC8F-AA54C85DC5B2}.Profile|Win32.Build.0 = Release|Win32
 		{0935F495-4540-40E3-AC8F-AA54C85DC5B2}.Release|Win32.ActiveCfg = Release|Win32
 		{0935F495-4540-40E3-AC8F-AA54C85DC5B2}.Release|Win32.Build.0 = Release|Win32
+		{0935F495-4540-40E3-AC8F-AA54C85DC5B2}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{0935F495-4540-40E3-AC8F-AA54C85DC5B2}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{6361481B-A6D5-4BC2-826C-C26A49C631A8}.Debug|Win32.ActiveCfg = Debug|Win32
 		{6361481B-A6D5-4BC2-826C-C26A49C631A8}.Debug|Win32.Build.0 = Debug|Win32
-		{6361481B-A6D5-4BC2-826C-C26A49C631A8}.Profile|Win32.ActiveCfg = Release|Win32
-		{6361481B-A6D5-4BC2-826C-C26A49C631A8}.Profile|Win32.Build.0 = Release|Win32
 		{6361481B-A6D5-4BC2-826C-C26A49C631A8}.Release|Win32.ActiveCfg = Release|Win32
 		{6361481B-A6D5-4BC2-826C-C26A49C631A8}.Release|Win32.Build.0 = Release|Win32
+		{6361481B-A6D5-4BC2-826C-C26A49C631A8}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{6361481B-A6D5-4BC2-826C-C26A49C631A8}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}.Debug|Win32.ActiveCfg = Debug|Win32
 		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}.Debug|Win32.Build.0 = Debug|Win32
-		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}.Profile|Win32.ActiveCfg = Release|Win32
-		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}.Profile|Win32.Build.0 = Release|Win32
 		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}.Release|Win32.ActiveCfg = Release|Win32
 		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}.Release|Win32.Build.0 = Release|Win32
+		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{9A41EAE4-302A-4823-8F20-FA1AD58189A1}.Debug|Win32.ActiveCfg = Debug|Win32
 		{9A41EAE4-302A-4823-8F20-FA1AD58189A1}.Debug|Win32.Build.0 = Debug|Win32
-		{9A41EAE4-302A-4823-8F20-FA1AD58189A1}.Profile|Win32.ActiveCfg = Release|Win32
-		{9A41EAE4-302A-4823-8F20-FA1AD58189A1}.Profile|Win32.Build.0 = Release|Win32
 		{9A41EAE4-302A-4823-8F20-FA1AD58189A1}.Release|Win32.ActiveCfg = Release|Win32
 		{9A41EAE4-302A-4823-8F20-FA1AD58189A1}.Release|Win32.Build.0 = Release|Win32
+		{9A41EAE4-302A-4823-8F20-FA1AD58189A1}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{9A41EAE4-302A-4823-8F20-FA1AD58189A1}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{B78AEF70-E618-4E9D-BD67-E17995ECF714}.Debug|Win32.ActiveCfg = Debug|Win32
 		{B78AEF70-E618-4E9D-BD67-E17995ECF714}.Debug|Win32.Build.0 = Debug|Win32
-		{B78AEF70-E618-4E9D-BD67-E17995ECF714}.Profile|Win32.ActiveCfg = Release|Win32
-		{B78AEF70-E618-4E9D-BD67-E17995ECF714}.Profile|Win32.Build.0 = Release|Win32
 		{B78AEF70-E618-4E9D-BD67-E17995ECF714}.Release|Win32.ActiveCfg = Release|Win32
 		{B78AEF70-E618-4E9D-BD67-E17995ECF714}.Release|Win32.Build.0 = Release|Win32
+		{B78AEF70-E618-4E9D-BD67-E17995ECF714}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{B78AEF70-E618-4E9D-BD67-E17995ECF714}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.Debug|Win32.ActiveCfg = Debug|Win32
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.Debug|Win32.Build.0 = Debug|Win32
-		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.Profile|Win32.ActiveCfg = Release|Win32
-		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.Profile|Win32.Build.0 = Release|Win32
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.Release|Win32.ActiveCfg = Release|Win32
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.Release|Win32.Build.0 = Release|Win32
+		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{53FE20F3-E726-44FE-BBEC-D29CAE210D25}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.Debug|Win32.ActiveCfg = Debug|Win32
 		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.Debug|Win32.Build.0 = Debug|Win32
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.Profile|Win32.ActiveCfg = Release|Win32
-		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.Profile|Win32.Build.0 = Release|Win32
 		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.Release|Win32.ActiveCfg = Release|Win32
 		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.Release|Win32.Build.0 = Release|Win32
-		{CA8B2801-7638-48E7-AE8D-5DAB955EAF84}.Debug|Win32.ActiveCfg = Debug|Win32
-		{CA8B2801-7638-48E7-AE8D-5DAB955EAF84}.Debug|Win32.Build.0 = Debug|Win32
-		{CA8B2801-7638-48E7-AE8D-5DAB955EAF84}.Profile|Win32.ActiveCfg = Release|Win32
-		{CA8B2801-7638-48E7-AE8D-5DAB955EAF84}.Profile|Win32.Build.0 = Release|Win32
-		{CA8B2801-7638-48E7-AE8D-5DAB955EAF84}.Release|Win32.ActiveCfg = Release|Win32
-		{CA8B2801-7638-48E7-AE8D-5DAB955EAF84}.Release|Win32.Build.0 = Release|Win32
+		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{ED15F1B3-8B3B-40D1-8F56-5399B2E5E851}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.Debug|Win32.ActiveCfg = Debug|Win32
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.Debug|Win32.Build.0 = Debug|Win32
-		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.Profile|Win32.ActiveCfg = Release|Win32
-		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.Profile|Win32.Build.0 = Release|Win32
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.Release|Win32.ActiveCfg = Release|Win32
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.Release|Win32.Build.0 = Release|Win32
+		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.Debug|Win32.ActiveCfg = Debug|Win32
 		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.Debug|Win32.Build.0 = Debug|Win32
-		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.Profile|Win32.ActiveCfg = Release|Win32
-		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.Profile|Win32.Build.0 = Release|Win32
 		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.Release|Win32.ActiveCfg = Release|Win32
 		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.Release|Win32.Build.0 = Release|Win32
+		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 		{173A345C-D7B1-46F9-974F-53661D7C8AF6}.Debug|Win32.ActiveCfg = Debug|Win32
 		{173A345C-D7B1-46F9-974F-53661D7C8AF6}.Debug|Win32.Build.0 = Debug|Win32
-		{173A345C-D7B1-46F9-974F-53661D7C8AF6}.Profile|Win32.ActiveCfg = Release|Win32
-		{173A345C-D7B1-46F9-974F-53661D7C8AF6}.Profile|Win32.Build.0 = Release|Win32
 		{173A345C-D7B1-46F9-974F-53661D7C8AF6}.Release|Win32.ActiveCfg = Release|Win32
 		{173A345C-D7B1-46F9-974F-53661D7C8AF6}.Release|Win32.Build.0 = Release|Win32
+		{173A345C-D7B1-46F9-974F-53661D7C8AF6}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
+		{173A345C-D7B1-46F9-974F-53661D7C8AF6}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 	EndGlobalSection
 	GlobalSection(SolutionProperties) = preSolution
 		HideSolutionNode = FALSE

Modified: rl/trunk/engine/ai/RlAI2005.vcproj
===================================================================
--- rl/trunk/engine/ai/RlAI2005.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ai/RlAI2005.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -161,6 +161,90 @@
 				OutputFile=&quot;$(OutDir)/RlAI.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\dialog\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\dll&quot;
+				GenerateDebugInformation=&quot;false&quot;
+				SubSystem=&quot;2&quot;
+				OptimizeReferences=&quot;2&quot;
+				EnableCOMDATFolding=&quot;2&quot;
+				ImportLibrary=&quot;$(OutDir)/RlAI.lib&quot;
+				TargetMachine=&quot;1&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+				Description=&quot;Kopiere DLL&quot;
+				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
+			/&gt;
+		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./lib/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;2&quot;
+			CharacterSet=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				Optimization=&quot;3&quot;
+				EnableIntrinsicFunctions=&quot;true&quot;
+				FavorSizeOrSpeed=&quot;1&quot;
+				AdditionalIncludeDirectories=&quot;.\include;..\common\include;..\core\include;..\rules\include;..\dialog\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\inc;..\..\dependencies\cegui_mk2\include;..\..\dependencies\opensteer\include;..\..\dependencies\boost\include;..\..\dependencies\NewtonSDK\sdk\&quot;
+				PreprocessorDefinitions=&quot;WITH_FMOD3;WIN32;NDEBUG;_WINDOWS;_USRDLL;RLAI_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
+				RuntimeLibrary=&quot;2&quot;
+				UsePrecompiledHeader=&quot;0&quot;
+				WarningLevel=&quot;3&quot;
+				Detect64BitPortabilityProblems=&quot;true&quot;
+				DebugInformationFormat=&quot;3&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				AdditionalDependencies=&quot;OgreMain.lib OgreNewt.lib CEGUIBase.lib opensteer.lib RlCommon.lib RlCore.lib RlRules.lib RlDialog.lib boost_thread-vc80-mt-1_33.lib Newton.lib&quot;
+				OutputFile=&quot;$(OutDir)/RlAI.dll&quot;
+				LinkIncremental=&quot;1&quot;
+				AdditionalLibraryDirectories=&quot;..\common\lib\Release;..\core\lib\Release;..\rules\lib\Release;..\dialog\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\ogrenewt\lib\Release;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\dll&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				SubSystem=&quot;2&quot;
 				OptimizeReferences=&quot;2&quot;

Modified: rl/trunk/engine/common/RlCommon2005.vcproj
===================================================================
--- rl/trunk/engine/common/RlCommon2005.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/common/RlCommon2005.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -191,6 +191,90 @@
 				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
 			/&gt;
 		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./lib/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;2&quot;
+			CharacterSet=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				AdditionalIncludeDirectories=&quot;.\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\boost\include&quot;
+				PreprocessorDefinitions=&quot;WITH_FMOD3;WIN32;NDEBUG;_WINDOWS;_USRDLL;RLCOMMON_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
+				RuntimeLibrary=&quot;2&quot;
+				UsePrecompiledHeader=&quot;0&quot;
+				AssemblerListingLocation=&quot;.\obj\$(ConfigurationName)/&quot;
+				ObjectFile=&quot;.\obj\$(ConfigurationName)/&quot;
+				GenerateXMLDocumentationFiles=&quot;false&quot;
+				WarningLevel=&quot;3&quot;
+				Detect64BitPortabilityProblems=&quot;true&quot;
+				DebugInformationFormat=&quot;3&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				AdditionalDependencies=&quot;OgreMain.lib xerces-c_2.lib CEGUIBase.lib boost_thread-vc80-mt-1_33.lib&quot;
+				OutputFile=&quot;./lib/$(ConfigurationName)/RlCommon.dll&quot;
+				LinkIncremental=&quot;1&quot;
+				AdditionalLibraryDirectories=&quot;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\cegui_mk2\lib\$(PlatformName)\Release&quot;;..\..\dependencies\cegui_mk2\lib\;..\..\dependencies\boost\lib&quot;
+				GenerateDebugInformation=&quot;true&quot;
+				SubSystem=&quot;2&quot;
+				OptimizeReferences=&quot;2&quot;
+				EnableCOMDATFolding=&quot;2&quot;
+				ImportLibrary=&quot;$(OutDir)/RlCommon.lib&quot;
+				TargetMachine=&quot;1&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+				Description=&quot;Kopiere DLL&quot;
+				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
+			/&gt;
+		&lt;/Configuration&gt;
 	&lt;/Configurations&gt;
 	&lt;References&gt;
 	&lt;/References&gt;

Modified: rl/trunk/engine/common/include/FixRubyHeaders.h
===================================================================
--- rl/trunk/engine/common/include/FixRubyHeaders.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/common/include/FixRubyHeaders.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -30,3 +30,5 @@
 #undef sleep
 #undef strcasecmp
 #undef rename
+#undef fd_set
+#undef u_long
\ No newline at end of file

Modified: rl/trunk/engine/common/src/XmlResource.cpp
===================================================================
--- rl/trunk/engine/common/src/XmlResource.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/common/src/XmlResource.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -69,7 +69,7 @@
  */
 bool XmlResource::parseBy(XERCES_CPP_NAMESPACE::XercesDOMParser* parser, bool useErrorHandler)
 {
-	if (!mIsLoaded)
+	if (!isLoaded())
 		load();
     if(useErrorHandler &amp;&amp; parser-&gt;getErrorHandler() == NULL)
     {
@@ -86,7 +86,7 @@
 
 bool XmlResource::parseBy(XERCES_CPP_NAMESPACE::SAX2XMLReader* parser, bool useErrorHandler)
 {
-	if (!mIsLoaded)
+	if (!isLoaded())
 		load();
     if(useErrorHandler &amp;&amp; parser-&gt;getErrorHandler() == NULL)
     {

Modified: rl/trunk/engine/core/RlCore2005.vcproj
===================================================================
--- rl/trunk/engine/core/RlCore2005.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/core/RlCore2005.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -47,7 +47,7 @@
 			&lt;Tool
 				Name=&quot;VCCLCompilerTool&quot;
 				Optimization=&quot;0&quot;
-				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\inc;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include&quot;
+				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\include\OgreNewt;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include&quot;
 				PreprocessorDefinitions=&quot;WITH_FMOD3;_WINDOWS,_DEBUG,WIN32,RLCORE_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
 				MinimalRebuild=&quot;true&quot;
 				BasicRuntimeChecks=&quot;3&quot;
@@ -159,7 +159,7 @@
 				Optimization=&quot;3&quot;
 				EnableIntrinsicFunctions=&quot;true&quot;
 				FavorSizeOrSpeed=&quot;1&quot;
-				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\inc;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include&quot;
+				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\include\OgreNewt;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include&quot;
 				PreprocessorDefinitions=&quot;WITH_FMOD3;NDEBUG,_WINDOWS,WIN32,RLCORE_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
 				StringPooling=&quot;false&quot;
 				ExceptionHandling=&quot;1&quot;
@@ -230,6 +230,112 @@
 				ExcludedFromBuild=&quot;false&quot;
 			/&gt;
 		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./lib/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;2&quot;
+			UseOfMFC=&quot;0&quot;
+			ATLMinimizesCRunTimeLibraryUsage=&quot;false&quot;
+			CharacterSet=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+				PreprocessorDefinitions=&quot;NDEBUG&quot;
+				MkTypLibCompatible=&quot;true&quot;
+				SuppressStartupBanner=&quot;true&quot;
+				TargetEnvironment=&quot;1&quot;
+				TypeLibraryName=&quot;.\lib\Release/Rastullah.tlb&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				Optimization=&quot;3&quot;
+				EnableIntrinsicFunctions=&quot;true&quot;
+				FavorSizeOrSpeed=&quot;1&quot;
+				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\include\OgreNewt;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include&quot;
+				PreprocessorDefinitions=&quot;WITH_FMOD3;NDEBUG,_WINDOWS,WIN32,RLCORE_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
+				StringPooling=&quot;false&quot;
+				ExceptionHandling=&quot;1&quot;
+				RuntimeLibrary=&quot;2&quot;
+				BufferSecurityCheck=&quot;false&quot;
+				RuntimeTypeInfo=&quot;true&quot;
+				UsePrecompiledHeader=&quot;0&quot;
+				PrecompiledHeaderFile=&quot;.\obj\Release/Rastullah.pch&quot;
+				ExpandAttributedSource=&quot;false&quot;
+				AssemblerOutput=&quot;0&quot;
+				AssemblerListingLocation=&quot;.\obj\$(ConfigurationName)/&quot;
+				ObjectFile=&quot;.\obj\$(ConfigurationName)/&quot;
+				ProgramDataBaseFileName=&quot;$(IntDir)\vc80.pdb&quot;
+				WarningLevel=&quot;3&quot;
+				SuppressStartupBanner=&quot;true&quot;
+				DebugInformationFormat=&quot;3&quot;
+				CompileAs=&quot;2&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+				PreprocessorDefinitions=&quot;NDEBUG&quot;
+				Culture=&quot;2057&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				IgnoreImportLibrary=&quot;true&quot;
+				AdditionalOptions=&quot;/MACHINE:I386&quot;
+				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt.lib xerces-c_2.lib CEGUIBase.lib OgreMain.lib Newton.lib&quot;
+				OutputFile=&quot;$(OutDir)/RlCore.dll&quot;
+				LinkIncremental=&quot;1&quot;
+				SuppressStartupBanner=&quot;true&quot;
+				AdditionalLibraryDirectories=&quot;..\common\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib\Release;..\..\dependencies\NewtonSDK\sdk\dll&quot;
+				TypeLibraryFile=&quot;$(OutDir)\RlCore.lib&quot;
+				GenerateDebugInformation=&quot;true&quot;
+				ProgramDatabaseFile=&quot;$(TargetDir)$(TargetName).pdb&quot;
+				SubSystem=&quot;2&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+				Description=&quot;Kopiere DLL&quot;
+				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
+				ExcludedFromBuild=&quot;false&quot;
+			/&gt;
+		&lt;/Configuration&gt;
 	&lt;/Configurations&gt;
 	&lt;References&gt;
 	&lt;/References&gt;

Modified: rl/trunk/engine/core/include/CoreSubsystem.h
===================================================================
--- rl/trunk/engine/core/include/CoreSubsystem.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/core/include/CoreSubsystem.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -145,13 +145,6 @@
 	void loadPlugins();
     void unloadPlugins();
 
-    /**
-     * Texturen werden nicht gefunden, wenn sie erst bei Materialnutzung erzeugt werden
-     * und nicht in der Gruppe des Materials sind. Deshalb hier vorerstellen.
-     * @XXX Das ist mehr oder weniger ein Hack um eine Ogre-Einschr&#228;nkung herum.
-     */
-    void precreateTextures();
-
 	/**
 	 * Sammelt alle Default-Techniques, um sie sp&#228;ter bei jedem aktivierten Scheme 
 	 * benutzen zu k&#246;nnen

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -42,13 +42,6 @@
 
 #include &lt;ctime&gt;
 
-// gettimeofday for windows
-#include &lt;OgreNoMemoryMacros.h&gt;
-#include &quot;FixRubyHeaders.h&quot;
-#include &lt;ruby.h&gt;
-#include &quot;FixRubyHeaders.h&quot;
-#include &lt;OgreMemoryMacros.h&gt;
-
 using namespace Ogre;
 
 template&lt;&gt; rl::CoreSubsystem* Singleton&lt;rl::CoreSubsystem&gt;::ms_Singleton = 0;
@@ -292,33 +285,6 @@
         }
     }
 
-    void CoreSubsystem::precreateTextures()
-    {
-        // Falls Texturen noch nicht &#252;ber Materialien referenziert erzeugt wurden,
-        // hole das jetzt nach.
-        char* suffixes[] = {&quot;png&quot;, &quot;jpg&quot;, &quot;jpeg&quot;, &quot;tga&quot;, &quot;dds&quot;};
-        int suffix_count = 5;
-        vector&lt;String&gt; texes;
-        for (int i = 0; i &lt; suffix_count; ++i)
-        {
-            StringVectorPtr curTexes = ResourceGroupManager::getSingleton()
-                .findResourceNames(ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME,
-                String(&quot;*.&quot;) + suffixes[i]);
-            texes.insert(texes.end(), curTexes-&gt;begin(), curTexes-&gt;end());
-        }
-        for (size_t i = 0; i &lt; texes.size(); ++i)
-        {
-            ResourcePtr res = TextureManager::getSingleton().getByName(texes[i]);
-            if (res.isNull())
-            {
-                TexturePtr tex = TextureManager::getSingleton().create(texes[i],
-                    ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
-                tex-&gt;setNumMipmaps(TextureManager::getSingleton().getDefaultNumMipmaps());
-                tex-&gt;enable32Bit(true);
-            }
-        }
-    }
-
 	ContentModule* CoreSubsystem::getModule(const String&amp; moduleId) const
 	{
 		ModuleMap::const_iterator moduleIt = mModules.find(moduleId);
@@ -528,12 +494,9 @@
 
     RL_LONGLONG CoreSubsystem::getCurrentTime()
     {
-        timeval timebuffer;
-		
-        gettimeofday( &amp;timebuffer, NULL );
-
-        return static_cast&lt;RL_LONGLONG&gt;(timebuffer.tv_sec) * 1000L + 
-        	static_cast&lt;RL_LONGLONG&gt;(timebuffer.tv_usec / 1000);
+        std::time_t t = std::time(NULL);
+        std::tm* ts = std::localtime(&amp;t);
+        return static_cast&lt;RL_LONGLONG&gt;((ts-&gt;tm_hour * 3600 + ts-&gt;tm_min * 60 + ts-&gt;tm_sec) * 1000);
     }
 
 	void CoreSubsystem::addCoreEventListener(rl::CoreEventListener *listener)

Modified: rl/trunk/engine/core/src/DotSceneLoader.cpp
===================================================================
--- rl/trunk/engine/core/src/DotSceneLoader.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/core/src/DotSceneLoader.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -506,7 +506,7 @@
     // eine benutzerdefinierte Collision
     void DotSceneLoader::processCollisions(XERCES_CPP_NAMESPACE::DOMElement *rootCollisionXml)
     {
-        OgreNewt::CollisionPtr collision(NULL);
+        OgreNewt::CollisionPtr collision = OgreNewt::CollisionPtr();
         DOMNode* child = rootCollisionXml-&gt;getFirstChild();
         OgreNewt::World *thisWorld = PhysicsManager::getSingleton()._getNewtonWorld();
 
@@ -814,7 +814,7 @@
 
         // ------- Falls n&#246;tig automatisch bodyproxy erstellen -------------
         // (wenn physical_body gesetzt wurde)
-        OgreNewt::CollisionPtr collision(NULL);
+        OgreNewt::CollisionPtr collision = OgreNewt::CollisionPtr();
         OgreNewt::World *thisWorld = PhysicsManager::getSingleton()._getNewtonWorld();
 
         if (physical_body.compare(&quot;none&quot;) != 0)

Modified: rl/trunk/engine/core/src/MovableText.cpp
===================================================================
--- rl/trunk/engine/core/src/MovableText.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/core/src/MovableText.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -106,7 +106,7 @@
 
         RlAssert1(!mMaterial.isNull());
 
-        mMaterial-&gt;setDepthBias(!mOnTop);
+        mMaterial-&gt;setDepthBias(!mOnTop, !mOnTop);
         mMaterial-&gt;setDepthCheckEnabled(!mOnTop);
         mMaterial-&gt;setDepthWriteEnabled(mOnTop);
     }

Modified: rl/trunk/engine/core/src/SoundResource.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundResource.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/core/src/SoundResource.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -27,7 +27,7 @@
 SoundResource::SoundResource(ResourceManager* creator, const String&amp; name, ResourceHandle handle,
         const String&amp; group, bool isManual, ManualResourceLoader* loader):
     Resource(creator, name, handle, group, isManual, loader),
-    mDataStream(0)
+    mDataStream()
 {
 }
 
@@ -46,7 +46,7 @@
  */
 void SoundResource::loadImpl()
 {
-    if (!mIsLoaded)
+    if (!isLoaded())
     {
 		mDataStream = ResourceGroupManager::getSingleton().openResource(mName, mGroup);
     }
@@ -62,7 +62,6 @@
     {
         mDataStream.setNull();
     }
-    mIsLoaded = false;
 }
 
 /**

Modified: rl/trunk/engine/dialog/RlDialog2005.vcproj
===================================================================
--- rl/trunk/engine/dialog/RlDialog2005.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/dialog/RlDialog2005.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -160,6 +160,90 @@
 				OutputFile=&quot;$(OutDir)/RlDialog.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;&quot;..\..\dependencies\aiml\MadaBot\lib\$(ConfigurationName)&quot;&quot;
+				GenerateDebugInformation=&quot;false&quot;
+				SubSystem=&quot;2&quot;
+				OptimizeReferences=&quot;2&quot;
+				EnableCOMDATFolding=&quot;2&quot;
+				ImportLibrary=&quot;$(OutDir)/RlDialog.lib&quot;
+				TargetMachine=&quot;1&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+				Description=&quot;Kopiere DLL&quot;
+				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
+			/&gt;
+		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./lib/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;2&quot;
+			CharacterSet=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				Optimization=&quot;3&quot;
+				EnableIntrinsicFunctions=&quot;true&quot;
+				FavorSizeOrSpeed=&quot;1&quot;
+				AdditionalIncludeDirectories=&quot;.\include;.\include\predicates;..\common\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\xerces\include;..\..\dependencies\ogrenew\dependencies\include;..\..\dependencies\boost\include;..\..\dependencies\aiml\MadaBot\include;..\..\dependencies\aiml\dependencies;..\..\dependencies\ogrenewt\inc;..\..\dependencies\NewtonSDK\sdk&quot;
+				PreprocessorDefinitions=&quot;WITH_FMOD3;WIN32;NDEBUG;_WINDOWS;_USRDLL;RLDIALOG_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
+				RuntimeLibrary=&quot;2&quot;
+				UsePrecompiledHeader=&quot;0&quot;
+				WarningLevel=&quot;3&quot;
+				Detect64BitPortabilityProblems=&quot;true&quot;
+				DebugInformationFormat=&quot;3&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				AdditionalDependencies=&quot;OgreMain.lib xerces-c_2.lib RlCommon.lib RlCore.lib RlRules.lib CEGUIBase.lib MadaBot.lib&quot;
+				OutputFile=&quot;$(OutDir)/RlDialog.dll&quot;
+				LinkIncremental=&quot;1&quot;
+				AdditionalLibraryDirectories=&quot;..\common\lib\Release;..\core\lib\Release;..\rules\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\aiml\MadaBot\lib\Release&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				SubSystem=&quot;2&quot;
 				OptimizeReferences=&quot;2&quot;
@@ -276,6 +360,15 @@
 						/&gt;
 					&lt;/FileConfiguration&gt;
 					&lt;FileConfiguration
+						Name=&quot;Release with Symbols|Win32&quot;
+						&gt;
+						&lt;Tool
+							Name=&quot;VCCLCompilerTool&quot;
+							ObjectFile=&quot;$(IntDir)\$(InputName)1.obj&quot;
+							XMLDocumentationFileName=&quot;$(IntDir)\$(InputName)1.xdc&quot;
+						/&gt;
+					&lt;/FileConfiguration&gt;
+					&lt;FileConfiguration
 						Name=&quot;Profile|Win32&quot;
 						&gt;
 						&lt;Tool
@@ -331,6 +424,15 @@
 						/&gt;
 					&lt;/FileConfiguration&gt;
 					&lt;FileConfiguration
+						Name=&quot;Release with Symbols|Win32&quot;
+						&gt;
+						&lt;Tool
+							Name=&quot;VCCLCompilerTool&quot;
+							ObjectFile=&quot;$(IntDir)\$(InputName)1.obj&quot;
+							XMLDocumentationFileName=&quot;$(IntDir)\$(InputName)1.xdc&quot;
+						/&gt;
+					&lt;/FileConfiguration&gt;
+					&lt;FileConfiguration
 						Name=&quot;Profile|Win32&quot;
 						&gt;
 						&lt;Tool

Modified: rl/trunk/engine/rules/RlRules2005.vcproj
===================================================================
--- rl/trunk/engine/rules/RlRules2005.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/rules/RlRules2005.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -191,6 +191,90 @@
 				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
 			/&gt;
 		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./lib/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;2&quot;
+			CharacterSet=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				AdditionalIncludeDirectories=&quot;.\include;..\core\include;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\xerces\include;..\..\dependencies\boost\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\OgreNewt\inc;..\..\dependencies\NewtonSDK\sdk&quot;
+				PreprocessorDefinitions=&quot;WITH_FMOD3;WIN32;NDEBUG;_WINDOWS;RLRULES_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
+				RuntimeLibrary=&quot;2&quot;
+				RuntimeTypeInfo=&quot;true&quot;
+				UsePrecompiledHeader=&quot;0&quot;
+				AssemblerListingLocation=&quot;.\obj\Release/&quot;
+				ObjectFile=&quot;.\obj\Release/&quot;
+				WarningLevel=&quot;3&quot;
+				Detect64BitPortabilityProblems=&quot;true&quot;
+				DebugInformationFormat=&quot;3&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				AdditionalDependencies=&quot;msvcrt-ruby18.lib OgreMain.lib xerces-c_2.lib CEGUIBase.lib RlCore.lib OgreNewt.lib Newton.lib&quot;
+				OutputFile=&quot;$(OutDir)/RlRules.dll&quot;
+				LinkIncremental=&quot;1&quot;
+				AdditionalLibraryDirectories=&quot;..\core\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\OgreNewt\lib\Release;..\..\dependencies\NewtonSDK\sdk\dll&quot;
+				GenerateDebugInformation=&quot;true&quot;
+				SubSystem=&quot;2&quot;
+				OptimizeReferences=&quot;2&quot;
+				EnableCOMDATFolding=&quot;2&quot;
+				ImportLibrary=&quot;$(OutDir)/RlRules.lib&quot;
+				TargetMachine=&quot;1&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+				Description=&quot;Kopiere DLL&quot;
+				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
+			/&gt;
+		&lt;/Configuration&gt;
 	&lt;/Configurations&gt;
 	&lt;References&gt;
 	&lt;/References&gt;

Modified: rl/trunk/engine/rules/src/Creature.cpp
===================================================================
--- rl/trunk/engine/rules/src/Creature.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/rules/src/Creature.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -234,7 +234,7 @@
             oldLe &gt; getWert(WERT_KAMPFUNFAEHIGKEITSSCHWELLE))
 		{
             setIncapacitated(true);
-			MeshObject* mo = dynamic_cast&lt;MeshObject*&gt;(getActor()-&gt;getControlledObject());
+			MeshObject* mo = static_cast&lt;MeshObject*&gt;(getActor()-&gt;getControlledObject());
 			mo-&gt;stopAllAnimations();
             ///@todo Sturzanimation aufrufen, sobald sie verfuegbar ist.
 			//mo-&gt;startAnimation(&quot;Niederschlag/Sturz&quot;, 1.0f, 1);

Modified: rl/trunk/engine/script/RlScript2005.vcproj
===================================================================
--- rl/trunk/engine/script/RlScript2005.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/script/RlScript2005.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -152,6 +152,88 @@
 				OutputFile=&quot;$(OutDir)/RlScript.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				AdditionalLibraryDirectories=&quot;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\dialog\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib&quot;
+				GenerateDebugInformation=&quot;false&quot;
+				SubSystem=&quot;2&quot;
+				OptimizeReferences=&quot;2&quot;
+				EnableCOMDATFolding=&quot;2&quot;
+				ImportLibrary=&quot;$(OutDir)/RlScript.lib&quot;
+				TargetMachine=&quot;1&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+				Description=&quot;Kopiere DLL&quot;
+				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
+			/&gt;
+		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./lib/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;2&quot;
+			CharacterSet=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				AdditionalIncludeDirectories=&quot;.\include;..\common\include;..\core\include;..\dialog\include;..\rules\include;..\ai\include;..\ui\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\OgreNewt\inc;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\dependencies\include;..\..\dependencies\opensteer\include&quot;
+				PreprocessorDefinitions=&quot;WITH_FMOD3;WIN32;NDEBUG;_WINDOWS;_USRDLL;RLSCRIPT_EXPORTS;_CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES&quot;
+				RuntimeLibrary=&quot;2&quot;
+				RuntimeTypeInfo=&quot;true&quot;
+				UsePrecompiledHeader=&quot;0&quot;
+				WarningLevel=&quot;3&quot;
+				Detect64BitPortabilityProblems=&quot;false&quot;
+				DebugInformationFormat=&quot;3&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlAi.lib RlUi.lib RlRules.lib RlDialog.lib OgreMain.lib msvcrt-ruby18.lib CEGUIBase.lib&quot;
+				OutputFile=&quot;$(OutDir)/RlScript.dll&quot;
+				LinkIncremental=&quot;1&quot;
+				AdditionalLibraryDirectories=&quot;..\rules\lib\Release;..\core\lib\Release;..\dialog\lib\Release;..\ui\lib\Release;..\ai\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				SubSystem=&quot;2&quot;
 				OptimizeReferences=&quot;2&quot;
@@ -250,6 +332,17 @@
 						Outputs=&quot;&quot;$(InputDir)$(InputName)_wrap.cxx&quot;&quot;
 					/&gt;
 				&lt;/FileConfiguration&gt;
+				&lt;FileConfiguration
+					Name=&quot;Release with Symbols|Win32&quot;
+					&gt;
+					&lt;Tool
+						Name=&quot;VCCustomBuildTool&quot;
+						Description=&quot;[SWIG] RubyWrapper erzeugen.&quot;
+						CommandLine=&quot;cd &quot;$(InputDir)&quot;&amp;#x0D;&amp;#x0A;&quot;$(ProjectDir)..\..\dependencies\swig\swig.exe&quot; -o &quot;$(InputDir)$(InputName)_wrap.cxx&quot; -c++ -ruby -minherit -v -Wall  &quot;$(InputPath)&quot;&amp;#x0D;&amp;#x0A;&quot;
+						AdditionalDependencies=&quot;&quot;$(InputDir)TypeMaps.i&quot;;&quot;$(InputDir)RlCore.inc&quot;;&quot;$(InputDir)RlDialog.inc&quot;;&quot;$(InputDir)RlCommon.inc&quot;;&quot;$(InputDir)RlRules.inc&quot;;&quot;$(InputDir)RlScript.inc&quot;;&quot;$(InputDir)RlSound.inc&quot;;&quot;$(InputDir)RlUi.inc&quot;;&quot;$(InputDir)RlAi.inc&quot;&quot;
+						Outputs=&quot;&quot;$(InputDir)$(InputName)_wrap.cxx&quot;&quot;
+					/&gt;
+				&lt;/FileConfiguration&gt;
 			&lt;/File&gt;
 			&lt;File
 				RelativePath=&quot;.\swig\RlExports_wrap.cxx&quot;

Modified: rl/trunk/engine/startup/RlStartup2005.vcproj
===================================================================
--- rl/trunk/engine/startup/RlStartup2005.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/startup/RlStartup2005.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -157,6 +157,92 @@
 				OutputFile=&quot;$(OutDir)/Rastullah.exe&quot;
 				LinkIncremental=&quot;1&quot;
 				AdditionalLibraryDirectories=&quot;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\script\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\xerces\lib;..\..\dependencies\boost\lib&quot;
+				GenerateDebugInformation=&quot;false&quot;
+				SubSystem=&quot;2&quot;
+				OptimizeReferences=&quot;2&quot;
+				EnableCOMDATFolding=&quot;2&quot;
+				TargetMachine=&quot;1&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+				Description=&quot;Kopiere EXE&quot;
+				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
+			/&gt;
+		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./bin/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;1&quot;
+			CharacterSet=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				Optimization=&quot;2&quot;
+				InlineFunctionExpansion=&quot;1&quot;
+				OmitFramePointers=&quot;true&quot;
+				AdditionalIncludeDirectories=&quot;.\include;..\core\include;..\dialog\include;..\rules\include;..\ai\include;..\ui\include;..\common\include;..\script\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\cegui_mk2\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\xerces\include;..\..\dependencies\boost\include;..\..\dependencies\OgreNewt\inc;..\..\dependencies\NewtonSDK\sdk;..\..\dependencies\ogrenew\dependencies\include&quot;
+				PreprocessorDefinitions=&quot;WIN32;NDEBUG;_WINDOWS;_CRT_SECURE_NO_DEPRECATE&quot;
+				StringPooling=&quot;true&quot;
+				RuntimeLibrary=&quot;2&quot;
+				BufferSecurityCheck=&quot;false&quot;
+				EnableFunctionLevelLinking=&quot;false&quot;
+				UsePrecompiledHeader=&quot;0&quot;
+				WarningLevel=&quot;3&quot;
+				Detect64BitPortabilityProblems=&quot;false&quot;
+				DebugInformationFormat=&quot;3&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				AdditionalDependencies=&quot;OgreMain.lib RlCommon.lib RlCore.lib RlAi.lib RlUi.lib RlScript.lib CEGUIBase.lib Shell32.lib user32.lib&quot;
+				OutputFile=&quot;$(OutDir)/Rastullah.exe&quot;
+				LinkIncremental=&quot;1&quot;
+				AdditionalLibraryDirectories=&quot;..\rules\lib\Release;..\common\lib\Release;..\core\lib\Release;..\script\lib\Release;..\ai\lib\Release;..\ui\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\xerces\lib;..\..\dependencies\boost\lib&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				SubSystem=&quot;2&quot;
 				OptimizeReferences=&quot;2&quot;
@@ -235,6 +321,14 @@
 						Name=&quot;VCResourceCompilerTool&quot;
 					/&gt;
 				&lt;/FileConfiguration&gt;
+				&lt;FileConfiguration
+					Name=&quot;Release with Symbols|Win32&quot;
+					ExcludedFromBuild=&quot;true&quot;
+					&gt;
+					&lt;Tool
+						Name=&quot;VCResourceCompilerTool&quot;
+					/&gt;
+				&lt;/FileConfiguration&gt;
 			&lt;/File&gt;
 		&lt;/Filter&gt;
 	&lt;/Files&gt;

Modified: rl/trunk/engine/startup/src/RastullahMain.cpp
===================================================================
--- rl/trunk/engine/startup/src/RastullahMain.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/startup/src/RastullahMain.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -36,6 +36,7 @@
 #if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
 	#define WIN32_LEAN_AND_MEAN
 	#include &lt;windows.h&gt;
+    #include &lt;shellapi.h&gt;
 #endif
 
 void startupRl(bool developerMode, Ogre::String module)

Modified: rl/trunk/engine/ui/RlUI2005.vcproj
===================================================================
--- rl/trunk/engine/ui/RlUI2005.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/RlUI2005.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -47,7 +47,7 @@
 			&lt;Tool
 				Name=&quot;VCCLCompilerTool&quot;
 				Optimization=&quot;0&quot;
-				AdditionalIncludeDirectories=&quot;.\include;..\uicomponents\include;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\inc;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\ois\includes&quot;
+				AdditionalIncludeDirectories=&quot;.\include;..\uicomponents\include;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\include\OgreNewt;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\ois\includes&quot;
 				PreprocessorDefinitions=&quot;WITH_FMOD3;_WINDOWS,_DEBUG,WIN32,RLUI_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
 				MinimalRebuild=&quot;true&quot;
 				BasicRuntimeChecks=&quot;3&quot;
@@ -158,7 +158,7 @@
 				Optimization=&quot;3&quot;
 				EnableIntrinsicFunctions=&quot;true&quot;
 				FavorSizeOrSpeed=&quot;1&quot;
-				AdditionalIncludeDirectories=&quot;.\include;..\uicomponents\include;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\inc;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\ois\includes&quot;
+				AdditionalIncludeDirectories=&quot;.\include;..\uicomponents\include;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\include\OgreNewt;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\ois\includes&quot;
 				PreprocessorDefinitions=&quot;WITH_FMOD3;NDEBUG,_WINDOWS,WIN32,RLUI_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
 				StringPooling=&quot;false&quot;
 				ExceptionHandling=&quot;1&quot;
@@ -226,6 +226,109 @@
 				ExcludedFromBuild=&quot;false&quot;
 			/&gt;
 		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./lib/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;2&quot;
+			UseOfMFC=&quot;0&quot;
+			ATLMinimizesCRunTimeLibraryUsage=&quot;false&quot;
+			CharacterSet=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+				PreprocessorDefinitions=&quot;NDEBUG&quot;
+				MkTypLibCompatible=&quot;true&quot;
+				SuppressStartupBanner=&quot;true&quot;
+				TargetEnvironment=&quot;1&quot;
+				TypeLibraryName=&quot;.\lib\Release/Rastullah.tlb&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				Optimization=&quot;3&quot;
+				EnableIntrinsicFunctions=&quot;true&quot;
+				FavorSizeOrSpeed=&quot;1&quot;
+				AdditionalIncludeDirectories=&quot;.\include;..\uicomponents\include;..\common\include;..\dialog\include;..\core\include;..\rules\include;..\..\dependencies\ogrenew\OgreMain\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\cegui_mk2\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\fmod\api\inc;..\..\dependencies\OgreNewt\include\OgreNewt;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\include;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\ois\includes&quot;
+				PreprocessorDefinitions=&quot;WITH_FMOD3;NDEBUG,_WINDOWS,WIN32,RLUI_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
+				StringPooling=&quot;false&quot;
+				ExceptionHandling=&quot;1&quot;
+				RuntimeLibrary=&quot;2&quot;
+				BufferSecurityCheck=&quot;false&quot;
+				RuntimeTypeInfo=&quot;true&quot;
+				UsePrecompiledHeader=&quot;0&quot;
+				PrecompiledHeaderFile=&quot;.\obj\Release/Rastullah.pch&quot;
+				AssemblerListingLocation=&quot;.\obj\Release/&quot;
+				ObjectFile=&quot;.\obj\Release/&quot;
+				ProgramDataBaseFileName=&quot;.\obj\Release/&quot;
+				WarningLevel=&quot;3&quot;
+				SuppressStartupBanner=&quot;true&quot;
+				DebugInformationFormat=&quot;3&quot;
+				CompileAs=&quot;2&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+				PreprocessorDefinitions=&quot;NDEBUG&quot;
+				Culture=&quot;2057&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				IgnoreImportLibrary=&quot;true&quot;
+				AdditionalOptions=&quot;/MACHINE:I386&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlRules.lib RlUiComponents.lib msvcrt-ruby18.lib OgreMain.lib OgreGuiRenderer.lib CEGUIBase.lib xerces-c_2.lib OgreNewt.lib Newton.lib OIS.lib&quot;
+				OutputFile=&quot;$(OutDir)/RlUI.dll&quot;
+				LinkIncremental=&quot;1&quot;
+				SuppressStartupBanner=&quot;true&quot;
+				AdditionalLibraryDirectories=&quot;..\core\lib\Release;..\rules\lib\Release;..\uicomponents\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib\Release;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\ois\dll&quot;
+				GenerateDebugInformation=&quot;true&quot;
+				ProgramDatabaseFile=&quot;$(TargetDir)$(TargetName).pdb&quot;
+				SubSystem=&quot;2&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+				Description=&quot;Kopiere DLL&quot;
+				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
+				ExcludedFromBuild=&quot;false&quot;
+			/&gt;
+		&lt;/Configuration&gt;
 	&lt;/Configurations&gt;
 	&lt;References&gt;
 	&lt;/References&gt;
@@ -235,6 +338,10 @@
 			Filter=&quot;h;hpp;hxx;hm;inl&quot;
 			&gt;
 			&lt;File
+				RelativePath=&quot;.\include\CeGuiHelper.h&quot;
+				&gt;
+			&lt;/File&gt;
+			&lt;File
 				RelativePath=&quot;.\include\CharacterController.h&quot;
 				&gt;
 			&lt;/File&gt;
@@ -400,10 +507,6 @@
 			Filter=&quot;cpp;c;cxx;rc;def;r;odl;idl;hpj;bat&quot;
 			&gt;
 			&lt;File
-				RelativePath=&quot;.\src\CeGuiWindow.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\src\CharacterController.cpp&quot;
 				&gt;
 			&lt;/File&gt;
@@ -467,6 +570,10 @@
 					&gt;
 				&lt;/File&gt;
 				&lt;File
+					RelativePath=&quot;.\src\CeGuiWindow.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
 					RelativePath=&quot;.\src\CharacterSheetWindow.cpp&quot;
 					&gt;
 				&lt;/File&gt;

Modified: rl/trunk/engine/ui/include/ActionChoiceWindow.h
===================================================================
--- rl/trunk/engine/ui/include/ActionChoiceWindow.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/ActionChoiceWindow.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -63,22 +63,22 @@
 
         typedef std::set&lt;ActionNode*,actnodecmp&gt; NodeSet;
 	
-		static CEGUI::Point 
+		static CEGUI::UVector2 
 			getPositionOnCircle(
-				const CEGUI::Point&amp; center, 
+				const CEGUI::UVector2&amp; center, 
 				float radius, 
 				float angle);
 
 		void createButtons(
 			ActionNode* actions, 
-			const CEGUI::Point&amp; center, 
+			const CEGUI::UVector2&amp; center, 
 			float radius, 
 			float minAngle, 
 			float maxAngle);
 
 		CEGUI::PushButton* createButton(
 			const CeGuiString&amp; name,
-			const CEGUI::Point&amp; pos);
+			const CEGUI::UVector2&amp; pos);
 			
 		bool handleMouseClickNoButton(const CEGUI::EventArgs&amp; evt);
 		void setButtonActions(ActionNode* actions, ActionNode* treeRoot);
@@ -89,7 +89,7 @@
 		std::vector&lt;CEGUI::PushButton*&gt; mButtons;
 		CEGUI::PushButton* mButtonCancel;
 		CEGUI::Window* mButtonArea;
-		CEGUI::StaticText* mHint;
+		CEGUI::Window* mHint;
 
 		Person* mActor;		
 		

Added: rl/trunk/engine/ui/include/CeGuiHelper.h
===================================================================
--- rl/trunk/engine/ui/include/CeGuiHelper.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/CeGuiHelper.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -0,0 +1,38 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2005 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
+ */
+
+#ifndef __RL_CEGUI_HELPER_H__
+#define __RL_CEGUI_HELPER_H__
+
+#include &quot;UiPrerequisites.h&quot;
+namespace rl
+{
+    class CeGuiHelper
+    {
+    public:
+        static CEGUI::UVector2 asAbsolute(const CEGUI::Vector2&amp; position)
+        {
+            return CEGUI::UVector2(CEGUI::UDim(0, position.d_x), CEGUI::UDim(0, position.d_y));
+        }
+
+        static CEGUI::UVector2 asRelative(const CEGUI::Vector2&amp; position)
+        {
+            return CEGUI::UVector2(CEGUI::UDim(position.d_x, 0), CEGUI::UDim(position.d_y, 0));
+        }
+    };
+}
+
+#endif

Modified: rl/trunk/engine/ui/include/CeGuiWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CeGuiWindow.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/CeGuiWindow.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -45,19 +45,17 @@
 		CEGUI::Window* getWindow(const char* name, const char* requiredClass = NULL);
 		CEGUI::Editbox* getEditbox(const char* name);
 		CEGUI::Listbox* getListbox(const char* name);
-		CEGUI::StaticText* getStaticText(const char* name);
-		CEGUI::StaticImage* getStaticImage(const char* name);
 		CEGUI::MultiColumnList* getMultiColumnList(const char* name);
 		CEGUI::MultiLineEditbox* getMultiLineEditbox(const char* name);
-		CEGUI::TabPane* getTabPane(const char* name);
-		CEGUI::TabControl* getTabControl(const char* name);
 		CEGUI::ProgressBar* getProgressBar(const char* name);
 		CEGUI::MenuBase* getMenu(const char* name);
 		CEGUI::MenuItem* getMenuItem(const char* name);
 		CEGUI::PushButton* getPushButton(const char* name);
 		CEGUI::Combobox* getCombobox(const char* name);
 		CEGUI::ComboDropList* getComboDropList(const char* name);
+        CEGUI::ScrollablePane* getScrollablePane(const char* name);
 		CEGUI::Slider* getSlider(const char* name);
+		CEGUI::TabControl* getTabControl(const char* name);
 
 		static CEGUI::Window* loadWindow(const CeGuiString&amp; xmlfile);
 		static CEGUI::Window* getRoot();

Modified: rl/trunk/engine/ui/include/CharacterSheetWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CharacterSheetWindow.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/CharacterSheetWindow.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -52,13 +52,13 @@
 		CEGUI::Window* mMagicSheet;
 		CEGUI::MultiColumnList* mTalentTable;
 		
-		CEGUI::StaticText* mEigenschaft[EIGENSCHAFT_COUNT];
-		CEGUI::StaticText* mLE;
-		CEGUI::StaticText* mAE;
-		CEGUI::StaticText* mAP;
-		CEGUI::StaticText* mName;
-		CEGUI::StaticText* mRasse;
-		CEGUI::StaticText* mProfession;
+		CEGUI::Window* mEigenschaft[EIGENSCHAFT_COUNT];
+		CEGUI::Window* mLE;
+		CEGUI::Window* mAE;
+		CEGUI::Window* mAP;
+		CEGUI::Window* mName;
+		CEGUI::Window* mRasse;
+		CEGUI::Window* mProfession;
 		
 		void updateTalents();
 

Modified: rl/trunk/engine/ui/include/CharacterStateWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CharacterStateWindow.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/CharacterStateWindow.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -45,7 +45,7 @@
 		CEGUI::ProgressBar* mLP;
 		CEGUI::ProgressBar* mAP;
 		CEGUI::ProgressBar* mAU;
-		CEGUI::StaticText* mName;
+		CEGUI::Window* mName;
 		
 	};
 }

Modified: rl/trunk/engine/ui/include/CommandMapper.h
===================================================================
--- rl/trunk/engine/ui/include/CommandMapper.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/CommandMapper.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -19,7 +19,6 @@
 
 #include &quot;UiPrerequisites.h&quot;
 
-#include &lt;OgreInput.h&gt;
 #include &lt;map&gt;
 
 namespace rl {

Modified: rl/trunk/engine/ui/include/CommandMapperWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CommandMapperWindow.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/CommandMapperWindow.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -60,7 +60,7 @@
 		CEGUI::MultiColumnList* mTableInCombat;
 		CEGUI::MultiColumnList* mTableOffCombat;
 		CEGUI::MultiColumnList* mTableMovement;
-		CEGUI::TabPane* mTabPane;
+		CEGUI::TabControl* mTabControl;
 		CEGUI::Window* mSelectedTable;
 	};
 

Modified: rl/trunk/engine/ui/include/DebugWindow.h
===================================================================
--- rl/trunk/engine/ui/include/DebugWindow.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/DebugWindow.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -65,7 +65,7 @@
          */
         void setPageText(const Ogre::String&amp; page, const Ogre::String&amp; text);
 
-        /** Sets the text for the one line StaticText field at the bottom of the window.
+        /** Sets the text for the one line Window field at the bottom of the window.
          *  This is used for situational short term info.
          */
         void setMessageText(const Ogre::String&amp; text);
@@ -77,8 +77,8 @@
         virtual const Ogre::String&amp; getName() const;
 
     private:
-        CEGUI::StaticText* mMessageText;
-        CEGUI::StaticText* mPageCaption;
+        CEGUI::Window* mMessageText;
+        CEGUI::Window* mPageCaption;
         CEGUI::MultiLineEditbox* mPageText;
         typedef std::map&lt;Ogre::String, Ogre::String&gt; PageTextMap;
         PageTextMap mPageTexts;

Modified: rl/trunk/engine/ui/include/DialogWindow.h
===================================================================
--- rl/trunk/engine/ui/include/DialogWindow.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/DialogWindow.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -62,9 +62,9 @@
 		DialogCharacter* mBot;
 		DialogResponse* mCurrentResponse;
 		CEGUI::Listbox* mDialogOptions;
-		CEGUI::StaticImage* mImage;
+		CEGUI::Window* mImage;
 		CEGUI::Listbox* mQuestion;
-		CEGUI::StaticText* mName;
+		CEGUI::Window* mName;
 		GameLoggerWindow* mGameLogger;
 		DialogCharacterController* mController;
 		DialogState mState;

Modified: rl/trunk/engine/ui/include/InfoPopup.h
===================================================================
--- rl/trunk/engine/ui/include/InfoPopup.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/InfoPopup.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -44,11 +44,11 @@
     private:
         static const int ICON_SPACING = 5;
 
-        void showMessageIcon(CEGUI::StaticImage* image);
+        void showMessageIcon(CEGUI::Window* image);
 
-        std::vector&lt;CEGUI::StaticImage*&gt; mActiveIcons;
-        CEGUI::StaticImage* mErrorIcon;
-        CEGUI::StaticImage* mQuestIcon;
+        std::vector&lt;CEGUI::Window*&gt; mActiveIcons;
+        CEGUI::Window* mErrorIcon;
+        CEGUI::Window* mQuestIcon;
     };
 
 }

Modified: rl/trunk/engine/ui/include/InputManager.h
===================================================================
--- rl/trunk/engine/ui/include/InputManager.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/InputManager.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -56,7 +56,6 @@
         static InputManager &amp; getSingleton(void);
         static InputManager * getSingletonPtr(void);
 
-        bool isKeyDown(Ogre::KeyCode kc);
         bool isMouseButtonDown( OIS::MouseButtonID buttonID );
 
         Ogre::Real getMouseRelativeX(void) const;
@@ -94,12 +93,10 @@
 
         void initializeOis(Ogre::RenderWindow* wnd);
         bool sendKeyToCeGui(const OIS::KeyEvent&amp; e) const;
-        void resetPressedKeys( bool up );
         int getModifierCode() const;
         const CEGUI::utf8&amp; getKeyChar(int keycode, int modifiers) const;
 
 		Ogre::Vector3 mSavedMouseState;
-        bool mKeyDown[NUM_KEYS];
 
         OIS::Mouse* mMouse;
         OIS::Keyboard* mKeyboard;

Modified: rl/trunk/engine/ui/include/InventoryWindow.h
===================================================================
--- rl/trunk/engine/ui/include/InventoryWindow.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/InventoryWindow.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -123,21 +123,21 @@
         InventoryArrangeTask* mInventoryArrangeTask;
 
 		// Das Item-Renderfenster
-		CEGUI::StaticImage* mItemRenderImage;
+		CEGUI::Window* mItemRenderImage;
 
 
 		// Das R&#252;stungs- und Behinderungswert Fenster
-		CEGUI::StaticImage* mArmorValueWindow;
-		CEGUI::StaticText* mArmorValue;
-		CEGUI::StaticText* mHandicapValue;
+		CEGUI::Window* mArmorValueWindow;
+		CEGUI::Window* mArmorValue;
+		CEGUI::Window* mHandicapValue;
 
 		// Das Gewichtsfenster
-		CEGUI::StaticImage* mWeightWindow;
-		CEGUI::StaticText* mTotalWeight;
+		CEGUI::Window* mWeightWindow;
+		CEGUI::Window* mTotalWeight;
 		
 
 		// Das Item-Beschreibungsfenster
-		CEGUI::StaticText* mDescription;
+		CEGUI::ScrollablePane* mDescription;
 
 		// Das jeweils aktive Fenster, das im Beschreibungsfenster angew&#228;hlt ist
 		CEGUI::Window* mActiveItemWindow;
@@ -156,33 +156,30 @@
 		const std::pair&lt;int,int&gt; mGroundDimension;
 
 		// Alle verschiedenen Inventoryslots
-		CEGUI::StaticImage* mRingLeft;
-		CEGUI::StaticImage* mRingRight;
-		CEGUI::StaticImage* mHandLeft;
-		CEGUI::StaticImage* mHandRight;
-		CEGUI::StaticImage* mGloves;
-		CEGUI::StaticImage* mBraceletLeft;
-		CEGUI::StaticImage* mBraceletRight;
-		CEGUI::StaticImage* mArmor;
-		CEGUI::StaticImage* mCape;
-		CEGUI::StaticImage* mBracers;
-		CEGUI::StaticImage* mBackpack;
-		CEGUI::StaticImage* mBelt;
-		CEGUI::StaticImage* mNecklace;
-		CEGUI::StaticImage* mHelmet;
-		CEGUI::StaticImage* mTrousers;
-		CEGUI::StaticImage* mShinbone;
-		CEGUI::StaticImage* mBoots;
+		CEGUI::Window* mRingLeft;
+		CEGUI::Window* mRingRight;
+		CEGUI::Window* mHandLeft;
+		CEGUI::Window* mHandRight;
+		CEGUI::Window* mGloves;
+		CEGUI::Window* mBraceletLeft;
+		CEGUI::Window* mBraceletRight;
+		CEGUI::Window* mArmor;
+		CEGUI::Window* mCape;
+		CEGUI::Window* mBracers;
+		CEGUI::Window* mBackpack;
+		CEGUI::Window* mBelt;
+		CEGUI::Window* mNecklace;
+		CEGUI::Window* mHelmet;
+		CEGUI::Window* mTrousers;
+		CEGUI::Window* mShinbone;
+		CEGUI::Window* mBoots;
 
 		CEGUI::Point mPosDraggedTo;
 		CEGUI::Window* mContainerDraggedTo;
 		CEGUI::DragContainer* mOldItemInSlot;
+        
+        CEGUI::DragContainer* createItem(Item* item, CEGUI::Window* parent, CEGUI::UVector2 position = CEGUI::UVector2(cegui_reldim(0.0f), cegui_reldim(0.0f)));
 
-		/** 
-		* Erzeugt eine Itemrepr&#228;sentation im Inventarfenster
-		*/
-		CEGUI::DragContainer* createItem(Item* item, CEGUI::Window* parent, CEGUI::UVector2 position = CEGUI::UVector2(CEGUI::cegui_reldim(0.0f), CEGUI::cegui_reldim(0.0f)));
-
 		/**
 		* Schliesst das Fenster bei Klick auf X
 		*/

Modified: rl/trunk/engine/ui/include/JournalWindow.h
===================================================================
--- rl/trunk/engine/ui/include/JournalWindow.h	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/include/JournalWindow.h	2007-01-08 20:06:52 UTC (rev 2949)
@@ -37,12 +37,12 @@
 
     private:
         CEGUI::Listbox* mQuests;
-        CEGUI::StaticText* mQuestTitle;
-        CEGUI::StaticText* mQuestState;
+        CEGUI::Window* mQuestTitle;
+        CEGUI::Window* mQuestState;
         CEGUI::MultiLineEditbox* mQuestDescription;
 
         CEGUI::Listbox* mJournalEntries;
-        CEGUI::StaticText* mJournalEntryTitle;
+        CEGUI::Window* mJournalEntryTitle;
         CEGUI::MultiLineEditbox* mJournalEntryText;
 
         CeGuiString mSelectionBrush;

Modified: rl/trunk/engine/ui/src/ActionChoiceWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/ActionChoiceWindow.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/ActionChoiceWindow.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -41,7 +41,7 @@
 		:	CeGuiWindow(&quot;actionchoicewindow.xml&quot;, WND_MOUSE_INPUT),
 			mActor(actor)
 	{
-		mHint = getStaticText(&quot;ActionChoiceWindow/Hint&quot;);
+		mHint = getWindow(&quot;ActionChoiceWindow/Hint&quot;);
 		getWindow(&quot;ActionChoiceWindow&quot;)-&gt;subscribeEvent(
 			Window::EventMouseClick,
 			boost::bind(
@@ -87,8 +87,8 @@
 		LOG_DEBUG2(Logger::UI, 
 			&quot;Buttons gel&#246;scht&quot;, &quot;ActionChoiceWindow::showActionsOfObject&quot;);
 
-		CEGUI::Point center = mWindow-&gt;relativeToAbsolute(CEGUI::Point(0.5, 0.5));
-		static int RADIUS = 80;
+		CEGUI::UVector2 center(cegui_reldim(0.5), cegui_reldim(0.5));
+		static float RADIUS = 0.10;
 
 		ActionVector actions = object-&gt;getValidActions(mActor);
 		if (actions.size() != 0)
@@ -216,7 +216,7 @@
 	}
 
 	void ActionChoiceWindow::createButtons(
-		ActionNode* actions, const CEGUI::Point&amp; center, 
+		ActionNode* actions, const CEGUI::UVector2&amp; center, 
 		float radius, float angle, float angleWidth)
 	{
 		PushButton* button = NULL;
@@ -238,7 +238,7 @@
 			for (NodeSet::const_iterator iter = children.begin(); 
 				iter != children.end(); iter++)
 			{
-				CEGUI::Point centerChild = getPositionOnCircle(center, radius, ang);
+				CEGUI::UVector2 centerChild = getPositionOnCircle(center, radius, ang);
 				createButtons(*iter, centerChild, radius, ang, 60);
 				ang += angleStep;
 			}
@@ -249,7 +249,7 @@
 			mWindow-&gt;addChildWindow(button);		
 	}
 
-	PushButton* ActionChoiceWindow::createButton(const CeGuiString&amp; name, const CEGUI::Point&amp; pos)
+	PushButton* ActionChoiceWindow::createButton(const CeGuiString&amp; name, const CEGUI::UVector2&amp; pos)
 	{
 		Window* button = CeGuiWindow::loadWindow(&quot;buttons/&quot;+name+&quot;.xml&quot;);
 		if (button == NULL)
@@ -259,13 +259,12 @@
 					&quot;buttons/defaultbutton.xml&quot;);
 		}
 
-		CEGUI::Size size = button-&gt;getAbsoluteSize();
-		button-&gt;setPosition(
-			Absolute, pos - CEGUI::Point(size.d_width/2, size.d_height/2));
+		CEGUI::UVector2 size = button-&gt;getSize();
+		button-&gt;setPosition(pos - size * UVector2(cegui_reldim(0.5), cegui_reldim(0.5)));
 		LOG_DEBUG2(Logger::UI, 
 			(button-&gt;getText()+&quot; &quot;+
-			StringConverter::toString(button-&gt;getAbsoluteXPosition()) + &quot;, &quot; + 
-			StringConverter::toString(button-&gt;getAbsoluteYPosition())).c_str(), 
+            StringConverter::toString(button-&gt;getPixelRect().d_left) + &quot;, &quot; + 
+            StringConverter::toString(button-&gt;getPixelRect().d_top)).c_str(), 
 			&quot;createButton&quot;);
 		
 		return static_cast&lt;PushButton*&gt;(button);
@@ -288,9 +287,9 @@
 		}
 		
 		LOG_DEBUG(Logger::UI, showHide + button-&gt;getName());
-		CEGUI::Point p = button-&gt;getRelativePosition();
-		LOG_DEBUG(Logger::UI, 
-			&quot;(&quot;+StringConverter::toString(p.d_x)+&quot;, &quot;+StringConverter::toString(p.d_y)+&quot;)&quot;);
+		//CEGUI::Point p = button-&gt;getRelativePosition();
+		//LOG_DEBUG(Logger::UI, 
+		//	&quot;(&quot;+StringConverter::toString(p.d_x)+&quot;, &quot;+StringConverter::toString(p.d_y)+&quot;)&quot;);
 			
 		if (visible)
 			button-&gt;show();
@@ -305,14 +304,14 @@
 		return true;
 	}
 
-	CEGUI::Point ActionChoiceWindow::getPositionOnCircle(
-		const CEGUI::Point&amp; center, float radius, float angle)
+	CEGUI::UVector2 ActionChoiceWindow::getPositionOnCircle(
+		const CEGUI::UVector2&amp; center, float radius, float angle)
 	{
-		LOG_DEBUG(Logger::UI, 
-			&quot;center=&quot;+StringConverter::toString(center.d_x)+&quot;,&quot;+StringConverter::toString(center.d_y)+
-			&quot; radius=&quot;+StringConverter::toString(radius)+
-			&quot; angle=&quot;+StringConverter::toString(angle)
-			);
+		//LOG_DEBUG(Logger::UI, 
+		//	&quot;center=&quot;+StringConverter::toString(center.d_x)+&quot;,&quot;+StringConverter::toString(center.d_y)+
+		//	&quot; radius=&quot;+StringConverter::toString(radius)+
+		//	&quot; angle=&quot;+StringConverter::toString(angle)
+		//	);
 		static const float PI = 3.1415926;
 		
 		float relX = radius * sin(PI * angle/180);
@@ -322,7 +321,7 @@
 			&quot;diff=&quot;+StringConverter::toString(relX)+&quot;,&quot;+StringConverter::toString(relY));
 			
 
-		return center + CEGUI::Point(relX, relY);
+		return center + CEGUI::UVector2(cegui_reldim(relX), cegui_reldim(relY));
 	}
 	
 	ActionChoiceWindow::ActionNode* 

Modified: rl/trunk/engine/ui/src/CeGuiWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CeGuiWindow.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/CeGuiWindow.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -20,6 +20,7 @@
 
 #include &quot;UiSubsystem.h&quot;
 #include &quot;CeGuiWindow.h&quot;
+#include &quot;CeGuiHelper.h&quot;
 #include &quot;InputManager.h&quot;
 #include &quot;WindowManager.h&quot;
 #include &quot;WindowUpdater.h&quot;
@@ -194,31 +195,11 @@
 		return static_cast&lt;Editbox*&gt;(getWindow(name, &quot;Editbox&quot;));
 	}
 
-	TabPane* CeGuiWindow::getTabPane(const char* name)
-	{
-		return static_cast&lt;TabPane*&gt;(getWindow(name, &quot;TabPane&quot;));
-	}
-
-	TabControl* CeGuiWindow::getTabControl(const char* name)
-	{
-		return static_cast&lt;TabControl*&gt;(getWindow(name, &quot;TabControl&quot;));
-	}
-
 	Listbox* CeGuiWindow::getListbox(const char* name)
 	{
 		return static_cast&lt;Listbox*&gt;(getWindow(name, &quot;Listbox&quot;));
 	}
 
-	StaticText* CeGuiWindow::getStaticText(const char* name)
-	{
-		return static_cast&lt;StaticText*&gt;(getWindow(name, &quot;StaticText&quot;));
-	}
-
-	StaticImage* CeGuiWindow::getStaticImage(const char* name)
-	{
-		return static_cast&lt;StaticImage*&gt;(getWindow(name, &quot;StaticImage&quot;));
-	}
-
 	MultiColumnList* CeGuiWindow::getMultiColumnList(const char* name)
 	{
 		return static_cast&lt;MultiColumnList*&gt;(getWindow(name, &quot;MultiColumnList&quot;));
@@ -259,11 +240,21 @@
 		return static_cast&lt;ComboDropList*&gt;(getWindow(name, &quot;ComboDropList&quot;));
 	}
 
+    ScrollablePane* CeGuiWindow::getScrollablePane(const char* name)
+    {
+		return static_cast&lt;ScrollablePane*&gt;(getWindow(name, &quot;ScrollablePane&quot;));
+    }
+
 	Slider* CeGuiWindow::getSlider(const char* name)
 	{
 		return static_cast&lt;Slider*&gt;(getWindow(name, &quot;Slider&quot;));
 	}
 
+	TabControl* CeGuiWindow::getTabControl(const char* name)
+	{
+		return static_cast&lt;TabControl*&gt;(getWindow(name, &quot;TabControl&quot;));
+	}
+
 	const CeGuiString&amp; CeGuiWindow::getName() const
 	{
 		return mName;
@@ -271,10 +262,11 @@
 
 	void CeGuiWindow::centerWindow()
 	{
-		CEGUI::Point pos(
-			(1.0-mWindow-&gt;getRelativeWidth())/2, 
-			(1.0-mWindow-&gt;getRelativeHeight())/2);
-		mWindow-&gt;setPosition(Relative, pos);
+		Size screenSize = System::getSingleton().getRenderer()-&gt;getSize();
+		Size windowSize = mWindow-&gt;getPixelSize();
+		float x = 0.5f * (screenSize.d_width - windowSize.d_width);
+		float y = 0.5f * (screenSize.d_height - windowSize.d_height);
+		mWindow-&gt;setPosition(CeGuiHelper::asAbsolute(CEGUI::Vector2(x, y)));
 	}
 
 	void CeGuiWindow::bindClickToCloseWindow(CEGUI::Window* button)

Modified: rl/trunk/engine/ui/src/CharacterSheetWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CharacterSheetWindow.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/CharacterSheetWindow.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -34,33 +34,33 @@
 	: CeGuiWindow(&quot;charactersheet.xml&quot;, WND_MOUSE_INPUT)
 {
 	mTalentTable = getMultiColumnList(&quot;CharacterSheet/TalentSheet/Table&quot;);
-	mTalentTable-&gt;addColumn((utf8*)&quot;Talent&quot;, 0, 0.5);
-	mTalentTable-&gt;addColumn((utf8*)&quot;Probe&quot;, 1, 0.3);
-	mTalentTable-&gt;addColumn((utf8*)&quot;eBE&quot;, 2, 0.1);
-	mTalentTable-&gt;addColumn((utf8*)&quot;TW&quot;, 3, 0.1);
+	mTalentTable-&gt;addColumn((utf8*)&quot;Talent&quot;, 0, cegui_reldim(0.5));
+	mTalentTable-&gt;addColumn((utf8*)&quot;Probe&quot;, 1, cegui_reldim(0.3));
+	mTalentTable-&gt;addColumn((utf8*)&quot;eBE&quot;, 2, cegui_reldim(0.1));
+	mTalentTable-&gt;addColumn((utf8*)&quot;TW&quot;, 3, cegui_reldim(0.1));
 	mTalentTable-&gt;setUserSortControlEnabled(false);
 	
-	mLE = getStaticText(&quot;CharacterSheet/CharacterSheet/LE&quot;);
-	mAE = getStaticText(&quot;CharacterSheet/CharacterSheet/AE&quot;);
-	mAP = getStaticText(&quot;CharacterSheet/CharacterSheet/AP&quot;);
-	mName = getStaticText(&quot;CharacterSheet/CharacterSheet/Name&quot;);
-	mRasse = getStaticText(&quot;CharacterSheet/CharacterSheet/Rasse&quot;);
-	mProfession = getStaticText(&quot;CharacterSheet/CharacterSheet/Profession&quot;);
+	mLE = getWindow(&quot;CharacterSheet/CharacterSheet/LE&quot;);
+	mAE = getWindow(&quot;CharacterSheet/CharacterSheet/AE&quot;);
+	mAP = getWindow(&quot;CharacterSheet/CharacterSheet/AP&quot;);
+	mName = getWindow(&quot;CharacterSheet/CharacterSheet/Name&quot;);
+	mRasse = getWindow(&quot;CharacterSheet/CharacterSheet/Rasse&quot;);
+	mProfession = getWindow(&quot;CharacterSheet/CharacterSheet/Profession&quot;);
 
 	bindCloseToCloseButton();
 	
 	/*for (int i=0; i&lt;EIGENSCHAFT_COUNT; i++)
 		mEigenschaft[i] = 
-			getStaticText((&quot;CharacterSheet/CharacterSheet/Eigenschaften/&quot;+
+			getWindow((&quot;CharacterSheet/CharacterSheet/Eigenschaften/&quot;+
 				DsaManager::getSingleton().getEigenschaft(i)-&gt;getNameAbbreviation()).c_str());*/
-	mEigenschaft[0]= getStaticText(&quot;CharacterSheet/CharacterSheet/Eigenschaften/MU&quot;);
-	mEigenschaft[1]= getStaticText(&quot;CharacterSheet/CharacterSheet/Eigenschaften/KL&quot;);
-	mEigenschaft[2]= getStaticText(&quot;CharacterSheet/CharacterSheet/Eigenschaften/IN&quot;);
-	mEigenschaft[3]= getStaticText(&quot;CharacterSheet/CharacterSheet/Eigenschaften/CH&quot;);
-	mEigenschaft[4]= getStaticText(&quot;CharacterSheet/CharacterSheet/Eigenschaften/FF&quot;);
-	mEigenschaft[5]= getStaticText(&quot;CharacterSheet/CharacterSheet/Eigenschaften/GE&quot;);
-	mEigenschaft[6]= getStaticText(&quot;CharacterSheet/CharacterSheet/Eigenschaften/KO&quot;);
-	mEigenschaft[7]= getStaticText(&quot;CharacterSheet/CharacterSheet/Eigenschaften/KK&quot;);
+	mEigenschaft[0]= getWindow(&quot;CharacterSheet/CharacterSheet/Eigenschaften/MU&quot;);
+	mEigenschaft[1]= getWindow(&quot;CharacterSheet/CharacterSheet/Eigenschaften/KL&quot;);
+	mEigenschaft[2]= getWindow(&quot;CharacterSheet/CharacterSheet/Eigenschaften/IN&quot;);
+	mEigenschaft[3]= getWindow(&quot;CharacterSheet/CharacterSheet/Eigenschaften/CH&quot;);
+	mEigenschaft[4]= getWindow(&quot;CharacterSheet/CharacterSheet/Eigenschaften/FF&quot;);
+	mEigenschaft[5]= getWindow(&quot;CharacterSheet/CharacterSheet/Eigenschaften/GE&quot;);
+	mEigenschaft[6]= getWindow(&quot;CharacterSheet/CharacterSheet/Eigenschaften/KO&quot;);
+	mEigenschaft[7]= getWindow(&quot;CharacterSheet/CharacterSheet/Eigenschaften/KK&quot;);
 }
 
 CharacterSheetWindow::~CharacterSheetWindow()

Modified: rl/trunk/engine/ui/src/CharacterStateWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CharacterStateWindow.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/CharacterStateWindow.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -36,7 +36,7 @@
 	mLP = getProgressBar(&quot;CharacterStateWindow/LP&quot;);
 	mAP = getProgressBar(&quot;CharacterStateWindow/AP&quot;);
 	mAU = getProgressBar(&quot;CharacterStateWindow/AU&quot;);
-	mName = getStaticText(&quot;CharacterStateWindow/Name&quot;);
+	mName = getWindow(&quot;CharacterStateWindow/Name&quot;);
 }
 
 CharacterStateWindow::~CharacterStateWindow()

Modified: rl/trunk/engine/ui/src/CommandMapper.cpp
===================================================================
--- rl/trunk/engine/ui/src/CommandMapper.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/CommandMapper.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -21,7 +21,6 @@
 #include &quot;Action.h&quot;
 #include &quot;ActionManager.h&quot;
 #include &quot;InputManager.h&quot;
-#include &lt;OgreMouseEvent.h&gt;
 #include &lt;OgreConfigFile.h&gt;
 
 using namespace Ogre;

Modified: rl/trunk/engine/ui/src/CommandMapperWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CommandMapperWindow.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/CommandMapperWindow.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -44,7 +44,7 @@
 	bindClickToCloseWindow(getWindow(&quot;CommandMapper/CloseButton&quot;));
 	bindCloseToCloseButton();
 
-	mTabPane = getTabPane(&quot;CommandMapper/TabPane&quot;);
+	mTabControl = getTabControl(&quot;CommandMapper/TabPane&quot;);
 
 	mTableMovement = getMultiColumnList(&quot;CommandMapper/TableMovement&quot;);
 	mTableMovement-&gt;subscribeEvent(
@@ -59,14 +59,14 @@
 			Window::EventMouseDoubleClick,
 			boost::bind(&amp;CommandMapperWindow::handleChangeOffCombat, this));
 
-	mTableMovement-&gt;addColumn(&quot;Aktion&quot;, 0, 0.5);
-	mTableMovement-&gt;addColumn(&quot;Taste&quot;, 1, 0.5);
-	mTableInCombat-&gt;addColumn(&quot;Aktion&quot;, 0, 0.3);
-	mTableInCombat-&gt;addColumn(&quot;Klasse&quot;, 1, 0.4);
-	mTableInCombat-&gt;addColumn(&quot;Taste&quot;, 2, 0.3);
-	mTableOffCombat-&gt;addColumn(&quot;Aktion&quot;, 0, 0.3);
-	mTableOffCombat-&gt;addColumn(&quot;Klasse&quot;, 1, 0.4);
-	mTableOffCombat-&gt;addColumn(&quot;Taste&quot;, 2, 0.3);
+	mTableMovement-&gt;addColumn(&quot;Aktion&quot;, 0, cegui_reldim(0.5));
+	mTableMovement-&gt;addColumn(&quot;Taste&quot;, 1, cegui_reldim(0.5));
+	mTableInCombat-&gt;addColumn(&quot;Aktion&quot;, 0, cegui_reldim(0.3));
+	mTableInCombat-&gt;addColumn(&quot;Klasse&quot;, 1, cegui_reldim(0.4));
+	mTableInCombat-&gt;addColumn(&quot;Taste&quot;, 2, cegui_reldim(0.3));
+	mTableOffCombat-&gt;addColumn(&quot;Aktion&quot;, 0, cegui_reldim(0.3));
+	mTableOffCombat-&gt;addColumn(&quot;Klasse&quot;, 1, cegui_reldim(0.4));
+	mTableOffCombat-&gt;addColumn(&quot;Taste&quot;, 2, cegui_reldim(0.3));
 
 	getWindow(&quot;CommandMapper&quot;)-&gt;
 		subscribeEvent(
@@ -104,7 +104,7 @@
 	muteElements(true);
 	muteWindow(false);
 
-	mSelectedTable = mTabPane-&gt;getActiveChild();
+	mSelectedTable = mTabControl-&gt;getActiveChild();
 
 	return true;
 }

Modified: rl/trunk/engine/ui/src/Console.cpp
===================================================================
--- rl/trunk/engine/ui/src/Console.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/Console.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -108,8 +108,8 @@
 		const float MIN_SPACE_POS = 0.5;
 
 		CeGuiString textLeft = CeGuiString(text);
-		const CEGUI::Font* font = mDisplay-&gt;getFont();
-		unsigned int width = mDisplay-&gt;getAbsoluteWidth()*0.95;
+        CEGUI::Font* font = const_cast&lt;CEGUI::Font*&gt;(mDisplay-&gt;getFont());
+        unsigned int width = mDisplay-&gt;getPixelSize().d_width * 0.95f;
 
 		while (textLeft.length() &gt; 0)
 		{

Modified: rl/trunk/engine/ui/src/DebugWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/DebugWindow.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/DebugWindow.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -52,12 +52,12 @@
           mCurrentPage(StringUtil::BLANK),
           mDebugPageName(&quot;General Informations&quot;)
 	{
-		mPageCaption = getStaticText(&quot;DebugWindow/PageCaption&quot;);
+		mPageCaption = getWindow(&quot;DebugWindow/PageCaption&quot;);
 		mPageCaption-&gt;moveToFront();
 
 		mPageText = getMultiLineEditbox(&quot;DebugWindow/PageText&quot;);
 
-		mMessageText = getStaticText(&quot;DebugWindow/MessageText&quot;);
+		mMessageText = getWindow(&quot;DebugWindow/MessageText&quot;);
 		mMessageText-&gt;moveToFront();
 
 		bindCloseToCloseButton();

Modified: rl/trunk/engine/ui/src/DialogWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/DialogWindow.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/DialogWindow.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -53,8 +53,8 @@
 	mController(controller),
     mState( TALKING_PLAYER_CHARACTER )
 {
-	mImage = getStaticImage(&quot;DialogWindow/Image&quot;);
-	mName = getStaticText(&quot;DialogWindow/Name&quot;);
+	mImage = getWindow(&quot;DialogWindow/Image&quot;);
+	mName = getWindow(&quot;DialogWindow/Name&quot;);
 	mQuestion = getListbox(&quot;DialogWindow/Question&quot;);
 	mDialogOptions = getListbox(&quot;DialogWindow/OptionList&quot;);
 
@@ -316,12 +316,12 @@
 
 void DialogWindow::setImage(string imageset, string image)
 {
-	mImage-&gt;setImage(imageset, image);
+    mImage-&gt;setProperty(&quot;Image&quot;, &quot;set:&quot; + imageset + &quot; image:&quot; + image);
 }
 
 void DialogWindow::setName(string name)
 {
-	mName-&gt;setText(name);
+	mName-&gt;setProperty(&quot;Text&quot;, name);
 }
 
 }

Modified: rl/trunk/engine/ui/src/InfoPopup.cpp
===================================================================
--- rl/trunk/engine/ui/src/InfoPopup.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/InfoPopup.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -24,8 +24,8 @@
 	InfoPopup::InfoPopup()
 		: CeGuiWindow(&quot;infopopup.xml&quot;, CeGuiWindow::WND_SHOW, false)
 	{
-		mErrorIcon = getStaticImage(&quot;InfoPopup/ErrorIcon&quot;);
-		mQuestIcon = getStaticImage(&quot;InfoPopup/QuestIcon&quot;);
+		mErrorIcon = getWindow(&quot;InfoPopup/ErrorIcon&quot;);
+		mQuestIcon = getWindow(&quot;InfoPopup/QuestIcon&quot;);
 		mWindow-&gt;removeChildWindow(mErrorIcon);
 		mWindow-&gt;removeChildWindow(mQuestIcon);
 	}
@@ -44,21 +44,21 @@
 		showMessageIcon(mQuestIcon);
 	}
 
-	void InfoPopup::showMessageIcon(StaticImage* image)
+	void InfoPopup::showMessageIcon(Window* image)
 	{
 		int iconWidth = 0;
-		for(std::vector&lt;StaticImage*&gt;::iterator it = mActiveIcons.begin();
+		for(std::vector&lt;Window*&gt;::iterator it = mActiveIcons.begin();
 			it != mActiveIcons.end(); it++)
 		{
-			StaticImage* cur = *it;
-			iconWidth += cur-&gt;getAbsoluteWidth();
+			Window* cur = *it;
+            iconWidth += cur-&gt;getPixelSize().d_width;
 		}
 		iconWidth += ICON_SPACING * mActiveIcons.size();
 
 		mWindow-&gt;addChildWindow(image);
-		image-&gt;setXPosition(iconWidth);
+		image-&gt;setXPosition(cegui_absdim(iconWidth));
 
-		mWindow-&gt;setWidth(Absolute, iconWidth + ICON_SPACING + image-&gt;getAbsoluteWidth());
+        mWindow-&gt;setWidth(cegui_absdim(iconWidth + ICON_SPACING + image-&gt;getPixelSize().d_width));
 
 		mActiveIcons.push_back(image);
 		setVisible(true);
@@ -66,10 +66,10 @@
 
 	void InfoPopup::windowHid()
 	{
-		for(std::vector&lt;StaticImage*&gt;::iterator it = mActiveIcons.begin();
+		for(std::vector&lt;Window*&gt;::iterator it = mActiveIcons.begin();
 			it != mActiveIcons.end(); it++)
 		{
-			StaticImage* cur = *it;
+			Window* cur = *it;
 			mWindow-&gt;removeChildWindow(cur);
 		}
 

Modified: rl/trunk/engine/ui/src/InputManager.cpp
===================================================================
--- rl/trunk/engine/ui/src/InputManager.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/InputManager.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -64,10 +64,6 @@
         mInputManager(NULL)
 	{
         initializeOis(win);
-        for(int i=0; i&lt;NUM_KEYS; i++)
-        {
-            mKeyDown[i] = false;
-        }
         GameLoopManager::getSingleton().addSynchronizedTask(this, FRAME_ENDED);
     }
 
@@ -99,7 +95,7 @@
 		OIS::ParamList pl;	
 		size_t windowHnd = 0;
         #if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
-		    win-&gt;getCustomAttribute(&quot;HWND&quot;, &amp;windowHnd);
+		    win-&gt;getCustomAttribute(&quot;WINDOW&quot;, &amp;windowHnd);
             pl.insert(std::make_pair(std::string(&quot;w32_keyboard&quot;), std::string(&quot;DISCL_EXCLUSIVE&quot;)));
             pl.insert(std::make_pair(std::string(&quot;w32_keyboard&quot;), std::string(&quot;DISCL_FOREGROUND&quot;)));
         #elif OGRE_PLATFORM == OGRE_PLATFORM_LINUX
@@ -112,6 +108,7 @@
         windowHndStr &lt;&lt; windowHnd;
 		pl.insert(std::make_pair(std::string(&quot;WINDOW&quot;), windowHndStr.str()));
 
+		//mInputManager = OIS::InputManager::createInputSystem(windowHnd);
 		mInputManager = OIS::InputManager::createInputSystem(pl);
 		mKeyboard = static_cast&lt;OIS::Keyboard*&gt;(mInputManager-&gt;createInputObject(OIS::OISKeyboard, true));
         mKeyboard-&gt;setTextTranslation(OIS::Keyboard::Unicode);
@@ -172,7 +169,7 @@
                 static_cast&lt;CEGUI::MouseButton&gt;(id));
             // return true;
 		}
-            /// else
+        else
             /// {
             /// @todo Furchtbarer Hack. Das Ereignis wird durchgeschliffen, damit
             /// der DialogCharacterController ne M&#195;&#182;glichkeit hat den Text abzubrechen.
@@ -181,9 +178,9 @@
             /// dass da noch mehr durcheinander ist. ^^
             if (mCharacterController != NULL)
                 mCharacterController-&gt;injectMouseUp(
-                    CommandMapper::encodeKey(id, getModifierCode()));
-            /// }
-            return true;
+					CommandMapper::encodeKey(id, getModifierCode()));
+            
+		return true;
 	}
 
     bool InputManager::mouseMoved(const OIS::MouseEvent &amp;arg)
@@ -193,11 +190,6 @@
 			CEGUI::Renderer* renderer  = System::getSingleton().getRenderer();
 			System::getSingleton().injectMouseMove(arg.state.X.rel, arg.state.Y.rel);			
 
-			//if (mPickObjects)
-   //         {
-   //             updatePickedObject(arg.state.abX, arg.state.abY);
-   //         }
-
             return true;
 		}
         return false;
@@ -289,10 +281,12 @@
 
 	bool InputManager::keyReleased(const OIS::KeyEvent&amp; e)
 	{
+		LOG_MESSAGE2(Logger::UI, &quot;Key released: &quot; + mKeyboard-&gt;getAsString(e.key) , &quot;InputManager::keyReleased&quot;);
         if (sendKeyToCeGui(e)) 
 		{
 			CEGUI::System&amp; cegui = CEGUI::System::getSingleton();
 			cegui.injectKeyUp(e.key);
+			LOG_MESSAGE2(Logger::UI, &quot;    fed to cegui&quot;, &quot;InputManager::keyReleased&quot;);
 		}
         else
         {
@@ -304,6 +298,7 @@
                 try
                 {
                     action-&gt;doAction(NULL, NULL, NULL);
+					LOG_MESSAGE2(Logger::UI, &quot;    invoked action &quot; + action-&gt;getName(), &quot;InputManager::keyReleased&quot;);
                 }
                 catch( ScriptInvocationFailedException&amp; sife )
 		        {
@@ -314,6 +309,7 @@
             if (mCharacterController != NULL)
             {
 		        mCharacterController-&gt;injectKeyUp(e.key);
+				LOG_MESSAGE2(Logger::UI, &quot;    fed to char controller&quot;, &quot;InputManager::keyReleased&quot;);
             }
         }
 
@@ -410,9 +406,7 @@
             mSavedMouseState.x = mMouse-&gt;getMouseState().X.rel;
             mSavedMouseState.y = mMouse-&gt;getMouseState().Y.rel;
             mSavedMouseState.z = mMouse-&gt;getMouseState().Z.rel;
-//			setObjectPickingActive(false);
             CEGUI::MouseCursor::getSingleton().show();
-            resetPressedKeys( true );
 		}
 	}
 
@@ -441,33 +435,9 @@
 		if (active &amp;&amp; !isCeguiActive()) // war aktiv, sollte nicht mehr aktiv sein -&gt; ausschalten
 		{
 			CEGUI::MouseCursor::getSingleton().hide();
-            //setObjectPickingActive(true);
-            resetPressedKeys( false );
 		}
 	}
 
-    void InputManager::resetPressedKeys( bool up )
-    {
-        for(int i=0; i&lt;NUM_KEYS; i++)
-        {
-            if( mKeyDown[i] &amp;&amp; up )
-            {
-                if (mCharacterController != NULL)
-                {
-                    mCharacterController-&gt;injectKeyUp( i );
-                }
-                mKeyDown[i] = false;
-            }
-            else if( mKeyDown[i] &amp;&amp; !up ) 
-            {
-                if (mCharacterController != NULL)
-                {
-                    mCharacterController-&gt;injectKeyDown( i );
-                }
-            }
-        }
-    }
-
 	bool InputManager::isCeguiActive() const
 	{
 		return 

Modified: rl/trunk/engine/ui/src/InventoryWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/InventoryWindow.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/InventoryWindow.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -33,6 +33,7 @@
 #include &quot;UiSubsystem.h&quot;
 #include &quot;WindowFactory.h&quot;
 #include &quot;World.h&quot;
+#include &quot;CeGuiHelper.h&quot;
 
 #include &lt;CEGUIPropertyHelper.h&gt;
 #include &lt;OgreCEGUIRenderer.h&gt;
@@ -195,7 +196,7 @@
 	void InventoryWindow::updateItemPosition(){
 		
 		// Positionieren
-		mDroppedItem-&gt;setPosition(CEGUI::Absolute, mPosDraggedTo);
+        mDroppedItem-&gt;setPosition(CeGuiHelper::asAbsolute(mPosDraggedTo));
 		mDroppedItem = NULL;
 
 		// Loggen
@@ -462,32 +463,32 @@
 
 	void InventoryWindow::initSlots()
 	{
-		mArmorValueWindow = getStaticImage(&quot;InventoryWindow/ArmorValueWindow&quot;);
-		mArmorValueWindow-&gt;setBackgroundImage(&quot;InventorySymbols&quot;,&quot;Shield&quot;);
+		mArmorValueWindow = getWindow(&quot;InventoryWindow/ArmorValueWindow&quot;);
+        mArmorValueWindow-&gt;setProperty(&quot;Image&quot;, &quot;set:InventorySymbols image:Shield&quot;);
 		mArmorValueWindow-&gt;setTooltipText(&quot;R&#252;stung / Behinderung&quot;);
 		//TODO: An Tooltip anh&#228;ngen: woraus setzt sich die R&#252;stung zusammen?
-		mArmorValue = getStaticText(&quot;InventoryWindow/ArmorValue&quot;);
+		mArmorValue = getWindow(&quot;InventoryWindow/ArmorValue&quot;);
 		mArmorValue-&gt;setText(&quot; 3&quot;);
-		mArmorValue-&gt;setTextColours(CEGUI::colour(0.0,0.4,0.0));
+		//mArmorValue-&gt;setTextColours(CEGUI::colour(0.0,0.4,0.0)); //TODO port to cegui0.5
 		mArmorValue-&gt;disable();
-		mHandicapValue = getStaticText(&quot;InventoryWindow/HandicapValue&quot;);
-		mHandicapValue-&gt; setText(&quot;2&quot;);
-		mHandicapValue-&gt;setTextColours(CEGUI::colour(0.4,0.0,0.0));
+		mHandicapValue = getWindow(&quot;InventoryWindow/HandicapValue&quot;);
+		mHandicapValue-&gt;setText(&quot;2&quot;);
+		//mHandicapValue-&gt;setTextColours(CEGUI::colour(0.4,0.0,0.0)); //TODO port to cegui0.5
 		mHandicapValue-&gt;disable();
 
-		mWeightWindow = getStaticImage(&quot;InventoryWindow/WeightWindow&quot;);
-		mWeightWindow-&gt;setBackgroundImage(&quot;InventorySymbols&quot;, &quot;Weight&quot;);
+		mWeightWindow = getWindow(&quot;InventoryWindow/WeightWindow&quot;);
+        mWeightWindow-&gt;setProperty(&quot;Image&quot;, &quot;set:InventorySymbols image:Weight&quot;);
 		mWeightWindow-&gt;setTooltipText(&quot;Getragenes Gewicht\r\nin Stein&quot;);
 
-		mTotalWeight = getStaticText(&quot;InventoryWindow/TotalWeight&quot;);
+		mTotalWeight = getWindow(&quot;InventoryWindow/TotalWeight&quot;);
 		mTotalWeight-&gt;setText(&quot;&quot;);
 		// Schwarzer Text (wird rot, wenn &#252;berladen)
-		mTotalWeight-&gt;setTextColours(CEGUI::colour(0.0,0.0,0.0));
+		//mTotalWeight-&gt;setTextColours(CEGUI::colour(0.0,0.0,0.0));  //TODO port to cegui0.5
 		mTotalWeight-&gt;disable();
 				
 
 		// Das Item-Beschreibungsfeld holen
-		mDescription = getStaticText(&quot;InventoryWindow/Description&quot;);
+		mDescription = getScrollablePane(&quot;InventoryWindow/Description&quot;);
 
 		// Das &quot;BodenItem&quot; initiieren
 		mGroundItem = new Item(1/*&quot;Boden&quot;, &quot;Dieses Item repr&#228;sentiert den Boden&quot;*/);
@@ -500,55 +501,55 @@
 		mContainerTabs = getTabControl(&quot;InventoryWindow/Tabs&quot;);
 		
 		// Hole die einzelnen Slots aus dem XML-File
-		mHelmet = getStaticImage(&quot;InventoryWindow/Helmet&quot;);
+		mHelmet = getWindow(&quot;InventoryWindow/Helmet&quot;);
 		mHelmet-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_HELMET));
 		
-		mRingLeft = getStaticImage(&quot;InventoryWindow/RingLeft&quot;);
+		mRingLeft = getWindow(&quot;InventoryWindow/RingLeft&quot;);
 		mRingLeft-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_RING));
 		
-		mRingRight = getStaticImage(&quot;InventoryWindow/RingRight&quot;);
+		mRingRight = getWindow(&quot;InventoryWindow/RingRight&quot;);
 		mRingRight-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_RING));
 		
-		mHandLeft = getStaticImage(&quot;InventoryWindow/HandLeft&quot;);
+		mHandLeft = getWindow(&quot;InventoryWindow/HandLeft&quot;);
 		mHandLeft-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_SHIELD));
 
-		mHandRight = getStaticImage(&quot;InventoryWindow/HandRight&quot;);
+		mHandRight = getWindow(&quot;InventoryWindow/HandRight&quot;);
 		mHandRight-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_WEAPON));
 
-		mGloves = getStaticImage(&quot;InventoryWindow/Gloves&quot;);
+		mGloves = getWindow(&quot;InventoryWindow/Gloves&quot;);
 		mGloves-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_GLOVES));
 
-		mBraceletLeft = getStaticImage(&quot;InventoryWindow/BraceletLeft&quot;);
+		mBraceletLeft = getWindow(&quot;InventoryWindow/BraceletLeft&quot;);
 		mBraceletLeft-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_BRACELET));
 
-		mBraceletRight = getStaticImage(&quot;InventoryWindow/BraceletRight&quot;);
+		mBraceletRight = getWindow(&quot;InventoryWindow/BraceletRight&quot;);
 		mBraceletRight-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_BRACELET));
 
-		mArmor = getStaticImage(&quot;InventoryWindow/Armor&quot;);
+		mArmor = getWindow(&quot;InventoryWindow/Armor&quot;);
 		mArmor-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_ARMOR));
 
-		mCape = getStaticImage(&quot;InventoryWindow/Cape&quot;);
+		mCape = getWindow(&quot;InventoryWindow/Cape&quot;);
 		mCape-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_CAPE));
 
-		mBracers = getStaticImage(&quot;InventoryWindow/Bracers&quot;);
+		mBracers = getWindow(&quot;InventoryWindow/Bracers&quot;);
 		mBracers-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_BRACERS));
 
-		mBackpack = getStaticImage(&quot;InventoryWindow/Backpack&quot;);
+		mBackpack = getWindow(&quot;InventoryWindow/Backpack&quot;);
 		mBackpack-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_BACKPACK));
 
-		mBelt = getStaticImage(&quot;InventoryWindow/Belt&quot;);
+		mBelt = getWindow(&quot;InventoryWindow/Belt&quot;);
 		mBelt-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_BELT));
 
-		mNecklace = getStaticImage(&quot;InventoryWindow/Necklace&quot;);
+		mNecklace = getWindow(&quot;InventoryWindow/Necklace&quot;);
 		mNecklace-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_NECKLACE));
 
-		mTrousers = getStaticImage(&quot;InventoryWindow/Trousers&quot;);
+		mTrousers = getWindow(&quot;InventoryWindow/Trousers&quot;);
 		mTrousers-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_TROUSERS));
 
-		mShinbone = getStaticImage(&quot;InventoryWindow/Shinbone&quot;);
+		mShinbone = getWindow(&quot;InventoryWindow/Shinbone&quot;);
 		mShinbone-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_SHINBONE));
 
-		mBoots = getStaticImage(&quot;InventoryWindow/Boots&quot;);
+		mBoots = getWindow(&quot;InventoryWindow/Boots&quot;);
 		mBoots-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(Item::ITEMTYPE_BOOTS));
 
 		// gib ihnen die Funktionalit&#228;t Items aufzunehmen
@@ -644,11 +645,12 @@
 
 			mContainerTabs-&gt;addTab(containerWindow);
 
-			CEGUI::StaticImage* containerSpace = static_cast&lt;CEGUI::StaticImage*&gt;(CEGUI::WindowManager::getSingletonPtr()-&gt;createWindow(&quot;RastullahLook/Container&quot;, &quot;InventoryWindow/Tabs/&quot;+container-&gt;getName()+&quot;/Content&quot;));
+			CEGUI::Window* containerSpace = static_cast&lt;CEGUI::Window*&gt;(CEGUI::WindowManager::getSingletonPtr()-&gt;createWindow(&quot;RastullahLook/Container&quot;, &quot;InventoryWindow/Tabs/&quot;+container-&gt;getName()+&quot;/Content&quot;));
 			
 			containerSpace-&gt;setVerticalAlignment(CEGUI::VA_CENTRE);
 			containerSpace-&gt;setHorizontalAlignment(CEGUI::HA_CENTRE);
-            containerSpace-&gt;setWindowSize(UVector2(cegui_absdim(container-&gt;getVolume().first*30), cegui_absdim(container-&gt;getVolume().second*30)));
+            containerSpace-&gt;setSize(UVector2(cegui_absdim(container-&gt;getVolume().first*30),
+                cegui_absdim(container-&gt;getVolume().second*30)));
 			containerSpace-&gt;setUserData(container);
 			containerWindow-&gt;addChildWindow(containerSpace);
 
@@ -831,8 +833,9 @@
 			// Erzeuge einen Handler f&#252;r Drag and Drop
 			DragContainer* itemhandler = static_cast&lt;DragContainer*&gt;(
 				CEGUI::WindowManager::getSingletonPtr()-&gt;createWindow(&quot;DragContainer&quot;, Ogre::StringConverter::toString(itemCnt) + item-&gt;getName()));
-			itemhandler-&gt;setWindowPosition(position);
-			itemhandler-&gt;setWindowSize(UVector2(cegui_absdim(item-&gt;getSize().first*30), cegui_absdim(item-&gt;getSize().second*30))); 
+			itemhandler-&gt;setPosition(position);
+			itemhandler-&gt;setSize(UVector2(cegui_absdim(item-&gt;getSize().first*30),
+                cegui_absdim(item-&gt;getSize().second*30))); 
 			itemhandler-&gt;setUserString(&quot;ItemType&quot;,Item::getItemTypeString(item-&gt;getItemType()));
 			itemhandler-&gt;setUserData(item);
 			itemhandler-&gt;setTooltipText(item-&gt;getName());
@@ -849,12 +852,14 @@
 					&quot;RastullahLook/Item&quot;, 
 					tempName + &quot;Item&quot;);
 
-			itemWindow-&gt;setWindowPosition(UVector2(cegui_reldim(0), cegui_reldim(0)));
-			itemWindow-&gt;setWindowSize(UVector2(cegui_absdim(item-&gt;getSize().first*30), cegui_absdim(item-&gt;getSize().second*30)));
+			itemWindow-&gt;setPosition(UVector2(cegui_reldim(0), cegui_reldim(0)));
+			itemWindow-&gt;setSize(UVector2(cegui_absdim(item-&gt;getSize().first*30),
+                cegui_absdim(item-&gt;getSize().second*30)));
 			itemWindow-&gt;setProperty(&quot;FrameEnabled&quot;, &quot;false&quot;);
 			itemWindow-&gt;setProperty(&quot;BackgroundColour&quot;, mColorItemNormal);
 			// Gib dem Item noch ein Bild...
-			itemWindow-&gt;setProperty(&quot;Image&quot;, CeGuiString(&quot;set:ModelThumbnails image:&quot;) + item-&gt;getImageName());
+			itemWindow-&gt;setProperty(&quot;Image&quot;,
+                CeGuiString(&quot;set:ModelThumbnails image:&quot;) + item-&gt;getImageName());
 			itemWindow-&gt;disable(); 
 
 			itemhandler-&gt;addChildWindow(itemWindow);
@@ -910,7 +915,7 @@
 				if (item-&gt;getDescription().length() &gt; 200)
 				{
 					// Scrollbalken aktivieren
-					mDescription-&gt;setVerticalScrollbarEnabled(true);
+                    mDescription-&gt;setShowVertScrollbar(true);
 				}
 				else 
 				{
@@ -929,7 +934,7 @@
 	void InventoryWindow::initRenderToTexture()
 	{
 		// Das Feld, in das gerendert werden soll (TransparentStaticImage)
-		mItemRenderImage = getStaticImage(&quot;InventoryWindow/ItemPicture&quot;);
+		mItemRenderImage = getWindow(&quot;InventoryWindow/ItemPicture&quot;);
 
 		SceneManager* tempManager = CoreSubsystem::getSingleton().
 				getWorld()-&gt;getSceneManager();
@@ -999,30 +1004,36 @@
 			loadCamera();
 
 			// Item setzen und Schnappschuss machen
-			mRenderItemEntity = tempManager-&gt;createEntity(&quot;inventoryRenderedItem&quot;, (static_cast&lt;MeshObject*&gt;(item-&gt;getActor()-&gt;getControlledObject()))-&gt;getMeshName());
+			mRenderItemEntity = tempManager-&gt;createEntity(&quot;inventoryRenderedItem&quot;,
+                (static_cast&lt;MeshObject*&gt;(item-&gt;getActor()-&gt;getControlledObject()))-&gt;getMeshName());
 			mInventoryItemNode-&gt;attachObject(mRenderItemEntity);
 		
 			// Das Item hat einen Actor
-			//mItemActor = ActorManager::getSingleton().createMeshActor(&quot;inventoryRenderedItem&quot;,(static_cast&lt;MeshObject*&gt;(item-&gt;getActor()-&gt;getControlledObject()))-&gt;getMeshName());
+			//mItemActor = ActorManager::getSingleton().createMeshActor(&quot;inventoryRenderedItem&quot;,
+            //  (static_cast&lt;MeshObject*&gt;(item-&gt;getActor()-&gt;getControlledObject()))-&gt;getMeshName());
 			//mItemActor-&gt;placeIntoScene(Ogre::Vector3(0,-101055.3,-0.2));
-			mItemRenderImage-&gt;setSize(CEGUI::Absolute,CEGUI::Size(128,128));
-			mItemRenderImage-&gt;setBackgroundImage(&amp;mImageSet-&gt;getImage((CEGUI::utf8*)&quot;InventoryItemRttImage&quot;));
+            mItemRenderImage-&gt;setSize(CeGuiHelper::asAbsolute(CEGUI::Vector2(128, 128)));
+			mItemRenderImage-&gt;setProperty(&quot;Image&quot;,
+                &quot;set:&quot; + mImageSet-&gt;getName() + &quot; image:InventoryItemRttImage&quot;);
 			mRenderTexture-&gt;update();
 
-		} else if (item-&gt;getImageName() != &quot;&quot;) {
-			mItemRenderImage-&gt;setBackgroundImage(&quot;ModelThumbnails&quot;, item-&gt;getImageName());
+		}
+        else if (item-&gt;getImageName() != &quot;&quot;)
+        {
+            mItemRenderImage-&gt;setProperty(&quot;Image&quot;,
+                &quot;set:ModelThumbnails image:&quot; + item-&gt;getImageName());
 
 			float div = item-&gt;getSize().first / float(item-&gt;getSize().second);
 
 			if (div &lt; 1)
 			{
 				//schmales Item
-				mItemRenderImage-&gt;setSize(CEGUI::Absolute,CEGUI::Size(128*div, 128));
+                mItemRenderImage-&gt;setSize(CeGuiHelper::asAbsolute(CEGUI::Vector2(128*div, 128)));
 			}
 			else
 			{
 				// breites oder quadratisches Item
-				mItemRenderImage-&gt;setSize(CEGUI::Absolute,CEGUI::Size(128, 128/div));
+                mItemRenderImage-&gt;setSize(CeGuiHelper::asAbsolute(CEGUI::Vector2(128, 128/div)));
 			}
 		}
 	}
@@ -1036,7 +1047,8 @@
 		mCameraActor-&gt;getPhysicalThing()-&gt;freeze();
 
 		mRenderTexture-&gt;setAutoUpdated(false);
-        mRenderViewport = mRenderTexture-&gt;addViewport( (static_cast&lt;CameraObject*&gt;(mCameraActor-&gt;getControlledObject()))-&gt;getCamera());
+        mRenderViewport = mRenderTexture-&gt;addViewport(
+            (static_cast&lt;CameraObject*&gt;(mCameraActor-&gt;getControlledObject()))-&gt;getCamera());
         mRenderViewport-&gt;setOverlaysEnabled(false);
         mRenderViewport-&gt;setClearEveryFrame(true);
         mRenderViewport-&gt;setBackgroundColour( ColourValue::Black );
@@ -1074,8 +1086,8 @@
 	{
 		// Errechnung der Koordinaten, in welchem K&#228;stchen denn nun gedroppt wird
 		Point absMouse = MouseCursor::getSingleton().getPosition();
-		Point scrnPt = ddea.window-&gt;windowToScreen( Point(0,0) ); 
-		Point relMouse = absMouse- ddea.dragDropItem-&gt;windowToScreen( Point(0,0) );
+        Point scrnPt = ddea.window-&gt;getPixelRect().getPosition();
+		Point relMouse = absMouse - ddea.dragDropItem-&gt;getPixelRect().getPosition();
 
 		//Bug in CeGUI (1. rel Mouse koordinate spinnt
 		if (relMouse.d_x &lt; 0) {
@@ -1093,21 +1105,32 @@
 		pointInBackpack -= relMouse;
 
 		// Position des n&#228;chsten K&#228;stchens bestimmen		
-		if (pointInBackpack.d_x &lt; 0){
+		if (pointInBackpack.d_x &lt; 0)
+        {
 			pointInBackpack.d_x = 0;
 		}
-		if (pointInBackpack.d_y &lt; 0) {
+		if (pointInBackpack.d_y &lt; 0)
+        {
 			pointInBackpack.d_y = 0;
 		}
 
-		if (pointInBackpack.d_x &gt; 16){
-			pointInBackpack.d_x = (int(pointInBackpack.d_x) + 14) - ((int(pointInBackpack.d_x) + 14) % 30);
-		} else {
+		if (pointInBackpack.d_x &gt; 16)
+        {
+			pointInBackpack.d_x = (int(pointInBackpack.d_x) + 14) -
+                ((int(pointInBackpack.d_x) + 14) % 30);
+		}
+        else
+        {
 			pointInBackpack.d_x = 0;
 		}
-		if (pointInBackpack.d_y &gt; 16){
-			pointInBackpack.d_y = (int(pointInBackpack.d_y) + 14 ) - ((int(pointInBackpack.d_y) + 14) % 30);
-		} else {
+
+		if (pointInBackpack.d_y &gt; 16)
+        {
+			pointInBackpack.d_y = (int(pointInBackpack.d_y) + 14 ) -
+                ((int(pointInBackpack.d_y) + 14) % 30);
+		}
+        else
+        {
 			pointInBackpack.d_y = 0;
 		}
 

Modified: rl/trunk/engine/ui/src/JournalWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/JournalWindow.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/JournalWindow.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -48,8 +48,8 @@
             CEGUI::Listbox::EventSelectionChanged,
             boost::bind(&amp;JournalWindow::updateQuestSelection, this));
 
-        mQuestTitle = getStaticText(&quot;JournalWindow/Quests/QuestTitle&quot;);
-        mQuestState = getStaticText(&quot;JournalWindow/Quests/QuestState&quot;);
+        mQuestTitle = getWindow(&quot;JournalWindow/Quests/QuestTitle&quot;);
+        mQuestState = getWindow(&quot;JournalWindow/Quests/QuestState&quot;);
         mQuestDescription = getMultiLineEditbox(&quot;JournalWindow/Quests/QuestDescription&quot;);
         mQuestDescription-&gt;setReadOnly(true);
 
@@ -59,15 +59,13 @@
             CEGUI::Listbox::EventSelectionChanged,
             boost::bind(&amp;JournalWindow::updateJournalEntrySelection, this));
 
-        mJournalEntryTitle = getStaticText(&quot;JournalWindow/Journal/JournalEntryTitle&quot;);
+        mJournalEntryTitle = getWindow(&quot;JournalWindow/Journal/JournalEntryTitle&quot;);
         mJournalEntryText = getMultiLineEditbox(&quot;JournalWindow/Journal/JournalEntryText&quot;);
         mJournalEntryText-&gt;setReadOnly(true);
 
-        mSelectionColour = 
-            PropertyHelper::stringToColour(
-            mQuests-&gt;getProperty(&quot;DefaultSelectionColour&quot;));
-        mSelectionImageset = mQuests-&gt;getProperty(&quot;DefaultSelectionImageset&quot;);
-        mSelectionBrush = mQuests-&gt;getProperty(&quot;DefaultSelectionBrush&quot;);
+        mSelectionColour = CEGUI::ListboxItem::DefaultSelectionColour;
+        mSelectionImageset = &quot;Rastullah-Images&quot;;
+        mSelectionBrush = &quot;ListboxSelectionBrush&quot;;
 
         updateQuests();
         updateJournal();

Modified: rl/trunk/engine/ui/src/PlaylistWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/PlaylistWindow.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/PlaylistWindow.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -32,8 +32,8 @@
 	: CeGuiWindow(&quot;playlistwindow.xml&quot;, WND_MOUSE_INPUT)
 {
 	mPlaylistTable = getMultiColumnList(&quot;PlaylistSheet/PlaylistSheet/Table&quot;);
-	mPlaylistTable-&gt;addColumn((utf8*)&quot;Name&quot;, 0, 0.5);
-	mPlaylistTable-&gt;addColumn((utf8*)&quot;Dauer&quot;, 1, 0.3);
+	mPlaylistTable-&gt;addColumn((utf8*)&quot;Name&quot;, 0, cegui_reldim(0.5));
+	mPlaylistTable-&gt;addColumn((utf8*)&quot;Dauer&quot;, 1, cegui_reldim(0.3));
 	mPlaylistTable-&gt;setUserSortControlEnabled(false);
 	
     /* getWindow(&quot;PlaylistWindow&quot;)-&gt;subscribeEvent(

Modified: rl/trunk/engine/ui/src/UiSubsystem.cpp
===================================================================
--- rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -42,7 +42,7 @@
 #include &quot;WindowFactory.h&quot;
 #include &quot;WindowManager.h&quot;
 #include &quot;World.h&quot;
-
+#include &quot;CeGuiHelper.h&quot;
 #include &lt;OgreCEGUIRenderer.h&gt;
 #include &lt;CEGUISystem.h&gt;
 #include &lt;OgreCEGUIResourceProvider.h&gt;
@@ -113,7 +113,9 @@
 		LOG_MESSAGE2(Logger::UI,
             &quot;Initialisiere CEGUI-System&quot;, &quot;UiSubsystem::initializeUiSubsystem&quot;);
         mGuiResourceProvider = new OgreCEGUIResourceProvider();
-		mGuiSystem = new System(mGuiRenderer, NULL, mGuiResourceProvider, (utf8*)&quot;cegui.config&quot;);
+        CEGUI::System::setDefaultXMLParserName(&quot;XercesParser&quot;);
+		mGuiSystem = new System(mGuiRenderer, mGuiResourceProvider,
+            NULL, NULL, (utf8*)&quot;cegui.config&quot;);
 		CEGUI::Logger::getSingleton().setLoggingLevel(
             rl::Logger::getSingleton().getCeGuiLogDetail());
 		LOG_MESSAGE2(Logger::UI,
@@ -130,14 +132,14 @@
 		LOG_MESSAGE2(Logger::UI, &quot;Rootfenster&quot;,
             &quot;UiSubsystem::initializeUiSubsystem&quot;);
 		sheet-&gt;setSize(
-			Absolute, 
-			CEGUI::Size(Ogre::Root::getSingleton().getAutoCreatedWindow()-&gt;getWidth(), 
-				Ogre::Root::getSingleton().getAutoCreatedWindow()-&gt;getHeight()));
-		sheet-&gt;setPosition(Absolute, CEGUI::Point(0, 0));
+            CeGuiHelper::asAbsolute(CEGUI::Vector2(
+                Ogre::Root::getSingleton().getAutoCreatedWindow()-&gt;getWidth(), 
+				Ogre::Root::getSingleton().getAutoCreatedWindow()-&gt;getHeight())));
+		sheet-&gt;setPosition(CeGuiHelper::asAbsolute(CEGUI::Point(0, 0)));
 		System::getSingleton().setGUISheet(sheet);
         sheet-&gt;setZOrderingEnabled(true);
         sheet-&gt;moveToBack();
-		System::getSingleton().setTooltip(&quot;RastullahLook/Tooltip&quot;);
+		System::getSingleton().setDefaultTooltip(&quot;RastullahLook/Tooltip&quot;);
         LOG_MESSAGE2(Logger::UI, &quot;CEGUI geladen&quot;,
             &quot;UiSubsystem::initializeUiSubsystem&quot;);
 
@@ -303,8 +305,6 @@
 		if (mCharacterController != NULL)
 		{
             setCharacterController(CharacterController::CTRL_NONE);
-            LOG_MESSAGE(Logger::UI, 
-                &quot;Old CharacterController deleted.&quot;);
 			setActiveCharacter(NULL);
 		}
     }

Modified: rl/trunk/engine/ui/src/WindowFactory.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowFactory.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/WindowFactory.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -448,13 +448,13 @@
                 wnd-&gt;getName()
                 + (wnd-&gt;isVisible() ? &quot; vis&quot; : &quot; nvis&quot;)
                 + &quot; @&quot;
-                + StringConverter::toString(wnd-&gt;getAbsoluteXPosition())
+                + StringConverter::toString(wnd-&gt;getPixelRect().getPosition().d_x)
                 + &quot;, &quot;
-                + StringConverter::toString(wnd-&gt;getAbsoluteYPosition())
+                + StringConverter::toString(wnd-&gt;getPixelRect().getPosition().d_y)
                 + &quot; &quot;
-                + StringConverter::toString(wnd-&gt;getAbsoluteWidth())
+                + StringConverter::toString(wnd-&gt;getPixelSize().d_width)
                 + &quot;, &quot;
-                + StringConverter::toString(wnd-&gt;getAbsoluteHeight()));
+                + StringConverter::toString(wnd-&gt;getPixelSize().d_height));
         }
     }
 }

Modified: rl/trunk/engine/ui/src/WindowUpdater.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowUpdater.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/ui/src/WindowUpdater.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -15,6 +15,7 @@
  */
 
 #include &quot;CeGuiWindow.h&quot;
+#include &quot;CeGuiHelper.h&quot;
 #include &quot;CoreSubsystem.h&quot;
 #include &quot;Exception.h&quot;
 #include &quot;WindowManager.h&quot;
@@ -32,7 +33,7 @@
 	:	mWindow(window),
 		mAction(action)
 	{
-		mCurrentPoint = mWindow-&gt;getWindow()-&gt;getAbsolutePosition();
+        mCurrentPoint = mWindow-&gt;getWindow()-&gt;getPixelRect().getPosition();
 		mCurrentAlpha = mWindow-&gt;getWindow()-&gt;getAlpha();
 	}
 
@@ -43,7 +44,7 @@
 	:	WindowUpdateTask(window, action),
 		mTargetPoint(targetX, targetY)
 	{
-		CEGUI::Point delta = mTargetPoint - mWindow-&gt;getWindow()-&gt;getAbsolutePosition();
+		CEGUI::Point delta = mTargetPoint - mWindow-&gt;getWindow()-&gt;getPixelRect().getPosition();
 		mRatePoint = CEGUI::Point(delta.d_x / mTime, delta.d_y / mTime);
 	}
 
@@ -206,7 +207,8 @@
 			WindowUpdateTask* task = *it;
 			task-&gt;run(elapsedTime);
 			CeGuiWindow* wnd = task-&gt;getWindow();
-			wnd-&gt;getWindow()-&gt;setPosition(CEGUI::Absolute, task-&gt;getCurrentPosition());
+            wnd-&gt;getWindow()-&gt;setPosition(
+                CeGuiHelper::asAbsolute(task-&gt;getCurrentPosition()));
 			wnd-&gt;getWindow()-&gt;setAlpha(task-&gt;getCurrentAlpha());
 			if (task-&gt;isFinished())
 			{
@@ -310,8 +312,8 @@
 				window, 
 				time,
 				destroy ? WindowUpdateTask::WND_DESTROY : WindowUpdateTask::WND_HIDE, 
-				-wnd-&gt;getAbsoluteWidth(), 
-				wnd-&gt;getAbsoluteYPosition());
+                -wnd-&gt;getPixelSize().d_width, 
+                wnd-&gt;getPixelRect().getPosition().d_y);
 		mTasks.insert(task);
 		window-&gt;setFading(true);
 		window-&gt;_setUpdateTask(task);

Modified: rl/trunk/engine/uicomponents/RlUIComponents2005.vcproj
===================================================================
--- rl/trunk/engine/uicomponents/RlUIComponents2005.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/uicomponents/RlUIComponents2005.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -225,6 +225,109 @@
 				ExcludedFromBuild=&quot;false&quot;
 			/&gt;
 		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./lib/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;2&quot;
+			UseOfMFC=&quot;0&quot;
+			ATLMinimizesCRunTimeLibraryUsage=&quot;false&quot;
+			CharacterSet=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+				PreprocessorDefinitions=&quot;NDEBUG&quot;
+				MkTypLibCompatible=&quot;true&quot;
+				SuppressStartupBanner=&quot;true&quot;
+				TargetEnvironment=&quot;1&quot;
+				TypeLibraryName=&quot;.\lib\Release/Rastullah.tlb&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				Optimization=&quot;3&quot;
+				EnableIntrinsicFunctions=&quot;true&quot;
+				FavorSizeOrSpeed=&quot;1&quot;
+				AdditionalIncludeDirectories=&quot;.\include;.\components\include;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\cegui_mk2\include&quot;
+				PreprocessorDefinitions=&quot;WITH_FMOD3;NDEBUG,_WINDOWS,WIN32,RLUICOMPONENTS_EXPORT;_CRT_SECURE_NO_DEPRECATE&quot;
+				StringPooling=&quot;false&quot;
+				ExceptionHandling=&quot;1&quot;
+				RuntimeLibrary=&quot;2&quot;
+				BufferSecurityCheck=&quot;false&quot;
+				RuntimeTypeInfo=&quot;true&quot;
+				UsePrecompiledHeader=&quot;0&quot;
+				PrecompiledHeaderFile=&quot;.\obj\Release/Rastullah.pch&quot;
+				AssemblerListingLocation=&quot;.\obj\Release/&quot;
+				ObjectFile=&quot;.\obj\Release/&quot;
+				ProgramDataBaseFileName=&quot;.\obj\Release/&quot;
+				WarningLevel=&quot;3&quot;
+				SuppressStartupBanner=&quot;true&quot;
+				DebugInformationFormat=&quot;3&quot;
+				CompileAs=&quot;0&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+				PreprocessorDefinitions=&quot;NDEBUG&quot;
+				Culture=&quot;2057&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				IgnoreImportLibrary=&quot;true&quot;
+				AdditionalOptions=&quot;/MACHINE:I386&quot;
+				AdditionalDependencies=&quot;CEGUIBase.lib OgreMain.lib&quot;
+				OutputFile=&quot;$(OutDir)/RlUiComponents.dll&quot;
+				LinkIncremental=&quot;1&quot;
+				SuppressStartupBanner=&quot;true&quot;
+				AdditionalLibraryDirectories=&quot;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenew\OgreMain\lib\Release&quot;
+				GenerateDebugInformation=&quot;true&quot;
+				ProgramDatabaseFile=&quot;$(TargetDir)$(TargetName).pdb&quot;
+				SubSystem=&quot;2&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+				Description=&quot;Kopiere DLL&quot;
+				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
+				ExcludedFromBuild=&quot;false&quot;
+			/&gt;
+		&lt;/Configuration&gt;
 	&lt;/Configurations&gt;
 	&lt;References&gt;
 	&lt;/References&gt;

Modified: rl/trunk/engine/uicomponents/src/ListboxWrappedTextItem.cpp
===================================================================
--- rl/trunk/engine/uicomponents/src/ListboxWrappedTextItem.cpp	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/engine/uicomponents/src/ListboxWrappedTextItem.cpp	2007-01-08 20:06:52 UTC (rev 2949)
@@ -101,10 +101,10 @@
 
         if (d_owner != NULL)
         {
-            size.d_width = d_owner-&gt;getAbsoluteSize().d_width - 25;
+            size.d_width = d_owner-&gt;getWidth().asAbsolute(0.0f) - 25.0f;
         }
 
-        const Font* font = getFont();
+        Font* font = const_cast&lt;Font*&gt;(getFont());
 
         if (font != NULL)
         {
@@ -142,7 +142,7 @@
                 getModulateAlphaColourRect(d_selectCols, alpha));
         }
 
-        const Font* font = getFont();
+        Font* font = const_cast&lt;Font*&gt;(getFont());
 
         if (font)
         {
@@ -174,7 +174,7 @@
                 getModulateAlphaColourRect(d_selectCols, alpha), clipper);
         }
 
-        const Font* font = getFont();
+        Font* font = const_cast&lt;Font*&gt;(getFont());
 
         if (font)
         {

Modified: rl/trunk/plugins/fmod4driver/RlFmod4Driver.vcproj
===================================================================
--- rl/trunk/plugins/fmod4driver/RlFmod4Driver.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/plugins/fmod4driver/RlFmod4Driver.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -173,6 +173,78 @@
 				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
 			/&gt;
 		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./lib/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				WholeProgramOptimization=&quot;false&quot;
+				AdditionalIncludeDirectories=&quot;.\include;..\..\engine\common\include;..\..\engine\core\include;..\..\engine\ui\include;..\..\dependencies\fmod4\api\inc;..\..\dependencies\cegui_mk2\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\ogrenew\dependencies\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;&quot;
+				PreprocessorDefinitions=&quot;WIN32;NDEBUG;_WINDOWS;_USRDLL;RLFMOD4DRIVER_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
+				RuntimeLibrary=&quot;2&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				AdditionalDependencies=&quot;RlCommon.lib RlCore.lib RlUi.lib OgreMain.lib ceguibase.lib fmodex_vc.lib&quot;
+				OutputFile=&quot;$(OutDir)\$(ProjectName).dll&quot;
+				AdditionalLibraryDirectories=&quot;..\..\engine\common\lib\Release;..\..\engine\core\lib\Release;..\..\engine\multimedia\lib\Release;..\..\engine\ui\lib\Release;..\..\dependencies\boost\lib;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\fmod4\api\lib&quot;
+				ModuleDefinitionFile=&quot;Fmod4DriverDllExports.def&quot;
+				GenerateDebugInformation=&quot;true&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+				Description=&quot;Kopiere DLL&quot;
+				CommandLine=&quot;copy &quot;$(TargetPath)&quot; &quot;$(ProjectDir)..\..\rl_dist\&quot;&quot;
+			/&gt;
+		&lt;/Configuration&gt;
 	&lt;/Configurations&gt;
 	&lt;References&gt;
 	&lt;/References&gt;

Modified: rl/trunk/plugins/openaldriver/RlOpenALDriver.vcproj
===================================================================
--- rl/trunk/plugins/openaldriver/RlOpenALDriver.vcproj	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/plugins/openaldriver/RlOpenALDriver.vcproj	2007-01-08 20:06:52 UTC (rev 2949)
@@ -160,6 +160,76 @@
 				Name=&quot;VCPostBuildEventTool&quot;
 			/&gt;
 		&lt;/Configuration&gt;
+		&lt;Configuration
+			Name=&quot;Release with Symbols|Win32&quot;
+			OutputDirectory=&quot;./lib/Release&quot;
+			IntermediateDirectory=&quot;./obj/Release&quot;
+			ConfigurationType=&quot;2&quot;
+			&gt;
+			&lt;Tool
+				Name=&quot;VCPreBuildEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCustomBuildTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXMLDataGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebServiceProxyGeneratorTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCMIDLTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCCLCompilerTool&quot;
+				WholeProgramOptimization=&quot;false&quot;
+				AdditionalIncludeDirectories=&quot;.\include;..\..\engine\common\include;..\..\engine\core\include;..\..\engine\ui\include;..\..\dependencies\openal\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\ogrenew\dependencies\include;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;&quot;
+				PreprocessorDefinitions=&quot;WIN32;NDEBUG;_WINDOWS;_USRDLL;RLOPENALDRIVER_EXPORTS;_CRT_SECURE_NO_DEPRECATE&quot;
+				RuntimeLibrary=&quot;2&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManagedResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCResourceCompilerTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPreLinkEventTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCLinkerTool&quot;
+				AdditionalDependencies=&quot;RlCommon.lib RlCore.lib RlUi.lib OgreMain.lib ceguibase.lib&quot;
+				OutputFile=&quot;$(OutDir)\$(ProjectName).dll&quot;
+				AdditionalLibraryDirectories=&quot;..\..\engine\common\lib\Release;..\..\engine\core\lib\Release;..\..\engine\multimedia\lib\Release;..\..\engine\ui\lib\Release;..\..\dependencies\boost\lib;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\OpenAL\libs\Win32&quot;
+				ModuleDefinitionFile=&quot;OpenALDriverDllExports.def&quot;
+				GenerateDebugInformation=&quot;true&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCALinkTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCManifestTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCXDCMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCBscMakeTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCFxCopTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCAppVerifierTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCWebDeploymentTool&quot;
+			/&gt;
+			&lt;Tool
+				Name=&quot;VCPostBuildEventTool&quot;
+			/&gt;
+		&lt;/Configuration&gt;
 	&lt;/Configurations&gt;
 	&lt;References&gt;
 	&lt;/References&gt;

Modified: rl/trunk/tools/copy_dependencies.bat
===================================================================
--- rl/trunk/tools/copy_dependencies.bat	2007-01-08 20:05:39 UTC (rev 2948)
+++ rl/trunk/tools/copy_dependencies.bat	2007-01-08 20:06:52 UTC (rev 2949)
@@ -35,11 +35,10 @@
 copy &quot;%OGREHOME%\Samples\Common\CEGUIRenderer\bin\Debug\OgreGUIRenderer_d.dll&quot; &quot;%RL_DIST%&quot;
 copy &quot;%OGREHOME%\Samples\Common\CEGUIRenderer\bin\Release\OgreGUIRenderer.dll&quot; &quot;%RL_DIST%&quot;
 
-copy &quot;%OGREHOME%\Dependencies\Bin\%BUILD%\cg.dll&quot; &quot;%RL_DIST%&quot;
-copy &quot;%OGREHOME%\Dependencies\Bin\%BUILD%\ilu.dll&quot; &quot;%RL_DIST%&quot;
-copy &quot;%OGREHOME%\Dependencies\Bin\%BUILD%\ilut.dll&quot; &quot;%RL_DIST%&quot;
-copy &quot;%OGREHOME%\Dependencies\Bin\%BUILD%\devil.dll&quot; &quot;%RL_DIST%&quot;
-copy &quot;%OGREHOME%\Dependencies\Bin\%BUILD%\zlib1.dll&quot; &quot;%RL_DIST%&quot;
+copy &quot;%OGREHOME%\Samples\Common\Bin\%BUILD%\cg.dll&quot; &quot;%RL_DIST%&quot;
+copy &quot;%OGREHOME%\Samples\Common\Bin\%BUILD%\freeimage.dll&quot; &quot;%RL_DIST%&quot;
+copy &quot;%OGREHOME%\Samples\Common\Bin\%BUILD%\freeimaged.dll&quot; &quot;%RL_DIST%&quot;
+copy &quot;%OGREHOME%\Samples\Common\Bin\%BUILD%\zlib1.dll&quot; &quot;%RL_DIST%&quot;
 
 REM Boost Dateien kopieren
 REM ---------------------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000019.html">[Dsa-hl-svn] r2948 - dependencies/OgreNewt/src
</A></li>
	<LI>Next message: <A HREF="000021.html">[Dsa-hl-svn] r2950 - in modules: common/gui/fonts	common/gui/imagesets common/gui/schemes common/gui/windows	common/gui/windows/buttons common/materials config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20">[ date ]</a>
              <a href="thread.html#20">[ thread ]</a>
              <a href="subject.html#20">[ subject ]</a>
              <a href="author.html#20">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
