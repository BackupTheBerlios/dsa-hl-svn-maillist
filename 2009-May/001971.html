<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r4914 - in rl/trunk/editors/Lockenwickler/src: . media	media/icons media/terrain
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4914%20-%20in%20rl/trunk/editors/Lockenwickler/src%3A%20.%20media%0A%09media/icons%20media/terrain&In-Reply-To=%3C200905031148.n43BmjGG027504%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001970.html">
   <LINK REL="Next"  HREF="001972.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r4914 - in rl/trunk/editors/Lockenwickler/src: . media	media/icons media/terrain</H1>
    <B>fusion2 at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4914%20-%20in%20rl/trunk/editors/Lockenwickler/src%3A%20.%20media%0A%09media/icons%20media/terrain&In-Reply-To=%3C200905031148.n43BmjGG027504%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r4914 - in rl/trunk/editors/Lockenwickler/src: . media	media/icons media/terrain">fusion2 at mail.berlios.de
       </A><BR>
    <I>Sun May  3 13:48:45 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001970.html">[Dsa-hl-svn] r4913 - rl/trunk/editors/Lockenwickler/src
</A></li>
        <LI>Next message: <A HREF="001972.html">[Dsa-hl-svn] r4915 - in rl/trunk/editors/Lockenwickler: . src	src/media src/media/help ui files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1971">[ date ]</a>
              <a href="thread.html#1971">[ thread ]</a>
              <a href="subject.html#1971">[ subject ]</a>
              <a href="author.html#1971">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: fusion2
Date: 2009-05-03 13:47:29 +0200 (Sun, 03 May 2009)
New Revision: 4914

Added:
   rl/trunk/editors/Lockenwickler/src/MyTerrainManager.py
   rl/trunk/editors/Lockenwickler/src/Ui_MyTerrainManagerDock.py
   rl/trunk/editors/Lockenwickler/src/media/icons/terrain.png
   rl/trunk/editors/Lockenwickler/src/media/icons/terrain_small.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/
   rl/trunk/editors/Lockenwickler/src/media/terrain/ETShader.program
   rl/trunk/editors/Lockenwickler/src/media/terrain/ETTerrain.material
   rl/trunk/editors/Lockenwickler/src/media/terrain/ETcoverage.0.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/ETcoverage.1.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/ETlightmap.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/ETterrain.cfg
   rl/trunk/editors/Lockenwickler/src/media/terrain/ETterrain.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/PSLighting.cg
   rl/trunk/editors/Lockenwickler/src/media/terrain/PSSplat.cg
   rl/trunk/editors/Lockenwickler/src/media/terrain/PSSplat2.cg
   rl/trunk/editors/Lockenwickler/src/media/terrain/VSLodMorph.cg
   rl/trunk/editors/Lockenwickler/src/media/terrain/VSLodMorph2.cg
   rl/trunk/editors/Lockenwickler/src/media/terrain/brush.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/splatting0.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/splatting1.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/splatting2.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/splatting3.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/splatting4.png
   rl/trunk/editors/Lockenwickler/src/media/terrain/splatting5.png
Modified:
   rl/trunk/editors/Lockenwickler/src/Lockenwickler.py
   rl/trunk/editors/Lockenwickler/src/ModuleManager.py
Log:
- added basic terrain support


Modified: rl/trunk/editors/Lockenwickler/src/Lockenwickler.py
===================================================================
--- rl/trunk/editors/Lockenwickler/src/Lockenwickler.py	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/Lockenwickler.py	2009-05-03 11:47:29 UTC (rev 4914)
@@ -41,8 +41,8 @@
 from PivotRenderQueueListener import *
 from ModuleDirectoryView import *
 from TriggerManager import *
+from MyTerrainManager import MyTerrainManager
 
-
 import OgreMainWindow
 import ogre.renderer.OGRE as og
 
@@ -234,6 +234,9 @@
         self.actionConsole_Window = self.createAction(&quot;&amp;Console Window&quot;,  self.toggleConsoleWindow,  &quot;Alt+C&quot;,  &quot;console.png&quot;,  &quot;Console Window&quot;)
         self.actionConsole_Window.setObjectName(&quot;actionConsole_Window&quot;)
         
+        self.actionTerrainTools_Window = self.createAction(&quot;&amp;Terrain Tools&quot;,  self.toggleTerrainToolsWindow,  &quot;Alt+T&quot;,  &quot;terrain_small.png&quot;,  &quot;Console Window&quot;)
+        self.actionTerrainTools_Window.setObjectName(&quot;actionTerrainTools_Window&quot;)
+        
         self.actionToggleViewportGrid = self.createAction(&quot;&amp;Toggle Grid&quot;,  self.toggleViewportGrid,  &quot;Alt+G&quot;,  &quot;console.png&quot;,  &quot;Toggle Viewport Grid&quot;)
         self.actionToggleViewportGrid.setObjectName(&quot;actionToggleViewportGrid&quot;)
 
@@ -268,6 +271,7 @@
         self.menuView.addAction(self.actionMaterial_Selection)
         self.menuView.addAction(self.actionGameObjectClass_Selection)
         self.menuView.addAction(self.actionConsole_Window)
+        self.menuView.addAction(self.actionTerrainTools_Window)
         self.menuView.addAction(self.actionToggleViewportGrid)
         
         self.menubar.addAction(self.menuFile.menuAction())
@@ -312,7 +316,9 @@
         self.OgreMainWinSceneMgr.addRenderQueueListener(self.pivotRenderQueueListener)
         
         self.moduleName = &quot;&quot;
+        self.myTerrainManager = MyTerrainManager(self.OgreMainWinSceneMgr)
         self.moduleManager = ModuleManager(self.ogreRoot,  self.OgreMainWinSceneMgr)
+        self.moduleManager.myTerrainManager = self.myTerrainManager
         self.gocManager = self.moduleManager.gocManager
         
         self.ogreMainWindow = OgreMainWindow.OgreMainWindow(self.moduleManager,  root,  self.OgreMainWinSceneMgr,  self)
@@ -326,6 +332,7 @@
     def finishEditorSetup(self):
         if not self.editorSetupFinished:
             og.ResourceGroupManager.getSingleton().addResourceLocation(&quot;./media&quot;, &quot;FileSystem&quot;, &quot;General&quot;, False)
+            og.ResourceGroupManager.getSingleton().addResourceLocation(&quot;./media/terrain&quot;, &quot;FileSystem&quot;, &quot;General&quot;, False)
             og.ResourceGroupManager.getSingleton().initialiseAllResourceGroups()
 
             self.moduleManager.pivot = Pivot(self.OgreMainWinSceneMgr)
@@ -438,6 +445,12 @@
             self.consoleDock.show()
         else:
             self.consoleDock.hide()
+            
+    def toggleTerrainToolsWindow(self):
+        if self.myTerrainManagerDock.isHidden():
+            self.myTerrainManagerDock.show()
+        else:
+            self.myTerrainManagerDock.hide()
 
     def toggleViewportGrid(self):
         self.ogreMainWindow.toggleViewportGrid()
@@ -482,6 +495,8 @@
         self.moduleDirectoryViewDock.setWidget(self.moduleDirectoryViewWin)
         self.addDockWidget(QtCore.Qt.LeftDockWidgetArea, self.moduleDirectoryViewDock)
         
+        self.myTerrainManagerDock = self.myTerrainManager.getDockWidget(self)
+        
         self.consoleDock = QtGui.QDockWidget(self.tr(&quot;Console&quot;), self)
         self.consoleDock.setObjectName(&quot;ConsoleDockWindow&quot;)
         self.consoleDock.setAllowedAreas(QtCore.Qt.BottomDockWidgetArea | QtCore.Qt.TopDockWidgetArea)

Modified: rl/trunk/editors/Lockenwickler/src/ModuleManager.py
===================================================================
--- rl/trunk/editors/Lockenwickler/src/ModuleManager.py	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/ModuleManager.py	2009-05-03 11:47:29 UTC (rev 4914)
@@ -39,6 +39,7 @@
 from ZoneManager import ZoneManager
 from TriggerManager import TriggerManager 
 
+
 # get the light out of a light node
 def extractLight(node):
         i = 0
@@ -785,6 +786,7 @@
         self.moduleConfigIsParsed = False
 
         self.selectionBuffer = None
+        self.myTerrainManager = None
         self.depthBuffer = None
         self.propertyWindow = None
     
@@ -801,6 +803,7 @@
         self.raySceneQueryListener = MyRaySceneQueryListener()
         
         self.zoneManager = ZoneManager(self.sceneManager)
+
         
     def resetParsedModuleConfig(self):
         self.moduleConfigIsParsed = False
@@ -895,6 +898,7 @@
         if self.selectionBuffer is None:
             self.selectionBuffer = SelectionBuffer(self.sceneManager, self.ogreRoot.getRenderTarget(&quot;OgreMainWin&quot;), self, self.zoneManager)
 
+            
 #        if self.depthBuffer is None:
 #            self.depthBuffer = DepthBuffer(self.sceneManager, self.ogreRoot.getRenderTarget(&quot;OgreMainWin&quot;))
 

Added: rl/trunk/editors/Lockenwickler/src/MyTerrainManager.py
===================================================================
--- rl/trunk/editors/Lockenwickler/src/MyTerrainManager.py	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/MyTerrainManager.py	2009-05-03 11:47:29 UTC (rev 4914)
@@ -0,0 +1,110 @@
+#################################################
+# This source file is part of Rastullahs Lockenwickler.
+# Copyright (C) 2003-2009 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+#  but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  US
+#################################################
+
+from PyQt4.QtCore import *
+from PyQt4.QtGui import *
+
+import ogre.renderer.OGRE as og
+import ogre.addons.et as ET
+
+import Ui_MyTerrainManagerDock
+
+class MyTerrainManagerDock(Ui_MyTerrainManagerDock.Ui_TerrainManagerUi, QWidget):
+    def __init__(self, parent):
+        super(MyTerrainManagerDock, self).__init__(parent)
+        self.setupUi(self)
+        
+class Terrain():
+    def __init__(self, sceneManager):
+        self.sceneManager = sceneManager
+        self.camera = self.sceneManager.getCamera(&quot;MainCam&quot;)
+        
+        self.terrainSize = 129
+        
+        ## create terrain manager
+        self.terrainManager =  ET.TerrainManager(self.sceneManager)
+        self.terrainManager.setLODErrorMargin(2, self.camera.getViewport().getActualHeight())
+        self.terrainManager.setUseLODMorphing(True, 0.2, &quot;morphFactor&quot;)
+        
+        ## create a fresh, mid-high terrain for editing
+        # Note 
+        heightMapValues = og.LodDistanceList() ## ET.stdVectorFloat()
+        for i in xrange(self.terrainSize):
+            for j in xrange(self.terrainSize):
+                heightMapValues.append(float(0.50))
+        # width, height, heightmapvalues as a float array
+        self.terrainInfo = ET.TerrainInfo (self.terrainSize, self.terrainSize, heightMapValues )
+        
+        ## save typing self
+        terrainInfo  = self.terrainInfo 
+        sceneManager = self.sceneManager
+        terrainMgr   = self.terrainManager
+        
+        ## set position and size of the terrain
+        terrainInfo.setExtents(og.AxisAlignedBox(-1500, -150, -1500, 1500, 150, 1500))
+
+        ## now render it
+        terrainMgr.createTerrain(terrainInfo)
+
+        ## create the splatting manager
+#        * @param baseName   base name for the map textures (will be appended by their number)
+#        * @param group      the resource group the textures will be placed in
+#        * @param width      width of the textures in pixels
+#        * @param height     height of the textures in pixels
+#        * @param channels   Number of channels per texture (must be in {1, 2, 3, 4})
+        self.textureBaseName = &quot;ETSplatting&quot;
+        self.resGroup = &quot;ET&quot;
+        self.textureSize = 128
+        self.splatMgr = ET.SplattingManager(self.textureBaseName, self.resGroup, self.textureSize, self.textureSize, 3)
+        ## specify number of splatting textures we need to handle
+        self.splatMgr.setNumTextures(6)
+
+        ## create a manual lightmap texture
+        lightmapTex = og.TextureManager.getSingleton().createManual(
+        self.textureBaseName, self.resGroup, og.TEX_TYPE_2D, self.textureSize, self.textureSize, 1, og.PF_BYTE_RGB)
+
+        lightmap = og.Image()
+        ET.createTerrainLightmap(terrainInfo, lightmap, 128, 128,\
+                                 og.Vector3(1, -1, 1),\
+                                 og.ColourValue().White,\
+                                 og.ColourValue(0.3, 0.3, 0.3,1.0))
+        lightmapTex.getBuffer(0, 0).blitFromMemory(lightmap.getPixelBox(0, 0))
+
+        ##  load the terrain material and assign it
+        material = og.MaterialManager.getSingleton().getByName(&quot;ETTerrainMaterial&quot;)
+#        material = og.MaterialManager.getSingleton().getByName(&quot;Lockenwickler_Area&quot;)
+        self.terrainManager.setMaterial(material)
+        
+class MyTerrainManager():
+    def __init__(self, sceneManager):
+        self.sceneManager = sceneManager
+        self.dockWidget = None
+        #self.terrain = Terrain(sceneManager)
+
+    def getDockWidget(self, parent):
+        if self.dockWidget is None:
+            self.dockWidgetContents = MyTerrainManagerDock(parent)
+            self.myTerrainManagerDock = QDockWidget(&quot;Terrain Tools&quot;, parent)
+            self.myTerrainManagerDock.setObjectName(&quot;TerrainToolsDockWindow&quot;)
+            self.myTerrainManagerDock.setAllowedAreas(Qt.LeftDockWidgetArea | Qt.RightDockWidgetArea)
+            self.myTerrainManagerDock.setWidget(self.dockWidgetContents)
+            self.myTerrainManagerDock.setWindowIcon(QIcon(&quot;media/icons/terrain_small.png&quot;))
+            parent.addDockWidget(Qt.LeftDockWidgetArea, self.myTerrainManagerDock)
+            
+        return self.myTerrainManagerDock

Added: rl/trunk/editors/Lockenwickler/src/Ui_MyTerrainManagerDock.py
===================================================================
--- rl/trunk/editors/Lockenwickler/src/Ui_MyTerrainManagerDock.py	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/Ui_MyTerrainManagerDock.py	2009-05-03 11:47:29 UTC (rev 4914)
@@ -0,0 +1,222 @@
+# -*- coding: utf-8 -*-
+
+# Form implementation generated from reading ui file '/home/fusion/dev/ui files/MyTerrainManagerDock.ui'
+#
+# Created: Sun May  3 13:23:32 2009
+#      by: PyQt4 UI code generator 4.4.4
+#
+# WARNING! All changes made in this file will be lost!
+
+from PyQt4 import QtCore, QtGui
+
+class Ui_TerrainManagerUi(object):
+    def setupUi(self, TerrainManagerUi):
+        TerrainManagerUi.setObjectName(&quot;TerrainManagerUi&quot;)
+        TerrainManagerUi.resize(443, 626)
+        self.gridLayout_2 = QtGui.QGridLayout(TerrainManagerUi)
+        self.gridLayout_2.setMargin(1)
+        self.gridLayout_2.setSpacing(1)
+        self.gridLayout_2.setObjectName(&quot;gridLayout_2&quot;)
+        self.comboBox = QtGui.QComboBox(TerrainManagerUi)
+        self.comboBox.setObjectName(&quot;comboBox&quot;)
+        self.gridLayout_2.addWidget(self.comboBox, 0, 0, 1, 1)
+        self.toolBox = QtGui.QToolBox(TerrainManagerUi)
+        self.toolBox.setFrameShape(QtGui.QFrame.NoFrame)
+        self.toolBox.setFrameShadow(QtGui.QFrame.Plain)
+        #self.toolBox.setTabSpacing(1)
+        self.toolBox.setObjectName(&quot;toolBox&quot;)
+        self.page = QtGui.QWidget()
+        self.page.setGeometry(QtCore.QRect(0, 0, 441, 515))
+        self.page.setObjectName(&quot;page&quot;)
+        self.gridLayout_3 = QtGui.QGridLayout(self.page)
+        self.gridLayout_3.setObjectName(&quot;gridLayout_3&quot;)
+        self.groupBox = QtGui.QGroupBox(self.page)
+        self.groupBox.setObjectName(&quot;groupBox&quot;)
+        self.gridLayout = QtGui.QGridLayout(self.groupBox)
+        self.gridLayout.setMargin(1)
+        self.gridLayout.setSpacing(1)
+        self.gridLayout.setObjectName(&quot;gridLayout&quot;)
+        self.label_6 = QtGui.QLabel(self.groupBox)
+        sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Preferred, QtGui.QSizePolicy.Fixed)
+        sizePolicy.setHorizontalStretch(0)
+        sizePolicy.setVerticalStretch(0)
+        sizePolicy.setHeightForWidth(self.label_6.sizePolicy().hasHeightForWidth())
+        self.label_6.setSizePolicy(sizePolicy)
+        self.label_6.setAlignment(QtCore.Qt.AlignCenter)
+        self.label_6.setObjectName(&quot;label_6&quot;)
+        self.gridLayout.addWidget(self.label_6, 0, 0, 1, 2)
+        self.label = QtGui.QLabel(self.groupBox)
+        self.label.setObjectName(&quot;label&quot;)
+        self.gridLayout.addWidget(self.label, 1, 0, 1, 1)
+        self.nameLineEdit = QtGui.QLineEdit(self.groupBox)
+        self.nameLineEdit.setObjectName(&quot;nameLineEdit&quot;)
+        self.gridLayout.addWidget(self.nameLineEdit, 1, 1, 1, 1)
+        self.label_2 = QtGui.QLabel(self.groupBox)
+        self.label_2.setObjectName(&quot;label_2&quot;)
+        self.gridLayout.addWidget(self.label_2, 2, 0, 1, 1)
+        self.sizeComboBox = QtGui.QComboBox(self.groupBox)
+        self.sizeComboBox.setObjectName(&quot;sizeComboBox&quot;)
+        self.sizeComboBox.addItem(QtCore.QString())
+        self.sizeComboBox.addItem(QtCore.QString())
+        self.sizeComboBox.addItem(QtCore.QString())
+        self.sizeComboBox.addItem(QtCore.QString())
+        self.sizeComboBox.addItem(QtCore.QString())
+        self.sizeComboBox.addItem(QtCore.QString())
+        self.sizeComboBox.addItem(QtCore.QString())
+        self.sizeComboBox.addItem(QtCore.QString())
+        self.gridLayout.addWidget(self.sizeComboBox, 2, 1, 1, 1)
+        self.extendsSpinBoxX = QtGui.QSpinBox(self.groupBox)
+        sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Fixed, QtGui.QSizePolicy.Fixed)
+        sizePolicy.setHorizontalStretch(0)
+        sizePolicy.setVerticalStretch(0)
+        sizePolicy.setHeightForWidth(self.extendsSpinBoxX.sizePolicy().hasHeightForWidth())
+        self.extendsSpinBoxX.setSizePolicy(sizePolicy)
+        self.extendsSpinBoxX.setCorrectionMode(QtGui.QAbstractSpinBox.CorrectToNearestValue)
+        self.extendsSpinBoxX.setMinimum(128)
+        self.extendsSpinBoxX.setMaximum(10000)
+        self.extendsSpinBoxX.setObjectName(&quot;extendsSpinBoxX&quot;)
+        self.gridLayout.addWidget(self.extendsSpinBoxX, 3, 1, 1, 1)
+        self.label_3 = QtGui.QLabel(self.groupBox)
+        self.label_3.setObjectName(&quot;label_3&quot;)
+        self.gridLayout.addWidget(self.label_3, 4, 0, 1, 1)
+        self.extendsSpinBoxX_2 = QtGui.QSpinBox(self.groupBox)
+        sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Fixed, QtGui.QSizePolicy.Fixed)
+        sizePolicy.setHorizontalStretch(0)
+        sizePolicy.setVerticalStretch(0)
+        sizePolicy.setHeightForWidth(self.extendsSpinBoxX_2.sizePolicy().hasHeightForWidth())
+        self.extendsSpinBoxX_2.setSizePolicy(sizePolicy)
+        self.extendsSpinBoxX_2.setCorrectionMode(QtGui.QAbstractSpinBox.CorrectToNearestValue)
+        self.extendsSpinBoxX_2.setMinimum(128)
+        self.extendsSpinBoxX_2.setMaximum(10000)
+        self.extendsSpinBoxX_2.setObjectName(&quot;extendsSpinBoxX_2&quot;)
+        self.gridLayout.addWidget(self.extendsSpinBoxX_2, 4, 1, 1, 1)
+        self.extendsSpinBoxX_3 = QtGui.QSpinBox(self.groupBox)
+        sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Fixed, QtGui.QSizePolicy.Fixed)
+        sizePolicy.setHorizontalStretch(0)
+        sizePolicy.setVerticalStretch(0)
+        sizePolicy.setHeightForWidth(self.extendsSpinBoxX_3.sizePolicy().hasHeightForWidth())
+        self.extendsSpinBoxX_3.setSizePolicy(sizePolicy)
+        self.extendsSpinBoxX_3.setCorrectionMode(QtGui.QAbstractSpinBox.CorrectToNearestValue)
+        self.extendsSpinBoxX_3.setMinimum(128)
+        self.extendsSpinBoxX_3.setMaximum(10000)
+        self.extendsSpinBoxX_3.setObjectName(&quot;extendsSpinBoxX_3&quot;)
+        self.gridLayout.addWidget(self.extendsSpinBoxX_3, 5, 1, 1, 1)
+        self.label_7 = QtGui.QLabel(self.groupBox)
+        sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Preferred, QtGui.QSizePolicy.Fixed)
+        sizePolicy.setHorizontalStretch(0)
+        sizePolicy.setVerticalStretch(0)
+        sizePolicy.setHeightForWidth(self.label_7.sizePolicy().hasHeightForWidth())
+        self.label_7.setSizePolicy(sizePolicy)
+        self.label_7.setAlignment(QtCore.Qt.AlignCenter)
+        self.label_7.setObjectName(&quot;label_7&quot;)
+        self.gridLayout.addWidget(self.label_7, 6, 0, 1, 2)
+        self.label_4 = QtGui.QLabel(self.groupBox)
+        self.label_4.setObjectName(&quot;label_4&quot;)
+        self.gridLayout.addWidget(self.label_4, 7, 0, 1, 1)
+        self.baseNameLineEdit = QtGui.QLineEdit(self.groupBox)
+        self.baseNameLineEdit.setObjectName(&quot;baseNameLineEdit&quot;)
+        self.gridLayout.addWidget(self.baseNameLineEdit, 7, 1, 1, 1)
+        self.label_5 = QtGui.QLabel(self.groupBox)
+        self.label_5.setObjectName(&quot;label_5&quot;)
+        self.gridLayout.addWidget(self.label_5, 8, 0, 1, 1)
+        self.baseNameLineEdit_2 = QtGui.QLineEdit(self.groupBox)
+        self.baseNameLineEdit_2.setObjectName(&quot;baseNameLineEdit_2&quot;)
+        self.gridLayout.addWidget(self.baseNameLineEdit_2, 8, 1, 1, 1)
+        self.label_8 = QtGui.QLabel(self.groupBox)
+        self.label_8.setObjectName(&quot;label_8&quot;)
+        self.gridLayout.addWidget(self.label_8, 9, 0, 1, 1)
+        self.sizeComboBox_2 = QtGui.QComboBox(self.groupBox)
+        self.sizeComboBox_2.setObjectName(&quot;sizeComboBox_2&quot;)
+        self.sizeComboBox_2.addItem(QtCore.QString())
+        self.sizeComboBox_2.addItem(QtCore.QString())
+        self.sizeComboBox_2.addItem(QtCore.QString())
+        self.sizeComboBox_2.addItem(QtCore.QString())
+        self.sizeComboBox_2.addItem(QtCore.QString())
+        self.gridLayout.addWidget(self.sizeComboBox_2, 9, 1, 1, 1)
+        self.label_9 = QtGui.QLabel(self.groupBox)
+        self.label_9.setObjectName(&quot;label_9&quot;)
+        self.gridLayout.addWidget(self.label_9, 10, 0, 1, 1)
+        self.sizeComboBox_3 = QtGui.QComboBox(self.groupBox)
+        self.sizeComboBox_3.setObjectName(&quot;sizeComboBox_3&quot;)
+        self.sizeComboBox_3.addItem(QtCore.QString())
+        self.sizeComboBox_3.addItem(QtCore.QString())
+        self.sizeComboBox_3.addItem(QtCore.QString())
+        self.sizeComboBox_3.addItem(QtCore.QString())
+        self.sizeComboBox_3.addItem(QtCore.QString())
+        self.sizeComboBox_3.addItem(QtCore.QString())
+        self.gridLayout.addWidget(self.sizeComboBox_3, 10, 1, 1, 1)
+        self.gridLayout_3.addWidget(self.groupBox, 2, 0, 1, 1)
+        self.pushButton = QtGui.QPushButton(self.page)
+        self.pushButton.setObjectName(&quot;pushButton&quot;)
+        self.gridLayout_3.addWidget(self.pushButton, 3, 0, 1, 1)
+        self.toolBox.addItem(self.page, &quot;&quot;)
+        self.page_2 = QtGui.QWidget()
+        self.page_2.setGeometry(QtCore.QRect(0, 0, 441, 515))
+        self.page_2.setObjectName(&quot;page_2&quot;)
+        self.toolBox.addItem(self.page_2, &quot;&quot;)
+        self.Seite = QtGui.QWidget()
+        self.Seite.setObjectName(&quot;Seite&quot;)
+        self.toolBox.addItem(self.Seite, &quot;&quot;)
+        self.gridLayout_2.addWidget(self.toolBox, 1, 0, 1, 1)
+
+        self.retranslateUi(TerrainManagerUi)
+        self.toolBox.setCurrentIndex(0)
+        QtCore.QMetaObject.connectSlotsByName(TerrainManagerUi)
+
+    def retranslateUi(self, TerrainManagerUi):
+        TerrainManagerUi.setWindowTitle(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Form&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.groupBox.setTitle(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Terrain Settings&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_6.setText(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Geometry&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label.setText(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Name&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_2.setText(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Size&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox.setItemText(0, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;8&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox.setItemText(1, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;16&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox.setItemText(2, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;32&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox.setItemText(3, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;64&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox.setItemText(4, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;128&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox.setItemText(5, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;256&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox.setItemText(6, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;512&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox.setItemText(7, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;1024&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.extendsSpinBoxX.setPrefix(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;X:&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_3.setText(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Extends&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.extendsSpinBoxX_2.setPrefix(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Y:&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.extendsSpinBoxX_3.setPrefix(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Y:&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_7.setText(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Splatting Settings&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_4.setToolTip(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Base name for the map textures (will be appended by their number)&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_4.setText(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Base Name&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.baseNameLineEdit.setToolTip(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Base name for the map textures (will be appended by their number)&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_5.setToolTip(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;The resource group the textures will be placed in&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_5.setText(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Res Group&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.baseNameLineEdit_2.setToolTip(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;The resource group the textures will be placed in&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_8.setToolTip(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Texture size in pixels&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_8.setText(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Tex Size&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_2.setToolTip(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Texture size in pixels&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_2.setItemText(0, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;64&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_2.setItemText(1, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;128&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_2.setItemText(2, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;256&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_2.setItemText(3, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;512&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_2.setItemText(4, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;1024&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_9.setToolTip(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Number of splatting textures (Layers)&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.label_9.setText(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;NumTextures&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_3.setToolTip(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Number of splatting textures (Layers)&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_3.setItemText(0, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;1&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_3.setItemText(1, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;2&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_3.setItemText(2, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;3&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_3.setItemText(3, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;4&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_3.setItemText(4, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;5&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.sizeComboBox_3.setItemText(5, QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;6&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.pushButton.setText(QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Create Terrain&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.toolBox.setItemText(self.toolBox.indexOf(self.page), QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;Create Terrain&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.toolBox.setItemText(self.toolBox.indexOf(self.page_2), QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;ModifyTerrain&quot;, None, QtGui.QApplication.UnicodeUTF8))
+        self.toolBox.setItemText(self.toolBox.indexOf(self.Seite), QtGui.QApplication.translate(&quot;TerrainManagerUi&quot;, &quot;PaintTerrain&quot;, None, QtGui.QApplication.UnicodeUTF8))
+
+
+if __name__ == &quot;__main__&quot;:
+    import sys
+    app = QtGui.QApplication(sys.argv)
+    TerrainManagerUi = QtGui.QWidget()
+    ui = Ui_TerrainManagerUi()
+    ui.setupUi(TerrainManagerUi)
+    TerrainManagerUi.show()
+    sys.exit(app.exec_())
+

Added: rl/trunk/editors/Lockenwickler/src/media/icons/terrain.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/icons/terrain.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/icons/terrain_small.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/icons/terrain_small.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/ETShader.program
===================================================================
--- rl/trunk/editors/Lockenwickler/src/media/terrain/ETShader.program	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/media/terrain/ETShader.program	2009-05-03 11:47:29 UTC (rev 4914)
@@ -0,0 +1,46 @@
+fragment_program ET/Programs/PSSplat cg
+{
+  source PSSplat.cg
+  entry_point main
+  profiles ps_1_1 arbfp1
+}
+
+fragment_program ET/Programs/PSSplat2 cg
+{
+  source PSSplat2.cg
+  entry_point main
+  profiles ps_2_0 arbfp1
+}
+
+fragment_program ET/Programs/PSLighting cg
+{
+  source PSLighting.cg
+  entry_point main
+  profiles ps_1_1 arbfp1
+}
+
+vertex_program ET/Programs/VSLodMorph cg
+{
+  source VSLodMorph.cg
+  entry_point terrain_vp
+  profiles vs_1_1 arbvp1
+  
+  default_params
+  {
+    param_named_auto morphFactor custom 77
+    param_named_auto worldViewProj worldviewproj_matrix
+  }
+}
+
+vertex_program ET/Programs/VSLodMorph2 cg
+{
+  source VSLodMorph.cg
+  entry_point terrain_vp
+  profiles vs_1_1 arbvp1
+  
+  default_params
+  {
+    param_named_auto morphFactor custom 77
+    param_named_auto worldViewProj worldviewproj_matrix
+  }
+}

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/ETTerrain.material
===================================================================
--- rl/trunk/editors/Lockenwickler/src/media/terrain/ETTerrain.material	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/media/terrain/ETTerrain.material	2009-05-03 11:47:29 UTC (rev 4914)
@@ -0,0 +1,199 @@
+material ETTerrainMaterial
+{
+  technique
+  {
+    // primary splatting technique, requires PS 2.0
+    // has issues with OpenGL rendering, though...
+    pass
+    {
+      // splatting pass
+      
+      lighting off
+      
+      vertex_program_ref ET/Programs/VSLodMorph2
+      {
+      }
+      
+      fragment_program_ref ET/Programs/PSSplat2
+      {
+        param_named splatScaleX float 20
+	param_named splatScaleZ float 20
+      }
+      
+      texture_unit
+      {
+        // first coverage map, dynamically managed
+	texture ETSplatting0
+      }
+      texture_unit
+      {
+        // second coverage map, dynamically managed
+	texture ETSplatting1
+      }
+
+      // splatting textures
+      texture_unit
+      {
+        texture splatting0.png
+      }
+      texture_unit
+      {
+        texture splatting1.png
+      }
+      texture_unit
+      {
+        texture splatting2.png
+      }
+      texture_unit
+      {
+        texture splatting3.png
+      }
+      texture_unit
+      {
+        texture splatting4.png
+      }
+      texture_unit
+      {
+        texture splatting5.png
+      }
+    }
+    
+    pass
+    {
+      // lightmap texture pass
+      
+      scene_blend modulate
+
+      vertex_program_ref ET/Programs/VSLodMorph2
+      {
+      }
+      
+      fragment_program_ref ET/Programs/PSLighting
+      {
+      }
+
+      texture_unit
+      {
+        // dynamically created
+        texture ETLightmap
+      }
+      
+    }
+  }
+  
+
+
+  technique
+  {
+    // fallback technique for ps 1.1
+
+    pass
+    {
+      // first splatting pass
+      
+      lighting off
+	
+      vertex_program_ref ET/Programs/VSLodMorph
+      {
+        param_named splatScaleX float 20
+	param_named splatScaleZ float 20
+      }
+      
+      fragment_program_ref ET/Programs/PSSplat
+      {
+      }
+      
+      texture_unit
+      {
+        // will be dynamically generated by the splatting manager
+        texture ETSplatting0
+      }
+
+      texture_unit
+      {
+        texture splatting0.png
+      }
+     
+
+      texture_unit
+      {
+        texture splatting1.png
+      }
+     
+      texture_unit
+      {
+        texture splatting2.png
+      }
+
+    }
+    
+    pass
+    {
+      // second splatting pass
+      
+      lighting off
+      
+      scene_blend add
+	
+      vertex_program_ref ET/Programs/VSLodMorph
+      {
+        param_named splatScaleX float 20
+	param_named splatScaleZ float 20
+      }
+      
+      fragment_program_ref ET/Programs/PSSplat
+      {
+      }
+      
+      texture_unit
+      {
+        // will be dynamically generated by the splatting manager
+        texture ETSplatting1
+      }
+
+      texture_unit
+      {
+        texture splatting3.png
+      }
+
+      texture_unit
+      {
+        texture splatting4.png
+      }
+     
+
+      texture_unit
+      {
+        texture splatting5.png
+      }
+     
+    }
+    
+    pass 
+    {
+      // lightmap texture pass
+      
+      scene_blend modulate
+
+      vertex_program_ref ET/Programs/VSLodMorph
+      {
+        param_named splatScaleX float 20
+	param_named splatScaleZ float 20
+        param_named_auto morphFactor custom 77
+      }
+      
+      fragment_program_ref ET/Programs/PSLighting
+      {
+      }
+
+      texture_unit
+      {
+        // dynamically created
+        texture ETLightmap
+      }
+    }
+
+
+ 
+  }
+}
\ No newline at end of file

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/ETcoverage.0.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/ETcoverage.0.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/ETcoverage.1.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/ETcoverage.1.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/ETlightmap.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/ETlightmap.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/ETterrain.cfg
===================================================================
--- rl/trunk/editors/Lockenwickler/src/media/terrain/ETterrain.cfg	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/media/terrain/ETterrain.cfg	2009-05-03 11:47:29 UTC (rev 4914)
@@ -0,0 +1,41 @@
+# Specify the heightmap data type and source
+DataType=Image
+DataSource=terrain.png
+
+# Specify the size of the terrain
+Width=513
+Height=513
+TileSize=513
+
+# Scale factor for terrain rendering
+ScaleX=1500
+ScaleY=100
+ScaleZ=1500
+
+# Adjust LOD settings
+MaxMipMapLevel=4
+MaxPixelError=2
+LODMorphing=no
+
+# Specify the splatting textures to use
+# You can use as many as you want (and your hardware supports)
+Texture0=splatting0.png
+Texture1=splatting1.png
+Texture2=splatting2.png
+Texture3=splatting3.png
+
+# If you intend to load a terrain texturing done before,
+# then specify the coverage maps' extension and their base name
+# (excluding extension and the .## at the end)
+#CoverageExtension=png
+#CoverageBasename=ETterrain.Tex
+
+# Calculate a lightmap for the terrain upon loading?
+UseLightmap=yes
+# From where does the light for the lightmap come?
+LightDirection=1 -1 1
+LightmapDetail=1
+
+# How often should the splatting textures be tiled over the terrain?
+TextureRepeatX=20
+TextureRepeatZ=20

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/ETterrain.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/ETterrain.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/PSLighting.cg
===================================================================
--- rl/trunk/editors/Lockenwickler/src/media/terrain/PSLighting.cg	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/media/terrain/PSLighting.cg	2009-05-03 11:47:29 UTC (rev 4914)
@@ -0,0 +1,10 @@
+void main
+(
+  float2 iTexCoord0 : TEXCOORD0, 
+  out float4 oColor : COLOR, 
+  uniform sampler2D lightMap
+) 
+{
+  oColor = tex2D(lightMap, iTexCoord0);
+}
+

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/PSSplat.cg
===================================================================
--- rl/trunk/editors/Lockenwickler/src/media/terrain/PSSplat.cg	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/media/terrain/PSSplat.cg	2009-05-03 11:47:29 UTC (rev 4914)
@@ -0,0 +1,22 @@
+void main
+(
+  float2 iTexCoord0 : TEXCOORD0,
+  float2 iTexCoord1 : TEXCOORD1,
+  float2 iTexCoord2 : TEXCOORD2,
+  float2 iTexCoord3 : TEXCOORD3,
+ 
+  out float4 oColor : COLOR,
+ 
+  uniform sampler2D covMap,
+  uniform sampler2D splat1,
+  uniform sampler2D splat2,
+  uniform sampler2D splat3  
+) 
+{
+  float3 cov = tex2D(covMap, iTexCoord0).rgb;
+  
+  oColor = tex2D(splat1, iTexCoord1) * cov.x
+          + tex2D(splat2, iTexCoord2) * cov.y
+          + tex2D(splat3, iTexCoord3) * cov.z;
+}
+

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/PSSplat2.cg
===================================================================
--- rl/trunk/editors/Lockenwickler/src/media/terrain/PSSplat2.cg	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/media/terrain/PSSplat2.cg	2009-05-03 11:47:29 UTC (rev 4914)
@@ -0,0 +1,34 @@
+void main
+(
+  float2 iTexCoord0 : TEXCOORD0,
+ 
+  out float4 oColor : COLOR,
+ 
+  uniform sampler2D covMap1,
+  uniform sampler2D covMap2,
+  uniform sampler2D splat1,
+  uniform sampler2D splat2,
+  uniform sampler2D splat3,
+  uniform sampler2D splat4,
+  uniform sampler2D splat5,
+  uniform sampler2D splat6,
+
+  uniform float splatScaleX,
+  uniform float splatScaleZ
+) 
+{
+  float3 cov1 = tex2D(covMap1, iTexCoord0).rgb;
+  float3 cov2 = tex2D(covMap2, iTexCoord0).rgb;
+  
+  iTexCoord0.x *= splatScaleX;
+  iTexCoord0.y *= splatScaleZ;
+  
+  oColor = tex2D(splat1, iTexCoord0) * cov1.x
+           + tex2D(splat2, iTexCoord0) * cov1.y
+           + tex2D(splat3, iTexCoord0) * cov1.z
+           + tex2D(splat4, iTexCoord0) * cov2.x
+           + tex2D(splat5, iTexCoord0) * cov2.y
+           + tex2D(splat6, iTexCoord0) * cov2.z;
+
+}
+

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/VSLodMorph.cg
===================================================================
--- rl/trunk/editors/Lockenwickler/src/media/terrain/VSLodMorph.cg	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/media/terrain/VSLodMorph.cg	2009-05-03 11:47:29 UTC (rev 4914)
@@ -0,0 +1,32 @@
+    void terrain_vp(
+	    float4 position : POSITION,
+	    float2 uv1   	: TEXCOORD0,
+	    /*float2 uv2   	: TEXCOORD1,
+	    float2 uv3   	: TEXCOORD2,
+	    float2 uv4   	: TEXCOORD3,*/
+	    float delta     : BLENDWEIGHT,
+
+	    out float4 oPosition : POSITION,
+	    out float2 oUv1		 : TEXCOORD0,
+	    out float2 oUv2		 : TEXCOORD1,
+	    out float2 oUv3		 : TEXCOORD2,
+	    out float2 oUv4		 : TEXCOORD3,
+	    uniform float splatScaleX,
+	    uniform float splatScaleZ,
+	    uniform float4x4 worldViewProj,
+	    uniform float morphFactor
+	    )
+    {
+	    position.y = position.y + (delta.x * morphFactor);
+	    oPosition = mul(worldViewProj, position);
+	    oUv1 = uv1;
+	    oUv2 = uv1;
+	    oUv3 = uv1;
+	    oUv4 = uv1;
+	    oUv2.x *= splatScaleX;
+	    oUv2.y *= splatScaleZ;
+	    oUv3.x *= splatScaleX;
+	    oUv3.y *= splatScaleZ;
+	    oUv4.x *= splatScaleX;
+	    oUv4.y *= splatScaleZ;
+    }

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/VSLodMorph2.cg
===================================================================
--- rl/trunk/editors/Lockenwickler/src/media/terrain/VSLodMorph2.cg	2009-05-01 11:34:18 UTC (rev 4913)
+++ rl/trunk/editors/Lockenwickler/src/media/terrain/VSLodMorph2.cg	2009-05-03 11:47:29 UTC (rev 4914)
@@ -0,0 +1,15 @@
+    void terrain_vp(
+	    float4 position : POSITION,
+	    float2 uv1   	: TEXCOORD0,
+	    float delta     : BLENDWEIGHT,
+
+	    out float4 oPosition : POSITION,
+	    out float2 oUv1		 : TEXCOORD0,
+	    uniform float4x4 worldViewProj,
+	    uniform float morphFactor
+	    )
+    {
+	    position.y = position.y + (delta.x * morphFactor);
+	    oPosition = mul(worldViewProj, position);
+	    oUv1 = uv1;
+    }

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/brush.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/brush.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting0.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting0.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting1.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting1.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting2.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting2.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting3.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting3.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting4.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting4.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting5.png
===================================================================
(Binary files differ)


Property changes on: rl/trunk/editors/Lockenwickler/src/media/terrain/splatting5.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001970.html">[Dsa-hl-svn] r4913 - rl/trunk/editors/Lockenwickler/src
</A></li>
	<LI>Next message: <A HREF="001972.html">[Dsa-hl-svn] r4915 - in rl/trunk/editors/Lockenwickler: . src	src/media src/media/help ui files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1971">[ date ]</a>
              <a href="thread.html#1971">[ thread ]</a>
              <a href="subject.html#1971">[ subject ]</a>
              <a href="author.html#1971">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
