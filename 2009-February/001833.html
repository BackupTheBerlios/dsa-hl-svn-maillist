<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r4776 - in rl/trunk/editors/Lockenwickler: . src	src/media
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4776%20-%20in%20rl/trunk/editors/Lockenwickler%3A%20.%20src%0A%09src/media&In-Reply-To=%3C200902241929.n1OJTdde002075%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001832.html">
   <LINK REL="Next"  HREF="001834.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r4776 - in rl/trunk/editors/Lockenwickler: . src	src/media</H1>
    <B>fusion2 at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4776%20-%20in%20rl/trunk/editors/Lockenwickler%3A%20.%20src%0A%09src/media&In-Reply-To=%3C200902241929.n1OJTdde002075%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r4776 - in rl/trunk/editors/Lockenwickler: . src	src/media">fusion2 at mail.berlios.de
       </A><BR>
    <I>Tue Feb 24 20:29:39 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001832.html">[Dsa-hl-svn] r4775 - in rl/trunk/editors/Lockenwickler/src: . media
</A></li>
        <LI>Next message: <A HREF="001834.html">[Dsa-hl-svn] r4777 - dependencies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1833">[ date ]</a>
              <a href="thread.html#1833">[ thread ]</a>
              <a href="subject.html#1833">[ subject ]</a>
              <a href="author.html#1833">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: fusion2
Date: 2009-02-24 20:29:34 +0100 (Tue, 24 Feb 2009)
New Revision: 4776

Modified:
   rl/trunk/editors/Lockenwickler/Lockenwickler.e4p
   rl/trunk/editors/Lockenwickler/src/SelectionBuffer.py
   rl/trunk/editors/Lockenwickler/src/media/Pivot_Point.material
   rl/trunk/editors/Lockenwickler/src/media/PlainColorFP.glsl
Log:
- glsl SelectionBuffer shader fix

Modified: rl/trunk/editors/Lockenwickler/Lockenwickler.e4p
===================================================================
--- rl/trunk/editors/Lockenwickler/Lockenwickler.e4p	2009-02-24 18:16:58 UTC (rev 4775)
+++ rl/trunk/editors/Lockenwickler/Lockenwickler.e4p	2009-02-24 19:29:34 UTC (rev 4776)
@@ -1,180 +1,180 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
-&lt;!DOCTYPE Project SYSTEM &quot;Project-4.6.dtd&quot;&gt;
-&lt;!-- eric4 project file for project Lockenwickler --&gt;
-&lt;!-- Saved: 2009-02-17, 21:39:20 --&gt;
-&lt;!-- Copyright (C) 2009 Stefan Stammberger, <A HREF="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">sstammberger at web.de</A> --&gt;
-&lt;Project version=&quot;4.6&quot;&gt;
-  &lt;Language&gt;en&lt;/Language&gt;
-  &lt;ProgLanguage mixed=&quot;0&quot;&gt;Python&lt;/ProgLanguage&gt;
-  &lt;ProjectType&gt;Qt4&lt;/ProjectType&gt;
-  &lt;Description&gt;Lockenwickler is an Editor application for the Rastulahs Lockenpracht game.&lt;/Description&gt;
-  &lt;Version&gt;0.1&lt;/Version&gt;
-  &lt;Author&gt;Stefan Stammberger&lt;/Author&gt;
-  &lt;Email&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">sstammberger at web.de</A>&lt;/Email&gt;
-  &lt;Sources&gt;
-    &lt;Source&gt;src/Lockenwickler.py&lt;/Source&gt;
-    &lt;Source&gt;src/ConsoleWindow.py&lt;/Source&gt;
-    &lt;Source&gt;src/ModelSelectionDialog.py&lt;/Source&gt;
-    &lt;Source&gt;src/ModuleManager.py&lt;/Source&gt;
-    &lt;Source&gt;src/MovePivot.py&lt;/Source&gt;
-    &lt;Source&gt;src/ObjectPropertyWin.py&lt;/Source&gt;
-    &lt;Source&gt;src/OgreMainWindow.py&lt;/Source&gt;
-    &lt;Source&gt;src/OgreWidget.py&lt;/Source&gt;
-    &lt;Source&gt;src/PreferencesDialog.py&lt;/Source&gt;
-    &lt;Source&gt;src/PythonOgreConfig.py&lt;/Source&gt;
-    &lt;Source&gt;src/ui_ConsoleWindow.py&lt;/Source&gt;
-    &lt;Source&gt;src/Property.py&lt;/Source&gt;
-    &lt;Source&gt;src/ViewportGrid.py&lt;/Source&gt;
-    &lt;Source&gt;src/ObjectPropertyModel.py&lt;/Source&gt;
-    &lt;Source&gt;src/GameObjectClass.py&lt;/Source&gt;
-    &lt;Source&gt;src/GameObjectClassManager.py&lt;/Source&gt;
-    &lt;Source&gt;src/setup.py&lt;/Source&gt;
-    &lt;Source&gt;src/GameObjectClassView.py&lt;/Source&gt;
-    &lt;Source&gt;src/MyRaySceneQueryListener.py&lt;/Source&gt;
-    &lt;Source&gt;src/GOStringEditor.py&lt;/Source&gt;
-    &lt;Source&gt;src/GOIntEditor.py&lt;/Source&gt;
-    &lt;Source&gt;src/CodeDump.py&lt;/Source&gt;
-    &lt;Source&gt;src/NewModuleWizard.py&lt;/Source&gt;
-    &lt;Source&gt;src/Ui_NewModuleWizard.py&lt;/Source&gt;
-    &lt;Source&gt;src/ModuleExplorer.py&lt;/Source&gt;
-    &lt;Source&gt;src/SelectionBuffer.py&lt;/Source&gt;
-  &lt;/Sources&gt;
-  &lt;Forms&gt;
-    &lt;Form&gt;ui files/GOPropertyEditorDialogINT.ui&lt;/Form&gt;
-    &lt;Form&gt;ui files/GOPropertyEditorDialogSTRING.ui&lt;/Form&gt;
-    &lt;Form&gt;ui files/NewModuleWizard.ui&lt;/Form&gt;
-  &lt;/Forms&gt;
-  &lt;Translations&gt;
-  &lt;/Translations&gt;
-  &lt;Resources&gt;
-  &lt;/Resources&gt;
-  &lt;Interfaces&gt;
-  &lt;/Interfaces&gt;
-  &lt;Others&gt;
-  &lt;/Others&gt;
-  &lt;MainScript&gt;src/Lockenwickler.py&lt;/MainScript&gt;
-  &lt;Vcs&gt;
-    &lt;VcsType&gt;None&lt;/VcsType&gt;
-    &lt;VcsOptions&gt;
-      &lt;dict&gt;
-        &lt;key&gt;
-          &lt;string&gt;add&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;checkout&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;commit&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;diff&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;export&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;global&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;history&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;log&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;remove&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;status&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;tag&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-        &lt;key&gt;
-          &lt;string&gt;update&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;list&gt;
-            &lt;string&gt;&lt;/string&gt;
-          &lt;/list&gt;
-        &lt;/value&gt;
-      &lt;/dict&gt;
-    &lt;/VcsOptions&gt;
-    &lt;VcsOtherData&gt;
-      &lt;dict&gt;
-        &lt;key&gt;
-          &lt;string&gt;standardLayout&lt;/string&gt;
-        &lt;/key&gt;
-        &lt;value&gt;
-          &lt;bool&gt;True&lt;/bool&gt;
-        &lt;/value&gt;
-      &lt;/dict&gt;
-    &lt;/VcsOtherData&gt;
-  &lt;/Vcs&gt;
-  &lt;FiletypeAssociations&gt;
-    &lt;FiletypeAssociation pattern=&quot;*.ui&quot; type=&quot;FORMS&quot; /&gt;
-    &lt;FiletypeAssociation pattern=&quot;*.idl&quot; type=&quot;INTERFACES&quot; /&gt;
-    &lt;FiletypeAssociation pattern=&quot;*.qm&quot; type=&quot;TRANSLATIONS&quot; /&gt;
-    &lt;FiletypeAssociation pattern=&quot;*.ptl&quot; type=&quot;SOURCES&quot; /&gt;
-    &lt;FiletypeAssociation pattern=&quot;*.pyw&quot; type=&quot;SOURCES&quot; /&gt;
-    &lt;FiletypeAssociation pattern=&quot;*.ui.h&quot; type=&quot;FORMS&quot; /&gt;
-    &lt;FiletypeAssociation pattern=&quot;*.ts&quot; type=&quot;TRANSLATIONS&quot; /&gt;
-    &lt;FiletypeAssociation pattern=&quot;*.py&quot; type=&quot;SOURCES&quot; /&gt;
-    &lt;FiletypeAssociation pattern=&quot;*.qrc&quot; type=&quot;RESOURCES&quot; /&gt;
-  &lt;/FiletypeAssociations&gt;
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;!DOCTYPE Project SYSTEM &quot;Project-4.6.dtd&quot;&gt;
+&lt;!-- eric4 project file for project Lockenwickler --&gt;
+&lt;!-- Saved: 2009-02-17, 22:16:35 --&gt;
+&lt;!-- Copyright (C) 2009 Stefan Stammberger, <A HREF="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">sstammberger at web.de</A> --&gt;
+&lt;Project version=&quot;4.6&quot;&gt;
+  &lt;Language&gt;en&lt;/Language&gt;
+  &lt;ProgLanguage mixed=&quot;0&quot;&gt;Python&lt;/ProgLanguage&gt;
+  &lt;ProjectType&gt;Qt4&lt;/ProjectType&gt;
+  &lt;Description&gt;Lockenwickler is an Editor application for the Rastulahs Lockenpracht game.&lt;/Description&gt;
+  &lt;Version&gt;0.1&lt;/Version&gt;
+  &lt;Author&gt;Stefan Stammberger&lt;/Author&gt;
+  &lt;Email&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">sstammberger at web.de</A>&lt;/Email&gt;
+  &lt;Sources&gt;
+    &lt;Source&gt;src/Lockenwickler.py&lt;/Source&gt;
+    &lt;Source&gt;src/ConsoleWindow.py&lt;/Source&gt;
+    &lt;Source&gt;src/ModelSelectionDialog.py&lt;/Source&gt;
+    &lt;Source&gt;src/ModuleManager.py&lt;/Source&gt;
+    &lt;Source&gt;src/MovePivot.py&lt;/Source&gt;
+    &lt;Source&gt;src/ObjectPropertyWin.py&lt;/Source&gt;
+    &lt;Source&gt;src/OgreMainWindow.py&lt;/Source&gt;
+    &lt;Source&gt;src/OgreWidget.py&lt;/Source&gt;
+    &lt;Source&gt;src/PreferencesDialog.py&lt;/Source&gt;
+    &lt;Source&gt;src/PythonOgreConfig.py&lt;/Source&gt;
+    &lt;Source&gt;src/ui_ConsoleWindow.py&lt;/Source&gt;
+    &lt;Source&gt;src/Property.py&lt;/Source&gt;
+    &lt;Source&gt;src/ViewportGrid.py&lt;/Source&gt;
+    &lt;Source&gt;src/ObjectPropertyModel.py&lt;/Source&gt;
+    &lt;Source&gt;src/GameObjectClass.py&lt;/Source&gt;
+    &lt;Source&gt;src/GameObjectClassManager.py&lt;/Source&gt;
+    &lt;Source&gt;src/setup.py&lt;/Source&gt;
+    &lt;Source&gt;src/GameObjectClassView.py&lt;/Source&gt;
+    &lt;Source&gt;src/MyRaySceneQueryListener.py&lt;/Source&gt;
+    &lt;Source&gt;src/GOStringEditor.py&lt;/Source&gt;
+    &lt;Source&gt;src/GOIntEditor.py&lt;/Source&gt;
+    &lt;Source&gt;src/CodeDump.py&lt;/Source&gt;
+    &lt;Source&gt;src/NewModuleWizard.py&lt;/Source&gt;
+    &lt;Source&gt;src/Ui_NewModuleWizard.py&lt;/Source&gt;
+    &lt;Source&gt;src/ModuleExplorer.py&lt;/Source&gt;
+    &lt;Source&gt;src/SelectionBuffer.py&lt;/Source&gt;
+  &lt;/Sources&gt;
+  &lt;Forms&gt;
+    &lt;Form&gt;ui files/GOPropertyEditorDialogINT.ui&lt;/Form&gt;
+    &lt;Form&gt;ui files/GOPropertyEditorDialogSTRING.ui&lt;/Form&gt;
+    &lt;Form&gt;ui files/NewModuleWizard.ui&lt;/Form&gt;
+  &lt;/Forms&gt;
+  &lt;Translations&gt;
+  &lt;/Translations&gt;
+  &lt;Resources&gt;
+  &lt;/Resources&gt;
+  &lt;Interfaces&gt;
+  &lt;/Interfaces&gt;
+  &lt;Others&gt;
+  &lt;/Others&gt;
+  &lt;MainScript&gt;src/Lockenwickler.py&lt;/MainScript&gt;
+  &lt;Vcs&gt;
+    &lt;VcsType&gt;Subversion&lt;/VcsType&gt;
+    &lt;VcsOptions&gt;
+      &lt;dict&gt;
+        &lt;key&gt;
+          &lt;string&gt;add&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;checkout&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;commit&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;diff&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;export&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;global&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;history&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;log&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;remove&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;status&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;tag&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+        &lt;key&gt;
+          &lt;string&gt;update&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;list&gt;
+            &lt;string&gt;&lt;/string&gt;
+          &lt;/list&gt;
+        &lt;/value&gt;
+      &lt;/dict&gt;
+    &lt;/VcsOptions&gt;
+    &lt;VcsOtherData&gt;
+      &lt;dict&gt;
+        &lt;key&gt;
+          &lt;string&gt;standardLayout&lt;/string&gt;
+        &lt;/key&gt;
+        &lt;value&gt;
+          &lt;bool&gt;True&lt;/bool&gt;
+        &lt;/value&gt;
+      &lt;/dict&gt;
+    &lt;/VcsOtherData&gt;
+  &lt;/Vcs&gt;
+  &lt;FiletypeAssociations&gt;
+    &lt;FiletypeAssociation pattern=&quot;*.ui&quot; type=&quot;FORMS&quot; /&gt;
+    &lt;FiletypeAssociation pattern=&quot;*.idl&quot; type=&quot;INTERFACES&quot; /&gt;
+    &lt;FiletypeAssociation pattern=&quot;*.qm&quot; type=&quot;TRANSLATIONS&quot; /&gt;
+    &lt;FiletypeAssociation pattern=&quot;*.ptl&quot; type=&quot;SOURCES&quot; /&gt;
+    &lt;FiletypeAssociation pattern=&quot;*.pyw&quot; type=&quot;SOURCES&quot; /&gt;
+    &lt;FiletypeAssociation pattern=&quot;*.ui.h&quot; type=&quot;FORMS&quot; /&gt;
+    &lt;FiletypeAssociation pattern=&quot;*.ts&quot; type=&quot;TRANSLATIONS&quot; /&gt;
+    &lt;FiletypeAssociation pattern=&quot;*.py&quot; type=&quot;SOURCES&quot; /&gt;
+    &lt;FiletypeAssociation pattern=&quot;*.qrc&quot; type=&quot;RESOURCES&quot; /&gt;
+  &lt;/FiletypeAssociations&gt;
 &lt;/Project&gt;
\ No newline at end of file

Modified: rl/trunk/editors/Lockenwickler/src/SelectionBuffer.py
===================================================================
--- rl/trunk/editors/Lockenwickler/src/SelectionBuffer.py	2009-02-24 18:16:58 UTC (rev 4775)
+++ rl/trunk/editors/Lockenwickler/src/SelectionBuffer.py	2009-02-24 19:29:34 UTC (rev 4776)
@@ -1,244 +1,244 @@
-import ctypes as ctypes
-import random
-
-import ogre.renderer.OGRE as og
-
-
-# a class to store information about a object that got selected
-class SelectionObject():
-    def __init__(self,  entity):
-        self.entityName = entity.getName()
-        self.entity = entity #the selected entity
-        self.isPivot = False
-
-#        if self.entity.getUserObject() is not None:
-#            self.isGameObject = True
-#        else:
-#            self.isGameObject = False
-
-    #if True this instance will show its bounding box else it will hide it
-    def setSelected(self,  selected):
-        if selected == True:
-            self.entity.getParentNode().showBoundingBox(True)
-        else:
-            self.entity.getParentNode().showBoundingBox(False)
-
-    def __eq__(self, other):
-        return self.entity.getName() == other.entity.getName()
-
-    def __ne__(self, other):
-        return self.entity.getName() != other.entity.getName()
-
-# class to handle material switching without having to modify scene materials individually
-class MaterialSwitcher( og.MaterialManager.Listener ):
-    def __init__(self):
-        og.MaterialManager.Listener.__init__(self)
-      
-        self.currentColor = og.ColourValue(0.0, 0.0, 0.0)
-        self.currentColorAsVector3 = og.Vector3()
-        
-        self.lastEntity = &quot;&quot;
-        self.lastTechnique = None
-        
-        self.colorDict = {}
-       
-    # takes into account that one Entity can have multiple SubEntities
-    def handleSchemeNotFound(self, index, name, material, lod, subEntity):
-        temp = str(type(subEntity))
-        if temp == &quot;&lt;class 'ogre.renderer.OGRE._ogre_.SubEntity'&gt;&quot;:
-            if self.lastEntity == subEntity.getParent().getName():
-                subEntity.setCustomParameter(1, og.Vector4(self.currentColor.r, self.currentColor.g, self.currentColor.b, 1.0))
-                return self.lastTechnique
-            else:
-                self.lastTechnique = og.MaterialManager.getSingleton().load(&quot;PlainColorGLSL&quot;, og.ResourceGroupManager.DEFAULT_RESOURCE_GROUP_NAME).getTechnique(0)
-                
-                self.randomizeColor()
-                subEntity.setCustomParameter(1, og.Vector4(self.currentColor.r, self.currentColor.g, self.currentColor.b, 1.0))
-                
-                self.lastEntity = subEntity.getParent().getName()
-                self.colorDict[self.lastEntity] = self.currentColorAsVector3
-                return self.lastTechnique
-        
-
-    def randomizeColor(self):
-        r = random.randrange(1, 255)
-        g = random.randrange(1, 255)
-        b = random.randrange(1, 255)
-        self.currentColorAsVector3 = og.Vector3(r, g, b)
-        var = 1.0 / 255.0
-
-        self.currentColor = og.ColourValue(r * var, g * var, b * var)
-
-        #print str(int(self.currentColor.r * 255)) + &quot; &quot; + str(int(255 * self.currentColor.g)) + &quot; &quot; + str(int(255 * self.currentColor.b))
-    
-    def reset(self):
-        self.currentColor = og.ColourValue(0.0, 0.0, 0.0)
-        self.lastEntity = &quot;&quot;
-        
-# We need this attached to the depth target, otherwise we get problems with the compositor
-# MaterialManager.Listener should NOT be running all the time - rather only when we're
-# specifically rendering the target that needs it
-class SelectionRenderListener(og.RenderTargetListener):
-    def __init__(self, materialListener):
-        og.RenderTargetListener.__init__(self)
-        self.materialListener = materialListener
- 
-    def preRenderTargetUpdate(self, evt):
-        og.MaterialManager.getSingleton().addListener( self.materialListener )
- 
-    def postRenderTargetUpdate(self, evt):
-        og.MaterialManager.getSingleton().removeListener( self.materialListener )
-
-        
-class SelectionBuffer():
-    def __init__(self, sceneManager,  renderTarget):
-        self.sceneMgr = sceneManager
-        self.camera = sceneManager.getCamera(&quot;MainCam&quot;)
-
-        self.renderTarget = renderTarget
-        
-        # This is the material listener - Note: it is controlled by a seperate
-        # RenderTargetListener, not applied globally to all targets
-        self.materialSwitchListener = MaterialSwitcher()
-        
-        self.selectionTargetListener = SelectionRenderListener( self.materialSwitchListener )
-        
-        width = self.renderTarget.getWidth()
-        height = self.renderTarget.getHeight()
-        
-        self.texture = og.TextureManager.getSingleton().createManual(&quot;SelectionPassTex&quot;, 
-                                                                    og.ResourceGroupManager.DEFAULT_RESOURCE_GROUP_NAME, 
-                                                                    og.TEX_TYPE_2D, 
-                                                                    width, 
-                                                                    height, 
-                                                                    0, og.PixelFormat.PF_R8G8B8, og.TU_RENDERTARGET)
-                                                                    
-        self.renderTexture = self.texture.getBuffer().getRenderTarget()
-        self.renderTexture.setAutoUpdated(False)
-        self.renderTexture.setPriority(0)                                                         
-        self.renderTexture.addViewport( self.camera )
-        self.renderTexture.getViewport(0).setOverlaysEnabled(False)
-        self.renderTexture.getViewport(0).setClearEveryFrame(True)
-        self.renderTexture.addListener( self.selectionTargetListener )
-        self.renderTexture.getViewport(0).setMaterialScheme(&quot;aa&quot;)
-        
-        #self.createRTTOverlays()
-
-    def update(self):
-        self.updateBufferSize()
-        
-        self.renderTexture.update()        
-        self.materialSwitchListener.reset()
-        
-        pixelBuffer = self.texture.getBuffer()
-        bufferSize = pixelBuffer.getSizeInBytes()
-        #buffersize2 = self.renderTexture.getWidth()*self.renderTexture.getHeight()*4
-        
-        storageclass = ctypes.c_uint8 * (bufferSize)
-        self.buffer = storageclass()
-        
-        VoidPointer = og.CastVoidPtr(ctypes.addressof(self.buffer))
-
-        self.pBox = og.PixelBox(pixelBuffer.getWidth(), pixelBuffer.getHeight(),pixelBuffer.getDepth(), pixelBuffer.getFormat(), VoidPointer)
-        self.renderTexture.copyContentsToMemory(self.pBox, og.RenderTarget.FrameBuffer.FB_FRONT)
-
-#        i = 0
-#        
-#        while i &lt; len(self.buffer):
-#            #print str(self.buffer[i + 2]) + &quot; &quot; + str(self.buffer[i+1]) + &quot; &quot; + str(self.buffer[i])
-#            
-#            i += 4
-    
-    def updateBufferSize(self):
-        width = self.renderTarget.getWidth()
-        height = self.renderTarget.getHeight()
-        needsSizeUpdate = False
-        
-        if width is not self.renderTexture.getWidth():
-            needsSizeUpdate = True
-        if height is not self.renderTexture.getHeight():
-            needsSizeUpdate = True            
-        
-        if needsSizeUpdate:
-            og.TextureManager.getSingleton().unload(&quot;SelectionPassTex&quot;)
-            
-            self.texture = og.TextureManager.getSingleton().createManual(&quot;SelectionPassTex&quot;, 
-                                                            og.ResourceGroupManager.DEFAULT_RESOURCE_GROUP_NAME, 
-                                                            og.TEX_TYPE_2D, 
-                                                            width, 
-                                                            height, 
-                                                            0, og.PixelFormat.PF_R8G8B8, og.TU_RENDERTARGET)
-                                                                    
-            self.renderTexture = self.texture.getBuffer().getRenderTarget()
-            self.renderTexture.setAutoUpdated(False)
-            self.renderTexture.setPriority(0)                                                         
-            self.renderTexture.addViewport( self.camera )
-            self.renderTexture.getViewport(0).setOverlaysEnabled(False)
-            self.renderTexture.getViewport(0).setClearEveryFrame(True)
-            self.renderTexture.addListener( self.selectionTargetListener )
-            self.renderTexture.getViewport(0).setMaterialScheme(&quot;aa&quot;)
-        else:
-            return
-            
-    def onSelectionClick(self, x, y):
-        self.update()
-        
-        posInStream = (self.pBox.getWidth() * y - 1)*4
-        posInStream += x*4
-        
-        colVec = og.Vector3(self.buffer[posInStream + 2], self.buffer[posInStream+1], self.buffer[posInStream])
-        
-        for key in self.materialSwitchListener.colorDict:
-            if self.materialSwitchListener.colorDict[key] == colVec:
-                if key == &quot;OgreMainWin::0::ViewportGrid&quot;:
-                    return None
-                elif key == &quot;rayLine&quot;:
-                    return None
-                elif key == &quot;EditorXArrow&quot;:
-                    so = SelectionObject(self.sceneMgr.getEntity(key))
-                    so.isPivot = True
-                    return so
-                elif key == &quot;EditorYArrow&quot;:
-                    so = SelectionObject(self.sceneMgr.getEntity(key))
-                    so.isPivot = True
-                    return so
-                elif key == &quot;EditorZArrow&quot;:
-                    so = SelectionObject(self.sceneMgr.getEntity(key))
-                    so.isPivot = True
-                    return so
-                elif key == &quot;EditorFreeMover&quot;:
-                    return None
-                elif key == &quot;EditorXRotator&quot; or key == &quot;EditorYRotator&quot; or key == &quot;EditorZRotator&quot;:
-                    so = SelectionObject(self.sceneMgr.getEntity(key))
-                    so.isPivot = True
-                    return so
-                else:
-                    so = SelectionObject(self.sceneMgr.getEntity(key))
-                    return so
-
-        return None
-        
-    def createRTTOverlays(self):
-        baseWhite = og.MaterialManager.getSingletonPtr().getByName(&quot;Lockenwickler_Pivot_X&quot;)
-        SelectionBufferTexture = baseWhite.clone(&quot;SelectionDebugMaterial&quot;)
-        textureUnit = SelectionBufferTexture.getTechnique(0).getPass(0).createTextureUnitState()
- 
-        textureUnit.setTextureName(&quot;SelectionPassTex&quot;)
- 
- 
-        overlayManager = og.OverlayManager.getSingleton()
-        # Create an overlay
-        self.mDebugOverlay = overlayManager.create(&quot;OverlayName&quot;)
- 
-        # Create a panel
-        panel = overlayManager.createOverlayElement(&quot;Panel&quot;, &quot;PanelName0&quot;)
-        panel.setMetricsMode(og.GMM_PIXELS)
-        panel.setPosition(10, 10)
-        panel.setDimensions(400, 280)
-        panel.setMaterialName(&quot;SelectionDebugMaterial&quot;) 
-        self.mDebugOverlay.add2D(panel)
- 
-        self.mDebugOverlay.show()
-
-
-
+import ctypes as ctypes
+import random
+
+import ogre.renderer.OGRE as og
+
+
+# a class to store information about a object that got selected
+class SelectionObject():
+    def __init__(self,  entity):
+        self.entityName = entity.getName()
+        self.entity = entity #the selected entity
+        self.isPivot = False
+
+#        if self.entity.getUserObject() is not None:
+#            self.isGameObject = True
+#        else:
+#            self.isGameObject = False
+
+    #if True this instance will show its bounding box else it will hide it
+    def setSelected(self,  selected):
+        if selected == True:
+            self.entity.getParentNode().showBoundingBox(True)
+        else:
+            self.entity.getParentNode().showBoundingBox(False)
+
+    def __eq__(self, other):
+        return self.entity.getName() == other.entity.getName()
+
+    def __ne__(self, other):
+        return self.entity.getName() != other.entity.getName()
+
+# class to handle material switching without having to modify scene materials individually
+class MaterialSwitcher( og.MaterialManager.Listener ):
+    def __init__(self):
+        og.MaterialManager.Listener.__init__(self)
+      
+        self.currentColor = og.ColourValue(0.0, 0.0, 0.0)
+        self.currentColorAsVector3 = og.Vector3()
+        
+        self.lastEntity = &quot;&quot;
+        self.lastTechnique = None
+        
+        self.colorDict = {}
+       
+    # takes into account that one Entity can have multiple SubEntities
+    def handleSchemeNotFound(self, index, name, material, lod, subEntity):
+        temp = str(type(subEntity))
+        if temp == &quot;&lt;class 'ogre.renderer.OGRE._ogre_.SubEntity'&gt;&quot;:
+            if self.lastEntity == subEntity.getParent().getName():
+                subEntity.setCustomParameter(1, og.Vector4(self.currentColor.r, self.currentColor.g, self.currentColor.b, 1.0))
+                return self.lastTechnique
+            else:
+                self.lastTechnique = og.MaterialManager.getSingleton().load(&quot;PlainColorGLSL&quot;, og.ResourceGroupManager.DEFAULT_RESOURCE_GROUP_NAME).getTechnique(0)
+                
+                self.randomizeColor()
+                subEntity.setCustomParameter(1, og.Vector4(self.currentColor.r, self.currentColor.g, self.currentColor.b, 1.0))
+                
+                self.lastEntity = subEntity.getParent().getName()
+                self.colorDict[self.lastEntity] = self.currentColorAsVector3
+                return self.lastTechnique
+        
+
+    def randomizeColor(self):
+        r = random.randrange(1, 255)
+        g = random.randrange(1, 255)
+        b = random.randrange(1, 255)
+        self.currentColorAsVector3 = og.Vector3(r, g, b)
+        var = 1.0 / 255.0
+
+        self.currentColor = og.ColourValue(r * var, g * var, b * var)
+
+        #print str(int(self.currentColor.r * 255)) + &quot; &quot; + str(int(255 * self.currentColor.g)) + &quot; &quot; + str(int(255 * self.currentColor.b))
+    
+    def reset(self):
+        self.currentColor = og.ColourValue(0.0, 0.0, 0.0)
+        self.lastEntity = &quot;&quot;
+        
+# We need this attached to the depth target, otherwise we get problems with the compositor
+# MaterialManager.Listener should NOT be running all the time - rather only when we're
+# specifically rendering the target that needs it
+class SelectionRenderListener(og.RenderTargetListener):
+    def __init__(self, materialListener):
+        og.RenderTargetListener.__init__(self)
+        self.materialListener = materialListener
+ 
+    def preRenderTargetUpdate(self, evt):
+        og.MaterialManager.getSingleton().addListener( self.materialListener )
+ 
+    def postRenderTargetUpdate(self, evt):
+        og.MaterialManager.getSingleton().removeListener( self.materialListener )
+
+        
+class SelectionBuffer():
+    def __init__(self, sceneManager,  renderTarget):
+        self.sceneMgr = sceneManager
+        self.camera = sceneManager.getCamera(&quot;MainCam&quot;)
+
+        self.renderTarget = renderTarget
+        
+        # This is the material listener - Note: it is controlled by a seperate
+        # RenderTargetListener, not applied globally to all targets
+        self.materialSwitchListener = MaterialSwitcher()
+        
+        self.selectionTargetListener = SelectionRenderListener( self.materialSwitchListener )
+        
+        width = self.renderTarget.getWidth()
+        height = self.renderTarget.getHeight()
+        
+        self.texture = og.TextureManager.getSingleton().createManual(&quot;SelectionPassTex&quot;, 
+                                                                    og.ResourceGroupManager.DEFAULT_RESOURCE_GROUP_NAME, 
+                                                                    og.TEX_TYPE_2D, 
+                                                                    width, 
+                                                                    height, 
+                                                                    0, og.PixelFormat.PF_R8G8B8, og.TU_RENDERTARGET)
+                                                                    
+        self.renderTexture = self.texture.getBuffer().getRenderTarget()
+        self.renderTexture.setAutoUpdated(False)
+        self.renderTexture.setPriority(0)                                                         
+        self.renderTexture.addViewport( self.camera )
+        self.renderTexture.getViewport(0).setOverlaysEnabled(False)
+        self.renderTexture.getViewport(0).setClearEveryFrame(True)
+        self.renderTexture.addListener( self.selectionTargetListener )
+        self.renderTexture.getViewport(0).setMaterialScheme(&quot;aa&quot;)
+        
+#        self.createRTTOverlays()
+
+    def update(self):
+        self.updateBufferSize()
+        
+        self.renderTexture.update()        
+        self.materialSwitchListener.reset()
+        
+        pixelBuffer = self.texture.getBuffer()
+        bufferSize = pixelBuffer.getSizeInBytes()
+        #buffersize2 = self.renderTexture.getWidth()*self.renderTexture.getHeight()*4
+        
+        storageclass = ctypes.c_uint8 * (bufferSize)
+        self.buffer = storageclass()
+        
+        VoidPointer = og.CastVoidPtr(ctypes.addressof(self.buffer))
+
+        self.pBox = og.PixelBox(pixelBuffer.getWidth(), pixelBuffer.getHeight(),pixelBuffer.getDepth(), pixelBuffer.getFormat(), VoidPointer)
+        self.renderTexture.copyContentsToMemory(self.pBox, og.RenderTarget.FrameBuffer.FB_FRONT)
+
+#        i = 0
+#        
+#        while i &lt; len(self.buffer):
+#            #print str(self.buffer[i + 2]) + &quot; &quot; + str(self.buffer[i+1]) + &quot; &quot; + str(self.buffer[i])
+#            
+#            i += 4
+    
+    def updateBufferSize(self):
+        width = self.renderTarget.getWidth()
+        height = self.renderTarget.getHeight()
+        needsSizeUpdate = False
+        
+        if width is not self.renderTexture.getWidth():
+            needsSizeUpdate = True
+        if height is not self.renderTexture.getHeight():
+            needsSizeUpdate = True            
+        
+        if needsSizeUpdate:
+            og.TextureManager.getSingleton().unload(&quot;SelectionPassTex&quot;)
+            
+            self.texture = og.TextureManager.getSingleton().createManual(&quot;SelectionPassTex&quot;, 
+                                                            og.ResourceGroupManager.DEFAULT_RESOURCE_GROUP_NAME, 
+                                                            og.TEX_TYPE_2D, 
+                                                            width, 
+                                                            height, 
+                                                            0, og.PixelFormat.PF_R8G8B8, og.TU_RENDERTARGET)
+                                                                    
+            self.renderTexture = self.texture.getBuffer().getRenderTarget()
+            self.renderTexture.setAutoUpdated(False)
+            self.renderTexture.setPriority(0)                                                         
+            self.renderTexture.addViewport( self.camera )
+            self.renderTexture.getViewport(0).setOverlaysEnabled(False)
+            self.renderTexture.getViewport(0).setClearEveryFrame(True)
+            self.renderTexture.addListener( self.selectionTargetListener )
+            self.renderTexture.getViewport(0).setMaterialScheme(&quot;aa&quot;)
+        else:
+            return
+            
+    def onSelectionClick(self, x, y):
+        self.update()
+        
+        posInStream = (self.pBox.getWidth() * y - 1)*4
+        posInStream += x*4
+        
+        colVec = og.Vector3(self.buffer[posInStream + 2], self.buffer[posInStream+1], self.buffer[posInStream])
+        
+        for key in self.materialSwitchListener.colorDict:
+            if self.materialSwitchListener.colorDict[key] == colVec:
+                if key == &quot;OgreMainWin::0::ViewportGrid&quot;:
+                    return None
+                elif key == &quot;rayLine&quot;:
+                    return None
+                elif key == &quot;EditorXArrow&quot;:
+                    so = SelectionObject(self.sceneMgr.getEntity(key))
+                    so.isPivot = True
+                    return so
+                elif key == &quot;EditorYArrow&quot;:
+                    so = SelectionObject(self.sceneMgr.getEntity(key))
+                    so.isPivot = True
+                    return so
+                elif key == &quot;EditorZArrow&quot;:
+                    so = SelectionObject(self.sceneMgr.getEntity(key))
+                    so.isPivot = True
+                    return so
+                elif key == &quot;EditorFreeMover&quot;:
+                    return None
+                elif key == &quot;EditorXRotator&quot; or key == &quot;EditorYRotator&quot; or key == &quot;EditorZRotator&quot;:
+                    so = SelectionObject(self.sceneMgr.getEntity(key))
+                    so.isPivot = True
+                    return so
+                else:
+                    so = SelectionObject(self.sceneMgr.getEntity(key))
+                    return so
+
+        return None
+        
+    def createRTTOverlays(self):
+        baseWhite = og.MaterialManager.getSingletonPtr().getByName(&quot;Lockenwickler_Pivot_X&quot;)
+        SelectionBufferTexture = baseWhite.clone(&quot;SelectionDebugMaterial&quot;)
+        textureUnit = SelectionBufferTexture.getTechnique(0).getPass(0).createTextureUnitState()
+ 
+        textureUnit.setTextureName(&quot;SelectionPassTex&quot;)
+ 
+ 
+        overlayManager = og.OverlayManager.getSingleton()
+        # Create an overlay
+        self.mDebugOverlay = overlayManager.create(&quot;OverlayName&quot;)
+ 
+        # Create a panel
+        panel = overlayManager.createOverlayElement(&quot;Panel&quot;, &quot;PanelName0&quot;)
+        panel.setMetricsMode(og.GMM_PIXELS)
+        panel.setPosition(10, 10)
+        panel.setDimensions(400, 280)
+        panel.setMaterialName(&quot;SelectionDebugMaterial&quot;) 
+        self.mDebugOverlay.add2D(panel)
+ 
+        self.mDebugOverlay.show()
+
+
+

Modified: rl/trunk/editors/Lockenwickler/src/media/Pivot_Point.material
===================================================================
--- rl/trunk/editors/Lockenwickler/src/media/Pivot_Point.material	2009-02-24 18:16:58 UTC (rev 4775)
+++ rl/trunk/editors/Lockenwickler/src/media/Pivot_Point.material	2009-02-24 19:29:34 UTC (rev 4776)
@@ -142,7 +142,7 @@
 	}
 }
 
-fragment_program PlainColorGLSL_VP glsl
+vertex_program PlainColorGLSL_VP glsl
 {
 	source PlainColorVP.glsl
 }

Modified: rl/trunk/editors/Lockenwickler/src/media/PlainColorFP.glsl
===================================================================
--- rl/trunk/editors/Lockenwickler/src/media/PlainColorFP.glsl	2009-02-24 18:16:58 UTC (rev 4775)
+++ rl/trunk/editors/Lockenwickler/src/media/PlainColorFP.glsl	2009-02-24 19:29:34 UTC (rev 4776)
@@ -2,6 +2,6 @@
 
 void main(void)
 {
-	//gl_FragColor = inColor;
-	gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
+	gl_FragColor = inColor;
+	//gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
 }
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001832.html">[Dsa-hl-svn] r4775 - in rl/trunk/editors/Lockenwickler/src: . media
</A></li>
	<LI>Next message: <A HREF="001834.html">[Dsa-hl-svn] r4777 - dependencies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1833">[ date ]</a>
              <a href="thread.html#1833">[ thread ]</a>
              <a href="subject.html#1833">[ subject ]</a>
              <a href="author.html#1833">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
