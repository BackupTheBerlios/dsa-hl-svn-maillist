<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r4190 - in rl/trunk/engine: ai/include ai/src	common/include common/src core/include core/src rules/include	rules/src script/include script/src script/swig ui/include ui/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4190%20-%20in%20rl/trunk/engine%3A%20ai/include%20ai/src%0A%09common/include%20common/src%20core/include%20core/src%20rules/include%0A%09rules/src%20script/include%20script/src%20script/swig%20ui/include%20ui/src&In-Reply-To=%3C200803061703.m26H3dYa021976%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001260.html">
   <LINK REL="Next"  HREF="001262.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r4190 - in rl/trunk/engine: ai/include ai/src	common/include common/src core/include core/src rules/include	rules/src script/include script/src script/swig ui/include ui/src</H1>
    <B>blakharaz at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4190%20-%20in%20rl/trunk/engine%3A%20ai/include%20ai/src%0A%09common/include%20common/src%20core/include%20core/src%20rules/include%0A%09rules/src%20script/include%20script/src%20script/swig%20ui/include%20ui/src&In-Reply-To=%3C200803061703.m26H3dYa021976%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r4190 - in rl/trunk/engine: ai/include ai/src	common/include common/src core/include core/src rules/include	rules/src script/include script/src script/swig ui/include ui/src">blakharaz at mail.berlios.de
       </A><BR>
    <I>Thu Mar  6 18:03:39 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001260.html">[Dsa-hl-svn] r4189 - rl/trunk/engine/ui/src
</A></li>
        <LI>Next message: <A HREF="001262.html">[Dsa-hl-svn] r4191 - in modules: common/materials	common/materials/alpha kanalisation/materials	kanalisation/materials/textures
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1261">[ date ]</a>
              <a href="thread.html#1261">[ thread ]</a>
              <a href="subject.html#1261">[ subject ]</a>
              <a href="author.html#1261">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: blakharaz
Date: 2008-03-06 18:03:27 +0100 (Thu, 06 Mar 2008)
New Revision: 4190

Modified:
   rl/trunk/engine/ai/include/Dialog.h
   rl/trunk/engine/ai/include/DialogManager.h
   rl/trunk/engine/ai/src/Dialog.cpp
   rl/trunk/engine/ai/src/DialogManager.cpp
   rl/trunk/engine/common/include/Properties.h
   rl/trunk/engine/common/src/Properties.cpp
   rl/trunk/engine/core/include/Job.h
   rl/trunk/engine/core/include/SaveGameFile.h
   rl/trunk/engine/core/include/Trigger.h
   rl/trunk/engine/core/src/Job.cpp
   rl/trunk/engine/core/src/SaveGameFile.cpp
   rl/trunk/engine/core/src/Trigger.cpp
   rl/trunk/engine/rules/include/Armor.h
   rl/trunk/engine/rules/include/Container.h
   rl/trunk/engine/rules/include/Creature.h
   rl/trunk/engine/rules/include/Effect.h
   rl/trunk/engine/rules/include/GameObject.h
   rl/trunk/engine/rules/include/GlobalProperties.h
   rl/trunk/engine/rules/include/Inventory.h
   rl/trunk/engine/rules/include/Item.h
   rl/trunk/engine/rules/include/Quest.h
   rl/trunk/engine/rules/include/QuestBook.h
   rl/trunk/engine/rules/include/Weapon.h
   rl/trunk/engine/rules/src/Armor.cpp
   rl/trunk/engine/rules/src/Container.cpp
   rl/trunk/engine/rules/src/Creature.cpp
   rl/trunk/engine/rules/src/Effect.cpp
   rl/trunk/engine/rules/src/GameObject.cpp
   rl/trunk/engine/rules/src/GlobalProperties.cpp
   rl/trunk/engine/rules/src/Inventory.cpp
   rl/trunk/engine/rules/src/Item.cpp
   rl/trunk/engine/rules/src/Quest.cpp
   rl/trunk/engine/rules/src/QuestBook.cpp
   rl/trunk/engine/rules/src/Weapon.cpp
   rl/trunk/engine/script/include/stdinc.h
   rl/trunk/engine/script/src/ScriptSubsystem.cpp
   rl/trunk/engine/script/swig/RlCore.swig
   rl/trunk/engine/script/swig/RlRules.swig
   rl/trunk/engine/script/swig/TypeRlCeGuiString.swig
   rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig
   rl/trunk/engine/ui/include/PropertiesWindow.h
   rl/trunk/engine/ui/src/MainMenuLoadWindow.cpp
   rl/trunk/engine/ui/src/PropertiesWindow.cpp
Log:
Moved getAllProperties from PropertyHolder subclasses to a template method of PropertyHolder, PropertyHolder subclasses must now implement getAllPropertyKeys instead


Modified: rl/trunk/engine/ai/include/Dialog.h
===================================================================
--- rl/trunk/engine/ai/include/Dialog.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/ai/include/Dialog.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -46,9 +46,9 @@
 		bool isExitRequested() const;
         CeGuiString getVariableValue(const Ogre::String&amp; variableName) const;
 
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
 
     private:
         DialogResponse* mDialogStart;

Modified: rl/trunk/engine/ai/include/DialogManager.h
===================================================================
--- rl/trunk/engine/ai/include/DialogManager.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/ai/include/DialogManager.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -58,9 +58,9 @@
         Dialog* createDialog(const Ogre::String&amp; name, rl::Creature* npc, rl::Creature* pc);
         Dialog* createDialog(const Ogre::String&amp; name, const std::vector&lt;Creature*&gt;&amp; pcs, const std::vector&lt;Creature*&gt;&amp; npcs);
 
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
         virtual void writeData(SaveGameFileWriter *writer);
         virtual void readData(SaveGameFileReader* reader);
         virtual CeGuiString getXmlNodeIdentifier() const;
@@ -78,7 +78,7 @@
 
             void setStartResponse(DialogResponse* response);
             Dialog* createDialog(const std::vector&lt;Creature*&gt;&amp; pcs, const std::vector&lt;Creature*&gt;&amp; npcs);
-            void setProperty(const Ogre::String&amp; key, const Property&amp; value);
+            void setProperty(const CeGuiString&amp; key, const Property&amp; value);
 
         private:
             std::map&lt;int, DialogOption*&gt; mOptionCache;

Modified: rl/trunk/engine/ai/src/Dialog.cpp
===================================================================
--- rl/trunk/engine/ai/src/Dialog.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/ai/src/Dialog.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -62,7 +62,7 @@
         return mPlayerCharacters[id];
     }
 
-    const Property Dialog::getProperty(const Ogre::String&amp; key) const
+    const Property Dialog::getProperty(const CeGuiString&amp; key) const
     {
         ///@todo dialog's state
 		if (key == Dialog::PROP_EXIT_REQUESTED)
@@ -73,7 +73,7 @@
         return mPropertyVariables.getProperty(key);
     }
 
-    void Dialog::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+    void Dialog::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
 		if (key == Dialog::PROP_EXIT_REQUESTED)
 		{
@@ -83,11 +83,15 @@
         mPropertyVariables.setProperty(key, value);
     }
 
-    PropertyRecord* Dialog::getAllProperties() const
+    PropertyKeys Dialog::getAllPropertyKeys() const
     {
-        PropertyRecord* ps = new PropertyRecord();
-        ///@todo to allow saving dialog's state
-        return ps;
+        PropertyKeys keys;
+        keys.insert(Dialog::PROP_EXIT_REQUESTED);
+        ///@todo dialog's state
+
+        PropertyKeys varKeys = mPropertyVariables.getAllPropertyKeys();
+        keys.insert(varKeys.begin(), varKeys.end());
+        return keys;
     }
 
 	bool Dialog::isExitRequested() const

Modified: rl/trunk/engine/ai/src/DialogManager.cpp
===================================================================
--- rl/trunk/engine/ai/src/DialogManager.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/ai/src/DialogManager.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -86,7 +86,7 @@
         shutdownXml();
     }
 
-    const Property DialogManager::getProperty(const Ogre::String &amp;key) const
+    const Property DialogManager::getProperty(const CeGuiString&amp; key) const
     {
         if (key == DialogManager::PROPERTY_DIALOGS)
         {
@@ -118,14 +118,14 @@
         Throw(IllegalArgumentException, key + &quot; is not a property of DialogManager&quot;);
     }
 
-    PropertyRecord* DialogManager::getAllProperties() const
+    PropertyKeys DialogManager::getAllPropertyKeys() const
     {
-        PropertyRecord* pr = new PropertyRecord();
-        pr-&gt;setProperty(DialogManager::PROPERTY_DIALOGS, getProperty(DialogManager::PROPERTY_DIALOGS));
-        return pr;
+        PropertyKeys keys;
+        keys.insert(DialogManager::PROPERTY_DIALOGS);
+        return keys;
     }
 
-    void DialogManager::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+    void DialogManager::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         ///@todo implement
     }
@@ -679,7 +679,7 @@
         return dialog;
     }
 
-    void DialogManager::DialogPrototype::setProperty(const Ogre::String &amp;key, const rl::Property &amp;value)
+    void DialogManager::DialogPrototype::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         mPropertyVariables.setProperty(key, value);
     }

Modified: rl/trunk/engine/common/include/Properties.h
===================================================================
--- rl/trunk/engine/common/include/Properties.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/common/include/Properties.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -23,17 +23,18 @@
 
     class PropertyRecord;
     class PropertyRecordPtr;
-
+    typedef std::set&lt;CeGuiString&gt; PropertyKeys;
     /**
      * This is the base class of all objects having Propertys
      */
     class _RlCommonExport PropertyHolder
     {
     public:
-        virtual const Property getProperty(const Ogre::String&amp; key) const = 0;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value) = 0;
+        virtual const Property getProperty(const CeGuiString&amp; key) const = 0;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value) = 0;
         void setPropertyAsString(const Ogre::String&amp; key, const CeGuiString&amp; value);
-        virtual PropertyRecord* getAllProperties() const = 0;
+        PropertyRecord* getAllProperties() const;
+        virtual PropertyKeys getAllPropertyKeys() const = 0;
         void setProperties(const PropertyRecord* props);
         void setProperties(const PropertyMap&amp; propmap);
     };
@@ -44,16 +45,16 @@
     class _RlCommonExport PropertyRecord : public PropertyHolder
     {
 	public:
-        typedef std::map&lt;const Ogre::String, Property&gt; PropertyRecordMap;
+        typedef std::map&lt;const CeGuiString, Property&gt; PropertyRecordMap;
 
         PropertyRecord();
         PropertyRecord(const PropertyRecord* ps);
         PropertyRecord(const PropertyMap&amp; propmap);
 
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        bool hasProperty(const Ogre::String&amp; key) const;
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        bool hasProperty(const CeGuiString&amp; key) const;
+        virtual PropertyKeys getAllPropertyKeys() const;
         const PropertyRecordMap::const_iterator begin() const;
         const PropertyRecordMap::const_iterator end() const;
         PropertyMap toPropertyMap() const;

Modified: rl/trunk/engine/common/src/Properties.cpp
===================================================================
--- rl/trunk/engine/common/src/Properties.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/common/src/Properties.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -43,6 +43,21 @@
         }
     }
 
+    PropertyRecord* PropertyHolder::getAllProperties() const
+    {
+        PropertyRecord* record = new PropertyRecord();
+
+        PropertyKeys keys = getAllPropertyKeys();
+        PropertyKeys::const_iterator end = keys.end();
+        for (PropertyKeys::const_iterator it = keys.begin(); it != end; ++it)
+        {
+            CeGuiString key = *it;
+            record-&gt;setProperty(key, getProperty(key));
+        }
+
+        return record;
+    }
+
     void PropertyHolder::setPropertyAsString(const Ogre::String&amp; key, const CeGuiString&amp; value)
     {
         Property prop = getProperty(key);
@@ -70,7 +85,7 @@
         convertToMap(propmap, mProperties);
     }
 
-    const Property PropertyRecord::getProperty(const Ogre::String&amp; key) const
+    const Property PropertyRecord::getProperty(const CeGuiString&amp; key) const
     {
         PropertyRecordMap::const_iterator it = mProperties.find(key);
         if (it == mProperties.end())
@@ -81,19 +96,25 @@
         return (*it).second;
     }
 
-    bool PropertyRecord::hasProperty(const Ogre::String&amp; key) const
+    bool PropertyRecord::hasProperty(const CeGuiString&amp; key) const
     {
         return mProperties.find(key) != mProperties.end();
     }
 
-    void PropertyRecord::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+    void PropertyRecord::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         mProperties[key] = value;
     }
 
-    PropertyRecord* PropertyRecord::getAllProperties() const
+    PropertyKeys PropertyRecord::getAllPropertyKeys() const
     {
-        return new PropertyRecord(this);
+        PropertyKeys keys;
+        for (PropertyRecordMap::const_iterator it = 
+            mProperties.begin(); it != mProperties.end(); ++it)
+        {
+            keys.insert(it-&gt;first);
+        }
+        return keys;
     }
 
     const PropertyRecord::PropertyRecordMap::const_iterator PropertyRecord::begin() const

Modified: rl/trunk/engine/core/include/Job.h
===================================================================
--- rl/trunk/engine/core/include/Job.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/core/include/Job.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -79,11 +79,11 @@
         virtual void discard();
 
         /// derived from PropertyHolder
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
         /// derived from PropertyHolder
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
         /// derived from PropertyHolder
-        virtual PropertyRecord* getAllProperties() const;
+        virtual PropertyKeys getAllPropertyKeys() const;
 
         /// returns the name of the class
         virtual const Ogre::String getClassName() const = 0;
@@ -142,11 +142,11 @@
         TimeSource::TimeSourceType getTimeSource() const;
 
         /// derived from PropertyHolder
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
         /// derived from PropertyHolder
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
         /// derived from PropertyHolder
-        virtual PropertyRecord* getAllProperties() const;
+        virtual PropertyKeys getAllPropertyKeys() const;
 
         /// returns the name of the class
         virtual const Ogre::String getClassName() const;

Modified: rl/trunk/engine/core/include/SaveGameFile.h
===================================================================
--- rl/trunk/engine/core/include/SaveGameFile.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/core/include/SaveGameFile.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -55,9 +55,9 @@
         virtual Ogre::Real getLoadingOrder(void) const;
 
         //propertyholder
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
     protected:
         //properties
         CeGuiString mName;

Modified: rl/trunk/engine/core/include/Trigger.h
===================================================================
--- rl/trunk/engine/core/include/Trigger.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/core/include/Trigger.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -50,9 +50,9 @@
 
         bool needsToBeSaved() const {return mNeedsToBeSaved;}
 
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
     protected:
         Ogre::String mName;
         Ogre::String mClassName;

Modified: rl/trunk/engine/core/src/Job.cpp
===================================================================
--- rl/trunk/engine/core/src/Job.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/core/src/Job.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -55,7 +55,7 @@
         RlFail(&quot;Discarded non discardable Job.&quot;);
     }
 
-    const Property AbstractJob::getProperty(const Ogre::String&amp; key) const
+    const Property AbstractJob::getProperty(const CeGuiString&amp; key) const
     {
         Property prop;
         if( key == &quot;discardable&quot; )
@@ -74,7 +74,7 @@
         return prop;
     }
 
-    void AbstractJob::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+    void AbstractJob::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         try
         {
@@ -101,13 +101,12 @@
         }
     }
 
-    PropertyRecord* AbstractJob::getAllProperties() const
+    PropertyKeys AbstractJob::getAllPropertyKeys() const
     {
-        PropertyRecord* ps = new PropertyRecord();
-        ps-&gt;setProperty(&quot;discardable&quot;, Property(mIsDiscardable));
-        ps-&gt;setProperty(&quot;destroywhendone&quot;, Property(mDestroyWhenDone));
-
-        return ps;
+        PropertyKeys keys;
+        keys.insert(&quot;discardable&quot;);
+        keys.insert(&quot;destroywhendone&quot;);
+        return keys;
     }
 
     Job::Job(bool isDiscardable, bool destroyWhenDone, TimeSource::TimeSourceType timesource, JobPersistenceType persistence)
@@ -131,7 +130,7 @@
         return mPersistence;
     }
 
-    const Property Job::getProperty(const Ogre::String&amp; key) const
+    const Property Job::getProperty(const CeGuiString&amp; key) const
     {
         Property prop;
         if( key == &quot;timesource&quot; )
@@ -142,7 +141,7 @@
         return AbstractJob::getProperty(key);
     }
 
-    void Job::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+    void Job::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         try
         {
@@ -163,12 +162,11 @@
         }
     }
 
-    PropertyRecord* Job::getAllProperties() const
+    PropertyKeys Job::getAllPropertyKeys() const
     {
-        PropertyRecord* ps = AbstractJob::getAllProperties();
-        ps-&gt;setProperty(&quot;timesource&quot;, Property((int)mTimeSource));
-
-        return ps;
+        PropertyKeys keys(AbstractJob::getAllPropertyKeys());
+        keys.insert(&quot;timesource&quot;);
+        return keys;
     }
 
     const Ogre::String Job::getClassName() const

Modified: rl/trunk/engine/core/src/SaveGameFile.cpp
===================================================================
--- rl/trunk/engine/core/src/SaveGameFile.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/core/src/SaveGameFile.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -107,7 +107,7 @@
         return !Ogre::DataStreamPtr( new Ogre::FileHandleDataStream(fopen(this-&gt;buildFilename().c_str(), &quot;r&quot;))).isNull();
     }
 
-    const Property SaveGameFile::getProperty(const Ogre::String&amp; key) const
+    const Property SaveGameFile::getProperty(const CeGuiString&amp; key) const
     {
         if(key == PROPERTY_MODULEID)
             return Property(mModuleID);
@@ -121,7 +121,7 @@
             return Property();
     }
 
-    void SaveGameFile::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+    void SaveGameFile::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         if(key == PROPERTY_MODULEID)
         {
@@ -145,13 +145,13 @@
         }
     }
 
-    PropertyRecord* SaveGameFile::getAllProperties() const
+    PropertyKeys SaveGameFile::getAllPropertyKeys() const
     {
-        PropertyRecord* set = new PropertyRecord();
-        set-&gt;setProperty(PROPERTY_MODULEID, getProperty(PROPERTY_MODULEID));
-        set-&gt;setProperty(PROPERTY_TIME, getProperty(PROPERTY_TIME));
-        set-&gt;setProperty(PROPERTY_NAME, getProperty(PROPERTY_NAME));
-        set-&gt;setProperty(PROPERTY_MODULENAME, getProperty(PROPERTY_MODULENAME));
+        PropertyKeys set;
+        set.insert(PROPERTY_MODULEID);
+        set.insert(PROPERTY_TIME);
+        set.insert(PROPERTY_NAME);
+        set.insert(PROPERTY_MODULENAME);
         return set;
     }
 

Modified: rl/trunk/engine/core/src/Trigger.cpp
===================================================================
--- rl/trunk/engine/core/src/Trigger.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/core/src/Trigger.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -26,7 +26,7 @@
     {
     }
 
-    const Property Trigger::getProperty(const Ogre::String&amp; key) const
+    const Property Trigger::getProperty(const CeGuiString&amp; key) const
     {
         Property prop;
         if( key == &quot;name&quot; )
@@ -41,7 +41,7 @@
         return prop;
     }
 
-    void Trigger::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+    void Trigger::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         try
         {
@@ -64,13 +64,12 @@
         }
     }
 
-    PropertyRecord* Trigger::getAllProperties() const
+    PropertyKeys Trigger::getAllPropertyKeys() const
     {
-        PropertyRecord* ps = new PropertyRecord();
-        ps-&gt;setProperty(&quot;name&quot;, Property(mName));
-        ps-&gt;setProperty(&quot;classname&quot;, Property(mClassName));
-
-        return ps;
+        PropertyKeys keys;
+        keys.insert(&quot;name&quot;);
+        keys.insert(&quot;classname&quot;);
+        return keys;
     }
 
 }

Modified: rl/trunk/engine/rules/include/Armor.h
===================================================================
--- rl/trunk/engine/rules/include/Armor.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/Armor.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -69,9 +69,9 @@
 		void setGRS(int grs);
 		void setGBE(int gbe);
 
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
 
         virtual void onStateChange(GameObjectState oldState, GameObjectState newState);
 

Modified: rl/trunk/engine/rules/include/Container.h
===================================================================
--- rl/trunk/engine/rules/include/Container.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/Container.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -84,9 +84,9 @@
         void setItemPosition(Item* item, int xPos, int yPos);
         IntPair getItemPosition(Item* item) const;
 
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
 
         bool canHold(Item* item);
 

Modified: rl/trunk/engine/rules/include/Creature.h
===================================================================
--- rl/trunk/engine/rules/include/Creature.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/Creature.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -692,9 +692,9 @@
             void regenerateAu(int modifier = 0, float factor = 1, float time = Date::ONE_SPIELRUNDE);
 
 
-            virtual const Property getProperty(const Ogre::String&amp; key) const;
-            virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-            virtual PropertyRecord* getAllProperties() const;
+            virtual const Property getProperty(const CeGuiString&amp; key) const;
+            virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+            virtual PropertyKeys getAllPropertyKeys() const;
 
             void setAlignment(Alignment);
             Alignment getAlignment() const;

Modified: rl/trunk/engine/rules/include/Effect.h
===================================================================
--- rl/trunk/engine/rules/include/Effect.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/Effect.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -126,6 +126,9 @@
         /// Returns the modificator applied on the value specified by the parameters.
         virtual int getMod(CeGuiString target, ModType type, ModTag tag);
 
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
 	protected:
 		CeGuiString mName;
 		CeGuiString mDescription;

Modified: rl/trunk/engine/rules/include/GameObject.h
===================================================================
--- rl/trunk/engine/rules/include/GameObject.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/GameObject.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -154,9 +154,9 @@
         void setHighlighted(bool highlight);
         bool isHighlighted() const;
 
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
 
         GameObjectState getState() const;
         virtual void setState(GameObjectState state);

Modified: rl/trunk/engine/rules/include/GlobalProperties.h
===================================================================
--- rl/trunk/engine/rules/include/GlobalProperties.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/GlobalProperties.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -36,9 +36,9 @@
         virtual ~GlobalProperties();
 
         /// Overrides from PropertyHolder
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
         bool hasProperty(const Ogre::String&amp; key) const;
 
         /// Overrides from SaveGameData

Modified: rl/trunk/engine/rules/include/Inventory.h
===================================================================
--- rl/trunk/engine/rules/include/Inventory.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/Inventory.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -91,9 +91,9 @@
 
 	Creature* getOwner() const;
 
-	virtual const Property getProperty(const Ogre::String&amp; key) const;
-    virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-    virtual PropertyRecord* getAllProperties() const;
+	virtual const Property getProperty(const CeGuiString&amp; key) const;
+    virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+    virtual PropertyKeys getAllPropertyKeys() const;
 
 private:
 	bool mValuesUpToDate;

Modified: rl/trunk/engine/rules/include/Item.h
===================================================================
--- rl/trunk/engine/rules/include/Item.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/Item.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -103,9 +103,9 @@
         virtual void setOwner(GameObject* go);
         GameObject* getOwner() const;
 
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
 
         void doCreateActor();
     protected:

Modified: rl/trunk/engine/rules/include/Quest.h
===================================================================
--- rl/trunk/engine/rules/include/Quest.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/Quest.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -160,9 +160,9 @@
         static Quest::State getStateFromName(const CeGuiString stateName);
         static bool getKnownFromName(const CeGuiString knownName);
 
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
 
     private:
 

Modified: rl/trunk/engine/rules/include/QuestBook.h
===================================================================
--- rl/trunk/engine/rules/include/QuestBook.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/QuestBook.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -78,11 +78,11 @@
 
     void _fireQuestBookChanged(Quest* quest, int reason);
 
-    virtual const Property getProperty(const Ogre::String&amp; key) const;
+    virtual const Property getProperty(const CeGuiString&amp; key) const;
     PropertyArray getQuestsProperty(const Quest* rootQuest) const;
-    virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
+    virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
     void setQuestsProperty(PropertyArray array, Quest* rootQuest);
-    virtual PropertyRecord* getAllProperties() const;
+    virtual PropertyKeys getAllPropertyKeys() const;
 
     /// Override from SaveGameData
     /// Manages saving and loading from the SaveGameFile

Modified: rl/trunk/engine/rules/include/Weapon.h
===================================================================
--- rl/trunk/engine/rules/include/Weapon.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/include/Weapon.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -73,9 +73,9 @@
 		/// Return maximum distance in meters where weapon can be used without penalty.
 		Ogre::Real getMaximumDistance() const;
 
-        virtual const Property getProperty(const Ogre::String&amp; key) const;
-        virtual void setProperty(const Ogre::String&amp; key, const Property&amp; value);
-        virtual PropertyRecord* getAllProperties() const;
+        virtual const Property getProperty(const CeGuiString&amp; key) const;
+        virtual void setProperty(const CeGuiString&amp; key, const Property&amp; value);
+        virtual PropertyKeys getAllPropertyKeys() const;
 
 	private:
 		Tripel&lt;int&gt; mTp;

Modified: rl/trunk/engine/rules/src/Armor.cpp
===================================================================
--- rl/trunk/engine/rules/src/Armor.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/Armor.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -134,7 +134,7 @@
 		mGBE = gbe;
 	}
 
-    void Armor::setProperty(const Ogre::String &amp;key, const rl::Property &amp;value)
+    void Armor::setProperty(const CeGuiString &amp;key, const Property &amp;value)
     {
         if (key == Armor::PROPERTY_G_BE)
         {
@@ -180,7 +180,7 @@
         }
     }
 
-    const Property Armor::getProperty(const Ogre::String &amp;key) const
+    const Property Armor::getProperty(const CeGuiString &amp;key) const
     {
         if (key == Armor::PROPERTY_G_BE)
         {
@@ -196,13 +196,13 @@
         }
     }
 
-    PropertyRecord* Armor::getAllProperties() const
+    PropertyKeys Armor::getAllPropertyKeys() const
     {
-        PropertyRecord* ps = Item::getAllProperties();
-        ps-&gt;setProperty(Armor::PROPERTY_G_BE, Property(mGBE));
-        ps-&gt;setProperty(Armor::PROPERTY_G_RS, Property(mGRS));
+        PropertyKeys keys(Item::getAllPropertyKeys());
+        keys.insert(Armor::PROPERTY_G_BE);
+        keys.insert(Armor::PROPERTY_G_RS);
 
-        return ps;
+        return keys;
     }
 }
 

Modified: rl/trunk/engine/rules/src/Container.cpp
===================================================================
--- rl/trunk/engine/rules/src/Container.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/Container.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -317,7 +317,7 @@
 		return Item::getMass() + getContentWeight();
     }
 
-    void Container::setProperty(const Ogre::String &amp;key, const rl::Property &amp;value)
+    void Container::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         if (key == Container::PROPERTY_CAPACITY)
         {
@@ -357,7 +357,7 @@
         }
     }
 
-    const Property Container::getProperty(const Ogre::String &amp;key) const
+    const Property Container::getProperty(const CeGuiString&amp; key) const
     {
         if (key == Container::PROPERTY_CAPACITY)
         {
@@ -392,14 +392,13 @@
         }
     }
 
-    PropertyRecord* Container::getAllProperties() const
+    PropertyKeys Container::getAllPropertyKeys() const
     {
-        PropertyRecord* ps = Item::getAllProperties();
-        ps-&gt;setProperty(Container::PROPERTY_CAPACITY, Property(mCapacity));
-        ps-&gt;setProperty(Container::PROPERTY_VOLUME, Property(make_pair((int)mVolume.first, (int)mVolume.second)));
-		ps-&gt;setProperty(Container::PROPERTY_CONTENT, getProperty(Container::PROPERTY_CONTENT));
-
-        return ps;
+        PropertyKeys keys(Item::getAllPropertyKeys());
+        keys.insert(Container::PROPERTY_CAPACITY);
+        keys.insert(Container::PROPERTY_VOLUME);
+        keys.insert(Container::PROPERTY_CONTENT);
+        return keys;
     }
 
     bool Container::canHold(Item* item)

Modified: rl/trunk/engine/rules/src/Creature.cpp
===================================================================
--- rl/trunk/engine/rules/src/Creature.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/Creature.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -1000,7 +1000,7 @@
         return mAlignment;
     }
 
-    void Creature::setProperty(const Ogre::String &amp;key, const rl::Property &amp;value)
+    void Creature::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         if (key == Creature::PROPERTY_AI)
         {
@@ -1095,7 +1095,7 @@
         }
     }
 
-    const Property Creature::getProperty(const Ogre::String &amp;key) const
+    const Property Creature::getProperty(const CeGuiString&amp; key) const
     {
         if (key == Creature::PROPERTY_AI)
         {
@@ -1188,29 +1188,29 @@
         }
     }
 
-    PropertyRecord* Creature::getAllProperties() const
+    PropertyKeys Creature::getAllPropertyKeys() const
     {
-        PropertyRecord* ps = GameObject::getAllProperties();
-        ps-&gt;setProperty(Creature::PROPERTY_AI, mAiProperties);
-        ps-&gt;setProperty(Creature::PROPERTY_INVENTORY_WINDOW_TYPE, Property(mInventoryWindowType));
-        ps-&gt;setProperty(Creature::PROPERTY_CURRENT_LE, getProperty(Creature::PROPERTY_CURRENT_LE));
-        ps-&gt;setProperty(Creature::PROPERTY_CURRENT_AE, getProperty(Creature::PROPERTY_CURRENT_AE));
-        ps-&gt;setProperty(Creature::PROPERTY_CURRENT_AU, getProperty(Creature::PROPERTY_CURRENT_AU));
-        ps-&gt;setProperty(Creature::PROPERTY_CURRENT_FATIGUE, getProperty(Creature::PROPERTY_CURRENT_FATIGUE));
-        //ps-&gt;setProperty(Creature::PROPERTY_EFFECTS, getProperty(Creature::PROPERTY_EFFECTS));
-        ps-&gt;setProperty(Creature::PROPERTY_EIGENSCHAFTEN, getProperty(Creature::PROPERTY_EIGENSCHAFTEN));
-        ps-&gt;setProperty(Creature::PROPERTY_TALENTE, getProperty(Creature::PROPERTY_TALENTE));
-        ps-&gt;setProperty(Creature::PROPERTY_KAMPFTECHNIKEN, getProperty(Creature::PROPERTY_KAMPFTECHNIKEN));
-        ps-&gt;setProperty(Creature::PROPERTY_VORTEILE, getProperty(Creature::PROPERTY_VORTEILE));
-        ps-&gt;setProperty(Creature::PROPERTY_NACHTEILE, getProperty(Creature::PROPERTY_NACHTEILE));
-        //ps-&gt;setProperty(Creature::PROPERTY_SF, getProperty(Creature::PROPERTY_SF));
-        ps-&gt;setProperty(Creature::PROPERTY_WERTE, getProperty(Creature::PROPERTY_WERTE));
-        ps-&gt;setProperty(Creature::PROPERTY_AP, getProperty(Creature::PROPERTY_AP));
-        ps-&gt;setProperty(Creature::PROPERTY_INVENTORY, getProperty(Creature::PROPERTY_INVENTORY));
-        ps-&gt;setProperty(Creature::PROPERTY_ANIMATIONS, getProperty(Creature::PROPERTY_ANIMATIONS));
-        ps-&gt;setProperty(Creature::PROPERTY_ANIMATIONSPEEDS, getProperty(Creature::PROPERTY_ANIMATIONSPEEDS));
+        PropertyKeys keys(GameObject::getAllPropertyKeys());
+        keys.insert(Creature::PROPERTY_AI);
+        keys.insert(Creature::PROPERTY_INVENTORY_WINDOW_TYPE);
+        keys.insert(Creature::PROPERTY_CURRENT_LE);
+        keys.insert(Creature::PROPERTY_CURRENT_AE);
+        keys.insert(Creature::PROPERTY_CURRENT_AU);
+        keys.insert(Creature::PROPERTY_CURRENT_FATIGUE);
+        //keys.insert(Creature::PROPERTY_EFFECTS);
+        keys.insert(Creature::PROPERTY_EIGENSCHAFTEN);
+        keys.insert(Creature::PROPERTY_TALENTE);
+        keys.insert(Creature::PROPERTY_KAMPFTECHNIKEN);
+        keys.insert(Creature::PROPERTY_VORTEILE);
+        keys.insert(Creature::PROPERTY_NACHTEILE);
+        //keys.insert(Creature::PROPERTY_SF);
+        keys.insert(Creature::PROPERTY_WERTE);
+        keys.insert(Creature::PROPERTY_AP);
+        keys.insert(Creature::PROPERTY_INVENTORY);
+        keys.insert(Creature::PROPERTY_ANIMATIONS);
+        keys.insert(Creature::PROPERTY_ANIMATIONSPEEDS);
 
-        return ps;
+        return keys;
     }
 
     Creature::AnimationSpeedPair Creature::getAnimation(const CeGuiString&amp; name) const

Modified: rl/trunk/engine/rules/src/Effect.cpp
===================================================================
--- rl/trunk/engine/rules/src/Effect.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/Effect.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -102,4 +102,31 @@
     {
       return 0;
     }
+
+    const Property Effect::getProperty(const CeGuiString&amp; key) const
+    {
+        //else
+        //{
+            Throw(
+                IllegalArgumentException, 
+                key + &quot; is not a property of this effect (&quot; + mName + &quot;)&quot;);
+        //}
+    }
+
+    void Effect::setProperty(const CeGuiString&amp; key, const Property&amp; value)
+    {
+        // else
+        //{
+            LOG_WARNING(
+                Logger::RULES,
+                key + &quot; is not a property of this GameObject (&quot;+mName+&quot;)&quot;);
+        //}
+    }
+
+    PropertyKeys Effect::getAllPropertyKeys() const
+    {
+        PropertyKeys keys;
+        return keys;
+    }
+
 }

Modified: rl/trunk/engine/rules/src/GameObject.cpp
===================================================================
--- rl/trunk/engine/rules/src/GameObject.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/GameObject.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -448,7 +448,7 @@
         return mEffectManager-&gt;getEffects();
     }
 
-    const Property GameObject::getProperty(const Ogre::String&amp; key) const
+    const Property GameObject::getProperty(const CeGuiString&amp; key) const
     {
         Property prop;
         if (key == PROPERTY_POSITION)
@@ -501,7 +501,7 @@
         return prop;
     }
 
-    void GameObject::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+    void GameObject::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         try
         {
@@ -596,22 +596,18 @@
         }
     }
 
-    PropertyRecord* GameObject::getAllProperties() const
+    PropertyKeys GameObject::getAllPropertyKeys() const
     {
-        PropertyRecord* ps = new PropertyRecord();
-        ps-&gt;setProperty(PROPERTY_NAME, Property(mName));
-        ps-&gt;setProperty(PROPERTY_DESCRIPTION, Property(mDescription));
-        if(this-&gt;getState() == GOS_IN_SCENE)
-        {
-            ps-&gt;setProperty(PROPERTY_POSITION, Property(getPosition()));
-            ps-&gt;setProperty(PROPERTY_ORIENTATION, Property(getOrientation()));
-        }
-        ps-&gt;setProperty(PROPERTY_MESHFILE, Property(mMeshfile));
-        ps-&gt;setProperty(PROPERTY_MESHPARTS, getProperty(PROPERTY_MESHPARTS));
-        ps-&gt;setProperty(PROPERTY_GEOMETRY_TYPE, getProperty(PROPERTY_GEOMETRY_TYPE));
-        ps-&gt;setProperty(PROPERTY_MASS, Property(mMass));
-
-        return ps;
+        PropertyKeys keys;
+        keys.insert(PROPERTY_NAME);
+        keys.insert(PROPERTY_DESCRIPTION);
+        keys.insert(PROPERTY_POSITION);
+        keys.insert(PROPERTY_ORIENTATION); 
+        keys.insert(PROPERTY_MESHFILE);
+        keys.insert(PROPERTY_MESHPARTS);
+        keys.insert(PROPERTY_GEOMETRY_TYPE);
+        keys.insert(PROPERTY_MASS);
+        return keys;
     }
 
     Actor* GameObject::createActor()

Modified: rl/trunk/engine/rules/src/GlobalProperties.cpp
===================================================================
--- rl/trunk/engine/rules/src/GlobalProperties.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/GlobalProperties.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -38,19 +38,19 @@
 
     
     /// Overrides from PropertyHolder
-    const Property GlobalProperties::getProperty(const Ogre::String&amp; key) const
+    const Property GlobalProperties::getProperty(const CeGuiString&amp; key) const
     {
         return mProperties-&gt;getProperty(key);
     }
 
-    void GlobalProperties::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+    void GlobalProperties::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         mProperties-&gt;setProperty(key, value);
     }
 
-    PropertyRecord* GlobalProperties::getAllProperties() const
+    PropertyKeys GlobalProperties::getAllPropertyKeys() const
     {
-        return mProperties;
+        return mProperties-&gt;getAllPropertyKeys();
     }
 
     bool GlobalProperties::hasProperty(const Ogre::String &amp;key) const

Modified: rl/trunk/engine/rules/src/Inventory.cpp
===================================================================
--- rl/trunk/engine/rules/src/Inventory.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/Inventory.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -263,7 +263,7 @@
         return mSlots;
     }
 
-	const Property Inventory::getProperty(const Ogre::String&amp; key) const
+	const Property Inventory::getProperty(const CeGuiString&amp; key) const
 	{
 		Property prop;
 		if (key == Inventory::PROPERTY_CONTENT)
@@ -286,7 +286,7 @@
 		return prop;
 	}
 
-	void Inventory::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+	void Inventory::setProperty(const CeGuiString&amp; key, const Property&amp; value)
 	{
         if (key == Inventory::PROPERTY_SLOTS)
         {
@@ -352,11 +352,11 @@
 		}
 	}
 
-    PropertyRecord* Inventory::getAllProperties() const
+    PropertyKeys Inventory::getAllPropertyKeys() const
 	{
-		PropertyRecord* ps = new PropertyRecord();
-		ps-&gt;setProperty(Inventory::PROPERTY_SLOTS, getProperty(Inventory::PROPERTY_SLOTS));
-		ps-&gt;setProperty(Inventory::PROPERTY_CONTENT, getProperty(Inventory::PROPERTY_CONTENT));
-		return ps;
+        PropertyKeys keys;
+		keys.insert(Inventory::PROPERTY_SLOTS);
+        keys.insert(Inventory::PROPERTY_CONTENT);
+		return keys;
 	}
 }

Modified: rl/trunk/engine/rules/src/Item.cpp
===================================================================
--- rl/trunk/engine/rules/src/Item.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/Item.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -161,7 +161,7 @@
         GameObjectManager::getSingleton().gameObjectStateChanged(this, oldState, targetState);
     }
 
-    void Item::setProperty(const Ogre::String &amp;key, const rl::Property &amp;value)
+    void Item::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         if (key == Item::PROPERTY_IMAGENAME)
         {
@@ -185,7 +185,7 @@
         }
     }
 
-    const Property Item::getProperty(const Ogre::String &amp;key) const
+    const Property Item::getProperty(const CeGuiString&amp; key) const
     {
         if (key == Item::PROPERTY_IMAGENAME)
         {
@@ -209,14 +209,13 @@
         }
     }
 
-    PropertyRecord* Item::getAllProperties() const
+    PropertyKeys Item::getAllPropertyKeys() const
     {
-        PropertyRecord* ps = GameObject::getAllProperties();
-        ps-&gt;setProperty(Item::PROPERTY_IMAGENAME, Property(mImageName));
-        ps-&gt;setProperty(Item::PROPERTY_SIZE, Property(mSize));
-        ps-&gt;setProperty(Item::PROPERTY_ITEMTYPE, Property(mItemType));
-
-        return ps;
+        PropertyKeys keys(GameObject::getAllPropertyKeys());
+        keys.insert(Item::PROPERTY_IMAGENAME);
+        keys.insert(Item::PROPERTY_SIZE);
+        keys.insert(Item::PROPERTY_ITEMTYPE);
+        return keys;
     }
 
     void Item::setOwner(GameObject* owner)

Modified: rl/trunk/engine/rules/src/Quest.cpp
===================================================================
--- rl/trunk/engine/rules/src/Quest.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/Quest.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -296,7 +296,7 @@
 	}
 }
 
-const Property Quest::getProperty(const Ogre::String&amp; key) const
+const Property Quest::getProperty(const CeGuiString&amp; key) const
 {
     if (key == PROPERTY_KNOWN)
     {
@@ -324,7 +324,7 @@
     }
 }
 
-void Quest::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+void Quest::setProperty(const CeGuiString&amp; key, const Property&amp; value)
 {
     if (key == PROPERTY_KNOWN)
     {
@@ -352,18 +352,19 @@
     }
 }
 
-PropertyRecord* Quest::getAllProperties() const
+PropertyKeys Quest::getAllPropertyKeys() const
 {
-    PropertyRecord* ps = new PropertyRecord();
+    PropertyKeys keys;
 
-    ps-&gt;setProperty(PROPERTY_ID, Property(mId));
-    ps-&gt;setProperty(PROPERTY_NAME, Property(mName));
-    ps-&gt;setProperty(PROPERTY_DESCRIPTION, Property(mDescription));
-    ps-&gt;setProperty(PROPERTY_KNOWN, Property(mKnown));
-    ps-&gt;setProperty(PROPERTY_STATE, Property(STATE_NAMES[mState]));
-    ps-&gt;setProperties(mAdditionalProperties);
+    keys.insert(PROPERTY_ID);
+    keys.insert(PROPERTY_NAME);
+    keys.insert(PROPERTY_DESCRIPTION);
+    keys.insert(PROPERTY_KNOWN);
+    keys.insert(PROPERTY_STATE);
+    PropertyKeys addKeys = mAdditionalProperties-&gt;getAllPropertyKeys();
+    keys.insert(addKeys.begin(), addKeys.end());
 
-    return ps;
+    return keys;
 }
 
 }

Modified: rl/trunk/engine/rules/src/QuestBook.cpp
===================================================================
--- rl/trunk/engine/rules/src/QuestBook.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/QuestBook.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -164,7 +164,7 @@
         return mJournalEntries[index];
     }
 
-    const Property QuestBook::getProperty(const Ogre::String&amp; key) const
+    const Property QuestBook::getProperty(const CeGuiString&amp; key) const
     {
         if (key == PROPERTY_QUESTS)
         {
@@ -216,7 +216,7 @@
         return parray;
     }
 
-    void QuestBook::setProperty(const Ogre::String&amp; key, const Property&amp; value)
+    void QuestBook::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         if (key == PROPERTY_QUESTS)
         {
@@ -278,12 +278,12 @@
         ///@todo implement
     }
 
-    PropertyRecord* QuestBook::getAllProperties() const
+    PropertyKeys QuestBook::getAllPropertyKeys() const
     {
-        PropertyRecord* props = new PropertyRecord();
-        props-&gt;setProperty(PROPERTY_QUESTS, getProperty(PROPERTY_QUESTS));
-        props-&gt;setProperty(PROPERTY_JOURNAL, getProperty(PROPERTY_JOURNAL));
-        return props;
+        PropertyKeys keys;
+        keys.insert(PROPERTY_QUESTS);
+        keys.insert(PROPERTY_JOURNAL);
+        return keys;
     }
 
     QuestVector QuestBook::getAllQuests() const

Modified: rl/trunk/engine/rules/src/Weapon.cpp
===================================================================
--- rl/trunk/engine/rules/src/Weapon.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/rules/src/Weapon.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -172,7 +172,7 @@
 		return mKampftechnik;
 	}
 
-    void Weapon::setProperty(const Ogre::String &amp;key, const rl::Property &amp;value)
+    void Weapon::setProperty(const CeGuiString&amp; key, const Property&amp; value)
     {
         if (key == Weapon::PROPERTY_TP)
         {
@@ -228,7 +228,7 @@
         }
     }
 
-    const Property Weapon::getProperty(const Ogre::String &amp;key) const
+    const Property Weapon::getProperty(const CeGuiString&amp; key) const
     {
         if (key == Weapon::PROPERTY_TP)
         {
@@ -281,17 +281,16 @@
         }
     }
 
-    PropertyRecord* Weapon::getAllProperties() const
+    PropertyKeys Weapon::getAllPropertyKeys() const
     {
-        PropertyRecord* ps = Item::getAllProperties();
-        ps-&gt;setProperty(Weapon::PROPERTY_TP, Property(mTp));
-        ps-&gt;setProperty(Weapon::PROPERTY_TP_KK, Property(mTpKk));
-        ps-&gt;setProperty(Weapon::PROPERTY_TP_BF, Property(mBf));
-        ps-&gt;setProperty(Weapon::PROPERTY_TP_INI, Property(mIni));
-        ps-&gt;setProperty(Weapon::PROPERTY_TP_WM, Property(mWm));
-        ps-&gt;setProperty(Weapon::PROPERTY_TP_DK, getProperty(Weapon::PROPERTY_TP_DK));
-        ps-&gt;setProperty(Weapon::PROPERTY_TP_KAMPFTECHNIK, Property(mKampftechnik));
-
-        return ps;
+        PropertyKeys keys(Item::getAllPropertyKeys());
+        keys.insert(Weapon::PROPERTY_TP);
+        keys.insert(Weapon::PROPERTY_TP_KK);
+        keys.insert(Weapon::PROPERTY_TP_BF);
+        keys.insert(Weapon::PROPERTY_TP_INI);
+        keys.insert(Weapon::PROPERTY_TP_WM);
+        keys.insert(Weapon::PROPERTY_TP_DK);
+        keys.insert(Weapon::PROPERTY_TP_KAMPFTECHNIK);
+        return keys;
     }
 }

Modified: rl/trunk/engine/script/include/stdinc.h
===================================================================
--- rl/trunk/engine/script/include/stdinc.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/script/include/stdinc.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -52,7 +52,7 @@
 
 #include &lt;OgreNewt.h&gt;
 
-#include &lt;CEGUIString.h&gt;
+#include &lt;CeGuiString.h&gt;
 #include &lt;CEGUILogger.h&gt;
 
 #include &lt;boost/filesystem/operations.hpp&gt;

Modified: rl/trunk/engine/script/src/ScriptSubsystem.cpp
===================================================================
--- rl/trunk/engine/script/src/ScriptSubsystem.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/script/src/ScriptSubsystem.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -36,12 +36,12 @@
         delete mScriptObjectMarker;
     }
 
-    void ScriptSubsystem::log(const rl::CeGuiString &amp;message)
+    void ScriptSubsystem::log(const CeGuiString &amp;message)
     {
         LOG_MESSAGE(Logger::SCRIPT, message);
     }
 
-    void ScriptSubsystem::logError(const rl::CeGuiString &amp;message)
+    void ScriptSubsystem::logError(const CeGuiString &amp;message)
     {
         LOG_ERROR(Logger::SCRIPT, message);
     }

Modified: rl/trunk/engine/script/swig/RlCore.swig
===================================================================
--- rl/trunk/engine/script/swig/RlCore.swig	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/script/swig/RlCore.swig	2008-03-06 17:03:27 UTC (rev 4190)
@@ -980,9 +980,9 @@
 	virtual bool deactivate() = 0;
 	virtual bool deleteIfZoneDestroyed() const;
 	const Ogre::String&amp; getName() const;
-    virtual const rl::Property getProperty(const Ogre::String&amp; key) const;
+    virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
     virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value);
-    virtual rl::PropertyRecord* getAllProperties() const;
+    virtual rl::PropertyKeys getAllPropertyKeys() const;
 };
 
 class SoundFadeJob : public rl::Job

Modified: rl/trunk/engine/script/swig/RlRules.swig
===================================================================
--- rl/trunk/engine/script/swig/RlRules.swig	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/script/swig/RlRules.swig	2008-03-06 17:03:27 UTC (rev 4190)
@@ -153,9 +153,9 @@
     class GlobalProperties 
     {
     public:
-        virtual const rl::Property getProperty(const Ogre::String&amp; key) const;
+        virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
         virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value);
-        virtual rl::PropertyRecord* getAllProperties() const;
+        virtual rl::PropertyKeys getAllPropertyKeys() const;
         bool hasProperty(const Ogre::String&amp; key) const;
         
         static rl::GlobalProperties&amp; getSingleton();
@@ -352,9 +352,9 @@
     {
     public:
         PropertyRecord();
-        virtual const rl::Property getProperty(const Ogre::String&amp; key) const;
+        virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
         virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value);
-        virtual rl::PropertyRecord* getAllProperties() const;
+        virtual rl::PropertyKeys getAllPropertyKeys() const;
     };
     
     %constant unsigned long QUERYFLAG_GAMEOBJECT = rl::QUERYFLAG_GAMEOBJECT;
@@ -420,9 +420,9 @@
         void addEffectWithCheckDate(rl::Effect* effect, RL_LONGLONG date);
         void removeEffect(rl::Effect* effect);
         
-        virtual const rl::Property getProperty(const Ogre::String&amp; key) const;
+        virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
         virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value);
-        virtual rl::PropertyRecord* getAllProperties() const;
+        virtual rl::PropertyKeys getAllPropertyKeys() const;
         
         virtual void placeIntoScene();
         void removeFromScene();
@@ -486,9 +486,9 @@
         void setOwner(rl::GameObject* go);
         rl::GameObject* getOwner() const;
 
-        virtual const rl::Property getProperty(const Ogre::String&amp; key) const;
+        virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
         virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value);
-        virtual rl::PropertyRecord* getAllProperties() const;
+        virtual rl::PropertyKeys getAllPropertyKeys() const;
         virtual bool isContainer();
         
         virtual void onStateChange(GameObjectState oldState, GameObjectState newState);
@@ -518,9 +518,9 @@
         void setKampftechnik(const rl::CeGuiString newKampftechnik);
         const rl::CeGuiString getKampftechnik() const;
 
-        virtual const rl::Property getProperty(const Ogre::String&amp; key) const;
+        virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
         virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value);
-        virtual rl::PropertyRecord* getAllProperties() const;
+        virtual rl::PropertyKeys getAllPropertyKeys() const;
         
         virtual void onStateChange(GameObjectState oldState, GameObjectState newState);
     };
@@ -536,9 +536,9 @@
         Armor(unsigned int id);
         virtual ~Armor();
 
-        virtual const rl::Property getProperty(const Ogre::String&amp; key) const;
+        virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
         virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value);
-        virtual rl::PropertyRecord* getAllProperties() const;
+        virtual rl::PropertyKeys getAllPropertyKeys() const;
         
         virtual void onStateChange(GameObjectState oldState, GameObjectState newState);
     };
@@ -560,9 +560,9 @@
         int getItemCount() const;
         rl::Item* getItemAt(unsigned int x, unsigned int y);
 
-        virtual const rl::Property getProperty(const Ogre::String&amp; key) const;
+        virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
         virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value);
-        virtual rl::PropertyRecord* getAllProperties() const;
+        virtual rl::PropertyKeys getAllPropertyKeys() const;
         
         virtual void onStateChange(GameObjectState oldState, GameObjectState newState);
     };
@@ -637,9 +637,9 @@
         virtual Status getStatus();
         virtual int getMod(rl::CeGuiString target, ModType type, ModTag tag);
 
-        virtual const rl::Property getProperty(const Ogre::String&amp; key) const = 0;
+        virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const = 0;
         virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value) = 0;
-        virtual rl::PropertyRecord* getAllProperties() const = 0;
+        virtual rl::PropertyKeys getAllPropertyKeys() const = 0;
     };
 
     class EffectFactory
@@ -757,7 +757,7 @@
         static const int AUDAMAGE_CHOKE = 4;
         static const int AUDAMAGE_DROWN = 8;
 
-        virtual const rl::Property getProperty(const Ogre::String&amp; key) const;
+        virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
         virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value);
 
         void setAlignment(Alignment);
@@ -779,9 +779,9 @@
         rl::CeGuiString getProfession();
         void setProfession(rl::CeGuiString profession);
 
-        virtual const rl::Property getProperty(const Ogre::String&amp; key) const;
+        virtual const rl::Property getProperty(const rl::CeGuiString&amp; key) const;
         virtual void setProperty(const Ogre::String&amp; key, const rl::Property&amp; value);
-        virtual rl::PropertyRecord* getAllProperties() const;
+        virtual rl::PropertyKeys getAllPropertyKeys() const;
         
         virtual void onStateChange(GameObjectState oldState, GameObjectState newState);
     };

Modified: rl/trunk/engine/script/swig/TypeRlCeGuiString.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeRlCeGuiString.swig	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/script/swig/TypeRlCeGuiString.swig	2008-03-06 17:03:27 UTC (rev 4190)
@@ -15,7 +15,7 @@
  */
 
 /* Wrapping rl::CeGuiStrings to ruby and back 
- for CeGuiString
+ for rl::CeGuiString
 */
 %typemap(typecheck) rl::CeGuiString, const rl::CeGuiString, rl::CeGuiString*, rl::CeGuiString&amp;, const rl::CeGuiString*, const rl::CeGuiString&amp; = char *;
 

Modified: rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig	2008-03-06 17:03:27 UTC (rev 4190)
@@ -20,7 +20,7 @@
 
 %typemap(directorin) rl::CeGuiStringVector &amp;, const rl::CeGuiStringVector &amp; {
   VALUE arr = rb_ary_new2($1-&gt;size()); 
-  CeGuiStringVector::iterator i = $1-&gt;begin(), iend = $1-&gt;end();
+  rl::CeGuiStringVector::iterator i = $1-&gt;begin(), iend = $1-&gt;end();
   for ( ; i!=iend; i++ )
     rb_ary_push(arr, rb_str_new2(&amp;(*i)));
   $result = arr;
@@ -28,7 +28,7 @@
 
 %typemap(directorin) rl::CeGuiStringVector, const rl::CeGuiStringVector {
   VALUE arr = rb_ary_new2($1.size()); 
-  CeGuiStringVector::iterator i = $1.begin(), iend = $1.end();
+  rl::CeGuiStringVector::iterator i = $1.begin(), iend = $1.end();
   for ( ; i!=iend; i++ )
     rb_ary_push(arr, rb_str_new2(*i));
   $result = arr;

Modified: rl/trunk/engine/ui/include/PropertiesWindow.h
===================================================================
--- rl/trunk/engine/ui/include/PropertiesWindow.h	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/ui/include/PropertiesWindow.h	2008-03-06 17:03:27 UTC (rev 4190)
@@ -81,7 +81,7 @@
          */
         void addPropertyInt(const Property&amp; prop, 
             CEGUI::MultiColumnList* table,
-            const Ogre::String&amp; key = &quot;&quot;);
+            const CeGuiString&amp; key = &quot;&quot;);
 
         /**
          * Adds the IntPair values to the property table.
@@ -90,7 +90,7 @@
          */
         void addPropertyIntPair(const Property&amp; prop, 
             CEGUI::MultiColumnList* table,
-            const Ogre::String&amp; key = &quot;&quot;);
+            const CeGuiString&amp; key = &quot;&quot;);
 
         /**
          * Adds the IntTriple values to the property table.
@@ -99,7 +99,7 @@
          */
         void addPropertyIntTriple(const Property&amp; prop, 
             CEGUI::MultiColumnList* table,
-            const Ogre::String&amp; key = &quot;&quot;);
+            const CeGuiString&amp; key = &quot;&quot;);
 
         /**
          * Adds a String value to the property table.
@@ -108,7 +108,7 @@
          */
         void addPropertyString(const Property&amp; prop, 
             CEGUI::MultiColumnList* table,
-            const Ogre::String&amp; key = &quot;&quot;);
+            const CeGuiString&amp; key = &quot;&quot;);
 
         /**
          * Adds a Bool value to the property table.
@@ -117,7 +117,7 @@
          */
         void addPropertyBool(const Property&amp; prop, 
             CEGUI::MultiColumnList* table,
-            const Ogre::String&amp; key = &quot;&quot;);
+            const CeGuiString&amp; key = &quot;&quot;);
 
         /**
          * Adds a Real value to the property table.
@@ -126,7 +126,7 @@
          */
         void addPropertyReal(const Property&amp; prop, 
             CEGUI::MultiColumnList* table,
-            const Ogre::String&amp; key = &quot;&quot;);
+            const CeGuiString&amp; key = &quot;&quot;);
 
         /**
          * Adds the Vector3 values to the property table.
@@ -135,7 +135,7 @@
          */
         void addPropertyArray3(const Property&amp; prop, 
             CEGUI::MultiColumnList* table,
-            const Ogre::String&amp; key = &quot;&quot;);
+            const CeGuiString&amp; key = &quot;&quot;);
 
         /**
          * Adds the Quaternion values to the property table.
@@ -144,7 +144,7 @@
          */
         void addPropertyQuaternion(const Property&amp; prop, 
             CEGUI::MultiColumnList* table,
-            const Ogre::String&amp; key = &quot;&quot;);
+            const CeGuiString&amp; key = &quot;&quot;);
 
         /**
          * Adds a new tab to the tabpane and lists
@@ -153,7 +153,7 @@
          * @param key The property to add.
          */
         void addPropertyArray(const Property&amp; prop,
-            const Ogre::String&amp; key = &quot;&quot;);
+            const CeGuiString&amp; key = &quot;&quot;);
 
         
         CEGUI::TabControl *mTabPane;        //!&lt; TabControl for the property tabs

Modified: rl/trunk/engine/ui/src/MainMenuLoadWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/MainMenuLoadWindow.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/ui/src/MainMenuLoadWindow.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -24,12 +24,13 @@
 #include &lt;boost/bind.hpp&gt;
 #include &lt;CEGUIWindowManager.h&gt;
 #include &lt;elements/CEGUIListboxTextItem.h&gt;
-#include &lt;Exception.h&gt;
-#include &lt;GameObjectManager.h&gt;
-#include &lt;GameObject.h&gt;
-#include &lt;Actor.h&gt;
 
 #include &quot;MainMenuLoadWindow.h&quot;
+
+#include &quot;Exception.h&quot;
+#include &quot;GameObjectManager.h&quot;
+#include &quot;GameObject.h&quot;
+#include &quot;Actor.h&quot;
 #include &quot;MessageWindow.h&quot;
 #include &quot;WindowFactory.h&quot;
 #include &quot;ConfigurationManager.h&quot;

Modified: rl/trunk/engine/ui/src/PropertiesWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/PropertiesWindow.cpp	2008-03-06 16:48:16 UTC (rev 4189)
+++ rl/trunk/engine/ui/src/PropertiesWindow.cpp	2008-03-06 17:03:27 UTC (rev 4190)
@@ -82,7 +82,7 @@
         for (PropertyRecord::PropertyRecordMap::const_iterator propIter = props-&gt;begin();
             propIter != props-&gt;end(); propIter++ )
         {
-            Ogre::String key = propIter-&gt;first;
+            CeGuiString key = propIter-&gt;first;
 
             if (key == &quot;description&quot; || key == &quot;name&quot; )
                 continue;
@@ -183,7 +183,7 @@
     //------------------------------------------------------- addPropertyInt
 
     void PropertiesWindow::addPropertyInt(const Property&amp; prop,
-        CEGUI::MultiColumnList* table, const Ogre::String&amp; key)
+        CEGUI::MultiColumnList* table, const CeGuiString&amp; key)
     {
         // Check column count
         // if count = 3 | MainTable
@@ -215,7 +215,7 @@
     //------------------------------------------------------- addPropertyIntPair
 
     void PropertiesWindow::addPropertyIntPair(const Property&amp; prop,
-        CEGUI::MultiColumnList* table, const Ogre::String&amp; key)
+        CEGUI::MultiColumnList* table, const CeGuiString&amp; key)
     {
         // Check column count
         // if count = 3 | MainTable
@@ -254,7 +254,7 @@
     //------------------------------------------------------- addPropertyIntTriple
 
     void PropertiesWindow::addPropertyIntTriple(const Property&amp; prop,
-        CEGUI::MultiColumnList* table, const Ogre::String&amp; key)
+        CEGUI::MultiColumnList* table, const CeGuiString&amp; key)
     {
         // Check column count
         // if count = 3 | MainTable
@@ -295,7 +295,7 @@
     //------------------------------------------------------- addPropertyString
 
     void PropertiesWindow::addPropertyString(const Property&amp; prop,
-        CEGUI::MultiColumnList* table, const Ogre::String&amp; key)
+        CEGUI::MultiColumnList* table, const CeGuiString&amp; key)
     {
         // Check column count
         // if count = 3 | MainTable
@@ -327,7 +327,7 @@
     //------------------------------------------------------- addPropertyBool
 
     void PropertiesWindow::addPropertyBool(const Property&amp; prop,
-        CEGUI::MultiColumnList* table, const Ogre::String&amp; key)
+        CEGUI::MultiColumnList* table, const CeGuiString&amp; key)
     {
         // Check column count
         // if count = 3 | MainTable
@@ -359,7 +359,7 @@
     //------------------------------------------------------- addPropertyReal
 
     void PropertiesWindow::addPropertyReal(const Property&amp; prop,
-        CEGUI::MultiColumnList* table, const Ogre::String&amp; key)
+        CEGUI::MultiColumnList* table, const CeGuiString&amp; key)
     {
        // Check column count
         // if count = 3 | MainTable
@@ -394,7 +394,7 @@
     //------------------------------------------------------- addPropertyArray3
 
     void PropertiesWindow::addPropertyArray3(const Property&amp; prop,
-        CEGUI::MultiColumnList* table, const Ogre::String&amp; key)
+        CEGUI::MultiColumnList* table, const CeGuiString&amp; key)
     {
         // Check column count
         // if count = 3 | MainTable
@@ -440,7 +440,7 @@
     //------------------------------------------------------- addPropertyQuaternion
 
     void PropertiesWindow::addPropertyQuaternion(const Property&amp; prop,
-        CEGUI::MultiColumnList* table, const Ogre::String&amp; key)
+        CEGUI::MultiColumnList* table, const CeGuiString&amp; key)
     {
         // Check column count
         // if count = 3 | MainTable
@@ -508,7 +508,7 @@
 
     //------------------------------------------------------- addPropertyArray
 
-    void PropertiesWindow::addPropertyArray(const Property&amp; prop, const Ogre::String&amp; key)
+    void PropertiesWindow::addPropertyArray(const Property&amp; prop, const CeGuiString&amp; key)
     {
         // Create the new MultiColumnList with two columns
         // Type and Value and set tab text to key


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001260.html">[Dsa-hl-svn] r4189 - rl/trunk/engine/ui/src
</A></li>
	<LI>Next message: <A HREF="001262.html">[Dsa-hl-svn] r4191 - in modules: common/materials	common/materials/alpha kanalisation/materials	kanalisation/materials/textures
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1261">[ date ]</a>
              <a href="thread.html#1261">[ thread ]</a>
              <a href="subject.html#1261">[ subject ]</a>
              <a href="author.html#1261">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
