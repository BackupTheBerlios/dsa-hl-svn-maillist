<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r4963 - in rl/trunk/engine: ai ai/src common	common/src core core/include core/src rules script	script/include script/src script/swig ui ui/include ui/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4963%20-%20in%20rl/trunk/engine%3A%20ai%20ai/src%20common%0A%09common/src%20core%20core/include%20core/src%20rules%20script%0A%09script/include%20script/src%20script/swig%20ui%20ui/include%20ui/src&In-Reply-To=%3C200911072030.nA7KUPlb007071%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002018.html">
   <LINK REL="Next"  HREF="002020.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r4963 - in rl/trunk/engine: ai ai/src common	common/src core core/include core/src rules script	script/include script/src script/swig ui ui/include ui/src</H1>
    <B>blakharaz at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4963%20-%20in%20rl/trunk/engine%3A%20ai%20ai/src%20common%0A%09common/src%20core%20core/include%20core/src%20rules%20script%0A%09script/include%20script/src%20script/swig%20ui%20ui/include%20ui/src&In-Reply-To=%3C200911072030.nA7KUPlb007071%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r4963 - in rl/trunk/engine: ai ai/src common	common/src core core/include core/src rules script	script/include script/src script/swig ui ui/include ui/src">blakharaz at mail.berlios.de
       </A><BR>
    <I>Sat Nov  7 21:30:25 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002018.html">[Dsa-hl-svn] r4962 - in rl/trunk/engine/core: include src
</A></li>
        <LI>Next message: <A HREF="002020.html">[Dsa-hl-svn] r4964 - rl/trunk/engine/core/lib/Debug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2019">[ date ]</a>
              <a href="thread.html#2019">[ thread ]</a>
              <a href="subject.html#2019">[ subject ]</a>
              <a href="author.html#2019">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: blakharaz
Date: 2009-11-07 21:30:04 +0100 (Sat, 07 Nov 2009)
New Revision: 4963

Modified:
   rl/trunk/engine/ai/RlAI2008.vcproj
   rl/trunk/engine/ai/src/DialogLoaderImpl.cpp
   rl/trunk/engine/ai/src/DialogManager.cpp
   rl/trunk/engine/common/RlCommon2008.vcproj
   rl/trunk/engine/common/src/XmlProcessor.cpp
   rl/trunk/engine/core/RlCore2008.vcproj
   rl/trunk/engine/core/include/stdinc.h
   rl/trunk/engine/core/src/BoxPrimitive.cpp
   rl/trunk/engine/core/src/ConfigurationManager.cpp
   rl/trunk/engine/core/src/CoreSubsystem.cpp
   rl/trunk/engine/core/src/PhysicsManager.cpp
   rl/trunk/engine/rules/RlRules2008.vcproj
   rl/trunk/engine/script/RlScript2008.vcproj
   rl/trunk/engine/script/include/Scene.h
   rl/trunk/engine/script/src/MapLoader.cpp
   rl/trunk/engine/script/swig/RlCore.swig
   rl/trunk/engine/script/swig/RlExports.i
   rl/trunk/engine/ui/RlUI2008.vcproj
   rl/trunk/engine/ui/include/UiSubsystem.h
   rl/trunk/engine/ui/src/AbstractWindow.cpp
   rl/trunk/engine/ui/src/ActionChoiceWindow.cpp
   rl/trunk/engine/ui/src/CharacterSelectionWindow.cpp
   rl/trunk/engine/ui/src/Console.cpp
   rl/trunk/engine/ui/src/ContainerContentWindow.cpp
   rl/trunk/engine/ui/src/CutsceneControlState.cpp
   rl/trunk/engine/ui/src/DebugWindow.cpp
   rl/trunk/engine/ui/src/DialogWindow.cpp
   rl/trunk/engine/ui/src/GameLoggerWindow.cpp
   rl/trunk/engine/ui/src/GameOverWindow.cpp
   rl/trunk/engine/ui/src/GameSettings.cpp
   rl/trunk/engine/ui/src/InGameMenuWindow.cpp
   rl/trunk/engine/ui/src/InventoryWindow.cpp
   rl/trunk/engine/ui/src/UiSubsystem.cpp
   rl/trunk/engine/ui/src/WindowFactory.cpp
Log:
Adaptations for Ogre 1.7, CEGUI 0.7 and tinyxml on Windows (VS 2008)

Modified: rl/trunk/engine/ai/RlAI2008.vcproj
===================================================================
--- rl/trunk/engine/ai/RlAI2008.vcproj	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ai/RlAI2008.vcproj	2009-11-07 20:30:04 UTC (rev 4963)
@@ -74,10 +74,10 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;false&quot;
 				AdditionalOptions=&quot;/NODEFAULTLIB:MSVCRT&amp;#x0D;&amp;#x0A;&quot;
-				AdditionalDependencies=&quot;OgreMain_d.lib OgreNewt_d.lib CEGUIBase_d.lib opensteerd.lib RlCommon.lib RlCore.lib RlRules.lib Newton.lib xerces-c_2D.lib&quot;
+				AdditionalDependencies=&quot;OgreMain_d.lib OgreNewt_d.lib CEGUIBase_d.lib opensteerd.lib RlCommon.lib RlCore.lib RlRules.lib Newton.lib tinyxmld_STL.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlAI.dll&quot;
 				LinkIncremental=&quot;2&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib\;..\..\dependencies\ogrenewt\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\xerces\lib&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib\;..\..\dependencies\ogrenewt\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\xerces\lib&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				AssemblyDebug=&quot;1&quot;
 				ProgramDatabaseFile=&quot;$(OutDir)/RlAI.pdb&quot;
@@ -161,10 +161,10 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;OgreMain.lib OgreNewt.lib CEGUIBase.lib opensteer.lib RlCommon.lib RlCore.lib RlRules.lib Newton.lib xerces-c_2.lib&quot;
+				AdditionalDependencies=&quot;OgreMain.lib OgreNewt.lib CEGUIBase.lib opensteer.lib RlCommon.lib RlCore.lib RlRules.lib Newton.lib tinyxml_STL.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlAI.dll&quot;
 				LinkIncremental=&quot;1&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib\;..\..\dependencies\ogrenewt\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\xerces\lib&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib\;..\..\dependencies\ogrenewt\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\xerces\lib&quot;
 				GenerateDebugInformation=&quot;false&quot;
 				SubSystem=&quot;2&quot;
 				OptimizeReferences=&quot;2&quot;
@@ -246,10 +246,10 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;OgreMain.lib OgreNewt.lib CEGUIBase.lib opensteer.lib RlCommon.lib RlCore.lib RlRules.lib Newton.lib MadaBot.lib xerces-c_2.lib&quot;
+				AdditionalDependencies=&quot;OgreMain.lib OgreNewt.lib CEGUIBase.lib opensteer.lib RlCommon.lib RlCore.lib RlRules.lib Newton.lib MadaBot.lib tinyxml_STL.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlAI.dll&quot;
 				LinkIncremental=&quot;1&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib\;..\..\dependencies\ogrenewt\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\xerces\lib&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib\;..\..\dependencies\ogrenewt\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\xerces\lib&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				SubSystem=&quot;2&quot;
 				OptimizeReferences=&quot;2&quot;

Modified: rl/trunk/engine/ai/src/DialogLoaderImpl.cpp
===================================================================
--- rl/trunk/engine/ai/src/DialogLoaderImpl.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ai/src/DialogLoaderImpl.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -640,7 +640,7 @@
             }
 
 
-            for (list&lt;DialogLoaderImpl::DialogParticipant*&gt;::iterator it = mParticipantFilter.begin();
+            for (std::list&lt;DialogLoaderImpl::DialogParticipant*&gt;::iterator it = mParticipantFilter.begin();
                     it != mParticipantFilter.end(); ++it)
             {
                 if ((*it)-&gt;isMatching(curCr))

Modified: rl/trunk/engine/ai/src/DialogManager.cpp
===================================================================
--- rl/trunk/engine/ai/src/DialogManager.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ai/src/DialogManager.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -51,8 +51,8 @@
 			mDialogLoader);
 		delete mDialogLoader;
         SaveGameManager::getSingleton().unregisterSaveGameData(this);
-		map&lt;DialogConfiguration, Dialog*&gt;::iterator itr = mDialogStates.begin();
-		map&lt;DialogConfiguration, Dialog*&gt;::iterator end = mDialogStates.end();
+		std::map&lt;DialogConfiguration, Dialog*&gt;::iterator itr = mDialogStates.begin();
+		std::map&lt;DialogConfiguration, Dialog*&gt;::iterator end = mDialogStates.end();
 		for(; itr != end; ++itr)
 		{
 			delete itr-&gt;second;
@@ -66,7 +66,7 @@
         if (key == DialogManager::PROPERTY_DIALOGS)
         {
             PropertyArray vec;
-            for (map&lt;DialogConfiguration, Dialog*&gt;::const_iterator it
+            for (std::map&lt;DialogConfiguration, Dialog*&gt;::const_iterator it
                 = mDialogStates.begin(); it != mDialogStates.end(); ++it)
             {
                 PropertyMap curDialogProp;
@@ -152,7 +152,7 @@
             participants.push_back(*it);
         }
 
-        map&lt;DialogConfiguration, Dialog*&gt;::iterator it
+        std::map&lt;DialogConfiguration, Dialog*&gt;::iterator it
             = mDialogStates.find(DialogConfiguration(name, participants));
 
         Dialog* dialog;

Modified: rl/trunk/engine/common/RlCommon2008.vcproj
===================================================================
--- rl/trunk/engine/common/RlCommon2008.vcproj	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/common/RlCommon2008.vcproj	2009-11-07 20:30:04 UTC (rev 4963)
@@ -70,7 +70,7 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;OgreMain_d.lib xerces-c_2D.lib CEGUIBase_d.lib&quot;
+				AdditionalDependencies=&quot;OgreMain_d.lib tinyxmld_STL.lib CEGUIBase_d.lib&quot;
 				OutputFile=&quot;./lib/$(ConfigurationName)/RlCommon.dll&quot;
 				LinkIncremental=&quot;2&quot;
 				AdditionalLibraryDirectories=&quot;..\..\dependencies\ogrenew\lib;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\cegui_mk2\lib\$(PlatformName)\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib\;..\..\dependencies\boost\lib&quot;
@@ -157,7 +157,7 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;OgreMain.lib xerces-c_2.lib CEGUIBase.lib&quot;
+				AdditionalDependencies=&quot;OgreMain.lib tinyxml_STL.lib CEGUIBase.lib&quot;
 				OutputFile=&quot;./lib/$(ConfigurationName)/RlCommon.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				AdditionalLibraryDirectories=&quot;..\..\dependencies\ogrenew\lib;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\cegui_mk2\lib\$(PlatformName)\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib\;..\..\dependencies\boost\lib&quot;
@@ -242,7 +242,7 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;OgreMain.lib xerces-c_2.lib CEGUIBase.lib&quot;
+				AdditionalDependencies=&quot;OgreMain.lib tinyxml_STL.lib CEGUIBase.lib&quot;
 				OutputFile=&quot;./lib/$(ConfigurationName)/RlCommon.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				AdditionalLibraryDirectories=&quot;..\..\dependencies\ogrenew\lib;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\cegui_mk2\lib\$(PlatformName)\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib\;..\..\dependencies\boost\lib&quot;
@@ -321,10 +321,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\src\OgreXercesInput.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\src\Properties.cpp&quot;
 				&gt;
 			&lt;/File&gt;
@@ -369,10 +365,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\src\WriteableDataStreamFormatTarget.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\src\WriteableFileSystemArchiv.cpp&quot;
 				&gt;
 			&lt;/File&gt;
@@ -453,10 +445,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\include\OgreXercesInput.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\include\Properties.h&quot;
 				&gt;
 			&lt;/File&gt;
@@ -489,10 +477,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\include\WriteableDataStreamFormatTarget.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\include\WriteableFileSystemArchiv.h&quot;
 				&gt;
 			&lt;/File&gt;

Modified: rl/trunk/engine/common/src/XmlProcessor.cpp
===================================================================
--- rl/trunk/engine/common/src/XmlProcessor.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/common/src/XmlProcessor.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -108,15 +108,16 @@
 
 XmlElementList XmlProcessor::getElementsByTagName(const TiXmlElement* parent, const char* const name) const
 {
+	XmlElementFinder finder(name);
+	parent-&gt;Accept(&amp;finder);
+	return finder.getResult();
 }
 
-
 XmlElementList XmlProcessor::getElementsByTagName(const TiXmlDocument* parent, const char* const name) const
 {
 	return getElementsByTagName(parent-&gt;RootElement(), name);
 }
 
-
 void XmlProcessor::setValueAsString(TiXmlElement *element, const CeGuiString &amp;value) const
 {
     RlAssert(element != NULL, &quot;XmlProcessor::setValueAsString: Element must not be NULL&quot;);
@@ -152,7 +153,7 @@
 bool XmlProcessor::hasAttribute(const TiXmlElement* element,const char* const name) const
 {
     RlAssert(element != NULL, &quot;XmlProcessor::hasAttribute: Element must not be NULL&quot;);
-    return element-&gt;Attribute(name);
+    return element-&gt;Attribute(name) != NULL;
 }
 
 bool XmlProcessor::hasNodeName(const TiXmlNode* node, const char* const name) const

Modified: rl/trunk/engine/core/RlCore2008.vcproj
===================================================================
--- rl/trunk/engine/core/RlCore2008.vcproj	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/core/RlCore2008.vcproj	2009-11-07 20:30:04 UTC (rev 4963)
@@ -86,12 +86,12 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt_d.lib OgreMain_d.lib xerces-c_2D.lib CEGUIBase_d.lib Newton.lib meshmagick_d.lib fmodex_vc.lib&quot;
+				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt_d.lib OgreMain_d.lib tinyxmld_STL.lib CEGUIBase_d.lib Newton.lib meshmagick_d.lib fmodex_vc.lib&quot;
 				ShowProgress=&quot;0&quot;
 				OutputFile=&quot;./lib/$(ConfigurationName)/RlCore.dll&quot;
 				LinkIncremental=&quot;2&quot;
 				SuppressStartupBanner=&quot;true&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\meshmagick\lib;..\..\dependencies\FMOD4\api\lib&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\meshmagick\lib;..\..\dependencies\FMOD4\api\lib&quot;
 				IgnoreDefaultLibraryNames=&quot;&quot;
 				TypeLibraryFile=&quot;$(OutDir)\RlCore.lib&quot;
 				GenerateDebugInformation=&quot;true&quot;
@@ -198,11 +198,11 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt.lib xerces-c_2.lib CEGUIBase.lib OgreMain.lib Newton.lib meshmagick.lib fmodex_vc.lib&quot;
+				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt.lib tinyxml_STL.lib CEGUIBase.lib OgreMain.lib Newton.lib meshmagick.lib fmodex_vc.lib&quot;
 				OutputFile=&quot;./lib/$(ConfigurationName)/RlCore.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				SuppressStartupBanner=&quot;true&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\meshmagick\lib;..\..\dependencies\FMOD4\api\lib&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\meshmagick\lib;..\..\dependencies\FMOD4\api\lib&quot;
 				TypeLibraryFile=&quot;$(OutDir)\RlCore.lib&quot;
 				ProgramDatabaseFile=&quot;&quot;
 				SubSystem=&quot;2&quot;
@@ -304,11 +304,11 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt.lib xerces-c_2.lib CEGUIBase.lib OgreMain.lib Newton.lib meshmagick.lib fmodex_vc.lib&quot;
+				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt.lib tinyxml_STL.lib CEGUIBase.lib OgreMain.lib Newton.lib meshmagick.lib fmodex_vc.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlCore.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				SuppressStartupBanner=&quot;true&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\meshmagick\lib;..\..\dependencies\FMOD4\api\lib&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\meshmagick\lib;..\..\dependencies\FMOD4\api\lib&quot;
 				TypeLibraryFile=&quot;$(OutDir)\RlCore.lib&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				ProgramDatabaseFile=&quot;$(TargetDir)$(TargetName).pdb&quot;

Modified: rl/trunk/engine/core/include/stdinc.h
===================================================================
--- rl/trunk/engine/core/include/stdinc.h	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/core/include/stdinc.h	2009-11-07 20:30:04 UTC (rev 4963)
@@ -58,7 +58,7 @@
 #include &lt;boost/filesystem/operations.hpp&gt;
 #include &lt;boost/filesystem/exception.hpp&gt;
 #include &lt;boost/any.hpp&gt;
-#include &lt;boost/smartptr.hpp&gt;
+#include &lt;boost/smart_ptr.hpp&gt;
 
 #if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
 #  include &lt;Windows.h&gt;

Modified: rl/trunk/engine/core/src/BoxPrimitive.cpp
===================================================================
--- rl/trunk/engine/core/src/BoxPrimitive.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/core/src/BoxPrimitive.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -52,7 +52,7 @@
     {
         ManualObject* manualObject = getManualObject();
         manualObject-&gt;clear();
-        vector&lt;Vector3&gt; corners;
+		std::vector&lt;Vector3&gt; corners;
         corners.reserve(8);
 
         Vector3 vmin = mSize.getMinimum();

Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -220,7 +220,7 @@
             ConfigFile* configfile = new ConfigFile();
 
             // Split the path at the ':' character
-            std::vector&lt;Ogre::String&gt; cfg_paths = Ogre::StringUtil::split(mRastullahCfgPath, &quot;:&quot;);
+            Ogre::StringVector cfg_paths = Ogre::StringUtil::split(mRastullahCfgPath, &quot;:&quot;);
 
             for (unsigned int i = 0; i &lt; cfg_paths.size(); i++)
             {

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -194,10 +194,10 @@
         }
 
         // Find out, what Renderer plugins are available
-        RenderSystemList* rsl = mOgreRoot-&gt;getAvailableRenderers();
+        RenderSystemList rsl = mOgreRoot-&gt;getAvailableRenderers();
         RenderSystemList::iterator it;
 
-        for (it = rsl-&gt;begin(); it &lt; rsl-&gt;end(); it++)
+        for (it = rsl.begin(); it != rsl.end(); it++)
         {
             if ((*it)-&gt;getName() == ConfigurationManager::getSingleton().getStringSetting(
                 &quot;Video&quot;, &quot;Render System&quot;))

Modified: rl/trunk/engine/core/src/PhysicsManager.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicsManager.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/core/src/PhysicsManager.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -118,7 +118,7 @@
         clearLevelGeometry();
 
         // remove all physical things
-        for( vector&lt;PhysicalThing*&gt;::iterator it = mPhysicalThings.begin(); it != mPhysicalThings.end(); it++ )
+		for (std::vector&lt;PhysicalThing*&gt;::iterator it = mPhysicalThings.begin(); it != mPhysicalThings.end(); it++ )
         {
             delete (*it);
         }
@@ -269,10 +269,10 @@
 
     void PhysicsManager::removeAndDestroyPhysicalThing(PhysicalThing* thing)
     {
-        vector&lt;PhysicalThing*&gt;::iterator it = find(mPhysicalThings.begin(),
+        std::vector&lt;PhysicalThing*&gt;::iterator it = find(mPhysicalThings.begin(),
             mPhysicalThings.end(), thing);
 
-        if( it != mPhysicalThings.end() )
+        if (it != mPhysicalThings.end())
         {
             PhysicalThing* phys = *it;
             mPhysicalThings.erase(it);
@@ -388,7 +388,7 @@
 
 	void PhysicsManager::destroyPhysicsProxy(PhysicalThing* pt)
 	{
-        vector&lt;PhysicalThing*&gt;::iterator it = find(mPhysicalThings.begin(),
+        std::vector&lt;PhysicalThing*&gt;::iterator it = find(mPhysicalThings.begin(),
             mPhysicalThings.end(), pt);
 		if (it != mPhysicalThings.end())
 		{

Modified: rl/trunk/engine/rules/RlRules2008.vcproj
===================================================================
--- rl/trunk/engine/rules/RlRules2008.vcproj	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/rules/RlRules2008.vcproj	2009-11-07 20:30:04 UTC (rev 4963)
@@ -70,10 +70,10 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;msvcrt-ruby18.lib xerces-c_2D.lib OgreMain_d.lib CEGUIBase_d.lib RlCore.lib OgreNewt_d.lib Newton.lib&quot;
+				AdditionalDependencies=&quot;msvcrt-ruby18.lib tinyxmld_STL.lib OgreMain_d.lib CEGUIBase_d.lib RlCore.lib OgreNewt_d.lib Newton.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlRules.dll&quot;
 				LinkIncremental=&quot;2&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				AssemblyDebug=&quot;1&quot;
 				ProgramDatabaseFile=&quot;$(OutDir)/RlRules.pdb&quot;
@@ -157,10 +157,10 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;msvcrt-ruby18.lib OgreMain.lib xerces-c_2.lib CEGUIBase.lib RlCore.lib OgreNewt.lib Newton.lib&quot;
+				AdditionalDependencies=&quot;msvcrt-ruby18.lib OgreMain.lib tinyxml_STL.lib CEGUIBase.lib RlCore.lib OgreNewt.lib Newton.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlRules.dll&quot;
 				LinkIncremental=&quot;1&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
 				GenerateDebugInformation=&quot;false&quot;
 				SubSystem=&quot;2&quot;
 				OptimizeReferences=&quot;2&quot;
@@ -242,10 +242,10 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;msvcrt-ruby18.lib OgreMain.lib xerces-c_2.lib CEGUIBase.lib RlCore.lib OgreNewt.lib Newton.lib&quot;
+				AdditionalDependencies=&quot;msvcrt-ruby18.lib OgreMain.lib tinyxml_STL.lib CEGUIBase.lib RlCore.lib OgreNewt.lib Newton.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlRules.dll&quot;
 				LinkIncremental=&quot;1&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				SubSystem=&quot;2&quot;
 				OptimizeReferences=&quot;2&quot;

Modified: rl/trunk/engine/script/RlScript2008.vcproj
===================================================================
--- rl/trunk/engine/script/RlScript2008.vcproj	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/script/RlScript2008.vcproj	2009-11-07 20:30:04 UTC (rev 4963)
@@ -67,10 +67,10 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;RlCore.lib RlAi.lib RlUi.lib RlRules.lib OgreMain_d.lib msvcrt-ruby18.lib CEGUIBase_d.lib xerces-c_2D.lib OgreNewt_d.lib Newton.lib&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlAi.lib RlUi.lib RlRules.lib OgreMain_d.lib msvcrt-ruby18.lib CEGUIBase_d.lib tinyxmld_STL.lib OgreNewt_d.lib Newton.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlScript.dll&quot;
 				LinkIncremental=&quot;2&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				AssemblyDebug=&quot;1&quot;
 				ProgramDatabaseFile=&quot;$(OutDir)/RlScript.pdb&quot;
@@ -152,10 +152,10 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;RlCore.lib RlAi.lib RlUi.lib RlRules.lib OgreMain.lib msvcrt-ruby18.lib CEGUIBase.lib xerces-c_2.lib OgreNewt.lib Newton.lib&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlAi.lib RlUi.lib RlRules.lib OgreMain.lib msvcrt-ruby18.lib CEGUIBase.lib tinyxml_STL.lib OgreNewt.lib Newton.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlScript.dll&quot;
 				LinkIncremental=&quot;1&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
 				GenerateDebugInformation=&quot;false&quot;
 				SubSystem=&quot;2&quot;
 				OptimizeReferences=&quot;2&quot;
@@ -235,10 +235,10 @@
 			/&gt;
 			&lt;Tool
 				Name=&quot;VCLinkerTool&quot;
-				AdditionalDependencies=&quot;RlCore.lib RlAi.lib RlUi.lib RlRules.lib OgreMain.lib msvcrt-ruby18.lib CEGUIBase.lib xerces-c_2.lib OgreNewt.lib Newton.lib&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlAi.lib RlUi.lib RlRules.lib OgreMain.lib msvcrt-ruby18.lib CEGUIBase.lib tinyxml_STL.lib OgreNewt.lib Newton.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlScript.dll&quot;
 				LinkIncremental=&quot;1&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				SubSystem=&quot;2&quot;
 				OptimizeReferences=&quot;2&quot;
@@ -526,7 +526,7 @@
 					&lt;Tool
 						Name=&quot;VCCustomBuildTool&quot;
 						Description=&quot;[SWIG] RubyWrapper erzeugen.&quot;
-						CommandLine=&quot;cd &quot;$(InputDir)&quot;&amp;#x0D;&amp;#x0A;&quot;$(ProjectDir)..\..\dependencies\swig\swig.exe&quot; -o &quot;$(InputDir)$(InputName)_wrap.cxx&quot; -c++ -ruby -minherit -v -Wall  &quot;$(InputPath)&quot;&amp;#x0D;&amp;#x0A;&quot;
+						CommandLine=&quot;cd &quot;$(InputDir)&quot;&amp;#x0D;&amp;#x0A;&quot;$(ProjectDir)..\..\..\dependencies\swig\swig.exe&quot; -o &quot;$(InputDir)$(InputName)_wrap.cxx&quot; -c++ -ruby -minherit -v -Wall  &quot;$(InputPath)&quot;&amp;#x0D;&amp;#x0A;&quot;
 						AdditionalDependencies=&quot;&quot;$(InputDir)TypeMaps.i&quot;;&quot;$(InputDir)RlCore.swig&quot;;&quot;$(InputDir)RlDialog.swig&quot;;&quot;$(InputDir)RlCommon.swig&quot;;&quot;$(InputDir)RlRules.swig&quot;;&quot;$(InputDir)RlScript.swig&quot;;&quot;$(InputDir)RlSound.swig&quot;;&quot;$(InputDir)RlUi.swig&quot;;&quot;$(InputDir)RlAi.swig&quot;&quot;
 						Outputs=&quot;&quot;$(InputDir)$(InputName)_wrap.cxx&quot;&quot;
 					/&gt;

Modified: rl/trunk/engine/script/include/Scene.h
===================================================================
--- rl/trunk/engine/script/include/Scene.h	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/script/include/Scene.h	2009-11-07 20:30:04 UTC (rev 4963)
@@ -43,7 +43,7 @@
 
     private:
         CeGuiString mName;
-        std::vector&lt;Ogre::String&gt; mMaps;
+        Ogre::StringVector mMaps;
     };
 
 }

Modified: rl/trunk/engine/script/src/MapLoader.cpp
===================================================================
--- rl/trunk/engine/script/src/MapLoader.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/script/src/MapLoader.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -64,7 +64,7 @@
 
     MapLoader::~MapLoader()
     {
-        for (list&lt;AbstractMapNodeProcessor*&gt;::const_iterator it = mNodeProcessors.begin();
+        for (std::list&lt;AbstractMapNodeProcessor*&gt;::const_iterator it = mNodeProcessors.begin();
             it != mNodeProcessors.end(); ++it)
         {
             delete *it;
@@ -270,7 +270,7 @@
             {
             	const TiXmlElement* curElem = cur-&gt;ToElement();
 
-                list&lt;AbstractMapNodeProcessor*&gt;::iterator it = mNodeProcessors.begin();
+                std::list&lt;AbstractMapNodeProcessor*&gt;::iterator it = mNodeProcessors.begin();
                 while (it != mNodeProcessors.end() &amp;&amp; !(*it)-&gt;processNode(curElem, loadGameObjects))
                 {
                     ++it;
@@ -297,7 +297,7 @@
     void MapLoader::setRootSceneNode(SceneNode* node)
     {
         mRootSceneNode = node;
-        for (list&lt;AbstractMapNodeProcessor*&gt;::const_iterator it = mNodeProcessors.begin();
+        for (std::list&lt;AbstractMapNodeProcessor*&gt;::const_iterator it = mNodeProcessors.begin();
             it != mNodeProcessors.end(); ++it)
         {
             (*it)-&gt;setRootSceneNode(node);

Modified: rl/trunk/engine/script/swig/RlCore.swig
===================================================================
--- rl/trunk/engine/script/swig/RlCore.swig	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/script/swig/RlCore.swig	2009-11-07 20:30:04 UTC (rev 4963)
@@ -571,7 +571,7 @@
     void setOrientation( const Ogre::Quaternion&amp; );
     
     rl::ActorControlledObject* getControlledObject();
-    Ogre::UserDefinedObject* getGameObject() const;
+    rl::ActorNotifiedObject* getGameObject() const;
     rl::PhysicalThing* getPhysicalThing() const;
 
     void setScale( Ogre::Real sx, Ogre::Real sy, Ogre::Real sz );

Modified: rl/trunk/engine/script/swig/RlExports.i
===================================================================
--- rl/trunk/engine/script/swig/RlExports.i	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/script/swig/RlExports.i	2009-11-07 20:30:04 UTC (rev 4963)
@@ -30,9 +30,6 @@
 #	endif
 #endif
 
-// Has to be included before Ogre, MemoryManager issues...
-#include &lt;xercesc/util/XMemory.hpp&gt;	
-
 // Exporting the function for getting ruby instances
 VALUE RL_RubyInstanceFor(void* ptr) 
 {

Modified: rl/trunk/engine/ui/RlUI2008.vcproj
===================================================================
--- rl/trunk/engine/ui/RlUI2008.vcproj	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/RlUI2008.vcproj	2009-11-07 20:30:04 UTC (rev 4963)
@@ -86,12 +86,12 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCore.lib RlRules.lib msvcrt-ruby18.lib OgreMain_d.lib OgreGuiRenderer_d.lib CEGUIBase_d.lib xerces-c_2D.lib OgreNewt_d.lib Newton.lib OIS_d.lib&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlRules.lib msvcrt-ruby18.lib OgreMain_d.lib CEGUIOgreRenderer_d.lib CEGUIBase_d.lib tinyxmld_STL.lib OgreNewt_d.lib Newton.lib OIS_d.lib&quot;
 				ShowProgress=&quot;0&quot;
 				OutputFile=&quot;$(OutDir)/RlUI.dll&quot;
 				LinkIncremental=&quot;2&quot;
 				SuppressStartupBanner=&quot;true&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\uicomponents\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\ois\dll;&quot;..\..\dependencies\ogrenew\lib\$(ConfigurationName)&quot;&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\uicomponents\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\ois\dll;&quot;..\..\dependencies\ogrenew\lib\$(ConfigurationName)&quot;&quot;
 				IgnoreDefaultLibraryNames=&quot;&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				AssemblyDebug=&quot;1&quot;
@@ -195,11 +195,11 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCore.lib RlRules.lib msvcrt-ruby18.lib OgreMain.lib OgreGuiRenderer.lib CEGUIBase.lib xerces-c_2.lib OgreNewt.lib Newton.lib OIS.lib&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlRules.lib msvcrt-ruby18.lib OgreMain.lib CEGUIOgreRenderer.lib CEGUIBase.lib tinyxml_STL.lib OgreNewt.lib Newton.lib OIS.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlUI.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				SuppressStartupBanner=&quot;true&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\uicomponents\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\ois\dll;&quot;..\..\dependencies\ogrenew\lib\$(ConfigurationName)&quot;&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\uicomponents\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\ois\dll;&quot;..\..\dependencies\ogrenew\lib\$(ConfigurationName)&quot;&quot;
 				ProgramDatabaseFile=&quot;&quot;
 				SubSystem=&quot;2&quot;
 				RandomizedBaseAddress=&quot;1&quot;
@@ -298,11 +298,11 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCore.lib RlRules.lib msvcrt-ruby18.lib OgreMain.lib OgreGuiRenderer.lib CEGUIBase.lib xerces-c_2.lib OgreNewt.lib Newton.lib OIS.lib&quot;
+				AdditionalDependencies=&quot;RlCore.lib RlRules.lib msvcrt-ruby18.lib OgreMain.lib CEGUIOgreRenderer.lib CEGUIBase.lib tinyxml_STL.lib OgreNewt.lib Newton.lib OIS.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlUI.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				SuppressStartupBanner=&quot;true&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\uicomponents\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\ois\dll;&quot;..\..\dependencies\ogrenew\lib\$(ConfigurationName)&quot;&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\uicomponents\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib;..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\..\dependencies\NewtonSDK\sdk\x32\dll_vs9;..\..\dependencies\ois\dll;&quot;..\..\dependencies\ogrenew\lib\$(ConfigurationName)&quot;&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				ProgramDatabaseFile=&quot;$(TargetDir)$(TargetName).pdb&quot;
 				SubSystem=&quot;2&quot;
@@ -522,10 +522,6 @@
 					&gt;
 				&lt;/File&gt;
 				&lt;File
-					RelativePath=&quot;.\include\ListboxWrappedTextItem.h&quot;
-					&gt;
-				&lt;/File&gt;
-				&lt;File
 					RelativePath=&quot;.\include\LogWindow.h&quot;
 					&gt;
 				&lt;/File&gt;
@@ -775,10 +771,6 @@
 					&gt;
 				&lt;/File&gt;
 				&lt;File
-					RelativePath=&quot;.\src\ListboxWrappedTextItem.cpp&quot;
-					&gt;
-				&lt;/File&gt;
-				&lt;File
 					RelativePath=&quot;.\src\LogWindow.cpp&quot;
 					&gt;
 				&lt;/File&gt;

Modified: rl/trunk/engine/ui/include/UiSubsystem.h
===================================================================
--- rl/trunk/engine/ui/include/UiSubsystem.h	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/include/UiSubsystem.h	2009-11-07 20:30:04 UTC (rev 4963)
@@ -27,8 +27,7 @@
 // Gar nicht sch&#203;&#134;n, aber ansonsten gibt es unn&#203;&#134;tige Abh&#226;&#128;&#176;ngigkeiten,
 // wenn man die Header hier inkludiert.
 namespace CEGUI {
-    class OgreCEGUIRenderer;
-    class OgreCEGUIResourceProvider;
+    class OgreRenderer;
     class System;
 }
 
@@ -51,7 +50,7 @@
         /** Default Deconstructor */
         virtual ~UiSubsystem();
 
-        CEGUI::OgreCEGUIRenderer* getGUIRenderer();
+        CEGUI::OgreRenderer* getGUIRenderer();
 
         void initializeSubsystem();
 
@@ -78,7 +77,7 @@
         WindowFactory* mWindowFactory;
         WindowManager* mWindowManager;
 
-        CEGUI::OgreCEGUIRenderer* mGuiRenderer;
+        CEGUI::OgreRenderer* mGuiRenderer;
         CEGUI::ResourceProvider* mGuiResourceProvider;
         CEGUI::System* mGuiSystem;
         

Modified: rl/trunk/engine/ui/src/AbstractWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/AbstractWindow.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/AbstractWindow.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -270,7 +270,7 @@
 
 	void AbstractWindow::centerWindow()
 	{
-		CEGUI::Size screenSize = System::getSingleton().getRenderer()-&gt;getSize();
+		CEGUI::Size screenSize = System::getSingleton().getRenderer()-&gt;getDisplaySize();
 		CEGUI::Size windowSize = mWindow-&gt;getPixelSize();
 		float x = 0.5f * (screenSize.d_width - windowSize.d_width);
 		float y = 0.5f * (screenSize.d_height - windowSize.d_height);

Modified: rl/trunk/engine/ui/src/ActionChoiceWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/ActionChoiceWindow.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/ActionChoiceWindow.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -253,12 +253,6 @@
 
 		CEGUI::UVector2 size = button-&gt;getSize();
 		button-&gt;setPosition(pos - size * UVector2(cegui_reldim(0.5), cegui_reldim(0.5)));
-		LOG_DEBUG2(Logger::UI,
-			(button-&gt;getText()+&quot; &quot;+
-            StringConverter::toString(button-&gt;getPixelRect().d_left) + &quot;, &quot; +
-            StringConverter::toString(button-&gt;getPixelRect().d_top)).c_str(),
-			&quot;createButton&quot;);
-
 		return static_cast&lt;PushButton*&gt;(button);
 	}
 
@@ -321,7 +315,7 @@
 		ActionNode* root = new ActionNode(false);
 		root-&gt;setGroup(rootGroup);
 
-		set&lt;ActionGroup*&gt; groups;
+		std::set&lt;ActionGroup*&gt; groups;
 		ActionVector rest;
 
 		for (ActionVector::const_iterator iter = actions.begin(); iter != actions.end(); iter++)
@@ -329,10 +323,14 @@
 			Action* action = *iter;
 
 			ActionGroup* group = action-&gt;getGroup();
-			if (group == NULL || group == rootGroup )
+			if (group == NULL || group == rootGroup ) 
+			{
 				rest.push_back(action);
+			}
 			else if (groups.find(group) == groups.end())
+			{
 				groups.insert(group);
+			}
 		}
 
 		if (actions.size() / 1.2 &lt;= rest.size() + groups.size())
@@ -341,7 +339,7 @@
 			rest = actions;
 		}
 
-		for (set&lt;ActionGroup*&gt;::iterator groupIter = groups.begin();
+		for (std::set&lt;ActionGroup*&gt;::iterator groupIter = groups.begin();
 			 groupIter != groups.end(); groupIter++)
 		{
 			ActionVector actionsThisGroup;

Modified: rl/trunk/engine/ui/src/CharacterSelectionWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CharacterSelectionWindow.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/CharacterSelectionWindow.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -54,9 +54,9 @@
         {
             Element* elem = new Element(this);
             mCharacterWindow-&gt;addChildWindow(elem-&gt;getWindow());
-            CEGUI::Rect size = elem-&gt;getWindow()-&gt;getPixelRect();
+            CEGUI::Size size = elem-&gt;getWindow()-&gt;getPixelSize();
             size_t windowNum = mCharacterWindows.size();
-            elem-&gt;getWindow()-&gt;setPosition(UVector2(UDim(0, 0), UDim(0, windowNum * size.getHeight())));
+			elem-&gt;getWindow()-&gt;setPosition(UVector2(UDim(0, 0), UDim(0, windowNum * size.d_height)));
             elem-&gt;setVisible(true);
             elem-&gt;getWindow()-&gt;subscribeEvent(
                  Window::EventMouseClick,
@@ -73,7 +73,7 @@
             delete elem;
         }
         
-        for (int i = 0; i &lt; party.size(); ++i)
+        for (unsigned int i = 0; i &lt; party.size(); ++i)
         {
             mCharacterWindows[i]-&gt;setCreature(party[i]);
         }

Modified: rl/trunk/engine/ui/src/Console.cpp
===================================================================
--- rl/trunk/engine/ui/src/Console.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/Console.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -20,9 +20,9 @@
 
 #include &lt;boost/bind.hpp&gt;
 #include &lt;elements/CEGUIFrameWindow.h&gt;
+#include &lt;elements/CEGUIListboxTextItem.h&gt;
 
 #include &quot;RubyInterpreter.h&quot;
-#include &quot;ListboxWrappedTextItem.h&quot;
 #include &quot;InputManager.h&quot;
 #include &quot;CoreSubsystem.h&quot;
 #include &quot;JobScheduler.h&quot;
@@ -32,7 +32,6 @@
 
 using CEGUI::utf8; using CEGUI::ListboxTextItem;
 using CEGUI::KeyEventArgs; using CEGUI::Key; using CEGUI::colour;
-using CEGUI::ListboxWrappedTextItem; using CEGUI::TextFormatting;
 
 namespace rl
 {

Modified: rl/trunk/engine/ui/src/ContainerContentWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/ContainerContentWindow.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/ContainerContentWindow.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -163,10 +163,9 @@
 			Item* item = dragcont-&gt;getItem();
 
 
-            int x = evtArgs.dragDropItem-&gt;getPixelRect().d_left;
-            int y = evtArgs.dragDropItem-&gt;getPixelRect().d_top;
-            x -= mContentWindow-&gt;getPixelRect().d_left;
-            y -= mContentWindow-&gt;getPixelRect().d_top;
+			CEGUI::Vector2 relPos = evtArgs.dragDropItem-&gt;getPosition().asAbsolute(evtArgs.dragDropItem-&gt;getParentPixelSize()) - 
+									mContentWindow-&gt;getPosition().asAbsolute(mContentWindow-&gt;getParentPixelSize());
+			int x = relPos.d_x, y = relPos.d_y;
 
             // &#252;bergangspixel
             x += 14;

Modified: rl/trunk/engine/ui/src/CutsceneControlState.cpp
===================================================================
--- rl/trunk/engine/ui/src/CutsceneControlState.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/CutsceneControlState.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -97,7 +97,7 @@
             return nullPos;
         }
         
-        for (vector&lt;CameraPosition&gt;::const_iterator it = mPositions.begin(), end = mPositions.end(); it != end; ++it)
+		for (std::vector&lt;CameraPosition&gt;::const_iterator it = mPositions.begin(), end = mPositions.end(); it != end; ++it)
         {
             
         }

Modified: rl/trunk/engine/ui/src/DebugWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/DebugWindow.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/DebugWindow.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -164,7 +164,7 @@
 
     void DebugWindow::updateFps()
     {
-        const RenderTarget::FrameStats&amp; stats = CoreSubsystem::getSingleton().getRenderWindow()-&gt;getStatistics();
+		const Ogre::RenderTarget::FrameStats&amp; stats = CoreSubsystem::getSingleton().getRenderWindow()-&gt;getStatistics();
 
         Ogre::String textSt = &quot;Current FPS: &quot; +
             StringConverter::toString(stats.lastFPS)+

Modified: rl/trunk/engine/ui/src/DialogWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/DialogWindow.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/DialogWindow.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -19,6 +19,7 @@
 
 #include &lt;boost/bind.hpp&gt;
 #include &lt;elements/CEGUIFrameWindow.h&gt;
+#include &lt;elements/CEGUIListboxTextItem.h&gt;
 
 #include &quot;Exception.h&quot;
 #include &quot;ConfigurationManager.h&quot;
@@ -30,7 +31,6 @@
 #include &quot;DialogResponse.h&quot;
 #include &quot;GameLoggerWindow.h&quot;
 #include &quot;InputManager.h&quot;
-#include &quot;ListboxWrappedTextItem.h&quot;
 #include &quot;UiSubsystem.h&quot;
 
 
@@ -67,11 +67,11 @@
 
 		// Add 2 ListboxItems, one for the nsc responses, 
 		// one for the player selections
-		mPlayerText = new ListboxWrappedTextItem(&quot;&quot;, 6);
+		mPlayerText = new ListboxTextItem(&quot;&quot;, 6);
 		mPlayerText-&gt;setTextColours(COLOR_PLAYER_CHARACTER);
 		mQuestion-&gt;addItem(mPlayerText);
 
-		mNscText = new ListboxWrappedTextItem(&quot;&quot;, 0);
+		mNscText = new ListboxTextItem(&quot;&quot;, 0);
 		mNscText-&gt;setTextColours(COLOR_NON_PLAYER_CHARACTER);
 		mQuestion-&gt;addItem(mNscText);
 	}
@@ -100,7 +100,7 @@
 		{
             DialogOption* cur = *itr;
 
-			ListboxWrappedTextItem* item = NULL;
+			ListboxTextItem* item = NULL;
             CeGuiString text;
             if (cur-&gt;getLabel().empty())
             {
@@ -126,19 +126,19 @@
 
 			if (optionCount &lt; mDialogOptions-&gt;getItemCount())
 			{
-				item = static_cast&lt;ListboxWrappedTextItem*&gt;(
+				item = static_cast&lt;ListboxTextItem*&gt;(
 					mDialogOptions-&gt;getListboxItemFromIndex(optionCount));
                 item-&gt;setText(text);
                 item-&gt;setUserData(cur);
 			}
 			else
 			{
-				item = new ListboxWrappedTextItem(text, 6, true);
+				item = new ListboxTextItem(text, 6, NULL, true);
                 item-&gt;setUserData(cur);
 				mDialogOptions-&gt;addItem(item);
 			}
 
-			item-&gt;setTextFormatting(CEGUI::WordWrapLeftAligned);
+			//item-&gt;setTextFormatting(CEGUI::WordWrapLeftAligned);
 			mDialogOptions-&gt;handleUpdatedItemData();
 
 			++optionCount;

Modified: rl/trunk/engine/ui/src/GameLoggerWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/GameLoggerWindow.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/GameLoggerWindow.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -17,9 +17,10 @@
 
 #include &quot;GameLoggerWindow.h&quot;
 
+#include &lt;elements/CEGUIListboxTextItem.h&gt;
+
 #include &quot;Creature.h&quot;
 #include &quot;GameEventLog.h&quot;
-#include &quot;ListboxWrappedTextItem.h&quot;
 #include &quot;RulesMessages.h&quot;
 
 namespace rl {
@@ -51,7 +52,7 @@
 
 	void GameLoggerWindow::logEvent(const CeGuiString&amp; text, const CEGUI::colour color)
 	{
-		CEGUI::ListboxWrappedTextItem* item = new CEGUI::ListboxWrappedTextItem(text);
+		CEGUI::ListboxTextItem* item = new CEGUI::ListboxTextItem(text);
 		item-&gt;setTextColours(color);
 		mLog-&gt;addItem(item);
 		mLog-&gt;ensureItemIsVisible(item);

Modified: rl/trunk/engine/ui/src/GameOverWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/GameOverWindow.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/GameOverWindow.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -23,6 +23,7 @@
 #include &quot;WindowFactory.h&quot;
 #include &quot;UiSubsystem.h&quot;
 
+
 namespace rl
 {
 

Modified: rl/trunk/engine/ui/src/GameSettings.cpp
===================================================================
--- rl/trunk/engine/ui/src/GameSettings.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/GameSettings.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -177,14 +177,14 @@
     {
         Root* root = Ogre::Root::getSingletonPtr();
         
-        RenderSystemList* renderers = root-&gt;getAvailableRenderers();
-        RenderSystem* renderer = root-&gt;getRenderSystem();
+        const RenderSystemList&amp; renderers = root-&gt;getAvailableRenderers();
+		Ogre::RenderSystem* renderer = root-&gt;getRenderSystem();
         
-        createElements(mVideoRenderer, renderers-&gt;size());
+        createElements(mVideoRenderer, renderers.size());
 
-        for (int i = 0; i &lt; renderers-&gt;size(); ++i)
+        for (unsigned int i = 0; i &lt; renderers.size(); ++i)
         {
-            RenderSystem* cur = renderers-&gt;operator[](i);
+			Ogre::RenderSystem* cur = renderers[i];
             ListboxItem* item = mVideoRenderer-&gt;getListboxItemFromIndex(i);
             item-&gt;setText(cur-&gt;getName());
             if (cur == renderer)
@@ -196,19 +196,19 @@
         ConfigOptionMap config = renderer-&gt;getConfigOptions();
         
         setOption(config, &quot;Full Screen&quot;, mVideoFullscreen);
-        vector&lt;RadioButton*&gt; videoColorDepth;
+        std::vector&lt;RadioButton*&gt; videoColorDepth;
         videoColorDepth.push_back(mVideoColorDepth32);
         videoColorDepth.push_back(mVideoColorDepth16);
         
         setOption(config, &quot;Colour Depth&quot;, videoColorDepth);
-        vector&lt;RadioButton*&gt; videoAntiAliasing;
+        std::vector&lt;RadioButton*&gt; videoAntiAliasing;
         videoAntiAliasing.push_back(mVideoFsaa0);
         videoAntiAliasing.push_back(mVideoFsaa2);
         videoAntiAliasing.push_back(mVideoFsaa4);
         videoAntiAliasing.push_back(mVideoFsaa8);
         setOption(config, &quot;FSAA&quot;, videoAntiAliasing);
         
-        vector&lt;RadioButton*&gt; videoRttMode;
+		std::vector&lt;RadioButton*&gt; videoRttMode;
         videoRttMode.push_back(mVideoRttModeFBO);
         videoRttMode.push_back(mVideoRttModePBuffer);
         videoRttMode.push_back(mVideoRttModeCopy);
@@ -250,7 +250,7 @@
                 }
             }
             
-            for (int i = 0; i &lt; combobox-&gt;getItemCount(); ++i)
+            for (unsigned int i = 0; i &lt; combobox-&gt;getItemCount(); ++i)
             {
                 ListboxItem* item = combobox-&gt;getListboxItemFromIndex(i);
                 item-&gt;setText(curOption.possibleValues[i]);

Modified: rl/trunk/engine/ui/src/InGameMenuWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/InGameMenuWindow.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/InGameMenuWindow.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -49,7 +49,7 @@
 	CEGUI::WindowManager* windowMan = CEGUI::WindowManager::getSingletonPtr();
 
 	const ActionVector actions = ActionManager::getSingleton().getInGameGlobalActions();
-	map&lt;CeGuiString, PopupMenu*&gt; menuGroups;
+	std::map&lt;CeGuiString, PopupMenu*&gt; menuGroups;
 
 	for (ActionVector::const_iterator actIter = actions.begin(); actIter != actions.end(); actIter++)
 	{
@@ -58,7 +58,7 @@
 		if (group != NULL)
 		{
 			PopupMenu* menuGrp;
-			map&lt;CeGuiString, PopupMenu*&gt;::iterator grpIter = menuGroups.find(group-&gt;getName());
+			std::map&lt;CeGuiString, PopupMenu*&gt;::iterator grpIter = menuGroups.find(group-&gt;getName());
 			if (grpIter != menuGroups.end())
 			{
 				menuGrp = (*grpIter).second;

Modified: rl/trunk/engine/ui/src/InventoryWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/InventoryWindow.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/InventoryWindow.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -410,13 +410,12 @@
 			ItemDragContainer* dragcont = static_cast&lt;ItemDragContainer*&gt;(
 				evtArgs.dragDropItem);
 			Item* item = dragcont-&gt;getItem();
-			Ogre::Vector3 targetPosWindow(
-				dragcont-&gt;getPixelRect().d_left / getRoot()-&gt;getPixelSize().d_width,
-				dragcont-&gt;getPixelRect().d_top / getRoot()-&gt;getPixelSize().d_height,
-				-1);
 
+			CEGUI::Vector2 relPos = dragcont-&gt;getPosition().asRelative(getRoot()-&gt;getPixelSize());
 
-                        CEGUI::WindowManager::getSingleton().destroyWindow(dragcont);
+			Ogre::Vector3 targetPosWindow(relPos.d_x, relPos.d_y,-1);
+
+            CEGUI::WindowManager::getSingleton().destroyWindow(dragcont);
 //            dragcont-&gt;destroyWindow();
 
 			Ogre::Vector3 targetPosWorldSpace =

Modified: rl/trunk/engine/ui/src/UiSubsystem.cpp
===================================================================
--- rl/trunk/engine/ui/src/UiSubsystem.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/UiSubsystem.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -22,7 +22,8 @@
 #ifdef __APPLE__
 #   include &lt;OgreCEGUIRenderer/OgreCEGUIRenderer.h&gt;
 #else
-#   include &lt;OgreCEGUIRenderer.h&gt;
+#   include &lt;CEGUIOgreRenderer.h&gt;
+#   include &lt;CEGUIOgreResourceProvider.h&gt;
 #endif
 
 #include &quot;Actor.h&quot;
@@ -100,8 +101,8 @@
         delete mWindowManager;
         
 
-        delete mGuiSystem;
-        delete mGuiRenderer;
+        mGuiSystem-&gt;destroy();
+        mGuiRenderer-&gt;destroySystem();
     }
 
     void UiSubsystem::initializeSubsystem()
@@ -117,15 +118,14 @@
 
         LOG_MESSAGE2(Logger::UI,
             &quot;Initializing CEGUI Renderer.&quot;, &quot;UiSubsystem::initializeUiSubsystem&quot;);
-        mGuiRenderer = new OgreCEGUIRenderer(CoreSubsystem::getSingleton().getRenderWindow(),
-            Ogre::RENDER_QUEUE_OVERLAY, false, 3000, sceneMgr);
+		mGuiRenderer = &amp;OgreRenderer::bootstrapSystem(*CoreSubsystem::getSingleton().getRenderWindow());
 
         LOG_MESSAGE2(Logger::UI,
             &quot;Initializing CEGUI System.&quot;, &quot;UiSubsystem::initializeUiSubsystem&quot;);
-        mGuiResourceProvider = mGuiRenderer-&gt;createResourceProvider();
+        mGuiResourceProvider = &amp;mGuiRenderer-&gt;createOgreResourceProvider();
         
-        mGuiSystem = new System(mGuiRenderer, mGuiResourceProvider,
-            NULL, NULL, (utf8*)&quot;cegui.config&quot;, ConfigurationManager::getSingleton().getCeguiLogFile());
+		mGuiSystem = &amp;System::create(*mGuiRenderer, mGuiResourceProvider,
+            NULL, NULL, NULL, (utf8*)&quot;cegui.config&quot;, ConfigurationManager::getSingleton().getCeguiLogFile());
         CEGUI::Logger::getSingleton().setLoggingLevel(
             rl::Logger::getSingleton().getCeGuiLogDetail());
         LOG_MESSAGE2(Logger::UI,
@@ -169,7 +169,7 @@
         LOG_MESSAGE2(Logger::UI, &quot;WindowFactory initialized.&quot;, &quot;UiSubsystem::initializeUiSubsystem&quot;);
     }
 
-    CEGUI::OgreCEGUIRenderer* UiSubsystem::getGUIRenderer()
+    CEGUI::OgreRenderer* UiSubsystem::getGUIRenderer()
     {
         return mGuiRenderer;
     }

Modified: rl/trunk/engine/ui/src/WindowFactory.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowFactory.cpp	2009-11-07 19:49:41 UTC (rev 4962)
+++ rl/trunk/engine/ui/src/WindowFactory.cpp	2009-11-07 20:30:04 UTC (rev 4963)
@@ -451,15 +451,7 @@
             LOG_MESSAGE(
                 Logger::UI,
                 wnd-&gt;getName()
-                + (wnd-&gt;isVisible() ? &quot; vis&quot; : &quot; nvis&quot;)
-                + &quot; @&quot;
-                + StringConverter::toString(wnd-&gt;getPixelRect().getPosition().d_x)
-                + &quot;, &quot;
-                + StringConverter::toString(wnd-&gt;getPixelRect().getPosition().d_y)
-                + &quot; &quot;
-                + StringConverter::toString(wnd-&gt;getPixelSize().d_width)
-                + &quot;, &quot;
-                + StringConverter::toString(wnd-&gt;getPixelSize().d_height));
+                + (wnd-&gt;isVisible() ? &quot; vis&quot; : &quot; nvis&quot;));
         }
     }
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002018.html">[Dsa-hl-svn] r4962 - in rl/trunk/engine/core: include src
</A></li>
	<LI>Next message: <A HREF="002020.html">[Dsa-hl-svn] r4964 - rl/trunk/engine/core/lib/Debug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2019">[ date ]</a>
              <a href="thread.html#2019">[ thread ]</a>
              <a href="subject.html#2019">[ subject ]</a>
              <a href="author.html#2019">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
