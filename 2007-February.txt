From tanis at mail.berlios.de  Fri Feb  2 00:13:18 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Fri, 2 Feb 2007 00:13:18 +0100
Subject: [Dsa-hl-svn] r3015 - in rl/trunk/engine: core core/include core/src
	rules/include rules/src script/swig ui ui/include ui/src
Message-ID: <200702012313.l11NDIcs018528@sheep.berlios.de>

Author: tanis
Date: 2007-02-02 00:12:57 +0100 (Fri, 02 Feb 2007)
New Revision: 3015

Added:
   rl/trunk/engine/core/include/Job.h
   rl/trunk/engine/core/include/JobListener.h
   rl/trunk/engine/core/include/JobScheduler.h
   rl/trunk/engine/core/src/Job.cpp
   rl/trunk/engine/core/src/JobScheduler.cpp
   rl/trunk/engine/ui/include/WindowFadeJob.h
   rl/trunk/engine/ui/src/WindowFadeJob.cpp
Removed:
   rl/trunk/engine/ui/include/WindowUpdater.h
   rl/trunk/engine/ui/src/WindowUpdater.cpp
Modified:
   rl/trunk/engine/core/RlCore2005.vcproj
   rl/trunk/engine/core/include/CoreSubsystem.h
   rl/trunk/engine/core/include/GameLoop.h
   rl/trunk/engine/core/src/CoreSubsystem.cpp
   rl/trunk/engine/core/src/GameLoop.cpp
   rl/trunk/engine/rules/include/DsaManager.h
   rl/trunk/engine/rules/src/Date.cpp
   rl/trunk/engine/rules/src/DsaManager.cpp
   rl/trunk/engine/rules/src/TimerEventSource.cpp
   rl/trunk/engine/rules/src/TimerManager.cpp
   rl/trunk/engine/script/swig/RlCore.inc
   rl/trunk/engine/ui/RlUI2005.vcproj
   rl/trunk/engine/ui/include/CeGuiWindow.h
   rl/trunk/engine/ui/include/WindowManager.h
   rl/trunk/engine/ui/src/CeGuiWindow.cpp
   rl/trunk/engine/ui/src/DialogCharacterController.cpp
   rl/trunk/engine/ui/src/InfoPopup.cpp
   rl/trunk/engine/ui/src/WindowManager.cpp
Log:
Started work on job scheduling. Still plenty to do, but it already works. Window fading is the first job to use the new base. Old window faders and WindowUpdateTask removed.

There are three definite time sources now.
* Frame-time is given by GameLoop to each GameTask and on this way by the JobScheduler to each Job.
* Real-time is given by GameLoop::getClock.
* Game-time is given by DsaManager::getTimestamp.


Modified: rl/trunk/engine/core/RlCore2005.vcproj
===================================================================
--- rl/trunk/engine/core/RlCore2005.vcproj	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/core/RlCore2005.vcproj	2007-02-01 23:12:57 UTC (rev 3015)
@@ -441,6 +441,18 @@
 				>
 			</File>
 			<File
+				RelativePath=".\include\Job.h"
+				>
+			</File>
+			<File
+				RelativePath=".\include\JobListener.h"
+				>
+			</File>
+			<File
+				RelativePath=".\include\JobScheduler.h"
+				>
+			</File>
+			<File
 				RelativePath=".\include\LightObject.h"
 				>
 			</File>
@@ -658,6 +670,14 @@
 				>
 			</File>
 			<File
+				RelativePath=".\src\Job.cpp"
+				>
+			</File>
+			<File
+				RelativePath=".\src\JobScheduler.cpp"
+				>
+			</File>
+			<File
 				RelativePath=".\src\LightObject.cpp"
 				>
 			</File>

Modified: rl/trunk/engine/core/include/CoreSubsystem.h
===================================================================
--- rl/trunk/engine/core/include/CoreSubsystem.h	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-01 23:12:57 UTC (rev 3015)
@@ -21,6 +21,7 @@
 #include <OgreSingleton.h>
 #include <OgreString.h>
 #include <OgreRoot.h>
+#include <OgreTimer.h>
 #include <map>
 
 #include "EventSource.h"
@@ -45,6 +46,7 @@
 class ConfigurationManager;
 class SoundManager;
 class DebugVisualsManager;
+class JobScheduler;
 
 typedef _RlCoreExport std::map<Ogre::String, ContentModule*> ModuleMap;
 
@@ -91,17 +93,6 @@
 	*/
 	void makeScreenshot(const Ogre::String& sName);
 
-    /** Gibt die abgelaufene Spielzeit zur?ck*/
-	RL_LONGLONG getClock();
-
-	/** 
-	*   Setzt die abgelaufene Spielzeit wieder auf Null, die DSA-Zeit wird 
-	*   aus der Basiszeit + abgelaufener Spielzeit berechnet
-	*
-	* @see DsaManager
-	*/
-	void resetClock();
-
 	void addCoreEventListener(CoreEventListener* listener);
 	void removeCoreEventListener(CoreEventListener* listener);
 
@@ -128,13 +119,14 @@
     ScriptWrapper* mScriptWrapper;
     XmlResourceManager* mXmlResourceManager;
     PhysicsManager* mPhysicsManager;
-    GameLoop* mGameLoopManager;
+    GameLoop* mGameLoop;
     AnimationManager* mAnimationManager;
     ActorManager* mActorManager;
     GameEventManager* mGameEventManager;
     ConfigurationManager* mConfigurationManager;
 	SoundManager* mSoundManager;
     DebugVisualsManager* mDebugVisualsManager;
+    JobScheduler* mJobScheduler;
 
     /** Runs the setup methods  */
 	bool initializeCoreSubsystem();
@@ -155,8 +147,6 @@
 
 	/** Opens a configuration dialog */
 	bool setupConfiguration();
-
-	RL_LONGLONG getCurrentTime();
 };
 
 }

Modified: rl/trunk/engine/core/include/GameLoop.h
===================================================================
--- rl/trunk/engine/core/include/GameLoop.h	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/core/include/GameLoop.h	2007-02-01 23:12:57 UTC (rev 3015)
@@ -43,7 +43,7 @@
                   TG_SOUND     ///< Tasks that update sound
                  } TaskGroup;
 
-	GameLoop();
+    GameLoop();
 	virtual ~GameLoop();
 
     /// Adds a task to the game loop. It will not be executed immediately,
@@ -54,13 +54,16 @@
     /// @sa GameLoop::TaskGroup
     void addTask(GameTask* newTask, TaskGroup group);
 
-    /// Removes a task to the game loop.
+    /// Removes a task from the game loop.
     /// The removal is delayed till before the next frame is rendered.
 	void removeTask(GameTask* oldTask);
 
 	/// Request the game to quit. The current task loop will finish though.
 	void quitGame();
 
+    /// Returns time since game started in Milliseconds.
+    unsigned long getClock();
+
     /// Main loop of RL.
     void loop();
       
@@ -75,6 +78,10 @@
     GroupTaskList mAddedTasks;
     GameTaskList mRemovedTasks;
 
+    Ogre::Timer* mTimer;
+    /// Time as sampled after the last frame.
+    unsigned long mGameTime;
+
     std::deque<unsigned long> mLastTimes;
     /// In milliseconds, because Ogre's timer works this way.
     unsigned long mSmoothPeriod;
@@ -84,7 +91,7 @@
 
     /// Averages frame rate over mSmoothPeriod milliseconds.
     /// Steadies Controls and Physics a bit.
-    unsigned long smoothTime(unsigned long time);
+    unsigned long smoothFrameTime(unsigned long time);
 
     /// Processes queued additions and removals of tasks.
     void updateTaskList();

Added: rl/trunk/engine/core/include/Job.h
===================================================================
--- rl/trunk/engine/core/include/Job.h	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/core/include/Job.h	2007-02-01 23:12:57 UTC (rev 3015)
@@ -0,0 +1,74 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#ifndef __RL_JOB_H__
+#define __RL_JOB_H__
+
+#include "CorePrerequisites.h"
+
+namespace rl
+{
+    /** A Job is an independent executional entity, that encapsules a singe specific task
+     *  of a some finite duration.
+     *  If you want some task to be executed every frame over the length of the game,
+     *  use GameTask instead.<br>
+     *  A Job is registered with the JobScheduler using JobScheduler#addJob.
+     *  The JobScheduler calles Job#execute till the Job has finished, or the JobScheduler
+     *  decides to discard the Job, if allowed.
+     */
+    class _RlCoreExport Job
+    {
+    public:
+        /**
+         * Constructor.
+         *
+         *  @param isDiscardable Set this true, if the Job's goal can be reached in a single
+         *         step. For instance if a Job is supposed to slowly close a window by fading
+         *         its alpha to 0, then it is discardable, and Job#discard will just finish
+         *         the process by closing the window.
+         *
+         *  @param destroyWhenDone Set this to true, when the JobScheduler shall delete the
+         *         Job, after execution is finished. This should usually be the case, but
+         *         sometimes it is sensible to pool a number of Jobs for reuse.
+         */
+        Job(bool isDiscardable, bool destroyWhenDone);
+        virtual ~Job();
+
+        /**
+         * This is the function in which the job is supposed to do whatever it is supposed to do.
+         * This function is called by the JobScheduler at most once per frame. The frequency depends
+         * on the Job's priority given with JobScheduler#addJob.
+         * @param time the frame-time time, since the last call of this function.
+         */
+        virtual bool execute(Ogre::Real time) = 0;
+
+        /// Returns whether the job can be removed from the queue by the scheduler,
+        virtual bool isDiscardable();
+
+        /// Finish whatever the Job is doing. It won't get a chance to continue.
+        /// Overloaded functions must *not* call this implementation.
+        virtual void discard();
+
+        /// Returns true, if the Job shall be deleted, if the Job is finished. Returns false else.
+        virtual bool destroyWhenDone();
+
+    protected:
+        bool mIsDiscardable;
+        bool mDestroyWhenDone;
+    };
+}
+
+#endif

Added: rl/trunk/engine/core/include/JobListener.h
===================================================================
--- rl/trunk/engine/core/include/JobListener.h	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/core/include/JobListener.h	2007-02-01 23:12:57 UTC (rev 3015)
@@ -0,0 +1,45 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#ifndef __RL_JOB_LISTENER_H__
+#define __RL_JOB_LISTENER_H__
+
+#include "CorePrerequisites.h"
+
+namespace rl
+{
+    /**
+     * A Listener for the state of a Job's lifecycle in the JobScheduler.
+     * It can be registered with the JobScheduler, when a Job is added to it.
+     */
+    class _RlCoreExport JobListener
+    {
+    public:
+        JobListener() {}
+        virtual ~JobListener() {}
+
+        /// Called, when a Job is started for the first time.
+        virtual void jobStarted(unsigned long ticket) {}
+        /// Called, when a Job finishes itself regularly.
+        virtual void jobFinished(unsigned long ticket) {}
+        /// Called, when a Job is discarded by the JobScheduler.
+        virtual void jobDiscarded(unsigned long ticket) {}
+        /// Called, when a Job has been removed using JobScheduler#remove.
+        virtual void jobRemoved(unsigned long ticket) {}
+    };
+}
+
+#endif

Added: rl/trunk/engine/core/include/JobScheduler.h
===================================================================
--- rl/trunk/engine/core/include/JobScheduler.h	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/core/include/JobScheduler.h	2007-02-01 23:12:57 UTC (rev 3015)
@@ -0,0 +1,127 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#ifndef __RL_JOB_SCHEDULER_H__
+#define __RL_JOB_SCHEDULER_H__
+
+#include "CorePrerequisites.h"
+#include "GameTask.h"
+
+#include <deque>
+#include <functional>
+
+namespace rl
+{
+    class Job;
+    class JobListener;
+
+    /**
+     *  Scheduler for fire-and-forget Jobs in RL.
+     *  Jobs are independent executional entities, that encapsule a singe specific task
+     *  of a some finite duration.
+     *  The JobScheduler executes a certain amount of jobs each frame. The number of jobs per frame
+     *  depends on the time that can be spent for those jobs. Only a gross estimation is done.
+     *  A priority value determines how often a Job is executed.
+     *  Whether a Job can run this frame, depends on the number of tokens, the Job accumulated.
+     *  If this number is over a dynamic threshold,
+     *  it is executed and the tokens are removed from it. If a Job doesn't run this frame, tokens
+     *  are added to it. The number of tokens depends on its priority. The higher the priority, the
+     *  more tokens added.
+     */
+    class _RlCoreExport JobScheduler
+        : public GameTask,
+          public Ogre::Singleton<JobScheduler>
+    {
+    public:
+        typedef enum {JP_LOW = 10, JP_NORMAL = 20, JP_HIGH = 30} JobPriority;
+
+        JobScheduler();
+        virtual ~JobScheduler();
+
+        // Singleton Stuff
+        static JobScheduler& getSingleton(void);
+        static JobScheduler* getSingletonPtr(void);
+
+        /**
+         * Adds a Job to the scheduler.
+         * @param job The job to be added.
+         * @param priority The priority, with which the job is added. The higher, the more often
+         *        it will be called. But it will never be called more than once per frame. No job
+         *        will starve to death.
+         * @param delay The delay in seconds, till the Job job is called for the first time.
+         *        A value of 0.0f will call the job in the next frame.
+         * @param maxRuntime The maximum runtime a job is allowed to run. If it is reached, and
+         *        the Job is not yet finished, it will be discarded by calling Job#discard. If
+         *        the Job is non-discardable, it will just be removed from the queue.
+         * @param listener The JobListener that gets noticed, when the state of the Job changes.
+         *
+         * @return The ticket used to identify the Job. This ticket is used to identify a Job in the
+         *         JobListener. It can be used by the listener to identify the Job, even if it
+         *         doesn't exist anymore. When the Job itself is removed from the queue, the ticket
+         *         looses its validity to the JobScheduler itself though.
+         */
+        unsigned long addJob(Job* job, JobPriority priority=JP_NORMAL, Ogre::Real delay=0.0f,
+            Ogre::Real maxRuntime=Ogre::Math::POS_INFINITY, JobListener* listener=NULL);
+
+        /**
+         * Removes a Job from the queue.
+         * This removal is valid in the next frame.
+         * If the Job has not yet been executed this frame, it may still be executed a single time.
+         * If the ticket is not valid anymore, there won't be an exception, but this event is logged
+         * as a warning.
+         * @param ticket the ticket of the Job to be removed.
+         */
+        void removeJob(unsigned long ticket);
+
+        virtual void run(Ogre::Real time);
+
+        virtual const Ogre::String& getName() const;
+
+    private:
+        /// A JobEntry encapsules a Job for the Scheduler, it contains the Job itself and
+        /// various administrional data.
+        struct JobEntry
+        {
+            Job* job;                     ///< The Job to be executed.
+            JobListener* listener;        ///< attached JobListener or NULL else.
+            unsigned long ticket;         ///< ticket to identify the Job.
+            JobPriority priority;         ///< priority it runs with.
+            unsigned short tokens;        ///< number of accumulated tokens.
+            unsigned long start;          ///< when to execute the Job for the first time.
+            unsigned long end;            ///< when to discard the Job, if not then finished.
+            Ogre::Real timeSinceLastCall; ///< frame time, since the last call of Job#execute.
+            bool called;                  ///< false, if the Job has not been called yet.
+        };
+
+        /// Functor for finding a Job in a JobQueue by its ticket.
+        struct FindJobEntryByTicket : public std::binary_function<JobEntry, unsigned short, bool>
+        {
+            bool operator()(const JobEntry& jobEntry, unsigned short ticket) const
+            {
+                return jobEntry.ticket == ticket;
+            }
+        };
+
+        typedef std::deque<JobEntry> JobQueue;
+
+        JobQueue mJobQueue;
+        JobQueue mRemovedJobs;
+        unsigned short mTokenThreshold;
+        unsigned long mTicketCounter;
+    };
+}
+
+#endif

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -39,6 +39,7 @@
 #include "ScriptWrapper.h"
 #include "SoundManager.h"
 #include "DebugVisualsManager.h"
+#include "JobScheduler.h"
 
 #include <ctime>
 
@@ -64,17 +65,16 @@
         mScriptWrapper(NULL),
         mXmlResourceManager(NULL),
         mPhysicsManager(NULL),
-        mGameLoopManager(NULL),
+        mGameLoop(NULL),
         mAnimationManager(NULL),
         mActorManager(NULL),
         mGameEventManager(NULL),
         mConfigurationManager(NULL),
 		mSoundManager(NULL),
-        mDebugVisualsManager(NULL)
+        mDebugVisualsManager(NULL),
+        mJobScheduler(NULL)
     {
-        resetClock();
         initializeCoreSubsystem();
-        resetClock();
     }
 
     CoreSubsystem::~CoreSubsystem()
@@ -82,10 +82,11 @@
 		mCoreEventCaster.removeEventListeners();
 
         delete mWorld;
+        delete mGameLoop;
+        delete mJobScheduler;
         delete mActorManager;
         delete mGameEventManager;
         delete mAnimationManager;
-        delete mGameLoopManager;
         delete mDebugVisualsManager;
         delete mPhysicsManager;
         delete mXmlResourceManager;
@@ -118,7 +119,7 @@
 			startAdventureModule(mod);
 		}
 
-		mGameLoopManager->loop();
+		mGameLoop->loop();
 
         mWorld->clearScene();
         unloadPlugins();
@@ -184,7 +185,7 @@
         if (!carryOn)
             return false;
 
-		mGameLoopManager = new GameLoop();
+		mGameLoop = new GameLoop();
         LOG_MESSAGE(Logger::CORE,"GameLoopmanager erzeugt");
 
 		mScriptWrapper = new ScriptWrapper();
@@ -226,6 +227,9 @@
         mDebugVisualsManager = new DebugVisualsManager();
         GameLoop::getSingleton().addTask(mDebugVisualsManager, GameLoop::TG_GRAPHICS);
 
+        mJobScheduler = new JobScheduler();
+        GameLoop::getSingleton().addTask(mJobScheduler, GameLoop::TG_GRAPHICS);
+
 		return true;
     }
 
@@ -477,23 +481,6 @@
         mSoundManager->unloadAllDrivers();
     }
 
-    void CoreSubsystem::resetClock()
-    {
-        mClockStartTime = getCurrentTime();
-    }
-
-    RL_LONGLONG CoreSubsystem::getClock()
-    {
-        return getCurrentTime() - mClockStartTime;
-    }
-
-    RL_LONGLONG CoreSubsystem::getCurrentTime()
-    {
-        std::time_t t = std::time(NULL);
-        std::tm* ts = std::localtime(&t);
-        return static_cast<RL_LONGLONG>((ts->tm_hour * 3600 + ts->tm_min * 60 + ts->tm_sec) * 1000);
-    }
-
 	void CoreSubsystem::addCoreEventListener(rl::CoreEventListener *listener)
 	{
 		mCoreEventCaster.addEventListener(listener);

Modified: rl/trunk/engine/core/src/GameLoop.cpp
===================================================================
--- rl/trunk/engine/core/src/GameLoop.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/core/src/GameLoop.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -43,6 +43,8 @@
         : mTaskLists(),
           mAddedTasks(),
           mRemovedTasks(),
+          mTimer(NULL),
+          mGameTime(0),
           mLastTimes(),
           mSmoothPeriod(500),
           mMaxFrameTime(0.250f),
@@ -54,6 +56,8 @@
         mTaskLists.push_back(new GameTaskList);
         mTaskLists.push_back(new GameTaskList);
         mTaskLists.push_back(new GameTaskList);
+
+        mTimer = new Timer();
     }
 
     GameLoop::~GameLoop()
@@ -63,11 +67,12 @@
             delete mTaskLists[i];
         }
         mTaskLists.clear();
+        delete mTimer;
     }
 
     void GameLoop::addTask(GameTask* task, TaskGroup group)
     {
-        RlAssert(task != NULL, "Added task should be not null");
+        RlAssert1(task != NULL);
         mAddedTasks.push_back(std::make_pair(group, task));
     }
 
@@ -83,17 +88,16 @@
 
     void GameLoop::loop()
     {
-        Timer* timer = Root::getSingleton().getTimer();
         // A sensible start value
-        unsigned long timeSinceLastLoop = timer->getMilliseconds() - 50;
+        mGameTime = mTimer->getMilliseconds() - 50;
 
         // Loop until game exit is requested.
         while (!mQuitRequested)
         {
             // Calculate frame time. This time is smoothed and capped.
-            unsigned long elapsedTime = timer->getMilliseconds();
-            Real frameTime = 0.001f * (Real) smoothTime(elapsedTime - timeSinceLastLoop);
-            timeSinceLastLoop = elapsedTime;
+            unsigned long elapsedTime = mTimer->getMilliseconds();
+            Real frameTime = 0.001f * (Real) smoothFrameTime(elapsedTime - mGameTime);
+            mGameTime = elapsedTime;
             if (frameTime > mMaxFrameTime) frameTime = mMaxFrameTime;
 
 			// Let Ogre handle Windows/XServer events.
@@ -108,7 +112,6 @@
                 GameTaskList* tasks = mTaskLists[i];
                 for (GameTaskList::iterator it = tasks->begin(); it != tasks->end(); ++it)
                 {
-                    RlAssert(*it != NULL, "This task should not be NULL");
                     if (!(*it)->isPaused())
                     {
                         (*it)->run(frameTime);
@@ -142,7 +145,6 @@
         // Add new ones.
         for (GroupTaskList::iterator it = mAddedTasks.begin(); it != mAddedTasks.end(); ++it)
         {
-            RlAssert((*it).second, "New task should not be null");
             mTaskLists[(*it).first]->push_back((*it).second);
         }
         mAddedTasks.clear();
@@ -150,7 +152,7 @@
 
     // Idea taken from Ogre, but implementation by us.
     // smooths time step over the period mSmoothPeriod.
-    unsigned long GameLoop::smoothTime(unsigned long time)
+    unsigned long GameLoop::smoothFrameTime(unsigned long time)
     {
         // First add time for this frame
         mLastTimes.push_back(time);
@@ -171,4 +173,9 @@
         return std::accumulate(mLastTimes.begin(), mLastTimes.end(), 0)
             / std::max(mLastTimes.size(), (size_t)1);
     }
+
+    unsigned long GameLoop::getClock()
+    {
+        return mGameTime;
+    }
 }

Added: rl/trunk/engine/core/src/Job.cpp
===================================================================
--- rl/trunk/engine/core/src/Job.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/core/src/Job.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -0,0 +1,46 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#include "Job.h"
+#include "Exception.h"
+
+namespace rl
+{
+    Job::Job(bool isDiscardable, bool destroyWhenDone)
+        : mIsDiscardable(isDiscardable), mDestroyWhenDone(destroyWhenDone)
+    {
+
+    }
+
+    Job::~Job()
+    {
+    }
+
+    bool Job::isDiscardable()
+    {
+        return mIsDiscardable;
+    }
+
+    bool Job::destroyWhenDone()
+    {
+        return mDestroyWhenDone;
+    }
+
+    void Job::discard()
+    {
+        RlFail("Discarded non discardable Job.");
+    }
+}

Added: rl/trunk/engine/core/src/JobScheduler.cpp
===================================================================
--- rl/trunk/engine/core/src/JobScheduler.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/core/src/JobScheduler.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -0,0 +1,169 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#include "JobScheduler.h"
+#include "Job.h"
+#include "JobListener.h"
+#include "GameLoop.h"
+
+using namespace Ogre;
+
+template<> rl::JobScheduler* Singleton<rl::JobScheduler>::ms_Singleton = 0;
+
+namespace rl
+{
+    JobScheduler& JobScheduler::getSingleton(void)
+    {
+        return Singleton<JobScheduler>::getSingleton();
+    }
+
+    JobScheduler* JobScheduler::getSingletonPtr(void)
+    {
+        return Singleton<JobScheduler>::getSingletonPtr();
+    }
+
+    JobScheduler::JobScheduler()
+        : mJobQueue(), mRemovedJobs(), mTokenThreshold(JP_NORMAL), mTicketCounter(0)
+    {
+    }
+
+    JobScheduler::~JobScheduler()
+    {
+    }
+
+    unsigned long JobScheduler::addJob(Job* job, JobPriority priority, Real delay, Real maxRuntime,
+        JobListener* listener)
+    {
+        unsigned long ticket = ++mTicketCounter;
+        unsigned long clock = GameLoop::getSingleton().getClock();
+        unsigned long start = clock + delay*1000;
+        unsigned long end = maxRuntime >= Math::POS_INFINITY ?
+            0xffffffff : static_cast<unsigned long>(start + maxRuntime*1000);
+        JobEntry entry = {job, listener, ticket, priority, priority, start, end, 0.0f, false};
+        mJobQueue.push_back(entry);
+        return ticket;
+    }
+
+    void JobScheduler::run(Ogre::Real time)
+    {
+        ///@todo use different buckets for jobs not yet started, instead of
+        ///      iterating over those each time.
+
+        ///@todo dynamically determine token threshold. Maybe make it work load depending.
+
+        unsigned long clock = GameLoop::getSingleton().getClock();
+
+        // Queue for finished jobs
+        JobQueue notDone;
+
+        for (JobQueue::iterator it = mJobQueue.begin(), end = mJobQueue.end(); it != end; ++it)
+        {
+            JobEntry entry = *it;
+
+            if (entry.start <= clock && clock < entry.end)
+            {
+                // Is the token threshold reached? 
+                if (entry.tokens >= mTokenThreshold)
+                {
+                    // Yes, pay run fee and execute.
+                    entry.tokens = 0;
+                    bool runAgain = !entry.job->execute(entry.timeSinceLastCall + time);
+
+                    if (!entry.called)
+                    {
+                        // Notify listener, the job started for the first time
+                        if (entry.listener != NULL)
+                        {
+                            entry.listener->jobStarted(entry.ticket);
+                        }
+                        entry.called = true;
+                    }
+
+                    if (runAgain)
+                    {
+                        // Job is not done, reset token count and requeue.
+                        entry.tokens = entry.priority;
+                        entry.timeSinceLastCall = 0.0f;
+                        notDone.push_back(entry);
+                    }
+                    else
+                    {
+                        // Notify listener, the job finished regularly.
+                        if (entry.listener != NULL)
+                        {
+                            entry.listener->jobFinished(entry.ticket);
+                        }
+
+                        // If we are supposed to delete the Job, do so now.
+                        if (entry.job->destroyWhenDone())
+                        {
+                            delete entry.job;
+                        }
+                    }
+                }
+                else
+                {
+                    // No, increase token count
+                    entry.tokens += entry.priority;
+                    entry.timeSinceLastCall += time;
+                    notDone.push_back(entry);
+                }
+            }
+            else if (!(clock < entry.end))
+            {
+                // Start time not yet reached. Queue again.
+                notDone.push_back(entry);
+            }
+            else
+            {
+                // Job reached its end time and didn't want to finish itself, so we do it.
+                if (entry.job->isDiscardable())
+                {
+                    entry.job->discard();
+                    if (entry.listener != NULL)
+                    {
+                        entry.listener->jobDiscarded(entry.ticket);
+                    }
+                }
+            }
+        }
+
+        // Copy requeued jobs for next run.
+        mJobQueue = notDone;
+    }
+
+    void JobScheduler::removeJob(unsigned long ticket)
+    {
+        JobQueue::iterator it = std::find_if(mJobQueue.begin(), mJobQueue.end(),
+            std::bind2nd(FindJobEntryByTicket(), ticket));
+        if (it != mJobQueue.end())
+        {
+            mRemovedJobs.push_back(*it);
+            if (it->listener != NULL) it->listener->jobRemoved(ticket);
+        }
+        else
+        {
+            ///@todo Log missing job for the ticket.
+        }
+    }
+
+    const String& JobScheduler::getName() const
+    {
+        static String NAME = "JobScheduler";
+
+        return NAME;
+    }
+}

Modified: rl/trunk/engine/rules/include/DsaManager.h
===================================================================
--- rl/trunk/engine/rules/include/DsaManager.h	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/rules/include/DsaManager.h	2007-02-01 23:12:57 UTC (rev 3015)
@@ -51,7 +51,6 @@
 			RULE_DISTANZKLASSEN
 		};
 
-
         static DsaManager& getSingleton(void);
         static DsaManager* getSingletonPtr(void);
 
@@ -61,34 +60,32 @@
         ~DsaManager();
 
         /** Liefert die aktuelle Spielzeit */
-        RL_LONGLONG getTimestamp();
-		Date getCurrentDate();
+        RL_LONGLONG getTimestamp() const;
+		Date getCurrentDate() const;
 
-		/** Setzt die aktuelle Spielzeit, die Spieluhr in Core wird dabei zur?ckgesetzt */
+		/// Setzt die aktuelle Spielzeit
 		void setTimestamp(const RL_LONGLONG time);
 		void setCurrentDate(const Date& date);
 
+        Ogre::Real getTimeScale() const;
+        void setTimeScale(Ogre::Real scale);
 
         /** liefert eine Zufallszahl zwischen 1 und 20.*/
-        int rollD20();
+        int rollD20() const;
 
         /** liefert ein Tripel von Zufallszahlen zwischen 1 und 20.*/
-        Tripel<int> roll3D20();
+        Tripel<int> roll3D20() const;
 
         /** liefert eine Zufallszahl zwischen 1 und 6.*/
-        int rollD6();
+        int rollD6() const;
 
-		int roll(int d6, int d20);
+		int roll(int d6, int d20) const;
 
         Talent* getTalent(const CeGuiString talentName) const;
-		//Talent* getTalent(const CeGuiString name) const;
         Kampftechnik* getKampftechnik(const CeGuiString kampftechnikName) const;
         Eigenschaft* getEigenschaft(const CeGuiString eigenschaftName) const;
 		Person* getPerson(int id) const;        
-		
-		//int getEigenschaftIdFromString(const CeGuiString str) const;
-		//int getEigenschaftIdFromLongString(const CeGuiString str) const;
-		
+				
 		int getSteigerKosten(int column, int from, int to) const;
 		int getSteigerKosten(int column, int from) const;
 		bool isDkDistance(const Weapon::Distanzklasse& dk, const Ogre::Real& distance) const;
@@ -99,7 +96,9 @@
 		void _addKampftechnik(Kampftechnik* kampftechnik);
 
     private:
-		RL_LONGLONG mBaseTime;
+		mutable RL_LONGLONG mLastGameTime;
+        mutable unsigned long mLastClock;
+        Ogre::Real mTimeScale;
 
         typedef std::map<CeGuiString, Talent*> TalentMap;
 		typedef std::map<int, Person*> PersonMap;

Modified: rl/trunk/engine/rules/src/Date.cpp
===================================================================
--- rl/trunk/engine/rules/src/Date.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/rules/src/Date.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -62,14 +62,7 @@
     const unsigned RL_LONGLONG Date::ONE_DAY = 86400000UL;
     const unsigned RL_LONGLONG Date::ONE_WEEK = 604800000UL;
     const unsigned RL_LONGLONG Date::ONE_MONTH = 2592000000UL;
-
-#if (_MSC_VER >= 1200) && (_MSC_VER < 1300)
-    // VC6 kennt kein ULL-Suffix 
-    const unsigned RL_LONGLONG Date::ONE_YEAR = 31536000000UL;
-#else
-    // Und GCC will unbedingt ULL
     const unsigned RL_LONGLONG Date::ONE_YEAR = 31536000000ULL;
-#endif
     const unsigned RL_LONGLONG Date::ONE_KAMPFRUNDE = 3 * Date::ONE_SECOND;
     const unsigned RL_LONGLONG Date::ONE_SPIELRUNDE = 5 * Date::ONE_MINUTE;
 

Modified: rl/trunk/engine/rules/src/DsaManager.cpp
===================================================================
--- rl/trunk/engine/rules/src/DsaManager.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/rules/src/DsaManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -22,16 +22,17 @@
 #include "Person.h"
 #include "RulesSubsystem.h"
 #include "Date.h"
-//#include "XdimlLoader.h"
 #include "DsaDataLoader.h"
 
 #include "Exception.h"
-#include "CoreSubsystem.h"
+#include "GameLoop.h"
 
-template <>
-	rl::DsaManager* Ogre::Singleton<rl::DsaManager> ::ms_Singleton = 0;
+#include <cstdlib>
 
+template <> rl::DsaManager* Ogre::Singleton<rl::DsaManager> ::ms_Singleton = 0;
+
 using namespace std;
+using namespace Ogre;
 using CEGUI::utf8;
 
 namespace rl
@@ -47,7 +48,9 @@
     }
 
     DsaManager::DsaManager()
-        : mBaseTime(0),
+        : mLastGameTime(0),
+        mLastClock(0),
+        mTimeScale(24.0f), // 5 min == 2 hours, 1 hour == 1 day
         mEigenschaften(),
         mTalente(),
         mKampftechniken(),
@@ -136,20 +139,23 @@
 		return false;
 	}
 
-    RL_LONGLONG DsaManager::getTimestamp()
+    RL_LONGLONG DsaManager::getTimestamp() const
     {
-		return mBaseTime + CoreSubsystem::getSingleton().getClock();
+        unsigned long currentClock = GameLoop::getSingleton().getClock();
+        mLastGameTime += mTimeScale * (currentClock - mLastClock);
+        mLastClock = currentClock;
+		return mLastGameTime;
     }
 
-	Date DsaManager::getCurrentDate()
+	Date DsaManager::getCurrentDate() const
 	{
 		return Date(getTimestamp());
 	}
 
 	void DsaManager::setTimestamp(const RL_LONGLONG time)
 	{
-		mBaseTime = time;
-		CoreSubsystem::getSingleton().resetClock();
+		mLastGameTime = time;
+        mLastClock = GameLoop::getSingleton().getClock();
 	}
 
 	void DsaManager::setCurrentDate(const Date& date)
@@ -157,24 +163,37 @@
 		setTimestamp(date.getTimestamp());
 	}
 
-    int DsaManager::rollD20()
+    Real DsaManager::getTimeScale() const
     {
-        double d = rand();
+        return mTimeScale;
+    }
+
+    void DsaManager::setTimeScale(Real scale)
+    {
+        // First refresh time with old scale.
+        getTimestamp();
+        // Then set new scale.
+        mTimeScale = scale;
+    }
+
+    int DsaManager::rollD20() const
+    {
+        double d = std::rand();
         return static_cast<int>(d * 20.0 / RAND_MAX) + 1;
     }
 
-    Tripel<int> DsaManager::roll3D20()
+    Tripel<int> DsaManager::roll3D20() const
     {
         return Tripel<int>(rollD20(), rollD20(), rollD20());
     }
 
-    int DsaManager::rollD6()
+    int DsaManager::rollD6() const
     {
-        double d = rand();
+        double d = std::rand();
         return static_cast<int>(d * 6.0 / RAND_MAX) + 1;
     }
 
-	int DsaManager::roll(int d6, int d20)
+	int DsaManager::roll(int d6, int d20) const
 	{
 		int sum = 0;
 

Modified: rl/trunk/engine/rules/src/TimerEventSource.cpp
===================================================================
--- rl/trunk/engine/rules/src/TimerEventSource.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/rules/src/TimerEventSource.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -21,7 +21,7 @@
 #include "TimerListener.h"
 #include "GameObject.h"
 #include "DsaManager.h"
-#include "CoreSubsystem.h"
+#include "GameLoop.h"
 #include "ScriptWrapper.h"
 
 using Ogre::Real;
@@ -87,7 +87,7 @@
 		}
 		else if (mType == TIMER_GAME_TIME)
 		{
-			RL_LONGLONG time = CoreSubsystem::getSingleton().getClock();
+			RL_LONGLONG time = GameLoop::getSingleton().getClock();
 			evt->setTime(time);
 			mGameTimeLastCall = time;
 		}

Modified: rl/trunk/engine/rules/src/TimerManager.cpp
===================================================================
--- rl/trunk/engine/rules/src/TimerManager.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/rules/src/TimerManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -62,7 +62,7 @@
 	void TimerManager::run(Ogre::Real elapsedTime)
 	{
 		RL_LONGLONG nowDsa = DsaManager::getSingleton().getTimestamp();
-		RL_LONGLONG now = CoreSubsystem::getSingleton().getClock();
+		RL_LONGLONG now = GameLoop::getSingleton().getClock();
 
 		for (std::set<TimerEventSource*>::iterator timerIter = mTimers.begin(); 
 			timerIter != mTimers.end();)
@@ -106,6 +106,4 @@
 
         return NAME;
     }
-
-
 }

Modified: rl/trunk/engine/script/swig/RlCore.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCore.inc	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/script/swig/RlCore.inc	2007-02-01 23:12:57 UTC (rev 3015)
@@ -656,7 +656,6 @@
 	void registerModule(ContentModule* module);
     World* getWorld();
     void makeScreenshot(const Ogre::String& sName);
-    RL_LONGLONG getClock();
     bool isInitialized() const;
     void setScheme(const Ogre::String& schemeName);
 };

Modified: rl/trunk/engine/ui/RlUI2005.vcproj
===================================================================
--- rl/trunk/engine/ui/RlUI2005.vcproj	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/RlUI2005.vcproj	2007-02-01 23:12:57 UTC (rev 3015)
@@ -390,11 +390,11 @@
 				>
 			</File>
 			<File
-				RelativePath=".\include\WindowManager.h"
+				RelativePath=".\include\WindowFadeJob.h"
 				>
 			</File>
 			<File
-				RelativePath=".\include\WindowUpdater.h"
+				RelativePath=".\include\WindowManager.h"
 				>
 			</File>
 			<Filter
@@ -551,11 +551,11 @@
 				>
 			</File>
 			<File
-				RelativePath=".\src\WindowManager.cpp"
+				RelativePath=".\src\WindowFadeJob.cpp"
 				>
 			</File>
 			<File
-				RelativePath=".\src\WindowUpdater.cpp"
+				RelativePath=".\src\WindowManager.cpp"
 				>
 			</File>
 			<Filter

Modified: rl/trunk/engine/ui/include/CeGuiWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CeGuiWindow.h	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/include/CeGuiWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
@@ -67,17 +67,12 @@
 
 		bool isModal();
 		bool isClosingOnEscape();
-		bool isFading();
-		void setFading(bool fading);
 
 		const CeGuiString& getName() const;
 		const Ogre::Real& getNormalAlpha() const;
 
-		virtual void windowHid();		
+		virtual void windowHid();
 
-		void _setUpdateTask(WindowUpdateTask* updateTask);
-		WindowUpdateTask* _getUpdateTask();
-
 	protected:
 		CeGuiWindow(
 			const CeGuiString& xmlfile, 
@@ -96,7 +91,7 @@
 		static CEGUI::Window* loadWindow(const CeGuiString& xmlfile, CeGuiString& prefix);
 
 		CEGUI::Window* mWindow;
-		bool mVisible; 
+		bool mVisible;
 
 	private:
 		
@@ -105,8 +100,6 @@
 		CeGuiString mName;
 		bool mModal;
 		bool mCloseOnEscape;
-		bool mFading;
-		WindowUpdateTask* mUpdateTask;
 		Ogre::Real mNormalAlpha;
 
 		static int sNumCeGuiWindows;

Added: rl/trunk/engine/ui/include/WindowFadeJob.h
===================================================================
--- rl/trunk/engine/ui/include/WindowFadeJob.h	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/include/WindowFadeJob.h	2007-02-01 23:12:57 UTC (rev 3015)
@@ -0,0 +1,49 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#ifndef __RL_WINDOW_UPDATE_JOB_H__
+#define __RL_WINDOW_UPDATE_JOB_H__
+
+#include "UiPrerequisites.h"
+#include <OgreSingleton.h>
+
+#include "Job.h"
+
+namespace rl {
+
+    class CeGuiWindow;
+
+    class WindowFadeJob : public Job
+    {
+    public:
+        typedef enum {FADE_IN, FADE_OUT, FADE_OUT_AND_DESTROY} Mode;
+
+        WindowFadeJob(CeGuiWindow* window, Mode mode,
+            Ogre::Real targetAlpha, Ogre::Real changeRate = 4.0f);
+
+        virtual bool execute(Ogre::Real time);
+        virtual void discard();
+
+    protected:
+        CeGuiWindow* mWindow;
+        Mode mMode;
+        Ogre::Real mChangeRate;
+        Ogre::Real mCurrentAlpha;
+        Ogre::Real mTargetAlpha;
+    };
+}
+
+#endif

Modified: rl/trunk/engine/ui/include/WindowManager.h
===================================================================
--- rl/trunk/engine/ui/include/WindowManager.h	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/include/WindowManager.h	2007-02-01 23:12:57 UTC (rev 3015)
@@ -44,24 +44,13 @@
 		static WindowManager* getSingletonPtr();
 
 		void registerWindow(CeGuiWindow* window);
-		bool destroyWindow(CeGuiWindow* window);
-		void _doDestroyWindow(CeGuiWindow* window);
+		void destroyWindow(CeGuiWindow* window);
 		void closeTopWindow();
 		bool handleMovedToFront(CeGuiWindow* window);
 		bool handleMovedToBack(CeGuiWindow* window);
 
-		void _fadeIn(CeGuiWindow* window, float targetAlpha = 1.0);
-		void _fadeOut(CeGuiWindow* window, bool destroy);
-		void _fadeInOut(
-			CeGuiWindow* window, 
-			Ogre::Real timeFade, 
-			Ogre::Real timeHold, 
-			bool destroy = false);
-		void _moveOutLeft(CeGuiWindow* window, Ogre::Real time, bool destroy);
-
 	private:
 		std::list<CeGuiWindow*> mWindowList;
-		WindowUpdater* mWindowUpdater;
 	};
 }
 

Deleted: rl/trunk/engine/ui/include/WindowUpdater.h
===================================================================
--- rl/trunk/engine/ui/include/WindowUpdater.h	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/include/WindowUpdater.h	2007-02-01 23:12:57 UTC (rev 3015)
@@ -1,143 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-#ifndef __WindowUpdater_H__
-#define __WindowUpdater_H__
-
-#include "UiPrerequisites.h"
-#include <OgreSingleton.h>
-
-#include "GameTask.h"
-
-namespace rl {
-
-	class CeGuiWindow;
-
-	class WindowUpdateTask {
-	public:
-		enum WindowUpdateAction
-		{
-			WND_SHOW = 1,
-			WND_HIDE,
-			WND_DESTROY
-		};
-		
-		virtual void run(Ogre::Real elapsedTime) = 0;
-
-		const CEGUI::Point& getCurrentPosition() const;
-		const Ogre::Real& getCurrentAlpha() const;
-		const Ogre::Real& getTimeLeft() const;
-		CeGuiWindow* getWindow();
-		WindowUpdateAction getAction() const;
-
-		virtual bool isFinished() const = 0;
-		
-		void setAction(WindowUpdateAction action);
-		virtual void setTargetAlpha(const Ogre::Real& alpha);
-	
-	protected:
-		WindowUpdateTask(CeGuiWindow* window, WindowUpdateAction action);
-
-		CeGuiWindow* mWindow;
-		CEGUI::Point mCurrentPoint;
-		Ogre::Real mCurrentAlpha;
-
-	private:
-		WindowUpdateAction mAction;
-	};
-
-	class WindowMoveTask : public WindowUpdateTask
-	{
-	public:
-		WindowMoveTask(CeGuiWindow* window, Ogre::Real time, WindowUpdateAction action,
-			int targetX, int targetY);
-
-		void run(Ogre::Real elapsedTime);
-		bool isFinished() const;
-
-	private:
-		Ogre::Real mTime; 
-		CEGUI::Point mTargetPoint;
-		CEGUI::Point mRatePoint;
-	};
-
-	class WindowFadeTask : public WindowUpdateTask
-	{
-	public:
-		WindowFadeTask(CeGuiWindow* window, WindowUpdateAction action, 
-			Ogre::Real targetAlpha);
-
-		void run(Ogre::Real elapsedTime);
-		void setTargetAlpha(const Ogre::Real& alpha);
-		bool isFinished() const;
-
-	private:
-		static const float DEFAULT_RATE;
-
-		Ogre::Real mTargetAlpha;
-		Ogre::Real mRate;
-	};
-
-	class WindowFadeInOutTask : public WindowUpdateTask
-	{
-	public:
-		WindowFadeInOutTask(CeGuiWindow* window, Ogre::Real timeFade, Ogre::Real timeHold, 
-			WindowUpdateAction action);
-
-		void run(Ogre::Real elapsedTime);
-		bool isFinished() const;
-
-	private:
-		Ogre::Real mTime; 
-		Ogre::Real mTimeFade;
-		Ogre::Real mTimeHold;
-		Ogre::Real mRateAlpha;
-	};
-
-	class WindowUpdater : public GameTask
-	{
-	public:
-		void run(Ogre::Real elapsedTime);
-
-		void fadeIn(
-			CeGuiWindow* window, 
-			float targetAlpha = 1.0);
-
-		void fadeOut(
-			CeGuiWindow* window, 
-			bool destroy);
-
-		void fadeInOut(
-			CeGuiWindow* window, 
-			Ogre::Real timeFade, 
-			Ogre::Real timeHold, 
-			bool destroy = false);
-
-		void moveOutLeft(
-			CeGuiWindow* window, 
-			Ogre::Real time, 
-			bool destroy);
-
-        virtual const Ogre::String& getName() const;
-
-	private:
-		std::set<WindowUpdateTask*> mTasks;
-	};
-
-
-}
-
-#endif

Modified: rl/trunk/engine/ui/src/CeGuiWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CeGuiWindow.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/src/CeGuiWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -23,7 +23,8 @@
 #include "CeGuiHelper.h"
 #include "InputManager.h"
 #include "WindowManager.h"
-#include "WindowUpdater.h"
+#include "WindowFadeJob.h"
+#include "JobScheduler.h"
 
 using namespace std;
 using namespace CEGUI;
@@ -38,8 +39,7 @@
 	: mVisible(false),
 		mModal(modal),
 		mWindowType(type),
-		mCloseOnEscape(closeOnEscape),
-		mUpdateTask(NULL)
+		mCloseOnEscape(closeOnEscape)
 	{
         LOG_MESSAGE(Logger::UI, 
 		    "Lade Fenster '" + Ogre::String(xmlfile.c_str()) + "'");
@@ -111,22 +111,23 @@
 
 	void CeGuiWindow::setVisible(bool visible, bool destroy)
 	{
-		static float FADE_TIME = 0.2f;
-
 		if(mVisible != visible)
 		{
 			if (visible)
 			{
 				InputManager::getSingleton().registerCeGuiWindow(this);
-				WindowManager::getSingleton()._fadeIn(this, mNormalAlpha);
-				mVisible = true;
+                JobScheduler::getSingleton().addJob(
+                    new WindowFadeJob(this, WindowFadeJob::FADE_IN, mNormalAlpha));
 			}
 			else
 			{
 				InputManager::getSingleton().unregisterCeGuiWindow(this);
-				WindowManager::getSingleton()._fadeOut(this, destroy);
-				mVisible = false;
+                JobScheduler::getSingleton().addJob(
+                    new WindowFadeJob(this,
+                    destroy ? WindowFadeJob::FADE_OUT_AND_DESTROY : WindowFadeJob::FADE_OUT,
+                    0.0f));
 			}
+            mVisible = visible;
 		}
 	}
 
@@ -145,16 +146,6 @@
 		return mCloseOnEscape;
 	}
 
-	bool CeGuiWindow::isFading()
-	{
-		return mFading;
-	}
-
-	void CeGuiWindow::setFading(bool fading)
-	{
-		mFading = fading;
-	}
-
 	CeGuiWindow::WindowType CeGuiWindow::getWindowType()
 	{
 		return mWindowType;
@@ -297,16 +288,6 @@
 		return mNamePrefix;
 	}
 
-	void CeGuiWindow::_setUpdateTask(WindowUpdateTask* task)
-	{
-		mUpdateTask = task;
-	}
-
-	WindowUpdateTask* CeGuiWindow::_getUpdateTask()
-	{
-		return mUpdateTask;
-	}
-
 	void CeGuiWindow::windowHid()
 	{
 	}

Modified: rl/trunk/engine/ui/src/DialogCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/DialogCharacterController.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/src/DialogCharacterController.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -75,12 +75,12 @@
 		mCharacterActor->getPhysicalThing()->unfreeze();
 		if (mDialogWindow != NULL)
 		{
-			WindowManager::getSingleton().destroyWindow(mDialogWindow);
+            mDialogWindow->setVisible(false, true);
 			mDialogWindow = NULL;
 		}
 		if (mSubtitleWindow != NULL)
 		{
-			WindowManager::getSingleton().destroyWindow(mSubtitleWindow);
+            mSubtitleWindow->setVisible(false, true);
 			mSubtitleWindow = NULL;
 		}
 		delete mSoundObject;

Modified: rl/trunk/engine/ui/src/InfoPopup.cpp
===================================================================
--- rl/trunk/engine/ui/src/InfoPopup.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/src/InfoPopup.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -78,10 +78,12 @@
 
 	void InfoPopup::setVisible(bool visible, bool destroyAfterHide)
 	{
-		if (visible && !isVisible())
-		{
-			WindowManager::getSingleton()._fadeInOut(this, 0.25f, 2.0f);
-		}
+        CeGuiWindow::setVisible(visible, destroyAfterHide);
+        ///@todo implement the following, when timed jobs are possible.
+		//if (visible && !isVisible())
+		//{
+		//	WindowManager::getSingleton()._fadeInOut(this, 0.25f, 2.0f);
+		//}
 	}
 
 	void InfoPopup::questStateChanged(QuestEvent* anEvent)

Added: rl/trunk/engine/ui/src/WindowFadeJob.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowFadeJob.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/src/WindowFadeJob.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -0,0 +1,66 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#include "WindowFadeJob.h"
+
+#include "CeGuiWindow.h"
+#include "CeGuiHelper.h"
+#include "WindowManager.h"
+
+using namespace CEGUI;
+using namespace Ogre;
+
+namespace rl
+{
+    WindowFadeJob::WindowFadeJob(CeGuiWindow* window, Mode mode, Real targetAlpha, Real changeRate)
+        : Job(true, true),
+        mWindow(window),
+        mMode(mode),
+        mChangeRate(changeRate),
+        mCurrentAlpha(mode == FADE_IN ? 0.0f : 1.0f),
+        mTargetAlpha(mode == FADE_IN ? targetAlpha : 0.0f)
+    {
+        // Ensure visibility. This is independant of whether we're fading in or out.
+        mWindow->getWindow()->setVisible(true);
+        mWindow->getWindow()->setAlpha(mCurrentAlpha);
+    }
+
+    bool WindowFadeJob::execute(Real time)
+    {
+        mCurrentAlpha += time * mChangeRate * Math::Sign(mTargetAlpha - mCurrentAlpha);
+
+        // Are we done now?
+        if ((mMode == FADE_IN && mCurrentAlpha >= mTargetAlpha) ||
+            (mMode != FADE_IN && mCurrentAlpha <= mTargetAlpha))
+        {
+            discard();
+            return true;
+        }
+        mWindow->getWindow()->setAlpha(mCurrentAlpha);
+
+        return false;
+    }
+
+    void WindowFadeJob::discard()
+    {
+        mWindow->getWindow()->setAlpha(mTargetAlpha);
+        mWindow->getWindow()->setVisible(mMode == FADE_IN ? true : false);
+        if (mMode == FADE_OUT_AND_DESTROY)
+        {
+            WindowManager::getSingleton().destroyWindow(mWindow);
+        }
+    }
+}

Modified: rl/trunk/engine/ui/src/WindowManager.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowManager.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/src/WindowManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -21,7 +21,6 @@
 #include "Exception.h"
 #include "GameLoop.h"
 #include "UiSubsystem.h"
-#include "WindowUpdater.h"
 
 template<> rl::WindowManager* Ogre::Singleton<rl::WindowManager>::ms_Singleton = 0;
 
@@ -31,15 +30,10 @@
 
 	WindowManager::WindowManager()
 	{
-		mWindowUpdater = new WindowUpdater();
-        GameLoop::getSingleton().addTask(mWindowUpdater, GameLoop::TG_GRAPHICS);
-		//mWindowUpdater->setPaused(true);
 	}
 
 	WindowManager::~WindowManager()
 	{
-		GameLoop::getSingleton().removeTask(mWindowUpdater);
-		delete mWindowUpdater;
 	}
 	
 	void WindowManager::registerWindow(CeGuiWindow* window)
@@ -47,20 +41,14 @@
 		mWindowList.push_back(window);
 	}
 
-	bool WindowManager::destroyWindow(CeGuiWindow* window)
+	void WindowManager::destroyWindow(CeGuiWindow* window)
 	{
-		mWindowUpdater->fadeOut(window, true);
-		return true;
-	}
-
-	void WindowManager::_doDestroyWindow(CeGuiWindow* window)
-	{
 		mWindowList.remove(window);
 		window->getWindow()->hide();
 		CeGuiWindow::getRoot()->removeChildWindow(window->getWindow());
 		CEGUI::WindowManager::getSingleton().destroyWindow(window->getWindow());
 
-		//FIXME: memory leak, aber destroyWindow macht sonst Probleme (heap corruption)
+		///@todo memory leak, aber destroyWindow macht sonst Probleme (heap corruption)
 		//delete window;		
 	}
 
@@ -100,25 +88,4 @@
 	{
 		return Ogre::Singleton<WindowManager>::getSingletonPtr();
 	}
-
-	void WindowManager::_fadeIn(CeGuiWindow* window, float targetAlpha)
-	{
-		mWindowUpdater->fadeIn(window, targetAlpha);
-	}
-
-	void WindowManager::_fadeOut(CeGuiWindow* window, bool destroy)
-	{
-		mWindowUpdater->fadeOut(window, destroy);
-	}
-
-	void WindowManager::_fadeInOut(CeGuiWindow* window, Ogre::Real timeFade, 
-		Ogre::Real timeHold, bool destroy)
-	{
-		mWindowUpdater->fadeInOut(window, timeFade, timeHold, destroy);
-	}
-
-	void WindowManager::_moveOutLeft(CeGuiWindow* window, Ogre::Real time, bool destroy)
-	{
-		mWindowUpdater->moveOutLeft(window, time, destroy);
-	}
 }

Deleted: rl/trunk/engine/ui/src/WindowUpdater.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowUpdater.cpp	2007-01-30 20:08:03 UTC (rev 3014)
+++ rl/trunk/engine/ui/src/WindowUpdater.cpp	2007-02-01 23:12:57 UTC (rev 3015)
@@ -1,330 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-#include "CeGuiWindow.h"
-#include "CeGuiHelper.h"
-#include "CoreSubsystem.h"
-#include "Exception.h"
-#include "WindowManager.h"
-#include "WindowUpdater.h"
-
-using namespace CEGUI;
-
-const float rl::WindowFadeTask::DEFAULT_RATE = 1.0f / 0.25f; // fade time 250ms
-
-namespace rl {
-
-	WindowUpdateTask::WindowUpdateTask(
-		CeGuiWindow* window, 
-		WindowUpdateTask::WindowUpdateAction action)
-	:	mWindow(window),
-		mAction(action)
-	{
-        mCurrentPoint = mWindow->getWindow()->getPixelRect().getPosition();
-		mCurrentAlpha = mWindow->getWindow()->getAlpha();
-	}
-
-	WindowMoveTask::WindowMoveTask(		
-		CeGuiWindow* window, Ogre::Real time, 
-		WindowUpdateTask::WindowUpdateAction action, 
-		int targetX, int targetY)
-	:	WindowUpdateTask(window, action),
-		mTargetPoint(targetX, targetY)
-	{
-		CEGUI::Point delta = mTargetPoint - mWindow->getWindow()->getPixelRect().getPosition();
-		mRatePoint = CEGUI::Point(delta.d_x / mTime, delta.d_y / mTime);
-	}
-
-	void WindowMoveTask::run(Ogre::Real elapsedTime)
-	{
-		mTime -= elapsedTime;
-
-		if (mTime > 0)
-		{
-			mCurrentPoint += CEGUI::Point(mRatePoint.d_x * elapsedTime, mRatePoint.d_y * elapsedTime);
-		}
-		else if (mTime <= 0)
-		{
-			mTime = 0;
-			mCurrentPoint = mTargetPoint;
-			mWindow->setFading(false);
-		}
-	}
-
-	bool WindowMoveTask::isFinished() const
-	{
-		return mTime <= 0;
-	}
-
-	WindowFadeTask::WindowFadeTask(CeGuiWindow* window,
-		WindowUpdateAction action, Ogre::Real targetAlpha)
-	:	WindowUpdateTask(window, action),
-		mTargetAlpha(targetAlpha),
-		mRate(DEFAULT_RATE)
-	{
-	}
-
-	void WindowFadeTask::run(Ogre::Real elapsedTime)
-	{
-		if (getAction() == WND_SHOW)
-		{
-			if (mCurrentAlpha < mTargetAlpha)
-			{
-				mCurrentAlpha += mRate * elapsedTime;
-			}
-
-			if (mCurrentAlpha >= mTargetAlpha)
-			{
-				mCurrentAlpha = mTargetAlpha;
-				mWindow->setFading(false);
-			}
-		}
-		else if (getAction() == WND_HIDE || getAction() == WND_DESTROY)
-		{
-			if (mCurrentAlpha > mTargetAlpha)
-			{
-				mCurrentAlpha -= mRate * elapsedTime;
-			}
-			
-			if (mCurrentAlpha <= mTargetAlpha)
-			{
-				mCurrentAlpha = mTargetAlpha;
-				mWindow->setFading(false);
-			}
-		}
-
-		LOG_DEBUG(Logger::UI, 
-			mWindow->getName()
-			+ " Curr: "
-			+ Ogre::StringConverter::toString(mCurrentAlpha)
-			+ " Target: "
-			+ Ogre::StringConverter::toString(mTargetAlpha));
-
-	}
-
-	bool WindowFadeTask::isFinished() const
-	{
-		return mCurrentAlpha == mTargetAlpha;
-	}
-
-	const CEGUI::Point& WindowUpdateTask::getCurrentPosition() const
-	{
-		return mCurrentPoint;
-	}
-
-	const Ogre::Real& WindowUpdateTask::getCurrentAlpha() const
-	{
-		return mCurrentAlpha;
-	}
-
-	WindowUpdateTask::WindowUpdateAction WindowUpdateTask::getAction() const
-	{
-		return mAction;
-	}
-
-	void WindowUpdateTask::setAction(WindowUpdateTask::WindowUpdateAction action)
-	{
-		mAction = action;
-	}
-
-	CeGuiWindow* WindowUpdateTask::getWindow()
-	{
-		return mWindow;
-	}
-
-   
-	void WindowUpdateTask::setTargetAlpha(const Ogre::Real& alpha)
-	{
-	}
-
-	void WindowFadeTask::setTargetAlpha(const Ogre::Real& alpha)
-	{
-		mTargetAlpha = alpha;
-	}
-
-	WindowFadeInOutTask::WindowFadeInOutTask(
-		CeGuiWindow* window, Ogre::Real timeFade, Ogre::Real timeHold, 
-		WindowUpdateAction action)
-	:	WindowUpdateTask(window, action),
-		mTimeFade(timeFade),
-		mTimeHold(timeHold),
-		mTime(2*timeFade + timeHold)
-	{
-		mRateAlpha = window->getNormalAlpha() / mTimeFade;
-	}
-
-	void WindowFadeInOutTask::run(Ogre::Real elapsedTime)
-	{
-		mTime -= elapsedTime;
-
-		if (mTime > mTimeFade + mTimeHold)
-		{
-			mCurrentAlpha += mRateAlpha * elapsedTime;
-		}
-		else if (mTime > mTimeHold)
-		{
-			mCurrentAlpha = mWindow->getNormalAlpha();
-		}
-		else if (mTime > 0)
-		{
-			mCurrentAlpha -= mRateAlpha * elapsedTime;
-		}
-		else if (mTime <= 0)
-		{
-			mTime = 0;
-			mCurrentAlpha = 0.0;
-			mWindow->setFading(false);
-		}
-	}
-
-	bool WindowFadeInOutTask::isFinished() const
-	{
-		return mTime <= 0;
-	}
-
-	void WindowUpdater::run(Ogre::Real elapsedTime)
-	{
-		if (mTasks.empty())
-			return;
-
-		vector<CeGuiWindow*> deleteWindows;
-
-		for (std::set<WindowUpdateTask*>::iterator it = mTasks.begin(); it != mTasks.end();)
-		{
-			WindowUpdateTask* task = *it;
-			task->run(elapsedTime);
-			CeGuiWindow* wnd = task->getWindow();
-            wnd->getWindow()->setPosition(
-                CeGuiHelper::asAbsolute(task->getCurrentPosition()));
-			wnd->getWindow()->setAlpha(task->getCurrentAlpha());
-			if (task->isFinished())
-			{
-				mTasks.erase(it++);
-				switch (task->getAction())
-				{
-				case WindowUpdateTask::WND_DESTROY:
-					WindowManager::getSingleton()._doDestroyWindow(wnd);
-					break;
-				case WindowUpdateTask::WND_HIDE:
-					wnd->windowHid();
-					wnd->getWindow()->hide();
-					wnd->getWindow()->setAlpha(wnd->getNormalAlpha());
-					break;
-				}
-				wnd->_setUpdateTask(NULL);
-				delete task;
-			}
-			else
-			{
-				++it;
-			}
-		}
-	}
-
-	void WindowUpdater::fadeIn(CeGuiWindow* window, Ogre::Real targetAlpha)
-	{
-		if (window == NULL)
-			Throw(NullPointerException, "window  argument is NULL");
-
-		if (window->_getUpdateTask() == NULL)
-		{
-			WindowUpdateTask* task = new WindowFadeTask(
-					window, 
-					WindowUpdateTask::WND_SHOW, 
-					targetAlpha);
-			mTasks.insert(task);
-			window->_setUpdateTask(task);
-		}
-		else
-		{
-			WindowUpdateTask* task  = window->_getUpdateTask();
-			task->setTargetAlpha(targetAlpha);
-			task->setAction(WindowUpdateTask::WND_SHOW);			
-		}
-
-		window->getWindow()->setVisible(true);
-		window->getWindow()->setAlpha(0.0);
-		window->setFading(true);
-	}
-
-	void WindowUpdater::fadeOut(CeGuiWindow* window, bool destroy)
-	{
-		if (window == NULL)
-			Throw(NullPointerException, "window  argument is NULL");
-
-		if (window->_getUpdateTask() == NULL)
-		{
-			WindowUpdateTask* task = new WindowFadeTask(
-					window, 
-					destroy 
-						? WindowUpdateTask::WND_DESTROY 
-						: WindowUpdateTask::WND_HIDE, 
-					0.0);
-			mTasks.insert(task);
-			window->_setUpdateTask(task);
-		}
-		else
-		{
-			WindowUpdateTask* task  = window->_getUpdateTask();
-			task->setTargetAlpha(0.0);
-			task->setAction(
-				destroy ? WindowUpdateTask::WND_DESTROY 
-						: WindowUpdateTask::WND_HIDE);
-		}
-		window->setFading(true);
-	}
-
-	void WindowUpdater::fadeInOut(rl::CeGuiWindow *window, Ogre::Real timeFade, 
-		Ogre::Real timeHold, bool destroy)
-	{
-		if (window == NULL)
-			Throw(NullPointerException, "window  argument is NULL");
-
-		WindowUpdateTask* task = new WindowFadeInOutTask(
-				window, 
-				timeFade, timeHold, 
-				destroy ? WindowUpdateTask::WND_DESTROY : WindowUpdateTask::WND_HIDE);
-		mTasks.insert(task);
-		window->setFading(true);
-		window->_setUpdateTask(task);
-	}
-
-	void WindowUpdater::moveOutLeft(CeGuiWindow* window, Ogre::Real time, bool destroy)
-	{
-		if (window == NULL)
-			Throw(NullPointerException, "window  argument is NULL");
-
-		CEGUI::Window* wnd = window->getWindow();
-		WindowUpdateTask* task = new WindowMoveTask(
-				window, 
-				time,
-				destroy ? WindowUpdateTask::WND_DESTROY : WindowUpdateTask::WND_HIDE, 
-                -wnd->getPixelSize().d_width, 
-                wnd->getPixelRect().getPosition().d_y);
-		mTasks.insert(task);
-		window->setFading(true);
-		window->_setUpdateTask(task);
-	}
-
-     const Ogre::String& WindowUpdater::getName() const
-    {
-        static Ogre::String NAME = "WindowUpdater";
-
-        return NAME;
-    }
-
-
-}



From tanis at mail.berlios.de  Fri Feb  2 00:43:46 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Fri, 2 Feb 2007 00:43:46 +0100
Subject: [Dsa-hl-svn] r3016 - in rl/trunk: engine/common/include
	engine/common/src engine/core/include
	engine/core/include/nulldriver engine/core/src
	engine/core/src/nulldriver engine/rules/include
	engine/rules/src engine/script/include engine/script/src
	engine/script/swig engine/startup/src engine/ui/include
	engine/ui/src engine/uicomponents/include
	engine/uicomponents/src plugins/fmod4driver/include
	plugins/fmod4driver/src plugins/openaldriver/include
	plugins/openaldriver/src
Message-ID: <200702012343.l11NhkrR011826@sheep.berlios.de>

Author: tanis
Date: 2007-02-02 00:38:57 +0100 (Fri, 02 Feb 2007)
New Revision: 3016

Modified:
   rl/trunk/engine/common/include/CommonPrerequisites.h
   rl/trunk/engine/common/include/ConfigFile.h
   rl/trunk/engine/common/include/EventCaster.h
   rl/trunk/engine/common/include/EventListener.h
   rl/trunk/engine/common/include/EventObject.h
   rl/trunk/engine/common/include/EventSource.h
   rl/trunk/engine/common/include/Exception.h
   rl/trunk/engine/common/include/FixRubyHeaders.h
   rl/trunk/engine/common/include/LinkedPlaylist.h
   rl/trunk/engine/common/include/Logger.h
   rl/trunk/engine/common/include/OgreXercesInput.h
   rl/trunk/engine/common/include/PauseObject.h
   rl/trunk/engine/common/include/Playlist.h
   rl/trunk/engine/common/include/PlaylistEvent.h
   rl/trunk/engine/common/include/PlaylistObject.h
   rl/trunk/engine/common/include/Properties.h
   rl/trunk/engine/common/include/Property.h
   rl/trunk/engine/common/include/PropertyReader.h
   rl/trunk/engine/common/include/RastullahPrerequisites.h
   rl/trunk/engine/common/include/ScriptWrapper.h
   rl/trunk/engine/common/include/SimplePlaylist.h
   rl/trunk/engine/common/include/Tripel.h
   rl/trunk/engine/common/include/XmlHelper.h
   rl/trunk/engine/common/include/XmlResource.h
   rl/trunk/engine/common/include/XmlResourceManager.h
   rl/trunk/engine/common/src/ConfigFile.cpp
   rl/trunk/engine/common/src/EventObject.cpp
   rl/trunk/engine/common/src/EventSource.cpp
   rl/trunk/engine/common/src/LinkedPlaylist.cpp
   rl/trunk/engine/common/src/Logger.cpp
   rl/trunk/engine/common/src/OgreXercesInput.cpp
   rl/trunk/engine/common/src/PauseObject.cpp
   rl/trunk/engine/common/src/Playlist.cpp
   rl/trunk/engine/common/src/PlaylistEvent.cpp
   rl/trunk/engine/common/src/PlaylistObject.cpp
   rl/trunk/engine/common/src/Properties.cpp
   rl/trunk/engine/common/src/Property.cpp
   rl/trunk/engine/common/src/PropertyReader.cpp
   rl/trunk/engine/common/src/ScriptWrapper.cpp
   rl/trunk/engine/common/src/SimplePlaylist.cpp
   rl/trunk/engine/common/src/XmlHelper.cpp
   rl/trunk/engine/common/src/XmlResource.cpp
   rl/trunk/engine/common/src/XmlResourceManager.cpp
   rl/trunk/engine/core/include/Actor.h
   rl/trunk/engine/core/include/ActorControlledObject.h
   rl/trunk/engine/core/include/ActorManager.h
   rl/trunk/engine/core/include/AnimationListener.h
   rl/trunk/engine/core/include/AnimationManager.h
   rl/trunk/engine/core/include/BaseAnimation.h
   rl/trunk/engine/core/include/BoxPrimitive.h
   rl/trunk/engine/core/include/CameraObject.h
   rl/trunk/engine/core/include/ConfigurationManager.h
   rl/trunk/engine/core/include/ContentModule.h
   rl/trunk/engine/core/include/CoreEvents.h
   rl/trunk/engine/core/include/CorePrerequisites.h
   rl/trunk/engine/core/include/CoreSubsystem.h
   rl/trunk/engine/core/include/DebugVisualisable.h
   rl/trunk/engine/core/include/DebugVisualsManager.h
   rl/trunk/engine/core/include/DotSceneLoader.h
   rl/trunk/engine/core/include/DotSceneOctreeWorld.h
   rl/trunk/engine/core/include/FadeAnimation.h
   rl/trunk/engine/core/include/GameAreaEvent.h
   rl/trunk/engine/core/include/GameAreaEventSource.h
   rl/trunk/engine/core/include/GameAreaListener.h
   rl/trunk/engine/core/include/GameAreaTypes.h
   rl/trunk/engine/core/include/GameEventManager.h
   rl/trunk/engine/core/include/GameLoop.h
   rl/trunk/engine/core/include/Job.h
   rl/trunk/engine/core/include/JobListener.h
   rl/trunk/engine/core/include/JobScheduler.h
   rl/trunk/engine/core/include/LightObject.h
   rl/trunk/engine/core/include/LineSetPrimitive.h
   rl/trunk/engine/core/include/ListenerMovable.h
   rl/trunk/engine/core/include/ListenerObject.h
   rl/trunk/engine/core/include/MeshAnimation.h
   rl/trunk/engine/core/include/MeshObject.h
   rl/trunk/engine/core/include/ParticleSystemObject.h
   rl/trunk/engine/core/include/PhysicalObject.h
   rl/trunk/engine/core/include/PhysicalThing.h
   rl/trunk/engine/core/include/PhysicsContactListener.h
   rl/trunk/engine/core/include/PhysicsGenericContactCallback.h
   rl/trunk/engine/core/include/PhysicsManager.h
   rl/trunk/engine/core/include/PhysicsMaterialRaycast.h
   rl/trunk/engine/core/include/PrimitiveObject.h
   rl/trunk/engine/core/include/RubyInterpreter.h
   rl/trunk/engine/core/include/SceneQuery.h
   rl/trunk/engine/core/include/Sound.h
   rl/trunk/engine/core/include/SoundDriver.h
   rl/trunk/engine/core/include/SoundEvents.h
   rl/trunk/engine/core/include/SoundManager.h
   rl/trunk/engine/core/include/SoundObject.h
   rl/trunk/engine/core/include/SoundResource.h
   rl/trunk/engine/core/include/TrackAnimation.h
   rl/trunk/engine/core/include/World.h
   rl/trunk/engine/core/include/nulldriver/NullDriver.h
   rl/trunk/engine/core/include/nulldriver/NullListener.h
   rl/trunk/engine/core/include/nulldriver/NullSound.h
   rl/trunk/engine/core/src/Actor.cpp
   rl/trunk/engine/core/src/ActorControlledObject.cpp
   rl/trunk/engine/core/src/ActorManager.cpp
   rl/trunk/engine/core/src/AnimationListener.cpp
   rl/trunk/engine/core/src/AnimationManager.cpp
   rl/trunk/engine/core/src/BaseAnimation.cpp
   rl/trunk/engine/core/src/BoxPrimitive.cpp
   rl/trunk/engine/core/src/CameraObject.cpp
   rl/trunk/engine/core/src/ConfigurationManager.cpp
   rl/trunk/engine/core/src/ContentModule.cpp
   rl/trunk/engine/core/src/CoreEvents.cpp
   rl/trunk/engine/core/src/CoreSubsystem.cpp
   rl/trunk/engine/core/src/DebugVisualisable.cpp
   rl/trunk/engine/core/src/DebugVisualsManager.cpp
   rl/trunk/engine/core/src/DotSceneLoader.cpp
   rl/trunk/engine/core/src/DotSceneOctreeWorld.cpp
   rl/trunk/engine/core/src/FadeAnimation.cpp
   rl/trunk/engine/core/src/GameAreaEvent.cpp
   rl/trunk/engine/core/src/GameAreaEventSource.cpp
   rl/trunk/engine/core/src/GameAreaListener.cpp
   rl/trunk/engine/core/src/GameAreaTypes.cpp
   rl/trunk/engine/core/src/GameEventManager.cpp
   rl/trunk/engine/core/src/GameLoop.cpp
   rl/trunk/engine/core/src/Job.cpp
   rl/trunk/engine/core/src/JobScheduler.cpp
   rl/trunk/engine/core/src/LightObject.cpp
   rl/trunk/engine/core/src/LineSetPrimitive.cpp
   rl/trunk/engine/core/src/ListenerMovable.cpp
   rl/trunk/engine/core/src/ListenerObject.cpp
   rl/trunk/engine/core/src/MeshAnimation.cpp
   rl/trunk/engine/core/src/MeshObject.cpp
   rl/trunk/engine/core/src/ParticleSystemObject.cpp
   rl/trunk/engine/core/src/PhysicalThing.cpp
   rl/trunk/engine/core/src/PhysicsContactListener.cpp
   rl/trunk/engine/core/src/PhysicsGenericContactCallback.cpp
   rl/trunk/engine/core/src/PhysicsManager.cpp
   rl/trunk/engine/core/src/PhysicsMaterialRaycast.cpp
   rl/trunk/engine/core/src/PrimitiveObject.cpp
   rl/trunk/engine/core/src/RubyInterpreter.cpp
   rl/trunk/engine/core/src/SceneQuery.cpp
   rl/trunk/engine/core/src/Sound.cpp
   rl/trunk/engine/core/src/SoundDriver.cpp
   rl/trunk/engine/core/src/SoundEvents.cpp
   rl/trunk/engine/core/src/SoundManager.cpp
   rl/trunk/engine/core/src/SoundObject.cpp
   rl/trunk/engine/core/src/SoundResource.cpp
   rl/trunk/engine/core/src/TrackAnimation.cpp
   rl/trunk/engine/core/src/World.cpp
   rl/trunk/engine/core/src/nulldriver/NullDriver.cpp
   rl/trunk/engine/core/src/nulldriver/NullListener.cpp
   rl/trunk/engine/core/src/nulldriver/NullSound.cpp
   rl/trunk/engine/rules/include/Action.h
   rl/trunk/engine/rules/include/ActionManager.h
   rl/trunk/engine/rules/include/Armor.h
   rl/trunk/engine/rules/include/AtomicEffect.h
   rl/trunk/engine/rules/include/CompositeEffect.h
   rl/trunk/engine/rules/include/Container.h
   rl/trunk/engine/rules/include/Creature.h
   rl/trunk/engine/rules/include/Date.h
   rl/trunk/engine/rules/include/DsaDataLoader.h
   rl/trunk/engine/rules/include/DsaManager.h
   rl/trunk/engine/rules/include/Effect.h
   rl/trunk/engine/rules/include/EffectManager.h
   rl/trunk/engine/rules/include/Eigenschaft.h
   rl/trunk/engine/rules/include/EigenschaftenStateSet.h
   rl/trunk/engine/rules/include/GameObject.h
   rl/trunk/engine/rules/include/GameObjectManager.h
   rl/trunk/engine/rules/include/GameObjectProxy.h
   rl/trunk/engine/rules/include/GameObjectState.h
   rl/trunk/engine/rules/include/Inventory.h
   rl/trunk/engine/rules/include/Item.h
   rl/trunk/engine/rules/include/JournalEntry.h
   rl/trunk/engine/rules/include/Kampftechnik.h
   rl/trunk/engine/rules/include/ObjectStateChangeEvent.h
   rl/trunk/engine/rules/include/ObjectStateChangeEventSource.h
   rl/trunk/engine/rules/include/ObjectStateChangeListener.h
   rl/trunk/engine/rules/include/Person.h
   rl/trunk/engine/rules/include/Quest.h
   rl/trunk/engine/rules/include/QuestBook.h
   rl/trunk/engine/rules/include/QuestEvent.h
   rl/trunk/engine/rules/include/QuestListener.h
   rl/trunk/engine/rules/include/RulesPrerequisites.h
   rl/trunk/engine/rules/include/RulesSubsystem.h
   rl/trunk/engine/rules/include/Slot.h
   rl/trunk/engine/rules/include/SonderfertigkeitenStateSet.h
   rl/trunk/engine/rules/include/StateSet.h
   rl/trunk/engine/rules/include/Talent.h
   rl/trunk/engine/rules/include/TalentStateSet.h
   rl/trunk/engine/rules/include/TimerEvent.h
   rl/trunk/engine/rules/include/TimerEventSource.h
   rl/trunk/engine/rules/include/TimerListener.h
   rl/trunk/engine/rules/include/TimerManager.h
   rl/trunk/engine/rules/include/Weapon.h
   rl/trunk/engine/rules/include/ZauberStateSet.h
   rl/trunk/engine/rules/src/Action.cpp
   rl/trunk/engine/rules/src/ActionManager.cpp
   rl/trunk/engine/rules/src/Armor.cpp
   rl/trunk/engine/rules/src/AtomicEffect.cpp
   rl/trunk/engine/rules/src/CompositeEffect.cpp
   rl/trunk/engine/rules/src/Container.cpp
   rl/trunk/engine/rules/src/Creature.cpp
   rl/trunk/engine/rules/src/Date.cpp
   rl/trunk/engine/rules/src/DsaDataLoader.cpp
   rl/trunk/engine/rules/src/DsaManager.cpp
   rl/trunk/engine/rules/src/Effect.cpp
   rl/trunk/engine/rules/src/EffectManager.cpp
   rl/trunk/engine/rules/src/Eigenschaft.cpp
   rl/trunk/engine/rules/src/EigenschaftenStateSet.cpp
   rl/trunk/engine/rules/src/GameObject.cpp
   rl/trunk/engine/rules/src/GameObjectManager.cpp
   rl/trunk/engine/rules/src/GameObjectProxy.cpp
   rl/trunk/engine/rules/src/Inventory.cpp
   rl/trunk/engine/rules/src/Item.cpp
   rl/trunk/engine/rules/src/JournalEntry.cpp
   rl/trunk/engine/rules/src/Kampftechnik.cpp
   rl/trunk/engine/rules/src/ObjectStateChangeEvent.cpp
   rl/trunk/engine/rules/src/ObjectStateChangeEventSource.cpp
   rl/trunk/engine/rules/src/ObjectStateChangeListener.cpp
   rl/trunk/engine/rules/src/Person.cpp
   rl/trunk/engine/rules/src/Quest.cpp
   rl/trunk/engine/rules/src/QuestBook.cpp
   rl/trunk/engine/rules/src/QuestEvent.cpp
   rl/trunk/engine/rules/src/QuestListener.cpp
   rl/trunk/engine/rules/src/RulesSubsystem.cpp
   rl/trunk/engine/rules/src/Slot.cpp
   rl/trunk/engine/rules/src/SonderfertigkeitenStateSet.cpp
   rl/trunk/engine/rules/src/StateSet.cpp
   rl/trunk/engine/rules/src/Talent.cpp
   rl/trunk/engine/rules/src/TalentStateSet.cpp
   rl/trunk/engine/rules/src/TimerEvent.cpp
   rl/trunk/engine/rules/src/TimerEventSource.cpp
   rl/trunk/engine/rules/src/TimerListener.cpp
   rl/trunk/engine/rules/src/TimerManager.cpp
   rl/trunk/engine/rules/src/Weapon.cpp
   rl/trunk/engine/rules/src/ZauberStateSet.cpp
   rl/trunk/engine/script/include/ScriptObjectMarker.h
   rl/trunk/engine/script/include/ScriptPrerequisites.h
   rl/trunk/engine/script/include/ScriptSubsystem.h
   rl/trunk/engine/script/src/ScriptObjectMarker.cpp
   rl/trunk/engine/script/src/ScriptSubsystem.cpp
   rl/trunk/engine/script/swig/TypeMaps.i
   rl/trunk/engine/script/swig/TypeOgreColourValue.inc
   rl/trunk/engine/script/swig/TypeOgreQuaternion.inc
   rl/trunk/engine/script/swig/TypeOgreRadian.inc
   rl/trunk/engine/script/swig/TypeOgreReal.inc
   rl/trunk/engine/script/swig/TypeOgreString.inc
   rl/trunk/engine/script/swig/TypeOgreStringVector.inc
   rl/trunk/engine/script/swig/TypeOgreVector3.inc
   rl/trunk/engine/script/swig/TypeRlCeGuiString.inc
   rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.inc
   rl/trunk/engine/script/swig/TypeRlProperty.inc
   rl/trunk/engine/script/swig/TypeRlTripelInt.inc
   rl/trunk/engine/script/swig/TypeStdPairIntInt.inc
   rl/trunk/engine/startup/src/RastullahMain.cpp
   rl/trunk/engine/ui/include/AboutWindow.h
   rl/trunk/engine/ui/include/ActionChoiceWindow.h
   rl/trunk/engine/ui/include/CeGuiHelper.h
   rl/trunk/engine/ui/include/CeGuiWindow.h
   rl/trunk/engine/ui/include/CharacterController.h
   rl/trunk/engine/ui/include/CharacterSheetWindow.h
   rl/trunk/engine/ui/include/CharacterStateWindow.h
   rl/trunk/engine/ui/include/CloseConfirmationWindow.h
   rl/trunk/engine/ui/include/CommandMapper.h
   rl/trunk/engine/ui/include/CommandMapperWindow.h
   rl/trunk/engine/ui/include/Console.h
   rl/trunk/engine/ui/include/CutsceneCharacterController.h
   rl/trunk/engine/ui/include/DataLoadingProgressWindow.h
   rl/trunk/engine/ui/include/DebugWindow.h
   rl/trunk/engine/ui/include/DialogCharacterController.h
   rl/trunk/engine/ui/include/DialogWindow.h
   rl/trunk/engine/ui/include/FreeFlightCharacterController.h
   rl/trunk/engine/ui/include/GameLoggerWindow.h
   rl/trunk/engine/ui/include/InGameMenuWindow.h
   rl/trunk/engine/ui/include/InfoPopup.h
   rl/trunk/engine/ui/include/InputManager.h
   rl/trunk/engine/ui/include/InventoryWindow.h
   rl/trunk/engine/ui/include/JournalWindow.h
   rl/trunk/engine/ui/include/LogWindow.h
   rl/trunk/engine/ui/include/MainMenuEngineWindow.h
   rl/trunk/engine/ui/include/MainMenuWindow.h
   rl/trunk/engine/ui/include/MessageWindow.h
   rl/trunk/engine/ui/include/MovementCharacterController.h
   rl/trunk/engine/ui/include/ObjectDescriptionWindow.h
   rl/trunk/engine/ui/include/PlaylistWindow.h
   rl/trunk/engine/ui/include/Selector.h
   rl/trunk/engine/ui/include/SoundConfig.h
   rl/trunk/engine/ui/include/SoundDriverConfigComponent.h
   rl/trunk/engine/ui/include/SubtitleWindow.h
   rl/trunk/engine/ui/include/UiPrerequisites.h
   rl/trunk/engine/ui/include/UiSubsystem.h
   rl/trunk/engine/ui/include/VanityModeCharacterController.h
   rl/trunk/engine/ui/include/WindowFactory.h
   rl/trunk/engine/ui/include/WindowFadeJob.h
   rl/trunk/engine/ui/include/WindowManager.h
   rl/trunk/engine/ui/src/AboutWindow.cpp
   rl/trunk/engine/ui/src/ActionChoiceWindow.cpp
   rl/trunk/engine/ui/src/CeGuiWindow.cpp
   rl/trunk/engine/ui/src/CharacterController.cpp
   rl/trunk/engine/ui/src/CharacterSheetWindow.cpp
   rl/trunk/engine/ui/src/CharacterStateWindow.cpp
   rl/trunk/engine/ui/src/CloseConfirmationWindow.cpp
   rl/trunk/engine/ui/src/CommandMapper.cpp
   rl/trunk/engine/ui/src/CommandMapperWindow.cpp
   rl/trunk/engine/ui/src/Console.cpp
   rl/trunk/engine/ui/src/CutsceneCharacterController.cpp
   rl/trunk/engine/ui/src/DataLoadingProgressWindow.cpp
   rl/trunk/engine/ui/src/DebugWindow.cpp
   rl/trunk/engine/ui/src/DialogCharacterController.cpp
   rl/trunk/engine/ui/src/FreeFlightCharacterController.cpp
   rl/trunk/engine/ui/src/GameLoggerWindow.cpp
   rl/trunk/engine/ui/src/InGameMenuWindow.cpp
   rl/trunk/engine/ui/src/InfoPopup.cpp
   rl/trunk/engine/ui/src/InputManager.cpp
   rl/trunk/engine/ui/src/InventoryWindow.cpp
   rl/trunk/engine/ui/src/JournalWindow.cpp
   rl/trunk/engine/ui/src/LogWindow.cpp
   rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp
   rl/trunk/engine/ui/src/MainMenuWindow.cpp
   rl/trunk/engine/ui/src/MessageWindow.cpp
   rl/trunk/engine/ui/src/MovementCharacterController.cpp
   rl/trunk/engine/ui/src/ObjectDescriptionWindow.cpp
   rl/trunk/engine/ui/src/PlaylistWindow.cpp
   rl/trunk/engine/ui/src/Selector.cpp
   rl/trunk/engine/ui/src/SoundConfig.cpp
   rl/trunk/engine/ui/src/SoundDriverConfigComponent.cpp
   rl/trunk/engine/ui/src/SubtitleWindow.cpp
   rl/trunk/engine/ui/src/UiSubsystem.cpp
   rl/trunk/engine/ui/src/VanityModeCharacterController.cpp
   rl/trunk/engine/ui/src/WindowFactory.cpp
   rl/trunk/engine/ui/src/WindowFadeJob.cpp
   rl/trunk/engine/ui/src/WindowManager.cpp
   rl/trunk/engine/uicomponents/include/UiComponentsPrerequisites.h
   rl/trunk/engine/uicomponents/src/ListboxImageItem.cpp
   rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h
   rl/trunk/plugins/fmod4driver/include/Fmod4DriverPrerequisites.h
   rl/trunk/plugins/fmod4driver/include/Fmod4Listener.h
   rl/trunk/plugins/fmod4driver/include/Fmod4Sound.h
   rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp
   rl/trunk/plugins/fmod4driver/src/Fmod4DriverDllMain.cpp
   rl/trunk/plugins/fmod4driver/src/Fmod4Listener.cpp
   rl/trunk/plugins/fmod4driver/src/Fmod4Sound.cpp
   rl/trunk/plugins/openaldriver/include/OpenALConfig.h
   rl/trunk/plugins/openaldriver/include/OpenALDriver.h
   rl/trunk/plugins/openaldriver/include/OpenALDriverPrerequisites.h
   rl/trunk/plugins/openaldriver/include/OpenALListener.h
   rl/trunk/plugins/openaldriver/include/OpenALSound.h
   rl/trunk/plugins/openaldriver/include/OpenALSoundSample.h
   rl/trunk/plugins/openaldriver/include/OpenALSoundStream.h
   rl/trunk/plugins/openaldriver/src/OpenALConfig.cpp
   rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp
   rl/trunk/plugins/openaldriver/src/OpenALDriverDllMain.cpp
   rl/trunk/plugins/openaldriver/src/OpenALListener.cpp
   rl/trunk/plugins/openaldriver/src/OpenALSound.cpp
   rl/trunk/plugins/openaldriver/src/OpenALSoundSample.cpp
   rl/trunk/plugins/openaldriver/src/OpenALSoundStream.cpp
Log:
Updated date in copyright statement.

Modified: rl/trunk/engine/common/include/CommonPrerequisites.h
===================================================================
--- rl/trunk/engine/common/include/CommonPrerequisites.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/CommonPrerequisites.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/ConfigFile.h
===================================================================
--- rl/trunk/engine/common/include/ConfigFile.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/ConfigFile.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/EventCaster.h
===================================================================
--- rl/trunk/engine/common/include/EventCaster.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/EventCaster.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/EventListener.h
===================================================================
--- rl/trunk/engine/common/include/EventListener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/EventListener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/EventObject.h
===================================================================
--- rl/trunk/engine/common/include/EventObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/EventObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/EventSource.h
===================================================================
--- rl/trunk/engine/common/include/EventSource.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/EventSource.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/Exception.h
===================================================================
--- rl/trunk/engine/common/include/Exception.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/Exception.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/FixRubyHeaders.h
===================================================================
--- rl/trunk/engine/common/include/FixRubyHeaders.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/FixRubyHeaders.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/LinkedPlaylist.h
===================================================================
--- rl/trunk/engine/common/include/LinkedPlaylist.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/LinkedPlaylist.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/Logger.h
===================================================================
--- rl/trunk/engine/common/include/Logger.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/Logger.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/OgreXercesInput.h
===================================================================
--- rl/trunk/engine/common/include/OgreXercesInput.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/OgreXercesInput.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/PauseObject.h
===================================================================
--- rl/trunk/engine/common/include/PauseObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/PauseObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /*
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/Playlist.h
===================================================================
--- rl/trunk/engine/common/include/Playlist.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/Playlist.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/PlaylistEvent.h
===================================================================
--- rl/trunk/engine/common/include/PlaylistEvent.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/PlaylistEvent.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/PlaylistObject.h
===================================================================
--- rl/trunk/engine/common/include/PlaylistObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/PlaylistObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/Properties.h
===================================================================
--- rl/trunk/engine/common/include/Properties.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/Properties.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* 
- * (C) 2003-2005. Team Pantheon. www.team-pantheon.de
+ * (C) 2003-2007. Team Pantheon. www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.
@@ -50,17 +50,17 @@
         PropertyMap mProperties;
 	};
 
-    class _RlCommonExport PropertySetPtr :
-        public Ogre::SharedPtr<PropertySet>
-    {
-    public:
-        PropertySetPtr() : Ogre::SharedPtr<PropertySet>() {}
-        explicit PropertySetPtr(PropertySet* rep) : Ogre::SharedPtr<PropertySet>(rep) {}
-        PropertySetPtr(const PropertySetPtr& res) : Ogre::SharedPtr<PropertySet>(res) {}
-    
-    protected:
-        void destroy() { Ogre::SharedPtr<PropertySet>::destroy(); }
-    };
+    class _RlCommonExport PropertySetPtr :
+        public Ogre::SharedPtr<PropertySet>
+    {
+    public:
+        PropertySetPtr() : Ogre::SharedPtr<PropertySet>() {}
+        explicit PropertySetPtr(PropertySet* rep) : Ogre::SharedPtr<PropertySet>(rep) {}
+        PropertySetPtr(const PropertySetPtr& res) : Ogre::SharedPtr<PropertySet>(res) {}
+    
+    protected:
+        void destroy() { Ogre::SharedPtr<PropertySet>::destroy(); }
+    };
 
 }
 

Modified: rl/trunk/engine/common/include/Property.h
===================================================================
--- rl/trunk/engine/common/include/Property.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/Property.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* 
- * (C) 2003-2005. Team Pantheon. www.team-pantheon.de
+ * (C) 2003-2007. Team Pantheon. www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/common/include/PropertyReader.h
===================================================================
--- rl/trunk/engine/common/include/PropertyReader.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/PropertyReader.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/RastullahPrerequisites.h
===================================================================
--- rl/trunk/engine/common/include/RastullahPrerequisites.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/RastullahPrerequisites.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/ScriptWrapper.h
===================================================================
--- rl/trunk/engine/common/include/ScriptWrapper.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/ScriptWrapper.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/SimplePlaylist.h
===================================================================
--- rl/trunk/engine/common/include/SimplePlaylist.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/SimplePlaylist.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/Tripel.h
===================================================================
--- rl/trunk/engine/common/include/Tripel.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/Tripel.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/XmlHelper.h
===================================================================
--- rl/trunk/engine/common/include/XmlHelper.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/XmlHelper.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/XmlResource.h
===================================================================
--- rl/trunk/engine/common/include/XmlResource.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/XmlResource.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/include/XmlResourceManager.h
===================================================================
--- rl/trunk/engine/common/include/XmlResourceManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/include/XmlResourceManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/ConfigFile.cpp
===================================================================
--- rl/trunk/engine/common/src/ConfigFile.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/ConfigFile.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/EventObject.cpp
===================================================================
--- rl/trunk/engine/common/src/EventObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/EventObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/EventSource.cpp
===================================================================
--- rl/trunk/engine/common/src/EventSource.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/EventSource.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/LinkedPlaylist.cpp
===================================================================
--- rl/trunk/engine/common/src/LinkedPlaylist.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/LinkedPlaylist.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/Logger.cpp
===================================================================
--- rl/trunk/engine/common/src/Logger.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/Logger.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/OgreXercesInput.cpp
===================================================================
--- rl/trunk/engine/common/src/OgreXercesInput.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/OgreXercesInput.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/PauseObject.cpp
===================================================================
--- rl/trunk/engine/common/src/PauseObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/PauseObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /*
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/Playlist.cpp
===================================================================
--- rl/trunk/engine/common/src/Playlist.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/Playlist.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/PlaylistEvent.cpp
===================================================================
--- rl/trunk/engine/common/src/PlaylistEvent.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/PlaylistEvent.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/PlaylistObject.cpp
===================================================================
--- rl/trunk/engine/common/src/PlaylistObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/PlaylistObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/Properties.cpp
===================================================================
--- rl/trunk/engine/common/src/Properties.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/Properties.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* 
- * (C) 2003-2005. Team Pantheon. www.team-pantheon.de
+ * (C) 2003-2007. Team Pantheon. www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/common/src/Property.cpp
===================================================================
--- rl/trunk/engine/common/src/Property.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/Property.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* 
- * (C) 2003-2005. Team Pantheon. www.team-pantheon.de
+ * (C) 2003-2007. Team Pantheon. www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/common/src/PropertyReader.cpp
===================================================================
--- rl/trunk/engine/common/src/PropertyReader.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/PropertyReader.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/ScriptWrapper.cpp
===================================================================
--- rl/trunk/engine/common/src/ScriptWrapper.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/ScriptWrapper.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/SimplePlaylist.cpp
===================================================================
--- rl/trunk/engine/common/src/SimplePlaylist.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/SimplePlaylist.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/XmlHelper.cpp
===================================================================
--- rl/trunk/engine/common/src/XmlHelper.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/XmlHelper.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/XmlResource.cpp
===================================================================
--- rl/trunk/engine/common/src/XmlResource.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/XmlResource.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/common/src/XmlResourceManager.cpp
===================================================================
--- rl/trunk/engine/common/src/XmlResourceManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/common/src/XmlResourceManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/Actor.h
===================================================================
--- rl/trunk/engine/core/include/Actor.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/Actor.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/ActorControlledObject.h
===================================================================
--- rl/trunk/engine/core/include/ActorControlledObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/ActorControlledObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/ActorManager.h
===================================================================
--- rl/trunk/engine/core/include/ActorManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/ActorManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/AnimationListener.h
===================================================================
--- rl/trunk/engine/core/include/AnimationListener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/AnimationListener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/AnimationManager.h
===================================================================
--- rl/trunk/engine/core/include/AnimationManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/AnimationManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/BaseAnimation.h
===================================================================
--- rl/trunk/engine/core/include/BaseAnimation.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/BaseAnimation.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/BoxPrimitive.h
===================================================================
--- rl/trunk/engine/core/include/BoxPrimitive.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/BoxPrimitive.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/CameraObject.h
===================================================================
--- rl/trunk/engine/core/include/CameraObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/CameraObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/ConfigurationManager.h
===================================================================
--- rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/ContentModule.h
===================================================================
--- rl/trunk/engine/core/include/ContentModule.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/ContentModule.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/CoreEvents.h
===================================================================
--- rl/trunk/engine/core/include/CoreEvents.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/CoreEvents.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/CorePrerequisites.h
===================================================================
--- rl/trunk/engine/core/include/CorePrerequisites.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/CorePrerequisites.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/CoreSubsystem.h
===================================================================
--- rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/DebugVisualisable.h
===================================================================
--- rl/trunk/engine/core/include/DebugVisualisable.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/DebugVisualisable.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/DebugVisualsManager.h
===================================================================
--- rl/trunk/engine/core/include/DebugVisualsManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/DebugVisualsManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/DotSceneLoader.h
===================================================================
--- rl/trunk/engine/core/include/DotSceneLoader.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/DotSceneLoader.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/DotSceneOctreeWorld.h
===================================================================
--- rl/trunk/engine/core/include/DotSceneOctreeWorld.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/DotSceneOctreeWorld.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/FadeAnimation.h
===================================================================
--- rl/trunk/engine/core/include/FadeAnimation.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/FadeAnimation.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/GameAreaEvent.h
===================================================================
--- rl/trunk/engine/core/include/GameAreaEvent.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/GameAreaEvent.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/GameAreaEventSource.h
===================================================================
--- rl/trunk/engine/core/include/GameAreaEventSource.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/GameAreaEventSource.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/GameAreaListener.h
===================================================================
--- rl/trunk/engine/core/include/GameAreaListener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/GameAreaListener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/GameAreaTypes.h
===================================================================
--- rl/trunk/engine/core/include/GameAreaTypes.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/GameAreaTypes.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/GameEventManager.h
===================================================================
--- rl/trunk/engine/core/include/GameEventManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/GameEventManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/GameLoop.h
===================================================================
--- rl/trunk/engine/core/include/GameLoop.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/GameLoop.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/Job.h
===================================================================
--- rl/trunk/engine/core/include/Job.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/Job.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/JobListener.h
===================================================================
--- rl/trunk/engine/core/include/JobListener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/JobListener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/JobScheduler.h
===================================================================
--- rl/trunk/engine/core/include/JobScheduler.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/JobScheduler.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/LightObject.h
===================================================================
--- rl/trunk/engine/core/include/LightObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/LightObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/LineSetPrimitive.h
===================================================================
--- rl/trunk/engine/core/include/LineSetPrimitive.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/LineSetPrimitive.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/ListenerMovable.h
===================================================================
--- rl/trunk/engine/core/include/ListenerMovable.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/ListenerMovable.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/ListenerObject.h
===================================================================
--- rl/trunk/engine/core/include/ListenerObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/ListenerObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/core/include/MeshAnimation.h
===================================================================
--- rl/trunk/engine/core/include/MeshAnimation.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/MeshAnimation.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/MeshObject.h
===================================================================
--- rl/trunk/engine/core/include/MeshObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/MeshObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/ParticleSystemObject.h
===================================================================
--- rl/trunk/engine/core/include/ParticleSystemObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/ParticleSystemObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/PhysicalObject.h
===================================================================
--- rl/trunk/engine/core/include/PhysicalObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/PhysicalObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/PhysicalThing.h
===================================================================
--- rl/trunk/engine/core/include/PhysicalThing.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/PhysicalThing.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/PhysicsContactListener.h
===================================================================
--- rl/trunk/engine/core/include/PhysicsContactListener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/PhysicsContactListener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/PhysicsGenericContactCallback.h
===================================================================
--- rl/trunk/engine/core/include/PhysicsGenericContactCallback.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/PhysicsGenericContactCallback.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/PhysicsManager.h
===================================================================
--- rl/trunk/engine/core/include/PhysicsManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/PhysicsManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/PhysicsMaterialRaycast.h
===================================================================
--- rl/trunk/engine/core/include/PhysicsMaterialRaycast.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/PhysicsMaterialRaycast.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/PrimitiveObject.h
===================================================================
--- rl/trunk/engine/core/include/PrimitiveObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/PrimitiveObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/RubyInterpreter.h
===================================================================
--- rl/trunk/engine/core/include/RubyInterpreter.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/RubyInterpreter.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/SceneQuery.h
===================================================================
--- rl/trunk/engine/core/include/SceneQuery.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/SceneQuery.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/Sound.h
===================================================================
--- rl/trunk/engine/core/include/Sound.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/Sound.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/SoundDriver.h
===================================================================
--- rl/trunk/engine/core/include/SoundDriver.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/SoundDriver.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/SoundEvents.h
===================================================================
--- rl/trunk/engine/core/include/SoundEvents.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/SoundEvents.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/SoundManager.h
===================================================================
--- rl/trunk/engine/core/include/SoundManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/SoundManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/SoundObject.h
===================================================================
--- rl/trunk/engine/core/include/SoundObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/SoundObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/SoundResource.h
===================================================================
--- rl/trunk/engine/core/include/SoundResource.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/SoundResource.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/TrackAnimation.h
===================================================================
--- rl/trunk/engine/core/include/TrackAnimation.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/TrackAnimation.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/World.h
===================================================================
--- rl/trunk/engine/core/include/World.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/World.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/nulldriver/NullDriver.h
===================================================================
--- rl/trunk/engine/core/include/nulldriver/NullDriver.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/nulldriver/NullDriver.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/nulldriver/NullListener.h
===================================================================
--- rl/trunk/engine/core/include/nulldriver/NullListener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/nulldriver/NullListener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/include/nulldriver/NullSound.h
===================================================================
--- rl/trunk/engine/core/include/nulldriver/NullSound.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/include/nulldriver/NullSound.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/Actor.cpp
===================================================================
--- rl/trunk/engine/core/src/Actor.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/Actor.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/ActorControlledObject.cpp
===================================================================
--- rl/trunk/engine/core/src/ActorControlledObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/ActorControlledObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/ActorManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ActorManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/ActorManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/AnimationListener.cpp
===================================================================
--- rl/trunk/engine/core/src/AnimationListener.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/AnimationListener.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/AnimationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/AnimationManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/AnimationManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/BaseAnimation.cpp
===================================================================
--- rl/trunk/engine/core/src/BaseAnimation.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/BaseAnimation.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/BoxPrimitive.cpp
===================================================================
--- rl/trunk/engine/core/src/BoxPrimitive.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/BoxPrimitive.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/CameraObject.cpp
===================================================================
--- rl/trunk/engine/core/src/CameraObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/CameraObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/ContentModule.cpp
===================================================================
--- rl/trunk/engine/core/src/ContentModule.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/ContentModule.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/CoreEvents.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreEvents.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/CoreEvents.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/DebugVisualisable.cpp
===================================================================
--- rl/trunk/engine/core/src/DebugVisualisable.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/DebugVisualisable.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/DebugVisualsManager.cpp
===================================================================
--- rl/trunk/engine/core/src/DebugVisualsManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/DebugVisualsManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/DotSceneLoader.cpp
===================================================================
--- rl/trunk/engine/core/src/DotSceneLoader.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/DotSceneLoader.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/DotSceneOctreeWorld.cpp
===================================================================
--- rl/trunk/engine/core/src/DotSceneOctreeWorld.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/DotSceneOctreeWorld.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/FadeAnimation.cpp
===================================================================
--- rl/trunk/engine/core/src/FadeAnimation.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/FadeAnimation.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/GameAreaEvent.cpp
===================================================================
--- rl/trunk/engine/core/src/GameAreaEvent.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/GameAreaEvent.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/GameAreaEventSource.cpp
===================================================================
--- rl/trunk/engine/core/src/GameAreaEventSource.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/GameAreaEventSource.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/GameAreaListener.cpp
===================================================================
--- rl/trunk/engine/core/src/GameAreaListener.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/GameAreaListener.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/GameAreaTypes.cpp
===================================================================
--- rl/trunk/engine/core/src/GameAreaTypes.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/GameAreaTypes.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/GameEventManager.cpp
===================================================================
--- rl/trunk/engine/core/src/GameEventManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/GameEventManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/GameLoop.cpp
===================================================================
--- rl/trunk/engine/core/src/GameLoop.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/GameLoop.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/Job.cpp
===================================================================
--- rl/trunk/engine/core/src/Job.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/Job.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/JobScheduler.cpp
===================================================================
--- rl/trunk/engine/core/src/JobScheduler.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/JobScheduler.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/LightObject.cpp
===================================================================
--- rl/trunk/engine/core/src/LightObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/LightObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/LineSetPrimitive.cpp
===================================================================
--- rl/trunk/engine/core/src/LineSetPrimitive.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/LineSetPrimitive.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/ListenerMovable.cpp
===================================================================
--- rl/trunk/engine/core/src/ListenerMovable.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/ListenerMovable.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/ListenerObject.cpp
===================================================================
--- rl/trunk/engine/core/src/ListenerObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/ListenerObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/MeshAnimation.cpp
===================================================================
--- rl/trunk/engine/core/src/MeshAnimation.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/MeshAnimation.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/MeshObject.cpp
===================================================================
--- rl/trunk/engine/core/src/MeshObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/MeshObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/ParticleSystemObject.cpp
===================================================================
--- rl/trunk/engine/core/src/ParticleSystemObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/ParticleSystemObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/PhysicalThing.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicalThing.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/PhysicalThing.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/PhysicsContactListener.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicsContactListener.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/PhysicsContactListener.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/PhysicsGenericContactCallback.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicsGenericContactCallback.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/PhysicsGenericContactCallback.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/PhysicsManager.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicsManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/PhysicsManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/PhysicsMaterialRaycast.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicsMaterialRaycast.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/PhysicsMaterialRaycast.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/PrimitiveObject.cpp
===================================================================
--- rl/trunk/engine/core/src/PrimitiveObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/PrimitiveObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/RubyInterpreter.cpp
===================================================================
--- rl/trunk/engine/core/src/RubyInterpreter.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/RubyInterpreter.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/SceneQuery.cpp
===================================================================
--- rl/trunk/engine/core/src/SceneQuery.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/SceneQuery.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/Sound.cpp
===================================================================
--- rl/trunk/engine/core/src/Sound.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/Sound.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/SoundDriver.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundDriver.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/SoundDriver.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/SoundEvents.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundEvents.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/SoundEvents.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/SoundManager.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/SoundManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/SoundObject.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/SoundObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/SoundResource.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundResource.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/SoundResource.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/TrackAnimation.cpp
===================================================================
--- rl/trunk/engine/core/src/TrackAnimation.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/TrackAnimation.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/World.cpp
===================================================================
--- rl/trunk/engine/core/src/World.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/World.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/nulldriver/NullDriver.cpp
===================================================================
--- rl/trunk/engine/core/src/nulldriver/NullDriver.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/nulldriver/NullDriver.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/nulldriver/NullListener.cpp
===================================================================
--- rl/trunk/engine/core/src/nulldriver/NullListener.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/nulldriver/NullListener.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/core/src/nulldriver/NullSound.cpp
===================================================================
--- rl/trunk/engine/core/src/nulldriver/NullSound.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/core/src/nulldriver/NullSound.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Action.h
===================================================================
--- rl/trunk/engine/rules/include/Action.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Action.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/ActionManager.h
===================================================================
--- rl/trunk/engine/rules/include/ActionManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/ActionManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Armor.h
===================================================================
--- rl/trunk/engine/rules/include/Armor.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Armor.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/AtomicEffect.h
===================================================================
--- rl/trunk/engine/rules/include/AtomicEffect.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/AtomicEffect.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/CompositeEffect.h
===================================================================
--- rl/trunk/engine/rules/include/CompositeEffect.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/CompositeEffect.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Container.h
===================================================================
--- rl/trunk/engine/rules/include/Container.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Container.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Creature.h
===================================================================
--- rl/trunk/engine/rules/include/Creature.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Creature.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Date.h
===================================================================
--- rl/trunk/engine/rules/include/Date.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Date.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/DsaDataLoader.h
===================================================================
--- rl/trunk/engine/rules/include/DsaDataLoader.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/DsaDataLoader.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/DsaManager.h
===================================================================
--- rl/trunk/engine/rules/include/DsaManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/DsaManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Effect.h
===================================================================
--- rl/trunk/engine/rules/include/Effect.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Effect.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/EffectManager.h
===================================================================
--- rl/trunk/engine/rules/include/EffectManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/EffectManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Eigenschaft.h
===================================================================
--- rl/trunk/engine/rules/include/Eigenschaft.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Eigenschaft.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/EigenschaftenStateSet.h
===================================================================
--- rl/trunk/engine/rules/include/EigenschaftenStateSet.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/EigenschaftenStateSet.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of

Modified: rl/trunk/engine/rules/include/GameObject.h
===================================================================
--- rl/trunk/engine/rules/include/GameObject.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/GameObject.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/GameObjectManager.h
===================================================================
--- rl/trunk/engine/rules/include/GameObjectManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/GameObjectManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/GameObjectProxy.h
===================================================================
--- rl/trunk/engine/rules/include/GameObjectProxy.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/GameObjectProxy.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/GameObjectState.h
===================================================================
--- rl/trunk/engine/rules/include/GameObjectState.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/GameObjectState.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Inventory.h
===================================================================
--- rl/trunk/engine/rules/include/Inventory.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Inventory.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Item.h
===================================================================
--- rl/trunk/engine/rules/include/Item.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Item.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/JournalEntry.h
===================================================================
--- rl/trunk/engine/rules/include/JournalEntry.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/JournalEntry.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Kampftechnik.h
===================================================================
--- rl/trunk/engine/rules/include/Kampftechnik.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Kampftechnik.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/ObjectStateChangeEvent.h
===================================================================
--- rl/trunk/engine/rules/include/ObjectStateChangeEvent.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/ObjectStateChangeEvent.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/ObjectStateChangeEventSource.h
===================================================================
--- rl/trunk/engine/rules/include/ObjectStateChangeEventSource.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/ObjectStateChangeEventSource.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/ObjectStateChangeListener.h
===================================================================
--- rl/trunk/engine/rules/include/ObjectStateChangeListener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/ObjectStateChangeListener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Person.h
===================================================================
--- rl/trunk/engine/rules/include/Person.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Person.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Quest.h
===================================================================
--- rl/trunk/engine/rules/include/Quest.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Quest.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/QuestBook.h
===================================================================
--- rl/trunk/engine/rules/include/QuestBook.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/QuestBook.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/QuestEvent.h
===================================================================
--- rl/trunk/engine/rules/include/QuestEvent.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/QuestEvent.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/QuestListener.h
===================================================================
--- rl/trunk/engine/rules/include/QuestListener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/QuestListener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/RulesPrerequisites.h
===================================================================
--- rl/trunk/engine/rules/include/RulesPrerequisites.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/RulesPrerequisites.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/RulesSubsystem.h
===================================================================
--- rl/trunk/engine/rules/include/RulesSubsystem.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/RulesSubsystem.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Slot.h
===================================================================
--- rl/trunk/engine/rules/include/Slot.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Slot.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/SonderfertigkeitenStateSet.h
===================================================================
--- rl/trunk/engine/rules/include/SonderfertigkeitenStateSet.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/SonderfertigkeitenStateSet.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/StateSet.h
===================================================================
--- rl/trunk/engine/rules/include/StateSet.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/StateSet.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Talent.h
===================================================================
--- rl/trunk/engine/rules/include/Talent.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Talent.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/TalentStateSet.h
===================================================================
--- rl/trunk/engine/rules/include/TalentStateSet.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/TalentStateSet.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/TimerEvent.h
===================================================================
--- rl/trunk/engine/rules/include/TimerEvent.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/TimerEvent.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/TimerEventSource.h
===================================================================
--- rl/trunk/engine/rules/include/TimerEventSource.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/TimerEventSource.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/TimerListener.h
===================================================================
--- rl/trunk/engine/rules/include/TimerListener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/TimerListener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/TimerManager.h
===================================================================
--- rl/trunk/engine/rules/include/TimerManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/TimerManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/Weapon.h
===================================================================
--- rl/trunk/engine/rules/include/Weapon.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/Weapon.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/include/ZauberStateSet.h
===================================================================
--- rl/trunk/engine/rules/include/ZauberStateSet.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/include/ZauberStateSet.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Action.cpp
===================================================================
--- rl/trunk/engine/rules/src/Action.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Action.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/ActionManager.cpp
===================================================================
--- rl/trunk/engine/rules/src/ActionManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/ActionManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Armor.cpp
===================================================================
--- rl/trunk/engine/rules/src/Armor.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Armor.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/AtomicEffect.cpp
===================================================================
--- rl/trunk/engine/rules/src/AtomicEffect.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/AtomicEffect.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/CompositeEffect.cpp
===================================================================
--- rl/trunk/engine/rules/src/CompositeEffect.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/CompositeEffect.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Container.cpp
===================================================================
--- rl/trunk/engine/rules/src/Container.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Container.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Creature.cpp
===================================================================
--- rl/trunk/engine/rules/src/Creature.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Creature.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Date.cpp
===================================================================
--- rl/trunk/engine/rules/src/Date.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Date.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/DsaDataLoader.cpp
===================================================================
--- rl/trunk/engine/rules/src/DsaDataLoader.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/DsaDataLoader.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/DsaManager.cpp
===================================================================
--- rl/trunk/engine/rules/src/DsaManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/DsaManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Effect.cpp
===================================================================
--- rl/trunk/engine/rules/src/Effect.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Effect.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/EffectManager.cpp
===================================================================
--- rl/trunk/engine/rules/src/EffectManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/EffectManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Eigenschaft.cpp
===================================================================
--- rl/trunk/engine/rules/src/Eigenschaft.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Eigenschaft.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/EigenschaftenStateSet.cpp
===================================================================
--- rl/trunk/engine/rules/src/EigenschaftenStateSet.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/EigenschaftenStateSet.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/GameObject.cpp
===================================================================
--- rl/trunk/engine/rules/src/GameObject.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/GameObject.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/GameObjectManager.cpp
===================================================================
--- rl/trunk/engine/rules/src/GameObjectManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/GameObjectManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/GameObjectProxy.cpp
===================================================================
--- rl/trunk/engine/rules/src/GameObjectProxy.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/GameObjectProxy.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Inventory.cpp
===================================================================
--- rl/trunk/engine/rules/src/Inventory.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Inventory.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Item.cpp
===================================================================
--- rl/trunk/engine/rules/src/Item.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Item.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/JournalEntry.cpp
===================================================================
--- rl/trunk/engine/rules/src/JournalEntry.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/JournalEntry.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Kampftechnik.cpp
===================================================================
--- rl/trunk/engine/rules/src/Kampftechnik.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Kampftechnik.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/ObjectStateChangeEvent.cpp
===================================================================
--- rl/trunk/engine/rules/src/ObjectStateChangeEvent.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/ObjectStateChangeEvent.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/ObjectStateChangeEventSource.cpp
===================================================================
--- rl/trunk/engine/rules/src/ObjectStateChangeEventSource.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/ObjectStateChangeEventSource.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/ObjectStateChangeListener.cpp
===================================================================
--- rl/trunk/engine/rules/src/ObjectStateChangeListener.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/ObjectStateChangeListener.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Person.cpp
===================================================================
--- rl/trunk/engine/rules/src/Person.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Person.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Quest.cpp
===================================================================
--- rl/trunk/engine/rules/src/Quest.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Quest.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/QuestBook.cpp
===================================================================
--- rl/trunk/engine/rules/src/QuestBook.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/QuestBook.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/QuestEvent.cpp
===================================================================
--- rl/trunk/engine/rules/src/QuestEvent.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/QuestEvent.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/QuestListener.cpp
===================================================================
--- rl/trunk/engine/rules/src/QuestListener.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/QuestListener.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/RulesSubsystem.cpp
===================================================================
--- rl/trunk/engine/rules/src/RulesSubsystem.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/RulesSubsystem.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Slot.cpp
===================================================================
--- rl/trunk/engine/rules/src/Slot.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Slot.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/SonderfertigkeitenStateSet.cpp
===================================================================
--- rl/trunk/engine/rules/src/SonderfertigkeitenStateSet.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/SonderfertigkeitenStateSet.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/StateSet.cpp
===================================================================
--- rl/trunk/engine/rules/src/StateSet.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/StateSet.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Talent.cpp
===================================================================
--- rl/trunk/engine/rules/src/Talent.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Talent.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/TalentStateSet.cpp
===================================================================
--- rl/trunk/engine/rules/src/TalentStateSet.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/TalentStateSet.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/TimerEvent.cpp
===================================================================
--- rl/trunk/engine/rules/src/TimerEvent.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/TimerEvent.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/TimerEventSource.cpp
===================================================================
--- rl/trunk/engine/rules/src/TimerEventSource.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/TimerEventSource.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/TimerListener.cpp
===================================================================
--- rl/trunk/engine/rules/src/TimerListener.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/TimerListener.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/TimerManager.cpp
===================================================================
--- rl/trunk/engine/rules/src/TimerManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/TimerManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/Weapon.cpp
===================================================================
--- rl/trunk/engine/rules/src/Weapon.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/Weapon.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/rules/src/ZauberStateSet.cpp
===================================================================
--- rl/trunk/engine/rules/src/ZauberStateSet.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/rules/src/ZauberStateSet.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/include/ScriptObjectMarker.h
===================================================================
--- rl/trunk/engine/script/include/ScriptObjectMarker.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/include/ScriptObjectMarker.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/include/ScriptPrerequisites.h
===================================================================
--- rl/trunk/engine/script/include/ScriptPrerequisites.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/include/ScriptPrerequisites.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/include/ScriptSubsystem.h
===================================================================
--- rl/trunk/engine/script/include/ScriptSubsystem.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/include/ScriptSubsystem.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/src/ScriptObjectMarker.cpp
===================================================================
--- rl/trunk/engine/script/src/ScriptObjectMarker.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/src/ScriptObjectMarker.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/src/ScriptSubsystem.cpp
===================================================================
--- rl/trunk/engine/script/src/ScriptSubsystem.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/src/ScriptSubsystem.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeMaps.i
===================================================================
--- rl/trunk/engine/script/swig/TypeMaps.i	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeMaps.i	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeOgreColourValue.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreColourValue.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeOgreColourValue.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeOgreQuaternion.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreQuaternion.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeOgreQuaternion.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeOgreRadian.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreRadian.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeOgreRadian.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeOgreReal.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreReal.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeOgreReal.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeOgreString.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreString.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeOgreString.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeOgreStringVector.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreStringVector.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeOgreStringVector.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeOgreVector3.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreVector3.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeOgreVector3.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeRlCeGuiString.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeRlCeGuiString.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeRlCeGuiString.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeRlProperty.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeRlProperty.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeRlProperty.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeRlTripelInt.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeRlTripelInt.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeRlTripelInt.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/script/swig/TypeStdPairIntInt.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeStdPairIntInt.inc	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/script/swig/TypeStdPairIntInt.inc	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/startup/src/RastullahMain.cpp
===================================================================
--- rl/trunk/engine/startup/src/RastullahMain.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/startup/src/RastullahMain.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/AboutWindow.h
===================================================================
--- rl/trunk/engine/ui/include/AboutWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/AboutWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/ActionChoiceWindow.h
===================================================================
--- rl/trunk/engine/ui/include/ActionChoiceWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/ActionChoiceWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/CeGuiHelper.h
===================================================================
--- rl/trunk/engine/ui/include/CeGuiHelper.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/CeGuiHelper.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/CeGuiWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CeGuiWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/CeGuiWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/CharacterController.h
===================================================================
--- rl/trunk/engine/ui/include/CharacterController.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/CharacterController.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/include/CharacterSheetWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CharacterSheetWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/CharacterSheetWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/CharacterStateWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CharacterStateWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/CharacterStateWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/CloseConfirmationWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CloseConfirmationWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/CloseConfirmationWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/CommandMapper.h
===================================================================
--- rl/trunk/engine/ui/include/CommandMapper.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/CommandMapper.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/CommandMapperWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CommandMapperWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/CommandMapperWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/Console.h
===================================================================
--- rl/trunk/engine/ui/include/Console.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/Console.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/CutsceneCharacterController.h
===================================================================
--- rl/trunk/engine/ui/include/CutsceneCharacterController.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/CutsceneCharacterController.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/include/DataLoadingProgressWindow.h
===================================================================
--- rl/trunk/engine/ui/include/DataLoadingProgressWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/DataLoadingProgressWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/DebugWindow.h
===================================================================
--- rl/trunk/engine/ui/include/DebugWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/DebugWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/DialogCharacterController.h
===================================================================
--- rl/trunk/engine/ui/include/DialogCharacterController.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/DialogCharacterController.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/include/DialogWindow.h
===================================================================
--- rl/trunk/engine/ui/include/DialogWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/DialogWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/FreeFlightCharacterController.h
===================================================================
--- rl/trunk/engine/ui/include/FreeFlightCharacterController.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/FreeFlightCharacterController.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/include/GameLoggerWindow.h
===================================================================
--- rl/trunk/engine/ui/include/GameLoggerWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/GameLoggerWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/InGameMenuWindow.h
===================================================================
--- rl/trunk/engine/ui/include/InGameMenuWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/InGameMenuWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/InfoPopup.h
===================================================================
--- rl/trunk/engine/ui/include/InfoPopup.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/InfoPopup.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/InputManager.h
===================================================================
--- rl/trunk/engine/ui/include/InputManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/InputManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/InventoryWindow.h
===================================================================
--- rl/trunk/engine/ui/include/InventoryWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/InventoryWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/JournalWindow.h
===================================================================
--- rl/trunk/engine/ui/include/JournalWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/JournalWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/LogWindow.h
===================================================================
--- rl/trunk/engine/ui/include/LogWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/LogWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/MainMenuEngineWindow.h
===================================================================
--- rl/trunk/engine/ui/include/MainMenuEngineWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/MainMenuEngineWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/MainMenuWindow.h
===================================================================
--- rl/trunk/engine/ui/include/MainMenuWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/MainMenuWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/MessageWindow.h
===================================================================
--- rl/trunk/engine/ui/include/MessageWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/MessageWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/MovementCharacterController.h
===================================================================
--- rl/trunk/engine/ui/include/MovementCharacterController.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/MovementCharacterController.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/include/ObjectDescriptionWindow.h
===================================================================
--- rl/trunk/engine/ui/include/ObjectDescriptionWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/ObjectDescriptionWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/PlaylistWindow.h
===================================================================
--- rl/trunk/engine/ui/include/PlaylistWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/PlaylistWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/Selector.h
===================================================================
--- rl/trunk/engine/ui/include/Selector.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/Selector.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/include/SoundConfig.h
===================================================================
--- rl/trunk/engine/ui/include/SoundConfig.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/SoundConfig.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/SoundDriverConfigComponent.h
===================================================================
--- rl/trunk/engine/ui/include/SoundDriverConfigComponent.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/SoundDriverConfigComponent.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/SubtitleWindow.h
===================================================================
--- rl/trunk/engine/ui/include/SubtitleWindow.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/SubtitleWindow.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/UiPrerequisites.h
===================================================================
--- rl/trunk/engine/ui/include/UiPrerequisites.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/UiPrerequisites.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/UiSubsystem.h
===================================================================
--- rl/trunk/engine/ui/include/UiSubsystem.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/UiSubsystem.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/VanityModeCharacterController.h
===================================================================
--- rl/trunk/engine/ui/include/VanityModeCharacterController.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/VanityModeCharacterController.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/include/WindowFactory.h
===================================================================
--- rl/trunk/engine/ui/include/WindowFactory.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/WindowFactory.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/WindowFadeJob.h
===================================================================
--- rl/trunk/engine/ui/include/WindowFadeJob.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/WindowFadeJob.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/include/WindowManager.h
===================================================================
--- rl/trunk/engine/ui/include/WindowManager.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/include/WindowManager.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/AboutWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/AboutWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/AboutWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/ActionChoiceWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/ActionChoiceWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/ActionChoiceWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/CeGuiWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CeGuiWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/CeGuiWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/CharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/CharacterController.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/CharacterController.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/src/CharacterSheetWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CharacterSheetWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/CharacterSheetWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/CharacterStateWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CharacterStateWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/CharacterStateWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/CloseConfirmationWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CloseConfirmationWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/CloseConfirmationWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/CommandMapper.cpp
===================================================================
--- rl/trunk/engine/ui/src/CommandMapper.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/CommandMapper.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/CommandMapperWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CommandMapperWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/CommandMapperWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/Console.cpp
===================================================================
--- rl/trunk/engine/ui/src/Console.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/Console.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/CutsceneCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/CutsceneCharacterController.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/CutsceneCharacterController.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,6 +1,6 @@
 /*
 * This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/src/DataLoadingProgressWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/DataLoadingProgressWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/DataLoadingProgressWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/DebugWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/DebugWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/DebugWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/DialogCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/DialogCharacterController.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/DialogCharacterController.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,6 +1,6 @@
 /*
 * This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/src/FreeFlightCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/FreeFlightCharacterController.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/FreeFlightCharacterController.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/src/GameLoggerWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/GameLoggerWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/GameLoggerWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/InGameMenuWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/InGameMenuWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/InGameMenuWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/InfoPopup.cpp
===================================================================
--- rl/trunk/engine/ui/src/InfoPopup.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/InfoPopup.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/InputManager.cpp
===================================================================
--- rl/trunk/engine/ui/src/InputManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/InputManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/InventoryWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/InventoryWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/InventoryWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/JournalWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/JournalWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/JournalWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/LogWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/LogWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/LogWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/MainMenuWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/MainMenuWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/MainMenuWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/MessageWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/MessageWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/MessageWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/MovementCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/MovementCharacterController.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/MovementCharacterController.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/src/ObjectDescriptionWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/ObjectDescriptionWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/ObjectDescriptionWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/PlaylistWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/PlaylistWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/PlaylistWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/Selector.cpp
===================================================================
--- rl/trunk/engine/ui/src/Selector.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/Selector.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.

Modified: rl/trunk/engine/ui/src/SoundConfig.cpp
===================================================================
--- rl/trunk/engine/ui/src/SoundConfig.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/SoundConfig.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/SoundDriverConfigComponent.cpp
===================================================================
--- rl/trunk/engine/ui/src/SoundDriverConfigComponent.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/SoundDriverConfigComponent.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/SubtitleWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/SubtitleWindow.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/SubtitleWindow.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/UiSubsystem.cpp
===================================================================
--- rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/VanityModeCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/VanityModeCharacterController.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/VanityModeCharacterController.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/WindowFactory.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowFactory.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/WindowFactory.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/WindowFadeJob.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowFadeJob.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/WindowFadeJob.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/ui/src/WindowManager.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowManager.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/ui/src/WindowManager.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/uicomponents/include/UiComponentsPrerequisites.h
===================================================================
--- rl/trunk/engine/uicomponents/include/UiComponentsPrerequisites.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/uicomponents/include/UiComponentsPrerequisites.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/engine/uicomponents/src/ListboxImageItem.cpp
===================================================================
--- rl/trunk/engine/uicomponents/src/ListboxImageItem.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/engine/uicomponents/src/ListboxImageItem.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h
===================================================================
--- rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/fmod4driver/include/Fmod4DriverPrerequisites.h
===================================================================
--- rl/trunk/plugins/fmod4driver/include/Fmod4DriverPrerequisites.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/fmod4driver/include/Fmod4DriverPrerequisites.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/fmod4driver/include/Fmod4Listener.h
===================================================================
--- rl/trunk/plugins/fmod4driver/include/Fmod4Listener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/fmod4driver/include/Fmod4Listener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/fmod4driver/include/Fmod4Sound.h
===================================================================
--- rl/trunk/plugins/fmod4driver/include/Fmod4Sound.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/fmod4driver/include/Fmod4Sound.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/fmod4driver/src/Fmod4DriverDllMain.cpp
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Fmod4DriverDllMain.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/fmod4driver/src/Fmod4DriverDllMain.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/fmod4driver/src/Fmod4Listener.cpp
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Fmod4Listener.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/fmod4driver/src/Fmod4Listener.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/fmod4driver/src/Fmod4Sound.cpp
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Fmod4Sound.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/fmod4driver/src/Fmod4Sound.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/include/OpenALConfig.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALConfig.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/include/OpenALConfig.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.
@@ -33,7 +33,7 @@
 
     protected:
 		virtual OpenALDriver* getDriver() const;
-        virtual void initialize();
+        virtual void initialize();
 
 	private:
 		OpenALDriver* mDriver;

Modified: rl/trunk/plugins/openaldriver/include/OpenALDriver.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALDriver.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/include/OpenALDriver.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/include/OpenALDriverPrerequisites.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALDriverPrerequisites.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/include/OpenALDriverPrerequisites.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/include/OpenALListener.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALListener.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/include/OpenALListener.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/include/OpenALSound.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALSound.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/include/OpenALSound.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/include/OpenALSoundSample.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALSoundSample.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/include/OpenALSoundSample.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/include/OpenALSoundStream.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALSoundStream.h	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/include/OpenALSoundStream.h	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/src/OpenALConfig.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALConfig.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/src/OpenALConfig.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/src/OpenALDriverDllMain.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALDriverDllMain.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/src/OpenALDriverDllMain.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
  * 
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/src/OpenALListener.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALListener.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/src/OpenALListener.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/src/OpenALSound.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALSound.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/src/OpenALSound.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/src/OpenALSoundSample.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALSoundSample.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/src/OpenALSoundSample.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.

Modified: rl/trunk/plugins/openaldriver/src/OpenALSoundStream.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALSoundStream.cpp	2007-02-01 23:12:57 UTC (rev 3015)
+++ rl/trunk/plugins/openaldriver/src/OpenALSoundStream.cpp	2007-02-01 23:38:57 UTC (rev 3016)
@@ -1,5 +1,5 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2005 Team Pantheon. http://www.team-pantheon.de
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
 * 
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.



From chrber at mail.berlios.de  Sat Feb  3 15:06:20 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Sat, 3 Feb 2007 15:06:20 +0100
Subject: [Dsa-hl-svn] r3017 - in rl/trunk/engine/ui: include src
Message-ID: <200702031406.l13E6KUW026055@sheep.berlios.de>

Author: chrber
Date: 2007-02-03 15:06:19 +0100 (Sat, 03 Feb 2007)
New Revision: 3017

Modified:
   rl/trunk/engine/ui/include/Makefile.am
   rl/trunk/engine/ui/src/Makefile.am
Log:
Removed the WindowUpdate.{h,cpp} files from the Makefiles as they were deleted


Modified: rl/trunk/engine/ui/include/Makefile.am
===================================================================
--- rl/trunk/engine/ui/include/Makefile.am	2007-02-01 23:38:57 UTC (rev 3016)
+++ rl/trunk/engine/ui/include/Makefile.am	2007-02-03 14:06:19 UTC (rev 3017)
@@ -37,5 +37,5 @@
 	UiPrerequisites.h \
 	UiSubsystem.h \
 	WindowFactory.h \
-	WindowManager.h \
-	WindowUpdater.h
+	WindowFadeJob.h \
+	WindowManager.h

Modified: rl/trunk/engine/ui/src/Makefile.am
===================================================================
--- rl/trunk/engine/ui/src/Makefile.am	2007-02-01 23:38:57 UTC (rev 3016)
+++ rl/trunk/engine/ui/src/Makefile.am	2007-02-03 14:06:19 UTC (rev 3017)
@@ -45,5 +45,5 @@
 	UiSubsystem.cpp \
 	VanityModeCharacterController.cpp \
 	WindowFactory.cpp \
-	WindowManager.cpp \
+	WindowFadeJob.cpp \
 	WindowUpdater.cpp



From chrber at mail.berlios.de  Sat Feb  3 15:40:49 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Sat, 3 Feb 2007 15:40:49 +0100
Subject: [Dsa-hl-svn] r3018 - rl/trunk/engine/ui/src
Message-ID: <200702031440.l13Eenwf000630@sheep.berlios.de>

Author: chrber
Date: 2007-02-03 15:40:49 +0100 (Sat, 03 Feb 2007)
New Revision: 3018

Modified:
   rl/trunk/engine/ui/src/Makefile.am
Log:
Accidently deleted the wrong file from the Makefile


Modified: rl/trunk/engine/ui/src/Makefile.am
===================================================================
--- rl/trunk/engine/ui/src/Makefile.am	2007-02-03 14:06:19 UTC (rev 3017)
+++ rl/trunk/engine/ui/src/Makefile.am	2007-02-03 14:40:49 UTC (rev 3018)
@@ -46,4 +46,4 @@
 	VanityModeCharacterController.cpp \
 	WindowFactory.cpp \
 	WindowFadeJob.cpp \
-	WindowUpdater.cpp
+	WindowManager.cpp



From josch at mail.berlios.de  Sun Feb  4 12:29:43 2007
From: josch at mail.berlios.de (josch at mail.berlios.de)
Date: Sun, 4 Feb 2007 12:29:43 +0100
Subject: [Dsa-hl-svn] r3019 - in rl/trunk/engine/core: include src
Message-ID: <200702041129.l14BThBc016760@sheep.berlios.de>

Author: josch
Date: 2007-02-04 12:29:38 +0100 (Sun, 04 Feb 2007)
New Revision: 3019

Modified:
   rl/trunk/engine/core/include/Makefile.am
   rl/trunk/engine/core/src/Makefile.am
Log:
Linux build was fixed, added Task classes

Modified: rl/trunk/engine/core/include/Makefile.am
===================================================================
--- rl/trunk/engine/core/include/Makefile.am	2007-02-03 14:40:49 UTC (rev 3018)
+++ rl/trunk/engine/core/include/Makefile.am	2007-02-04 11:29:38 UTC (rev 3019)
@@ -23,8 +23,12 @@
 	GameAreaTypes.h \
 	GameEventManager.h \
 	GameLoop.h \
+	Job.h \
+	JobListener.h \
+	JobScheduler.h \
 	LightObject.h \
 	LineSetPrimitive.h \
+	ListenerMovable.h \
 	ListenerObject.h \
 	MeshAnimation.h \
 	MeshObject.h \
@@ -40,8 +44,12 @@
 	PrimitiveObject.h \
 	RubyInterpreter.h \
 	SceneQuery.h \
+	Sound.h \
+	SoundDriver.h \
+	SoundEvents.h \
 	SoundManager.h \
 	SoundObject.h \
+	SoundResource.h \
 	TrackAnimation.h \
 	World.h \
 	nulldriver/NullDriver.h \

Modified: rl/trunk/engine/core/src/Makefile.am
===================================================================
--- rl/trunk/engine/core/src/Makefile.am	2007-02-03 14:40:49 UTC (rev 3018)
+++ rl/trunk/engine/core/src/Makefile.am	2007-02-04 11:29:38 UTC (rev 3019)
@@ -26,6 +26,8 @@
 	GameAreaTypes.cpp \
 	GameEventManager.cpp \
 	GameLoop.cpp \
+	Job.cpp \
+	JobScheduler.cpp \
 	LightObject.cpp \
 	LineSetPrimitive.cpp \
 	ListenerObject.cpp \



From melven at mail.berlios.de  Sun Feb  4 17:24:31 2007
From: melven at mail.berlios.de (melven at BerliOS)
Date: Sun, 4 Feb 2007 17:24:31 +0100
Subject: [Dsa-hl-svn] r3020 - dependencies/aiml/dependencies/XmlMapper
Message-ID: <200702041624.l14GOVfs013768@sheep.berlios.de>

Author: melven
Date: 2007-02-04 17:24:31 +0100 (Sun, 04 Feb 2007)
New Revision: 3020

Modified:
   dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
   dependencies/aiml/dependencies/XmlMapper/XmlNodeProcessor.h
Log:
some methods are now inline in order to prevent compiler errors (strange vc++)

Modified: dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
===================================================================
--- dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-04 11:29:38 UTC (rev 3019)
+++ dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-04 16:24:31 UTC (rev 3020)
@@ -59,7 +59,19 @@
 	
 		// virtual const S& getName() { return mName; }
 		virtual typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType getCurrentReturnValue() { return mReturnValue; }
-		virtual typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType interpret(XmlDocument<S>* pDocument, T<S>* pProcessHelper = NULL);
+		virtual typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType interpret(XmlDocument<S>* pDocument, T<S>* pProcessHelper = NULL)
+        {
+		    if(pDocument != NULL)
+		    {
+			    XmlNode<S>* root = pDocument->getRootNode();
+			    XmlNode<S>* child = root->getFirstChild();
+			    if(isProcessable(child))
+			    {
+				    return getProcessor(child->getNodeName())->process(child, pProcessHelper);
+			    }
+		    }
+		    return mReturnValue;
+        }
 		
 		void setParent(XmlProcessorPtr pProcessor) {}
 
@@ -114,23 +126,6 @@
 	}
 
 	template<template <class> class R, template <class> class T, class S, bool hasPolymorphicReturnType> 
-	typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType 
-		XmlInterpreter<R, T, S, hasPolymorphicReturnType>::interpret( XmlDocument<S>* pDocument, 
-																	  T<S>* pProcessHelper)
-	{
-		if(pDocument != NULL)
-		{
-			XmlNode<S>* root = pDocument->getRootNode();
-			XmlNode<S>* child = root->getFirstChild();
-			if(isProcessable(child))
-			{
-				return getProcessor(child->getNodeName())->process(child, pProcessHelper);
-			}
-		}
-		return mReturnValue;
-	}
-
-	template<template <class> class R, template <class> class T, class S, bool hasPolymorphicReturnType> 
 	bool XmlInterpreter<R, T, S, hasPolymorphicReturnType>::isProcessable(XmlNode<S>* pNode)
 	{
 		return (getProcessor(pNode->getNodeName()) != NULL);

Modified: dependencies/aiml/dependencies/XmlMapper/XmlNodeProcessor.h
===================================================================
--- dependencies/aiml/dependencies/XmlMapper/XmlNodeProcessor.h	2007-02-04 11:29:38 UTC (rev 3019)
+++ dependencies/aiml/dependencies/XmlMapper/XmlNodeProcessor.h	2007-02-04 16:24:31 UTC (rev 3020)
@@ -63,7 +63,25 @@
 
 		XmlProcessorPtr getProcessor(const S& pName);
 		
-		virtual typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType process(XmlNodePtr pNode, T<S>* pProcessHelper = NULL);
+		virtual typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType process(XmlNodePtr pNode, T<S>* pProcessHelper = NULL)
+        {
+//		    mCurrentReturnValue = NULL;
+		    mCurrentHelper = pProcessHelper;
+		    mCurrentNode = pNode;
+		    createAttributeMapping();
+		    preprocessStep();
+		    XmlNode<S>* child = mCurrentNode->getFirstChild();
+		    for(; child != NULL; child = child->getNextSibling())
+		    {
+			    if(isProcessable(child) && mProcessChildren)
+			    {
+				    processChildStep(child);
+			    }
+		    }
+		    postprocessStep();
+		    mCurrentNode = NULL;
+		    return mCurrentReturnValue;
+        }
 		void setParent(XmlProcessorPtr pProcessor) { mInterpreter = pProcessor; }
 
 	private:
@@ -159,27 +177,6 @@
 		return true;
 	}
 
-	template<template <class> class R, template <class> class T, class S, bool hasPolymorphicReturnType> 
-	typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType 
-		XmlNodeProcessor<R, T, S, hasPolymorphicReturnType>::process(XmlNode<S>* pNode, T<S>* pProcessHelper)
-	{
-//		mCurrentReturnValue = NULL;
-		mCurrentHelper = pProcessHelper;
-		mCurrentNode = pNode;
-		createAttributeMapping();
-		preprocessStep();
-		XmlNode<S>* child = mCurrentNode->getFirstChild();
-		for(; child != NULL; child = child->getNextSibling())
-		{
-			if(isProcessable(child) && mProcessChildren)
-			{
-				processChildStep(child);
-			}
-		}
-		postprocessStep();
-		mCurrentNode = NULL;
-		return mCurrentReturnValue;
-	}
 }
 
 #endif



From pnyx at mail.berlios.de  Sun Feb  4 17:36:13 2007
From: pnyx at mail.berlios.de (pnyx at mail.berlios.de)
Date: Sun, 4 Feb 2007 17:36:13 +0100
Subject: [Dsa-hl-svn] r3021 - in content/models/men: . Basemeshes human
	human/female human/female/Clothes human/female/Clothes/shortsleeve02
Message-ID: <200702041636.l14GaDcY014783@sheep.berlios.de>

Author: pnyx
Date: 2007-02-04 17:30:50 +0100 (Sun, 04 Feb 2007)
New Revision: 3021

Added:
   content/models/men/Basemeshes/
   content/models/men/Basemeshes/Female_longsleeve.obj
   content/models/men/Basemeshes/Female_shortsleeve.obj
   content/models/men/human/
   content/models/men/human/female/
   content/models/men/human/female/Clothes/
   content/models/men/human/female/Clothes/shortsleeve02/
   content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_diffuse.png
   content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_normal.png
   content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_specular.png
Log:
Female Basemeshes added
shortsleeve02 added

Added: content/models/men/Basemeshes/Female_longsleeve.obj
===================================================================
--- content/models/men/Basemeshes/Female_longsleeve.obj	2007-02-04 16:24:31 UTC (rev 3020)
+++ content/models/men/Basemeshes/Female_longsleeve.obj	2007-02-04 16:30:50 UTC (rev 3021)
@@ -0,0 +1,1265 @@
+# Max2Obj Version 4.0 Mar 10th, 2001
+#
+# object femaletorsobase_longsleeve to come ...
+#
+v  -10.017308 111.526642 -6.647225
+v  -16.486338 108.845444 0.625733
+v  -10.183784 105.500107 9.050971
+v  -8.036423 130.117310 -6.520596
+v  -13.877866 130.887314 2.374918
+v  -11.634297 130.450729 8.613927
+v  -8.776488 118.114838 -5.018199
+v  -14.116547 116.383377 2.660780
+v  -10.319587 114.159111 9.730738
+v  -7.258288 138.321182 -9.475197
+v  -13.906858 138.163330 3.781811
+v  -8.962823 135.316849 10.504139
+v  -13.430538 145.447983 3.817782
+v  -5.755745 150.798233 8.401252
+v  -10.568583 145.440857 -9.458625
+v  -10.133390 156.729828 -8.613871
+v  -5.413957 148.196014 -11.373479
+v  -4.718696 156.892563 -10.301750
+v  -13.160882 141.044205 -5.224549
+v  -10.203421 159.994095 -3.281825
+v  -5.910976 162.559494 -2.333625
+v  -12.621021 155.776138 2.296426
+v  -6.884421 155.201035 4.133793
+v  -4.187164 160.681732 0.978169
+v  -3.766417 162.546356 -6.401399
+v  -12.836979 135.666626 -4.143082
+v  -14.157092 146.275879 1.433090
+v  -12.709641 146.588181 -9.417372
+v  -14.433867 154.778976 -8.659425
+v  -13.209026 142.861023 -4.540787
+v  -16.771811 157.472153 -3.787279
+v  -15.998484 153.276474 1.251375
+v  -17.769724 137.246277 0.148758
+v  -15.393715 135.783615 -4.386248
+v  -23.444754 140.537170 -4.125225
+v  -21.589441 139.372559 0.135523
+v  -16.110685 143.662323 0.326995
+v  -14.690730 144.264236 -9.429429
+v  -18.312233 146.632339 -9.065251
+v  -14.137086 140.698975 -4.720365
+v  -21.349792 146.516342 -4.122272
+v  -19.022106 145.404968 -0.154098
+v  0.000064 112.403542 -8.810057
+v  0.000021 131.916168 13.100039
+v  -0.000001 138.693054 12.210077
+v  -13.104492 124.319557 2.299047
+v  -11.460074 124.805313 9.030149
+v  -11.980657 146.494705 7.968010
+v  -14.237700 139.625732 7.094033
+v  -6.512864 147.008743 11.517740
+v  -6.759913 137.452576 13.251944
+v  -0.000000 129.653946 -7.711080
+v  0.000000 159.673248 3.182381
+v  -12.723887 135.866058 7.247937
+v  -4.337295 136.438705 12.185658
+v  -1.704998 140.447693 12.435558
+v  -2.003537 145.525696 11.385657
+v  -10.509111 137.125717 11.578630
+v  -3.803242 140.762207 13.370672
+v  -10.639489 151.139313 5.250744
+v  -14.247035 142.772720 6.318820
+v  -9.387489 143.067932 13.136337
+v  -6.078716 141.725342 13.814447
+v  -5.534461 144.337311 13.003135
+v  -13.049253 142.890579 10.016339
+v  -9.264089 148.133881 8.532712
+v  -12.838294 140.026230 10.714950
+v  -9.097901 140.458038 13.468138
+v  -5.563957 125.252800 12.864098
+v  -5.662515 131.361710 12.435094
+v  -7.925682 123.617149 -5.643519
+v  -12.804278 120.560173 2.466800
+v  -10.242166 119.297501 9.741185
+v  -4.725194 119.340508 11.954474
+v  -15.433583 107.760811 5.884200
+v  -11.977942 129.447235 -2.743894
+v  -14.585693 142.025482 0.089551
+v  -14.637505 136.501419 1.039329
+v  -4.808814 111.068695 11.976105
+v  -9.184147 145.966400 11.495600
+v  -18.274984 149.839783 0.555180
+v  -17.441999 150.966141 -8.967446
+v  -20.129751 152.244812 -3.975563
+v  0.000379 118.220306 -6.800641
+v  -0.000001 138.089661 -9.232009
+v  0.000000 162.168961 -7.899947
+v  0.000000 156.600800 -10.873415
+v  -0.000000 142.117462 11.722828
+v  0.000542 118.553154 12.236349
+v  -11.144076 107.260757 -10.507514
+v  -18.902081 103.893738 -0.720040
+v  -11.011208 99.633568 10.158606
+v  0.000734 108.184311 -12.727822
+v  0.000733 98.933304 11.732050
+v  -17.433840 102.018929 6.254308
+v  10.018245 111.526642 -6.647225
+v  8.777162 118.114838 -5.018199
+v  14.117586 116.383377 2.660780
+v  7.925885 123.617149 -5.643519
+v  0.000153 123.276176 -6.813254
+v  12.804989 120.560173 2.466801
+v  13.104867 124.319557 2.299047
+v  10.242964 119.297501 9.741185
+v  11.460382 124.805313 9.030149
+v  4.726287 119.340508 11.954474
+v  5.564499 125.252800 12.864098
+v  7.259633 138.298004 -9.442538
+v  8.036413 130.117310 -6.520595
+v  12.836973 135.666626 -4.143082
+v  13.160878 141.044205 -5.224549
+v  8.962820 135.316849 10.504140
+v  12.723882 135.866058 7.247937
+v  11.634310 130.450729 8.613927
+v  4.337292 136.438705 12.185658
+v  11.980656 146.494705 7.968011
+v  13.430537 145.447983 3.817782
+v  14.247033 142.772720 6.318819
+v  0.000000 154.328812 5.706296
+v  5.755745 150.798233 8.401251
+v  0.000000 149.940445 8.690530
+v  4.718696 156.892563 -10.301751
+v  5.413957 148.196014 -11.373480
+v  10.568583 145.440857 -9.458625
+v  10.133390 156.729828 -8.613872
+v  14.637497 136.501419 1.039329
+v  14.585688 142.025482 0.089551
+v  3.766417 162.546356 -6.401399
+v  10.203421 159.994095 -3.281825
+v  5.910976 162.559494 -2.333625
+v  4.187163 160.681732 0.978170
+v  6.884421 155.201035 4.133793
+v  12.621021 155.776138 2.296426
+v  15.998485 153.276474 1.251376
+v  10.639489 151.139313 5.250744
+v  12.709641 146.588181 -9.417372
+v  14.433867 154.778976 -8.659425
+v  13.209023 142.861023 -4.540787
+v  14.157090 146.275879 1.433090
+v  16.771811 157.472153 -3.787279
+v  21.589441 139.372559 0.135523
+v  17.769724 137.246277 0.148758
+v  16.110683 143.662323 0.326995
+v  19.022106 145.404968 -0.154098
+v  21.526058 139.603729 -8.555417
+v  18.312233 146.632339 -9.065251
+v  14.687697 144.264236 -9.429429
+v  14.130649 140.544968 -4.720365
+v  23.444754 140.537170 -4.125224
+v  21.349792 146.516342 -4.122272
+v  18.274984 149.839783 0.555180
+v  20.129751 152.244812 -3.975563
+v  17.441999 150.966141 -8.967446
+v  11.977941 129.447235 -2.743894
+v  13.877878 130.887314 2.374917
+v  5.662616 131.361710 12.435094
+v  14.237697 139.625732 7.094034
+v  12.838292 140.026230 10.714950
+v  1.704997 140.447693 12.435559
+v  0.000000 145.717392 11.051542
+v  2.003537 145.525696 11.385656
+v  0.000000 148.040848 -11.185639
+v  13.906854 138.163330 3.781811
+v  6.759910 137.452576 13.251944
+v  3.803241 140.762207 13.370673
+v  6.512864 147.008743 11.517740
+v  10.509110 137.125717 11.578630
+v  9.264089 148.133881 8.532712
+v  5.534461 144.337311 13.003135
+v  6.078716 141.725342 13.814447
+v  13.049253 142.890579 10.016339
+v  9.097900 140.458038 13.468138
+v  9.184145 145.966400 11.495600
+v  9.387489 143.067932 13.136338
+v  0.000233 125.201492 13.366743
+v  0.000690 115.137566 12.557659
+v  10.320833 114.159111 9.730738
+v  4.810304 111.068695 11.976105
+v  10.185263 105.500107 9.050971
+v  15.435047 107.760811 5.884199
+v  16.487801 108.845444 0.625733
+v  0.000737 104.756264 11.433276
+v  0.000750 110.166374 12.533469
+v  11.145541 107.260757 -10.507514
+v  18.903545 103.893738 -0.720040
+v  17.435307 102.018929 6.254308
+v  11.012673 99.633568 10.158606
+v  -19.654558 130.976257 -0.639063
+v  -19.539537 130.846008 -8.176176
+v  -23.522108 132.168976 -7.982969
+v  -17.579136 130.312592 -4.273407
+v  -25.472313 132.917847 -4.069019
+v  -23.354740 132.229446 -0.648581
+v  -24.056217 117.809616 -0.844849
+v  -23.906673 117.860619 -7.968730
+v  -28.100559 119.585518 -7.956645
+v  -21.886347 117.021561 -4.473440
+v  -30.220655 120.656631 -4.359172
+v  -28.084515 119.643867 -0.457313
+v  -20.949881 126.845886 -0.989812
+v  -20.936220 126.863380 -7.863918
+v  -24.830811 128.146133 -7.781217
+v  -18.995848 126.266205 -4.349343
+v  -26.835905 128.868988 -4.117743
+v  -24.653738 128.135330 -0.857909
+v  -20.302219 128.895126 -0.830482
+v  -20.237881 128.850037 -7.998408
+v  -24.176460 130.154572 -7.839962
+v  -18.287493 128.273605 -4.327319
+v  -26.154108 130.875458 -4.079143
+v  -24.004238 130.164642 -0.768276
+v  -17.147760 137.277496 -9.227110
+v  -21.526058 139.603729 -8.555417
+v  -30.437511 103.020660 -1.567987
+v  -30.615099 103.114708 -7.493659
+v  -33.068382 103.301994 -7.086765
+v  -29.495045 103.029579 -4.666129
+v  -34.454414 103.077080 -4.398465
+v  -33.039665 103.248901 -1.606958
+v  23.354740 132.230347 -0.651967
+v  19.654558 130.976944 -0.635708
+v  19.539537 130.842834 -8.172195
+v  23.522108 132.165924 -7.980341
+v  17.147760 137.277496 -9.227108
+v  17.579136 130.310959 -4.274487
+v  15.393799 135.783615 -4.386248
+v  25.472313 132.916306 -4.078070
+v  28.084515 119.643867 -0.457313
+v  24.056217 117.809616 -0.844848
+v  20.949881 126.846054 -0.988426
+v  24.653738 128.135361 -0.857884
+v  23.906673 117.860619 -7.968731
+v  28.100559 119.585518 -7.956644
+v  24.830811 128.146133 -7.781217
+v  20.936220 126.863380 -7.863918
+v  21.886347 117.021561 -4.473440
+v  18.995848 126.266205 -4.349343
+v  30.220655 120.656631 -4.359172
+v  26.835905 128.868988 -4.117743
+v  33.039665 103.248901 -1.606958
+v  30.437511 103.020660 -1.567987
+v  30.615099 103.114708 -7.493660
+v  33.068382 103.301994 -7.086765
+v  29.495045 103.029579 -4.666129
+v  34.454414 103.077080 -4.398465
+v  24.004238 130.164993 -0.767718
+v  20.302219 128.895691 -0.827879
+v  20.237881 128.850037 -7.999482
+v  24.176460 130.154572 -7.842622
+v  18.287493 128.273315 -4.327592
+v  26.154108 130.875259 -4.082695
+v  -5.627877 166.323303 -1.463061
+v  -4.332507 167.198044 -5.966127
+v  -3.656772 164.238861 2.334900
+v  0.000000 166.890579 -6.732415
+v  5.627877 166.323303 -1.463061
+v  4.332507 167.198044 -5.966127
+v  3.656772 164.238861 2.334900
+v  0.000000 163.725769 4.154183
+v  -12.986375 137.237885 8.603955
+v  12.986370 137.237885 8.603955
+v  -13.292703 149.982285 3.435947
+v  13.292703 149.982254 3.435948
+v  -31.594414 108.030769 -1.271645
+v  -28.658472 107.415611 -7.632223
+v  -27.275843 107.110573 -4.609928
+v  28.576300 107.334099 -1.357071
+v  31.619434 108.051361 -7.340480
+v  33.219570 108.204453 -4.387004
+v  -28.576300 107.334106 -1.357071
+v  -31.619434 108.051361 -7.340480
+v  -33.219566 108.204453 -4.387004
+v  31.594414 108.030769 -1.271645
+v  28.658472 107.415596 -7.632223
+v  27.275843 107.110573 -4.609928
+v  -31.594414 108.030769 -1.271645
+v  -28.658472 107.415611 -7.632223
+v  -27.275843 107.110573 -4.609928
+v  28.576300 107.334099 -1.357071
+v  31.619434 108.051361 -7.340480
+v  33.219570 108.204453 -4.387004
+v  -28.576300 107.334106 -1.357071
+v  -31.619434 108.051361 -7.340480
+v  -33.219566 108.204453 -4.387004
+v  31.594414 108.030769 -1.271645
+v  28.658472 107.415596 -7.632223
+v  27.275843 107.110573 -4.609928
+v  -33.625660 102.909981 -0.197490
+v  -29.807274 102.275269 -8.719205
+v  -28.009069 101.940643 -4.670023
+v  29.700405 102.197372 -0.311942
+v  33.658203 102.960136 -8.328337
+v  35.739288 103.132896 -4.371357
+v  -29.700405 102.197395 -0.311942
+v  -33.658203 102.960136 -8.328337
+v  -35.739285 103.132896 -4.371357
+v  33.625660 102.909981 -0.197490
+v  29.807274 102.275261 -8.719205
+v  28.009069 101.940643 -4.670023
+# 298 vertices
+
+vt  0.781242 0.501702 0.490215
+vt  0.873497 0.498624 0.470576
+vt  0.489746 0.053984 0.446074
+vt  0.772183 0.619450 1.295951
+vt  0.281799 0.246368 1.295950
+vt  0.443219 0.219697 1.295950
+vt  0.684293 0.544563 1.295952
+vt  0.777128 0.545959 1.295951
+vt  0.871616 0.544541 1.295951
+vt  0.470899 0.114369 1.295951
+vt  0.776176 0.667112 1.295951
+vt  0.346494 0.264493 1.295950
+vt  0.473542 0.239399 1.295950
+vt  0.385433 0.304025 1.295950
+vt  0.544651 0.330015 1.295950
+vt  0.838939 0.698670 1.295951
+vt  0.816658 0.760372 1.295950
+vt  0.754948 0.718563 1.295951
+vt  0.741142 0.765278 1.295951
+vt  0.889986 0.669167 1.295951
+vt  0.425844 0.399828 1.295950
+vt  0.503430 0.423912 1.295951
+vt  0.429556 0.361976 1.295950
+vt  0.517404 0.364068 1.295950
+vt  0.541399 0.405093 1.295950
+vt  0.738862 0.804790 1.295951
+vt  0.841280 0.647835 1.295951
+vt  0.350644 0.303444 1.295950
+vt  0.886585 0.695657 1.295950
+vt  0.876735 0.745926 1.295950
+vt  0.898013 0.664429 1.295951
+vt  0.332928 0.381560 1.295950
+vt  0.372469 0.350007 1.295950
+vt  0.124393 0.473781 1.295950
+vt  0.345721 0.481653 1.295950
+vt  0.290684 0.472899 1.295950
+vt  0.401322 0.493804 1.295951
+vt  0.233607 0.467910 1.295950
+vt  0.176664 0.469093 1.295950
+vt  0.126577 0.438049 1.295950
+vt  0.364140 0.443956 1.295950
+vt  0.314792 0.432036 1.295950
+vt  0.418381 0.465746 1.295951
+vt  0.241467 0.432064 1.295950
+vt  0.177582 0.433202 1.295950
+vt  0.684165 0.503279 0.496638
+vt  0.633963 0.053433 0.440625
+vt  0.633642 0.215375 1.295951
+vt  0.632006 0.253778 1.295951
+vt  0.624294 0.360232 1.295951
+vt  0.281799 0.199699 1.295951
+vt  0.440606 0.188005 1.295950
+vt  0.633892 0.181085 1.295951
+vt  0.451546 0.302870 1.295950
+vt  0.629204 0.298138 1.295951
+vt  0.395216 0.268389 1.295950
+vt  0.630815 0.274788 1.295951
+vt  0.542423 0.301211 1.295950
+vt  0.528450 0.247209 1.295950
+vt  0.677031 0.718301 1.295951
+vt  0.634317 0.122184 1.295951
+vt  0.684550 0.577586 1.295952
+vt  0.684284 0.616675 1.295951
+vt  0.681206 0.664160 1.295951
+vt  0.626827 0.329031 1.295950
+vt  0.621158 0.394961 1.295951
+vt  0.671618 0.800395 1.295951
+vt  0.673702 0.764600 1.295951
+vt  0.394298 0.250671 1.295950
+vt  0.559259 0.239924 1.295950
+vt  0.607324 0.262496 1.295950
+vt  0.605732 0.295789 1.295950
+vt  0.470720 0.250114 1.295950
+vt  0.578106 0.264239 1.295950
+vt  0.461384 0.335394 1.295950
+vt  0.400550 0.285960 1.295950
+vt  0.509488 0.279388 1.295950
+vt  0.551004 0.270988 1.295950
+vt  0.559095 0.285777 1.295950
+vt  0.448050 0.280528 1.295950
+vt  0.493150 0.313856 1.295950
+vt  0.446807 0.267398 1.295950
+vt  0.508689 0.266896 1.295950
+vt  0.554299 0.181429 1.295950
+vt  0.553025 0.215021 1.295950
+vt  0.768738 0.580620 1.295951
+vt  0.281799 0.165922 1.295951
+vt  0.454070 0.150519 1.295951
+vt  0.634362 0.141385 1.295951
+vt  0.563393 0.147036 1.295951
+vt  0.634312 0.089763 1.295951
+vt  0.358659 0.062908 0.462632
+vt  0.824926 0.615884 1.295951
+vt  0.323808 0.284747 1.295950
+vt  0.278238 0.255196 1.295950
+vt  0.572552 0.094744 1.295951
+vt  0.508107 0.295673 1.295950
+vt  0.178878 0.405451 1.295950
+vt  0.327446 0.406549 1.295950
+vt  0.253770 0.399024 1.295950
+vt  0.281799 0.063811 0.470576
+vt  0.281799 0.129445 1.295951
+vt  0.264370 0.280177 1.295951
+vt  0.275145 0.293723 1.295951
+vt  0.062177 0.477553 1.295951
+vt  0.052334 0.451890 1.295951
+vt  0.871616 0.581276 1.295951
+vt  0.871616 0.563893 1.295951
+vt  0.124418 0.423786 1.295950
+vt  0.378724 0.434435 1.295950
+vt  0.425655 0.455122 1.295951
+vt  0.928192 0.342724 1.295950
+vt  0.373144 0.745018 1.295950
+vt  0.281799 0.014512 -0.427335
+vt  0.774367 0.461632 -0.378012
+vt  0.870517 0.461632 -0.427335
+vt  0.586821 0.503870 0.490215
+vt  0.591152 0.547974 1.295951
+vt  0.496800 0.551557 1.295951
+vt  0.600174 0.581407 1.295951
+vt  0.684985 0.461632 -0.364483
+vt  0.496800 0.569597 1.295951
+vt  0.987468 0.206308 1.295951
+vt  0.987468 0.173982 1.295951
+vt  0.814226 0.156133 1.295951
+vt  0.828342 0.193183 1.295950
+vt  0.705094 0.149071 1.295951
+vt  0.713529 0.184147 1.295950
+vt  0.586540 0.665315 1.295951
+vt  0.478176 0.014512 -0.488061
+vt  0.871616 0.627142 1.295950
+vt  0.596334 0.618817 1.295951
+vt  0.524920 0.644890 1.295951
+vt  0.473609 0.662854 1.295951
+vt  0.792739 0.243201 1.295950
+vt  0.872321 0.256102 1.295950
+vt  0.825089 0.224826 1.295950
+vt  0.635812 0.014512 -0.500000
+vt  0.706185 0.241729 1.295950
+vt  0.496800 0.503057 0.470576
+vt  0.806474 0.307891 1.295950
+vt  0.872651 0.311281 1.295950
+vt  0.860395 0.292286 1.295950
+vt  0.352331 0.014512 -0.456480
+vt  0.708522 0.332306 1.295950
+vt  0.595878 0.461632 -0.378012
+vt  0.606300 0.763752 1.295951
+vt  0.599135 0.716827 1.295951
+vt  0.517330 0.694673 1.295951
+vt  0.530454 0.756923 1.295950
+vt  0.991054 0.297961 1.295951
+vt  0.987944 0.263018 1.295950
+vt  0.934893 0.293444 1.295950
+vt  0.603185 0.802895 1.295951
+vt  0.813857 0.407120 1.295950
+vt  0.732868 0.427304 1.295951
+vt  0.699268 0.407072 1.295950
+vt  0.729189 0.367231 1.295950
+vt  0.494789 0.461632 -0.427335
+vt  0.776909 0.056351 0.446074
+vt  0.908958 0.067251 0.462632
+vt  0.816330 0.367789 1.295950
+vt  0.878202 0.357979 1.295950
+vt  0.790497 0.340285 1.295950
+vt  0.462706 0.694274 1.295950
+vt  0.470816 0.741800 1.295950
+vt  0.464172 0.657580 1.295951
+vt  0.907072 0.313542 1.295950
+vt  0.901796 0.390956 1.295950
+vt  0.272025 0.787722 1.295950
+vt  0.321029 0.799168 1.295950
+vt  0.334075 0.764358 1.295950
+vt  0.287588 0.752131 1.295950
+vt  0.100916 0.777999 1.295950
+vt  0.159244 0.776639 1.295950
+vt  0.157535 0.733898 1.295950
+vt  0.103572 0.739394 1.295950
+vt  0.039617 0.781273 1.295951
+vt  0.039520 0.756400 1.295951
+vt  0.381922 0.812846 1.295951
+vt  0.402141 0.784339 1.295951
+vt  0.217224 0.779160 1.295950
+vt  0.227329 0.742604 1.295950
+vt  0.299257 0.724250 1.295950
+vt  0.986600 0.298331 1.295951
+vt  0.232853 0.706902 1.295950
+vt  0.155506 0.707535 1.295950
+vt  0.545456 0.616017 1.295951
+vt  0.987468 0.253279 1.295950
+vt  0.714491 0.217725 1.295950
+vt  0.867963 0.274570 1.295950
+vt  0.816372 0.272095 1.295950
+vt  0.987468 0.066317 0.470576
+vt  0.655756 0.263079 1.295950
+vt  0.046754 0.437616 1.295951
+vt  0.653014 0.296278 1.295950
+vt  0.987468 0.014512 -0.427335
+vt  0.917756 0.271710 1.295950
+vt  0.736651 0.249749 1.295950
+vt  0.684919 0.265532 1.295950
+vt  0.715546 0.303465 1.295950
+vt  0.794363 0.254102 1.295950
+vt  0.762769 0.317659 1.295950
+vt  0.701316 0.287498 1.295950
+vt  0.711444 0.272929 1.295950
+vt  0.813368 0.285438 1.295950
+vt  0.754396 0.269937 1.295950
+vt  0.751007 0.298871 1.295950
+vt  0.752017 0.282466 1.295950
+vt  0.893699 0.014512 -0.456480
+vt  0.782757 0.014512 -0.488061
+vt  0.797944 0.118837 1.295951
+vt  0.696029 0.096315 1.295951
+vt  0.496800 0.591012 1.295951
+vt  0.987468 0.143087 1.295951
+vt  0.096709 0.728806 1.295950
+vt  0.038219 0.742139 1.295951
+vt  0.343264 0.751646 1.295950
+vt  0.412067 0.772024 1.295951
+vt  0.876536 0.665306 1.295950
+vt  0.486281 0.658739 1.295950
+vt  0.496800 0.628084 1.295950
+vt  0.118632 0.509863 1.295950
+vt  0.338695 0.519236 1.295950
+vt  0.284035 0.515300 1.295950
+vt  0.395794 0.518599 1.295951
+vt  0.226181 0.511613 1.295949
+vt  0.171654 0.509569 1.295950
+vt  0.120505 0.580419 1.295950
+vt  0.312619 0.590461 1.295950
+vt  0.263851 0.584869 1.295950
+vt  0.359565 0.597524 1.295951
+vt  0.218026 0.580201 1.295950
+vt  0.168748 0.579615 1.295950
+vt  0.117675 0.530567 1.295950
+vt  0.334637 0.541601 1.295950
+vt  0.279962 0.535839 1.295950
+vt  0.385504 0.555894 1.295951
+vt  0.223839 0.532213 1.295950
+vt  0.170460 0.530168 1.295950
+vt  0.117344 0.520800 1.295950
+vt  0.337778 0.530897 1.295950
+vt  0.282184 0.525823 1.295950
+vt  0.391754 0.537572 1.295951
+vt  0.224911 0.522205 1.295949
+vt  0.170892 0.520167 1.295950
+vt  0.061815 0.511149 1.295951
+vt  0.069901 0.578364 1.295951
+vt  0.065562 0.539652 1.295951
+vt  0.063052 0.523947 1.295951
+vt  0.980795 0.984416 1.295951
+vt  0.980795 0.984445 1.295951
+vt  0.980795 0.984439 1.295951
+vt  0.980795 0.984453 1.295951
+vt  0.980795 0.984408 1.295951
+vt  0.980794 0.984431 1.295951
+vt  0.980795 0.984423 1.295951
+vt  0.255568 0.828011 1.295950
+vt  0.306057 0.835219 1.295950
+vt  0.087905 0.815060 1.295950
+vt  0.143640 0.818465 1.295950
+vt  0.031467 0.808630 1.295951
+vt  0.359630 0.840103 1.295951
+vt  0.201828 0.822673 1.295949
+vt  0.219658 0.896968 1.295950
+vt  0.263671 0.905499 1.295950
+vt  0.296350 0.858327 1.295950
+vt  0.245529 0.849085 1.295950
+vt  0.078626 0.886942 1.295950
+vt  0.127479 0.888325 1.295950
+vt  0.137107 0.838781 1.295950
+vt  0.081566 0.836583 1.295950
+vt  0.031746 0.889116 1.295951
+vt  0.026188 0.841111 1.295951
+vt  0.310365 0.915916 1.295951
+vt  0.340698 0.876473 1.295951
+vt  0.173200 0.890476 1.295950
+vt  0.192865 0.843251 1.295950
+vt  0.980786 0.984382 1.295951
+vt  0.980786 0.984375 1.295951
+vt  0.980786 0.984404 1.295951
+vt  0.980786 0.984397 1.295951
+vt  0.980786 0.984412 1.295951
+vt  0.980786 0.984367 1.295951
+vt  0.980786 0.984390 1.295951
+vt  0.250730 0.839007 1.295950
+vt  0.301692 0.847548 1.295950
+vt  0.083449 0.826017 1.295950
+vt  0.140093 0.828804 1.295950
+vt  0.025904 0.825074 1.295951
+vt  0.351013 0.858396 1.295951
+vt  0.197414 0.833279 1.295949
+vt  0.536743 0.448237 1.295951
+vt  0.716516 0.835456 1.295951
+vt  0.579549 0.424644 1.295951
+vt  0.670184 0.831499 1.295951
+vt  0.696286 0.449183 1.295951
+vt  0.624981 0.833455 1.295951
+vt  0.658807 0.425514 1.295951
+vt  0.620588 0.419237 1.295951
+vt  0.414589 0.254488 1.295950
+vt  0.850488 0.259755 1.295950
+vt  0.404574 0.328440 1.295950
+vt  0.848638 0.335368 1.295950
+vt  0.158912 0.646268 1.295951
+vt  0.281464 0.649544 1.295951
+vt  0.325890 0.645418 1.295951
+vt  0.075813 0.632789 1.295951
+vt  0.230863 0.963204 1.295951
+vt  0.112449 0.954398 1.295951
+vt  0.150129 0.960442 1.295951
+vt  0.119493 0.641266 1.295951
+vt  0.242487 0.650367 1.295951
+vt  0.201420 0.650371 1.295951
+vt  0.192061 0.962248 1.295951
+vt  0.078094 0.947998 1.295951
+vt  0.038716 0.938100 1.295951
+vt  0.277603 0.958626 1.295951
+vt  0.980796 0.984422 1.295951
+vt  0.980797 0.984446 1.295951
+vt  0.980796 0.984405 1.295951
+vt  0.980797 0.984454 1.295951
+vt  0.980788 0.984373 1.295951
+vt  0.980788 0.984397 1.295951
+vt  0.980788 0.984389 1.295951
+vt  0.980796 0.984414 1.295951
+vt  0.980797 0.984438 1.295951
+vt  0.980796 0.984430 1.295951
+vt  0.980788 0.984380 1.295951
+vt  0.980788 0.984405 1.295951
+vt  0.980788 0.984413 1.295951
+vt  0.980787 0.984364 1.295951
+vt  0.156297 0.676524 1.295951
+vt  0.109584 0.668424 1.295951
+vt  0.278491 0.676603 1.295951
+vt  0.237099 0.680119 1.295951
+vt  0.070569 0.664460 1.295951
+vt  0.195448 0.681515 1.295951
+vt  0.225216 0.990146 1.295951
+vt  0.183697 0.991459 1.295951
+vt  0.094788 0.983131 1.295951
+vt  0.065421 0.974590 1.295951
+vt  0.028551 0.966226 1.295951
+vt  0.267569 0.992362 1.295951
+vt  0.138224 0.991176 1.295951
+vt  0.323413 0.676903 1.295951
+vt  0.842929 0.789008 1.295950
+vt  0.782440 0.818854 1.295951
+vt  0.922498 0.771004 1.295950
+vt  0.500877 0.784193 1.295950
+vt  0.553664 0.814674 1.295951
+vt  0.420717 0.763821 1.295950
+vt  0.766551 0.847375 1.295951
+vt  0.569421 0.843361 1.295951
+vt  0.330956 0.334063 1.295950
+vt  0.916719 0.726213 1.295950
+vt  0.283034 0.363728 1.295950
+vt  0.433427 0.720372 1.295950
+vt  0.977715 0.751960 1.295950
+vt  0.961623 0.377582 1.295950
+vt  1.042380 0.268169 1.295951
+vt  0.220389 0.251329 1.295951
+# 362 texture vertices
+
+vn  -0.534279 0.508738 -0.675079
+vn  -0.901903 0.413238 -0.125715
+vn  -0.381269 0.059705 0.922534
+vn  -0.435126 -0.212044 -0.875045
+vn  -0.992718 -0.118804 0.019934
+vn  -0.780183 -0.005966 0.625523
+vn  -0.587854 0.167252 -0.791489
+vn  -0.952523 0.304053 -0.015890
+vn  -0.611282 0.040232 0.790390
+vn  -0.311639 -0.230266 -0.921878
+vn  -0.984708 -0.061993 0.162808
+vn  -0.485374 -0.338487 0.806126
+vn  -0.967989 0.124791 0.217773
+vn  -0.173616 0.613578 0.770311
+vn  -0.393398 -0.211151 -0.894792
+vn  -0.323912 0.498649 -0.804009
+vn  -0.178355 -0.007726 -0.983936
+vn  -0.197260 0.360214 -0.911776
+vn  -0.860622 -0.079181 -0.503051
+vn  -0.466210 0.884673 0.000814
+vn  -0.852773 0.508309 0.120001
+vn  -0.421129 0.564478 0.709940
+vn  -0.202882 0.568378 0.797362
+vn  -0.547107 0.313657 0.776075
+vn  -0.497165 0.433980 -0.751324
+vn  -0.817681 -0.192485 -0.542538
+vn  -0.728473 -0.129222 0.672777
+vn  0.018541 -0.220985 -0.975101
+vn  -0.321939 0.457319 -0.828984
+vn  -0.216076 -0.657062 -0.722206
+vn  -0.638492 0.768346 -0.044411
+vn  -0.622456 0.310903 0.718254
+vn  0.458015 -0.184917 0.869499
+vn  0.944776 -0.319970 0.070841
+vn  -0.952156 0.305149 0.016830
+vn  -0.519902 0.146699 0.841535
+vn  0.253253 -0.316716 0.914086
+vn  0.395828 -0.243055 -0.885576
+vn  -0.486424 0.146558 -0.861344
+vn  0.942907 -0.326854 0.063982
+vn  -0.963896 0.266068 0.010604
+vn  -0.563709 0.080978 0.821994
+vn  -0.000022 0.518686 -0.854965
+vn  -0.000001 0.073674 0.997282
+vn  -0.000000 0.044120 0.999026
+vn  -0.982023 -0.135086 -0.131843
+vn  -0.808181 -0.046398 0.587103
+vn  -0.733206 0.481257 0.480417
+vn  -0.975730 -0.150856 0.158727
+vn  -0.078740 0.603455 0.793500
+vn  -0.043307 -0.459264 0.887244
+vn  0.000362 -0.198206 -0.980160
+vn  0.000000 0.164981 0.986297
+vn  -0.879601 -0.238897 0.411375
+vn  -0.021945 -0.142929 0.989490
+vn  0.269655 0.036013 0.962283
+vn  0.186757 0.390293 0.901550
+vn  -0.510737 -0.514175 0.689036
+vn  0.313051 -0.023582 0.949444
+vn  -0.484780 0.478023 0.732449
+vn  -0.979091 0.192415 0.066003
+vn  -0.387578 0.284656 0.876786
+vn  0.061250 0.096772 0.993420
+vn  0.108072 0.387617 0.915464
+vn  -0.809543 0.270357 0.521102
+vn  -0.448457 0.628013 0.635992
+vn  -0.780293 -0.113413 0.615044
+vn  -0.354557 -0.090475 0.930647
+vn  -0.307605 -0.035339 0.950858
+vn  -0.326516 0.059185 0.943337
+vn  -0.517508 -0.104997 -0.849212
+vn  -0.988469 0.087820 -0.123359
+vn  -0.699206 -0.033659 0.714127
+vn  -0.228002 -0.085517 0.969898
+vn  -0.775369 0.232964 0.586967
+vn  -0.827230 -0.211483 -0.520543
+vn  -0.997062 0.065026 -0.040475
+vn  -0.996548 -0.081488 -0.015857
+vn  -0.255969 -0.098568 0.961647
+vn  -0.400942 0.583459 0.706273
+vn  -0.621306 0.129266 0.772832
+vn  -0.496414 0.268113 -0.825644
+vn  -0.913747 0.405917 -0.017256
+vn  0.000004 0.140790 -0.990039
+vn  0.001635 -0.185523 -0.982639
+vn  -0.000000 0.375047 -0.927006
+vn  -0.000000 0.315521 -0.948919
+vn  -0.000000 0.190584 0.981671
+vn  0.000000 -0.023679 0.999720
+vn  -0.476580 0.647017 -0.595181
+vn  -0.894760 0.442685 -0.058613
+vn  -0.307265 0.191649 0.932126
+vn  0.000009 0.686867 -0.726783
+vn  -0.000000 0.051242 0.998686
+vn  -0.700678 0.290465 0.651675
+vn  0.534250 0.508773 -0.675076
+vn  0.587843 0.167290 -0.791489
+vn  0.952504 0.304111 -0.015901
+vn  0.517499 -0.104964 -0.849222
+vn  -0.000000 -0.069705 -0.997568
+vn  0.988460 0.087904 -0.123368
+vn  0.982031 -0.135017 -0.131853
+vn  0.699214 -0.033599 0.714122
+vn  0.808187 -0.046341 0.587100
+vn  0.228011 -0.085500 0.969897
+vn  0.307615 -0.035316 0.950855
+vn  0.312350 -0.230583 -0.921558
+vn  0.434807 -0.211128 -0.875424
+vn  0.817258 -0.192237 -0.543262
+vn  0.860212 -0.079628 -0.503681
+vn  0.485376 -0.338484 0.806126
+vn  0.879601 -0.238896 0.411376
+vn  0.780183 -0.005942 0.625524
+vn  0.021944 -0.142927 0.989490
+vn  0.733206 0.481257 0.480416
+vn  0.967989 0.124791 0.217772
+vn  0.979092 0.192415 0.066003
+vn  0.000000 0.574296 0.818648
+vn  0.173616 0.613578 0.770311
+vn  0.000000 0.531438 0.847097
+vn  0.197259 0.360214 -0.911776
+vn  0.178550 -0.008381 -0.983895
+vn  0.392436 -0.212150 -0.894979
+vn  0.323912 0.498649 -0.804009
+vn  0.996548 -0.081487 -0.015858
+vn  0.997062 0.065025 -0.040475
+vn  0.497165 0.433980 -0.751324
+vn  0.466210 0.884673 0.000814
+vn  0.852773 0.508309 0.120001
+vn  0.547107 0.313657 0.776076
+vn  0.202882 0.568378 0.797362
+vn  0.421129 0.564478 0.709941
+vn  0.622456 0.310903 0.718254
+vn  0.484781 0.478023 0.732449
+vn  -0.018600 -0.220879 -0.975124
+vn  0.321939 0.457319 -0.828984
+vn  0.192143 -0.636806 -0.746699
+vn  0.727821 -0.127729 0.673767
+vn  0.638492 0.768346 -0.044411
+vn  0.520018 0.146467 0.841504
+vn  -0.456627 -0.185752 0.870051
+vn  -0.245695 -0.315097 0.916705
+vn  0.563709 0.080978 0.821994
+vn  0.586528 0.133011 -0.798933
+vn  0.486416 0.146549 -0.861350
+vn  -0.395794 -0.242129 -0.885845
+vn  -0.944512 -0.322879 0.060383
+vn  0.952197 0.305018 0.016880
+vn  0.963896 0.266068 0.010604
+vn  0.621306 0.129266 0.772832
+vn  0.913747 0.405917 -0.017256
+vn  0.496414 0.268113 -0.825644
+vn  0.827230 -0.211462 -0.520552
+vn  0.992721 -0.118779 0.019930
+vn  0.326517 0.059198 0.943336
+vn  0.975729 -0.150857 0.158727
+vn  0.780294 -0.113413 0.615044
+vn  -0.269655 0.036013 0.962283
+vn  0.000000 0.354388 0.935099
+vn  -0.186757 0.390293 0.901550
+vn  -0.000000 -0.080906 -0.996722
+vn  0.984708 -0.061992 0.162808
+vn  0.043307 -0.459264 0.887244
+vn  -0.313051 -0.023582 0.949444
+vn  0.078740 0.603455 0.793500
+vn  0.510738 -0.514175 0.689036
+vn  0.448456 0.628013 0.635992
+vn  -0.108072 0.387617 0.915464
+vn  -0.061250 0.096772 0.993420
+vn  0.809543 0.270357 0.521102
+vn  0.354557 -0.090475 0.930647
+vn  0.400942 0.583459 0.706273
+vn  0.387578 0.284656 0.876786
+vn  -0.000001 -0.056193 0.998420
+vn  0.000001 0.025648 0.999671
+vn  0.611290 0.040267 0.790381
+vn  0.255974 -0.098562 0.961646
+vn  0.381270 0.059709 0.922534
+vn  0.775366 0.232981 0.586964
+vn  0.901891 0.413265 -0.125714
+vn  -0.000000 -0.063397 0.997988
+vn  0.000001 -0.113041 0.993590
+vn  0.476575 0.647040 -0.595160
+vn  0.894760 0.442685 -0.058613
+vn  0.700678 0.290465 0.651675
+vn  0.307265 0.191648 0.932126
+vn  0.447592 -0.228498 0.864552
+vn  0.434150 -0.251368 -0.865060
+vn  -0.522898 0.099886 -0.846523
+vn  0.931861 -0.360634 0.039734
+vn  -0.962482 0.268573 0.038700
+vn  -0.479709 0.057156 0.875564
+vn  0.483808 -0.217162 0.847803
+vn  0.457382 -0.195247 -0.867571
+vn  -0.466534 0.149908 -0.871707
+vn  0.919999 -0.391886 0.005137
+vn  -0.947743 0.318533 -0.017899
+vn  -0.443918 0.136184 0.885658
+vn  0.485701 -0.180416 0.855304
+vn  0.461654 -0.171642 -0.870296
+vn  -0.476433 0.162655 -0.864034
+vn  0.948063 -0.317839 0.012460
+vn  -0.938507 0.342312 0.045026
+vn  -0.426279 0.146878 0.892588
+vn  0.458726 -0.213566 0.862531
+vn  0.449420 -0.219067 -0.866044
+vn  -0.507000 0.121897 -0.853283
+vn  0.942534 -0.333846 0.013310
+vn  -0.948494 0.312258 0.053428
+vn  -0.457584 0.100803 0.883434
+vn  0.415885 -0.234579 -0.878643
+vn  -0.586492 0.133184 -0.798930
+vn  0.477677 -0.258184 0.839742
+vn  0.365960 -0.217659 -0.904819
+vn  -0.636943 0.140344 -0.758029
+vn  0.897334 -0.439546 -0.039882
+vn  -0.972202 0.234136 0.001623
+vn  -0.592751 0.112759 0.797454
+vn  0.480608 0.058247 0.874999
+vn  -0.447175 -0.228172 0.864854
+vn  -0.434599 -0.250774 -0.865007
+vn  0.522346 0.100654 -0.846772
+vn  -0.415639 -0.234788 -0.878703
+vn  -0.931862 -0.360668 0.039396
+vn  -0.943980 -0.322447 0.070216
+vn  0.962487 0.268776 0.037126
+vn  0.443950 0.136160 0.885646
+vn  -0.483809 -0.217207 0.847791
+vn  -0.485630 -0.180631 0.855298
+vn  0.426571 0.146931 0.892440
+vn  -0.457382 -0.195247 -0.867571
+vn  0.466534 0.149908 -0.871707
+vn  0.476690 0.162169 -0.863984
+vn  -0.461669 -0.171938 -0.870229
+vn  -0.919999 -0.391886 0.005137
+vn  -0.948052 -0.317875 0.012407
+vn  0.947743 0.318533 -0.017899
+vn  0.938474 0.342368 0.045292
+vn  0.592750 0.112759 0.797454
+vn  -0.477676 -0.258184 0.839742
+vn  -0.365960 -0.217660 -0.904819
+vn  0.636943 0.140343 -0.758029
+vn  -0.897334 -0.439547 -0.039882
+vn  0.972203 0.234136 0.001623
+vn  0.457989 0.101502 0.883144
+vn  -0.458549 -0.213853 0.862554
+vn  -0.449446 -0.218482 -0.866178
+vn  0.506483 0.122411 -0.853517
+vn  -0.942482 -0.333994 0.013246
+vn  0.948401 0.312594 0.053099
+vn  -0.999980 0.004901 0.004019
+vn  -0.683242 -0.014836 -0.730041
+vn  -0.707197 -0.157299 0.689296
+vn  -0.000000 0.147016 -0.989134
+vn  0.999980 0.004901 0.004019
+vn  0.683242 -0.014836 -0.730041
+vn  0.707197 -0.157299 0.689296
+vn  -0.000000 -0.256900 0.966438
+vn  -0.798415 -0.457383 0.391579
+vn  0.798415 -0.457383 0.391578
+vn  -0.749160 0.133555 0.648785
+vn  0.749162 0.133555 0.648784
+vn  -1.316314 0.602693 3.985259
+vn  1.013627 -0.282071 -3.950896
+vn  3.551549 -1.428694 0.252067
+vn  -1.430309 -0.391771 3.849516
+vn  1.694126 0.729074 -3.961016
+vn  3.338013 1.073759 0.407284
+vn  1.385192 -0.512194 3.237574
+vn  -1.657978 0.595621 -3.303307
+vn  -3.360225 1.084029 -0.478943
+vn  1.362031 0.486816 3.315017
+vn  -1.042787 -0.424393 -3.344790
+vn  -3.561825 -1.420938 -0.443241
+vn  -0.467446 0.087830 0.879648
+vn  0.501069 -0.276828 -0.819937
+vn  0.878363 -0.477287 -0.025980
+vn  -0.558060 -0.310173 0.769651
+vn  0.514057 0.126479 -0.848380
+vn  0.967882 0.251344 -0.005570
+vn  0.558060 -0.310173 0.769651
+vn  -0.514057 0.126479 -0.848380
+vn  -0.967882 0.251345 -0.005570
+vn  0.467446 0.087830 0.879648
+vn  -0.501070 -0.276828 -0.819936
+vn  -0.878363 -0.477287 -0.025979
+vn  -0.461759 0.355440 0.812675
+vn  0.475399 0.076313 -0.876454
+vn  0.990143 -0.137204 -0.028130
+vn  -0.547254 0.048166 0.835579
+vn  0.508521 0.357868 -0.783158
+vn  0.894216 0.447616 -0.004194
+vn  0.544697 0.048536 0.837228
+vn  -0.509525 0.352708 -0.784844
+vn  -0.894394 0.447279 -0.000411
+vn  0.462474 0.351040 0.814179
+vn  -0.472248 0.077102 -0.878087
+vn  -0.990203 -0.137599 -0.023747
+# 298 vertex normals
+
+g femaletorsobase_longsleeve
+s 1
+f 84/7/84 43/46/43 1/1/1 7/8/7
+f 8/9/8 7/8/7 1/1/1 2/2/2
+f 71/86/71 100/62/100 84/7/84 7/8/7
+f 72/108/72 71/86/71 7/8/7 8/9/8
+f 47/52/47 46/51/46 72/87/72 73/88/73
+f 73/88/73 74/90/74 69/84/69 47/52/47
+f 10/11/10 85/64/85 52/63/52 4/4/4
+f 44/48/44 45/49/45 55/70/55 70/85/70
+f 14/15/14 120/65/120 118/50/118 23/24/23
+f 18/19/18 17/18/17 15/16/15 16/17/16
+f 10/11/10 19/20/19 15/16/15 17/18/17
+f 78/95/78 77/94/77 19/103/19 26/362/26
+f 16/17/16 20/347/20 25/26/25 18/19/18
+f 251/353/251 252/294/252 25/26/25 21/348/21
+f 253/295/253 251/293/251 21/22/21 24/25/24
+f 24/25/24 23/24/23 118/50/118 53/66/53
+f 258/300/258 253/295/253 24/25/24 53/66/53
+f 254/296/254 86/67/86 25/26/25 252/294/252
+f 87/68/87 18/19/18 25/26/25 86/67/86
+f 22/23/22 23/24/23 24/25/24 20/21/20
+f 261/303/261 60/75/60 22/23/22 32/33/32
+f 28/29/28 29/30/29 16/17/16 15/16/15
+f 15/16/15 19/20/19 30/31/30 28/29/28
+f 29/30/29 31/349/31 20/347/20 16/17/16
+f 22/23/22 20/21/20 31/32/31 32/33/32
+f 36/39/36 33/34/33 37/40/37 42/45/42
+f 211/35/211 212/36/212 39/42/39 38/41/38
+f 34/37/34 211/35/211 38/41/38 40/43/40
+f 33/34/33 34/105/34 40/106/40 37/40/37
+f 212/36/212 35/38/35 41/44/41 39/42/39
+f 35/38/35 36/39/36 42/45/42 41/44/41
+f 27/109/27 81/98/81 42/45/42 37/40/37
+f 28/110/28 38/41/38 39/42/39 82/99/82
+f 38/41/38 28/110/28 30/111/30 40/43/40
+f 40/106/40 30/195/30 27/109/27 37/40/37
+f 39/42/39 41/44/41 83/100/83 82/99/82
+f 41/44/41 42/45/42 81/98/81 83/100/83
+f 52/63/52 100/62/100 71/86/71 4/4/4
+f 47/52/47 6/6/6 5/5/5 46/51/46
+f 70/85/70 6/6/6 47/52/47 69/84/69
+f 67/82/67 49/56/49 259/301/259 58/73/58
+f 57/72/57 159/55/159 120/65/120 14/15/14
+f 17/18/17 161/60/161 85/64/85 10/11/10
+f 87/68/87 161/60/161 17/18/17 18/19/18
+f 5/5/5 6/6/6 54/69/54 11/12/11
+f 70/85/70 55/70/55 12/13/12 6/6/6
+f 55/70/55 56/71/56 59/74/59 51/59/51
+f 57/72/57 56/71/56 88/57/88 159/55/159
+f 259/301/259 49/56/49 11/12/11 54/69/54
+f 259/301/259 54/69/54 12/13/12 58/73/58
+f 61/76/61 13/14/13 11/12/11 49/56/49
+f 51/59/51 58/73/58 12/13/12 55/70/55
+f 64/79/64 63/78/63 59/74/59 57/72/57
+f 23/24/23 22/23/22 60/75/60 14/15/14
+f 65/80/65 61/76/61 49/56/49 67/82/67
+f 63/78/63 68/83/68 51/59/51 59/74/59
+f 80/97/80 48/54/48 65/80/65 62/77/62
+f 50/58/50 64/79/64 57/72/57 14/15/14
+f 80/97/80 62/77/62 64/79/64 50/58/50
+f 68/83/68 67/82/67 58/73/58 51/59/51
+f 61/76/61 65/80/65 48/54/48 13/14/13
+f 66/81/66 50/58/50 14/15/14 60/75/60
+f 67/82/67 68/83/68 62/77/62 65/80/65
+f 62/77/62 68/83/68 63/78/63 64/79/64
+f 70/85/70 69/84/69 174/53/174 44/48/44
+f 73/88/73 72/87/72 8/102/8 9/10/9
+f 74/90/74 73/88/73 9/10/9 79/96/79
+f 74/90/74 89/89/89 174/53/174 69/84/69
+f 9/10/9 75/92/75 3/3/3 79/96/79
+f 75/92/75 9/10/9 8/102/8 2/101/2
+f 78/220/78 26/27/26 76/93/76 5/131/5
+f 71/86/71 46/107/46 76/93/76 4/4/4
+f 26/27/26 10/11/10 4/4/4 76/93/76
+f 77/94/77 78/95/78 11/12/11 13/14/13
+f 79/96/79 3/3/3 181/47/181 182/91/182
+f 79/96/79 182/91/182 175/61/175 74/90/74
+f 27/28/27 261/303/261 32/33/32 81/355/81
+f 29/30/29 82/356/82 83/359/83 31/349/31
+f 31/32/31 83/357/83 81/355/81 32/33/32
+f 93/121/93 90/115/90 1/1/1 43/46/43
+f 90/115/90 91/116/91 2/2/2 1/1/1
+f 91/114/91 95/144/95 75/92/75 2/101/2
+f 92/130/92 94/138/94 181/47/181 3/3/3
+f 95/144/95 92/130/92 3/3/3 75/92/75
+f 84/7/84 97/118/97 96/117/96 43/46/43
+f 96/117/96 97/118/97 98/119/98 180/140/180
+f 99/120/99 97/118/97 84/7/84 100/62/100
+f 97/118/97 99/120/99 101/122/101 98/119/98
+f 104/126/104 103/125/103 101/124/101 102/123/102
+f 103/125/103 104/126/104 106/128/106 105/127/105
+f 107/129/107 108/132/108 52/63/52 85/64/85
+f 114/139/114 45/49/45 44/48/44 155/190/155
+f 118/50/118 120/65/120 119/145/119 131/158/131
+f 121/147/121 124/150/124 123/149/123 122/148/122
+f 123/149/123 110/134/110 107/129/107 122/148/122
+f 110/151/110 126/153/126 125/152/125 109/361/109
+f 127/154/127 128/350/128 124/150/124 121/147/121
+f 255/354/255 129/351/129 127/154/127 256/298/256
+f 257/299/257 130/157/130 129/156/129 255/297/255
+f 130/157/130 53/66/53 118/50/118 131/158/131
+f 258/300/258 53/66/53 130/157/130 257/299/257
+f 254/296/254 256/298/256 127/154/127 86/67/86
+f 87/68/87 86/67/86 127/154/127 121/147/121
+f 130/157/130 131/158/131 132/162/132 128/155/128
+f 262/304/262 133/163/133 132/162/132 134/164/134
+f 135/165/135 123/149/123 124/150/124 136/166/136
+f 123/149/123 135/165/135 137/167/137 110/134/110
+f 136/166/136 124/150/124 128/350/128 139/352/139
+f 139/169/139 128/155/128 132/162/132 133/163/133
+f 140/170/140 143/173/143 142/172/142 141/171/141
+f 223/174/223 146/177/146 145/176/145 144/175/144
+f 225/178/225 147/179/147 146/177/146 223/174/223
+f 141/171/141 142/172/142 147/181/147 225/180/225
+f 144/175/144 145/176/145 149/183/149 148/182/148
+f 148/182/148 149/183/149 143/173/143 140/170/140
+f 143/173/143 150/184/150 138/218/138 142/172/142
+f 145/176/145 146/177/146 135/216/135 152/187/152
+f 146/177/146 147/179/147 137/217/137 135/216/135
+f 147/181/147 142/172/142 138/218/138 137/219/137
+f 145/176/145 152/187/152 151/186/151 149/183/149
+f 149/183/149 151/186/151 150/184/150 143/173/143
+f 52/63/52 108/132/108 99/120/99 100/62/100
+f 154/189/154 113/137/113 104/126/104 102/123/102
+f 104/126/104 113/137/113 155/190/155 106/128/106
+f 260/302/260 156/191/156 157/192/157 166/202/166
+f 120/65/120 159/55/159 160/196/160 119/145/119
+f 122/148/122 107/129/107 85/64/85 161/60/161
+f 87/68/87 121/147/121 122/148/122 161/60/161
+f 112/136/112 113/137/113 154/189/154 162/198/162
+f 111/135/111 114/139/114 155/190/155 113/137/113
+f 164/200/164 158/194/158 114/139/114 163/199/163
+f 160/196/160 159/55/159 88/57/88 158/194/158
+f 260/302/260 112/136/112 162/198/162 156/191/156
+f 260/302/260 166/202/166 111/135/111 112/136/112
+f 162/198/162 116/142/116 117/143/117 156/191/156
+f 111/135/111 166/202/166 163/199/163 114/139/114
+f 164/200/164 169/205/169 168/204/168 160/196/160
+f 134/164/134 132/162/132 131/158/131 119/145/119
+f 156/191/156 117/143/117 170/206/170 157/192/157
+f 163/199/163 171/207/171 169/205/169 164/200/164
+f 170/206/170 115/141/115 172/208/172 173/209/173
+f 160/196/160 168/204/168 165/201/165 119/145/119
+f 168/204/168 173/209/173 172/208/172 165/201/165
+f 166/202/166 157/192/157 171/207/171 163/199/163
+f 115/141/115 170/206/170 117/143/117 116/142/116
+f 134/164/134 167/203/167 115/141/115 262/304/262
+f 119/145/119 165/201/165 167/203/167 134/164/134
+f 173/209/173 171/207/171 157/192/157 170/206/170
+f 169/205/169 171/207/171 173/209/173 168/204/168
+f 155/190/155 44/48/44 174/53/174 106/128/106
+f 98/215/98 101/124/101 103/125/103 176/212/176
+f 176/212/176 103/125/103 105/127/105 177/213/177
+f 174/53/174 89/89/89 105/127/105 106/128/106
+f 178/160/178 179/161/179 176/212/176 177/213/177
+f 98/215/98 176/212/176 179/161/179 180/193/180
+f 153/188/153 109/133/109 125/221/125 154/222/154
+f 153/188/153 102/214/102 99/120/99 108/132/108
+f 108/132/108 107/129/107 109/133/109 153/188/153
+f 162/198/162 125/152/125 126/153/126 116/142/116
+f 181/47/181 178/160/178 177/213/177 182/91/182
+f 175/61/175 182/91/182 177/213/177 105/127/105
+f 136/166/136 139/352/139 151/113/151 152/358/152
+f 139/169/139 133/163/133 150/112/150 151/360/151
+f 93/121/93 43/46/43 96/117/96 183/146/183
+f 180/140/180 184/159/184 183/146/183 96/117/96
+f 184/197/184 180/193/180 179/161/179 185/210/185
+f 186/211/186 178/160/178 181/47/181 94/138/94
+f 185/210/185 179/161/179 178/160/178 186/211/186
+f 192/228/192 187/223/187 33/34/33 36/39/36
+f 188/224/188 189/225/189 212/36/212 211/35/211
+f 190/226/190 188/224/188 211/35/211 34/37/34
+f 187/223/187 190/247/190 34/105/34 33/34/33
+f 189/225/189 191/227/191 35/38/35 212/36/212
+f 191/227/191 192/228/192 36/39/36 35/38/35
+f 198/234/198 193/229/193 199/235/199 204/240/204
+f 194/230/194 195/231/195 201/237/201 200/236/200
+f 196/232/196 194/230/194 200/236/200 202/238/202
+f 193/229/193 196/248/196 202/249/202 199/235/199
+f 195/231/195 197/233/197 203/239/203 201/237/201
+f 197/233/197 198/234/198 204/240/204 203/239/203
+f 275/319/275 218/257/218 213/251/213 281/326/281
+f 282/327/282 276/320/276 214/252/214 215/253/215
+f 276/320/276 277/322/277 216/254/216 214/252/214
+f 281/326/281 213/251/213 216/255/216 277/321/277
+f 283/328/283 282/327/282 215/253/215 217/256/217
+f 283/328/283 217/256/217 218/257/218 275/319/275
+f 187/223/187 192/228/192 210/246/210 205/241/205
+f 189/225/189 188/224/188 206/242/206 207/243/207
+f 206/242/206 188/224/188 190/226/190 208/244/208
+f 190/247/190 187/223/187 205/241/205 208/250/208
+f 209/245/209 191/227/191 189/225/189 207/243/207
+f 210/246/210 192/228/192 191/227/191 209/245/209
+f 205/241/205 210/246/210 204/240/204 199/235/199
+f 207/243/207 206/242/206 200/236/200 201/237/201
+f 200/236/200 206/242/206 208/244/208 202/238/202
+f 208/250/208 205/241/205 199/235/199 202/249/202
+f 203/239/203 209/245/209 207/243/207 201/237/201
+f 204/240/204 210/246/210 209/245/209 203/239/203
+f 219/258/219 140/170/140 141/171/141 220/259/220
+f 221/260/221 223/174/223 144/175/144 222/261/222
+f 224/262/224 225/178/225 223/174/223 221/260/221
+f 220/259/220 141/171/141 225/180/225 224/263/224
+f 222/261/222 144/175/144 148/182/148 226/264/226
+f 226/264/226 148/182/148 140/170/140 219/258/219
+f 227/265/227 230/268/230 229/267/229 228/266/228
+f 231/269/231 234/272/234 233/271/233 232/270/232
+f 235/273/235 236/274/236 234/272/234 231/269/231
+f 228/266/228 229/267/229 236/276/236 235/275/235
+f 232/270/232 233/271/233 238/278/238 237/277/237
+f 237/277/237 238/278/238 230/268/230 227/265/227
+f 240/280/240 239/279/239 284/329/284 278/323/278
+f 279/324/279 242/282/242 241/281/241 285/330/285
+f 285/330/285 241/281/241 243/283/243 286/331/286
+f 243/284/243 240/280/240 278/323/278 286/332/286
+f 280/325/280 244/285/244 242/282/242 279/324/279
+f 239/279/239 244/285/244 280/325/280 284/329/284
+f 220/259/220 246/287/246 245/286/245 219/258/219
+f 222/261/222 248/289/248 247/288/247 221/260/221
+f 247/288/247 249/290/249 224/262/224 221/260/221
+f 224/263/224 249/291/249 246/287/246 220/259/220
+f 250/292/250 248/289/248 222/261/222 226/264/226
+f 245/286/245 250/292/250 226/264/226 219/258/219
+f 246/287/246 229/267/229 230/268/230 245/286/245
+f 248/289/248 233/271/233 234/272/234 247/288/247
+f 234/272/234 236/274/236 249/290/249 247/288/247
+f 249/291/249 236/276/236 229/267/229 246/287/246
+f 238/278/238 233/271/233 248/289/248 250/292/250
+f 230/268/230 238/278/238 250/292/250 245/286/245
+f 133/163/133 262/304/262 138/168/138 150/112/150
+f 263/305/263 269/312/269 193/229/193 198/234/198
+f 264/306/264 270/313/270 195/231/195 194/230/194
+f 265/307/265 264/306/264 194/230/194 196/232/196
+f 193/229/193 269/312/269 265/308/265 196/248/196
+f 195/231/195 270/313/270 271/314/271 197/233/197
+f 271/314/271 263/305/263 198/234/198 197/233/197
+f 228/266/228 266/309/266 272/315/272 227/265/227
+f 232/270/232 267/310/267 273/316/273 231/269/231
+f 231/269/231 273/316/273 274/317/274 235/273/235
+f 274/318/274 266/309/266 228/266/228 235/275/235
+f 268/311/268 267/310/267 232/270/232 237/277/237
+f 227/265/227 272/315/272 268/311/268 237/277/237
+f 287/333/287 293/334/293 269/312/269 263/305/263
+f 288/335/288 294/336/294 270/313/270 264/306/264
+f 293/334/293 289/337/289 265/308/265 269/312/269
+f 294/336/294 295/338/295 271/314/271 270/313/270
+f 295/338/295 287/333/287 263/305/263 271/314/271
+f 290/339/290 296/340/296 272/315/272 266/309/266
+f 291/341/291 297/342/297 273/316/273 267/310/267
+f 297/342/297 298/343/298 274/317/274 273/316/273
+f 298/344/298 290/339/290 266/309/266 274/318/274
+f 296/340/296 292/345/292 268/311/268 272/315/272
+f 289/346/289 288/335/288 264/306/264 265/307/265
+f 292/345/292 291/341/291 267/310/267 268/311/268
+f 48/54/48 66/81/66 60/75/60 261/303/261
+f 10/11/10 26/27/26 19/20/19
+f 21/22/21 20/21/20 24/25/24
+f 27/28/27 77/94/77 13/14/13
+f 88/57/88 56/71/56 45/49/45
+f 56/71/56 55/70/55 45/49/45
+f 50/58/50 66/81/66 80/97/80
+f 66/81/66 48/54/48 80/97/80
+f 175/61/175 89/89/89 74/90/74
+f 72/108/72 46/107/46 71/86/71
+f 76/93/76 46/107/46 5/131/5
+f 27/28/27 30/104/30 77/94/77
+f 30/104/30 19/103/19 77/94/77
+f 78/95/78 5/5/5 11/12/11
+f 82/356/82 29/30/29 28/29/28
+f 21/348/21 25/26/25 20/347/20
+f 107/129/107 110/134/110 109/133/109
+f 111/135/111 113/137/113 112/136/112
+f 129/156/129 130/157/130 128/155/128
+f 138/168/138 116/142/116 126/153/126
+f 88/57/88 45/49/45 158/194/158
+f 158/194/158 45/49/45 114/139/114
+f 165/201/165 172/208/172 167/203/167
+f 164/200/164 160/196/160 158/194/158
+f 175/61/175 105/127/105 89/89/89
+f 101/122/101 99/120/99 102/214/102
+f 153/188/153 154/222/154 102/214/102
+f 138/168/138 126/153/126 137/185/137
+f 137/185/137 126/153/126 110/151/110
+f 125/152/125 162/198/162 154/189/154
+f 262/304/262 116/142/116 138/168/138
+f 152/358/152 135/165/135 136/166/136
+f 129/351/129 128/350/128 127/154/127
+f 27/28/27 13/14/13 261/303/261
+f 59/74/59 56/71/56 57/72/57
+f 167/203/167 172/208/172 115/141/115
+f 115/141/115 116/142/116 262/304/262
+f 261/303/261 13/14/13 48/54/48
+f 12/13/12 54/69/54 6/6/6
+# 292 faces
+
+g

Added: content/models/men/Basemeshes/Female_shortsleeve.obj
===================================================================
--- content/models/men/Basemeshes/Female_shortsleeve.obj	2007-02-04 16:24:31 UTC (rev 3020)
+++ content/models/men/Basemeshes/Female_shortsleeve.obj	2007-02-04 16:30:50 UTC (rev 3021)
@@ -0,0 +1,917 @@
+# Max2Obj Version 4.0 Mar 10th, 2001
+#
+# object femaletorsobase_shortsleeve to come ...
+#
+v  -10.017308 111.526642 -6.647225
+v  -16.486338 108.845444 0.625733
+v  -10.183784 105.500107 9.050971
+v  -8.036423 130.117310 -6.520596
+v  -13.877866 130.887314 2.374918
+v  -11.634297 130.450729 8.613927
+v  -8.776488 118.114838 -5.018199
+v  -14.116547 116.383377 2.660780
+v  -10.319587 114.159111 9.730738
+v  -7.258288 138.321182 -9.475197
+v  -13.906858 138.163330 3.781811
+v  -8.962823 135.316849 10.504139
+v  -13.430538 145.447983 3.817782
+v  -5.755745 150.798233 8.401252
+v  -10.568583 145.440857 -9.458625
+v  -10.133390 156.729828 -8.613871
+v  -5.413957 148.196014 -11.373479
+v  -4.718696 156.892563 -10.301750
+v  -13.160882 141.044205 -5.224549
+v  -10.203421 159.994095 -3.281825
+v  -5.910976 162.559494 -2.333625
+v  -12.621021 155.776138 2.296426
+v  -6.884421 155.201035 4.133793
+v  -4.187164 160.681732 0.978169
+v  -3.766417 162.546356 -6.401399
+v  -12.836979 135.666626 -4.143082
+v  -14.157092 146.275879 1.433090
+v  -12.709641 146.588181 -9.417372
+v  -14.433867 154.778976 -8.659425
+v  -13.209026 142.861023 -4.540787
+v  -16.771811 157.472153 -3.787279
+v  -15.998484 153.276474 1.251375
+v  -17.769724 137.246277 0.148758
+v  -17.147760 137.277496 -9.227110
+v  -21.526058 139.603729 -8.555417
+v  -15.406469 135.783615 -4.386248
+v  -23.444754 140.537170 -4.125225
+v  -21.589441 139.372559 0.135523
+v  -16.110685 143.662323 0.326995
+v  -14.690730 144.264236 -9.429429
+v  -18.312233 146.632339 -9.065251
+v  -14.137086 140.698975 -4.720365
+v  -21.349792 146.516342 -4.122272
+v  -19.022106 145.404968 -0.154098
+v  0.000064 112.403542 -8.810057
+v  0.000021 131.916168 13.100039
+v  -0.000001 138.693054 12.210077
+v  -13.104492 124.319557 2.299047
+v  -11.460074 124.805313 9.030149
+v  -11.980657 146.494705 7.968010
+v  -14.237700 139.625732 7.094033
+v  -6.512864 147.008743 11.517740
+v  -6.759913 137.452576 13.251944
+v  -0.000000 129.653946 -7.711080
+v  0.000000 159.673248 3.182381
+v  -12.723887 135.866058 7.247937
+v  -4.337295 136.438705 12.185658
+v  -1.704998 140.447693 12.435558
+v  -2.003537 145.525696 11.385657
+v  -10.509111 137.125717 11.578630
+v  -3.803242 140.762207 13.370672
+v  -10.639489 151.139313 5.250744
+v  -14.247035 142.772720 6.318820
+v  -9.387489 143.067932 13.136337
+v  -6.078716 141.725342 13.814447
+v  -5.534461 144.337311 13.003135
+v  -13.049253 142.890579 10.016339
+v  -9.264089 148.133881 8.532712
+v  -12.838294 140.026230 10.714950
+v  -9.097901 140.458038 13.468138
+v  -5.563957 125.252800 12.864098
+v  -5.662515 131.361710 12.435094
+v  -7.925682 123.617149 -5.643519
+v  -12.804278 120.560173 2.466800
+v  -10.242166 119.297501 9.741185
+v  -4.725194 119.340508 11.954474
+v  -15.433583 107.760811 5.884200
+v  -11.977942 129.447235 -2.743894
+v  -14.585693 142.025482 0.089551
+v  -14.637505 136.501419 1.039329
+v  -4.808814 111.068695 11.976105
+v  -9.184147 145.966400 11.495600
+v  -18.274984 149.839783 0.555180
+v  -17.441999 150.966141 -8.967446
+v  -20.129751 152.244812 -3.975563
+v  0.000379 118.220306 -6.800641
+v  -0.000001 138.089661 -9.232009
+v  0.000000 162.168961 -7.899947
+v  0.000000 156.600800 -10.873415
+v  -0.000000 142.117462 11.722828
+v  0.000542 118.553154 12.236349
+v  -20.226368 129.066177 0.615701
+v  -19.483698 129.056122 -9.733487
+v  -24.711706 131.891403 -8.750224
+v  -17.374008 127.439384 -4.488104
+v  -27.002769 132.829880 -3.948837
+v  -24.787388 131.527145 0.605328
+v  -11.144076 107.260757 -10.507514
+v  -18.902081 103.893738 -0.720040
+v  -11.011208 99.633568 10.158606
+v  0.000734 108.184311 -12.727822
+v  0.000733 98.933304 11.732050
+v  -17.433840 102.018929 6.254308
+v  10.018245 111.526642 -6.647225
+v  8.777162 118.114838 -5.018199
+v  14.117586 116.383377 2.660780
+v  7.925885 123.617149 -5.643519
+v  0.000153 123.276176 -6.813254
+v  12.804989 120.560173 2.466801
+v  13.104867 124.319557 2.299047
+v  10.242964 119.297501 9.741185
+v  11.460382 124.805313 9.030149
+v  4.726287 119.340508 11.954474
+v  5.564499 125.252800 12.864098
+v  7.259633 138.298004 -9.442538
+v  8.036413 130.117310 -6.520595
+v  12.836973 135.666626 -4.143082
+v  13.160878 141.044205 -5.224549
+v  8.962820 135.316849 10.504140
+v  12.723882 135.866058 7.247937
+v  11.634310 130.450729 8.613927
+v  4.337292 136.438705 12.185658
+v  11.980656 146.494705 7.968011
+v  13.430537 145.447983 3.817782
+v  14.247033 142.772720 6.318819
+v  0.000000 154.328812 5.706296
+v  5.755745 150.798233 8.401251
+v  0.000000 149.940445 8.690530
+v  4.718696 156.892563 -10.301751
+v  5.413957 148.196014 -11.373480
+v  10.568583 145.440857 -9.458625
+v  10.133390 156.729828 -8.613872
+v  14.637497 136.501419 1.039329
+v  14.585688 142.025482 0.089551
+v  3.766417 162.546356 -6.401399
+v  10.203421 159.994095 -3.281825
+v  5.910976 162.559494 -2.333625
+v  4.187163 160.681732 0.978170
+v  6.884421 155.201035 4.133793
+v  12.621021 155.776138 2.296426
+v  15.998485 153.276474 1.251376
+v  10.639489 151.139313 5.250744
+v  12.709641 146.588181 -9.417372
+v  14.433867 154.778976 -8.659425
+v  13.209023 142.861023 -4.540787
+v  14.157090 146.275879 1.433090
+v  16.771811 157.472153 -3.787279
+v  21.589441 139.372559 0.135523
+v  17.769724 137.246277 0.148758
+v  16.110683 143.662323 0.326995
+v  19.022106 145.404968 -0.154098
+v  17.147760 137.277496 -9.227108
+v  21.526058 139.603729 -8.555417
+v  18.312233 146.632339 -9.065251
+v  14.687697 144.264236 -9.429429
+v  15.406637 135.783615 -4.386248
+v  14.130649 140.544968 -4.720365
+v  23.444754 140.537170 -4.125224
+v  21.349792 146.516342 -4.122272
+v  18.274984 149.839783 0.555180
+v  20.129751 152.244812 -3.975563
+v  17.441999 150.966141 -8.967446
+v  11.977941 129.447235 -2.743894
+v  13.877878 130.887314 2.374917
+v  5.662616 131.361710 12.435094
+v  14.237697 139.625732 7.094034
+v  12.838292 140.026230 10.714950
+v  1.704997 140.447693 12.435559
+v  0.000000 145.717392 11.051542
+v  2.003537 145.525696 11.385656
+v  0.000000 148.040848 -11.185639
+v  13.906854 138.163330 3.781811
+v  6.759910 137.452576 13.251944
+v  3.803241 140.762207 13.370673
+v  6.512864 147.008743 11.517740
+v  10.509110 137.125717 11.578630
+v  9.264089 148.133881 8.532712
+v  5.534461 144.337311 13.003135
+v  6.078716 141.725342 13.814447
+v  13.049253 142.890579 10.016339
+v  9.097900 140.458038 13.468138
+v  9.184145 145.966400 11.495600
+v  9.387489 143.067932 13.136338
+v  0.000233 125.201492 13.366743
+v  0.000690 115.137566 12.557659
+v  10.320833 114.159111 9.730738
+v  4.810304 111.068695 11.976105
+v  10.185263 105.500107 9.050971
+v  15.435047 107.760811 5.884199
+v  16.487801 108.845444 0.625733
+v  0.000737 104.756264 11.433276
+v  0.000750 110.166374 12.533469
+v  24.787388 131.527725 0.606747
+v  20.226368 129.067520 0.617113
+v  19.483698 129.056290 -9.733766
+v  24.711706 131.890259 -8.749557
+v  17.374008 127.439270 -4.488245
+v  27.002769 132.829254 -3.957066
+v  11.145541 107.260757 -10.507514
+v  18.903545 103.893738 -0.720040
+v  17.435307 102.018929 6.254308
+v  11.012673 99.633568 10.158606
+v  -5.627877 166.323303 -1.463061
+v  -4.332507 167.198044 -5.966127
+v  -3.656772 164.238861 2.334900
+v  0.000000 166.890579 -6.732415
+v  5.627877 166.323303 -1.463061
+v  4.332507 167.198044 -5.966127
+v  3.656772 164.238861 2.334900
+v  0.000000 163.725769 4.154183
+v  -12.986375 137.237885 8.603955
+v  12.986370 137.237885 8.603955
+v  -13.292703 149.982285 3.435947
+v  13.292703 149.982254 3.435948
+# 214 vertices
+
+vt  0.607988 0.254416 1.295951
+vt  0.705111 0.251134 1.295951
+vt  0.425065 0.642201 1.295951
+vt  0.615984 0.363323 1.295951
+vt  0.249778 0.780033 1.295950
+vt  0.323205 0.771228 1.295950
+vt  0.492365 0.296378 1.295952
+vt  0.599970 0.297157 1.295951
+vt  0.705111 0.293031 1.295951
+vt  0.326789 0.688468 1.295951
+vt  0.622325 0.411968 1.295951
+vt  0.284751 0.818862 1.295950
+vt  0.378554 0.794516 1.295950
+vt  0.293397 0.863366 1.295950
+vt  0.428360 0.882927 1.295950
+vt  0.692252 0.450889 1.295951
+vt  0.649746 0.514652 1.295950
+vt  0.592709 0.466297 1.295951
+vt  0.574332 0.513718 1.295951
+vt  0.753869 0.412014 1.295951
+vt  0.670344 0.544625 1.295950
+vt  0.606410 0.564937 1.295951
+vt  0.332274 0.912416 1.295950
+vt  0.406363 0.914405 1.295950
+vt  0.425352 0.952725 1.295950
+vt  0.566031 0.551512 1.295951
+vt  0.705132 0.389238 1.295951
+vt  0.249992 0.874908 1.295950
+vt  0.739689 0.463831 1.295950
+vt  0.708636 0.512167 1.295950
+vt  0.773169 0.420575 1.295951
+vt  0.738972 0.544625 1.295950
+vt  0.278348 0.909542 1.295950
+vt  0.116536 0.873821 1.295950
+vt  0.876517 0.463445 1.295950
+vt  0.881653 0.502465 1.295950
+vt  0.902011 0.425154 1.295951
+vt  0.902011 0.544625 1.295950
+vt  0.114687 0.903579 1.295950
+vt  0.196414 0.877496 1.295950
+vt  0.785381 0.465456 1.295950
+vt  0.796529 0.499960 1.295950
+vt  0.796781 0.425518 1.295951
+vt  0.848602 0.544625 1.295950
+vt  0.185636 0.901647 1.295950
+vt  0.495268 0.255861 1.295952
+vt  0.496922 0.642319 1.295951
+vt  0.496922 0.774453 1.295951
+vt  0.496922 0.811018 1.295951
+vt  0.495985 0.910578 1.295951
+vt  0.197058 0.753609 1.295951
+vt  0.321306 0.740549 1.295950
+vt  0.496922 0.742987 1.295951
+vt  0.349439 0.860304 1.295950
+vt  0.496922 0.852064 1.295951
+vt  0.314591 0.824468 1.295950
+vt  0.496922 0.830656 1.295951
+vt  0.426289 0.856720 1.295950
+vt  0.419767 0.805808 1.295950
+vt  0.502604 0.465523 1.295951
+vt  0.496922 0.695071 1.295951
+vt  0.491781 0.327638 1.295952
+vt  0.493362 0.364063 1.295951
+vt  0.497237 0.410388 1.295951
+vt  0.496111 0.880315 1.295950
+vt  0.495772 0.945421 1.295951
+vt  0.508439 0.546156 1.295951
+vt  0.506444 0.511967 1.295951
+vt  0.320298 0.802377 1.295950
+vt  0.458709 0.798051 1.295950
+vt  0.479062 0.820268 1.295950
+vt  0.478844 0.850724 1.295950
+vt  0.375154 0.807044 1.295950
+vt  0.457666 0.821982 1.295950
+vt  0.357808 0.888881 1.295950
+vt  0.313370 0.843062 1.295950
+vt  0.402299 0.835828 1.295950
+vt  0.436318 0.827894 1.295950
+vt  0.441265 0.841910 1.295950
+vt  0.352165 0.838001 1.295950
+vt  0.385024 0.868725 1.295950
+vt  0.353875 0.823746 1.295950
+vt  0.403324 0.823496 1.295950
+vt  0.445559 0.742289 1.295950
+vt  0.445406 0.771885 1.295950
+vt  0.599069 0.330584 1.295951
+vt  0.197058 0.724048 1.295951
+vt  0.323973 0.713424 1.295951
+vt  0.496922 0.709935 1.295951
+vt  0.452392 0.714708 1.295951
+vt  0.496922 0.669848 1.295951
+vt  0.287167 0.648549 1.295951
+vt  0.197058 0.783873 1.295951
+vt  0.259593 0.846743 1.295950
+vt  0.263491 0.812638 1.295950
+vt  0.450734 0.673973 1.295951
+vt  0.398591 0.851714 1.295950
+vt  0.226311 0.904977 1.295950
+vt  0.759447 0.507963 1.295950
+vt  0.787528 0.544625 1.295950
+vt  0.197058 0.651915 1.295951
+vt  0.197058 0.701113 1.295951
+vt  0.216614 0.843288 1.295951
+vt  0.204673 0.814087 1.295951
+vt  0.211387 0.846332 1.295951
+vt  0.098133 0.839192 1.295951
+vt  0.180518 0.839813 1.295951
+vt  0.705111 0.337736 1.295951
+vt  0.705111 0.312562 1.295951
+vt  0.705256 0.363509 1.295951
+vt  0.025262 0.903312 1.295950
+vt  0.024403 0.877324 1.295950
+vt  0.970958 0.464635 1.295950
+vt  0.976667 0.501221 1.295950
+vt  0.973993 0.424981 1.295951
+vt  0.022705 0.838564 1.295951
+vt  0.968808 0.544625 1.295950
+vt  0.500519 0.218089 1.295952
+vt  0.624621 0.218089 1.295951
+vt  0.705111 0.218494 1.295951
+vt  0.197058 0.613810 1.295951
+vt  0.288610 0.613810 1.295951
+vt  0.385119 0.613810 1.295951
+vt  0.496922 0.613810 1.295951
+vt  0.328401 0.938731 1.295950
+vt  0.386957 0.967411 1.295951
+vt  0.259098 0.938731 1.295950
+vt  0.096775 0.938731 1.295950
+vt  0.152763 0.938731 1.295950
+vt  0.216575 0.938731 1.295950
+vt  0.024858 0.938731 1.295950
+vt  0.380038 0.254579 1.295951
+vt  0.383715 0.297824 1.295951
+vt  0.280706 0.293031 1.295951
+vt  0.383839 0.331942 1.295951
+vt  0.280706 0.312562 1.295951
+vt  0.792077 0.753609 1.295951
+vt  0.792077 0.724048 1.295951
+vt  0.666437 0.713747 1.295951
+vt  0.669063 0.740890 1.295950
+vt  0.540609 0.714782 1.295951
+vt  0.546756 0.742720 1.295950
+vt  0.373563 0.414449 1.295951
+vt  0.368341 0.365828 1.295951
+vt  0.280706 0.389238 1.295951
+vt  0.243827 0.421770 1.295951
+vt  0.613346 0.794895 1.295950
+vt  0.671689 0.802896 1.295950
+vt  0.667742 0.771579 1.295950
+vt  0.535446 0.798247 1.295950
+vt  0.644056 0.860446 1.295950
+vt  0.701649 0.863369 1.295950
+vt  0.680239 0.843277 1.295950
+vt  0.563852 0.883007 1.295950
+vt  0.439968 0.515126 1.295951
+vt  0.413688 0.467981 1.295951
+vt  0.313650 0.454430 1.295951
+vt  0.366123 0.515998 1.295950
+vt  0.787283 0.839048 1.295951
+vt  0.730084 0.812884 1.295950
+vt  0.739775 0.846382 1.295950
+vt  0.452548 0.553830 1.295951
+vt  0.351631 0.545041 1.295950
+vt  0.414769 0.570408 1.295951
+vt  0.605076 0.968687 1.295951
+vt  0.565645 0.953150 1.295950
+vt  0.584605 0.914651 1.295950
+vt  0.657889 0.938990 1.295950
+vt  0.657891 0.912269 1.295950
+vt  0.712962 0.909489 1.295950
+vt  0.634275 0.888957 1.295950
+vt  0.263743 0.467462 1.295950
+vt  0.305128 0.513162 1.295950
+vt  0.225523 0.428403 1.295951
+vt  0.744532 0.874729 1.295950
+vt  0.282068 0.544723 1.295950
+vt  0.726469 0.938990 1.295950
+vt  0.882849 0.903924 1.295950
+vt  0.881190 0.874140 1.295950
+vt  0.799166 0.878041 1.295950
+vt  0.808772 0.901821 1.295950
+vt  0.124494 0.464706 1.295950
+vt  0.119561 0.503290 1.295950
+vt  0.208385 0.501444 1.295950
+vt  0.217058 0.467741 1.295950
+vt  0.107020 0.425435 1.295951
+vt  0.197052 0.426028 1.295951
+vt  0.896879 0.839516 1.295951
+vt  0.809933 0.839420 1.295951
+vt  0.104583 0.544723 1.295950
+vt  0.160721 0.544723 1.295950
+vt  0.897061 0.938990 1.295950
+vt  0.838228 0.938990 1.295950
+vt  0.766203 0.905444 1.295950
+vt  0.790472 0.846531 1.295951
+vt  0.232935 0.544723 1.295950
+vt  0.250311 0.509350 1.295950
+vt  0.777453 0.938990 1.295950
+vt  0.280706 0.363509 1.295951
+vt  0.740429 0.780290 1.295950
+vt  0.547364 0.772251 1.295950
+vt  0.678532 0.824762 1.295950
+vt  0.638907 0.824035 1.295950
+vt  0.515374 0.820368 1.295950
+vt  0.514844 0.850793 1.295950
+vt  0.708869 0.819319 1.295950
+vt  0.572444 0.806087 1.295950
+vt  0.535861 0.822172 1.295950
+vt  0.566371 0.856846 1.295950
+vt  0.617254 0.807365 1.295950
+vt  0.607699 0.868840 1.295950
+vt  0.551407 0.842093 1.295950
+vt  0.556240 0.828155 1.295950
+vt  0.640958 0.838249 1.295950
+vt  0.589263 0.823780 1.295950
+vt  0.594376 0.851907 1.295950
+vt  0.590502 0.836081 1.295950
+vt  0.664431 0.688564 1.295951
+vt  0.543192 0.674059 1.295951
+vt  0.280706 0.337736 1.295951
+vt  0.792077 0.701113 1.295951
+vt  0.569537 0.642319 1.295951
+vt  0.704598 0.648570 1.295951
+vt  0.280706 0.251134 1.295951
+vt  0.792077 0.651915 1.295951
+vt  0.789338 0.814087 1.295951
+vt  0.792077 0.783873 1.295951
+vt  0.976013 0.903526 1.295950
+vt  0.978317 0.876952 1.295950
+vt  0.024152 0.464244 1.295950
+vt  0.021536 0.499720 1.295950
+vt  0.030159 0.425685 1.295951
+vt  0.977210 0.838861 1.295951
+vt  0.025012 0.544723 1.295950
+vt  0.975039 0.938990 1.295950
+vt  0.376812 0.218089 1.295951
+vt  0.280706 0.218520 1.295951
+vt  0.792077 0.613810 1.295951
+vt  0.706511 0.613810 1.295951
+vt  0.610873 0.613810 1.295951
+vt  0.582601 0.587908 1.295951
+vt  0.406489 0.992514 1.295951
+vt  0.546339 0.576787 1.295951
+vt  0.456153 0.974961 1.295951
+vt  0.508277 0.573933 1.295951
+vt  0.438777 0.595671 1.295951
+vt  0.581618 0.993349 1.295951
+vt  0.475342 0.579781 1.295951
+vt  0.538006 0.975704 1.295951
+vt  0.496878 0.970822 1.295951
+vt  0.333550 0.809672 1.295950
+vt  0.659103 0.810076 1.295950
+vt  0.306038 0.886086 1.295950
+vt  0.686901 0.886082 1.295950
+# 254 texture vertices
+
+vn  -0.534279 0.508738 -0.675079
+vn  -0.901903 0.413238 -0.125715
+vn  -0.381269 0.059705 0.922534
+vn  -0.435126 -0.212044 -0.875045
+vn  -0.992718 -0.118804 0.019934
+vn  -0.780183 -0.005966 0.625523
+vn  -0.587854 0.167252 -0.791489
+vn  -0.952523 0.304053 -0.015890
+vn  -0.611282 0.040232 0.790390
+vn  -0.311639 -0.230266 -0.921878
+vn  -0.984708 -0.061993 0.162808
+vn  -0.485374 -0.338487 0.806126
+vn  -0.967989 0.124791 0.217773
+vn  -0.173616 0.613578 0.770311
+vn  -0.393398 -0.211151 -0.894792
+vn  -0.323912 0.498649 -0.804009
+vn  -0.178355 -0.007726 -0.983936
+vn  -0.197260 0.360214 -0.911776
+vn  -0.860622 -0.079181 -0.503051
+vn  -0.466210 0.884673 0.000814
+vn  -0.852773 0.508309 0.120001
+vn  -0.421129 0.564478 0.709940
+vn  -0.202882 0.568378 0.797362
+vn  -0.547107 0.313657 0.776075
+vn  -0.497165 0.433980 -0.751324
+vn  -0.817681 -0.192485 -0.542538
+vn  -0.728473 -0.129222 0.672777
+vn  0.018541 -0.220985 -0.975101
+vn  -0.321939 0.457319 -0.828984
+vn  -0.216076 -0.657062 -0.722206
+vn  -0.638492 0.768346 -0.044411
+vn  -0.622456 0.310903 0.718254
+vn  0.500926 -0.116666 0.857591
+vn  0.470425 -0.135585 -0.871962
+vn  -0.555192 0.215526 -0.803312
+vn  0.965281 -0.247706 0.082913
+vn  -0.923190 0.383941 0.017599
+vn  -0.478341 0.233209 0.846642
+vn  0.253253 -0.316716 0.914086
+vn  0.395828 -0.243256 -0.885521
+vn  -0.486424 0.146558 -0.861344
+vn  0.942540 -0.328072 0.063147
+vn  -0.963896 0.266068 0.010604
+vn  -0.563709 0.080978 0.821994
+vn  -0.000022 0.518686 -0.854965
+vn  -0.000001 0.073674 0.997282
+vn  -0.000000 0.044120 0.999026
+vn  -0.982023 -0.135086 -0.131843
+vn  -0.808181 -0.046398 0.587103
+vn  -0.733206 0.481257 0.480417
+vn  -0.975730 -0.150856 0.158727
+vn  -0.078740 0.603455 0.793500
+vn  -0.043307 -0.459264 0.887244
+vn  0.000362 -0.198206 -0.980160
+vn  0.000000 0.164981 0.986297
+vn  -0.879601 -0.238897 0.411375
+vn  -0.021945 -0.142929 0.989490
+vn  0.269655 0.036013 0.962283
+vn  0.186757 0.390293 0.901550
+vn  -0.510737 -0.514175 0.689036
+vn  0.313051 -0.023582 0.949444
+vn  -0.484780 0.478023 0.732449
+vn  -0.979091 0.192415 0.066003
+vn  -0.387578 0.284656 0.876786
+vn  0.061250 0.096772 0.993420
+vn  0.108072 0.387617 0.915464
+vn  -0.809543 0.270357 0.521102
+vn  -0.448457 0.628013 0.635992
+vn  -0.780293 -0.113413 0.615044
+vn  -0.354557 -0.090475 0.930647
+vn  -0.307605 -0.035339 0.950858
+vn  -0.326516 0.059185 0.943337
+vn  -0.517508 -0.104997 -0.849212
+vn  -0.988469 0.087820 -0.123359
+vn  -0.699206 -0.033659 0.714127
+vn  -0.228002 -0.085517 0.969898
+vn  -0.775369 0.232964 0.586967
+vn  -0.827230 -0.211483 -0.520543
+vn  -0.997062 0.065026 -0.040475
+vn  -0.996548 -0.081488 -0.015857
+vn  -0.255969 -0.098568 0.961647
+vn  -0.400942 0.583459 0.706273
+vn  -0.621306 0.129266 0.772832
+vn  -0.496414 0.268113 -0.825644
+vn  -0.913747 0.405917 -0.017256
+vn  0.000004 0.140790 -0.990039
+vn  0.001635 -0.185523 -0.982639
+vn  -0.000000 0.375047 -0.927006
+vn  -0.000000 0.315521 -0.948919
+vn  -0.000000 0.190584 0.981671
+vn  0.000000 -0.023679 0.999720
+vn  0.530034 -0.104323 0.841535
+vn  0.536728 -0.107320 -0.836902
+vn  -0.522242 0.242583 -0.817568
+vn  0.969091 -0.237132 0.068055
+vn  -0.911014 0.411364 0.028870
+vn  -0.413209 0.221257 0.883348
+vn  -0.476580 0.647017 -0.595181
+vn  -0.894760 0.442685 -0.058613
+vn  -0.307265 0.191649 0.932126
+vn  0.000009 0.686867 -0.726783
+vn  -0.000000 0.051242 0.998686
+vn  -0.700678 0.290465 0.651675
+vn  0.534250 0.508773 -0.675076
+vn  0.587843 0.167290 -0.791489
+vn  0.952504 0.304111 -0.015901
+vn  0.517499 -0.104964 -0.849222
+vn  -0.000000 -0.069705 -0.997568
+vn  0.988460 0.087904 -0.123368
+vn  0.982031 -0.135017 -0.131853
+vn  0.699214 -0.033599 0.714122
+vn  0.808187 -0.046341 0.587100
+vn  0.228011 -0.085500 0.969897
+vn  0.307615 -0.035316 0.950855
+vn  0.312350 -0.230583 -0.921558
+vn  0.434807 -0.211128 -0.875424
+vn  0.817258 -0.192237 -0.543262
+vn  0.860212 -0.079628 -0.503681
+vn  0.485376 -0.338484 0.806126
+vn  0.879601 -0.238896 0.411376
+vn  0.780183 -0.005942 0.625524
+vn  0.021944 -0.142927 0.989490
+vn  0.733206 0.481257 0.480416
+vn  0.967989 0.124791 0.217772
+vn  0.979092 0.192415 0.066003
+vn  0.000000 0.574296 0.818648
+vn  0.173616 0.613578 0.770311
+vn  0.000000 0.531438 0.847097
+vn  0.197259 0.360214 -0.911776
+vn  0.178550 -0.008381 -0.983895
+vn  0.392436 -0.212150 -0.894979
+vn  0.323912 0.498649 -0.804009
+vn  0.996548 -0.081487 -0.015858
+vn  0.997062 0.065025 -0.040475
+vn  0.497165 0.433980 -0.751324
+vn  0.466210 0.884673 0.000814
+vn  0.852773 0.508309 0.120001
+vn  0.547107 0.313657 0.776076
+vn  0.202882 0.568378 0.797362
+vn  0.421129 0.564478 0.709941
+vn  0.622456 0.310903 0.718254
+vn  0.484781 0.478023 0.732449
+vn  -0.018600 -0.220879 -0.975124
+vn  0.321939 0.457319 -0.828984
+vn  0.192143 -0.636806 -0.746699
+vn  0.727821 -0.127729 0.673767
+vn  0.638492 0.768346 -0.044411
+vn  0.478439 0.233200 0.846589
+vn  -0.499742 -0.117512 0.858166
+vn  -0.245695 -0.315097 0.916705
+vn  0.563709 0.080978 0.821994
+vn  -0.470349 -0.135665 -0.871990
+vn  0.555215 0.215504 -0.803302
+vn  0.486416 0.146549 -0.861350
+vn  -0.395793 -0.242327 -0.885791
+vn  -0.964657 -0.250324 0.082305
+vn  -0.944131 -0.324154 0.059503
+vn  0.923226 0.383851 0.017662
+vn  0.963896 0.266068 0.010604
+vn  0.621306 0.129266 0.772832
+vn  0.913747 0.405917 -0.017256
+vn  0.496414 0.268113 -0.825644
+vn  0.827230 -0.211462 -0.520552
+vn  0.992721 -0.118779 0.019930
+vn  0.326517 0.059198 0.943336
+vn  0.975729 -0.150857 0.158727
+vn  0.780294 -0.113413 0.615044
+vn  -0.269655 0.036013 0.962283
+vn  0.000000 0.354388 0.935099
+vn  -0.186757 0.390293 0.901550
+vn  -0.000000 -0.080906 -0.996722
+vn  0.984708 -0.061992 0.162808
+vn  0.043307 -0.459264 0.887244
+vn  -0.313051 -0.023582 0.949444
+vn  0.078740 0.603455 0.793500
+vn  0.510738 -0.514175 0.689036
+vn  0.448456 0.628013 0.635992
+vn  -0.108072 0.387617 0.915464
+vn  -0.061250 0.096772 0.993420
+vn  0.809543 0.270357 0.521102
+vn  0.354557 -0.090475 0.930647
+vn  0.400942 0.583459 0.706273
+vn  0.387578 0.284656 0.876786
+vn  -0.000001 -0.056193 0.998420
+vn  0.000001 0.025648 0.999671
+vn  0.611290 0.040267 0.790381
+vn  0.255974 -0.098562 0.961646
+vn  0.381270 0.059709 0.922534
+vn  0.775366 0.232981 0.586964
+vn  0.901891 0.413265 -0.125714
+vn  -0.000000 -0.063397 0.997988
+vn  0.000001 -0.113041 0.993590
+vn  0.413555 0.221562 0.883110
+vn  -0.530080 -0.104226 0.841518
+vn  -0.536644 -0.107306 -0.836958
+vn  0.522112 0.242602 -0.817645
+vn  -0.969099 -0.237118 0.067982
+vn  0.910981 0.411509 0.027801
+vn  0.476575 0.647040 -0.595160
+vn  0.894760 0.442685 -0.058613
+vn  0.700678 0.290465 0.651675
+vn  0.307265 0.191648 0.932126
+vn  -0.999980 0.004901 0.004019
+vn  -0.683242 -0.014836 -0.730041
+vn  -0.707197 -0.157299 0.689296
+vn  -0.000000 0.147016 -0.989134
+vn  0.999980 0.004901 0.004019
+vn  0.683242 -0.014836 -0.730041
+vn  0.707197 -0.157299 0.689296
+vn  -0.000000 -0.256900 0.966438
+vn  -0.798415 -0.457383 0.391579
+vn  0.798415 -0.457383 0.391578
+vn  -0.749160 0.133555 0.648785
+vn  0.749162 0.133555 0.648784
+# 214 vertex normals
+
+g femaletorsobase_shortsleeve
+s 1
+f 86/7/86 45/46/45 1/1/1 7/8/7
+f 8/9/8 7/8/7 1/1/1 2/2/2
+f 73/86/73 108/62/108 86/7/86 7/8/7
+f 74/109/74 73/86/73 7/8/7 8/9/8
+f 49/52/49 48/51/48 74/87/74 75/88/75
+f 75/88/75 76/90/76 71/84/71 49/52/49
+f 10/11/10 87/64/87 54/63/54 4/4/4
+f 46/48/46 47/49/47 57/70/57 72/85/72
+f 14/15/14 128/65/128 126/50/126 23/24/23
+f 18/19/18 17/18/17 15/16/15 16/17/16
+f 10/11/10 19/20/19 15/16/15 17/18/17
+f 80/95/80 79/94/79 19/103/19 26/104/26
+f 16/17/16 20/21/20 25/26/25 18/19/18
+f 203/241/203 204/243/204 25/26/25 21/22/21
+f 205/244/205 203/242/203 21/126/21 24/25/24
+f 24/25/24 23/24/23 126/50/126 55/66/55
+f 210/250/210 205/244/205 24/25/24 55/66/55
+f 206/245/206 88/67/88 25/26/25 204/243/204
+f 89/68/89 18/19/18 25/26/25 88/67/88
+f 22/23/22 23/24/23 24/25/24 20/125/20
+f 213/253/213 62/75/62 22/23/22 32/33/32
+f 28/29/28 29/30/29 16/17/16 15/16/15
+f 15/16/15 19/20/19 30/31/30 28/29/28
+f 29/30/29 31/32/31 20/21/20 16/17/16
+f 22/23/22 20/125/20 31/127/31 32/33/32
+f 38/39/38 33/34/33 39/40/39 44/45/44
+f 34/35/34 35/36/35 41/42/41 40/41/40
+f 36/37/36 34/35/34 40/41/40 42/43/42
+f 33/34/33 36/106/36 42/107/42 39/40/39
+f 35/36/35 37/38/37 43/44/43 41/42/41
+f 37/128/37 38/39/38 44/45/44 43/129/43
+f 27/28/27 83/98/83 44/45/44 39/40/39
+f 28/29/28 40/41/40 41/42/41 84/99/84
+f 40/41/40 28/29/28 30/31/30 42/43/42
+f 42/107/42 30/105/30 27/28/27 39/40/39
+f 41/42/41 43/44/43 85/100/85 84/99/84
+f 43/129/43 44/45/44 83/98/83 85/130/85
+f 54/63/54 108/62/108 73/86/73 4/4/4
+f 49/52/49 6/6/6 5/5/5 48/51/48
+f 72/85/72 6/6/6 49/52/49 71/84/71
+f 69/82/69 51/56/51 211/251/211 60/73/60
+f 59/72/59 169/55/169 128/65/128 14/15/14
+f 17/18/17 171/60/171 87/64/87 10/11/10
+f 89/68/89 171/60/171 17/18/17 18/19/18
+f 5/5/5 6/6/6 56/69/56 11/12/11
+f 72/85/72 57/70/57 12/13/12 6/6/6
+f 57/70/57 58/71/58 61/74/61 53/59/53
+f 59/72/59 58/71/58 90/57/90 169/55/169
+f 211/251/211 51/56/51 11/12/11 56/69/56
+f 211/251/211 56/69/56 12/13/12 60/73/60
+f 63/76/63 13/14/13 11/12/11 51/56/51
+f 53/59/53 60/73/60 12/13/12 57/70/57
+f 66/79/66 65/78/65 61/74/61 59/72/59
+f 23/24/23 22/23/22 62/75/62 14/15/14
+f 67/80/67 63/76/63 51/56/51 69/82/69
+f 65/78/65 70/83/70 53/59/53 61/74/61
+f 82/97/82 50/54/50 67/80/67 64/77/64
+f 52/58/52 66/79/66 59/72/59 14/15/14
+f 82/97/82 64/77/64 66/79/66 52/58/52
+f 70/83/70 69/82/69 60/73/60 53/59/53
+f 63/76/63 67/80/67 50/54/50 13/14/13
+f 68/81/68 52/58/52 14/15/14 62/75/62
+f 69/82/69 70/83/70 64/77/64 67/80/67
+f 64/77/64 70/83/70 65/78/65 66/79/66
+f 72/85/72 71/84/71 184/53/184 46/48/46
+f 75/88/75 74/87/74 8/102/8 9/10/9
+f 76/90/76 75/88/75 9/10/9 81/96/81
+f 76/90/76 91/89/91 184/53/184 71/84/71
+f 9/10/9 77/92/77 3/3/3 81/96/81
+f 77/92/77 9/10/9 8/102/8 2/101/2
+f 80/95/80 26/104/26 78/93/78 5/5/5
+f 73/86/73 48/108/48 78/110/78 4/4/4
+f 26/27/26 10/11/10 4/4/4 78/110/78
+f 79/94/79 80/95/80 11/12/11 13/14/13
+f 81/96/81 3/3/3 191/47/191 192/91/192
+f 81/96/81 192/91/192 185/61/185 76/90/76
+f 27/28/27 213/253/213 32/33/32 83/98/83
+f 29/30/29 84/99/84 85/100/85 31/32/31
+f 31/127/31 85/130/85 83/98/83 32/33/32
+f 97/111/97 92/112/92 33/34/33 38/39/38
+f 93/113/93 94/114/94 35/36/35 34/35/34
+f 95/115/95 93/113/93 34/35/34 36/37/36
+f 92/112/92 95/116/95 36/106/36 33/34/33
+f 94/114/94 96/117/96 37/38/37 35/36/35
+f 96/131/96 97/111/97 38/39/38 37/128/37
+f 101/118/101 98/119/98 1/1/1 45/46/45
+f 98/119/98 99/120/99 2/2/2 1/1/1
+f 99/121/99 103/122/103 77/92/77 2/101/2
+f 100/123/100 102/124/102 191/47/191 3/3/3
+f 103/122/103 100/123/100 3/3/3 77/92/77
+f 86/7/86 105/133/105 104/132/104 45/46/45
+f 104/132/104 105/133/105 106/134/106 190/224/190
+f 107/135/107 105/133/105 86/7/86 108/62/108
+f 105/133/105 107/135/107 109/136/109 106/134/106
+f 112/140/112 111/139/111 109/138/109 110/137/110
+f 111/139/111 112/140/112 114/142/114 113/141/113
+f 115/143/115 116/144/116 54/63/54 87/64/87
+f 122/150/122 47/49/47 46/48/46 165/201/165
+f 126/50/126 128/65/128 127/154/127 139/167/139
+f 129/155/129 132/158/132 131/157/131 130/156/130
+f 131/157/131 118/146/118 115/143/115 130/156/130
+f 118/159/118 134/161/134 133/160/133 117/226/117
+f 135/162/135 136/163/136 132/158/132 129/155/129
+f 207/246/207 137/164/137 135/162/135 208/248/208
+f 209/249/209 138/166/138 137/165/137 207/247/207
+f 138/166/138 55/66/55 126/50/126 139/167/139
+f 210/250/210 55/66/55 138/166/138 209/249/209
+f 206/245/206 208/248/208 135/162/135 88/67/88
+f 89/68/89 88/67/88 135/162/135 129/155/129
+f 138/166/138 139/167/139 140/169/140 136/168/136
+f 214/254/214 141/170/141 140/169/140 142/171/142
+f 143/172/143 131/157/131 132/158/132 144/173/144
+f 131/157/131 143/172/143 145/174/145 118/146/118
+f 144/173/144 132/158/132 136/163/136 147/176/147
+f 147/177/147 136/168/136 140/169/140 141/170/141
+f 148/178/148 151/181/151 150/180/150 149/179/149
+f 152/182/152 155/185/155 154/184/154 153/183/153
+f 156/186/156 157/187/157 155/185/155 152/182/152
+f 149/179/149 150/180/150 157/189/157 156/188/156
+f 153/183/153 154/184/154 159/191/159 158/190/158
+f 158/192/158 159/193/159 151/181/151 148/178/148
+f 151/181/151 160/194/160 146/175/146 150/180/150
+f 154/184/154 155/185/155 143/172/143 162/197/162
+f 155/185/155 157/187/157 145/174/145 143/172/143
+f 157/189/157 150/180/150 146/175/146 145/195/145
+f 154/184/154 162/197/162 161/196/161 159/191/159
+f 159/193/159 161/198/161 160/194/160 151/181/151
+f 54/63/54 116/144/116 107/135/107 108/62/108
+f 164/200/164 121/149/121 112/140/112 110/137/110
+f 112/140/112 121/149/121 165/201/165 114/142/114
+f 212/252/212 166/202/166 167/203/167 176/210/176
+f 128/65/128 169/55/169 170/205/170 127/154/127
+f 130/156/130 115/143/115 87/64/87 171/60/171
+f 89/68/89 129/155/129 130/156/130 171/60/171
+f 120/148/120 121/149/121 164/200/164 172/206/172
+f 119/147/119 122/150/122 165/201/165 121/149/121
+f 174/208/174 168/204/168 122/150/122 173/207/173
+f 170/205/170 169/55/169 90/57/90 168/204/168
+f 212/252/212 120/148/120 172/206/172 166/202/166
+f 212/252/212 176/210/176 119/147/119 120/148/120
+f 172/206/172 124/152/124 125/153/125 166/202/166
+f 119/147/119 176/210/176 173/207/173 122/150/122
+f 174/208/174 179/213/179 178/212/178 170/205/170
+f 142/171/142 140/169/140 139/167/139 127/154/127
+f 166/202/166 125/153/125 180/214/180 167/203/167
+f 173/207/173 181/215/181 179/213/179 174/208/174
+f 180/214/180 123/151/123 182/216/182 183/217/183
+f 170/205/170 178/212/178 175/209/175 127/154/127
+f 178/212/178 183/217/183 182/216/182 175/209/175
+f 176/210/176 167/203/167 181/215/181 173/207/173
+f 123/151/123 180/214/180 125/153/125 124/152/124
+f 142/171/142 177/211/177 123/151/123 214/254/214
+f 127/154/127 175/209/175 177/211/177 142/171/142
+f 183/217/183 181/215/181 167/203/167 180/214/180
+f 179/213/179 181/215/181 183/217/183 178/212/178
+f 165/201/165 46/48/46 184/53/184 114/142/114
+f 106/221/106 109/138/109 111/139/111 186/218/186
+f 186/218/186 111/139/111 113/141/113 187/219/187
+f 184/53/184 91/89/91 113/141/113 114/142/114
+f 188/222/188 189/223/189 186/218/186 187/219/187
+f 106/221/106 186/218/186 189/223/189 190/225/190
+f 163/227/163 117/226/117 133/160/133 164/200/164
+f 163/199/163 110/220/110 107/135/107 116/144/116
+f 116/144/116 115/143/115 117/145/117 163/199/163
+f 172/206/172 133/160/133 134/161/134 124/152/124
+f 191/47/191 188/222/188 187/219/187 192/91/192
+f 185/61/185 192/91/192 187/219/187 113/141/113
+f 144/173/144 147/176/147 161/196/161 162/197/162
+f 147/177/147 141/170/141 160/194/160 161/198/161
+f 193/228/193 148/178/148 149/179/149 194/229/194
+f 195/230/195 152/182/152 153/183/153 196/231/196
+f 197/232/197 156/186/156 152/182/152 195/230/195
+f 194/229/194 149/179/149 156/188/156 197/233/197
+f 196/231/196 153/183/153 158/190/158 198/234/198
+f 198/235/198 158/192/158 148/178/148 193/228/193
+f 101/118/101 45/46/45 104/132/104 199/236/199
+f 190/224/190 200/237/200 199/236/199 104/132/104
+f 200/238/200 190/225/190 189/223/189 201/239/201
+f 202/240/202 188/222/188 191/47/191 102/124/102
+f 201/239/201 189/223/189 188/222/188 202/240/202
+f 141/170/141 214/254/214 146/175/146 160/194/160
+f 50/54/50 68/81/68 62/75/62 213/253/213
+f 10/11/10 26/27/26 19/20/19
+f 21/126/21 20/125/20 24/25/24
+f 27/28/27 79/94/79 13/14/13
+f 90/57/90 58/71/58 47/49/47
+f 58/71/58 57/70/57 47/49/47
+f 52/58/52 68/81/68 82/97/82
+f 68/81/68 50/54/50 82/97/82
+f 185/61/185 91/89/91 76/90/76
+f 74/109/74 48/108/48 73/86/73
+f 78/93/78 48/51/48 5/5/5
+f 27/28/27 30/105/30 79/94/79
+f 30/105/30 19/103/19 79/94/79
+f 80/95/80 5/5/5 11/12/11
+f 84/99/84 29/30/29 28/29/28
+f 21/22/21 25/26/25 20/21/20
+f 115/143/115 118/146/118 117/145/117
+f 119/147/119 121/149/121 120/148/120
+f 137/165/137 138/166/138 136/168/136
+f 146/175/146 124/152/124 134/161/134
+f 90/57/90 47/49/47 168/204/168
+f 168/204/168 47/49/47 122/150/122
+f 175/209/175 182/216/182 177/211/177
+f 174/208/174 170/205/170 168/204/168
+f 185/61/185 113/141/113 91/89/91
+f 109/136/109 107/135/107 110/220/110
+f 163/227/163 164/200/164 110/137/110
+f 146/175/146 134/161/134 145/195/145
+f 145/195/145 134/161/134 118/159/118
+f 133/160/133 172/206/172 164/200/164
+f 214/254/214 124/152/124 146/175/146
+f 162/197/162 143/172/143 144/173/144
+f 137/164/137 136/163/136 135/162/135
+f 27/28/27 13/14/13 213/253/213
+f 61/74/61 58/71/58 59/72/59
+f 177/211/177 182/216/182 123/151/123
+f 123/151/123 124/152/124 214/254/214
+f 213/253/213 13/14/13 50/54/50
+f 12/13/12 56/69/56 6/6/6
+# 220 faces
+
+g

Added: content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_diffuse.png
===================================================================
(Binary files differ)


Property changes on: content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_diffuse.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_normal.png
===================================================================
(Binary files differ)


Property changes on: content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_normal.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_specular.png
===================================================================
(Binary files differ)


Property changes on: content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_specular.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From pnyx at mail.berlios.de  Mon Feb  5 15:03:18 2007
From: pnyx at mail.berlios.de (pnyx at mail.berlios.de)
Date: Mon, 5 Feb 2007 15:03:18 +0100
Subject: [Dsa-hl-svn] r3022 -
	content/models/men/human/female/Clothes/shortsleeve02
Message-ID: <200702051403.l15E3ISu001177@sheep.berlios.de>

Author: pnyx
Date: 2007-02-05 15:01:45 +0100 (Mon, 05 Feb 2007)
New Revision: 3022

Modified:
   content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_diffuse.png
Log:
scaling fixed, some details added

Modified: content/models/men/human/female/Clothes/shortsleeve02/shortsleeve02_diffuse.png
===================================================================
(Binary files differ)



From pnyx at mail.berlios.de  Mon Feb  5 18:30:45 2007
From: pnyx at mail.berlios.de (pnyx at mail.berlios.de)
Date: Mon, 5 Feb 2007 18:30:45 +0100
Subject: [Dsa-hl-svn] r3023 - content/models/men/Basemeshes
Message-ID: <200702051730.l15HUjGc019055@sheep.berlios.de>

Author: pnyx
Date: 2007-02-05 18:30:36 +0100 (Mon, 05 Feb 2007)
New Revision: 3023

Added:
   content/models/men/Basemeshes/Male_longsleeve.obj
   content/models/men/Basemeshes/Male_shortsleeve.obj
Log:
Male Basemeshes added

Added: content/models/men/Basemeshes/Male_longsleeve.obj
===================================================================
--- content/models/men/Basemeshes/Male_longsleeve.obj	2007-02-05 14:01:45 UTC (rev 3022)
+++ content/models/men/Basemeshes/Male_longsleeve.obj	2007-02-05 17:30:36 UTC (rev 3023)
@@ -0,0 +1,1034 @@
+# Max2Obj Version 4.0 Mar 10th, 2001
+#
+# object longsleeve to come ...
+#
+v  -9.674088 131.047165 -8.180655
+v  -14.853569 130.390289 6.320558
+v  -8.195537 131.149841 11.888079
+v  -7.667643 120.870468 -6.862447
+v  -14.220288 120.813133 5.121159
+v  -8.572046 120.411781 10.276305
+v  -11.285228 139.654816 -10.954058
+v  -15.747420 139.817017 5.546883
+v  -9.636748 138.468918 11.549717
+v  -16.811031 146.243607 4.290038
+v  -10.420619 147.395706 10.457679
+v  -12.625897 150.032715 -11.629513
+v  -12.463554 155.797119 -9.370251
+v  -6.614265 148.502731 -13.092021
+v  -6.292001 157.067886 -11.233937
+v  -15.849259 142.369461 -5.933131
+v  -13.200713 159.272293 -3.971090
+v  -7.730159 162.368347 -2.818505
+v  -15.619560 155.625076 2.178386
+v  -8.455843 155.286835 6.068118
+v  -5.543565 160.564377 1.152841
+v  -5.388499 161.948013 -8.581980
+v  -15.625908 137.062485 -3.617672
+v  -6.607821 166.951187 -2.418211
+v  -4.418390 167.521698 -7.311618
+v  -3.729260 164.107697 1.944503
+v  -18.556364 146.418320 2.707935
+v  -15.698530 146.484146 -10.624576
+v  -17.641859 153.606918 -9.312040
+v  -16.191160 143.456390 -5.557207
+v  -20.672770 156.254013 -4.263125
+v  -20.093876 153.377411 1.255468
+v  -19.552406 143.033798 1.292559
+v  -18.660786 142.704742 -9.358850
+v  -23.817516 144.313705 -9.024710
+v  -27.244053 142.928940 -4.012254
+v  -24.204033 143.433456 1.042453
+v  -19.261841 145.303391 1.425023
+v  -17.574320 144.993362 -10.205257
+v  -21.251949 150.369339 -9.823054
+v  -16.531656 142.639526 -4.759549
+v  -24.942184 152.515167 -4.208312
+v  -22.939699 149.852051 1.490852
+v  0.000000 132.430313 13.152997
+v  0.000000 160.036789 3.959773
+v  -4.676600 147.580612 11.743669
+v  -13.688500 120.841797 -2.964110
+v  -14.819093 131.199295 -2.209838
+v  0.000000 123.044563 12.906065
+v  -14.322326 144.534698 -9.899858
+v  -24.155298 146.383041 1.150521
+v  -23.444647 146.852371 -9.307751
+v  -26.944620 147.017822 -4.110283
+v  0.000000 138.850571 -11.912676
+v  0.000000 148.209198 -12.990906
+v  0.000000 167.251465 -8.320364
+v  0.000000 162.965790 -9.572830
+v  -5.653311 113.098022 -9.493886
+v  -15.915438 109.885025 3.429334
+v  -9.345687 106.752579 9.560552
+v  -13.951006 112.463028 -5.639289
+v  -25.611418 137.587448 -8.663680
+v  -18.688852 135.157776 -4.603783
+v  -28.135395 138.472961 -4.186462
+v  0.000000 113.097527 -9.847531
+v  -8.644358 107.578697 -12.694216
+v  -18.004269 103.665840 3.130498
+v  -11.524419 100.622643 10.794209
+v  -14.713471 106.845108 -8.528470
+v  0.000000 120.501320 -7.448944
+v  5.653311 113.098022 -9.493886
+v  7.667644 120.870468 -6.862447
+v  13.951006 112.463028 -5.639289
+v  13.688500 120.841797 -2.964110
+v  14.220288 120.813133 5.121159
+v  15.915439 109.885025 3.429334
+v  8.572046 120.411781 10.276305
+v  9.674088 131.047165 -8.180655
+v  0.000000 129.209213 -8.861284
+v  14.819093 131.199295 -2.209838
+v  14.853569 130.390289 6.320558
+v  8.195537 131.149841 11.888079
+v  11.285229 139.654816 -10.954058
+v  15.625908 137.062485 -3.617672
+v  15.849260 142.369461 -5.933131
+v  9.636748 138.468918 11.549717
+v  15.747420 139.817017 5.546883
+v  10.420619 147.395706 10.457679
+v  0.000000 147.527512 11.700139
+v  4.676600 147.580612 11.743669
+v  0.000000 138.837692 12.908384
+v  8.455843 155.286835 6.068118
+v  15.619560 155.625076 2.178386
+v  0.000000 154.048386 8.027085
+v  6.614265 148.502731 -13.092021
+v  0.000000 156.665024 -11.652201
+v  6.292001 157.067886 -11.233937
+v  12.625897 150.032715 -11.629513
+v  12.463554 155.797119 -9.370251
+v  14.322326 144.534698 -9.899858
+v  16.811031 146.243607 4.290038
+v  5.388499 161.948013 -8.581980
+v  13.200713 159.272293 -3.971090
+v  6.607821 166.951187 -2.418211
+v  4.418390 167.521698 -7.311618
+v  7.730159 162.272949 -4.121533
+v  3.729260 164.107697 1.944503
+v  5.543565 160.564377 1.152841
+v  0.000000 163.418091 3.501833
+v  20.093876 153.377411 1.255468
+v  18.556364 146.418320 2.707935
+v  15.698530 146.484146 -10.624576
+v  17.641859 153.606918 -9.312040
+v  16.191160 143.456390 -5.557207
+v  20.672770 156.254013 -4.263125
+v  24.204033 143.433456 1.042453
+v  19.552406 143.033798 1.292559
+v  24.155298 146.383041 1.150521
+v  18.660786 142.704742 -9.358850
+v  23.444647 146.852371 -9.307751
+v  17.574320 144.993362 -10.205257
+v  16.531656 142.639526 -4.759549
+v  19.261841 145.303391 1.425023
+v  23.817516 144.313705 -9.024710
+v  27.244053 142.928940 -4.012254
+v  26.944620 147.017822 -4.110283
+v  22.939701 149.852051 1.490852
+v  21.251949 150.369339 -9.823054
+v  24.942184 152.515167 -4.208312
+v  9.345687 106.752579 9.560552
+v  0.000000 116.915237 12.784960
+v  0.000000 105.688904 11.181005
+v  21.227037 136.353989 0.556183
+v  25.611418 137.587448 -8.663680
+v  0.000000 107.578201 -14.046832
+v  8.644358 107.578697 -12.694216
+v  14.713471 106.845108 -8.528470
+v  11.524419 100.622643 10.794209
+v  0.000000 99.558968 11.092043
+v  18.004269 103.665840 3.130498
+v  -22.392548 131.411591 -0.180193
+v  -23.249105 129.984497 -9.052615
+v  -27.040485 131.763367 -8.795427
+v  -20.180557 130.103455 -4.448017
+v  -28.974533 133.596725 -4.360669
+v  -26.282270 132.161423 -0.900137
+v  -24.403643 124.333618 -0.171881
+v  -24.438961 124.843048 -8.733565
+v  -29.103834 126.886833 -8.663854
+v  -22.199886 123.945900 -4.407460
+v  -32.032097 128.185959 -4.175163
+v  -29.080463 126.797531 -0.009279
+v  -32.850044 104.595558 -1.421603
+v  -33.037212 104.694679 -7.666859
+v  -35.622803 104.892059 -7.238019
+v  -31.856750 104.604950 -4.686833
+v  -37.083588 104.655014 -4.404734
+v  -35.592537 104.836128 -1.462676
+v  -21.227037 136.353989 0.556183
+v  -25.306213 137.972672 -0.044974
+v  -21.189651 135.028625 -9.075477
+v  -26.610142 128.126984 -9.517146
+v  -23.176743 127.798874 -0.176037
+v  -27.985886 129.937454 -0.842090
+v  -28.376680 129.783081 -8.729641
+v  -23.622681 127.340034 -8.893090
+v  -20.968868 126.950943 -4.427739
+v  -30.573507 131.080673 -4.267916
+v  26.282270 132.161423 -0.900137
+v  22.392548 131.411591 -0.180193
+v  25.306213 137.972672 -0.044974
+v  23.249105 129.984497 -9.052615
+v  27.040485 131.763367 -8.795427
+v  21.189651 135.028625 -9.075477
+v  20.180557 130.103455 -4.448017
+v  18.688852 135.157776 -4.603783
+v  28.974535 133.596725 -4.360669
+v  28.135395 138.472961 -4.186462
+v  29.080463 126.797531 -0.009279
+v  24.403643 124.333618 -0.171881
+v  27.985888 129.937454 -0.842090
+v  22.199886 123.945900 -4.407460
+v  24.438961 124.843048 -8.733565
+v  23.622681 127.340034 -8.893090
+v  20.968868 126.950943 -4.427739
+v  23.176743 127.798874 -0.176037
+v  29.103834 126.886833 -8.663854
+v  32.032097 128.185959 -4.175163
+v  30.573507 131.080673 -4.267916
+v  28.376680 129.783081 -8.729641
+v  35.592537 104.836121 -1.462676
+v  32.850048 104.595551 -1.421602
+v  33.037216 104.694687 -7.666858
+v  35.622810 104.892052 -7.238019
+v  31.856750 104.604950 -4.686833
+v  37.083588 104.655006 -4.404734
+v  26.610142 128.126984 -9.517146
+v  -33.709152 111.191856 -0.860084
+v  -30.660168 110.527962 -8.062581
+v  -29.223984 110.206779 -4.560268
+v  30.525703 110.313614 -0.881903
+v  33.736050 111.255013 -7.732948
+v  35.559219 111.476669 -4.284626
+v  -30.525700 110.313614 -0.881903
+v  -33.736050 111.255013 -7.732948
+v  -35.559216 111.476662 -4.284626
+v  33.709156 111.191856 -0.860084
+v  30.660166 110.527962 -8.062581
+v  29.223984 110.206779 -4.560268
+v  -33.709152 111.191856 -0.860084
+v  -30.660168 110.527962 -8.062581
+v  -29.223984 110.206779 -4.560268
+v  30.525703 110.313614 -0.881903
+v  33.736050 111.255013 -7.732948
+v  35.559219 111.476669 -4.284626
+v  -30.525700 110.313614 -0.881903
+v  -33.736050 111.255013 -7.732948
+v  -35.559216 111.476662 -4.284626
+v  33.709156 111.191856 -0.860084
+v  30.660166 110.527962 -8.062581
+v  29.223984 110.206779 -4.560268
+v  -35.287212 104.884094 -0.445928
+v  -31.715118 104.327835 -8.491787
+v  -30.032522 104.058731 -4.579378
+v  31.557585 104.148247 -0.470303
+v  35.318722 104.937012 -8.123556
+v  37.454689 105.122726 -4.271460
+v  -31.557575 104.148247 -0.470303
+v  -35.318722 104.937012 -8.123557
+v  -37.454689 105.122726 -4.271460
+v  35.287216 104.884094 -0.445928
+v  31.715115 104.327835 -8.491787
+v  30.032526 104.058731 -4.579378
+# 233 vertices
+
+vt  0.940857 0.785091 1.155421
+vt  0.849356 0.773380 1.155416
+vt  0.810459 0.231015 1.155410
+vt  0.880906 0.226246 1.155412
+vt  0.940857 0.850682 1.155427
+vt  0.863077 0.861307 1.155425
+vt  0.799876 0.141685 1.155418
+vt  0.871533 0.139056 1.155419
+vt  0.940857 0.715947 1.155415
+vt  0.837170 0.699163 1.155407
+vt  0.813037 0.303904 1.155403
+vt  0.871317 0.283624 1.155406
+vt  0.797624 0.369075 1.155397
+vt  0.872062 0.354404 1.155401
+vt  0.940857 0.662170 1.155410
+vt  0.821310 0.606166 1.155393
+vt  0.940857 0.623226 1.155410
+vt  0.845802 0.560397 1.155394
+vt  0.869067 0.636740 1.155401
+vt  0.894130 0.584384 1.155401
+vt  0.764396 0.678722 1.155405
+vt  0.862533 0.509025 1.155394
+vt  0.939873 0.515539 1.155405
+vt  0.835464 0.448997 1.155392
+vt  0.893933 0.424316 1.155401
+vt  0.932418 0.473223 1.155405
+vt  0.924534 0.562656 1.155403
+vt  0.774953 0.730224 1.155414
+vt  0.990053 0.573368 1.155416
+vt  0.976071 0.518827 1.155412
+vt  0.975615 0.550256 1.155412
+vt  0.976628 0.482964 1.155413
+vt  0.771618 0.386200 1.155387
+vt  0.777459 0.617012 1.155389
+vt  0.807187 0.553704 1.155385
+vt  0.747111 0.661504 1.155397
+vt  0.806701 0.499200 1.155383
+vt  0.800132 0.446111 1.155383
+vt  0.715001 0.401388 1.155375
+vt  0.715596 0.589856 1.155374
+vt  0.715568 0.544554 1.155365
+vt  0.693244 0.493413 1.155362
+vt  0.707307 0.442787 1.155365
+vt  0.741475 0.395202 1.155379
+vt  0.744257 0.602104 1.155379
+vt  0.769410 0.552217 1.155376
+vt  0.715623 0.648684 1.155388
+vt  0.768330 0.494192 1.155374
+vt  0.763119 0.440605 1.155375
+vt  0.954445 0.234380 1.155417
+vt  0.954445 0.342344 1.155413
+vt  0.954445 0.397304 1.155410
+vt  0.967223 0.441759 1.155413
+vt  0.991803 0.463885 1.155416
+vt  0.955466 0.597977 1.155411
+vt  0.917346 0.345530 1.155406
+vt  0.799612 0.871210 1.155427
+vt  0.774683 0.786160 1.155420
+vt  0.954445 0.114955 1.155426
+vt  0.954445 0.162103 1.155421
+vt  0.794383 0.648795 1.155397
+vt  0.734438 0.442317 1.155370
+vt  0.737685 0.546821 1.155370
+vt  0.726882 0.493031 1.155367
+vt  0.954445 0.268139 1.155415
+vt  0.719384 0.324766 1.155402
+vt  0.717034 0.297386 1.155407
+vt  0.720739 0.329003 1.155396
+vt  0.708470 0.339624 1.155388
+vt  0.725230 0.144305 1.155422
+vt  0.732439 0.239097 1.155414
+vt  0.896883 0.925050 1.155430
+vt  0.786735 0.046475 1.155426
+vt  0.868942 0.024201 1.155428
+vt  0.954445 0.022957 1.155429
+vt  0.820496 0.943158 1.155431
+vt  0.705572 0.069337 1.155428
+vt  0.651701 0.412479 1.155368
+vt  0.655253 0.448790 1.155361
+vt  0.651625 0.538707 1.155360
+vt  0.640325 0.575710 1.155369
+vt  0.644182 0.613620 1.155385
+vt  0.644182 0.375337 1.155383
+vt  0.651075 0.492141 1.155357
+vt  0.940857 0.911903 1.155432
+vt  0.954457 0.979567 1.155432
+vt  0.954539 0.979560 1.155430
+vt  0.954682 0.979550 1.155431
+vt  0.954745 0.980044 1.155426
+vt  0.954591 0.980057 1.155428
+vt  0.954431 0.980057 1.155429
+vt  0.954897 0.980032 1.155428
+vt  0.940857 0.850682 1.155427
+vt  0.940857 0.911903 1.155432
+vt  0.896883 0.925050 1.155430
+vt  0.863077 0.861307 1.155425
+vt  0.820496 0.943158 1.155431
+vt  0.799612 0.871210 1.155427
+vt  0.799876 0.141685 1.155418
+vt  0.786735 0.046475 1.155426
+vt  0.871533 0.139056 1.155419
+vt  0.849356 0.773380 1.155416
+vt  0.940857 0.785091 1.155421
+vt  0.774683 0.786160 1.155420
+vt  0.810459 0.231015 1.155410
+vt  0.954445 0.162103 1.155421
+vt  0.880906 0.226246 1.155412
+vt  0.837170 0.699163 1.155407
+vt  0.940857 0.715947 1.155415
+vt  0.774953 0.730224 1.155414
+vt  0.764396 0.678722 1.155405
+vt  0.871317 0.283624 1.155406
+vt  0.813037 0.303904 1.155403
+vt  0.872062 0.354404 1.155401
+vt  0.954445 0.342344 1.155413
+vt  0.917346 0.345530 1.155406
+vt  0.954445 0.268139 1.155415
+vt  0.893933 0.424316 1.155401
+vt  0.835464 0.448997 1.155392
+vt  0.954445 0.397304 1.155410
+vt  0.869067 0.636740 1.155401
+vt  0.940857 0.662170 1.155410
+vt  0.940857 0.623226 1.155410
+vt  0.894130 0.584384 1.155401
+vt  0.821310 0.606166 1.155393
+vt  0.845802 0.560397 1.155394
+vt  0.794383 0.648795 1.155397
+vt  0.719384 0.324766 1.155402
+vt  0.717034 0.297386 1.155407
+vt  0.797624 0.369075 1.155397
+vt  0.924534 0.562656 1.155403
+vt  0.862533 0.509025 1.155394
+vt  0.976071 0.518827 1.155412
+vt  0.975615 0.550256 1.155412
+vt  0.939873 0.515539 1.155405
+vt  0.976628 0.482964 1.155413
+vt  0.932418 0.473223 1.155405
+vt  0.967223 0.441759 1.155413
+vt  0.991803 0.463885 1.155416
+vt  0.990053 0.573368 1.155416
+vt  0.955466 0.597977 1.155411
+vt  0.800132 0.446111 1.155383
+vt  0.771618 0.386200 1.155387
+vt  0.777459 0.617012 1.155389
+vt  0.807187 0.553704 1.155385
+vt  0.747111 0.661504 1.155397
+vt  0.720739 0.329003 1.155396
+vt  0.806701 0.499200 1.155383
+vt  0.707307 0.442787 1.155365
+vt  0.715001 0.401388 1.155375
+vt  0.734438 0.442317 1.155370
+vt  0.715596 0.589856 1.155374
+vt  0.737685 0.546821 1.155370
+vt  0.744257 0.602104 1.155379
+vt  0.715623 0.648684 1.155388
+vt  0.708470 0.339624 1.155388
+vt  0.741475 0.395202 1.155379
+vt  0.715568 0.544554 1.155365
+vt  0.693244 0.493413 1.155362
+vt  0.726882 0.493031 1.155367
+vt  0.763119 0.440605 1.155375
+vt  0.769410 0.552217 1.155376
+vt  0.768330 0.494192 1.155374
+vt  0.954445 0.234380 1.155417
+vt  0.705572 0.069337 1.155428
+vt  0.725230 0.144305 1.155422
+vt  0.732439 0.239097 1.155414
+vt  0.868942 0.024201 1.155428
+vt  0.954445 0.114955 1.155426
+vt  0.954445 0.022957 1.155429
+vt  0.651701 0.412479 1.155368
+vt  0.655253 0.448790 1.155361
+vt  0.651625 0.538707 1.155360
+vt  0.640325 0.575710 1.155369
+vt  0.644182 0.613620 1.155385
+vt  0.644182 0.375337 1.155383
+vt  0.651075 0.492141 1.155357
+vt  0.954457 0.979567 1.155432
+vt  0.954539 0.979560 1.155430
+vt  0.954682 0.979550 1.155431
+vt  0.954591 0.980057 1.155428
+vt  0.954431 0.980057 1.155429
+vt  0.954745 0.980044 1.155426
+vt  0.954897 0.980032 1.155428
+vt  0.606060 0.410354 1.155367
+vt  0.593145 0.568890 1.155366
+vt  0.599057 0.533575 1.155358
+vt  0.596882 0.609360 1.155383
+vt  0.607524 0.487589 1.155356
+vt  0.602936 0.445522 1.155360
+vt  0.540878 0.409974 1.155369
+vt  0.545975 0.573467 1.155369
+vt  0.553277 0.532952 1.155361
+vt  0.540052 0.609360 1.155385
+vt  0.555976 0.490855 1.155358
+vt  0.550029 0.450498 1.155361
+vt  0.357846 0.424258 1.155403
+vt  0.357846 0.555667 1.155403
+vt  0.357846 0.522363 1.155402
+vt  0.357846 0.600842 1.155406
+vt  0.357846 0.490722 1.155402
+vt  0.357846 0.456929 1.155403
+vt  0.651701 0.412479 1.155368
+vt  0.655253 0.448790 1.155361
+vt  0.651625 0.538707 1.155360
+vt  0.640325 0.575710 1.155369
+vt  0.644182 0.613620 1.155385
+vt  0.651075 0.492141 1.155357
+vt  0.569900 0.547775 1.155361
+vt  0.573697 0.409146 1.155366
+vt  0.578711 0.452329 1.155359
+vt  0.579365 0.530049 1.155356
+vt  0.569413 0.572035 1.155368
+vt  0.569155 0.609360 1.155383
+vt  0.581747 0.488671 1.155354
+vt  0.596882 0.371078 1.155382
+vt  0.540052 0.371078 1.155384
+vt  0.357846 0.362559 1.155407
+vt  0.644182 0.375337 1.155383
+vt  0.569155 0.371078 1.155382
+vt  0.602936 0.445522 1.155360
+vt  0.606060 0.410354 1.155367
+vt  0.651701 0.412479 1.155368
+vt  0.655253 0.448790 1.155361
+vt  0.593145 0.568890 1.155366
+vt  0.599057 0.533575 1.155358
+vt  0.651625 0.538707 1.155360
+vt  0.640325 0.575710 1.155369
+vt  0.596882 0.609360 1.155383
+vt  0.644182 0.613620 1.155385
+vt  0.596882 0.371078 1.155382
+vt  0.644182 0.375337 1.155383
+vt  0.607524 0.487589 1.155356
+vt  0.651075 0.492141 1.155357
+vt  0.550029 0.450498 1.155361
+vt  0.540878 0.409974 1.155369
+vt  0.578711 0.452329 1.155359
+vt  0.540052 0.609360 1.155385
+vt  0.545975 0.573467 1.155369
+vt  0.569413 0.572035 1.155368
+vt  0.569155 0.609360 1.155383
+vt  0.540052 0.371078 1.155384
+vt  0.569155 0.371078 1.155382
+vt  0.573697 0.409146 1.155366
+vt  0.553277 0.532952 1.155361
+vt  0.555976 0.490855 1.155358
+vt  0.581747 0.488671 1.155354
+vt  0.579365 0.530049 1.155356
+vt  0.357846 0.456929 1.155403
+vt  0.357846 0.424258 1.155403
+vt  0.357846 0.555667 1.155403
+vt  0.357846 0.522363 1.155402
+vt  0.357846 0.600842 1.155406
+vt  0.357846 0.362559 1.155407
+vt  0.357846 0.490722 1.155402
+vt  0.569900 0.547775 1.155361
+vt  0.954539 0.979560 1.155430
+vt  0.954745 0.980044 1.155426
+vt  0.954591 0.980057 1.155428
+vt  0.954431 0.980057 1.155429
+vt  0.954682 0.979550 1.155431
+vt  0.954897 0.980032 1.155428
+vt  0.954457 0.979567 1.155432
+vt  0.954457 0.979567 1.155432
+vt  0.954539 0.979560 1.155430
+vt  0.954682 0.979550 1.155431
+vt  0.954745 0.980044 1.155426
+vt  0.954897 0.980032 1.155428
+vt  0.954591 0.980057 1.155428
+vt  0.954431 0.980057 1.155429
+vt  0.413899 0.455053 1.155390
+vt  0.412717 0.560859 1.155393
+vt  0.410989 0.603326 1.155400
+vt  0.410989 0.365044 1.155400
+vt  0.411230 0.420092 1.155393
+vt  0.414847 0.525451 1.155390
+vt  0.415634 0.490761 1.155389
+vt  0.411230 0.420092 1.155393
+vt  0.414847 0.525451 1.155390
+vt  0.415634 0.490761 1.155389
+vt  0.413899 0.455053 1.155390
+vt  0.412717 0.560859 1.155393
+vt  0.410989 0.603326 1.155400
+vt  0.410989 0.365044 1.155400
+vt  0.413899 0.455053 1.155390
+vt  0.412717 0.560859 1.155393
+vt  0.410989 0.603326 1.155400
+vt  0.410989 0.365044 1.155400
+vt  0.411230 0.420092 1.155393
+vt  0.414847 0.525451 1.155390
+vt  0.415634 0.490761 1.155389
+vt  0.411230 0.420092 1.155393
+vt  0.414847 0.525451 1.155390
+vt  0.415634 0.490761 1.155389
+vt  0.413899 0.455053 1.155390
+vt  0.412717 0.560859 1.155393
+vt  0.410989 0.365044 1.155400
+vt  0.410989 0.603326 1.155400
+vt  0.959323 0.977583 1.155390
+vt  0.961306 0.977068 1.155393
+vt  0.960202 0.979142 1.155393
+vt  0.958619 0.978621 1.155390
+vt  0.961485 0.976256 1.155400
+vt  0.958034 0.978109 1.155389
+vt  0.957469 0.975979 1.155393
+vt  0.957811 0.977088 1.155390
+vt  0.957933 0.979322 1.155390
+vt  0.957659 0.980445 1.155393
+vt  0.957438 0.981792 1.155400
+vt  0.957438 0.974232 1.155400
+vt  0.958034 0.978221 1.155389
+vt  0.961485 0.979768 1.155400
+vt  0.959323 0.977583 1.155390
+vt  0.960202 0.979142 1.155393
+vt  0.961485 0.979768 1.155400
+vt  0.961485 0.976256 1.155400
+vt  0.961306 0.977068 1.155393
+vt  0.958619 0.978621 1.155390
+vt  0.958034 0.978109 1.155389
+vt  0.957469 0.975979 1.155393
+vt  0.957933 0.979322 1.155390
+vt  0.958034 0.978221 1.155389
+vt  0.957811 0.977088 1.155390
+vt  0.957659 0.980445 1.155393
+vt  0.957438 0.981792 1.155400
+vt  0.957438 0.974232 1.155400
+# 326 texture vertices
+
+vn  -0.452979 -0.244492 -0.857341
+vn  -0.895976 -0.073584 0.437963
+vn  -0.409769 -0.052082 0.910701
+vn  -0.313940 0.043271 -0.948456
+vn  -0.919824 -0.025150 0.391525
+vn  -0.485886 -0.067804 0.871388
+vn  -0.462387 -0.262701 -0.846869
+vn  -0.905061 -0.072375 0.419078
+vn  -0.460920 -0.002975 0.887437
+vn  -0.787801 -0.089799 0.609348
+vn  -0.452455 0.260665 0.852841
+vn  -0.262187 0.074728 -0.962120
+vn  -0.355760 0.562821 -0.746102
+vn  -0.125800 0.016004 -0.991927
+vn  -0.178978 0.382285 -0.906546
+vn  -0.908503 -0.234170 -0.346103
+vn  -0.450845 0.891882 -0.035846
+vn  -0.777655 0.599081 0.190666
+vn  -0.397182 0.673940 0.622938
+vn  -0.249499 0.653641 0.714495
+vn  -0.503181 0.502586 0.703005
+vn  -0.449662 0.480643 -0.752852
+vn  -0.933716 -0.206386 -0.292540
+vn  -0.971737 0.229815 0.053962
+vn  -0.611102 0.275495 -0.742062
+vn  -0.594323 0.096928 0.798364
+vn  -0.470768 -0.502611 0.725093
+vn  -0.106585 -0.312084 -0.944057
+vn  -0.312198 0.518208 -0.796237
+vn  -0.247440 -0.805194 -0.538921
+vn  -0.534486 0.837392 -0.114451
+vn  -0.479831 0.513151 0.711645
+vn  0.491785 -0.156626 0.856514
+vn  0.427755 -0.318551 -0.845902
+vn  -0.503952 0.020594 -0.863486
+vn  -0.991235 0.131930 0.006883
+vn  -0.509601 -0.021820 0.860134
+vn  0.169965 -0.477429 0.862075
+vn  0.198839 -0.445231 -0.873059
+vn  -0.394859 0.324821 -0.859405
+vn  0.950721 -0.299840 0.078897
+vn  -0.820566 0.566890 -0.072847
+vn  -0.551462 0.247422 0.796663
+vn  -0.000000 0.003927 0.999992
+vn  -0.000000 0.393290 0.919415
+vn  -0.112446 0.315937 0.942093
+vn  -0.879495 0.041057 -0.474135
+vn  -0.938676 -0.128785 -0.319846
+vn  -0.000000 -0.062271 0.998059
+vn  -0.545265 -0.365975 -0.754154
+vn  -0.577365 0.060142 0.814268
+vn  -0.548598 0.082925 -0.831964
+vn  -0.979068 0.200142 -0.036997
+vn  -0.000000 -0.232715 -0.972545
+vn  -0.000000 0.017350 -0.999849
+vn  0.000000 0.267877 -0.963453
+vn  -0.000000 0.295716 -0.955276
+vn  -0.214559 0.441823 -0.871067
+vn  -0.920114 0.201462 0.335863
+vn  -0.381603 0.114782 0.917172
+vn  -0.794622 0.303335 -0.525893
+vn  -0.529144 0.114275 -0.840802
+vn  0.955169 -0.295852 0.011153
+vn  -0.984456 0.170035 0.043971
+vn  -0.000000 0.466186 -0.884687
+vn  -0.317713 0.555418 -0.768485
+vn  -0.899579 0.267404 0.345329
+vn  -0.333145 0.261502 0.905887
+vn  -0.777745 0.367731 -0.509791
+vn  -0.000000 0.087942 -0.996126
+vn  0.214559 0.441823 -0.871067
+vn  0.313940 0.043271 -0.948456
+vn  0.794622 0.303335 -0.525893
+vn  0.879495 0.041057 -0.474135
+vn  0.919824 -0.025150 0.391525
+vn  0.920114 0.201462 0.335863
+vn  0.485886 -0.067804 0.871388
+vn  0.452979 -0.244492 -0.857341
+vn  -0.000000 -0.229172 -0.973386
+vn  0.938676 -0.128785 -0.319846
+vn  0.895976 -0.073584 0.437963
+vn  0.409769 -0.052082 0.910701
+vn  0.462387 -0.262701 -0.846869
+vn  0.933716 -0.206386 -0.292540
+vn  0.908503 -0.234169 -0.346103
+vn  0.460920 -0.002975 0.887437
+vn  0.905061 -0.072375 0.419078
+vn  0.452455 0.260665 0.852841
+vn  0.000000 0.318970 0.947765
+vn  0.112446 0.315937 0.942093
+vn  -0.000000 0.060304 0.998180
+vn  0.249499 0.653641 0.714495
+vn  0.397182 0.673940 0.622938
+vn  0.000000 0.584209 0.811603
+vn  0.125800 0.016004 -0.991927
+vn  0.000000 0.291907 -0.956447
+vn  0.178978 0.382285 -0.906546
+vn  0.262187 0.074728 -0.962120
+vn  0.355760 0.562821 -0.746102
+vn  0.545265 -0.365975 -0.754154
+vn  0.787801 -0.089799 0.609348
+vn  0.440026 0.475292 -0.761888
+vn  0.444485 0.895206 -0.032245
+vn  0.981780 0.169214 0.086455
+vn  0.611102 0.275495 -0.742062
+vn  0.749295 0.662097 0.013556
+vn  0.632249 0.083976 0.770201
+vn  0.517433 0.537828 0.665585
+vn  -0.000000 0.084860 0.996393
+vn  0.479831 0.513151 0.711645
+vn  0.470768 -0.502611 0.725093
+vn  0.106585 -0.312084 -0.944057
+vn  0.312198 0.518208 -0.796237
+vn  0.247441 -0.805194 -0.538921
+vn  0.534486 0.837392 -0.114451
+vn  0.509601 -0.021820 0.860134
+vn  -0.491785 -0.156626 0.856514
+vn  0.577365 0.060142 0.814268
+vn  -0.427755 -0.318552 -0.845902
+vn  0.548598 0.082925 -0.831964
+vn  -0.198839 -0.445231 -0.873059
+vn  -0.950721 -0.299840 0.078897
+vn  -0.169965 -0.477429 0.862075
+vn  0.503952 0.020594 -0.863486
+vn  0.991235 0.131930 0.006883
+vn  0.979068 0.200142 -0.036997
+vn  0.551462 0.247422 0.796663
+vn  0.394859 0.324821 -0.859405
+vn  0.820566 0.566890 -0.072847
+vn  0.381603 0.114782 0.917172
+vn  0.000000 -0.054867 0.998494
+vn  0.000000 -0.074131 0.997249
+vn  -0.405036 -0.229259 0.885091
+vn  0.529144 0.114275 -0.840802
+vn  -0.000000 0.577434 -0.816437
+vn  0.317713 0.555418 -0.768485
+vn  0.777745 0.367731 -0.509791
+vn  0.333145 0.261502 0.905887
+vn  -0.000000 0.068483 0.997652
+vn  0.899579 0.267404 0.345329
+vn  0.409772 -0.159125 0.898202
+vn  0.453489 -0.103149 -0.885273
+vn  -0.454621 0.247730 -0.855541
+vn  0.962247 -0.272077 -0.007406
+vn  -0.929875 0.357887 0.085137
+vn  -0.432131 0.131942 0.892107
+vn  0.485224 -0.200687 0.851048
+vn  0.468733 -0.274219 -0.839699
+vn  -0.532258 0.064995 -0.844084
+vn  0.911551 -0.411071 -0.009797
+vn  -0.940185 0.339233 0.031210
+vn  -0.365185 0.204547 0.908185
+vn  0.483246 -0.276289 0.830746
+vn  0.379575 -0.230131 -0.896082
+vn  -0.642723 0.121619 -0.756383
+vn  0.912141 -0.407412 -0.044879
+vn  -0.975920 0.218117 -0.002106
+vn  -0.595849 0.086668 0.798406
+vn  0.405036 -0.229259 0.885091
+vn  -0.565177 -0.025985 0.824560
+vn  0.456936 -0.170152 -0.873074
+vn  -0.095490 -0.045202 -0.994403
+vn  0.448144 -0.125552 0.885101
+vn  -0.402040 0.313375 0.860325
+vn  -0.611963 0.255248 -0.748565
+vn  0.564972 -0.181099 -0.804991
+vn  0.952951 -0.302671 -0.016567
+vn  -0.875084 0.479763 0.063686
+vn  0.432131 0.131942 0.892107
+vn  -0.409772 -0.159125 0.898202
+vn  0.565177 -0.025985 0.824560
+vn  -0.453489 -0.103149 -0.885273
+vn  0.454621 0.247730 -0.855541
+vn  -0.456936 -0.170152 -0.873074
+vn  -0.962247 -0.272077 -0.007406
+vn  -0.955169 -0.295852 0.011153
+vn  0.929875 0.357887 0.085137
+vn  0.984456 0.170035 0.043971
+vn  0.365185 0.204547 0.908185
+vn  -0.485224 -0.200687 0.851048
+vn  0.402040 0.313375 0.860325
+vn  -0.911551 -0.411071 -0.009797
+vn  -0.468733 -0.274219 -0.839699
+vn  -0.564972 -0.181099 -0.804991
+vn  -0.952951 -0.302671 -0.016567
+vn  -0.448144 -0.125552 0.885101
+vn  0.532258 0.064995 -0.844084
+vn  0.940185 0.339233 0.031210
+vn  0.875084 0.479763 0.063685
+vn  0.611963 0.255248 -0.748565
+vn  0.595849 0.086668 0.798407
+vn  -0.483245 -0.276288 0.830746
+vn  -0.379573 -0.230131 -0.896082
+vn  0.642725 0.121620 -0.756382
+vn  -0.912141 -0.407413 -0.044879
+vn  0.975921 0.218116 -0.002105
+vn  0.095490 -0.045202 -0.994403
+vn  -0.500046 0.144471 0.853863
+vn  0.465536 -0.124206 -0.876270
+vn  0.958026 -0.285034 -0.030675
+vn  -0.539602 -0.146303 0.829111
+vn  0.546340 0.158685 -0.822394
+vn  0.964124 0.265338 0.007762
+vn  0.539829 -0.149090 0.828466
+vn  -0.547969 0.157193 -0.821596
+vn  -0.964179 0.265214 0.004562
+vn  0.501860 0.143547 0.852954
+vn  -0.466215 -0.126418 -0.875592
+vn  -0.957936 -0.285035 -0.033387
+vn  -0.481349 0.060782 0.874419
+vn  0.491417 -0.264843 -0.829679
+vn  0.904800 -0.424471 -0.034070
+vn  -0.545854 -0.309246 0.778724
+vn  0.526506 0.100612 -0.844197
+vn  0.972082 0.234541 0.006909
+vn  0.545854 -0.309246 0.778723
+vn  -0.526507 0.100612 -0.844197
+vn  -0.972082 0.234542 0.006909
+vn  0.481349 0.060782 0.874419
+vn  -0.491417 -0.264843 -0.829679
+vn  -0.904800 -0.424471 -0.034070
+vn  -0.483947 0.178370 0.856726
+vn  0.495571 -0.024365 -0.868226
+vn  0.990847 -0.133271 -0.021459
+vn  -0.562744 -0.040211 0.825653
+vn  0.538576 0.185850 -0.821825
+vn  0.959189 0.282563 0.010715
+vn  0.564648 -0.036027 0.824545
+vn  -0.540101 0.189705 -0.819941
+vn  -0.959185 0.282715 0.005981
+vn  0.486157 0.181325 0.854853
+vn  -0.497970 -0.021280 -0.866933
+vn  -0.990712 -0.133368 -0.026506
+# 233 vertex normals
+
+g longsleeve
+s 3
+f 70/5/70 65/85/65 58/72/58 4/6/4
+f 61/76/61 47/57/47 4/6/4 58/72/58
+f 6/8/6 5/7/5 59/73/59 60/74/60
+f 70/5/70 4/6/4 1/2/1 79/1/79
+f 1/2/1 4/6/4 47/57/47 48/58/48
+f 2/3/2 5/7/5 6/8/6 3/4/3
+f 3/4/3 6/8/6 49/60/49 44/50/44
+f 7/10/7 54/9/54 79/1/79 1/2/1
+f 3/4/3 9/12/9 8/11/8 2/3/2
+f 8/11/8 9/12/9 11/14/11 10/13/10
+f 20/25/20 19/24/19 11/14/11 46/56/46
+f 46/56/46 89/51/89 94/52/94 20/25/20
+f 14/19/14 55/15/55 54/9/54 7/10/7
+f 96/17/96 55/15/55 14/19/14 15/20/15
+f 15/20/15 14/19/14 12/16/12 13/18/13
+f 10/13/10 16/66/16 23/67/23 8/11/8
+f 13/18/13 17/22/17 22/27/22 15/20/15
+f 24/30/24 25/31/25 22/27/22 18/23/18
+f 26/32/26 24/30/24 18/23/18 21/26/21
+f 21/26/21 20/25/20 94/52/94 45/53/45
+f 109/54/109 26/32/26 21/26/21 45/53/45
+f 56/29/56 57/55/57 22/27/22 25/31/25
+f 96/17/96 15/20/15 22/27/22 57/55/57
+f 20/25/20 21/26/21 17/22/17 19/24/19
+f 32/38/32 27/33/27 10/13/10 19/24/19
+f 28/34/28 29/35/29 12/16/12 50/61/50
+f 27/33/27 30/68/30 16/66/16 10/13/10
+f 29/35/29 31/37/31 17/22/17 13/18/13
+f 31/37/31 32/38/32 19/24/19 17/22/17
+f 51/62/51 37/43/37 33/39/33 38/44/38
+f 52/63/52 39/45/39 34/40/34 35/41/35
+f 53/64/53 52/63/52 35/41/35 36/42/36
+f 53/64/53 36/42/36 37/43/37 51/62/51
+f 43/49/43 38/44/38 27/33/27 32/38/32
+f 40/46/40 29/35/29 28/34/28 39/45/39
+f 39/45/39 28/34/28 30/36/30 41/47/41
+f 41/69/41 30/68/30 27/33/27 38/44/38
+f 29/35/29 40/46/40 42/48/42 31/37/31
+f 42/48/42 43/49/43 32/38/32 31/37/31
+f 46/56/46 11/14/11 9/12/9 91/65/91
+f 47/70/47 61/77/61 59/73/59 5/7/5
+f 48/71/48 47/70/47 5/7/5 2/3/2
+f 8/11/8 23/67/23 48/71/48 2/3/2
+f 131/59/131 6/8/6 60/74/60 132/75/132
+f 50/61/50 12/16/12 14/19/14 7/10/7
+f 52/63/52 53/64/53 42/48/42 40/46/40
+f 42/48/42 53/64/53 51/62/51 43/49/43
+f 37/43/37 160/79/160 159/78/159 33/39/33
+f 34/40/34 161/81/161 62/80/62 35/41/35
+f 63/82/63 161/81/161 34/40/34 41/47/41
+f 33/39/33 159/78/159 63/83/63 41/69/41
+f 62/80/62 64/84/64 36/42/36 35/41/35
+f 36/42/36 64/84/64 160/79/160 37/43/37
+f 44/50/44 91/65/91 9/12/9 3/4/3
+f 23/28/23 7/10/7 1/2/1 48/58/48
+f 135/86/135 66/87/66 58/257/58 65/263/65
+f 66/87/66 69/88/69 61/261/61 58/257/58
+f 68/90/68 60/259/60 59/258/59 67/89/67
+f 139/91/139 132/260/132 60/259/60 68/90/68
+f 67/89/67 59/258/59 61/262/61 69/92/69
+f 70/93/70 72/96/72 71/95/71 65/94/65
+f 72/96/72 74/98/74 73/97/73 71/95/71
+f 76/100/76 75/99/75 77/101/77 130/168/130
+f 70/93/70 79/103/79 78/102/78 72/96/72
+f 78/102/78 80/104/80 74/98/74 72/96/72
+f 77/101/77 75/99/75 81/105/81 82/107/82
+f 49/106/49 77/101/77 82/107/82 44/164/44
+f 83/108/83 78/102/78 79/103/79 54/109/54
+f 87/113/87 86/112/86 82/107/82 81/105/81
+f 88/114/88 86/112/86 87/113/87 101/130/101
+f 88/114/88 93/119/93 92/118/92 90/116/90
+f 94/120/94 89/115/89 90/116/90 92/118/92
+f 95/121/95 83/108/83 54/109/54 55/122/55
+f 96/123/96 97/124/97 95/121/95 55/122/55
+f 97/124/97 99/126/99 98/125/98 95/121/95
+f 84/129/84 85/128/85 101/130/101 87/113/87
+f 102/131/102 103/132/103 99/126/99 97/124/97
+f 104/133/104 106/135/106 102/131/102 105/134/105
+f 107/136/107 108/137/108 106/135/106 104/133/104
+f 108/137/108 45/138/45 94/120/94 92/118/92
+f 109/139/109 45/138/45 108/137/108 107/136/107
+f 56/140/56 105/134/105 102/131/102 57/141/57
+f 96/123/96 57/141/57 102/131/102 97/124/97
+f 92/118/92 93/119/93 103/132/103 108/137/108
+f 110/142/110 93/119/93 101/130/101 111/143/111
+f 98/125/98 113/145/113 112/144/112 100/127/100
+f 111/143/111 101/130/101 85/128/85 114/147/114
+f 113/145/113 99/126/99 103/132/103 115/148/115
+f 115/148/115 103/132/103 93/119/93 110/142/110
+f 117/150/117 116/149/116 118/151/118 123/157/123
+f 119/152/119 121/154/121 120/153/120 124/158/124
+f 126/160/126 125/159/125 124/158/124 120/153/120
+f 126/160/126 118/151/118 116/149/116 125/159/125
+f 127/161/127 110/142/110 111/143/111 123/157/123
+f 128/162/128 121/154/121 112/144/112 113/145/113
+f 121/154/121 122/155/122 114/146/114 112/144/112
+f 122/156/122 123/157/123 111/143/111 114/147/114
+f 129/163/129 128/162/128 113/145/113 115/148/115
+f 110/142/110 127/161/127 129/163/129 115/148/115
+f 90/116/90 91/117/91 86/112/86 88/114/88
+f 76/100/76 73/165/73 74/166/74 75/99/75
+f 80/167/80 81/105/81 75/99/75 74/166/74
+f 80/167/80 84/129/84 87/113/87 81/105/81
+f 130/168/130 77/101/77 131/169/131 132/170/132
+f 95/121/95 98/125/98 100/127/100 83/108/83
+f 129/163/129 126/160/126 120/153/120 128/162/128
+f 118/151/118 126/160/126 129/163/129 127/161/127
+f 116/149/116 117/150/117 133/171/133 171/172/171
+f 119/152/119 124/158/124 134/173/134 174/174/174
+f 176/175/176 122/155/122 119/152/119 174/174/174
+f 176/176/176 133/171/133 117/150/117 122/156/122
+f 134/173/134 124/158/124 125/159/125 178/177/178
+f 125/159/125 116/149/116 171/172/171 178/177/178
+f 86/112/86 91/117/91 44/164/44 82/107/82
+f 78/102/78 83/108/83 84/110/84 80/104/80
+f 135/178/135 65/264/65 71/265/71 136/179/136
+f 73/266/73 137/180/137 136/179/136 71/265/71
+f 76/267/76 130/269/130 138/181/138 140/183/140
+f 130/269/130 132/270/132 139/182/139 138/181/138
+f 73/268/73 76/267/76 140/183/140 137/184/137
+s 1
+f 160/204/160 146/190/146 141/185/141 159/203/159
+f 161/206/161 142/186/142 143/187/143 62/205/62
+f 161/206/161 63/207/63 144/188/144 142/186/142
+f 63/219/63 159/203/159 141/185/141 144/216/144
+f 62/205/62 143/187/143 145/189/145 64/208/64
+f 64/208/64 145/189/145 146/190/146 160/204/160
+f 164/211/164 152/196/152 147/191/147 163/210/163
+f 167/214/167 150/194/150 148/192/148 166/213/166
+f 163/210/163 147/191/147 150/217/150 167/220/167
+f 168/215/168 165/212/165 149/193/149 151/195/151
+f 164/211/164 168/215/168 151/195/151 152/196/152
+f 210/285/210 158/202/158 153/197/153 216/292/216
+f 217/293/217 211/286/211 154/198/154 155/199/155
+f 211/286/211 212/287/212 156/200/156 154/198/154
+f 216/292/216 153/197/153 156/218/156 212/288/212
+f 218/294/218 217/293/217 155/199/155 157/201/157
+f 218/294/218 157/201/157 158/202/158 210/285/210
+f 148/192/148 149/193/149 162/209/162 166/213/166
+f 146/190/146 164/211/164 163/210/163 141/185/141
+f 167/214/167 166/213/166 142/186/142 144/188/144
+f 163/210/163 167/220/167 144/216/144 141/185/141
+f 143/187/143 165/212/165 168/215/168 145/189/145
+f 145/189/145 168/215/168 164/211/164 146/190/146
+f 162/209/162 165/212/165 143/187/143 142/186/142
+f 171/224/171 133/223/133 170/222/170 169/221/169
+f 174/228/174 134/227/134 173/226/173 172/225/172
+f 174/228/174 172/225/172 175/229/175 176/230/176
+f 176/232/176 175/231/175 170/222/170 133/223/133
+f 134/227/134 178/234/178 177/233/177 173/226/173
+f 178/234/178 171/224/171 169/221/169 177/233/177
+f 180/236/180 179/235/179 181/237/181 186/244/186
+f 185/241/185 184/240/184 183/239/183 182/238/182
+f 186/244/186 185/243/185 182/242/182 180/236/180
+f 189/247/189 188/246/188 187/245/187 190/248/190
+f 188/246/188 189/247/189 181/237/181 179/235/179
+f 192/250/192 191/249/191 219/295/219 213/289/213
+f 214/290/214 194/252/194 193/251/193 220/296/220
+f 220/296/220 193/251/193 195/253/195 221/298/221
+f 195/254/195 192/250/192 213/289/213 221/297/221
+f 215/291/215 196/255/196 194/252/194 214/290/214
+f 191/249/191 196/255/196 215/291/215 219/295/219
+f 197/256/197 187/245/187 183/239/183 184/240/184
+f 186/244/186 181/237/181 169/221/169 170/222/170
+f 185/241/185 175/229/175 172/225/172 184/240/184
+f 186/244/186 170/222/170 175/231/175 185/243/185
+f 173/226/173 177/233/177 189/247/189 190/248/190
+f 181/237/181 189/247/189 177/233/177 169/221/169
+f 173/226/173 190/248/190 197/256/197 172/225/172
+f 198/271/198 204/278/204 147/191/147 152/196/152
+f 148/192/148 199/272/199 205/279/205 149/193/149
+f 200/273/200 199/272/199 148/192/148 150/194/150
+f 147/191/147 204/278/204 200/274/200 150/217/150
+f 149/193/149 205/279/205 206/280/206 151/195/151
+f 206/280/206 198/271/198 152/196/152 151/195/151
+f 180/236/180 201/275/201 207/281/207 179/235/179
+f 202/276/202 208/282/208 183/239/183 187/245/187
+f 183/239/183 208/282/208 209/283/209 182/238/182
+f 209/284/209 201/275/201 180/236/180 182/242/182
+f 203/277/203 202/276/202 187/245/187 188/246/188
+f 179/235/179 207/281/207 203/277/203 188/246/188
+f 222/299/222 228/300/228 204/317/204 198/313/198
+f 223/301/223 229/302/229 205/318/205 199/314/199
+f 228/300/228 224/303/224 200/316/200 204/317/204
+f 229/302/229 230/304/230 206/319/206 205/318/205
+f 230/304/230 222/299/222 198/313/198 206/319/206
+f 225/305/225 231/306/231 207/323/207 201/320/201
+f 226/307/226 232/308/232 208/324/208 202/321/202
+f 232/308/232 233/309/233 209/325/209 208/324/208
+f 233/310/233 225/305/225 201/320/201 209/326/209
+f 231/306/231 227/311/227 203/322/203 207/323/207
+f 224/312/224 223/301/223 199/314/199 200/315/200
+f 227/311/227 226/307/226 202/321/202 203/322/203
+s 3
+f 7/10/7 23/28/23 16/21/16
+f 89/51/89 46/56/46 91/65/91
+f 16/21/16 50/61/50 7/10/7
+f 18/23/18 17/22/17 21/26/21
+f 30/36/30 50/61/50 16/21/16
+f 34/40/34 39/45/39 41/47/41
+f 33/39/33 41/69/41 38/44/38
+f 6/8/6 131/59/131 49/60/49
+f 30/36/30 28/34/28 50/61/50
+f 29/35/29 13/18/13 12/16/12
+f 38/44/38 43/49/43 51/62/51
+f 52/63/52 40/46/40 39/45/39
+f 18/23/18 22/27/22 17/22/17
+f 19/24/19 10/13/10 11/14/11
+f 83/108/83 85/111/85 84/110/84
+f 89/115/89 91/117/91 90/116/90
+f 85/111/85 83/108/83 100/127/100
+f 106/135/106 108/137/108 103/132/103
+f 114/146/114 85/111/85 100/127/100
+f 119/152/119 122/155/122 121/154/121
+f 117/150/117 123/157/123 122/156/122
+f 77/101/77 49/106/49 131/169/131
+f 114/146/114 100/127/100 112/144/112
+f 113/145/113 98/125/98 99/126/99
+f 123/157/123 118/151/118 127/161/127
+f 120/153/120 121/154/121 128/162/128
+f 106/135/106 103/132/103 102/131/102
+f 93/119/93 88/114/88 101/130/101
+s 1
+f 149/193/149 165/212/165 162/209/162
+f 142/186/142 166/213/166 162/209/162
+f 187/245/187 197/256/197 190/248/190
+f 172/225/172 197/256/197 184/240/184
+# 224 faces
+
+g

Added: content/models/men/Basemeshes/Male_shortsleeve.obj
===================================================================
--- content/models/men/Basemeshes/Male_shortsleeve.obj	2007-02-05 14:01:45 UTC (rev 3022)
+++ content/models/men/Basemeshes/Male_shortsleeve.obj	2007-02-05 17:30:36 UTC (rev 3023)
@@ -0,0 +1,719 @@
+# Max2Obj Version 4.0 Mar 10th, 2001
+#
+# object shortsleeve to come ...
+#
+v  -9.674088 131.047165 -8.180655
+v  -14.853569 130.390289 6.320558
+v  -8.195537 131.149841 11.888079
+v  -7.667643 120.870468 -6.862447
+v  -14.220288 120.813133 5.121159
+v  -8.572046 120.411781 10.276305
+v  -11.285228 139.654816 -10.954058
+v  -15.747420 139.817017 5.546883
+v  -9.636748 138.468918 11.549717
+v  -16.811031 146.243607 4.290038
+v  -10.420619 147.395706 10.457679
+v  -12.625897 150.032715 -11.629513
+v  -12.463554 155.797119 -9.370251
+v  -6.614265 148.502731 -13.092021
+v  -6.292001 157.067886 -11.233937
+v  -15.849259 142.369461 -5.933131
+v  -13.200713 159.272293 -3.971090
+v  -7.730159 162.368347 -2.818505
+v  -15.619560 155.625076 2.178386
+v  -8.455843 155.286835 6.068118
+v  -5.543565 160.564377 1.152841
+v  -5.388499 161.948013 -8.581980
+v  -15.625908 137.062485 -3.617672
+v  -6.607821 166.951187 -2.418211
+v  -4.418390 167.521698 -7.311618
+v  -3.729260 164.107697 1.944503
+v  -18.556364 146.418320 2.707935
+v  -15.698530 146.484146 -10.624576
+v  -17.641859 153.606918 -9.312040
+v  -16.191160 143.456390 -5.557207
+v  -20.672770 156.254013 -4.263125
+v  -20.093876 153.377411 1.255468
+v  -19.552406 143.033798 1.292559
+v  -18.660786 142.704742 -9.358850
+v  -23.817516 144.313705 -9.024710
+v  -27.244053 142.928940 -4.012254
+v  -24.204033 143.433456 1.042453
+v  -19.261841 145.303391 1.425023
+v  -17.574320 144.993362 -10.205257
+v  -21.251949 150.369339 -9.823054
+v  -16.531656 142.639526 -4.759549
+v  -24.942184 152.515167 -4.208312
+v  -22.939699 149.852051 1.490852
+v  0.000000 132.430313 13.152997
+v  0.000000 160.036789 3.959773
+v  -4.676600 147.580612 11.743669
+v  -13.688500 120.841797 -2.964110
+v  -14.819093 131.199295 -2.209838
+v  0.000000 123.044563 12.906065
+v  -14.322326 144.534698 -9.899858
+v  -24.155298 146.383041 1.150521
+v  -23.444647 146.852371 -9.307751
+v  -26.944620 147.017822 -4.110283
+v  0.000000 138.850571 -11.912676
+v  0.000000 148.209198 -12.990906
+v  0.000000 167.251465 -8.320364
+v  0.000000 162.965790 -9.572830
+v  -5.653311 113.098022 -9.493886
+v  -15.915438 109.885025 3.429334
+v  -9.345687 106.752579 9.560552
+v  -13.951006 112.463028 -5.639289
+v  -21.227037 136.353989 0.556183
+v  -25.306213 137.972672 -0.044974
+v  -25.611418 137.587448 -8.663680
+v  -21.189651 135.028625 -9.075477
+v  -18.688852 135.157776 -4.603783
+v  -28.135395 138.472961 -4.186462
+v  0.000000 113.097527 -9.847531
+v  -22.561861 129.754349 1.594813
+v  -27.509289 131.717575 0.865700
+v  -27.737160 131.731262 -9.587498
+v  -22.519381 130.125153 -10.086944
+v  -19.483423 128.303543 -4.663452
+v  -30.940664 132.324356 -4.157303
+v  -8.644358 107.578697 -12.694216
+v  -18.004269 103.665840 3.130498
+v  -11.524419 100.622643 10.794209
+v  -14.713471 106.845108 -8.528470
+v  0.000000 120.501320 -7.448944
+v  5.653311 113.098022 -9.493886
+v  7.667644 120.870468 -6.862447
+v  13.951006 112.463028 -5.639289
+v  13.688500 120.841797 -2.964110
+v  14.220288 120.813133 5.121159
+v  15.915439 109.885025 3.429334
+v  8.572046 120.411781 10.276305
+v  9.674088 131.047165 -8.180655
+v  0.000000 129.209213 -8.861284
+v  14.819093 131.199295 -2.209838
+v  14.853569 130.390289 6.320558
+v  8.195537 131.149841 11.888079
+v  11.285229 139.654816 -10.954058
+v  15.625908 137.062485 -3.617672
+v  15.849260 142.369461 -5.933131
+v  9.636748 138.468918 11.549717
+v  15.747420 139.817017 5.546883
+v  10.420619 147.395706 10.457679
+v  0.000000 147.527512 11.700139
+v  4.676600 147.580612 11.743669
+v  0.000000 138.837692 12.908384
+v  8.455843 155.286835 6.068118
+v  15.619560 155.625076 2.178386
+v  0.000000 154.048386 8.027085
+v  6.614265 148.502731 -13.092021
+v  0.000000 156.665024 -11.652201
+v  6.292001 157.067886 -11.233937
+v  12.625897 150.032715 -11.629513
+v  12.463554 155.797119 -9.370251
+v  14.322326 144.534698 -9.899858
+v  16.811031 146.243607 4.290038
+v  5.388499 161.948013 -8.581980
+v  13.200713 159.272293 -3.971090
+v  6.607821 166.951187 -2.418211
+v  4.418390 167.521698 -7.311618
+v  7.730159 162.272949 -4.121533
+v  3.729260 164.107697 1.944503
+v  5.543565 160.564377 1.152841
+v  0.000000 163.418091 3.501833
+v  20.093876 153.377411 1.255468
+v  18.556364 146.418320 2.707935
+v  15.698530 146.484146 -10.624576
+v  17.641859 153.606918 -9.312040
+v  16.191160 143.456390 -5.557207
+v  20.672770 156.254013 -4.263125
+v  24.204033 143.433456 1.042453
+v  19.552406 143.033798 1.292559
+v  24.155298 146.383041 1.150521
+v  18.660786 142.704742 -9.358850
+v  23.444647 146.852371 -9.307751
+v  17.574320 144.993362 -10.205257
+v  16.531656 142.639526 -4.759549
+v  19.261841 145.303391 1.425023
+v  23.817516 144.313705 -9.024710
+v  27.244053 142.928940 -4.012254
+v  26.944620 147.017822 -4.110283
+v  22.939701 149.852051 1.490852
+v  21.251949 150.369339 -9.823054
+v  24.942184 152.515167 -4.208312
+v  9.345687 106.752579 9.560552
+v  0.000000 116.915237 12.784960
+v  0.000000 105.688904 11.181005
+v  21.227037 136.353989 0.556183
+v  25.306213 137.972672 -0.044974
+v  25.611418 137.587448 -8.663680
+v  21.189651 135.028625 -9.075477
+v  18.688852 135.157776 -4.603783
+v  28.135395 138.472961 -4.186462
+v  27.509289 131.717575 0.865700
+v  22.561863 129.754349 1.594813
+v  22.519381 130.125153 -10.086944
+v  27.737160 131.731262 -9.587498
+v  19.483423 128.303543 -4.663452
+v  30.940664 132.324356 -4.157303
+v  0.000000 107.578201 -14.046832
+v  8.644358 107.578697 -12.694216
+v  14.713471 106.845108 -8.528470
+v  11.524419 100.622643 10.794209
+v  0.000000 99.558968 11.092043
+v  18.004269 103.665840 3.130498
+# 159 vertices
+
+vt  0.940857 0.785091 1.155421
+vt  0.849356 0.773380 1.155416
+vt  0.810459 0.231015 1.155410
+vt  0.880906 0.226246 1.155412
+vt  0.940857 0.850682 1.155427
+vt  0.863077 0.861307 1.155425
+vt  0.799876 0.141685 1.155418
+vt  0.871533 0.139056 1.155419
+vt  0.940857 0.715947 1.155415
+vt  0.837170 0.699163 1.155407
+vt  0.813037 0.303904 1.155403
+vt  0.871317 0.283624 1.155406
+vt  0.797624 0.369075 1.155397
+vt  0.872062 0.354404 1.155401
+vt  0.940857 0.662170 1.155410
+vt  0.821310 0.606166 1.155393
+vt  0.940857 0.623226 1.155410
+vt  0.845802 0.560397 1.155394
+vt  0.869067 0.636740 1.155401
+vt  0.894130 0.584384 1.155401
+vt  0.764396 0.678722 1.155405
+vt  0.862533 0.509025 1.155394
+vt  0.939873 0.515539 1.155405
+vt  0.835464 0.448997 1.155392
+vt  0.893933 0.424316 1.155401
+vt  0.932418 0.473223 1.155405
+vt  0.924534 0.562656 1.155403
+vt  0.774953 0.730224 1.155414
+vt  0.990053 0.573368 1.155416
+vt  0.976071 0.518827 1.155412
+vt  0.975615 0.550256 1.155412
+vt  0.976628 0.482964 1.155413
+vt  0.771618 0.386200 1.155387
+vt  0.777459 0.617012 1.155389
+vt  0.807187 0.553704 1.155385
+vt  0.747111 0.661504 1.155397
+vt  0.806701 0.499200 1.155383
+vt  0.800132 0.446111 1.155383
+vt  0.715001 0.401388 1.155375
+vt  0.715596 0.589856 1.155374
+vt  0.715568 0.544554 1.155365
+vt  0.693244 0.493413 1.155362
+vt  0.707307 0.442787 1.155365
+vt  0.741475 0.395202 1.155379
+vt  0.744257 0.602104 1.155379
+vt  0.769410 0.552217 1.155376
+vt  0.715623 0.648684 1.155388
+vt  0.768330 0.494192 1.155374
+vt  0.763119 0.440605 1.155375
+vt  0.954445 0.234380 1.155417
+vt  0.954445 0.342344 1.155413
+vt  0.954445 0.397304 1.155410
+vt  0.967223 0.441759 1.155413
+vt  0.991803 0.463885 1.155416
+vt  0.955466 0.597977 1.155411
+vt  0.917346 0.345530 1.155406
+vt  0.799612 0.871210 1.155427
+vt  0.774683 0.786160 1.155420
+vt  0.954445 0.114955 1.155426
+vt  0.954445 0.162103 1.155421
+vt  0.794383 0.648795 1.155397
+vt  0.734438 0.442317 1.155370
+vt  0.737685 0.546821 1.155370
+vt  0.726882 0.493031 1.155367
+vt  0.954445 0.268139 1.155415
+vt  0.719384 0.324766 1.155402
+vt  0.717034 0.297386 1.155407
+vt  0.720739 0.329003 1.155396
+vt  0.708470 0.339624 1.155388
+vt  0.725230 0.144305 1.155422
+vt  0.732439 0.239097 1.155414
+vt  0.896883 0.925050 1.155430
+vt  0.786735 0.046475 1.155426
+vt  0.868942 0.024201 1.155428
+vt  0.954445 0.022957 1.155429
+vt  0.820496 0.943158 1.155431
+vt  0.705572 0.069337 1.155428
+vt  0.651701 0.412479 1.155368
+vt  0.655253 0.448790 1.155361
+vt  0.651625 0.538707 1.155360
+vt  0.640325 0.575710 1.155369
+vt  0.644182 0.613620 1.155385
+vt  0.644182 0.375337 1.155383
+vt  0.651075 0.492141 1.155357
+vt  0.940857 0.911903 1.155432
+vt  0.955302 0.979720 1.155361
+vt  0.955040 0.979604 1.155368
+vt  0.954202 0.980127 1.155369
+vt  0.955035 0.980008 1.155360
+vt  0.954486 0.980248 1.155385
+vt  0.954486 0.979485 1.155383
+vt  0.954994 0.979859 1.155357
+vt  0.954457 0.979567 1.155432
+vt  0.954539 0.979560 1.155430
+vt  0.954682 0.979550 1.155431
+vt  0.954745 0.980044 1.155426
+vt  0.954591 0.980057 1.155428
+vt  0.954431 0.980057 1.155429
+vt  0.954897 0.980032 1.155428
+vt  0.940857 0.850682 1.155427
+vt  0.940857 0.911903 1.155432
+vt  0.896883 0.925050 1.155430
+vt  0.863077 0.861307 1.155425
+vt  0.820496 0.943158 1.155431
+vt  0.799612 0.871210 1.155427
+vt  0.799876 0.141685 1.155418
+vt  0.786735 0.046475 1.155426
+vt  0.871533 0.139056 1.155419
+vt  0.849356 0.773380 1.155416
+vt  0.940857 0.785091 1.155421
+vt  0.774683 0.786160 1.155420
+vt  0.810459 0.231015 1.155410
+vt  0.954445 0.162103 1.155421
+vt  0.880906 0.226246 1.155412
+vt  0.837170 0.699163 1.155407
+vt  0.940857 0.715947 1.155415
+vt  0.774953 0.730224 1.155414
+vt  0.764396 0.678722 1.155405
+vt  0.871317 0.283624 1.155406
+vt  0.813037 0.303904 1.155403
+vt  0.872062 0.354404 1.155401
+vt  0.954445 0.342344 1.155413
+vt  0.917346 0.345530 1.155406
+vt  0.954445 0.268139 1.155415
+vt  0.893933 0.424316 1.155401
+vt  0.835464 0.448997 1.155392
+vt  0.954445 0.397304 1.155410
+vt  0.869067 0.636740 1.155401
+vt  0.940857 0.662170 1.155410
+vt  0.940857 0.623226 1.155410
+vt  0.894130 0.584384 1.155401
+vt  0.821310 0.606166 1.155393
+vt  0.845802 0.560397 1.155394
+vt  0.794383 0.648795 1.155397
+vt  0.719384 0.324766 1.155402
+vt  0.717034 0.297386 1.155407
+vt  0.797624 0.369075 1.155397
+vt  0.924534 0.562656 1.155403
+vt  0.862533 0.509025 1.155394
+vt  0.976071 0.518827 1.155412
+vt  0.975615 0.550256 1.155412
+vt  0.939873 0.515539 1.155405
+vt  0.976628 0.482964 1.155413
+vt  0.932418 0.473223 1.155405
+vt  0.967223 0.441759 1.155413
+vt  0.991803 0.463885 1.155416
+vt  0.990053 0.573368 1.155416
+vt  0.955466 0.597977 1.155411
+vt  0.800132 0.446111 1.155383
+vt  0.771618 0.386200 1.155387
+vt  0.777459 0.617012 1.155389
+vt  0.807187 0.553704 1.155385
+vt  0.747111 0.661504 1.155397
+vt  0.720739 0.329003 1.155396
+vt  0.806701 0.499200 1.155383
+vt  0.707307 0.442787 1.155365
+vt  0.715001 0.401388 1.155375
+vt  0.734438 0.442317 1.155370
+vt  0.715596 0.589856 1.155374
+vt  0.737685 0.546821 1.155370
+vt  0.744257 0.602104 1.155379
+vt  0.715623 0.648684 1.155388
+vt  0.708470 0.339624 1.155388
+vt  0.741475 0.395202 1.155379
+vt  0.715568 0.544554 1.155365
+vt  0.693244 0.493413 1.155362
+vt  0.726882 0.493031 1.155367
+vt  0.763119 0.440605 1.155375
+vt  0.769410 0.552217 1.155376
+vt  0.768330 0.494192 1.155374
+vt  0.954445 0.234380 1.155417
+vt  0.705572 0.069337 1.155428
+vt  0.725230 0.144305 1.155422
+vt  0.732439 0.239097 1.155414
+vt  0.868942 0.024201 1.155428
+vt  0.954445 0.114955 1.155426
+vt  0.954445 0.022957 1.155429
+vt  0.651701 0.412479 1.155368
+vt  0.655253 0.448790 1.155361
+vt  0.651625 0.538707 1.155360
+vt  0.640325 0.575710 1.155369
+vt  0.644182 0.613620 1.155385
+vt  0.644182 0.375337 1.155383
+vt  0.651075 0.492141 1.155357
+vt  0.955302 0.979720 1.155361
+vt  0.955040 0.979604 1.155368
+vt  0.954202 0.980127 1.155369
+vt  0.955035 0.980008 1.155360
+vt  0.954486 0.980248 1.155385
+vt  0.954486 0.979485 1.155383
+vt  0.954994 0.979859 1.155357
+vt  0.954457 0.979567 1.155432
+vt  0.954539 0.979560 1.155430
+vt  0.954682 0.979550 1.155431
+vt  0.954591 0.980057 1.155428
+vt  0.954431 0.980057 1.155429
+vt  0.954745 0.980044 1.155426
+vt  0.954897 0.980032 1.155428
+vt  0.955040 0.979604 1.155368
+vt  0.955302 0.979720 1.155361
+vt  0.955035 0.980008 1.155360
+vt  0.954202 0.980127 1.155369
+vt  0.954486 0.980248 1.155385
+vt  0.954486 0.979485 1.155383
+vt  0.954994 0.979859 1.155357
+vt  0.955040 0.979604 1.155368
+vt  0.955302 0.979720 1.155361
+vt  0.955035 0.980008 1.155360
+vt  0.954202 0.980127 1.155369
+vt  0.954486 0.980248 1.155385
+vt  0.954486 0.979485 1.155383
+vt  0.954994 0.979859 1.155357
+vt  0.954539 0.979560 1.155430
+vt  0.954745 0.980044 1.155426
+vt  0.954591 0.980057 1.155428
+vt  0.954431 0.980057 1.155429
+vt  0.954682 0.979550 1.155431
+vt  0.954897 0.980032 1.155428
+vt  0.954457 0.979567 1.155432
+vt  0.954457 0.979567 1.155432
+vt  0.954539 0.979560 1.155430
+vt  0.954682 0.979550 1.155431
+vt  0.954745 0.980044 1.155426
+vt  0.954897 0.980032 1.155428
+vt  0.954591 0.980057 1.155428
+vt  0.954431 0.980057 1.155429
+# 226 texture vertices
+
+vn  -0.452979 -0.244492 -0.857341
+vn  -0.895976 -0.073584 0.437963
+vn  -0.409769 -0.052082 0.910701
+vn  -0.313940 0.043271 -0.948456
+vn  -0.919824 -0.025150 0.391525
+vn  -0.485886 -0.067804 0.871388
+vn  -0.462387 -0.262701 -0.846869
+vn  -0.905061 -0.072375 0.419078
+vn  -0.460920 -0.002975 0.887437
+vn  -0.787801 -0.089799 0.609348
+vn  -0.452455 0.260665 0.852841
+vn  -0.262187 0.074728 -0.962120
+vn  -0.355760 0.562821 -0.746102
+vn  -0.125800 0.016004 -0.991927
+vn  -0.178978 0.382285 -0.906546
+vn  -0.908503 -0.234170 -0.346103
+vn  -0.450845 0.891882 -0.035846
+vn  -0.777655 0.599081 0.190666
+vn  -0.397182 0.673940 0.622938
+vn  -0.249499 0.653641 0.714495
+vn  -0.503181 0.502586 0.703005
+vn  -0.449662 0.480643 -0.752852
+vn  -0.933716 -0.206386 -0.292540
+vn  -0.971737 0.229815 0.053962
+vn  -0.611102 0.275495 -0.742062
+vn  -0.594323 0.096928 0.798364
+vn  -0.470768 -0.502611 0.725093
+vn  -0.106585 -0.312084 -0.944057
+vn  -0.312198 0.518208 -0.796237
+vn  -0.247440 -0.805194 -0.538921
+vn  -0.534486 0.837392 -0.114451
+vn  -0.479831 0.513151 0.711645
+vn  0.491785 -0.156626 0.856514
+vn  0.427755 -0.318551 -0.845902
+vn  -0.503952 0.020594 -0.863486
+vn  -0.991235 0.131930 0.006883
+vn  -0.509601 -0.021820 0.860134
+vn  0.169965 -0.477429 0.862075
+vn  0.198839 -0.445231 -0.873059
+vn  -0.394859 0.324821 -0.859405
+vn  0.950721 -0.299840 0.078897
+vn  -0.820566 0.566890 -0.072847
+vn  -0.551462 0.247422 0.796663
+vn  -0.000000 0.003927 0.999992
+vn  -0.000000 0.393290 0.919415
+vn  -0.112446 0.315937 0.942093
+vn  -0.879495 0.041057 -0.474135
+vn  -0.938676 -0.128785 -0.319846
+vn  -0.000000 -0.062271 0.998059
+vn  -0.545265 -0.365975 -0.754154
+vn  -0.577365 0.060142 0.814268
+vn  -0.548598 0.082925 -0.831964
+vn  -0.979068 0.200142 -0.036997
+vn  -0.000000 -0.232715 -0.972545
+vn  -0.000000 0.017350 -0.999849
+vn  0.000000 0.267877 -0.963453
+vn  -0.000000 0.295716 -0.955276
+vn  -0.214559 0.441823 -0.871067
+vn  -0.920114 0.201462 0.335863
+vn  -0.381603 0.114782 0.917172
+vn  -0.794622 0.303335 -0.525893
+vn  0.470961 -0.095533 0.876966
+vn  -0.528463 0.122591 0.840059
+vn  -0.491039 0.199258 -0.848043
+vn  0.496698 -0.049247 -0.866525
+vn  0.977869 -0.209202 0.002744
+vn  -0.949930 0.311318 0.026720
+vn  -0.000000 0.466186 -0.884687
+vn  0.521510 0.028726 0.852762
+vn  -0.446796 0.281020 0.849353
+vn  -0.461596 0.296715 -0.835996
+vn  0.490825 0.031922 -0.870673
+vn  0.992301 -0.123271 -0.011963
+vn  -0.909334 0.415019 0.029501
+vn  -0.317713 0.555418 -0.768485
+vn  -0.899579 0.267404 0.345329
+vn  -0.333145 0.261502 0.905887
+vn  -0.777745 0.367731 -0.509791
+vn  -0.000000 0.087942 -0.996126
+vn  0.214559 0.441823 -0.871067
+vn  0.313940 0.043271 -0.948456
+vn  0.794622 0.303335 -0.525893
+vn  0.879495 0.041057 -0.474135
+vn  0.919824 -0.025150 0.391525
+vn  0.920114 0.201462 0.335863
+vn  0.485886 -0.067804 0.871388
+vn  0.452979 -0.244492 -0.857341
+vn  -0.000000 -0.229172 -0.973386
+vn  0.938676 -0.128785 -0.319846
+vn  0.895976 -0.073584 0.437963
+vn  0.409769 -0.052082 0.910701
+vn  0.462387 -0.262701 -0.846869
+vn  0.933716 -0.206386 -0.292540
+vn  0.908503 -0.234169 -0.346103
+vn  0.460920 -0.002975 0.887437
+vn  0.905061 -0.072375 0.419078
+vn  0.452455 0.260665 0.852841
+vn  0.000000 0.318970 0.947765
+vn  0.112446 0.315937 0.942093
+vn  -0.000000 0.060304 0.998180
+vn  0.249499 0.653641 0.714495
+vn  0.397182 0.673940 0.622938
+vn  0.000000 0.584209 0.811603
+vn  0.125800 0.016004 -0.991927
+vn  0.000000 0.291907 -0.956447
+vn  0.178978 0.382285 -0.906546
+vn  0.262187 0.074728 -0.962120
+vn  0.355760 0.562821 -0.746102
+vn  0.545265 -0.365975 -0.754154
+vn  0.787801 -0.089799 0.609348
+vn  0.440026 0.475292 -0.761888
+vn  0.444485 0.895206 -0.032245
+vn  0.981780 0.169214 0.086455
+vn  0.611102 0.275495 -0.742062
+vn  0.749295 0.662097 0.013556
+vn  0.632249 0.083976 0.770201
+vn  0.517433 0.537828 0.665585
+vn  -0.000000 0.084860 0.996393
+vn  0.479831 0.513151 0.711645
+vn  0.470768 -0.502611 0.725093
+vn  0.106585 -0.312084 -0.944057
+vn  0.312198 0.518208 -0.796237
+vn  0.247441 -0.805194 -0.538921
+vn  0.534486 0.837392 -0.114451
+vn  0.509601 -0.021820 0.860134
+vn  -0.491785 -0.156626 0.856514
+vn  0.577365 0.060142 0.814268
+vn  -0.427755 -0.318552 -0.845902
+vn  0.548598 0.082925 -0.831964
+vn  -0.198839 -0.445231 -0.873059
+vn  -0.950721 -0.299840 0.078897
+vn  -0.169965 -0.477429 0.862075
+vn  0.503952 0.020594 -0.863486
+vn  0.991235 0.131930 0.006883
+vn  0.979068 0.200142 -0.036997
+vn  0.551462 0.247422 0.796663
+vn  0.394859 0.324821 -0.859405
+vn  0.820566 0.566890 -0.072847
+vn  0.381603 0.114782 0.917172
+vn  0.000000 -0.054867 0.998494
+vn  0.000000 -0.074131 0.997249
+vn  -0.470961 -0.095533 0.876966
+vn  0.528463 0.122591 0.840059
+vn  0.491039 0.199258 -0.848043
+vn  -0.496698 -0.049247 -0.866525
+vn  -0.977869 -0.209202 0.002744
+vn  0.949930 0.311318 0.026720
+vn  0.446796 0.281020 0.849353
+vn  -0.521510 0.028726 0.852762
+vn  -0.490825 0.031922 -0.870673
+vn  0.461596 0.296715 -0.835996
+vn  -0.992301 -0.123271 -0.011962
+vn  0.909334 0.415019 0.029501
+vn  -0.000000 0.577434 -0.816437
+vn  0.317713 0.555418 -0.768485
+vn  0.777745 0.367731 -0.509791
+vn  0.333145 0.261502 0.905887
+vn  -0.000000 0.068483 0.997652
+vn  0.899579 0.267404 0.345329
+# 159 vertex normals
+
+g shortsleeve
+s 3
+f 79/5/79 68/85/68 58/72/58 4/6/4
+f 61/76/61 47/57/47 4/6/4 58/72/58
+f 6/8/6 5/7/5 59/73/59 60/74/60
+f 79/5/79 4/6/4 1/2/1 88/1/88
+f 1/2/1 4/6/4 47/57/47 48/58/48
+f 2/3/2 5/7/5 6/8/6 3/4/3
+f 3/4/3 6/8/6 49/60/49 44/50/44
+f 7/10/7 54/9/54 88/1/88 1/2/1
+f 3/4/3 9/12/9 8/11/8 2/3/2
+f 8/11/8 9/12/9 11/14/11 10/13/10
+f 20/25/20 19/24/19 11/14/11 46/56/46
+f 46/56/46 98/51/98 103/52/103 20/25/20
+f 14/19/14 55/15/55 54/9/54 7/10/7
+f 105/17/105 55/15/55 14/19/14 15/20/15
+f 15/20/15 14/19/14 12/16/12 13/18/13
+f 10/13/10 16/66/16 23/67/23 8/11/8
+f 13/18/13 17/22/17 22/27/22 15/20/15
+f 24/30/24 25/31/25 22/27/22 18/23/18
+f 26/32/26 24/30/24 18/23/18 21/26/21
+f 21/26/21 20/25/20 103/52/103 45/53/45
+f 118/54/118 26/32/26 21/26/21 45/53/45
+f 56/29/56 57/55/57 22/27/22 25/31/25
+f 105/17/105 15/20/15 22/27/22 57/55/57
+f 20/25/20 21/26/21 17/22/17 19/24/19
+f 32/38/32 27/33/27 10/13/10 19/24/19
+f 28/34/28 29/35/29 12/16/12 50/61/50
+f 27/33/27 30/68/30 16/66/16 10/13/10
+f 29/35/29 31/37/31 17/22/17 13/18/13
+f 31/37/31 32/38/32 19/24/19 17/22/17
+f 51/62/51 37/43/37 33/39/33 38/44/38
+f 52/63/52 39/45/39 34/40/34 35/41/35
+f 53/64/53 52/63/52 35/41/35 36/42/36
+f 53/64/53 36/42/36 37/43/37 51/62/51
+f 43/49/43 38/44/38 27/33/27 32/38/32
+f 40/46/40 29/35/29 28/34/28 39/45/39
+f 39/45/39 28/34/28 30/36/30 41/47/41
+f 41/69/41 30/68/30 27/33/27 38/44/38
+f 29/35/29 40/46/40 42/48/42 31/37/31
+f 42/48/42 43/49/43 32/38/32 31/37/31
+f 46/56/46 11/14/11 9/12/9 100/65/100
+f 47/70/47 61/77/61 59/73/59 5/7/5
+f 48/71/48 47/70/47 5/7/5 2/3/2
+f 8/11/8 23/67/23 48/71/48 2/3/2
+f 140/59/140 6/8/6 60/74/60 141/75/141
+f 50/61/50 12/16/12 14/19/14 7/10/7
+f 52/63/52 53/64/53 42/48/42 40/46/40
+f 42/48/42 53/64/53 51/62/51 43/49/43
+f 37/43/37 63/79/63 62/78/62 33/39/33
+f 34/40/34 65/81/65 64/80/64 35/41/35
+f 66/82/66 65/81/65 34/40/34 41/47/41
+f 33/39/33 62/78/62 66/83/66 41/69/41
+f 64/80/64 67/84/67 36/42/36 35/41/35
+f 36/42/36 67/84/67 63/79/63 37/43/37
+f 44/50/44 100/65/100 9/12/9 3/4/3
+f 23/28/23 7/10/7 1/2/1 48/58/48
+f 70/86/70 69/87/69 62/199/62 63/200/63
+f 72/88/72 71/89/71 64/201/64 65/202/65
+f 73/90/73 72/88/72 65/202/65 66/203/66
+f 69/87/69 73/91/73 66/204/66 62/199/62
+f 71/89/71 74/92/74 67/205/67 64/201/64
+f 74/92/74 70/86/70 63/200/63 67/205/67
+f 154/93/154 75/94/75 58/213/58 68/219/68
+f 75/94/75 78/95/78 61/217/61 58/213/58
+f 77/97/77 60/215/60 59/214/59 76/96/76
+f 158/98/158 141/216/141 60/215/60 77/97/77
+f 76/96/76 59/214/59 61/218/61 78/99/78
+f 79/100/79 81/103/81 80/102/80 68/101/68
+f 81/103/81 83/105/83 82/104/82 80/102/80
+f 85/107/85 84/106/84 86/108/86 139/175/139
+f 79/100/79 88/110/88 87/109/87 81/103/81
+f 87/109/87 89/111/89 83/105/83 81/103/81
+f 86/108/86 84/106/84 90/112/90 91/114/91
+f 49/113/49 86/108/86 91/114/91 44/171/44
+f 92/115/92 87/109/87 88/110/88 54/116/54
+f 96/120/96 95/119/95 91/114/91 90/112/90
+f 97/121/97 95/119/95 96/120/96 110/137/110
+f 97/121/97 102/126/102 101/125/101 99/123/99
+f 103/127/103 98/122/98 99/123/99 101/125/101
+f 104/128/104 92/115/92 54/116/54 55/129/55
+f 105/130/105 106/131/106 104/128/104 55/129/55
+f 106/131/106 108/133/108 107/132/107 104/128/104
+f 93/136/93 94/135/94 110/137/110 96/120/96
+f 111/138/111 112/139/112 108/133/108 106/131/106
+f 113/140/113 115/142/115 111/138/111 114/141/114
+f 116/143/116 117/144/117 115/142/115 113/140/113
+f 117/144/117 45/145/45 103/127/103 101/125/101
+f 118/146/118 45/145/45 117/144/117 116/143/116
+f 56/147/56 114/141/114 111/138/111 57/148/57
+f 105/130/105 57/148/57 111/138/111 106/131/106
+f 101/125/101 102/126/102 112/139/112 117/144/117
+f 119/149/119 102/126/102 110/137/110 120/150/120
+f 107/132/107 122/152/122 121/151/121 109/134/109
+f 120/150/120 110/137/110 94/135/94 123/154/123
+f 122/152/122 108/133/108 112/139/112 124/155/124
+f 124/155/124 112/139/112 102/126/102 119/149/119
+f 126/157/126 125/156/125 127/158/127 132/164/132
+f 128/159/128 130/161/130 129/160/129 133/165/133
+f 135/167/135 134/166/134 133/165/133 129/160/129
+f 135/167/135 127/158/127 125/156/125 134/166/134
+f 136/168/136 119/149/119 120/150/120 132/164/132
+f 137/169/137 130/161/130 121/151/121 122/152/122
+f 130/161/130 131/162/131 123/153/123 121/151/121
+f 131/163/131 132/164/132 120/150/120 123/154/123
+f 138/170/138 137/169/137 122/152/122 124/155/124
+f 119/149/119 136/168/136 138/170/138 124/155/124
+f 99/123/99 100/124/100 95/119/95 97/121/97
+f 85/107/85 82/172/82 83/173/83 84/106/84
+f 89/174/89 90/112/90 84/106/84 83/173/83
+f 89/174/89 93/136/93 96/120/96 90/112/90
+f 139/175/139 86/108/86 140/176/140 141/177/141
+f 104/128/104 107/132/107 109/134/109 92/115/92
+f 138/170/138 135/167/135 129/160/129 137/169/137
+f 127/158/127 135/167/135 138/170/138 136/168/136
+f 125/156/125 126/157/126 142/178/142 143/179/143
+f 128/159/128 133/165/133 144/180/144 145/181/145
+f 146/182/146 131/162/131 128/159/128 145/181/145
+f 146/183/146 142/178/142 126/157/126 131/163/131
+f 144/180/144 133/165/133 134/166/134 147/184/147
+f 134/166/134 125/156/125 143/179/143 147/184/147
+f 95/119/95 100/124/100 44/171/44 91/114/91
+f 87/109/87 92/115/92 93/117/93 89/111/89
+f 148/185/148 143/207/143 142/206/142 149/186/149
+f 150/187/150 145/209/145 144/208/144 151/188/151
+f 152/189/152 146/210/146 145/209/145 150/187/150
+f 149/186/149 142/206/142 146/211/146 152/190/152
+f 151/188/151 144/208/144 147/212/147 153/191/153
+f 153/191/153 147/212/147 143/207/143 148/185/148
+f 154/192/154 68/220/68 80/221/80 155/193/155
+f 82/222/82 156/194/156 155/193/155 80/221/80
+f 85/223/85 139/225/139 157/195/157 159/197/159
+f 139/225/139 141/226/141 158/196/158 157/195/157
+f 82/224/82 85/223/85 159/197/159 156/198/156
+f 7/10/7 23/28/23 16/21/16
+f 98/51/98 46/56/46 100/65/100
+f 16/21/16 50/61/50 7/10/7
+f 18/23/18 17/22/17 21/26/21
+f 30/36/30 50/61/50 16/21/16
+f 34/40/34 39/45/39 41/47/41
+f 33/39/33 41/69/41 38/44/38
+f 6/8/6 140/59/140 49/60/49
+f 30/36/30 28/34/28 50/61/50
+f 29/35/29 13/18/13 12/16/12
+f 38/44/38 43/49/43 51/62/51
+f 52/63/52 40/46/40 39/45/39
+f 18/23/18 22/27/22 17/22/17
+f 19/24/19 10/13/10 11/14/11
+f 92/115/92 94/118/94 93/117/93
+f 98/122/98 100/124/100 99/123/99
+f 94/118/94 92/115/92 109/134/109
+f 115/142/115 117/144/117 112/139/112
+f 123/153/123 94/118/94 109/134/109
+f 128/159/128 131/162/131 130/161/130
+f 126/157/126 132/164/132 131/163/131
+f 86/108/86 49/113/49 140/176/140
+f 123/153/123 109/134/109 121/151/121
+f 122/152/122 107/132/107 108/133/108
+f 132/164/132 127/158/127 136/168/136
+f 129/160/129 130/161/130 137/169/137
+f 115/142/115 112/139/112 111/138/111
+f 102/126/102 97/121/97 110/137/110
+# 160 faces
+
+g



From tanis at mail.berlios.de  Tue Feb  6 19:56:08 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Tue, 6 Feb 2007 19:56:08 +0100
Subject: [Dsa-hl-svn] r3024 - in rl/trunk/engine/core: include src
Message-ID: <200702061856.l16Iu8c5013039@sheep.berlios.de>

Author: tanis
Date: 2007-02-06 19:55:31 +0100 (Tue, 06 Feb 2007)
New Revision: 3024

Modified:
   rl/trunk/engine/core/include/SoundManager.h
   rl/trunk/engine/core/src/ActorManager.cpp
   rl/trunk/engine/core/src/ContentModule.cpp
   rl/trunk/engine/core/src/SoundManager.cpp
Log:
SoundManager now manages its resources like Ogre's own ResourceManagers do.

Modified: rl/trunk/engine/core/include/SoundManager.h
===================================================================
--- rl/trunk/engine/core/include/SoundManager.h	2007-02-05 17:30:36 UTC (rev 3023)
+++ rl/trunk/engine/core/include/SoundManager.h	2007-02-06 18:55:31 UTC (rev 3024)
@@ -60,18 +60,7 @@
         /// Konstruktor
         SoundManager();
 		virtual ~SoundManager();
-        /// Alle Sounds in die Resourcenliste eintragen.
-		virtual void addSounds(const Ogre::String& groupName = Ogre::ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
-        /// erzeugt einen Sound und f?gt ihn hinzufuegen (Mit Mutex mittelbar)
-        virtual void add(const Ogre::String& filename, const Ogre::String& groupName = Ogre::ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
-        /// Eine Namesliste erzeugen
-        StringList getSounds();
 
-        virtual Ogre::ResourcePtr create(const Ogre::String& name, 
-            const Ogre::String& group = Ogre::ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME, 
-            bool isManual = false, Ogre::ManualResourceLoader* loader = 0, 
-            const Ogre::NameValuePairList* createParams = 0);
-
 	    /// Den aktiven Listener zur?ckgeben.
 		ListenerObject* getListener() const;
         /// Creates the listener actor.

Modified: rl/trunk/engine/core/src/ActorManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ActorManager.cpp	2007-02-05 17:30:36 UTC (rev 3023)
+++ rl/trunk/engine/core/src/ActorManager.cpp	2007-02-06 18:55:31 UTC (rev 3024)
@@ -193,7 +193,8 @@
         try
         {
             Sound* sm = SoundManager::getSingleton().
-				getActiveDriver()->createSample(SoundManager::getSingleton().getByName(soundfile));
+				getActiveDriver()->createSample(SoundManager::getSingleton().load(soundfile,
+                    ResourceGroupManager::AUTODETECT_RESOURCE_GROUP_NAME));
             SoundObject* so = new SoundObject(sm, soundfile);
             actor = new Actor(uniquename, so);
             mActors.insert(ActorPtrPair(uniquename,actor));  
@@ -222,7 +223,8 @@
         try
         {
             Sound* sm = SoundManager::getSingleton().
-                getActiveDriver()->createStream(SoundManager::getSingleton().getByName(soundfile));
+                getActiveDriver()->createStream(SoundManager::getSingleton().load(soundfile,
+                    ResourceGroupManager::AUTODETECT_RESOURCE_GROUP_NAME));
             SoundObject* so = new SoundObject(sm, soundfile);
 
             actor = new Actor(uniquename, so);

Modified: rl/trunk/engine/core/src/ContentModule.cpp
===================================================================
--- rl/trunk/engine/core/src/ContentModule.cpp	2007-02-05 17:30:36 UTC (rev 3023)
+++ rl/trunk/engine/core/src/ContentModule.cpp	2007-02-06 18:55:31 UTC (rev 3024)
@@ -133,8 +133,6 @@
         addSearchPath(moduleDir + "/gui/windows/buttons", resourceGroup);
         addSearchPath(moduleDir + "/dialogs", resourceGroup);     
 
-		SoundManager::getSingleton().addSounds( resourceGroup );
-
 		RubyInterpreter* interpreter = CoreSubsystem::getSingleton().getRubyInterpreter();
         if (interpreter != NULL)
         {

Modified: rl/trunk/engine/core/src/SoundManager.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundManager.cpp	2007-02-05 17:30:36 UTC (rev 3023)
+++ rl/trunk/engine/core/src/SoundManager.cpp	2007-02-06 18:55:31 UTC (rev 3024)
@@ -25,6 +25,7 @@
 #include "SoundDriver.h"
 #include "SoundResource.h"
 #include <OgreException.h>
+#include <OgreResourceGroupManager.h>
 
 #include "NullDriver.h"
 
@@ -77,10 +78,15 @@
 	NullDriver* nullDriver = new NullDriver(this);
     registerDriver(nullDriver);
     setActiveDriver(nullDriver);
+
+    mResourceType = "Sound";
+    ResourceGroupManager::getSingleton()._registerResourceManager(mResourceType, this);
+
 }
 
 SoundManager::~SoundManager()
 {
+    ResourceGroupManager::getSingleton()._unregisterResourceManager(mResourceType);
     unloadAllDrivers();    
 }
 
@@ -118,63 +124,7 @@
 	return newSound;
 }
 
-ResourcePtr SoundManager::create(const String& name, const String& group, 
-            bool isManual, ManualResourceLoader* loader , 
-            const NameValuePairList* createParams)
-{
-    ResourcePtr p = ResourceManager::create(name, group, isManual, loader, createParams);
-    return p;
-}
-
 /**
- * @author JoSch
- * @date 04-27-2004
- */
-void SoundManager::addSounds(const Ogre::String& group)
-{
-    StringList extlist = getExtension();
-    StringList::const_iterator cit;
-    for(cit = extlist.begin(); cit != extlist.end(); cit++)
-    {
-		StringVectorPtr sl = ResourceGroupManager::getSingleton().findResourceNames(
-			group, *cit );
-        StringVector::const_iterator it;
-        for(it = sl->begin(); it != sl->end(); it++)
-        {
-            try {
-                create(*it, group);
-            } catch(...)
-            {}
-        }
-    }
-}
-
-void SoundManager::add(const String& filename, const String& group)
-{
-	boost::mutex::scoped_lock lock(mResListMutex);
-    create(filename, group);
-}
-
-/**
- * Erzeugt eine Liste von Soundnamen.
- * @return Erzeugte Namensliste.
- * @author JoSch
- * @date 06-17-2004
- */
-StringList SoundManager::getSounds()
-{
-    StringList result;
-    ResourceMapIterator it = getResourceIterator();
-    while (it.hasMoreElements())
-    {
-        result.push_back(it.peekNextValue()->getName());
-        it.moveNext();
-    }
-    
-    return result;
-}
-
-/**
  * @return Die Liste der funktionierenden Treiber.
  * @author JoSch
  * @date 12-23-2005



From tanis at mail.berlios.de  Tue Feb  6 19:57:45 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Tue, 6 Feb 2007 19:57:45 +0100
Subject: [Dsa-hl-svn] r3025 - rl/trunk/engine/core/include
Message-ID: <200702061857.l16Ivj2h013074@sheep.berlios.de>

Author: tanis
Date: 2007-02-06 19:57:23 +0100 (Tue, 06 Feb 2007)
New Revision: 3025

Modified:
   rl/trunk/engine/core/include/Job.h
Log:
Doc update

Modified: rl/trunk/engine/core/include/Job.h
===================================================================
--- rl/trunk/engine/core/include/Job.h	2007-02-06 18:55:31 UTC (rev 3024)
+++ rl/trunk/engine/core/include/Job.h	2007-02-06 18:57:23 UTC (rev 3025)
@@ -52,6 +52,8 @@
          * This function is called by the JobScheduler at most once per frame. The frequency depends
          * on the Job's priority given with JobScheduler#addJob.
          * @param time the frame-time time, since the last call of this function.
+         * @return true, when the job is done, false else. If false is returned. The Job will be
+         * rescheduled for another execution.
          */
         virtual bool execute(Ogre::Real time) = 0;
 



From chrber at mail.berlios.de  Wed Feb  7 20:30:19 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Wed, 7 Feb 2007 20:30:19 +0100
Subject: [Dsa-hl-svn] r3026 - in rl/trunk: . engine/ai/src
	engine/common/include engine/common/src engine/core
	engine/core/include engine/core/include/nulldriver
	engine/core/src engine/core/src/nulldriver engine/startup/src
	engine/ui/include engine/ui/src plugins/fmod4driver/include
	plugins/fmod4driver/src plugins/openaldriver/include
	plugins/openaldriver/src
Message-ID: <200702071930.l17JUJk2026075@sheep.berlios.de>

Author: chrber
Date: 2007-02-07 20:30:10 +0100 (Wed, 07 Feb 2007)
New Revision: 3026

Modified:
   rl/trunk/configure.in
   rl/trunk/engine/ai/src/AiSubsystem.cpp
   rl/trunk/engine/common/include/ConfigFile.h
   rl/trunk/engine/common/include/RastullahPrerequisites.h
   rl/trunk/engine/common/src/ConfigFile.cpp
   rl/trunk/engine/core/Makefile.am
   rl/trunk/engine/core/include/ConfigurationManager.h
   rl/trunk/engine/core/include/CoreSubsystem.h
   rl/trunk/engine/core/include/SoundDriver.h
   rl/trunk/engine/core/include/SoundManager.h
   rl/trunk/engine/core/include/nulldriver/NullDriver.h
   rl/trunk/engine/core/src/ConfigurationManager.cpp
   rl/trunk/engine/core/src/ContentModule.cpp
   rl/trunk/engine/core/src/CoreSubsystem.cpp
   rl/trunk/engine/core/src/DotSceneLoader.cpp
   rl/trunk/engine/core/src/DotSceneOctreeWorld.cpp
   rl/trunk/engine/core/src/Makefile.am
   rl/trunk/engine/core/src/SoundDriver.cpp
   rl/trunk/engine/core/src/SoundManager.cpp
   rl/trunk/engine/core/src/nulldriver/NullDriver.cpp
   rl/trunk/engine/startup/src/RastullahMain.cpp
   rl/trunk/engine/ui/include/CommandMapper.h
   rl/trunk/engine/ui/include/InputManager.h
   rl/trunk/engine/ui/src/CommandMapper.cpp
   rl/trunk/engine/ui/src/DebugWindow.cpp
   rl/trunk/engine/ui/src/DialogCharacterController.cpp
   rl/trunk/engine/ui/src/MovementCharacterController.cpp
   rl/trunk/engine/ui/src/UiSubsystem.cpp
   rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h
   rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp
   rl/trunk/plugins/openaldriver/include/OpenALDriver.h
   rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp
   rl/trunk/rastullah.conf.in
Log:
Implemented Step 2 of ConfigurationManager rewrite:
 - Rastullah works without a default configuration file, using compiled fallback values
 - Restructered a whole bunch of classes, so that this works (bugs?!)


Modified: rl/trunk/configure.in
===================================================================
--- rl/trunk/configure.in	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/configure.in	2007-02-07 19:30:10 UTC (rev 3026)
@@ -108,7 +108,7 @@
 
 # Ogre
 PKG_CHECK_MODULES(OGRE, OGRE >= 1.3.0)
-AC_ARG_WITH(ogre-plugins,[  --with-ogre-plugins=path        Set location of Ogre plugins],[ OGRE_PLUGINDIR="$withval"], [OGRE_PLUGINDIR=/usr/local/lib/OGRE])
+AC_ARG_WITH(ogre-plugins,[  --with-ogre-plugins=path        Set location of Ogre plugins],[ OGRE_PLUGINDIR="$withval"], [OGRE_PLUGINDIR=`pkg-config OGRE --variable=plugindir`])
 AC_SUBST(OGRE_PLUGINDIR)
 
 # CEGUI
@@ -193,10 +193,11 @@
 	prefix=${ac_default_prefix}
 fi
 dnl Must double eval here, to replace ${datadir} and after that ${prefix}
-eval RL_MODULE_DIR="${datadir}"
-eval RL_MODULE_DIR="${RL_MODULE_DIR}/rastullah"
-AC_SUBST(RL_MODULE_DIR)
+eval RL_MODULEDIR="${datadir}"
+eval RL_MODULEDIR="${RL_MODULEDIR}/rastullah"
+AC_SUBST(RL_MODULEDIR)
 
+
 dnl Create the makefiles
 AC_CONFIG_FILES([Makefile \
 		docs/Makefile docs/src/Makefile \
@@ -215,14 +216,14 @@
 		plugins/Makefile \
 		plugins/fmod4driver/Makefile plugins/fmod4driver/include/Makefile plugins/fmod4driver/src/Makefile \
 		plugins/openaldriver/Makefile plugins/openaldriver/include/Makefile plugins/openaldriver/src/Makefile \
-		rastullah.conf  \
 		tools/Makefile \
+		rastullah.conf
     ])
 
 AC_OUTPUT
 
-eval GAME_DIR="${bindir}"
-eval GAME_DIR="${GAME_DIR}"
+eval RL_GAMEDIR="${bindir}"
+eval RL_GAMEDIR="${RL_GAMEDIR}"
 
 dnl Show a summary about important directories
 echo
@@ -239,8 +240,8 @@
 echo "       OpenAL plugin:                      ${enable_openal-no}"
 echo
 echo " Directory settings:"
-echo "       rastullah binary will be placed in: ${GAME_DIR}"
-echo "       Module directory:                   ${RL_MODULE_DIR}"
+echo "       rastullah binary will be placed in: ${RL_GAMEDIR}"
+echo "       Module directory:                   ${RL_MODULEDIR}"
 echo
 echo " Configuration files:"
 echo "       installation of global config file: ${enable_global_config-no}"

Modified: rl/trunk/engine/ai/src/AiSubsystem.cpp
===================================================================
--- rl/trunk/engine/ai/src/AiSubsystem.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/ai/src/AiSubsystem.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Perl Artistic License.
  *
@@ -30,36 +30,36 @@
 
 AiSubsystem& AiSubsystem::getSingleton(void)
 {
-	return Singleton<AiSubsystem>::getSingleton();
+    return Singleton<AiSubsystem>::getSingleton();
 }
 
 AiSubsystem* AiSubsystem::getSingletonPtr(void)
 {
-	return Singleton<AiSubsystem>::getSingletonPtr();
+    return Singleton<AiSubsystem>::getSingletonPtr();
 }
 
 AiSubsystem::AiSubsystem(void)
-	: mAgentManager(NULL), 
-	  mWorld(NULL)
+    : mAgentManager(NULL),
+      mWorld(NULL)
 {
-	LOG_MESSAGE(Logger::AI, "Init Start");
-	initialize();
-	LOG_MESSAGE(Logger::AI, "Init Ende");
+    LOG_MESSAGE(Logger::AI, "Init Start");
+    initialize();
+    LOG_MESSAGE(Logger::AI, "Init Ende");
 }
 
 AiSubsystem::~AiSubsystem(void)
 {
     CoreSubsystem::getSingletonPtr()->getWorld()->removeSceneChangeListener(this);
     AgentManager::getSingleton().removeAllAgents();
-	mWorld->removeAllObstacles();
-	delete mAgentManager;
-	delete mWorld;
+    mWorld->removeAllObstacles();
+    delete mAgentManager;
+    delete mWorld;
 }
 
 void AiSubsystem::initialize()
 {
-	mAgentManager = new AgentManager();
-	mWorld = new AiWorld();
+    mAgentManager = new AgentManager();
+    mWorld = new AiWorld();
 
     CoreSubsystem::getSingletonPtr()->getWorld()->addSceneChangeListener(this);
     GameLoop::getSingleton().addTask(AgentManager::getSingletonPtr(), GameLoop::TG_LOGIC);
@@ -67,8 +67,8 @@
 
 void AiSubsystem::onBeforeClearScene()
 {
-	AgentManager::getSingleton().removeAllAgents();
-	mWorld->removeAllObstacles();
+    AgentManager::getSingleton().removeAllAgents();
+    mWorld->removeAllObstacles();
 }
 
 
@@ -82,20 +82,20 @@
 
     // ?u?ere grenzen einf?gen
     //PhysicsManager
-/*    
+/*
 //  create an obstacle as bounding box of the walkarea for npcs
 //  this should be accessable through scripting, the Obstacles should have names
 //  for easier access
-	BoxObstacle* o = new BoxObstacle(25,50,25);
-	o->setSeenFrom(AbstractObstacle::inside);
-	o->setPosition(Vec3(-40.0f,-10.0f, 0.0f));
-	o->setForward(0,0,-1);
-	addObstacle(o);
+    BoxObstacle* o = new BoxObstacle(25,50,25);
+    o->setSeenFrom(AbstractObstacle::inside);
+    o->setPosition(Vec3(-40.0f,-10.0f, 0.0f));
+    o->setForward(0,0,-1);
+    addObstacle(o);
 
-	o = new BoxObstacle(2,50,2);
-	o->setSeenFrom(AbstractObstacle::outside);
-	o->setPosition(Vec3(-31.5f,-10.0f, -3.5f));
-	o->setForward(0,0,-1);
-	addObstacle(o);
+    o = new BoxObstacle(2,50,2);
+    o->setSeenFrom(AbstractObstacle::outside);
+    o->setPosition(Vec3(-31.5f,-10.0f, -3.5f));
+    o->setForward(0,0,-1);
+    addObstacle(o);
 */
-}
\ No newline at end of file
+}

Modified: rl/trunk/engine/common/include/ConfigFile.h
===================================================================
--- rl/trunk/engine/common/include/ConfigFile.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/common/include/ConfigFile.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -13,7 +13,7 @@
  *  along with this program; if not you can get it here
  *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
  */
- 
+
 #ifndef CONFIGFILE_H_
 #define CONFIGFILE_H_
 
@@ -22,12 +22,12 @@
 #include <OgreDataStream.h>
 #include <OgreStringConverter.h>
 
-namespace Ogre 
+namespace Ogre
 {
     template<class T> class SharedPtr;
     class DataStream;
     typedef class SharedPtr<DataStream> DataStreamPtr;
-    
+
 }
 
 namespace rl
@@ -36,7 +36,7 @@
 class _RlCommonExport ConfigFile : public Ogre::ConfigFile
 {
 public:
-	ConfigFile();
+    ConfigFile();
     /// save to a filename (not using resource group locations)
     void save(const Ogre::String& filename, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
     /// save to a filename (using resource group locations)
@@ -50,144 +50,151 @@
 
 
     /**
-	 * Setzt die Einstellung mit Namen und Abschnitt
+     * Setzt die Einstellung mit Namen und Abschnitt
      * @param name Der Name der Einstellung
-	 * @param value Der Wert der Einstellung
+     * @param value Der Wert der Einstellung
      * @param section Der Name des Abschnitts
-	 * @author JoSch
-	 * @date 05-10-2006
+     * @author JoSch
+     * @date 05-10-2006
     */
-	template <class T>
-	void setValue(const T &value, const Ogre::String &name,
-		const Ogre::String &section = Ogre::StringUtil::BLANK)
-	{
-		if (mSettings[section] == 0)
-		{
-			// Neue Sektion anlegen
-			mSettings[section] = new SettingsMultiMap();
-		}
-		Ogre::String _value = Ogre::StringConverter::toString(value);
-		mSettings[section]->insert( std::multimap<Ogre::String, Ogre::String>::value_type(name, _value));
-	}
+    template <class T>
+    void setValue(const T &value, const Ogre::String &name,
+        const Ogre::String &section = Ogre::StringUtil::BLANK)
+    {
+        if (mSettings[section] == 0)
+        {
+            // Neue Sektion anlegen
+            mSettings[section] = new SettingsMultiMap();
+        }
+        Ogre::String _value = Ogre::StringConverter::toString(value);
+        mSettings[section]->insert( std::multimap<Ogre::String, Ogre::String>::value_type(name, _value));
+    }
 
-	/**
-	 * Setzt die Einstellung mit Namen und Abschnitt
+    /**
+     * Setzt die Einstellung mit Namen und Abschnitt
      * @param name Der Name der Einstellung
-	 * @param value Der Wert der Einstellung
+     * @param value Der Wert der Einstellung
      * @param section Der Name des Abschnitts
-	 * @author JoSch
-	 * @date 05-10-2006
+     * @author JoSch
+     * @date 05-10-2006
     */
-	void setValues(const Ogre::StringVector values, const Ogre::String &name,
-		const Ogre::String &section = Ogre::StringUtil::BLANK)
-	{
-		if (mSettings[section] == 0)
-		{
-			// Neue Sektion anlegen
-			mSettings[section] = new SettingsMultiMap();
-		}
-		for (Ogre::StringVector::const_iterator it = values.begin();
-			it != values.end(); it++)
-		{
-			mSettings[section]->insert( std::multimap<Ogre::String, Ogre::String>::value_type(name, *it));
-		}
-	}
+    void setValues(const Ogre::StringVector values, const Ogre::String &name,
+        const Ogre::String &section = Ogre::StringUtil::BLANK)
+    {
+        if (mSettings[section] == 0)
+        {
+            // Neue Sektion anlegen
+            mSettings[section] = new SettingsMultiMap();
+        }
+        for (Ogre::StringVector::const_iterator it = values.begin();
+            it != values.end(); it++)
+        {
+            mSettings[section]->insert( std::multimap<Ogre::String, Ogre::String>::value_type(name, *it));
+        }
+    }
 
-	/**
-	 * Holt eine Einstellung mit Namen und Abschnitt
-	 * @param name Der Name der Einstellung
-	 * @param section Der Name des Abschnitts
-	 * @param _default Ein Standardwert, falls die Einstellung nicht
-	 * gespeichert wurde
-	 * @author JoSch
-	 * @date 05-10-2006
-	 */
-	int getValue(const int _default, const Ogre::String &name, 
-		const Ogre::String &section = Ogre::StringUtil::BLANK);
+    /**
+     * Holt eine Einstellung mit Namen und Abschnitt
+     * @param name Der Name der Einstellung
+     * @param section Der Name des Abschnitts
+     * @param _default Ein Standardwert, falls die Einstellung nicht
+     * gespeichert wurde
+     * @author JoSch
+     * @date 05-10-2006
+     */
+    int getValue(const int _default, const Ogre::String &name,
+        const Ogre::String &section = Ogre::StringUtil::BLANK);
 
-	/**
-	 * Holt eine Einstellung mit Namen und Abschnitt
-	 * @param name Der Name der Einstellung
-	 * @param section Der Name des Abschnitts
-	 * @param __default Ein Standardwert, falls die Einstellung nicht
-	 * gespeichert wurde
-	 * @author JoSch
-	 * @date 05-10-2006
-	 */
-	Ogre::String getValue(const Ogre::String &_default, const Ogre::String &name, 
-		const Ogre::String &section = Ogre::StringUtil::BLANK);
+    /**
+     * Holt eine Einstellung mit Namen und Abschnitt
+     * @param name Der Name der Einstellung
+     * @param section Der Name des Abschnitts
+     * @param __default Ein Standardwert, falls die Einstellung nicht
+     * gespeichert wurde
+     * @author JoSch
+     * @date 05-10-2006
+     */
+    Ogre::String getValue(const Ogre::String &_default, const Ogre::String &name,
+        const Ogre::String &section = Ogre::StringUtil::BLANK);
 
-	/**
-	 * Holt alle Einstellungen mit selbem Namen und Abschnitt
-	 * @param name Der Name der Einstellung
-	 * @param section Der Name des Abschnitts
-	 * @author JoSch
-	 * @date 05-10-2006
-	 */
-	Ogre::StringVector getValues(const Ogre::String &name, 
-		const Ogre::String &section = Ogre::StringUtil::BLANK);
+    /**
+     * Holt alle Einstellungen mit selbem Namen und Abschnitt
+     * @param name Der Name der Einstellung
+     * @param section Der Name des Abschnitts
+     * @author JoSch
+     * @date 05-10-2006
+     */
+    Ogre::StringVector getValues(const Ogre::String &name,
+        const Ogre::String &section = Ogre::StringUtil::BLANK);
 
 
-	/**
-	 * Holt eine Einstellung mit Namen und Abschnitt
-	 * @param name Der Name der Einstellung
-	 * @param section Der Name des Abschnitts
-	 * @param __default Ein Standardwert, falls die Einstellung nicht
-	 * gespeichert wurde
-	 * @author JoSch
-	 * @date 05-10-2006
-	 */
-	Ogre::Real getValue(const Ogre::Real &_default, const Ogre::String &name, 
-		const Ogre::String &section = Ogre::StringUtil::BLANK);
+    /**
+     * Holt eine Einstellung mit Namen und Abschnitt
+     * @param name Der Name der Einstellung
+     * @param section Der Name des Abschnitts
+     * @param __default Ein Standardwert, falls die Einstellung nicht
+     * gespeichert wurde
+     * @author JoSch
+     * @date 05-10-2006
+     */
+    Ogre::Real getValue(const Ogre::Real &_default, const Ogre::String &name,
+        const Ogre::String &section = Ogre::StringUtil::BLANK);
 
-	/**
-	 * Holt eine Einstellung mit Namen und Abschnitt
-	 * @param name Der Name der Einstellung
-	 * @param section Der Name des Abschnitts
-	 * @param __default Ein Standardwert, falls die Einstellung nicht
-	 * gespeichert wurde
-	 * @author JoSch
-	 * @date 05-10-2006
-	 */
-	bool getValue(const bool _default, const Ogre::String &name, 
-		const Ogre::String &section = Ogre::StringUtil::BLANK);
+    /**
+     * Holt eine Einstellung mit Namen und Abschnitt
+     * @param name Der Name der Einstellung
+     * @param section Der Name des Abschnitts
+     * @param __default Ein Standardwert, falls die Einstellung nicht
+     * gespeichert wurde
+     * @author JoSch
+     * @date 05-10-2006
+     */
+    bool getValue(const bool _default, const Ogre::String &name,
+        const Ogre::String &section = Ogre::StringUtil::BLANK);
 
-	/**
-	 * Holt eine Einstellung mit Namen und Abschnitt
-	 * @param name Der Name der Einstellung
-	 * @param section Der Name des Abschnitts
-	 * @param __default Ein Standardwert, falls die Einstellung nicht
-	 * gespeichert wurde
-	 * @author JoSch
-	 * @date 05-10-2006
-	 */
-	long int getValue(const long int _default, const Ogre::String &name, 
-		const Ogre::String &section = Ogre::StringUtil::BLANK);
+    /**
+     * Holt eine Einstellung mit Namen und Abschnitt
+     * @param name Der Name der Einstellung
+     * @param section Der Name des Abschnitts
+     * @param __default Ein Standardwert, falls die Einstellung nicht
+     * gespeichert wurde
+     * @author JoSch
+     * @date 05-10-2006
+     */
+    long int getValue(const long int _default, const Ogre::String &name,
+        const Ogre::String &section = Ogre::StringUtil::BLANK);
 
-	/**
-	 * Holt eine Einstellung mit Namen und Abschnitt
-	 * @param name Der Name der Einstellung
-	 * @param section Der Name des Abschnitts
-	 * @param __default Ein Standardwert, falls die Einstellung nicht
-	 * gespeichert wurde
-	 * @author JoSch
-	 * @date 05-10-2006
-	 */
-	unsigned int getValue(const unsigned int _default, const Ogre::String &name, 
-		const Ogre::String &section = Ogre::StringUtil::BLANK);
+    /**
+     * Holt eine Einstellung mit Namen und Abschnitt
+     * @param name Der Name der Einstellung
+     * @param section Der Name des Abschnitts
+     * @param __default Ein Standardwert, falls die Einstellung nicht
+     * gespeichert wurde
+     * @author JoSch
+     * @date 05-10-2006
+     */
+    unsigned int getValue(const unsigned int _default, const Ogre::String &name,
+        const Ogre::String &section = Ogre::StringUtil::BLANK);
 
-	/**
-	 * Holt eine Einstellung mit Namen und Abschnitt
-	 * @param name Der Name der Einstellung
-	 * @param section Der Name des Abschnitts
-	 * @param __default Ein Standardwert, falls die Einstellung nicht
-	 * gespeichert wurde
-	 * @author JoSch
-	 * @date 05-10-2006
-	 */
-	unsigned long int getValue(const unsigned long int _default, const Ogre::String &name, 
-		const Ogre::String &section = Ogre::StringUtil::BLANK);
+    /**
+     * Holt eine Einstellung mit Namen und Abschnitt
+     * @param name Der Name der Einstellung
+     * @param section Der Name des Abschnitts
+     * @param __default Ein Standardwert, falls die Einstellung nicht
+     * gespeichert wurde
+     * @author JoSch
+     * @date 05-10-2006
+     */
+    unsigned long int getValue(const unsigned long int _default, const Ogre::String &name,
+        const Ogre::String &section = Ogre::StringUtil::BLANK);
 
+        /**
+         * Adds a section to the config file and adds a list of key-value pairs
+         *
+         * @param section The name of the section, where the key-value pairs are written to
+         * @param settings The list of key-value pairs
+         */
+        void addSection(const Ogre::String& section, const Ogre::NameValuePairList& settings);
 };
 
 template<> inline
@@ -199,7 +206,7 @@
         // Neue Sektion anlegen
         mSettings[section] = new SettingsMultiMap();
     }
-    mSettings[section]->insert( std::multimap<Ogre::String, Ogre::String>::value_type(name, value));   
+    mSettings[section]->insert( std::multimap<Ogre::String, Ogre::String>::value_type(name, value));
 }
 
 }

Modified: rl/trunk/engine/common/include/RastullahPrerequisites.h
===================================================================
--- rl/trunk/engine/common/include/RastullahPrerequisites.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/common/include/RastullahPrerequisites.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -17,29 +17,9 @@
 #ifndef __RastullahPrerequisites_H__
 #define __RastullahPrerequisites_H__
 
-#ifdef HAVE_CONFIG_H
-#   undef PACKAGE_NAME
-#   undef PACKAGE
-#   undef PACKAGE_BUGREPORT
-#   undef PACKAGE_STRING
-#   undef PACKAGE_TARNAME
-#   undef PACKAGE_VERSION
-#endif
-
 #define OGRE_MEMORY_STRESS_TEST 1
 #include <Ogre.h>
 
-#ifdef HAVE_CONFIG_H
-#   undef PACKAGE_NAME
-#   undef PACKAGE
-#   undef PACKAGE_BUGREPORT
-#   undef PACKAGE_STRING
-#   undef PACKAGE_TARNAME
-#   undef PACKAGE_VERSION
-#   include "config.h" 
-#endif
-
-
 #if OGRE_PLATFORM != OGRE_PLATFORM_WIN32
 #   define _snprintf snprintf
 template<class T1, class T2>
@@ -56,11 +36,11 @@
 
 #if defined(_MSC_VER) && (_MSC_VER > 1300)   // MS Visual Studio 2005
 // signed / unsigned auf 1x
-#	pragma warning(once : 4018) 
+#    pragma warning(once : 4018)
 // Sichere Versionen der Stringfunktionen benutzen
-#	if !defined(_CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES)
-#		define _CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES
-#	endif
+#    if !defined(_CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES)
+#        define _CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES
+#    endif
 #endif
 
 #endif

Modified: rl/trunk/engine/common/src/ConfigFile.cpp
===================================================================
--- rl/trunk/engine/common/src/ConfigFile.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/common/src/ConfigFile.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -13,7 +13,7 @@
  *  along with this program; if not you can get it here
  *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
  */
- 
+
 #include "ConfigFile.h"
 #include "Exception.h"
 
@@ -37,13 +37,13 @@
     saveDirect(filename, separators, trimWhitespace);
 }
 //-----------------------------------------------------------------------
-void ConfigFile::save(const String& filename, const String& resourceGroup, 
+void ConfigFile::save(const String& filename, const String& resourceGroup,
     const String& separators, bool trimWhitespace)
 {
     saveToResourceSystem(filename, resourceGroup, separators, trimWhitespace);
 }
 //-----------------------------------------------------------------------
-void ConfigFile::saveDirect(const String& filename, const String& separators, 
+void ConfigFile::saveDirect(const String& filename, const String& separators,
     bool trimWhitespace)
 {
     /* Open the configuration file */
@@ -58,7 +58,7 @@
 
 }
 //-----------------------------------------------------------------------
-void ConfigFile::saveToResourceSystem(const String& filename, 
+void ConfigFile::saveToResourceSystem(const String& filename,
     const String& resourceGroup, const String& separators, bool trimWhitespace)
 {
     ///@todo ResourceGroup zum Dateiname erstellen.
@@ -72,109 +72,119 @@
     save(fp, separators, trimWhitespace);
 }
 //-----------------------------------------------------------------------
-void ConfigFile::save(ofstream& stream, const String& separators, 
+void ConfigFile::save(ofstream& stream, const String& separators,
     bool trimWhitespace)
 {
-	SettingsBySection::const_iterator section;
-	for(section = mSettings.begin(); section != mSettings.end(); section++)
-	{
-		if (section->first != StringUtil::BLANK)
-		{
-			stream << "[" << section->first << "]" << endl;
-		} else {
-			/// Keine Sektion
-		}
-		SettingsMultiMap::const_iterator setting;
-		SettingsMultiMap *settings = section->second;
-		for(setting = settings->begin(); setting != settings->end(); setting++)
-		{
-			stream << setting->first << "=" << setting->second << endl;
-		}
-	}
+    SettingsBySection::const_iterator section;
+    for(section = mSettings.begin(); section != mSettings.end(); section++)
+    {
+        if (section->first != StringUtil::BLANK)
+        {
+            stream << "[" << section->first << "]" << endl;
+        } else {
+            /// Keine Sektion
+        }
+        SettingsMultiMap::const_iterator setting;
+        SettingsMultiMap *settings = section->second;
+        for(setting = settings->begin(); setting != settings->end(); setting++)
+        {
+            stream << setting->first << "=" << setting->second << endl;
+        }
+
+        // Insert a linebreak
+        stream << endl;
+    }
 }
 
-int ConfigFile::getValue(const int _default, const Ogre::String &name, 
-		const Ogre::String &section)
+int ConfigFile::getValue(const int _default, const Ogre::String &name,
+        const Ogre::String &section)
 {
-	Ogre::String v = getSetting(name, section);
-	if (v == Ogre::StringUtil::BLANK)
-	{
-		return _default;
-	} else {
-		return Ogre::StringConverter::parseInt(v);
-	}
+    Ogre::String v = getSetting(name, section);
+    if (v == Ogre::StringUtil::BLANK)
+    {
+        return _default;
+    } else {
+        return Ogre::StringConverter::parseInt(v);
+    }
 }
 
-String ConfigFile::getValue(const String &_default, const Ogre::String &name, 
-		const Ogre::String &section)
+String ConfigFile::getValue(const String &_default, const Ogre::String &name,
+        const Ogre::String &section)
 {
-	return getSetting(name, section);
+    return getSetting(name, section);
 }
 
-StringVector ConfigFile::getValues(const Ogre::String &name, 
-		const Ogre::String &section)
+StringVector ConfigFile::getValues(const Ogre::String &name,
+        const Ogre::String &section)
 {
-	return getMultiSetting(name, section);
+    return getMultiSetting(name, section);
 }
 
-Real ConfigFile::getValue(const Real &_default, const Ogre::String &name, 
-		const Ogre::String &section)
+Real ConfigFile::getValue(const Real &_default, const Ogre::String &name,
+        const Ogre::String &section)
 {
-	Ogre::String v = getSetting(name, section);
-	if (v == Ogre::StringUtil::BLANK)
-	{
-		return _default;
-	} else {
-		return Ogre::StringConverter::parseReal(v);
-	}
+    Ogre::String v = getSetting(name, section);
+    if (v == Ogre::StringUtil::BLANK)
+    {
+        return _default;
+    } else {
+        return Ogre::StringConverter::parseReal(v);
+    }
 }
 
-bool ConfigFile::getValue(const bool _default, const Ogre::String &name, 
-		const Ogre::String &section)
+bool ConfigFile::getValue(const bool _default, const Ogre::String &name,
+        const Ogre::String &section)
 {
-	Ogre::String v = getSetting(name, section);
-	if (v == Ogre::StringUtil::BLANK)
-	{
-		return _default;
-	} else {
-		return Ogre::StringConverter::parseBool(v);
-	}
+    Ogre::String v = getSetting(name, section);
+    if (v == Ogre::StringUtil::BLANK)
+    {
+        return _default;
+    } else {
+        return Ogre::StringConverter::parseBool(v);
+    }
 }
 
-long int ConfigFile::getValue(const long int _default, const Ogre::String &name, 
-		const Ogre::String &section)
+long int ConfigFile::getValue(const long int _default, const Ogre::String &name,
+        const Ogre::String &section)
 {
-	Ogre::String v = getSetting(name, section);
-	if (v == Ogre::StringUtil::BLANK)
-	{
-		return _default;
-	} else {
-		return Ogre::StringConverter::parseLong(v);
-	}
+    Ogre::String v = getSetting(name, section);
+    if (v == Ogre::StringUtil::BLANK)
+    {
+        return _default;
+    } else {
+        return Ogre::StringConverter::parseLong(v);
+    }
 }
 
-unsigned int ConfigFile::getValue(const unsigned int _default, const Ogre::String &name, 
-		const Ogre::String &section)
+unsigned int ConfigFile::getValue(const unsigned int _default, const Ogre::String &name,
+        const Ogre::String &section)
 {
-	Ogre::String v = getSetting(name, section);
-	if (v == Ogre::StringUtil::BLANK)
-	{
-		return _default;
-	} else {
-		return Ogre::StringConverter::parseUnsignedInt(v);
-	}
+    Ogre::String v = getSetting(name, section);
+    if (v == Ogre::StringUtil::BLANK)
+    {
+        return _default;
+    } else {
+        return Ogre::StringConverter::parseUnsignedInt(v);
+    }
 }
 
-unsigned long int ConfigFile::getValue(const unsigned long int _default, const Ogre::String &name, 
-		const Ogre::String &section)
+unsigned long int ConfigFile::getValue(const unsigned long int _default, const Ogre::String &name,
+        const Ogre::String &section)
 {
-	Ogre::String v = getSetting(name, section);
-	if (v == Ogre::StringUtil::BLANK)
-	{
-		return _default;
-	} else {
-		return Ogre::StringConverter::parseUnsignedLong(v);
-	}
+    Ogre::String v = getSetting(name, section);
+    if (v == Ogre::StringUtil::BLANK)
+    {
+        return _default;
+    } else {
+        return Ogre::StringConverter::parseUnsignedLong(v);
+    }
 }
 
+    void ConfigFile::addSection(const Ogre::String& section, const Ogre::NameValuePairList& settings)
+    {
+        // Create new section
+        mSettings[section] = new SettingsMultiMap();
+        // Insert values from the settings map
+        mSettings[section]->insert(settings.begin(), settings.end());
+    }
 }

Modified: rl/trunk/engine/core/Makefile.am
===================================================================
--- rl/trunk/engine/core/Makefile.am	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/Makefile.am	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,2 +1 @@
 SUBDIRS = include src
-

Modified: rl/trunk/engine/core/include/ConfigurationManager.h
===================================================================
--- rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -14,16 +14,17 @@
  *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
  */
 
-#ifndef __RL_CONFIGURATIONMANAGER_H__
-#define __RL_CONFIGURATIONMANAGER_H__
-
-#include "CorePrerequisites.h"
 /**
  * \file ConfigurationManager.h
  * Definiert die abstrakte Basisklasse f??r das Konfigurationsmanagement.
  */
 
-#include <OgreConfigFile.h>
+#ifndef __RL_CONFIGURATIONMANAGER_H__
+#define __RL_CONFIGURATIONMANAGER_H__
+
+#include "CorePrerequisites.h"
+#include "ConfigFile.h"
+
 #include <OgreSingleton.h>
 #include <boost/filesystem/operations.hpp>
 #include <boost/filesystem/exception.hpp>
@@ -32,197 +33,276 @@
 
 namespace rl
 {
-	class _RlCoreExport ConfigurationManager : protected Ogre::Singleton<ConfigurationManager>
-	{
-		public:
-			/**
-			 * Constructs a new ConfigurationManager object.
-			 *
-			 * Sets the name for the Ogre and Rastullah logfiles
-			 * and the Rastullah configuration file. The path
-			 * where configuration files might be reside is also set.
-			 */
-            ConfigurationManager();
+    class _RlCoreExport ConfigurationManager : protected Ogre::Singleton<ConfigurationManager>
+    {
+        public:
+            /// Sections where settings can be queried from
+            enum ConfigurationSection
+            {
+                CS_GENERAL = 1,
+                CS_GRAPHICS,
+                CS_SOUND,
+                CS_INPUT
+            };
 
-			~ConfigurationManager();
+            ~ConfigurationManager();
 
-			/**
-			 * Returns a pointer to the single instance of the
-			 * ConfigurationManager.
-			 *
-			 * The ConfigurationManager object is created, if it does not
-			 * exist.
-			 * @return Pointer to ConfigurationManager object
-			 */
-			static ConfigurationManager* getSingletonPtr();
+            /**
+             * Returns a pointer to the single instance of the
+             * ConfigurationManager.
+             *
+             * The ConfigurationManager object is created, if it does not
+             * exist.
+             *
+             * @return Pointer to ConfigurationManager object
+             */
+            static ConfigurationManager* getSingletonPtr();
 
-			/**
-			 * Returns a reference to the single instance of the
-			 * ConfigurationManager.
-			 *
-			 * The ConfigurationManager object is created, if it does not
-			 * exist.
-			 * @return Reference to ConfigurationManager object
-			 */
-			static ConfigurationManager& getSingleton();
+            /**
+             * Returns a reference to the single instance of the
+             * ConfigurationManager.
+             *
+             * The ConfigurationManager object is created, if it does not
+             * exist.
+             *
+             * @return Reference to ConfigurationManager object
+             */
+            static ConfigurationManager& getSingleton();
 
-			/**
-			 * Returns the filename for the log written by Ogre
-			 *
-			 * @return filename of Ogre's logfile
-			 */
-			Ogre::String getOgreLogFile() const;
+            /**
+             * Returns the filename for the log written by Ogre
+             *
+             * @return filename of Ogre's logfile
+             */
+            Ogre::String getOgreLogFile() const;
 
-			/**
-			 * Returns the filename for the log written by Rastullah
-			 *
-			 * @return filename of Rastullah's logfile
-			 */
-			Ogre::String getRastullahLogFile() const;
+            /**
+             * Returns the filename for the log written by Rastullah
+             *
+             * @return filename of Rastullah's logfile
+             */
+            Ogre::String getRastullahLogFile() const;
 
-			/**
-			 * Returns the filename for the log written by CEGUI
-			 *
-			 * @return filename of CEGUI's logfile
-			 */
-			Ogre::String getCeguiLogFile() const;
+            /**
+             * Returns the filename for the log written by CEGUI
+             *
+             * @return filename of CEGUI's logfile
+             */
+            Ogre::String getCeguiLogFile() const;
 
-			/**
-			 * Returns the filename of the configuration file for the modules
-			 *
-			 * @return filename of module's configuration file
-			 */
-			Ogre::String getModulesCfgFile() const;
+            /**
+             * Returns the filename of the configuration file for the modules
+             *
+             * @return filename of module's configuration file
+             */
+            Ogre::String getModulesCfgFile() const;
 
-			/**
-			 * Returns the filename of the configuration file for the OS
-			 * specific plugins
-			 *
-			 * @return filename of the plugin's configuration file
-			 */
-			Ogre::String getPluginCfgFile() const;
+            /**
+             * Returns the filename of the configuration file for the OS
+             * specific plugins
+             *
+             * @return filename of the plugin's configuration file
+             */
+            Ogre::String getPluginCfgFile() const;
 
-			/**
-			 * Returns a list of paths, were Rastullah configuration files
-			 * reside
-			 *
-			 * The list is seperated via the : character and has to be
-			 * processed, before usage
-			 *
-			 * @return colon seperated path of Rastullah configuration
-			 *         directories
-			 */
-			Ogre::String getRastullahCfgPath() const;
+            /**
+             * Returns a list of paths, were Rastullah configuration files
+             * reside
+             *
+             * The list is seperated via the : character and has to be
+             * processed, before usage
+             *
+             * @return colon seperated path of Rastullah configuration
+             *         directories
+             */
+            Ogre::String getRastullahCfgPath() const;
 
-			/**
-			 * Returns the root of the Rastullah modules directory
-			 *
-			 * @return directory where Rastullah modules reside
-			 */
-			Ogre::String getModulesRootDirectory() const;
+            /**
+             * Returns the root of the Rastullah modules directory
+             *
+             * @return directory where Rastullah modules reside
+             */
+            Ogre::String getModulesRootDirectory() const;
 
-			/**
-			 * Returns the directory where Rastullah stores all its log files
-			 *
-			 * @return directoy where Rastullah logfiles are stored
-			 */
-			Ogre::String getRastullahLogDirectory() const;
+            /**
+             * Returns the directory where Rastullah stores all its log files
+             *
+             * @return directoy where Rastullah logfiles are stored
+             */
+            Ogre::String getRastullahLogDirectory() const;
 
-			/**
-			 * Returns the filename of the current keymap file used by
-			 * Rastullah
-			 *
-			 * @return filename of keymap file
-			 */
-			Ogre::String getKeymap() const;
+            /**
+             * Returns the directory where OGRE stores its plugins
+             *
+             * @return directory where OGRE plugins are stored
+             */
+            Ogre::String getOgrePluginDirectory() const;
 
-			/**
-			 * @todo Remove, after other subsystems were changed to
-			 *       new ConfigurationManager style
-			 */
-			Ogre::String getPluginCfgPath() const;
-			Ogre::String getRastullahLogPath() const;
-			Ogre::String getModulesCfgPath() const;
-			Ogre::String getConfigModulePath() const;
-            Ogre::String getRastullahSystemCfgPath() const;
-			Ogre::String getSoundCfgPath() const;
-			Ogre::String getInputConfigPath() const;
+            /**
+             * Adds a key-value pair to the list specified by section
+             *
+             * If the key already exists in the list, its value will be updated
+             *
+             * @param section The section where the key-value pair will be inserted
+             * @param key The key of the key-value pair
+             * @param value The value of the key-value pair
+             */
+            void addSetting(ConfigurationSection section, Ogre::String key, Ogre::String value);
 
-			Ogre::String getStringSetting(const Ogre::String& name, const Ogre::String& _default = Ogre::StringUtil::BLANK) const;
-			Ogre::Real getRealSetting(const Ogre::String& name, Ogre::Real _default = 0.0f) const;
-			int getIntSetting(const Ogre::String& name, int _default = 0) const;
-			bool getBoolSetting(const Ogre::String& name, bool _default = false) const;
+            /**
+             * Returns the string value for a specific key in a specific section
+             *
+             * @param section The sections key-value list, which is searched
+             * @param key The key, for which a value will be returned
+             * @return string value for the specific key in the specific section
+             */
+            Ogre::String getStringSetting(ConfigurationSection section, Ogre::String key);
 
-            Logger::LogLevel getLogLevel() const;
+            /**
+             * Returns the int value for a specific key in a specific section
+             *
+             * @param section The sections key-value list, which is searched
+             * @param key The key, for which a value will be returned
+             * @return int value for the specific key in the specific section
+             */
+            int getIntSetting(ConfigurationSection section, Ogre::String key);
 
-			Ogre::String getEngineVersionString() const;
-			Ogre::String getEngineVersionName() const;
-			long         getEngineBuildNumber() const;
-			const rl::CeGuiString&  getAboutText() const;
+            /**
+             * Returns the boolean value for a specific key in a specific section
+             *
+             * @param section The sections key-value list, which is searched
+             * @param key The key, for which a value will be returned
+             * @return boolean value for the specific key in the specific section
+             */
+            bool getBoolSetting(ConfigurationSection section, Ogre::String key);
 
-			bool shouldUseStaticGeometry() const;
-			Ogre::String getTextureUnitScheme() const;
+            /**
+             * Returns the real value for a specific key in a specific section
+             *
+             * @param section The sections key-value list, which is searched
+             * @param key The key, for which a value will be returned
+             * @return real value for the specific key in the specific section
+             */
+            Ogre::Real getRealSetting(ConfigurationSection section, Ogre::String key);
 
-			/**
-			 * Loads configuration files from the configuration directories
-			 *
-			 * Loads up to four configuration files (systemwide, user, current
-			 * directory, module) and sets certain settings for the game
-			 */
-            void loadConfig();
+            /**
+             * Returns a pointer to the graphical settings for the OGRE renderer
+             *
+             * @return key-value list of graphic settings
+             */
+            Ogre::NameValuePairList getGraphicSettings() const;
 
-		protected:
-			Ogre::String mRastullahCfgFile;
-			Ogre::String mOgreLogFile;
-			Ogre::String mRastullahLogFile;
-			Ogre::String mCeguiLogFile;
-			Ogre::String mSoundCfgFile;
-			Ogre::String mModulesCfgFile;
-			Ogre::String mPluginCfgFile;
+            /**
+             * Returns a pointer to the sound settings for the Rl::SoundManager
+             *
+             * @return key-value list of sound settings
+             */
+            Ogre::NameValuePairList getSoundSettings() const;
 
-			Ogre::String mModulesRootDirectory;
-			Ogre::String mRastullahLogDirectory;
-			Ogre::String mModulesCfgDirectory;
-			Ogre::String mRastullahCfgPath;
+            /**
+             * Returns the filename of the current keymap file used by
+             * Rastullah
+             *
+             * @return filename of keymap file
+             */
+            Ogre::String getKeymap() const;
 
-			/**
-			 * @todo Remove, after other subsystems were changed to
-			 *       new ConfigurationManager style
-			 */
-			Ogre::String mPluginCfgPath;
-			Ogre::String mModulesCfgPath;
-			Ogre::String mConfigModuleDirectory;
-            Ogre::String mRastullahSystemCfgPath;
-			Ogre::String mSoundCfgPath;
-			Ogre::String mRastullahOgreCfgPath;
+            /**
+             * Returns the input settings for the CommandMapper
+             *
+             * @return key-value list of input settings
+             */
+            Ogre::NameValuePairList getInputSettings() const;
 
+            /**
+             * Returns the log level specifying how verbose the created
+             * logfiles are
+             *
+             * @return verbosity level of logfiles
+             */
+            Logger::LogLevel getLogLevel();
+
+            Ogre::String getEngineVersionString() const;
+            Ogre::String getEngineVersionName() const;
+            long         getEngineBuildNumber() const;
+
+            /**
+             * Returns the text displayed in the "About Application" window
+             *
+             * @return text displayed in "About Application" window
+             */
+            const rl::CeGuiString& getAboutText() const;
+
+            /**
+             * Loads configuration files from the configuration directories
+             *
+             * Loads up to four configuration files (systemwide, user, current
+             * directory, module) and sets certain settings for the game
+             */
+            void loadConfig();
+
+            /**
+             * Saves a configuration file in OS specific directory
+             */
+            void saveConfig();
+
         private:
-			/**
-			 * Sets the path where configuration files may reside
-			 * based on the operating system.
-			 */
-			void setRastullahCfgPath();
+            /**
+             * Constructs a new ConfigurationManager object.
+             *
+             * Sets the name for the Ogre, Rastullah and CEGUI logfiles
+             * and the Rastullah configuration file. The path
+             * where configuration files might be reside is also set.
+             */
+            ConfigurationManager();
 
-			/**
-			 * Adds the specified path to the Rastullah configuration path
-			 * variable.
-			 *
-			 * All values are seperated via a colon.
-			 *
-			 * @param cfg_dir Directory where a configuration file may reside
-			 */
-			void addToCfgPath(const std::string& cfg_dir);
+            /**
+             * Sets the path where configuration files may reside
+             * based on the operating system.
+             */
+            void setRastullahCfgPath();
 
-			/**
-			 * Check if a specified file exists.
-			 *
-			 * @param filename File being checked for existence
-			 * @return true if file exists, false otherwise
-			 */
-			bool checkForFile(const std::string& filename);
+            /**
+             * Adds the specified path to the Rastullah configuration path
+             * variable.
+             *
+             * All values are seperated via a colon.
+             *
+             * @param cfg_dir Directory where a configuration file may reside
+             */
+            void addToCfgPath(const std::string& cfg_dir);
 
-            Ogre::ConfigFile* mSystemConfig;
-	};
+            /**
+             * Check if a specified file exists.
+             *
+             * @param filename File being checked for existence
+             * @return true if file exists, false otherwise
+             */
+            bool checkForFile(const std::string& filename);
+
+            /**
+             * Searches for a specific key in a specific section
+             *
+             * @param section The sections key-value list, which is searched
+             * @param key The key, for which a value will be returned
+             * @return value if key exits, otherwise NULL
+             */
+            Ogre::String findSetting(ConfigurationSection section, Ogre::String key) const;
+
+            Ogre::String mRastullahCfgFile;           //!< Filename of the Rastullah configuration file
+            Ogre::String mOgreLogFile;                //!< Filename of the logfile written by OGRE
+            Ogre::String mRastullahLogFile;           //!< Filename of the logfile written by Rastullah
+            Ogre::String mCeguiLogFile;               //!< Filename of the logfile written by CEGUI
+            Ogre::String mModulesCfgFile;             //!< Filename of the Module configuration file
+            Ogre::String mModulesRootDirectory;       //!< Directory where Rastullah's modules reside
+            Ogre::String mRastullahLogDirectory;      //!< Directory where all logfiles are stored
+            Ogre::String mRastullahCfgPath;           //!< List of directories containing Rastullah configuration files
+            Ogre::String mOgrePluginDirectory;        //!< Directory where OGRE stores its plugins
+            Ogre::NameValuePairList mGeneralSettings; //!< General settings for Rastullah
+            Ogre::NameValuePairList mGraphicSettings; //!< Graphic settings for the OGRE Renderer
+            Ogre::NameValuePairList mSoundSettings;   //!< Sound settings for the Rastullah soundsystem
+            Ogre::NameValuePairList mInputSettings;   //!< Input settings for the Rastullah inputsystem
+    };
 }
 
 #endif

Modified: rl/trunk/engine/core/include/CoreSubsystem.h
===================================================================
--- rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -50,69 +50,77 @@
 
 typedef _RlCoreExport std::map<Ogre::String, ContentModule*> ModuleMap;
 
-/** CoreSubsystem. 
-	@remarks		
+/** CoreSubsystem.
+    @remarks
         It follows the Singleton Pattern,
-		and initialises the game context.
+        and initialises the game context.
 */
 class _RlCoreExport CoreSubsystem : public Ogre::Singleton<CoreSubsystem>, public virtual EventSource
 {
 public:
-	/** Default Constructor */
-	CoreSubsystem();
+    /** Default Constructor */
+    CoreSubsystem();
     /** Default Deconstructor */
-	virtual ~CoreSubsystem();
+    virtual ~CoreSubsystem();
 
-	/** Starts the Game */
-	void startCore();
-	
-	/** Returns the Singleton */
-	//static CoreSubsystem & getSingleton();
-	//static CoreSubsystem * getSingletonPtr();
+    /** Starts the Game */
+    void startCore();
 
-	World* getWorld();
-	void loadMap(const Ogre::String type, const Ogre::String filename,
-	    const Ogre::String module, const Ogre::String startupScript = "");
+    /** Returns the Singleton */
+    //static CoreSubsystem & getSingleton();
+    //static CoreSubsystem * getSingletonPtr();
 
-	RubyInterpreter* getRubyInterpreter();
+    World* getWorld();
+    void loadMap(const Ogre::String type, const Ogre::String filename,
+        const Ogre::String module, const Ogre::String startupScript = "");
 
-	ContentModule* getActiveAdventureModule() const;
-	ContentModule* getModule(const Ogre::String& moduleId) const;
-	const ModuleMap& getAllModules() const;
-	void startAdventureModule(ContentModule* module);
-	void setDefaultActiveModule(const Ogre::String& moduleId); 
-	const Ogre::String& getDefaultActiveModule() const; 
-	void registerModule(ContentModule* module);
+    RubyInterpreter* getRubyInterpreter();
 
-	void setDeveloperMode(bool developerMode);
-	bool getDeveloperMode() const;
+    ContentModule* getActiveAdventureModule() const;
+    ContentModule* getModule(const Ogre::String& moduleId) const;
+    const ModuleMap& getAllModules() const;
+    void startAdventureModule(ContentModule* module);
+    void setDefaultActiveModule(const Ogre::String& moduleId);
+    const Ogre::String& getDefaultActiveModule() const;
+    void registerModule(ContentModule* module);
 
-	
-	/** Saves a timestamped jpg Screenshot
-		@param sName The filename (extended with the timestamp)
-	*/
-	void makeScreenshot(const Ogre::String& sName);
+    void setDeveloperMode(bool developerMode);
+    bool getDeveloperMode() const;
 
-	void addCoreEventListener(CoreEventListener* listener);
-	void removeCoreEventListener(CoreEventListener* listener);
 
-	void setScheme(const Ogre::String& schemeName);
+    /** Saves a timestamped jpg Screenshot
+        @param sName The filename (extended with the timestamp)
+    */
+    void makeScreenshot(const Ogre::String& sName);
 
-	bool isInitialized() const;
+    void addCoreEventListener(CoreEventListener* listener);
+    void removeCoreEventListener(CoreEventListener* listener);
 
+    void setScheme(const Ogre::String& schemeName);
+
+    bool isInitialized() const;
+
+    /**
+     * Retrieves a pointer to the current render window.
+     *
+     * @return pointer to render window
+     */
+    Ogre::RenderWindow* getRenderWindow();
+
 private:
-	World* mWorld;
-	RubyInterpreter* mRubyInterpreter;
-	ModuleMap mModules;
-	ContentModule* mActiveAdventureModule;
-	Ogre::String mDefaultActiveModule;
+    World* mWorld;
+    RubyInterpreter* mRubyInterpreter;
+    ModuleMap mModules;
+    ContentModule* mActiveAdventureModule;
+    Ogre::String mDefaultActiveModule;
+    Ogre::RenderWindow* mRenderWindow;            //!< Render window for OGRE
 
-	RL_LONGLONG mClockStartTime;
+    RL_LONGLONG mClockStartTime;
 
-	bool mDeveloperMode;
-	bool mInitialized;
-	EventCaster<CoreEvent> mCoreEventCaster;
-	std::vector<Ogre::Technique*> mDefaultTechniques;
+    bool mDeveloperMode;
+    bool mInitialized;
+    EventCaster<CoreEvent> mCoreEventCaster;
+    std::vector<Ogre::Technique*> mDefaultTechniques;
 
     // The singletons of this subsystem
     Ogre::Root* mOgreRoot;
@@ -124,29 +132,26 @@
     ActorManager* mActorManager;
     GameEventManager* mGameEventManager;
     ConfigurationManager* mConfigurationManager;
-	SoundManager* mSoundManager;
+    SoundManager* mSoundManager;
     DebugVisualsManager* mDebugVisualsManager;
     JobScheduler* mJobScheduler;
 
     /** Runs the setup methods  */
-	bool initializeCoreSubsystem();
+    bool initializeCoreSubsystem();
 
-	/** Loads all needed ressources */
-	void initializeResources();
+    /** Loads all needed ressources */
+    void initializeResources();
 
-	void loadPlugins();
+    void loadPlugins();
     void unloadPlugins();
 
-	/**
-	 * Sammelt alle Default-Techniques, um sie sp?ter bei jedem aktivierten Scheme 
-	 * benutzen zu k?nnen
-	 */
-	void updateDefaultScheme();
+    /**
+     * Sammelt alle Default-Techniques, um sie sp?ter bei jedem aktivierten Scheme
+     * benutzen zu k?nnen
+     */
+    void updateDefaultScheme();
 
     void loadModule(ContentModule* module);
-
-	/** Opens a configuration dialog */
-	bool setupConfiguration();
 };
 
 }

Modified: rl/trunk/engine/core/include/SoundDriver.h
===================================================================
--- rl/trunk/engine/core/include/SoundDriver.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/include/SoundDriver.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -22,83 +22,88 @@
 
 namespace rl
 {
-    class ConfigFile;
     class ListenerMovable;
 
-/**
- * Diese Klasse dient zur Definition einer Schnittstelle
- * zu den m???glichen Soundbibliotheken. Sie geben Preis, ob
- * ein Treiber vorhanden ist oder nicht. Der Nulltreiber
- * existiert dabei immer.
- */
-class _RlCoreExport SoundDriver
-{
-public:
-    /// Der Konstruktor
-	SoundDriver(Ogre::ResourceManager* soundResourceManager);
-    /// Der Destruktor
-	virtual ~SoundDriver();
-    /// Zeigt an, ob der Treiber funktionsf???hig ist.
-    virtual bool isDriverAvailable() = 0;
-    
-    /** Initialize driver
-     *  @return <code>true</code> if successful, <code>false</code> otherwise
-     */ 
-    virtual bool initialize() = 0;
-    
-    /// Beende den Treiber
-    virtual void shutdown() = 0;
-    /// Der Name des Treibers
-    virtual Ogre::String getName() const = 0;
-    /// Update-Aufgaben erledigen
-    virtual void update() = 0;
-    /// Einen Sound-Stream mit Resource erzeugen
-    virtual Sound *createStream(const SoundResourcePtr &res) = 0;
-    /// Einen Sound-Sample mit Resource erzeugen
-    virtual Sound *createSample(const SoundResourcePtr &res) = 0;
-    /// Einen Soundlistener erzeugen
-    virtual ListenerMovable *createListener(const Ogre::String &name) = 0;
-    
+    /**
+     * Diese Klasse dient zur Definition einer Schnittstelle
+     * zu den m???glichen Soundbibliotheken. Sie geben Preis, ob
+     * ein Treiber vorhanden ist oder nicht. Der Nulltreiber
+     * existiert dabei immer.
+     */
+    class _RlCoreExport SoundDriver
+    {
+    public:
+        /// Der Konstruktor
+        SoundDriver(Ogre::ResourceManager* soundResourceManager);
+        /// Der Destruktor
+        virtual ~SoundDriver();
+        /// Zeigt an, ob der Treiber funktionsf???hig ist.
+        virtual bool isDriverAvailable() = 0;
 
-	/// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
-	virtual void setRolloffFactor(const Ogre::Real& f) = 0;
-	virtual const Ogre::Real getRolloffFactor() = 0;
-    /// Die Standardlautst???rke f???r Musik einstellen
-    void setDefaultMusicVolume(const Ogre::Real& vol);
-    /// Die Standardlautst???rke f???r Musik zur???ckgeben.
-	const Ogre::Real getDefaultMusicVolume() const;
-    /// Die Standardlautst???rke f???r Musik einstellen
-    void setDefaultSoundVolume(const Ogre::Real& vol);
-    /// Die Standardlautst???rke f???r Musik zur???ckgeben.
-    const Ogre::Real getDefaultSoundVolume() const;
-    /// Die Lautst???rke aller Sounds
-    virtual void setMasterVolume(const Ogre::Real& vol);
-    /// Die Standardlautst???rke f???r Musik zur???ckgeben.
-    const Ogre::Real getMasterVolume() const;
-    /// Einen Sound aus den Listen entfernen
-    void remove(Sound *sound);
-    
-    /// Die Einstellungen in Datei schreiben
-    virtual void saveConf(rl::ConfigFile &conf) const;
-    /// Die Einstellungen laden
-    virtual void loadConf(rl::ConfigFile &conf);
-    
-    
-protected:
-    /// Liste der Musikst???cke
-    SoundSet mMusicSet;
-    /// Liste der Sounds
-    SoundSet mSoundSet;
-    /// Standardeinstellung f???r Musik
-    Ogre::Real mDefaultMusicVolume;
-    /// Standardeinstellung f???r Sounds
-    Ogre::Real mDefaultSoundVolume;
+        /** Initialize driver
+         *  @return <code>true</code> if successful, <code>false</code> otherwise
+         */
+        virtual bool initialize() = 0;
 
-	Ogre::Real mMasterVolume;
+        /// Beende den Treiber
+        virtual void shutdown() = 0;
+        /// Der Name des Treibers
+        virtual Ogre::String getName() const = 0;
+        /// Update-Aufgaben erledigen
+        virtual void update() = 0;
+        /// Einen Sound-Stream mit Resource erzeugen
+        virtual Sound *createStream(const SoundResourcePtr &res) = 0;
+        /// Einen Sound-Sample mit Resource erzeugen
+        virtual Sound *createSample(const SoundResourcePtr &res) = 0;
+        /// Einen Soundlistener erzeugen
+        virtual ListenerMovable *createListener(const Ogre::String &name) = 0;
 
-	static Ogre::ResourceManager* sSoundResourceManager;
-};
 
+        /// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
+        virtual void setRolloffFactor(const Ogre::Real& f) = 0;
+        virtual const Ogre::Real getRolloffFactor() = 0;
+        /// Die Standardlautst???rke f???r Musik einstellen
+        void setDefaultMusicVolume(const Ogre::Real& vol);
+        /// Die Standardlautst???rke f???r Musik zur???ckgeben.
+        const Ogre::Real getDefaultMusicVolume() const;
+        /// Die Standardlautst???rke f???r Musik einstellen
+        void setDefaultSoundVolume(const Ogre::Real& vol);
+        /// Die Standardlautst???rke f???r Musik zur???ckgeben.
+        const Ogre::Real getDefaultSoundVolume() const;
+        /// Die Lautst???rke aller Sounds
+        virtual void setMasterVolume(const Ogre::Real& vol);
+        /// Die Standardlautst???rke f???r Musik zur???ckgeben.
+        const Ogre::Real getMasterVolume() const;
+        /// Einen Sound aus den Listen entfernen
+        void remove(Sound *sound);
+
+        /**
+         * Returns the current sound driver settings as a key-value list
+         *
+         * @return key-value list of sound options
+         */
+        virtual Ogre::NameValuePairList getSettings() const;
+
+        /**
+         * Sets certain options for the sound driver, like volume settings for
+         * sound effects and music.
+         *
+         * @param settings key-value list of settings
+         */
+        virtual void applySettings(const Ogre::NameValuePairList& settings);
+
+    protected:
+        /// Liste der Musikst???cke
+        SoundSet mMusicSet;
+        /// Liste der Sounds
+        SoundSet mSoundSet;
+        Ogre::Real mDefaultMusicVolume;  ///!< Music volume
+        Ogre::Real mDefaultSoundVolume;  ///!< Sound effect volume
+        Ogre::Real mMasterVolume;        ///!< Master volume
+
+        static Ogre::ResourceManager* sSoundResourceManager;
+    };
+
 }
 
 #endif /*SOUNDDRIVER_H_*/

Modified: rl/trunk/engine/core/include/SoundManager.h
===================================================================
--- rl/trunk/engine/core/include/SoundManager.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/include/SoundManager.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,18 +1,18 @@
 /* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
-*/
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
 
 #ifndef SOUNDMANAGER_H
 #define SOUNDMANAGER_H
@@ -47,10 +47,10 @@
  * @date 04-26-2004
  * @version 2.0
  * @date 06-29-2005
- */ 
-class _RlCoreExport SoundManager : public Ogre::ResourceManager,
-        public Ogre::Singleton<SoundManager>, public GameTask 
-{
+ */
+    class _RlCoreExport SoundManager : public Ogre::ResourceManager,
+            public Ogre::Singleton<SoundManager>, public GameTask
+    {
     public:
         /// Gibt das Singleton zurueck.
         static SoundManager& getSingleton();
@@ -59,63 +59,61 @@
         /// Eine Resource erzeugen
         /// Konstruktor
         SoundManager();
-		virtual ~SoundManager();
+        virtual ~SoundManager();
 
-	    /// Den aktiven Listener zur?ckgeben.
-		ListenerObject* getListener() const;
+        /// Den aktiven Listener zur?ckgeben.
+        ListenerObject* getListener() const;
         /// Creates the listener actor.
-		Actor* createListenerActor();
+        Actor* createListenerActor();
         /// Returns the listener actor, if it exists. Else returns NULL.
-		Actor* getListenerActor();
-		void _clearListenerActor();		
+        Actor* getListenerActor();
+        void _clearListenerActor();
 
-		/// Hole den Treiber mit dem Namen
-		SoundDriver* getDriverByName(const Ogre::String &name);
+        /// Hole den Treiber mit dem Namen
+        SoundDriver* getDriverByName(const Ogre::String &name);
 
-		/// Hole die Soundkonfiguration
-		void loadConf(const Ogre::String &filename);
-		/// Schreibe die Soundkonfiguration
-		void saveConf(const Ogre::String &filename) const;
+        /**
+         * Sets the active sound driver and forwards all other settings
+         * to the driver's setSettings function.
+         *
+         * @param settings key-value list of settings
+         */
+        void applySettings(const Ogre::NameValuePairList& settings);
 
-		/// 3D-Sound aktualisieren.
-		void update();
-		/// Liste der Soundtreiber.
-		const DriverList& getSoundDriverList() const;
-		/// Den aktiven Treiber zur?ckgeben.
-		SoundDriver* getActiveDriver() const;
-		/// Den aktiven Treiber setzen.
-		void setActiveDriver(SoundDriver *driver);
+        /// Schreibe die Soundkonfiguration
+        Ogre::NameValuePairList getSettings() const;
 
-		void registerDriver(SoundDriver* driver);
-		void unregisterDriver(SoundDriver* driver);
+        /// 3D-Sound aktualisieren.
+        void update();
+        /// Den aktiven Treiber zur?ckgeben.
+        SoundDriver* getActiveDriver() const;
+        /// Den aktiven Treiber setzen.
+        void setActiveDriver(SoundDriver *driver);
+
+        void registerDriver(SoundDriver* driver);
+        void unregisterDriver(SoundDriver* driver);
+
         void unloadAllDrivers();
 
         virtual void run( Ogre::Real elapsedTime );
 
         virtual const Ogre::String& getName() const;
 
-	protected:
-		virtual Ogre::Resource* createImpl(const Ogre::String& name, Ogre::ResourceHandle handle, 
-			const Ogre::String& group, bool isManual, Ogre::ManualResourceLoader* loader, 
-			const Ogre::NameValuePairList* createParams);
+    protected:
+        virtual Ogre::Resource* createImpl(const Ogre::String& name, Ogre::ResourceHandle handle,
+            const Ogre::String& group, bool isManual, Ogre::ManualResourceLoader* loader,
+            const Ogre::NameValuePairList* createParams);
 
-	private:
-		/// Ein MutEx, um das Hinzuf?gen der Sounds zu synchronisieren.
-		boost::mutex mResListMutex;
-		/// Welche Dateiendung soll verwendet werden.
-		virtual StringList getExtension();
+    private:
+        /// Ein MutEx, um das Hinzuf?gen der Sounds zu synchronisieren.
+        boost::mutex mResListMutex;
+        /// Welche Dateiendung soll verwendet werden.
+        virtual StringList getExtension();
 
-
-	    /// die Liste der bekannten und funktionierenden Treiber
-		DriverList mDriverList;  
-		/// Der aktuell bentutzte Soundtreiber
-		SoundDriver *mActiveDriver;
-		/// Der aktive Soundlistener
-		ListenerObject *mActiveListener;
-		Actor* mListenerActor;
-
-		Ogre::StringVector mDrivers;
-};
-
+        DriverList mDriverList;          //!< List of currently loaded drivers
+        SoundDriver* mActiveDriver;      //!< Currently used sound driver
+        ListenerObject* mActiveListener; //!< Currently used sound listener
+        Actor* mListenerActor;
+    };
 }
 #endif

Modified: rl/trunk/engine/core/include/nulldriver/NullDriver.h
===================================================================
--- rl/trunk/engine/core/include/nulldriver/NullDriver.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/include/nulldriver/NullDriver.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -28,12 +28,12 @@
 class _RlCoreExport NullDriver : public rl::SoundDriver
 {
 public:
-	/// Der Treibername
+    /// Der Treibername
     static Ogre::String NAME;
     /// Der Konstruktor
-	NullDriver(Ogre::ResourceManager* soundResourceManager);
+    NullDriver(Ogre::ResourceManager* soundResourceManager);
     /// Der Destruktor
-	~NullDriver();
+    ~NullDriver();
     /// Ist der Treiber angeschaltet?
     bool isDriverAvailable();
     /// Initialisiere den Treiber.
@@ -50,15 +50,9 @@
     virtual Sound *createSample(const SoundResourcePtr &res);
     /// Einen Soundlistener erzeugen
     virtual ListenerMovable *createListener(const Ogre::String &name);
-
-    /// Die Einstellungen in Datei schreiben
-    virtual void saveConf(rl::ConfigFile &conf) const;
-    /// Die Einstellungen laden
-    virtual void loadConf(rl::ConfigFile &conf);
-
-	/// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
-	virtual void setRolloffFactor(const Ogre::Real&);
-	virtual const Ogre::Real getRolloffFactor();
+    /// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
+    virtual void setRolloffFactor(const Ogre::Real&);
+    virtual const Ogre::Real getRolloffFactor();
 };
 
 }

Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -15,391 +15,500 @@
  */
 
 #include "ConfigurationManager.h"
-
-#include <OgreRenderSystem.h>
-#include <OgreResourceGroupManager.h>
-
 #include "CoreSubsystem.h"
 
-using namespace Ogre;
+template<> rl::ConfigurationManager* Ogre::Singleton<rl::ConfigurationManager>::ms_Singleton = 0;
 
-template<> rl::ConfigurationManager* Singleton<rl::ConfigurationManager>::ms_Singleton = 0;
-
 namespace rl
 {
-	ConfigurationManager* ConfigurationManager::getSingletonPtr()
-	{
-		if (ms_Singleton == NULL)
-		{
-			ms_Singleton = new ConfigurationManager();
-		}
+    ConfigurationManager* ConfigurationManager::getSingletonPtr()
+    {
+        if (ms_Singleton == NULL)
+        {
+            ms_Singleton = new ConfigurationManager();
+        }
 
-		return ms_Singleton;
-	}
+        return ms_Singleton;
+    }
 
-	ConfigurationManager& ConfigurationManager::getSingleton()
-	{
-		if (ms_Singleton == NULL)
-		{
-			ms_Singleton = new ConfigurationManager();
-		}
+    ConfigurationManager& ConfigurationManager::getSingleton()
+    {
+        if (ms_Singleton == NULL)
+        {
+            ms_Singleton = new ConfigurationManager();
+        }
 
-		return *ms_Singleton;
-	}
+        return *ms_Singleton;
+    }
 
-    ConfigurationManager::ConfigurationManager() :
-        mSystemConfig(NULL)
+    ConfigurationManager::ConfigurationManager()
     {
-    	mRastullahCfgFile = "rastullah.conf";
-    	mOgreLogFile = "ogre.log";
-    	mCeguiLogFile = "cegui.log";
+        // Filenames for log and configuration files
+        mRastullahCfgFile = "rastullah.conf";
+        mOgreLogFile = "ogre.log";
+        mCeguiLogFile = "cegui.log";
         mRastullahLogFile = "rastullah.log";
-		mModulesCfgFile = "modules.cfg";
+        mModulesCfgFile = "modules.cfg";
 
-    	setRastullahCfgPath();
-    }
+        // Setup general default values
+        mGeneralSettings.insert(make_pair("Log Level", "2"));
+        mGeneralSettings.insert(make_pair("Subtitle Speed", "0.0"));
 
-	ConfigurationManager::~ConfigurationManager()
-	{
-        delete mSystemConfig;
-	}
+        // Setup sound default values
+        mSoundSettings.insert(make_pair("DefaultMusicVolume", "0.4"));
+        mSoundSettings.insert(make_pair("DefaultSoundVolume", "0.9"));
+        mSoundSettings.insert(make_pair("MasterVolume", "1"));
 
-	Ogre::String ConfigurationManager::getOgreLogFile() const
-	{
-		return mRastullahLogDirectory + "/" + mOgreLogFile;
-	}
+        // Setup graphic default values
+#       if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
+        mGraphicSettings.insert(make_pair("Render System", "Direct3D9 Rendering Subsystem"));
+#       else
+        mGraphicSettings.insert(make_pair("Render System","OpenGL Rendering Subsystem"));
+        mGraphicSettings.insert(make_pair("RTT Preferred Mode", "FBO"));
+#       endif
+        mGraphicSettings.insert(make_pair("Fullscreen", "no"));
+        mGraphicSettings.insert(make_pair("FSAA", "0"));
+        mGraphicSettings.insert(make_pair("Video Mode", "800 x 600"));
+        mGraphicSettings.insert(make_pair("Use Static Geometry", "auto"));
+        mGraphicSettings.insert(make_pair("Max Anisotropy", "1"));
 
-	Ogre::String ConfigurationManager::getRastullahLogFile() const
-	{
-		return mRastullahLogDirectory + "/" + mRastullahLogFile;
-	}
+        // Setup input default values
+        mInputSettings.insert(make_pair("Mouse Sensitivity", "4"));
+        mInputSettings.insert(make_pair("Mouse Invert", "no"));
 
-	Ogre::String ConfigurationManager::getCeguiLogFile() const
-	{
-		return mRastullahLogDirectory + "/" + mCeguiLogFile;
-	}
+        setRastullahCfgPath();
+    }
 
-	Ogre::String ConfigurationManager::getModulesCfgFile() const
-	{
-		return mModulesCfgDirectory  + "/" + mModulesCfgFile;
-	}
+    ConfigurationManager::~ConfigurationManager()
+    {
+    }
 
-	Ogre::String ConfigurationManager::getModulesRootDirectory() const
-	{
-		return mModulesRootDirectory;
-	}
+    Ogre::String ConfigurationManager::getOgreLogFile() const
+    {
+        return mRastullahLogDirectory + "/" + mOgreLogFile;
+    }
 
-	Ogre::String ConfigurationManager::getRastullahLogDirectory() const
-	{
-		return mRastullahLogDirectory;
-	}
+    Ogre::String ConfigurationManager::getRastullahLogFile() const
+    {
+        return mRastullahLogDirectory + "/" + mRastullahLogFile;
+    }
 
-	/**
-	 * @todo Remove, after other subsystems were changed to
-	 *       new ConfigurationManager style
-	 */
-	Ogre::String ConfigurationManager::getRastullahCfgPath() const
-	{
-		return mRastullahOgreCfgPath;
-	}
+    Ogre::String ConfigurationManager::getCeguiLogFile() const
+    {
+        return mRastullahLogDirectory + "/" + mCeguiLogFile;
+    }
 
-	Ogre::String ConfigurationManager::getPluginCfgFile() const
-	{
-		return mPluginCfgFile;
-	}
+    Ogre::String ConfigurationManager::getModulesCfgFile() const
+    {
+        return mModulesRootDirectory  + "/" + mModulesCfgFile;
+    }
 
-	Ogre::String ConfigurationManager::getPluginCfgPath() const
-	{
-		return mPluginCfgPath;
-	}
+    Ogre::String ConfigurationManager::getModulesRootDirectory() const
+    {
+        return mModulesRootDirectory;
+    }
 
-	Ogre::String ConfigurationManager::getModulesCfgPath() const
-	{
-		return mModulesCfgPath;
-	}
+    Ogre::String ConfigurationManager::getRastullahLogDirectory() const
+    {
+        return mRastullahLogDirectory;
+    }
 
-    Ogre::String ConfigurationManager::getRastullahSystemCfgPath() const
+    Ogre::String ConfigurationManager::getOgrePluginDirectory() const
     {
-        return mRastullahSystemCfgPath;
+        return mOgrePluginDirectory;
     }
 
-    Ogre::String ConfigurationManager::getSoundCfgPath() const
+    Ogre::NameValuePairList ConfigurationManager::getGraphicSettings() const
     {
-        return mSoundCfgPath;
+        return mGraphicSettings;
     }
-    /// end remove
 
-    void ConfigurationManager::loadConfig()
+    Ogre::NameValuePairList ConfigurationManager::getSoundSettings() const
     {
-        if(mSystemConfig == NULL)
-        {
-        	// On Linux, we create the .rastullah directory
-#           if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
-			fs::path rastullahCfgDirectory(string(::getenv("HOME")) + "/.rastullah", fs::portable_posix_name);
+        return mSoundSettings;
+    }
 
-			if (!fs::exists(rastullahCfgDirectory))
-			{
-				fs::create_directory(rastullahCfgDirectory);
-			}
+    Ogre::NameValuePairList ConfigurationManager::getInputSettings() const
+    {
+        return mInputSettings;
+    }
 
-			mRastullahOgreCfgPath = string(::getenv("HOME")) + "/.rastullah/rastullah_ogre.cfg";
-#           else
-			mRastullahOgreCfgPath = "./modules/config/rastullah_ogre.cfg";
-#           endif
+    void ConfigurationManager::loadConfig()
+    {
+        // On Linux, we create the .rastullah directory
+#       if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
+        fs::path rastullahCfgDirectory(string(::getenv("HOME")) + "/.rastullah", fs::portable_posix_name);
 
-            mSystemConfig = new Ogre::ConfigFile();
-            std::vector<String> cfg_paths;
+        if (!fs::exists(rastullahCfgDirectory))
+        {
+            fs::create_directory(rastullahCfgDirectory);
+        }
+#       endif
 
-			if (mRastullahCfgPath.find(":") == std::string::npos)
-			{
-				cfg_paths.push_back(mRastullahCfgPath);
-			}
-			else
-			{
-				// Split the path at the ':' character
-				cfg_paths = StringUtil::split(mRastullahCfgPath, ":");
-			}
+        // First check, if we have found any directory
+        if (!mRastullahCfgPath.empty())
+        {
+            ConfigFile* configfile = new ConfigFile();
+            std::vector<Ogre::String> cfg_paths;
 
-			for (unsigned int i = 0; i < cfg_paths.size(); i++)
-			{
-				try
-				{
-					std::cout << "Loading Configuration File " << cfg_paths[i] << std::endl;
-					mSystemConfig->load(cfg_paths[i] + mRastullahCfgFile, "=", true);
-				}
-				catch (Ogre::Exception)
-				{
-					LOG_ERROR2(Logger::CORE,
-						"Konnte Rastullah-Konfiguration in '" + cfg_paths[i] +
-						"' nicht laden! Defaulteinstellungen werden benutzt.","Configuration");
-				}
+            if (mRastullahCfgPath.find(":") == std::string::npos)
+            {
+                cfg_paths.push_back(mRastullahCfgPath);
+            }
+            else
+            {
+                // Split the path at the ':' character
+                cfg_paths = Ogre::StringUtil::split(mRastullahCfgPath, ":");
+            }
 
-				// Set log and modules directory and plugin cfg file name
-				mRastullahLogDirectory = mSystemConfig->getSetting("LogDirectory", "Rastullah");
+            for (unsigned int i = 0; i < cfg_paths.size(); i++)
+            {
+                try
+                {
+                    std::cout << "Loading Configuration File " << cfg_paths[i] << mRastullahCfgFile << std::endl;
+                    configfile->load(cfg_paths[i] + mRastullahCfgFile, "=", true);
+                }
+                catch (Ogre::Exception)
+                {
+                    LOG_ERROR2(Logger::CORE,
+                         "Konnte Rastullah-Konfiguration in '" + cfg_paths[i] +
+                         "' nicht laden! Defaulteinstellungen werden benutzt.","Configuration");
+                }
 
-				if (mRastullahLogDirectory.empty())
-				{
-#                   if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
-					mRastullahLogDirectory = string(::getenv("HOME")) + "/.rastullah/logs";
-#                   else
-					mRastullahLogDirectory = "./logs";
-#                   endif
-				}
+                // Set log, modules and OGRE plugin directory
+                mRastullahLogDirectory = configfile->getSetting("LogDirectory", "Paths");
+                mModulesRootDirectory = configfile->getSetting("ModulesDirectory", "Paths");
+                mOgrePluginDirectory = configfile->getSetting("OgrePluginDirectory", "Paths");
 
-				mModulesRootDirectory = mSystemConfig->getSetting("ModulesDirectory", "Rastullah");
-				mPluginCfgFile = mSystemConfig->getSetting("PluginCfg", "Rastullah");
-			}
-        }
+                // Get general settings
+                try
+                {
+                    for (ConfigFile::SettingsIterator it = configfile->getSettingsIterator("General"); it.hasMoreElements(); it.moveNext())
+                    {
+                        addSetting(CS_GENERAL, it.peekNextKey(), it.peekNextValue());
+                    }
+                }
+                catch (Ogre::Exception& oe)
+                {
+                    // Log it as information
+                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] + mRastullahCfgFile + " does not contain a section 'General'. Defaults will be used.");
+                }
 
-		/**
-		 * @todo Remove, after other subsystems were changed to
-		 *       new ConfigurationManager style
-		 */
-		mModulesCfgDirectory = mModulesRootDirectory + "/modules/config";
-		mRastullahCfgPath = "./rastullah_ogre.cfg";
-		mRastullahSystemCfgPath = mModulesCfgDirectory + "/rastullah_system.cfg";
-		mSoundCfgPath = mModulesCfgDirectory + "/sound.cfg";
-		mPluginCfgPath = mModulesCfgDirectory + "/" + mPluginCfgFile;
+                // Get video settings
+                try
+                {
+                    for (ConfigFile::SettingsIterator it = configfile->getSettingsIterator("Video"); it.hasMoreElements(); it.moveNext())
+                    {
+                        addSetting(CS_GRAPHICS, it.peekNextKey(), it.peekNextValue());
+                    }
+                }
+                catch (Ogre::Exception& oe)
+                {
+                    // Log it as information
+                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] + mRastullahCfgFile + " does not contain a section 'Video'. Defaults will be used.");
+                }
 
-		mModulesCfgPath = mModulesRootDirectory + "/modules/modules.cfg";
-    }
+                // Get sound settings
+                try
+                {
+                    for (ConfigFile::SettingsIterator it = configfile->getSettingsIterator("Sound"); it.hasMoreElements(); it.moveNext())
+                    {
+                        addSetting(CS_SOUND, it.peekNextKey(), it.peekNextValue());
+                    }
+                }
+                catch (Ogre::Exception& oe)
+                {
+                    // Log it as information
+                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] + mRastullahCfgFile + " does not contain a section 'Video'. Defaults will be used.");
+                }
 
-    bool ConfigurationManager::shouldUseStaticGeometry() const
-    {
-        Ogre::String mode = mSystemConfig->getSetting( "use_static_geometry" );
+                // Get input settings
+                try
+                {
+                    for (ConfigFile::SettingsIterator it = configfile->getSettingsIterator("Input"); it.hasMoreElements(); it.moveNext())
+                    {
+                        addSetting(CS_INPUT, it.peekNextKey(), it.peekNextValue());
+                    }
+                }
+                catch (Ogre::Exception& oe)
+                {
+                    // Log it as information
+                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] + mRastullahCfgFile + " does not contain a section 'Input'. Defaults will be used.");
+                }
+            }
 
-        if( mode == Ogre::StringUtil::BLANK )
-            mode = "auto";
+            delete configfile;
+        }
 
-        if( mode.compare("yes") == 0 )
+        if (mRastullahLogDirectory.empty())
         {
-            return true;
+#           if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
+            mRastullahLogDirectory = string(::getenv("HOME")) + "/.rastullah/logs";
+#           else
+            mRastullahLogDirectory = "./logs";
+#           endif
         }
-        else if( mode.compare("no") == 0 )
+
+        if (mModulesRootDirectory.empty())
         {
-            return false;
+#           if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
+                mModulesRootDirectory = RL_MODULEDIR;
+#           else
+                mModulesRootDirectory = "./";
+#           endif
         }
-        else
+
+        if (mOgrePluginDirectory.empty())
         {
-            // ?berpr?fen ob der Renderer VertexBuffer unterst?tzt
-            return Ogre::Root::getSingleton().getRenderSystem()
-                ->getCapabilities()->hasCapability( Ogre::RSC_VBO );
+#           if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
+            mOgrePluginDirectory = OGRE_PLUGINDIR;
+#           else
+            mOgrePluginDirectory = "";
+#           endif
         }
+    }
 
+    void ConfigurationManager::saveConfig()
+    {
+        ConfigFile* cfgfile = new ConfigFile();
+
+        // Create the path list
+        Ogre::NameValuePairList* PathSettings = new Ogre::NameValuePairList();
+        PathSettings->insert(make_pair("ModulesDirectory", mModulesRootDirectory));
+        PathSettings->insert(make_pair("OgrePluginDirectory", mOgrePluginDirectory));
+        PathSettings->insert(make_pair("LogDirectory", mRastullahLogDirectory));
+
+        // Add General settings
+        cfgfile->addSection("General", mGeneralSettings);
+        // Add Path settings
+        cfgfile->addSection("Path", *PathSettings);
+        // Add Video settings
+        cfgfile->addSection("Video", mGraphicSettings);
+        // Add Sound settings
+        cfgfile->addSection("Sound", mSoundSettings);
+        // Add Input settings
+        cfgfile->addSection("Input", mInputSettings);
+
+#       if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
+        cfgfile->save("./config");
+#       else
+        cfgfile->save(Ogre::String(::getenv("HOME")) + "/.rastullah/" + mRastullahCfgFile);
+#       endif
+
+        // Clean up
+        delete PathSettings;
+        delete cfgfile;
     }
 
-	Ogre::String ConfigurationManager::getTextureUnitScheme() const
-	{
-		int numTu = Ogre::Root::getSingleton().getRenderSystem()
-			->getCapabilities()->getNumTextureUnits();
+    Logger::LogLevel ConfigurationManager::getLogLevel()
+    {
+        return static_cast<Logger::LogLevel>(getIntSetting(ConfigurationManager::CS_GENERAL, "Log Level"));
+    }
 
-		Ogre::String scheme;
+    Ogre::String ConfigurationManager::getEngineVersionString() const
+    {
+        static Ogre::String version = "0.2.0";
+        return version;
+    }
 
-		if (numTu >= 6)
-			scheme = "tu6";
-		else if (numTu >= 2)
-			scheme = "tu2";
-		else
-			scheme = "tu1";
+    Ogre::String ConfigurationManager::getEngineVersionName() const
+    {
+        static Ogre::String version = "Internal Build";
+        return version;
+    }
 
-		LOG_MESSAGE(Logger::CORE,
-			"Found "+Ogre::StringConverter::toString(numTu) + " Texture Units, using "+
-			"alphablending scheme "+scheme);
-		return scheme;
-	}
+    Ogre::String ConfigurationManager::getStringSetting(ConfigurationSection section, Ogre::String key)
+    {
+        // Get the value we are looking for
+        return findSetting(section, key);
+    }
 
-	Logger::LogLevel ConfigurationManager::getLogLevel() const
-	{
-		int loglevel = Ogre::StringConverter::parseInt(mSystemConfig->getSetting("log_level"));
-		return static_cast<Logger::LogLevel>(loglevel);
-	}
+    int ConfigurationManager::getIntSetting(ConfigurationSection section, Ogre::String key)
+    {
+        // Get the value we are looking for
+        return Ogre::StringConverter::parseInt(findSetting(section, key));
+    }
 
-	Ogre::String ConfigurationManager::getEngineVersionString() const
-	{
-		static Ogre::String version = "0.2.0";
-		return version;
-	}
+    bool ConfigurationManager::getBoolSetting(ConfigurationSection section, Ogre::String key)
+    {
+        // Get the value we are looking for
+        return Ogre::StringConverter::parseBool(findSetting(section, key));
+    }
 
-	Ogre::String ConfigurationManager::getEngineVersionName() const
-	{
-		static Ogre::String version = "Internal Build";
-		return version;
-	}
+    Ogre::Real ConfigurationManager::getRealSetting(ConfigurationSection section, Ogre::String key)
+    {
+        // Get the value we are looking for
+        return Ogre::StringConverter::parseReal(findSetting(section, key));
+    }
 
-	static const Ogre::String sMonths[] =
-			{"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug",
-             "Sep", "Oct", "Nov", "Dec"};
+    Ogre::String ConfigurationManager::findSetting(ConfigurationSection section, Ogre::String key) const
+    {
+        Ogre::NameValuePairList::const_iterator it;
+        const Ogre::NameValuePairList* searchList;
 
-	/// __DATE__ sieht ca. so aus : Nov 08 2005
-	long parseDate(char* date)
-	{
-		Ogre::String dateStr = Ogre::String(date);
-		Ogre::String monthStr = dateStr.substr(0,3);
-		int day = Ogre::StringConverter::parseInt( dateStr.substr(4,2) );
-		int year = Ogre::StringConverter::parseInt( dateStr.substr(7,4) );
-		int month = 0;
+        // Search for the key in the specified section
+        switch (section)
+        {
+            case CS_GENERAL:
+                searchList = &mGeneralSettings;
+            break;
+            case CS_GRAPHICS:
+                searchList = &mGraphicSettings;
+            break;
+            case CS_SOUND:
+                searchList = &mSoundSettings;
+            break;
+            case CS_INPUT:
+                searchList = &mInputSettings;
+            break;
+            default:
 
-		while( month < 12 && monthStr.compare(sMonths[month]) != 0 )
-			month++;
+            break;
+        }
 
-		return /* Jahr */		  year * 100000 +
-			   /* Monat */	 (month+1) * 1000 +
-			   /* Tag */		   day * 10 +
-			   /* Sub-Version */	 0;
-	}
+        it = searchList->find(key);
 
-	long ConfigurationManager::getEngineBuildNumber() const
-	{
-		static long buildNumber = parseDate(__DATE__);
-		return buildNumber;
-	}
+        if (it == searchList->end())
+        {
+            return Ogre::String("");
+        }
+        else
+        {
+            return it->second;
+        }
+    }
 
+    void ConfigurationManager::addSetting(ConfigurationSection section, Ogre::String key, Ogre::String value)
+    {
+        Ogre::NameValuePairList::iterator it;
+        Ogre::NameValuePairList* addList;
 
-	const CeGuiString& ConfigurationManager::getAboutText() const
-	{
-		static CeGuiString aboutText =
-			"Rastullahs Lockenpracht\n\nCopyright 2003-2006 Team Pantheon\n\nBenutzte Bibliotheken: Ogre, fmod, Newton, boost, ...";
-		return aboutText;
-	}
+        // Get the section, where the key is inserted
+        switch (section)
+        {
+            case CS_GENERAL:
+                addList = &mGeneralSettings;
+            break;
+            case CS_GRAPHICS:
+                addList = &mGraphicSettings;
+            break;
+            case CS_SOUND:
+                addList = &mSoundSettings;
+            break;
+            case CS_INPUT:
+                addList = &mInputSettings;
+            break;
+            default:
 
-	String ConfigurationManager::getStringSetting(const String& name, const String& defaultv) const
-	{
-		String rval = mSystemConfig->getSetting(name);
-		if (rval == StringUtil::BLANK) rval = defaultv;
-		return rval;
-	}
+            break;
+        }
 
-	Real ConfigurationManager::getRealSetting(const String& name, Real defaultv) const
-	{
-		String val = getStringSetting(name);
-		if (val == StringUtil::BLANK) return defaultv;
-		else return StringConverter::parseReal(val);
-	}
+        // Find out, if key exist
+        it = addList->find(key);
 
-	int ConfigurationManager::getIntSetting(const String& name, int defaultv) const
-	{
-		String val = getStringSetting(name);
-		if (val == StringUtil::BLANK) return defaultv;
-		else return StringConverter::parseInt(val);
-	}
+        if (it == addList->end())
+        {
+            // Key does not exist, insert
+            addList->insert(make_pair(key, value));
+        }
+        else
+        {
+            // Key does exist, update
+            it->second = value;
+        }
+    }
 
-	bool ConfigurationManager::getBoolSetting(const String& name, bool defaultv) const
-	{
-		String val = getStringSetting(name);
-		if (val == StringUtil::BLANK) return defaultv;
-		else return StringConverter::parseBool(val);
-	}
+    static const Ogre::String sMonths[] =
+            {"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug",
+             "Sep", "Oct", "Nov", "Dec"};
 
-	String ConfigurationManager::getInputConfigPath() const
-	{
-		return mModulesCfgDirectory + "/rastullah_input.cfg";
-	}
+    /// __DATE__ sieht ca. so aus : Nov 08 2005
+    long parseDate(char* date)
+    {
+        Ogre::String dateStr = Ogre::String(date);
+        Ogre::String monthStr = dateStr.substr(0,3);
+        int day = Ogre::StringConverter::parseInt( dateStr.substr(4,2) );
+        int year = Ogre::StringConverter::parseInt( dateStr.substr(7,4) );
+        int month = 0;
 
-	String ConfigurationManager::getKeymap() const
-	{
-		return mModulesCfgDirectory + "/keymap-german.xml";
-	}
+        while( month < 12 && monthStr.compare(sMonths[month]) != 0 )
+            month++;
 
-    String ConfigurationManager::getConfigModulePath() const
-    {
-        return mConfigModuleDirectory;
+        return /* Jahr */          year * 100000 +
+               /* Monat */     (month+1) * 1000 +
+               /* Tag */           day * 10 +
+               /* Sub-Version */     0;
     }
 
-    void ConfigurationManager::setRastullahCfgPath()
+    long ConfigurationManager::getEngineBuildNumber() const
     {
-    	string path = "./";
+        static long buildNumber = parseDate(__DATE__);
+        return buildNumber;
+    }
 
-    	// First try: Current directory
-    	if (checkForFile(path + mRastullahCfgFile))
-    	{
-			addToCfgPath(path);
-    	}
 
-#		if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
-		// Check system wide /etc/rastullah directory
-		path = "/etc/rastullah/";
+    const CeGuiString& ConfigurationManager::getAboutText() const
+    {
+        static CeGuiString aboutText =
+            "Rastullahs Lockenpracht\n\nCopyright 2003-2006 Team Pantheon\n\nBenutzte Bibliotheken: Ogre, fmod, Newton, boost, ...";
+        return aboutText;
+    }
 
-    	if (checkForFile(path + mRastullahCfgFile))
-    	{
-			addToCfgPath(path);
-    	}
+    Ogre::String ConfigurationManager::getKeymap() const
+    {
+        return Ogre::String("config/keymap-german.xml");
+    }
 
-		// Check home .rastullah directory
-    	path = string(::getenv("HOME")) + "/.rastullah/";
+    void ConfigurationManager::setRastullahCfgPath()
+    {
+        // First try: Current directory
+        addToCfgPath("./");
 
-    	if (checkForFile(path + mRastullahCfgFile))
-    	{
-			addToCfgPath(path);
-    	}
-#		else
-        addToCfgPath("./modules/config/");
+#       if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
+        // Check system wide /etc/rastullah directory
+        addToCfgPath("/etc/rastullah/");
+        // Check home .rastullah directory
+        addToCfgPath(Ogre::String(::getenv("HOME")) + "/.rastullah/");
+#       else
+        addToCfgPath("./config/");
 #       endif
     }
 
-	void ConfigurationManager::addToCfgPath(const std::string& path)
-	{
-		if (mRastullahCfgPath.size() > 0)
-		{
-			mRastullahCfgPath += ":" + path;
-		}
-		else
-		{
-			mRastullahCfgPath = path;
-		}
-	}
+    void ConfigurationManager::addToCfgPath(const std::string& path)
+    {
+        std::cout << "Checking for " << mRastullahCfgFile << " in " << path << std::endl;
 
-	bool ConfigurationManager::checkForFile(const std::string& filename)
-	{
-		try {
-			if (fs::exists(filename))
-			{
-				return true;
-			}
-		}
-		catch (fs::filesystem_error& fe) {
-			return false;
-		}
+        if (checkForFile(path + mRastullahCfgFile))
+        {
+            if (mRastullahCfgPath.size() > 0)
+            {
+                mRastullahCfgPath += ":" + path;
+            }
+            else
+            {
+                mRastullahCfgPath = path;
+            }
 
-		return false;
-	}
+            std::cout << "Adding path " << path << " to Rastullah configuration path." << std::endl;
+        }
+    }
+
+    bool ConfigurationManager::checkForFile(const std::string& filename)
+    {
+        try {
+#           if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
+            if (fs::exists(filename))
+#           else
+            if (fs::exists(fs::path(filename, fs::portable_posix_name)))
+#           endif
+            {
+                return true;
+            }
+        }
+        catch (fs::filesystem_error& fe) {
+            return false;
+        }
+
+        return false;
+    }
 }

Modified: rl/trunk/engine/core/src/ContentModule.cpp
===================================================================
--- rl/trunk/engine/core/src/ContentModule.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/src/ContentModule.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
 * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
-* 
+*
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.
 *
@@ -28,81 +28,81 @@
 
 namespace rl
 {
-	ContentModule::ContentModule(const String& id, const CeGuiString& name, bool common, long minimumEngineVersion)
-	:	mId(id),
-		mName(name),
-		mCommon(common),
-		mMinimumEngineVersion(minimumEngineVersion),
+    ContentModule::ContentModule(const String& id, const CeGuiString& name, bool common, long minimumEngineVersion)
+    :    mId(id),
+        mName(name),
+        mCommon(common),
+        mMinimumEngineVersion(minimumEngineVersion),
         mLoaded(false)
-	{
-	}
+    {
+    }
 
-	ContentModule::~ContentModule()
-	{
-	}
+    ContentModule::~ContentModule()
+    {
+    }
 
-	const String ContentModule::getInitFile(const String& moduleId)
-	{
-		return getDirectory(moduleId) + "/scripts/moduleconfig.rb";
-	}
+    const String ContentModule::getInitFile(const String& moduleId)
+    {
+        return getDirectory(moduleId) + "/scripts/moduleconfig.rb";
+    }
 
-	const String ContentModule::getDirectory(const String& moduleId)
-	{
-		return ConfigurationManager::getSingleton().
-        		getModulesRootDirectory() + "/modules/" + moduleId;
-	}
+    const String ContentModule::getDirectory(const String& moduleId)
+    {
+        return ConfigurationManager::getSingleton().
+                getModulesRootDirectory() + "/" + moduleId;
+    }
 
-	const String ContentModule::getDirectory() const
-	{
-		return ContentModule::getDirectory(mId);
-	}
+    const String ContentModule::getDirectory() const
+    {
+        return ContentModule::getDirectory(mId);
+    }
 
-	const CeGuiString& ContentModule::getName() const
-	{
-		return mName;
-	}
+    const CeGuiString& ContentModule::getName() const
+    {
+        return mName;
+    }
 
-	const String& ContentModule::getId() const
-	{
-		return mId;
-	}
+    const String& ContentModule::getId() const
+    {
+        return mId;
+    }
 
-	long ContentModule::getMinimumEngineVersion() const
-	{
-		return mMinimumEngineVersion;
-	}
+    long ContentModule::getMinimumEngineVersion() const
+    {
+        return mMinimumEngineVersion;
+    }
 
-	bool ContentModule::isCommon() const
-	{
-		return mCommon;
-	}
+    bool ContentModule::isCommon() const
+    {
+        return mCommon;
+    }
 
     void ContentModule::initializeTextures() const
     {
-		String resourceGroup = getId();
+        String resourceGroup = getId();
 
-		StringVector texLocations = getTextureLocations();
-		for(StringVector::iterator iter = texLocations.begin();
-			iter != texLocations.end();
-			iter++)
-		{
-			String location = *iter;
-			if (location.find(".zip") != String::npos)
-			{
+        StringVector texLocations = getTextureLocations();
+        for(StringVector::iterator iter = texLocations.begin();
+            iter != texLocations.end();
+            iter++)
+        {
+            String location = *iter;
+            if (location.find(".zip") != String::npos)
+            {
                 ResourceGroupManager::getSingleton().addResourceLocation(
-                	getDirectory() + "/materials/" + location, "Zip", resourceGroup);
-			}
-			else
-			{
+                    getDirectory() + "/materials/" + location, "Zip", resourceGroup);
+            }
+            else
+            {
                 ResourceGroupManager::getSingleton().addResourceLocation(
-                	getDirectory() + "/materials/" + location, "FileSystem", resourceGroup);
-			}
-		}
+                    getDirectory() + "/materials/" + location, "FileSystem", resourceGroup);
+            }
+        }
 
-		addSearchPath(getDirectory()+"/materials", resourceGroup);
+        addSearchPath(getDirectory()+"/materials", resourceGroup);
     }
 
-	void ContentModule::initialize()
+    void ContentModule::initialize()
     {
         String moduleDir = getDirectory();
 
@@ -112,28 +112,28 @@
         addSearchPath(moduleDir + "/dsa", resourceGroup);
         addSearchPath(moduleDir + "/maps", resourceGroup);
         addSearchPath(moduleDir + "/models", resourceGroup);
-   		StringVector modelLoc = getModelLocations();
-		for (StringVector::iterator it = modelLoc.begin(); it != modelLoc.end(); ++it)
-		{
-			addSearchPath(moduleDir + "/models/"+*it, resourceGroup);
-		}
+           StringVector modelLoc = getModelLocations();
+        for (StringVector::iterator it = modelLoc.begin(); it != modelLoc.end(); ++it)
+        {
+            addSearchPath(moduleDir + "/models/"+*it, resourceGroup);
+        }
 
-		addSearchPath(moduleDir + "/sound", resourceGroup); //@todo ueber Verzeichnisnamen nachdenken
-		StringVector soundLoc = getSoundLocations();
-		for (StringVector::iterator it = soundLoc.begin(); it != soundLoc.end(); ++it)
-		{
-			addSearchPath(moduleDir + "/sound/"+*it, resourceGroup);
-		}
+        addSearchPath(moduleDir + "/sound", resourceGroup); //@todo ueber Verzeichnisnamen nachdenken
+        StringVector soundLoc = getSoundLocations();
+        for (StringVector::iterator it = soundLoc.begin(); it != soundLoc.end(); ++it)
+        {
+            addSearchPath(moduleDir + "/sound/"+*it, resourceGroup);
+        }
 
-		addSearchPath(moduleDir + "/gui", resourceGroup);
+        addSearchPath(moduleDir + "/gui", resourceGroup);
         addSearchPath(moduleDir + "/gui/fonts", resourceGroup);
         addSearchPath(moduleDir + "/gui/imagesets", resourceGroup);
         addSearchPath(moduleDir + "/gui/schemes", resourceGroup);
         addSearchPath(moduleDir + "/gui/windows", resourceGroup);
         addSearchPath(moduleDir + "/gui/windows/buttons", resourceGroup);
-        addSearchPath(moduleDir + "/dialogs", resourceGroup);     
+        addSearchPath(moduleDir + "/dialogs", resourceGroup);
 
-		RubyInterpreter* interpreter = CoreSubsystem::getSingleton().getRubyInterpreter();
+        RubyInterpreter* interpreter = CoreSubsystem::getSingleton().getRubyInterpreter();
         if (interpreter != NULL)
         {
             interpreter->addSearchPath(moduleDir + "/scripts");
@@ -143,20 +143,20 @@
         mLoaded = true;
     }
 
-	void ContentModule::addSearchPath(const Ogre::String& path, const Ogre::String& resourceGroup) const
+    void ContentModule::addSearchPath(const Ogre::String& path, const Ogre::String& resourceGroup) const
     {
-        try 
+        try
         {
-            ResourceGroupManager::getSingleton().addResourceLocation(path, 
+            ResourceGroupManager::getSingleton().addResourceLocation(path,
                 "FileSystem", resourceGroup);
-        } 
-        catch(...) 
+        }
+        catch(...)
         {
-			// and forget
-		}
+            // and forget
+        }
     }
 
-	void ContentModule::precreateMeshes() const
+    void ContentModule::precreateMeshes() const
     {
         StringVectorPtr meshes = ResourceGroupManager::getSingleton()
             .findResourceNames(getId(), "*.mesh");
@@ -172,7 +172,7 @@
         }
     }
 
-	void ContentModule::unload()
+    void ContentModule::unload()
     {
         //TODO: unloadModule
         mLoaded = false;

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -58,7 +58,7 @@
         mDefaultActiveModule(""),
         mClockStartTime(),
         mDeveloperMode(false),
-		mInitialized(false),
+        mInitialized(false),
         mCoreEventCaster(),
         mDefaultTechniques(),
         mOgreRoot(NULL),
@@ -70,16 +70,17 @@
         mActorManager(NULL),
         mGameEventManager(NULL),
         mConfigurationManager(NULL),
-		mSoundManager(NULL),
+        mSoundManager(NULL),
         mDebugVisualsManager(NULL),
-        mJobScheduler(NULL)
+        mJobScheduler(NULL),
+        mRenderWindow(NULL)
     {
         initializeCoreSubsystem();
     }
 
     CoreSubsystem::~CoreSubsystem()
     {
-		mCoreEventCaster.removeEventListeners();
+        mCoreEventCaster.removeEventListeners();
 
         delete mWorld;
         delete mGameLoop;
@@ -92,34 +93,34 @@
         delete mXmlResourceManager;
         delete mScriptWrapper;
         delete mConfigurationManager;
-		delete mSoundManager;
+        delete mSoundManager;
         delete mOgreRoot;
         delete mRubyInterpreter;
-	}
+    }
 
     void CoreSubsystem::startCore()
     {
         loadPlugins();
 
-		mInitialized = true;
+        mInitialized = true;
 
-		if (mDefaultActiveModule == "")
-		{
-			mDefaultActiveModule = "intro"; ///@fixme replace by last active
-		}
+        if (mDefaultActiveModule == "")
+        {
+            mDefaultActiveModule = "intro"; ///@fixme replace by last active
+        }
 
 
-		ContentModule* mod = getModule(mDefaultActiveModule);
-		if (mod == NULL)
-		{
-			Throw(rl::RuntimeException, "Module "+mDefaultActiveModule+" not found");
-		}
-		else
-		{
-			startAdventureModule(mod);
-		}
+        ContentModule* mod = getModule(mDefaultActiveModule);
+        if (mod == NULL)
+        {
+            Throw(rl::RuntimeException, "Module "+mDefaultActiveModule+" not found");
+        }
+        else
+        {
+            startAdventureModule(mod);
+        }
 
-		mGameLoop->loop();
+        mGameLoop->loop();
 
         mWorld->clearScene();
         unloadPlugins();
@@ -127,95 +128,113 @@
         //mRubyInterpreter->finalizeInterpreter();
     }
 
-    bool CoreSubsystem::setupConfiguration()
+    void CoreSubsystem::setDeveloperMode(bool developerMode)
     {
-        if(Root::getSingleton().restoreConfig()
-            || Root::getSingleton().showConfigDialog())
-        {
-            std::stringstream name;
-            name << "Rastullahs Lockenpracht - ";
-            name << ConfigurationManager::getSingleton().getEngineVersionString() << " ";
-            name << ConfigurationManager::getSingleton().getEngineVersionName() << " [";
-            name << ConfigurationManager::getSingleton().getEngineBuildNumber() << "]";
+        mDeveloperMode = developerMode;
+    }
 
-            Root::getSingleton().initialise(true, name.str() );
-            return true;
-        }
-        else
-        {
-            return false;
-        }
+    bool CoreSubsystem::getDeveloperMode() const
+    {
+        return mDeveloperMode;
     }
 
-	void CoreSubsystem::setDeveloperMode(bool developerMode)
-	{
-		mDeveloperMode = developerMode;
-	}
+    bool CoreSubsystem::isInitialized() const
+    {
+        return mInitialized;
+    }
 
-	bool CoreSubsystem::getDeveloperMode() const
-	{
-		return mDeveloperMode;
-	}
+    Ogre::RenderWindow* CoreSubsystem::getRenderWindow()
+    {
+        return mRenderWindow;
+    }
 
-	bool CoreSubsystem::isInitialized() const
-	{
-		return mInitialized;
-	}
-
     bool CoreSubsystem::initializeCoreSubsystem()
     {
         mConfigurationManager = ConfigurationManager::getSingletonPtr();
-        mOgreRoot = new Root(
-        	mConfigurationManager->getPluginCfgPath(),
-        	mConfigurationManager->getRastullahCfgPath(),
-        	mConfigurationManager->getOgreLogFile()
-        );
+        // By not specifying the first two parameters, OGRE will not try
+        // to load plugins.cfg and ogre.cfg
+        mOgreRoot = new Root("", "", ConfigurationManager::getSingleton().getOgreLogFile());
 
+        // Load Ogre plugins
+        String PluginDir = ConfigurationManager::getSingleton().getOgrePluginDirectory();
+#       if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
+        mOgreRoot->loadPlugin(PluginDir + "/RenderSystem_Direct3D9");
+#       endif
+        mOgreRoot->loadPlugin(PluginDir + "/RenderSystem_GL");
+        mOgreRoot->loadPlugin(PluginDir + "/Plugin_ParticleFX");
+        mOgreRoot->loadPlugin(PluginDir + "/Plugin_OctreeSceneManager");
+
+        // Find out, what Renderer plugins are available
+        RenderSystemList* rsl = mOgreRoot->getAvailableRenderers();
+        RenderSystemList::iterator it;
+
+        for (it = rsl->begin(); it < rsl->end(); it++)
+        {
+            if ((*it)->getName() == ConfigurationManager::getSingleton().getStringSetting(ConfigurationManager::CS_GRAPHICS, "Render System"))
+            {
+                // Select and initialise the render system
+                mOgreRoot->setRenderSystem(*it);
+                mOgreRoot->initialise(false, "");
+            }
+        }
+
         //Root::getSingleton().setFrameSmoothingPeriod(0.5f);
 
         // Muss vor dem Laden der Ressourcen geschehen,
         // weil es sonst sofort angewandt wird.
         MeshManager::getSingleton().setBoundsPaddingFactor(0.0);
 
-		// EDIT:
-		LOG_MESSAGE(Logger::CORE,"init");
+        // EDIT:
+        LOG_MESSAGE(Logger::CORE,"init");
 
-        bool carryOn = setupConfiguration();
+        std::stringstream name;
+        name << "Rastullahs Lockenpracht - ";
+        name << ConfigurationManager::getSingleton().getEngineVersionString() << " ";
+        name << ConfigurationManager::getSingleton().getEngineVersionName() << " [";
+        name << ConfigurationManager::getSingleton().getEngineBuildNumber() << "]";
 
-        if (!carryOn)
+        // Get width and height of the RenderWindow from the "Video Mode" setting
+        Ogre::String VideoMode = ConfigurationManager::getSingleton().getStringSetting(ConfigurationManager::CS_GRAPHICS, "Video Mode");
+        int temp = VideoMode.find("x");
+        int width = Ogre::StringConverter::parseInt(VideoMode.substr(0, temp));
+        int height = Ogre::StringConverter::parseInt(VideoMode.substr(temp + 1, VideoMode.size()));
+
+        mRenderWindow = mOgreRoot->createRenderWindow(name.str(), width, height, ConfigurationManager::getSingleton().getBoolSetting(ConfigurationManager::CS_GRAPHICS, "Fullscreen"), &ConfigurationManager::getSingleton().getGraphicSettings());
+
+        if (!mRenderWindow)
             return false;
 
-		mGameLoop = new GameLoop();
+        mGameLoop = new GameLoop();
         LOG_MESSAGE(Logger::CORE,"GameLoopmanager erzeugt");
 
-		mScriptWrapper = new ScriptWrapper();
-		LOG_MESSAGE(Logger::CORE,"Skriptwrapper erzeugt");
+        mScriptWrapper = new ScriptWrapper();
+        LOG_MESSAGE(Logger::CORE,"Skriptwrapper erzeugt");
         // TODO: muss l?schbar werden.
-		mRubyInterpreter = new RubyInterpreter();
-		LOG_MESSAGE(Logger::CORE,"RubyInterpreter erzeugt");
-		mRubyInterpreter->initializeInterpreter();
-		LOG_MESSAGE(Logger::CORE,"RubyInterpreter initialisiert");
+        mRubyInterpreter = new RubyInterpreter();
+        LOG_MESSAGE(Logger::CORE,"RubyInterpreter erzeugt");
+        mRubyInterpreter->initializeInterpreter();
+        LOG_MESSAGE(Logger::CORE,"RubyInterpreter initialisiert");
 
         mActorManager = new ActorManager();
-		LOG_MESSAGE(Logger::CORE,"Aktormanager erzeugt");
+        LOG_MESSAGE(Logger::CORE,"Aktormanager erzeugt");
 
-		mSoundManager = new SoundManager();
-		LOG_MESSAGE(Logger::CORE,"SoundManager erzeugt");
+        mSoundManager = new SoundManager();
+        LOG_MESSAGE(Logger::CORE,"SoundManager erzeugt");
 
-		initializeResources();
+        initializeResources();
 
         // Set default mipmap level (NB some APIs ignore this)
         //TODO: In Config-Datei verlagern
         TextureManager::getSingleton().setDefaultNumMipmaps(5);
         MaterialManager::getSingleton().setDefaultTextureFiltering(TFO_TRILINEAR);
         MaterialManager::getSingleton().setDefaultAnisotropy(
-            ConfigurationManager::getSingleton().getIntSetting("max_anisotropy",1));
+            ConfigurationManager::getSingleton().getIntSetting(ConfigurationManager::CS_GRAPHICS, "Max Anisotropy"));
 
 
         mWorld = new DotSceneOctreeWorld();
-		mActorManager->setWorld(mWorld);
+        mActorManager->setWorld(mWorld);
 
-		mPhysicsManager = new PhysicsManager();
+        mPhysicsManager = new PhysicsManager();
         GameLoop::getSingleton().addTask(mPhysicsManager, GameLoop::TG_PHYSICS);
 
         mAnimationManager = new AnimationManager();
@@ -230,32 +249,24 @@
         mJobScheduler = new JobScheduler();
         GameLoop::getSingleton().addTask(mJobScheduler, GameLoop::TG_GRAPHICS);
 
-		return true;
+        return true;
     }
 
     void CoreSubsystem::initializeResources()
     {
         mXmlResourceManager = new XmlResourceManager();
 
-		// Fuer Configs die keinem Typ zugeordnet sind,
+        // Fuer Configs die keinem Typ zugeordnet sind,
         // und die per kompletten Verezeichnis erfragt werden
-		ResourceGroupManager::getSingleton().addResourceLocation(
-			ConfigurationManager::getSingleton().
-				getModulesRootDirectory(),
-            "FileSystem",
-			ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
-
         ResourceGroupManager::getSingleton().addResourceLocation(
-			ConfigurationManager::getSingleton().
-                getConfigModulePath(),
+            ConfigurationManager::getSingleton().
+                getModulesRootDirectory(),
             "FileSystem",
-			ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
+            ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
 
-        mConfigurationManager->loadConfig();
-
         // Laden mittels eines Configfiles
         ConfigFile cf;
-        cf.load(mConfigurationManager->getModulesCfgPath());
+        cf.load(mConfigurationManager->getModulesCfgFile());
 
         // Durchgehen der einzelnen Settings
         ConfigFile::SettingsIterator i = cf.getSettingsIterator();
@@ -265,101 +276,114 @@
             key = i.peekNextKey();
             value = i.getNext();
 
-			if (key.compare("module") == 0)
+            if (key.compare("module") == 0)
             {
-				mRubyInterpreter->executeFile(ContentModule::getInitFile(value));
+                mRubyInterpreter->executeFile(ContentModule::getInitFile(value));
 
-				ContentModule* module = getModule(value);
+                ContentModule* module = getModule(value);
 
-				if (module == NULL)
-				{
-					Throw(
-						rl::RuntimeException,
-						ContentModule::getInitFile(value) + " did not register module '"+value+"'");
-				}
-				//else
-				//{
-				//	if (module->isCommon())
-				//	{
-				//		module->initializeTextures();
-				//		module->initialize();
-				//	}
-				//}
+                if (module == NULL)
+                {
+                    Throw(
+                        rl::RuntimeException,
+                        ContentModule::getInitFile(value) + " did not register module '"+value+"'");
+                }
+                //else
+                //{
+                //    if (module->isCommon())
+                //    {
+                //        module->initializeTextures();
+                //        module->initialize();
+                //    }
+                //}
             }
         }
     }
 
-	ContentModule* CoreSubsystem::getModule(const String& moduleId) const
-	{
-		ModuleMap::const_iterator moduleIt = mModules.find(moduleId);
+    ContentModule* CoreSubsystem::getModule(const String& moduleId) const
+    {
+        ModuleMap::const_iterator moduleIt = mModules.find(moduleId);
 
-		if (moduleIt != mModules.end())
-		{
-			return (*moduleIt).second;
-		}
-		else
-		{
-			return NULL;
-		}
-	}
+        if (moduleIt != mModules.end())
+        {
+            return (*moduleIt).second;
+        }
+        else
+        {
+            return NULL;
+        }
+    }
 
-	void CoreSubsystem::registerModule(ContentModule* module)
-	{
-		mModules[module->getId()] = module;
-	}
+    void CoreSubsystem::registerModule(ContentModule* module)
+    {
+        mModules[module->getId()] = module;
+    }
 
-	void CoreSubsystem::updateDefaultScheme()
-	{
-		String tuScheme = mConfigurationManager->getTextureUnitScheme();
+    void CoreSubsystem::updateDefaultScheme()
+    {
+        int numTu = mOgreRoot->getRenderSystem()->getCapabilities()->getNumTextureUnits();
 
-		for (ResourceManager::ResourceMapIterator itMat =
-			MaterialManager::getSingleton().getResourceIterator();
-			itMat.hasMoreElements();)
-		{
-			MaterialPtr mat = itMat.getNext();
-			for (Material::TechniqueIterator itTech =
-				mat->getTechniqueIterator();
-				itTech.hasMoreElements();)
-			{
-				Technique* tech = itTech.getNext();
-				if (tech->getSchemeName() == tuScheme)
-				{
-					tech->setSchemeName(MaterialManager::DEFAULT_SCHEME_NAME);
-					mDefaultTechniques.push_back(tech);
-				}
-				else if (tech->getSchemeName() == MaterialManager::DEFAULT_SCHEME_NAME)
-				{
-					mDefaultTechniques.push_back(tech);
-				}
-			}
-		}
-	}
+        Ogre::String tuScheme;
 
-	void CoreSubsystem::setScheme(const Ogre::String& schemeName)
-	{
-		if (schemeName != MaterialManager::getSingleton().getActiveScheme())
-		{
-			/*for (std::vector<Technique*>::iterator iter = mDefaultTechniques.begin();
-				iter != mDefaultTechniques.end(); ++iter)
-			{
-				Technique* cur = *iter;
-				cur->setSchemeName(schemeName);
-			}*/
+        if (numTu >= 6)
+            tuScheme = "tu6";
+        else if (numTu >= 2)
+            tuScheme = "tu2";
+        else
+            tuScheme = "tu1";
 
-			MaterialManager::getSingleton().setActiveScheme(schemeName);
-		}
-	}
+        LOG_MESSAGE(Logger::CORE,
+            "Found " + Ogre::StringConverter::toString(numTu) + " Texture Units, using "+
+            "alphablending scheme " + tuScheme);
 
+        for (ResourceManager::ResourceMapIterator itMat =
+            MaterialManager::getSingleton().getResourceIterator();
+            itMat.hasMoreElements();)
+        {
+            MaterialPtr mat = itMat.getNext();
+            for (Material::TechniqueIterator itTech =
+                mat->getTechniqueIterator();
+                itTech.hasMoreElements();)
+            {
+                Technique* tech = itTech.getNext();
+                if (tech->getSchemeName() == tuScheme)
+                {
+                    tech->setSchemeName(MaterialManager::DEFAULT_SCHEME_NAME);
+                    mDefaultTechniques.push_back(tech);
+                }
+                else if (tech->getSchemeName() == MaterialManager::DEFAULT_SCHEME_NAME)
+                {
+                    mDefaultTechniques.push_back(tech);
+                }
+            }
+        }
+    }
+
+    void CoreSubsystem::setScheme(const Ogre::String& schemeName)
+    {
+        if (schemeName != MaterialManager::getSingleton().getActiveScheme())
+        {
+            /*for (std::vector<Technique*>::iterator iter = mDefaultTechniques.begin();
+                iter != mDefaultTechniques.end(); ++iter)
+            {
+                Technique* cur = *iter;
+                cur->setSchemeName(schemeName);
+            }*/
+
+            MaterialManager::getSingleton().setActiveScheme(schemeName);
+        }
+    }
+
     void CoreSubsystem::startAdventureModule(ContentModule* module)
     {
         if (mActiveAdventureModule != NULL)
-		{
-	        mActiveAdventureModule->unload();
-		}
+        {
+            mActiveAdventureModule->unload();
+        }
 
         //mCoreEventCaster.dispatchEvent(new DataLoadedEvent(0.0));
 
-		updateDefaultScheme();
+        updateDefaultScheme();
         loadModule(module);
         mActiveAdventureModule = module;
 
@@ -372,16 +396,16 @@
     {
         if (module->getMinimumEngineVersion()
             > ConfigurationManager::getSingleton().getEngineBuildNumber())
-		{
-			Throw(
-				rl::RuntimeException,
-				"Module "
-				+ Ogre::String(module->getName().c_str())
-				+ " needs engine >="
-				+ StringConverter::toString(module->getMinimumEngineVersion())
-				+ " but engine is "
-				+ StringConverter::toString(ConfigurationManager::getSingleton().getEngineBuildNumber()));
-		}
+        {
+            Throw(
+                rl::RuntimeException,
+                "Module "
+                + Ogre::String(module->getName().c_str())
+                + " needs engine >="
+                + StringConverter::toString(module->getMinimumEngineVersion())
+                + " but engine is "
+                + StringConverter::toString(ConfigurationManager::getSingleton().getEngineBuildNumber()));
+        }
 
         StringVector deps = module->getDependencies();
         for (StringVector::const_iterator depsIt = deps.begin(); depsIt != deps.end(); depsIt++)
@@ -390,9 +414,9 @@
             ModuleMap::iterator modIt = mModules.find(depName);
             if (modIt == mModules.end())
             {
-			    Throw(
-				    rl::RuntimeException,
-				    "Depedency Module " + depName
+                Throw(
+                    rl::RuntimeException,
+                    "Depedency Module " + depName
                     + " needed by " + Ogre::String(module->getName().c_str())
                     + " not found.");
             }
@@ -411,7 +435,7 @@
         module->initializeTextures();
         module->initialize();
 
-		ResourceGroupManager::getSingleton().initialiseResourceGroup(module->getId());
+        ResourceGroupManager::getSingleton().initialiseResourceGroup(module->getId());
         module->precreateMeshes();
 
         if (module->isCommon())
@@ -424,15 +448,15 @@
             "Module " + module->getName() + " initialized.");
     }
 
-	void CoreSubsystem::setDefaultActiveModule(const Ogre::String& module)
-	{
-		mDefaultActiveModule = module;
-	}
+    void CoreSubsystem::setDefaultActiveModule(const Ogre::String& module)
+    {
+        mDefaultActiveModule = module;
+    }
 
-	const Ogre::String& CoreSubsystem::getDefaultActiveModule() const
-	{
-		return mDefaultActiveModule;
-	}
+    const Ogre::String& CoreSubsystem::getDefaultActiveModule() const
+    {
+        return mDefaultActiveModule;
+    }
 
     World* CoreSubsystem::getWorld()
     {
@@ -447,8 +471,7 @@
 
     void CoreSubsystem::makeScreenshot( const String& sName )
     {
-        Ogre::Root::getSingleton().getAutoCreatedWindow()->
-            writeContentsToTimestampedFile(sName, ".jpg");
+        mRenderWindow->writeContentsToTimestampedFile(sName, ".jpg");
     }
 
     ContentModule* CoreSubsystem::getActiveAdventureModule() const
@@ -456,13 +479,13 @@
         return mActiveAdventureModule;
     }
 
-	const ModuleMap& CoreSubsystem::getAllModules() const
-	{
-		return mModules;
-	}
+    const ModuleMap& CoreSubsystem::getAllModules() const
+    {
+        return mModules;
+    }
 
     void CoreSubsystem::loadMap(const String type, const String filename,
-    	const String module, const String startupScript)
+        const String module, const String startupScript)
     {
         mWorld->loadScene(filename, module);
         if (startupScript.length() > 0) mRubyInterpreter->executeFile(startupScript);
@@ -470,24 +493,23 @@
 
     void CoreSubsystem::loadPlugins()
     {
-		mSoundManager->loadConf(rl::ConfigurationManager::getSingleton().getSoundCfgPath());
-		LOG_MESSAGE(Logger::CORE, "Soundkonfiguration geladen");
+        mSoundManager->applySettings(rl::ConfigurationManager::getSingleton().getSoundSettings());
+        LOG_MESSAGE(Logger::CORE, "Soundeinstellungen geladen");
     }
 
     void CoreSubsystem::unloadPlugins()
     {
-        mSoundManager->saveConf(rl::ConfigurationManager::getSingleton().getSoundCfgPath());
-		LOG_MESSAGE(Logger::CORE, "Soundkonfiguration gespeichert.");
         mSoundManager->unloadAllDrivers();
+        LOG_MESSAGE(Logger::CORE, "Soundtreiber entladen");
     }
 
-	void CoreSubsystem::addCoreEventListener(rl::CoreEventListener *listener)
-	{
-		mCoreEventCaster.addEventListener(listener);
-	}
+    void CoreSubsystem::addCoreEventListener(rl::CoreEventListener *listener)
+    {
+        mCoreEventCaster.addEventListener(listener);
+    }
 
-	void CoreSubsystem::removeCoreEventListener(CoreEventListener* listener)
+    void CoreSubsystem::removeCoreEventListener(CoreEventListener* listener)
     {
-		mCoreEventCaster.removeEventListener(listener);
+        mCoreEventCaster.removeEventListener(listener);
     }
 }

Modified: rl/trunk/engine/core/src/DotSceneLoader.cpp
===================================================================
--- rl/trunk/engine/core/src/DotSceneLoader.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/src/DotSceneLoader.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -47,112 +47,129 @@
 using namespace Ogre;
 
 namespace rl {
-	using XERCES_CPP_NAMESPACE::DOMDocument;
+    using XERCES_CPP_NAMESPACE::DOMDocument;
 
     DotSceneLoader::DotSceneLoader(const string& filename, const string& resourceGroup)
         : mSceneName(filename),
           mResourceGroup(resourceGroup),
-		  mStaticNodes(),
-		  mRenderingDistance(ActorManager::getSingleton().getDefaultActorRenderingDistance()),
-		  mStaticgeomRenderingDistances(),
-		  mStaticgeomBatchSizes(),
+          mStaticNodes(),
+          mRenderingDistance(ActorManager::getSingleton().getDefaultActorRenderingDistance()),
+          mStaticgeomRenderingDistances(),
+          mStaticgeomBatchSizes(),
           mRessource(NULL),
           mParser(NULL),
           mErrorCount(0)
-	{
+    {
         srand(static_cast<unsigned int>(time(NULL)));
-	}
+    }
 
-	DotSceneLoader::~DotSceneLoader()
-	{      
+    DotSceneLoader::~DotSceneLoader()
+    {
         if (mRessource->isLoaded())
         {
             XmlResourceManager::getSingleton().unload(mSceneName);
             XmlResourceManager::getSingleton().remove(mRessource->getHandle());
         }
-	}
+    }
 
-	void DotSceneLoader::initializeScene(SceneManager* sceneManager)
-	{
-		XMLPlatformUtils::Initialize();
-		XmlHelper::initializeTranscoder();
+    void DotSceneLoader::initializeScene(SceneManager* sceneManager)
+    {
+        XMLPlatformUtils::Initialize();
+        XmlHelper::initializeTranscoder();
 
-		LOG_MESSAGE(Logger::CORE, "Loading Scene from " + mSceneName);
-        DOMDocument* doc = openSceneFile();            
+        LOG_MESSAGE(Logger::CORE, "Loading Scene from " + mSceneName);
+        DOMDocument* doc = openSceneFile();
 
-		// Durch alle Unterelemente iterieren
-		DOMNode* child = doc->getDocumentElement()->getFirstChild();
+        // Durch alle Unterelemente iterieren
+        DOMNode* child = doc->getDocumentElement()->getFirstChild();
 
-		while(child != NULL)
-		{
-			// Ein Node
+        while(child != NULL)
+        {
+            // Ein Node
             if (XMLString::compareIString(child->getNodeName(), AutoXMLCh("userData").data()) == 0 )
-			{
-				processSceneUserData(static_cast<DOMElement*>(child));
-			}
-			child = child->getNextSibling();
-		} 
+            {
+                processSceneUserData(static_cast<DOMElement*>(child));
+            }
+            child = child->getNextSibling();
+        }
 
-		LOG_DEBUG(Logger::CORE, " Beginne parsen der Unterelemente");
-		DOMElement* nodes = XmlHelper::getChildNamed(doc->getDocumentElement(), "nodes");
+        LOG_DEBUG(Logger::CORE, " Beginne parsen der Unterelemente");
+        DOMElement* nodes = XmlHelper::getChildNamed(doc->getDocumentElement(), "nodes");
 
-		// Eine .scene wird in einem SceneNode mit dem Namen der .scene befestigt
-		mSceneNode = sceneManager->getRootSceneNode()->createChildSceneNode(mSceneName);
-		processNodes(nodes, sceneManager, mSceneNode);
+        // Eine .scene wird in einem SceneNode mit dem Namen der .scene befestigt
+        mSceneNode = sceneManager->getRootSceneNode()->createChildSceneNode(mSceneName);
+        processNodes(nodes, sceneManager, mSceneNode);
 
+        // Find out, if static geometry should be used
+        Ogre::String temp = ConfigurationManager::getSingleton().getStringSetting(ConfigurationManager::CS_GRAPHICS, "Use Static Geometry");
+        bool useStaticGeometry;
 
-        if (ConfigurationManager::getSingleton().shouldUseStaticGeometry())
-        {    
-			for(std::map<int,Ogre::SceneNode*>::iterator it = mStaticNodes.begin();
-				it != mStaticNodes.end();) 
-			{
-				Ogre::SceneNode* staticNode = it->second;
-				string staticName = Ogre::StringConverter::toString(it->first);
-				Ogre::Real renderDist = mRenderingDistance;
-				Ogre::Real batchSize = 25.0;
+        if (temp == "yes")
+        {
+            useStaticGeometry = true;
+        }
+        else if (temp == "no")
+        {
+            useStaticGeometry = false;
+        }
+        else
+        {
+            // Check, if Renderer supports vertex buffer
+            useStaticGeometry = Ogre::Root::getSingleton().getRenderSystem()->getCapabilities()->hasCapability(Ogre::RSC_VBO);
+        }
 
-				if (mStaticgeomRenderingDistances.find(it->first) != mStaticgeomRenderingDistances.end())
-					renderDist = mStaticgeomRenderingDistances[it->first];
-				if (mStaticgeomBatchSizes.find(it->first) != mStaticgeomBatchSizes.end())
-					batchSize = mStaticgeomBatchSizes[it->first];
+        if (useStaticGeometry)
+        {
+            for(std::map<int,Ogre::SceneNode*>::iterator it = mStaticNodes.begin();
+                it != mStaticNodes.end();)
+            {
+                Ogre::SceneNode* staticNode = it->second;
+                string staticName = Ogre::StringConverter::toString(it->first);
+                Ogre::Real renderDist = mRenderingDistance;
+                Ogre::Real batchSize = 25.0;
 
-				StaticGeometry* staticGeom = sceneManager->createStaticGeometry(mSceneName + staticName );
-				
-				staticGeom->setRenderingDistance(renderDist);
-				staticGeom->addSceneNode(staticNode);
-				staticGeom->setRegionDimensions(batchSize * Vector3::UNIT_SCALE);
-				// Statische Geometrie bauen
-				staticGeom->build();
-				// Nicht mehr den Original-Knoten rendern, da dieser noch erhalten ist.			
-				staticNode->setVisible(false);
-				staticNode->removeAndDestroyAllChildren();
-				sceneManager->destroySceneNode(staticNode->getName());				
-				staticNode = NULL;
-				LOG_DEBUG(Logger::CORE, " Statische Geometrie "+staticName+" erstellt");
-				++it;
-			}
+                if (mStaticgeomRenderingDistances.find(it->first) != mStaticgeomRenderingDistances.end())
+                    renderDist = mStaticgeomRenderingDistances[it->first];
+                if (mStaticgeomBatchSizes.find(it->first) != mStaticgeomBatchSizes.end())
+                    batchSize = mStaticgeomBatchSizes[it->first];
+
+                StaticGeometry* staticGeom = sceneManager->createStaticGeometry(mSceneName + staticName );
+
+                staticGeom->setRenderingDistance(renderDist);
+                staticGeom->addSceneNode(staticNode);
+                staticGeom->setRegionDimensions(batchSize * Vector3::UNIT_SCALE);
+                // Statische Geometrie bauen
+                staticGeom->build();
+                // Nicht mehr den Original-Knoten rendern, da dieser noch erhalten ist.
+                staticNode->setVisible(false);
+                staticNode->removeAndDestroyAllChildren();
+                sceneManager->destroySceneNode(staticNode->getName());
+                staticNode = NULL;
+                LOG_DEBUG(Logger::CORE, " Statische Geometrie "+staticName+" erstellt");
+                ++it;
+            }
         }
         else
             LOG_DEBUG(Logger::CORE, " Keine statischen Geometrien erstellt");
-        
+
         delete mParser;
-		XMLPlatformUtils::Terminate();		
-		LOG_DEBUG(Logger::CORE, "Szenenbeschreibung aus " + mSceneName +" fertig geparst");
-	}
+        XMLPlatformUtils::Terminate();
+        LOG_DEBUG(Logger::CORE, "Szenenbeschreibung aus " + mSceneName +" fertig geparst");
+    }
 
-	DOMDocument* DotSceneLoader::openSceneFile()
-	{
-		mParser = new XercesDOMParser();
+    DOMDocument* DotSceneLoader::openSceneFile()
+    {
+        mParser = new XercesDOMParser();
         mParser->setValidationScheme(XercesDOMParser::Val_Auto);
         mParser->setDoNamespaces(true);
         mParser->setErrorHandler(this);
-		
+
         try
         {
-		    mRessource = 
-			    XmlResourceManager::getSingleton().create(
-			    mSceneName, 
-		   	    mResourceGroup);
+            mRessource =
+                XmlResourceManager::getSingleton().create(
+                mSceneName,
+                   mResourceGroup);
         }
         catch(Ogre::Exception)
         {
@@ -171,36 +188,36 @@
         if (mErrorCount > 0)
             Throw(RuntimeException, "File '"+mSceneName+"' could not be parsed.");
 
-		DOMDocument* doc = mParser->getDocument();     
+        DOMDocument* doc = mParser->getDocument();
 
         return doc;
-	}
+    }
 
-	// Iteriert durch die einzelnen Nodes
-	void DotSceneLoader::processNodes(DOMElement* rootNodesXml, SceneManager* sceneManager, 
-		Ogre::SceneNode* parentNode)
-	{
-		if (rootNodesXml == NULL)
-			return;
-		if (parentNode == NULL)
-			Throw(NullPointerException, "parentNode darf nicht null sein");
-	
+    // Iteriert durch die einzelnen Nodes
+    void DotSceneLoader::processNodes(DOMElement* rootNodesXml, SceneManager* sceneManager,
+        Ogre::SceneNode* parentNode)
+    {
+        if (rootNodesXml == NULL)
+            return;
+        if (parentNode == NULL)
+            Throw(NullPointerException, "parentNode darf nicht null sein");
 
-		// Durch alle Unterelemente iterieren
-		DOMNode* child = rootNodesXml->getFirstChild();
 
-		while(child != NULL)
-		{
-			// Ein Node
+        // Durch alle Unterelemente iterieren
+        DOMNode* child = rootNodesXml->getFirstChild();
+
+        while(child != NULL)
+        {
+            // Ein Node
             if (XMLString::compareIString(child->getNodeName(), AutoXMLCh("node").data()) == 0 )
-			{
-				processNode(static_cast<DOMElement*>(child), sceneManager, parentNode, NULL);
-			}
-			child = child->getNextSibling();
-		} 
-	}
+            {
+                processNode(static_cast<DOMElement*>(child), sceneManager, parentNode, NULL);
+            }
+            child = child->getNextSibling();
+        }
+    }
 
-	// Befasst sich mit einem Node
+    // Befasst sich mit einem Node
     void DotSceneLoader::processNode(DOMElement* rootNodeXml, SceneManager* sceneManager, Ogre::SceneNode* parentNode, NodeUserData* parentUserData)
     {
         if (rootNodeXml == NULL)
@@ -208,7 +225,7 @@
         if (parentNode == NULL)
             Throw(NullPointerException, "parentNode darf nicht null sein");
 
-        string nodeName = XmlHelper::getAttributeValueAsStdString(rootNodeXml, 
+        string nodeName = XmlHelper::getAttributeValueAsStdString(rootNodeXml,
                         "name");
 
         Ogre::SceneNode* newNode;
@@ -224,17 +241,17 @@
             {
                 // Name schon vergeben
                 newNode = parentNode->createChildSceneNode();
-                LOG_DEBUG(Logger::CORE, 
+                LOG_DEBUG(Logger::CORE,
                     " NodeName '"+nodeName+"' war schon vergeben! Es wurde der Name '"+newNode->getName()+"' benutzt.");
             }
         }
         else
         {
             newNode = parentNode->createChildSceneNode();
-        }	
+        }
 
-        LOG_DEBUG(Logger::CORE, 
-                    " Node '"+newNode->getName()+"' als Unterknoten von '"+parentNode->getName()+"' erstellt.");		
+        LOG_DEBUG(Logger::CORE,
+                    " Node '"+newNode->getName()+"' als Unterknoten von '"+parentNode->getName()+"' erstellt.");
 
 
         NodeUserData userData;
@@ -260,25 +277,25 @@
 
         mCollisions.clear();
         DOMNode* child = rootNodeXml->getFirstChild();
-        DOMNode *childScale = NULL, *childPosition = NULL, 
+        DOMNode *childScale = NULL, *childPosition = NULL,
         *childRotation = NULL;
         // Durch alle Unterelemente iterieren und gefundenes speichern
         while(child != NULL)
         {
             // Ein selbstdefinierter Bereich
-            if (XMLString::compareIString(child->getNodeName(), 
+            if (XMLString::compareIString(child->getNodeName(),
                 AutoXMLCh("userData").data()) == 0)
             {
                 // UserData direkt auslesen
                 processNodeUserData(static_cast<DOMElement*>(child) , &userData);
             }
-            else if (XMLString::compareIString(child->getNodeName(), 
+            else if (XMLString::compareIString(child->getNodeName(),
                      AutoXMLCh("position").data()) == 0)
                 childPosition = child;//rootNodeXml->removeChild(child);
-            else if (XMLString::compareIString(child->getNodeName(), 
+            else if (XMLString::compareIString(child->getNodeName(),
                      AutoXMLCh("rotation").data()) == 0)
                 childRotation = child;//rootNodeXml->removeChild(child);
-            else if (XMLString::compareIString(child->getNodeName(), 
+            else if (XMLString::compareIString(child->getNodeName(),
                      AutoXMLCh("scale").data()) == 0)
                 childScale = child;//rootNodeXml->removeChild(child);
 
@@ -297,7 +314,7 @@
             // Existiert noch nicht
             if (mStaticNodes.find(userData.staticgeom_group) == mStaticNodes.end())
             {
-                mStaticNodes[userData.staticgeom_group] = 
+                mStaticNodes[userData.staticgeom_group] =
                 sceneManager->getRootSceneNode()->createChildSceneNode(
                 mSceneName+"_static_"+Ogre::StringConverter::toString(userData.staticgeom_group));
             }
@@ -339,13 +356,13 @@
         while(child != NULL)
         {
             // geschachteltes weiteres Node
-            if (XMLString::compareIString(child->getNodeName(), 
+            if (XMLString::compareIString(child->getNodeName(),
                 AutoXMLCh("node").data()) == 0)
                 processNode(static_cast<DOMElement*>(child), sceneManager, newNode, &userData);
             // Eine Entity
-            else if (XMLString::compareIString(child->getNodeName(), 
+            else if (XMLString::compareIString(child->getNodeName(),
                      AutoXMLCh("entity").data()) == 0)
-                processEntity(static_cast<DOMElement*>(child), 
+                processEntity(static_cast<DOMElement*>(child),
                                 sceneManager,
                                 newNode,
                                 userData.renderingdistance,
@@ -365,11 +382,11 @@
         while(child != NULL)
         {
             // Ein selbstdefinierter Bereich
-            if (XMLString::compareIString(child->getNodeName(), 
+            if (XMLString::compareIString(child->getNodeName(),
                 AutoXMLCh("property").data()) == 0)
             {
                 DOMElement* propertyXml = static_cast<DOMElement*>(child);
-                
+
                 PropertyEntry entry = propertyReader->processProperty(propertyXml);
 
                 try
@@ -391,19 +408,19 @@
                 }
                 catch(...)
                 {
-                    LOG_DEBUG(Logger::CORE, 
+                    LOG_DEBUG(Logger::CORE,
                         " > Parse Error beim ?bernehmen der Property '"+entry.first+"'!");
                 }
 
             }
             // Manuell definiertes LOD
-            else if (XMLString::compareIString(child->getNodeName(), 
+            else if (XMLString::compareIString(child->getNodeName(),
                 AutoXMLCh("manualLOD").data()) == 0)
             {
                 DOMElement* lodXml = static_cast<DOMElement*>(child);
-                string meshName = XmlHelper::getAttributeValueAsStdString(lodXml, 
+                string meshName = XmlHelper::getAttributeValueAsStdString(lodXml,
                     "mesh");
-				
+
                 try
                 {
                     Ogre::MeshPtr mesh = Ogre::MeshManager::getSingleton().getByName(meshName);
@@ -416,8 +433,8 @@
 
                     // Durch alle Unterelemente iterieren, um die LODs zu finden
                     while(lodchild != NULL)
-                    {						
-                        if (XMLString::compareIString(lodchild->getNodeName(), 
+                    {
+                        if (XMLString::compareIString(lodchild->getNodeName(),
                             AutoXMLCh("LOD").data()) == 0)
                         {
                             loddist = 0.0;
@@ -426,15 +443,15 @@
                             try
                             {
                                 lodXml = static_cast<DOMElement*>(lodchild);
-                                loddist = XmlHelper::getAttributeValueAsReal(lodXml, 
+                                loddist = XmlHelper::getAttributeValueAsReal(lodXml,
                                     "distance");
-                                lodmeshName = XmlHelper::getAttributeValueAsStdString(lodXml, 
+                                lodmeshName = XmlHelper::getAttributeValueAsStdString(lodXml,
                                     "mesh");
 
                                 if (lodmeshName.length() > 0 && loddist > 0)
                                 {
                                     mesh->createManualLodLevel(loddist, lodmeshName);
-                                    LOG_DEBUG(Logger::CORE, 
+                                    LOG_DEBUG(Logger::CORE,
                                         " LOD f?r bei '"+Ogre::StringConverter::toString(loddist)+
                                         "' als '"+lodmeshName+"' gesetzt!");
                                 }
@@ -444,10 +461,10 @@
 
                         lodchild = lodchild->getNextSibling();
                     }
-				}
+                }
                 catch(...)
                 {
-                    LOG_MESSAGE(Logger::CORE, 
+                    LOG_MESSAGE(Logger::CORE,
                         " > Parse Error beim Setzen der LOD f?r '"+meshName+"'!");
                 }
             }
@@ -455,9 +472,9 @@
         }
 
         delete propertyReader;
-	}
+    }
 
-    void DotSceneLoader::processNodeUserData(XERCES_CPP_NAMESPACE::DOMElement* rootUserDataXml, 
+    void DotSceneLoader::processNodeUserData(XERCES_CPP_NAMESPACE::DOMElement* rootUserDataXml,
         NodeUserData* userData)
     {
         DOMNode* child = rootUserDataXml->getFirstChild();
@@ -468,7 +485,7 @@
         while(child != NULL)
         {
             // Ein selbstdefinierter Bereich
-            if (XMLString::compareIString(child->getNodeName(), 
+            if (XMLString::compareIString(child->getNodeName(),
                 AutoXMLCh("property").data()) == 0)
             {
                 DOMElement* propertyXml = static_cast<DOMElement*>(child);
@@ -487,12 +504,12 @@
                 }
                 catch(...)
                 {
-                    LOG_MESSAGE(Logger::CORE, 
+                    LOG_MESSAGE(Logger::CORE,
                         " > Parse Error beim ?bernehmen der Property '"+entry.first+"'!");
                 }
 
             }
-            else if (XMLString::compareIString(child->getNodeName(), 
+            else if (XMLString::compareIString(child->getNodeName(),
                         AutoXMLCh("collisions").data()) == 0)
                     processCollisions(static_cast<DOMElement*> (child));
 
@@ -539,17 +556,17 @@
             {
                 if (childChild->getNodeType() == DOMNode::ELEMENT_NODE)
                 {
-                    if (XMLString::compareIString(childChild->getNodeName(), 
+                    if (XMLString::compareIString(childChild->getNodeName(),
                         AutoXMLCh("scale").data()) == 0)
                         scale = processScale(static_cast<DOMElement*>(childChild));
-                    else if (XMLString::compareIString(childChild->getNodeName(), 
+                    else if (XMLString::compareIString(childChild->getNodeName(),
                              AutoXMLCh("offset").data()) == 0)
                         offset = processPosition(static_cast<DOMElement*>(childChild));
-                    else if (XMLString::compareIString(childChild->getNodeName(), 
+                    else if (XMLString::compareIString(childChild->getNodeName(),
                              AutoXMLCh("rotation").data()) == 0)
                         rotation = processRotation(static_cast<DOMElement*>(childChild));
 
-                    else if (XMLString::compareIString(childChild->getNodeName(), 
+                    else if (XMLString::compareIString(childChild->getNodeName(),
                              AutoXMLCh("vertices").data()) == 0)
                     {
                         DOMNode *childChildChild = static_cast<DOMElement*>(childChild)->getFirstChild();
@@ -557,7 +574,7 @@
                         {
                             if (childChild->getNodeType() == DOMNode::ELEMENT_NODE)
                             {
-                                if (XMLString::compareIString(childChildChild->getNodeName(), 
+                                if (XMLString::compareIString(childChildChild->getNodeName(),
                                     AutoXMLCh("vertex").data()) == 0)
                                 {
                                     bool error = false;
@@ -606,7 +623,7 @@
                     size.z < PhysicsManager::NEWTON_GRID_WIDTH ||
                     vertcount < 4)
                 {
-                    LOG_MESSAGE(Logger::CORE, 
+                    LOG_MESSAGE(Logger::CORE,
                         " physical_body 'convexhull' in <collisions> konnte nicht erstellt werden; der K?rper ist zu klein!");
 
                     // Minimale Gr??e verwenden
@@ -616,10 +633,10 @@
                         size.y = PhysicsManager::NEWTON_GRID_WIDTH;
                     if (size.z < PhysicsManager::NEWTON_GRID_WIDTH)
                         size.z = PhysicsManager::NEWTON_GRID_WIDTH;
-                        
+
                     collision = OgreNewt::CollisionPtr(new OgreNewt::CollisionPrimitives::Box(
                                      thisWorld, size, rotation, offset));
-                    
+
                     LOG_MESSAGE(Logger::CORE, " stattdessen physical_body 'box' erstellt. ");
                 }
                 else
@@ -746,7 +763,7 @@
 */
                 else
                 {
-                    LOG_MESSAGE(Logger::CORE, 
+                    LOG_MESSAGE(Logger::CORE,
                         " > Parse Error beim Erstellen einer Collision; ung?ltiger typ: '"+typeAsString+"' !");
                     collision.setNull();
                     //return OgreNewt::CollisionPtr(NULL);
@@ -763,11 +780,11 @@
         }
     }
 
-	// Eine Entity
-	void DotSceneLoader::processEntity(DOMElement* rootEntityXml,
-		SceneManager* sceneManager, Ogre::SceneNode* parentNode, 
-		Ogre::Real renderingDistance, const std::string &physical_body)
-	{
+    // Eine Entity
+    void DotSceneLoader::processEntity(DOMElement* rootEntityXml,
+        SceneManager* sceneManager, Ogre::SceneNode* parentNode,
+        Ogre::Real renderingDistance, const std::string &physical_body)
+    {
         string entName = XmlHelper::getAttributeValueAsStdString(
             rootEntityXml, "name");
         string meshName = XmlHelper::getAttributeValueAsStdString(
@@ -823,8 +840,8 @@
             Ogre::Vector3 size = (aab.getMaximum() - aab.getMinimum()) * parentNode->getScale();
             bool forceBox = false;
 
-            if ((size.x < PhysicsManager::NEWTON_GRID_WIDTH || 
-                 size.y < PhysicsManager::NEWTON_GRID_WIDTH || 
+            if ((size.x < PhysicsManager::NEWTON_GRID_WIDTH ||
+                 size.y < PhysicsManager::NEWTON_GRID_WIDTH ||
                  size.z < PhysicsManager::NEWTON_GRID_WIDTH) &&
                  physical_body.compare("convexhull") == 0)
             {
@@ -844,7 +861,7 @@
 
             // Pr?fen, ob schon ein identischer Proxy erstellt wurde um diesen erneut zu verwenden
             AlreadyUsedCollision &aucol (mAutoCreatedCollisions[meshName]);
-            if (aucol.Type.compare(physical_body) == 0  && 
+            if (aucol.Type.compare(physical_body) == 0  &&
                 aucol.Scale == parentNode->getScale() &&
                 (!forceBox)) // sicherheitshalber
             {
@@ -932,7 +949,7 @@
 
         // Zur Physik des Levels hinzuf?gen
         if (mCollisions.size() > 0)
-        {                
+        {
             PhysicsManager::getSingleton().addLevelGeometry(newEnt, mCollisions);
             LOG_DEBUG(Logger::CORE, " Entity '"+entName+"' in levelGeometry geladen");
         }
@@ -943,12 +960,12 @@
         {
             mCollisions.pop_back();
         }
-        
+
         // Renderingdistanz berechnen
         if (renderingDistance == mRenderingDistance)
         {
-            Ogre::Real diameter 
-                = (newEnt->getBoundingBox().getMaximum() - newEnt->getBoundingBox().getMinimum()).length();  
+            Ogre::Real diameter
+                = (newEnt->getBoundingBox().getMaximum() - newEnt->getBoundingBox().getMinimum()).length();
 
             // Gerade mal 10cm? => 10m
             if (diameter <= 0.5)
@@ -971,9 +988,9 @@
             newEnt->setRenderingDistance(renderingDistance);
         }
         else
-		    newEnt->setRenderingDistance(renderingDistance);
+            newEnt->setRenderingDistance(renderingDistance);
         newEnt->setCastShadows(false);
-	}
+    }
 
     string DotSceneLoader::getRandomName(const string& baseName)
     {
@@ -983,132 +1000,132 @@
         return rval.str();
     }
 
-	Ogre::Vector3 DotSceneLoader::processPosition(DOMElement* rootPositionXml)
-	{
-		LOG_DEBUG(Logger::CORE, " Position gefunden");
+    Ogre::Vector3 DotSceneLoader::processPosition(DOMElement* rootPositionXml)
+    {
+        LOG_DEBUG(Logger::CORE, " Position gefunden");
 
-		try
-		{
-			if (XmlHelper::hasAttribute(rootPositionXml, "x") && 
-				XmlHelper::hasAttribute(rootPositionXml, "y") && 
-				XmlHelper::hasAttribute(rootPositionXml, "z"))
-			{
-				return Ogre::Vector3(
-					XmlHelper::getAttributeValueAsReal(rootPositionXml, "x"),
-					XmlHelper::getAttributeValueAsReal(rootPositionXml, "y"),
-					XmlHelper::getAttributeValueAsReal(rootPositionXml, "z"));
-			}
-		}
-		catch(...) { }
-         
-		LOG_MESSAGE(Logger::CORE, " > Parse Error beim ?bernehmen der Position! ");
+        try
+        {
+            if (XmlHelper::hasAttribute(rootPositionXml, "x") &&
+                XmlHelper::hasAttribute(rootPositionXml, "y") &&
+                XmlHelper::hasAttribute(rootPositionXml, "z"))
+            {
+                return Ogre::Vector3(
+                    XmlHelper::getAttributeValueAsReal(rootPositionXml, "x"),
+                    XmlHelper::getAttributeValueAsReal(rootPositionXml, "y"),
+                    XmlHelper::getAttributeValueAsReal(rootPositionXml, "z"));
+            }
+        }
+        catch(...) { }
 
-		return Ogre::Vector3::ZERO;
-	}
+        LOG_MESSAGE(Logger::CORE, " > Parse Error beim ?bernehmen der Position! ");
 
+        return Ogre::Vector3::ZERO;
+    }
 
-	Ogre::Vector3 DotSceneLoader::processScale(DOMElement* rootScaleXml)
-	{
-		LOG_DEBUG(Logger::CORE, " Skalierung gefunden");
 
-		try
-		{
-			if (XmlHelper::hasAttribute(rootScaleXml, "x") && 
-				XmlHelper::hasAttribute(rootScaleXml, "y") && 
-				XmlHelper::hasAttribute(rootScaleXml, "z"))
-			{
-				return Ogre::Vector3(
-					XmlHelper::getAttributeValueAsReal(rootScaleXml, "x"),
-					XmlHelper::getAttributeValueAsReal(rootScaleXml, "y"),
-					XmlHelper::getAttributeValueAsReal(rootScaleXml, "z"));
-			}
-		}
+    Ogre::Vector3 DotSceneLoader::processScale(DOMElement* rootScaleXml)
+    {
+        LOG_DEBUG(Logger::CORE, " Skalierung gefunden");
+
+        try
+        {
+            if (XmlHelper::hasAttribute(rootScaleXml, "x") &&
+                XmlHelper::hasAttribute(rootScaleXml, "y") &&
+                XmlHelper::hasAttribute(rootScaleXml, "z"))
+            {
+                return Ogre::Vector3(
+                    XmlHelper::getAttributeValueAsReal(rootScaleXml, "x"),
+                    XmlHelper::getAttributeValueAsReal(rootScaleXml, "y"),
+                    XmlHelper::getAttributeValueAsReal(rootScaleXml, "z"));
+            }
+        }
         catch(...) { }
 
-		LOG_MESSAGE(Logger::CORE, " > Parse Error beim ?bernehmen der Skalierung! ");
+        LOG_MESSAGE(Logger::CORE, " > Parse Error beim ?bernehmen der Skalierung! ");
 
-		return Ogre::Vector3::UNIT_SCALE;
-	}
+        return Ogre::Vector3::UNIT_SCALE;
+    }
 
-	Ogre::Vector3 DotSceneLoader::processVector(DOMElement* rootScaleXml, bool &error)
-	{
-		LOG_DEBUG(Logger::CORE, " Vector gefunden");
+    Ogre::Vector3 DotSceneLoader::processVector(DOMElement* rootScaleXml, bool &error)
+    {
+        LOG_DEBUG(Logger::CORE, " Vector gefunden");
 
-		try
-		{
-			if (XmlHelper::hasAttribute(rootScaleXml, "x") && 
-				XmlHelper::hasAttribute(rootScaleXml, "y") && 
-				XmlHelper::hasAttribute(rootScaleXml, "z"))
-			{
-				error = false;
-				return Ogre::Vector3(
-					XmlHelper::getAttributeValueAsReal(rootScaleXml, "x"),
-					XmlHelper::getAttributeValueAsReal(rootScaleXml, "y"),
-					XmlHelper::getAttributeValueAsReal(rootScaleXml, "z"));
-			}
-		}
+        try
+        {
+            if (XmlHelper::hasAttribute(rootScaleXml, "x") &&
+                XmlHelper::hasAttribute(rootScaleXml, "y") &&
+                XmlHelper::hasAttribute(rootScaleXml, "z"))
+            {
+                error = false;
+                return Ogre::Vector3(
+                    XmlHelper::getAttributeValueAsReal(rootScaleXml, "x"),
+                    XmlHelper::getAttributeValueAsReal(rootScaleXml, "y"),
+                    XmlHelper::getAttributeValueAsReal(rootScaleXml, "z"));
+            }
+        }
         catch(...) { }
 
-		LOG_MESSAGE(Logger::CORE, " > Parse Error beim Lesen eines Vectors! ");
-		error = true;
+        LOG_MESSAGE(Logger::CORE, " > Parse Error beim Lesen eines Vectors! ");
+        error = true;
 
-		return Ogre::Vector3::UNIT_SCALE;
-	}
+        return Ogre::Vector3::UNIT_SCALE;
+    }
 
-	/// @TODO Sollten drei M?glichkeiten sein...
-	Ogre::Quaternion DotSceneLoader::processRotation(DOMElement* rootQuatXml)
-	{
-		LOG_DEBUG(Logger::CORE, " Rotation gefunden");
+    /// @TODO Sollten drei M?glichkeiten sein...
+    Ogre::Quaternion DotSceneLoader::processRotation(DOMElement* rootQuatXml)
+    {
+        LOG_DEBUG(Logger::CORE, " Rotation gefunden");
 
-		try
-		{
-			// Durch w,x,y,z definiert
-			if (XmlHelper::hasAttribute(rootQuatXml, "qw") && 
-				XmlHelper::hasAttribute(rootQuatXml, "qx") && 
-				XmlHelper::hasAttribute(rootQuatXml, "qy") && 
-				XmlHelper::hasAttribute(rootQuatXml, "qz"))
-			{
+        try
+        {
+            // Durch w,x,y,z definiert
+            if (XmlHelper::hasAttribute(rootQuatXml, "qw") &&
+                XmlHelper::hasAttribute(rootQuatXml, "qx") &&
+                XmlHelper::hasAttribute(rootQuatXml, "qy") &&
+                XmlHelper::hasAttribute(rootQuatXml, "qz"))
+            {
 
-				return Ogre::Quaternion(
-					XmlHelper::getAttributeValueAsReal(rootQuatXml, "qw"),
-					XmlHelper::getAttributeValueAsReal(rootQuatXml, "qx"),
-					XmlHelper::getAttributeValueAsReal(rootQuatXml, "qy"),
-					XmlHelper::getAttributeValueAsReal(rootQuatXml, "qz"));
-			}
+                return Ogre::Quaternion(
+                    XmlHelper::getAttributeValueAsReal(rootQuatXml, "qw"),
+                    XmlHelper::getAttributeValueAsReal(rootQuatXml, "qx"),
+                    XmlHelper::getAttributeValueAsReal(rootQuatXml, "qy"),
+                    XmlHelper::getAttributeValueAsReal(rootQuatXml, "qz"));
+            }
 
-			// Durch axisX,axisY,axisZ,angle definiert
-			if (XmlHelper::hasAttribute(rootQuatXml, "angle") &&
-				XmlHelper::hasAttribute(rootQuatXml, "axisX") && 
-				XmlHelper::hasAttribute(rootQuatXml, "axisY") && 
-				XmlHelper::hasAttribute(rootQuatXml, "axisZ"))
-			{
-				return Ogre::Quaternion(
-					Ogre::Degree(XmlHelper::getAttributeValueAsReal(rootQuatXml, "angle")),
-					Ogre::Vector3(
-					XmlHelper::getAttributeValueAsReal(rootQuatXml, "axisX"),
-					XmlHelper::getAttributeValueAsReal(rootQuatXml, "axisY"),
-					XmlHelper::getAttributeValueAsReal(rootQuatXml, "axisZ")));
-			}
+            // Durch axisX,axisY,axisZ,angle definiert
+            if (XmlHelper::hasAttribute(rootQuatXml, "angle") &&
+                XmlHelper::hasAttribute(rootQuatXml, "axisX") &&
+                XmlHelper::hasAttribute(rootQuatXml, "axisY") &&
+                XmlHelper::hasAttribute(rootQuatXml, "axisZ"))
+            {
+                return Ogre::Quaternion(
+                    Ogre::Degree(XmlHelper::getAttributeValueAsReal(rootQuatXml, "angle")),
+                    Ogre::Vector3(
+                    XmlHelper::getAttributeValueAsReal(rootQuatXml, "axisX"),
+                    XmlHelper::getAttributeValueAsReal(rootQuatXml, "axisY"),
+                    XmlHelper::getAttributeValueAsReal(rootQuatXml, "axisZ")));
+            }
 
-			// Durch angleX,angleY,angleZ definiert
-			if (XmlHelper::hasAttribute(rootQuatXml, "angleX") && 
-				XmlHelper::hasAttribute(rootQuatXml, "angleY") && 
-				XmlHelper::hasAttribute(rootQuatXml, "angleZ") )
-			{
-				Ogre::Matrix3 mat;
-				mat.FromEulerAnglesXYZ(
-					Degree(XmlHelper::getAttributeValueAsReal(rootQuatXml, "angleX")),
-					Degree(XmlHelper::getAttributeValueAsReal(rootQuatXml, "angleY")),
-					Degree(XmlHelper::getAttributeValueAsReal(rootQuatXml, "angleZ")));
-				return Quaternion(mat);
-			}
-		}
-		catch(...) {}
+            // Durch angleX,angleY,angleZ definiert
+            if (XmlHelper::hasAttribute(rootQuatXml, "angleX") &&
+                XmlHelper::hasAttribute(rootQuatXml, "angleY") &&
+                XmlHelper::hasAttribute(rootQuatXml, "angleZ") )
+            {
+                Ogre::Matrix3 mat;
+                mat.FromEulerAnglesXYZ(
+                    Degree(XmlHelper::getAttributeValueAsReal(rootQuatXml, "angleX")),
+                    Degree(XmlHelper::getAttributeValueAsReal(rootQuatXml, "angleY")),
+                    Degree(XmlHelper::getAttributeValueAsReal(rootQuatXml, "angleZ")));
+                return Quaternion(mat);
+            }
+        }
+        catch(...) {}
 
         LOG_MESSAGE(Logger::CORE, " > Parse Error beim ?bernehmen der Rotation! ");
 
-		return Ogre::Quaternion::IDENTITY;
-	}
+        return Ogre::Quaternion::IDENTITY;
+    }
 
 
     void DotSceneLoader::warning(const XERCES_CPP_NAMESPACE::SAXParseException& exc)
@@ -1133,14 +1150,14 @@
         const XERCES_CPP_NAMESPACE::SAXParseException& exc) const
     {
         std::stringstream strs;
-        strs << "A" << type << " occured while parsing " << mSceneName 
+        strs << "A" << type << " occured while parsing " << mSceneName
              << " at line " << exc.getLineNumber() << " column " <<  exc.getColumnNumber();
 
         if (exc.getSystemId() != NULL)
             strs << " with system " << XmlHelper::transcodeToStdString(exc.getSystemId());
         if (exc.getPublicId() != NULL)
             strs << " with public " << XmlHelper::transcodeToStdString(exc.getPublicId());
-    
+
         return strs.str();
     }
 }

Modified: rl/trunk/engine/core/src/DotSceneOctreeWorld.cpp
===================================================================
--- rl/trunk/engine/core/src/DotSceneOctreeWorld.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/src/DotSceneOctreeWorld.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
 * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
-* 
+*
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.
 *
@@ -23,6 +23,7 @@
 #include <OgreRoot.h>
 #include <OgreException.h>
 
+#include "CoreSubsystem.h"
 #include "ActorManager.h"
 #include "Actor.h"
 #include "PhysicsManager.h"
@@ -58,19 +59,18 @@
             mCamera->setAutoAspectRatio(true);
 
             actor->placeIntoScene();
-            setActiveActor( actor );            
+            setActiveActor( actor );
         }
 
         // Ein Viewport, das komplette Fenster
-        Viewport* newVp = Ogre::Root::getSingletonPtr()->
-            getAutoCreatedWindow()->addViewport(mCamera, 1);
+        Viewport* newVp = CoreSubsystem::getSingleton().getRenderWindow()->addViewport(mCamera, 1);
 
         // Schwarzer Hintergrund
         newVp->setBackgroundColour(ColourValue(0,0,0));
     }
 
     void DotSceneOctreeWorld::loadScene(const String& levelName, const String& module)
-    {   
+    {
         // Alte Szene l?schen
         clearScene();
 
@@ -86,7 +86,7 @@
             /// TODO - In den Sky-Sonnenpart verschieben
             mSceneMgr->setAmbientLight(ColourValue(0.55, 0.55, 0.55));
             mSceneFile = levelName;
-            
+
             DotSceneLoader* dot = NULL;
             try
             {
@@ -96,7 +96,7 @@
             }
             catch( ... )
             {
-                LOG_CRITICAL(Logger::CORE, 
+                LOG_CRITICAL(Logger::CORE,
                     "Laden der Szenenbeschreibung aus '" + mSceneFile + "' ist fehlgeschlagen." );
                 delete dot;
             }
@@ -113,7 +113,7 @@
         fireBeforeClearScene();
 
         // This is necessary to destroy cameras too.
-        Ogre::Root::getSingleton().getAutoCreatedWindow()->removeAllViewports();
+        CoreSubsystem::getSingleton().getRenderWindow()->removeAllViewports();
         ActorManager::getSingleton().destroyAllActors();
         mSceneMgr->clearScene();
         PhysicsManager::getSingleton().clearLevelGeometry();

Modified: rl/trunk/engine/core/src/Makefile.am
===================================================================
--- rl/trunk/engine/core/src/Makefile.am	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/src/Makefile.am	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,3 +1,6 @@
+# Default values, if configuration file is missing (hard coded)
+AM_CPPFLAGS = -DRL_MODULEDIR=\"$(RL_MODULEDIR)\" -DOGRE_PLUGINDIR=\"$(OGRE_PLUGINDIR)\"
+
 INCLUDES = $(RUBY_CFLAGS) $(OGRE_CFLAGS) $(CEGUI_CFLAGS) $(STLPORT_CFLAGS) -I../include -I../../common/include -I../include/nulldriver
 
 lib_LTLIBRARIES = libRlCore.la

Modified: rl/trunk/engine/core/src/SoundDriver.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundDriver.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/src/SoundDriver.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -29,9 +29,9 @@
     mSoundSet(),
     mDefaultMusicVolume(40),
     mDefaultSoundVolume(100),
-	mMasterVolume(100)	
+    mMasterVolume(100)
 {
-	sSoundResourceManager = soundResourceManager;
+    sSoundResourceManager = soundResourceManager;
 }
 
 SoundDriver::~SoundDriver()
@@ -89,30 +89,53 @@
     mSoundSet.erase(sound);
 }
 
-/*
- * Die Konfiguration in Datei schreiben.
- * @author JoSch
- * @date 05-07-2006
- * @param conf Die Konfigurationdatei zum Schreiben.
- */
-void SoundDriver::saveConf(ConfigFile &conf) const
-{
-	conf.setValue(getMasterVolume(), "MasterVolume", "General");
-	conf.setValue(getDefaultMusicVolume(), "DefaultMusicVolume", "General");
-	conf.setValue(getDefaultSoundVolume(), "DefaultSoundVolume", "General");
-}
+    Ogre::NameValuePairList SoundDriver::getSettings() const
+    {
+        Ogre::NameValuePairList SoundSettings;
 
-/*
- * Die Konfiguration lesen
- * @author JoSch
- * @date 05-07-2006
- * @param conf Die Konfigurationdatei, aus der gelesen werden soll
- */
-void SoundDriver::loadConf(ConfigFile &conf)
-{
-	setMasterVolume(conf.getValue(Real(1.0), "MasterVolume", "General"));
-	setDefaultMusicVolume(conf.getValue(Real(0.30), "DefaultMusicVolume", "General"));
-	setDefaultSoundVolume(conf.getValue(Real(1.0), "DefaultSoundVolume", "General"));
-}
+        // Append the settings to the list
+        SoundSettings.insert(make_pair("MasterVolume", Ogre::StringConverter::toString(mMasterVolume)));
+        SoundSettings.insert(make_pair("DefaultMusicVolume", Ogre::StringConverter::toString(mDefaultMusicVolume)));
+        SoundSettings.insert(make_pair("DefaultSoundVolume", Ogre::StringConverter::toString(mDefaultSoundVolume)));
 
+        return SoundSettings;
+    }
+
+    void SoundDriver::applySettings(const Ogre::NameValuePairList& settings)
+    {
+        Ogre::NameValuePairList::const_iterator it;
+
+        // Set the Master volume
+        if ((it = settings.find("MasterVolume")) == settings.end())
+        {
+            // Set a sane default value
+            setMasterVolume(Real(1.0));
+        }
+        else
+        {
+            setMasterVolume(Ogre::StringConverter::parseReal(it->second));
+        }
+
+        // Set the Default Music Volume
+        if ((it = settings.find("DefaultMusicVolume")) == settings.end())
+        {
+            // Set a sane default value
+            setDefaultMusicVolume(Real(0.3));
+        }
+        else
+        {
+            setDefaultMusicVolume(Ogre::StringConverter::parseReal(it->second));
+        }
+
+        // Set the Default Sound Volume
+        if ((it = settings.find("DefaultSoundVolume")) == settings.end())
+        {
+            // Set a sane default value
+            setDefaultSoundVolume(Real(1.0));
+        }
+        else
+        {
+            setDefaultSoundVolume(Ogre::StringConverter::parseReal(it->second));
+        }
+    }
 }

Modified: rl/trunk/engine/core/src/SoundManager.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundManager.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/src/SoundManager.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
 * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
-* 
+*
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Clarified Artistic License.
 *
@@ -37,58 +37,56 @@
  * @date 04-26-2004
  */
 template<> rl::SoundManager* Singleton<rl::SoundManager>::ms_Singleton = 0;
- 
+
 namespace rl {
 
-/**
- * @return Eine Referenz auf das Singleton-Objekt.
- * @author JoSch
- * @date 04-26-2004
- */
-SoundManager& SoundManager::getSingleton()
-{
-    return Singleton<SoundManager>::getSingleton();
-}
+    /**
+     * @return Eine Referenz auf das Singleton-Objekt.
+     * @author JoSch
+     * @date 04-26-2004
+     */
+    SoundManager& SoundManager::getSingleton()
+    {
+        return Singleton<SoundManager>::getSingleton();
+    }
 
-/**
- * @return Ein Zeiger auf das Singleton-Objekt.
- * @author JoSch
- * @date 04-26-2004
- */
-SoundManager* SoundManager::getSingletonPtr()
-{
-    return Singleton<SoundManager>::getSingletonPtr();
-}
+    /**
+     * @return Ein Zeiger auf das Singleton-Objekt.
+     * @author JoSch
+     * @date 04-26-2004
+     */
+    SoundManager* SoundManager::getSingletonPtr()
+    {
+        return Singleton<SoundManager>::getSingletonPtr();
+    }
 
-/**
- * Standardkonstruktor
- * @author JoSch
- * @date 01-27-2005
- */
-SoundManager::SoundManager() 
-: ResourceManager(),
-  mDriverList(),
-  mActiveDriver(NULL),
-  mListenerActor(NULL),
-  mActiveListener(NULL)
-{
-	LOG_MESSAGE(Logger::CORE, "Erzeuge Soundmanager...");
-	SoundDriver *driver = NULL;
-    mDriverList.clear();
-	NullDriver* nullDriver = new NullDriver(this);
-    registerDriver(nullDriver);
-    setActiveDriver(nullDriver);
+    /**
+     * Standardkonstruktor
+     * @author JoSch
+     * @date 01-27-2005
+     */
+    SoundManager::SoundManager()
+    : ResourceManager(),
+      mDriverList(),
+      mActiveDriver(NULL),
+      mListenerActor(NULL),
+      mActiveListener(NULL)
+    {
+        LOG_MESSAGE(Logger::CORE, "Erzeuge Soundmanager...");
+        NullDriver* nullDriver = new NullDriver(this);
+        registerDriver(nullDriver);
+        setActiveDriver(nullDriver);
 
-    mResourceType = "Sound";
-    ResourceGroupManager::getSingleton()._registerResourceManager(mResourceType, this);
+        mResourceType = "Sound";
+        ResourceGroupManager::getSingleton()._registerResourceManager(mResourceType, this);
 
-}
+    }
 
-SoundManager::~SoundManager()
-{
-    ResourceGroupManager::getSingleton()._unregisterResourceManager(mResourceType);
-    unloadAllDrivers();    
-}
+    SoundManager::~SoundManager()
+    {
+        ResourceGroupManager::getSingleton()._unregisterResourceManager(mResourceType);
+        unloadAllDrivers();
+    }
 
 /**
  * Gibt die Suchmuster fuer die Extension zurueck.
@@ -101,7 +99,7 @@
     StringList result;
     result.push_back("*.ogg");
     result.push_back("*.wav");
-    
+
     return result;
 }
 
@@ -112,77 +110,67 @@
 * @date 06-18-2004
 */
 Resource* SoundManager::createImpl(
-	const String& resName, 
-	ResourceHandle handle,
-	const String& group,
-	bool isManual, 
-	ManualResourceLoader* loader, 
-	const NameValuePairList* loadParams)
+    const String& resName,
+    ResourceHandle handle,
+    const String& group,
+    bool isManual,
+    ManualResourceLoader* loader,
+    const NameValuePairList* loadParams)
 {
-	SoundResource *newSound = NULL;
-	newSound = new SoundResource(this, resName, handle, group, isManual, loader);
-	return newSound;
+    SoundResource *newSound = NULL;
+    newSound = new SoundResource(this, resName, handle, group, isManual, loader);
+    return newSound;
 }
 
 /**
- * @return Die Liste der funktionierenden Treiber.
- * @author JoSch
- * @date 12-23-2005
- */
-const DriverList& SoundManager::getSoundDriverList() const
-{
-    return mDriverList;
-}
-
-/**
  * @param Der neue Treiber.
  * @author JoSch
  * @date 12-23-2005
  */
 void SoundManager::setActiveDriver(SoundDriver *driver)
 {
-	if (driver == NULL)
-	{
-		driver = getDriverByName(NullDriver::NAME);
-	}
+    if (driver == NULL)
+    {
+        driver = getDriverByName(NullDriver::NAME);
+    }
 
-	if (mActiveDriver == driver)
-	{
-	    LOG_DEBUG(Logger::CORE,
-			"No need to change Sound Driver, "
-			+ mActiveDriver->getName()
-			+ " is already active.");
-	    return;
-	}
-	
-	LOG_MESSAGE(Logger::CORE,
-		"Changing Sound Driver to "
+    if (mActiveDriver == driver)
+    {
+        LOG_DEBUG(Logger::CORE,
+            "No need to change Sound Driver, "
+            + mActiveDriver->getName()
+            + " is already active.");
+        return;
+    }
+
+    LOG_MESSAGE(Logger::CORE,
+        "Changing Sound Driver to "
          + driver->getName());
 
-	if (driver->initialize())
+    if (driver->initialize())
     {
-    	if (mActiveDriver != NULL)
-    	{
-	    	mActiveDriver->shutdown();
-	    	delete mActiveDriver;
-	    	mActiveDriver = NULL;
-    	}
-		mActiveDriver = driver;
+        if (mActiveDriver != NULL)
+        {
+            mActiveDriver->shutdown();
+            delete mActiveDriver;
+            mActiveDriver = NULL;
+        }
+        mActiveDriver = driver;
     }
     else
     {
-    	LOG_ERROR(
-    		Logger::CORE, 
-    		"Sound driver "
-    		+ driver->getName()
-    		+ " had an error while initializing, keeping old driver.");
+        LOG_ERROR(
+            Logger::CORE,
+            "Sound driver "
+            + driver->getName()
+            + " had an error while initializing, keeping old driver.");
     }
 }
 
 void SoundManager::_clearListenerActor()
 {
-	mActiveListener = NULL;
-	mListenerActor = NULL;
+    mActiveListener = NULL;
+    mListenerActor = NULL;
 }
 
 
@@ -208,18 +196,18 @@
 
 Actor* SoundManager::createListenerActor()
 {
-	if (mListenerActor == NULL)
-	{
-		if (mActiveListener != NULL)
-		{
-			mActiveListener->getListener()->setActive(false);
-		}
+    if (mListenerActor == NULL)
+    {
+        if (mActiveListener != NULL)
+        {
+            mActiveListener->getListener()->setActive(false);
+        }
 
-		mListenerActor = ActorManager::getSingleton().createListenerActor("SoundListenerObject");
-		mActiveListener = static_cast<ListenerObject*>(mListenerActor->getControlledObject());
-		mActiveListener->getListener()->setActive(true);
-	    return mListenerActor;
-	}
+        mListenerActor = ActorManager::getSingleton().createListenerActor("SoundListenerObject");
+        mActiveListener = static_cast<ListenerObject*>(mListenerActor->getControlledObject());
+        mActiveListener->getListener()->setActive(true);
+        return mListenerActor;
+    }
     else
     {
         Throw(IllegalStateException, "ListenerActor already created.");
@@ -231,7 +219,7 @@
     return mListenerActor;
 }
 
-/** 
+/**
  * Hole einen Treiber durch Angabe seines Namens
  * @param name Der name des gesuchten Treibers.
  * @return Der gesuchte Treiber
@@ -240,118 +228,112 @@
  */
 SoundDriver *SoundManager::getDriverByName(const String &name)
 {
-	DriverList::const_iterator it;
-	for(it = mDriverList.begin(); it != mDriverList.end(); it++)
-	{
-		if ((*it)->getName() == name)
-		{
-			return *it;
-		}
-	}
-	return 0;
+    DriverList::const_iterator it;
+    for(it = mDriverList.begin(); it != mDriverList.end(); it++)
+    {
+        if ((*it)->getName() == name)
+        {
+            return *it;
+        }
+    }
+    return 0;
 }
 
-void SoundManager::registerDriver(rl::SoundDriver *driver)
-{
-	mDriverList.push_back(driver);
-}
+    void SoundManager::registerDriver(rl::SoundDriver *driver)
+    {
+        mDriverList.push_back(driver);
+    }
 
-void SoundManager::unregisterDriver(rl::SoundDriver *driver)
-{
-	mDriverList.remove(driver);
-}
+    void SoundManager::unregisterDriver(rl::SoundDriver *driver)
+    {
+        mDriverList.remove(driver);
+    }
 
-/**
- * Hole die Soundkonfiguration
- * 
- * @author JoSch
- * @date 05-08-2006
- */
-void SoundManager::loadConf(const Ogre::String &filename)
-{
-	ConfigFile conf;
-	conf.load(filename);
-	
-	mDrivers = conf.getValues("Driver", "Drivers");
-	for (StringVector::const_iterator it = mDrivers.begin(); 
-		it != mDrivers.end(); it++)
-	{
-        try {
-#if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
-		    Ogre::Root::getSingleton().loadPlugin(*it);
-#else
-            Ogre::Root::getSingleton().loadPlugin("lib"+*it);
-#endif
+    void SoundManager::applySettings(const Ogre::NameValuePairList& settings)
+    {
+        // Get the sound driver
+        Ogre::NameValuePairList::const_iterator it = settings.find("Driver");
+        Ogre::String drivername;
+
+        if (it == settings.end())
+        {
+            drivername = "RlFmod4Driver";
         }
+        else
+        {
+            drivername = it->second;
+        }
+
+        try
+        {
+            #if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
+            Ogre::Root::getSingleton().loadPlugin(drivername);
+            #else
+            Ogre::Root::getSingleton().loadPlugin("lib" + drivername);
+            #endif
+        }
         catch(Ogre::Exception &e)
         {
             LOG_MESSAGE(Logger::CORE,
                 CeGuiString("Soundtreiber kann nicht geladen werden: ")
-                    + *it + "\n"
+                    + drivername + "\n"
                     + e.getFullDescription());
         }
         catch(...)
         {
             LOG_MESSAGE(Logger::CORE,
-                CeGuiString("Soundtreiber kann nicht geladen werden: ")
-                    + *it);
+                 CeGuiString("Soundtreiber kann nicht geladen werden: ")
+                    + drivername);
         }
-            
-	}
 
-	String drivername = conf.getValue(NullDriver::NAME, "ActiveDriver", "General");
-	SoundDriver *driver = getDriverByName(drivername);
-    if (driver == NULL)
-    {
-        driver = getDriverByName(NullDriver::NAME);
-    }
-	RlAssert(driver != NULL, "Beim Laden des Treibers ist ein Fehler aufgetreten");
-	setActiveDriver(driver);
-	getActiveDriver()->loadConf(conf);
-}
+        SoundDriver *driver = getDriverByName(drivername);
 
-/**
- * Schreibe die Soundkonfiguration
- * @author JoSch
- * @date 05-08-2006
- * @param filename Der Dateiname der Konfiguration
- */
-void SoundManager::saveConf(const Ogre::String &filename) const
-{
-	RlAssert(getActiveDriver() != NULL, "Kein aktiver Soundtreiber");
-	ConfigFile conf;
-	conf.setValues(mDrivers, "Driver", "Drivers");
-	conf.setValue(String(getActiveDriver()->getName().c_str()), "ActiveDriver", "General");
-	getActiveDriver()->saveConf(conf);
-	conf.save(filename);
-}
+        if (driver == NULL)
+        {
+            driver = getDriverByName(NullDriver::NAME);
+        }
 
+        RlAssert(driver != NULL, "Beim Laden des Treibers ist ein Fehler aufgetreten");
+        setActiveDriver(driver);
+        getActiveDriver()->applySettings(settings);
+    }
+
 void SoundManager::unloadAllDrivers()
 {
-   	if (mActiveDriver != NULL)
+       if (mActiveDriver != NULL)
     {
         mActiveDriver->shutdown();
         mActiveDriver = NULL;
     }
 
-	for(StringVector::iterator it = mDrivers.begin();
-		it != mDrivers.end(); it++)
-	{
-		Ogre::String driverPlugin = *it;
+    /**
+     * @ToDo: This is a hack to avoid the problem with the Null driver.
+     *        Don't know yet, why this happens.
+     */
+    DriverList::iterator it = mDriverList.begin();
+    it++;
+    /** Hack End **/
+    for(/*DriverList::iterator it = mDriverList.begin()*/; it != mDriverList.end(); it++)
+    {
+#       if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
+        Ogre::String driverPlugin = (*it)->getName();
+#       else
+        Ogre::String driverPlugin = "lib" + (*it)->getName();
+#       endif
 
-		LOG_MESSAGE(Logger::CORE,
-			"Unloading sound driver DLL "
-			+ driverPlugin);
+        LOG_MESSAGE(Logger::CORE,
+            "Unloading sound driver DLL "
+            + driverPlugin);
 
-		Ogre::Root::getSingleton().unloadPlugin(driverPlugin);
+        Ogre::Root::getSingleton().unloadPlugin(driverPlugin);
 
-		LOG_MESSAGE(Logger::CORE,
-			"Sound driver DLL "
-			+ driverPlugin
-			+ " successfully unloaded.");
-	}
+        LOG_MESSAGE(Logger::CORE,
+            "Sound driver DLL "
+            + driverPlugin
+            + " successfully unloaded.");
+    }
 
-	mDriverList.clear();
+    mDriverList.clear();
 }
 
 /**

Modified: rl/trunk/engine/core/src/nulldriver/NullDriver.cpp
===================================================================
--- rl/trunk/engine/core/src/nulldriver/NullDriver.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/core/src/nulldriver/NullDriver.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -22,7 +22,7 @@
 {
 Ogre::String NullDriver::NAME = "NullDriver";
 
-/** 
+/**
  * Konstruktor
  * @author JoSch
  * @date 12-23-2005
@@ -32,7 +32,7 @@
 {
 }
 
-/** 
+/**
  * Destruktor
  * @author JoSch
  * @date 12-23-2005
@@ -41,7 +41,7 @@
 {
 }
 
-/** 
+/**
  * Zeigt an, ob der Treiber funktionsf???hig ist.
  * @return Immer TRUE.
  * @author JoSch
@@ -52,17 +52,17 @@
     return true;
 }
 
-/** 
+/**
  * Starte den Nulltreiber und mache alle Initialisierung.
  * @author JoSch
  * @date 12-23-2005
  */
 bool NullDriver::initialize()
 {
-	return true;
+    return true;
 }
 
-/** 
+/**
  * Beeende den Nulltreiber und gib alle Resourcen frei.
  * @author JoSch
  * @date 12-23-2005
@@ -71,7 +71,7 @@
 {
 }
 
-/** 
+/**
  * Gibt den Anzeigename des Treiber zur???ck.
  * @return Anzeigename
  * @author JoSch
@@ -89,9 +89,9 @@
  */
  void NullDriver::update()
  {
- 	// Erstmal nichts zu tun.
+     // Erstmal nichts zu tun.
  }
- 
+
  /**
   * Einen Sound-Stream mit Resource erzeugen
   * @return Der erzeugte Stream
@@ -101,8 +101,8 @@
   */
 Sound *NullDriver::createStream(const SoundResourcePtr &res)
 {
- 	Sound *sound = new NullSound(res);
- 	return sound;
+     Sound *sound = new NullSound(res);
+     return sound;
 }
 
 /**
@@ -114,8 +114,8 @@
  */
 Sound *NullDriver::createSample(const SoundResourcePtr &res)
 {
- 	Sound *sound = new NullSound(res);
- 	return sound;
+     Sound *sound = new NullSound(res);
+     return sound;
 }
 
 /**
@@ -131,38 +131,13 @@
     return listener;
 }
 
-
-/*
- * Die Konfiguration in Datei schreiben.
- * @author JoSch
- * @date 05-07-2006
- * @param conf Die Konfigurationdatei zum Schreiben.
- */
-void NullDriver::saveConf(ConfigFile &conf) const
-{
-	SoundDriver::saveConf(conf);
-    // DO NOTHING
-}
-
-/*
- * Die Konfiguration lesen
- * @author JoSch
- * @date 05-07-2006
- * @param conf Die Konfigurationdatei, aus der gelesen werden soll
- */
-void NullDriver::loadConf(ConfigFile &conf)
-{
-	SoundDriver::loadConf(conf);
-    // DO NOTHING
-}
-
 void NullDriver::setRolloffFactor(const Ogre::Real&)
 {
 }
 
 const Ogre::Real NullDriver::getRolloffFactor()
 {
-	return 1.0;
+    return 1.0;
 }
 
 }

Modified: rl/trunk/engine/startup/src/RastullahMain.cpp
===================================================================
--- rl/trunk/engine/startup/src/RastullahMain.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/startup/src/RastullahMain.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -14,7 +14,7 @@
 *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
 */
 
-#include <xercesc/util/XMemory.hpp>	// Muss vor Ogre stehen (zumindest fuer VS)
+#include <xercesc/util/XMemory.hpp>    // Muss vor Ogre stehen (zumindest fuer VS)
 
 #include <OgreLogManager.h>
 #include <stdexcept>
@@ -34,184 +34,185 @@
 #include <CEGUIExceptions.h>
 
 #if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
-	#define WIN32_LEAN_AND_MEAN
-	#include <windows.h>
+    #define WIN32_LEAN_AND_MEAN
+    #include <windows.h>
     #include <shellapi.h>
 #endif
 
 void startupRl(bool developerMode, Ogre::String module)
 {
-	rl::CoreSubsystem* core = NULL;
-	rl::RulesSubsystem* rules = NULL;
-	rl::DialogSubsystem* dialog = NULL;
-	rl::AiSubsystem* ai = NULL;
-	rl::UiSubsystem* ui =  NULL;
-	rl::ScriptSubsystem* script =  NULL;
-	rl::Logger* logger = NULL;
+    rl::CoreSubsystem* core = NULL;
+    rl::RulesSubsystem* rules = NULL;
+    rl::DialogSubsystem* dialog = NULL;
+    rl::AiSubsystem* ai = NULL;
+    rl::UiSubsystem* ui =  NULL;
+    rl::ScriptSubsystem* script =  NULL;
+    rl::Logger* logger = NULL;
 
 #ifndef _DEBUG
-	try {
+    try {
 #endif // #ifndef _DEBUG
         rl::ConfigurationManager::getSingleton().loadConfig();
 
-		logger = new rl::Logger(
-			rl::ConfigurationManager::getSingleton().getRastullahLogDirectory(),
-			rl::ConfigurationManager::getSingleton().getOgreLogFile(),
-			rl::ConfigurationManager::getSingleton().getRastullahLogFile());
+        logger = new rl::Logger(
+            rl::ConfigurationManager::getSingleton().getRastullahLogDirectory(),
+            rl::ConfigurationManager::getSingleton().getOgreLogFile(),
+            rl::ConfigurationManager::getSingleton().getRastullahLogFile());
         // @todo in ConfigDatei auslagern/ oder auch Parameter
 
-		rl::Logger::getSingleton().setLogDetail(
-			rl::ConfigurationManager::getSingleton().getLogLevel());
+        rl::Logger::getSingleton().setLogDetail(
+            rl::ConfigurationManager::getSingleton().getLogLevel());
 
-		core = new rl::CoreSubsystem();
-		core->setDeveloperMode(developerMode);
+        core = new rl::CoreSubsystem();
+        core->setDeveloperMode(developerMode);
         LOG_MESSAGE_SHORT("CoreSubsystem gestartet");
 
-		rules = new rl::RulesSubsystem();
-		LOG_MESSAGE_SHORT("RulesSubsystem gestartet");
+        rules = new rl::RulesSubsystem();
+        LOG_MESSAGE_SHORT("RulesSubsystem gestartet");
 
-		dialog = new rl::DialogSubsystem();
-		LOG_MESSAGE_SHORT("DialogSubsystem gestartet");
+        dialog = new rl::DialogSubsystem();
+        LOG_MESSAGE_SHORT("DialogSubsystem gestartet");
 
-		ai = new rl::AiSubsystem();
-		LOG_MESSAGE_SHORT("AiSubsystem gestartet");
+        ai = new rl::AiSubsystem();
+        LOG_MESSAGE_SHORT("AiSubsystem gestartet");
 
-		ui = new rl::UiSubsystem();
-		LOG_MESSAGE_SHORT("UiSubsystem gestartet");
+        ui = new rl::UiSubsystem();
+        LOG_MESSAGE_SHORT("UiSubsystem gestartet");
 
-		script = new rl::ScriptSubsystem();
-		LOG_MESSAGE_SHORT("ScriptSubsystem gestartet");
+        script = new rl::ScriptSubsystem();
+        LOG_MESSAGE_SHORT("ScriptSubsystem gestartet");
 
 
-		LOG_MESSAGE_SHORT("Starte...");
-		if (module != "")
-			core->setDefaultActiveModule(module);
+        LOG_MESSAGE_SHORT("Starte...");
+        if (module != "")
+            core->setDefaultActiveModule(module);
 
-		core->startCore();
+        core->startCore();
 
 
 #ifndef _DEBUG
-	}
-	catch(Ogre::Exception& oe) {
-		rl::showError(oe.getFullDescription());
-	}
-	catch(rl::Exception& re) {
-		rl::showError(re.toString());
-	}
-	catch(CEGUI::Exception& ce) {
-		rl::showError(ce.getMessage().c_str());
-	}
-	catch(fs::filesystem_error& fe) {
-		rl::showError(fe.what());
-	}
-	catch(std::runtime_error& rte) {
-		rl::showError(rte.what());
-	}
-	catch(std::exception& exp) {
-		rl::showError( exp.what() );
-	}
-	catch(std::string& err) {
-		rl::showError( err );
-	}
-	catch(...) {
-		rl::showError( "Unknown exception occured" );
-	}
+    }
+    catch(Ogre::Exception& oe) {
+        rl::showError(oe.getFullDescription());
+    }
+    catch(rl::Exception& re) {
+        rl::showError(re.toString());
+    }
+    catch(CEGUI::Exception& ce) {
+        rl::showError(ce.getMessage().c_str());
+    }
+    catch(fs::filesystem_error& fe) {
+        rl::showError(fe.what());
+    }
+    catch(std::runtime_error& rte) {
+        rl::showError(rte.what());
+    }
+    catch(std::exception& exp) {
+        rl::showError( exp.what() );
+    }
+    catch(std::string& err) {
+        rl::showError( err );
+    }
+    catch(...) {
+        rl::showError( "Unknown exception occured" );
+    }
 
 
-	try
+    try
     {
 #endif // #ifndef _DEBUG
-        LOG_MESSAGE_SHORT("Soundkonfiguration gespeichert");
+        // Save the configuration to disk
+        rl::ConfigurationManager::getSingleton().saveConfig();
+        LOG_MESSAGE_SHORT("Configuration file saved");
 
-		delete script;
-		delete ui;
-		delete ai;
-		delete dialog;
-		delete rules;
-		delete core;
-
+        delete script;
+        delete ui;
+        delete ai;
+        delete dialog;
+        delete rules;
+        delete core;
         delete logger;
 #ifndef _DEBUG
-	}
-	catch(Ogre::Exception& oe) {
-		rl::showError(oe.getFullDescription());
-	}
-	catch(rl::Exception& re) {
-		rl::showError(re.toString());
-	}
-	catch(std::runtime_error& rte) {
-		rl::showError(rte.what());
-	}
-	catch(std::exception& exp) {
-		rl::showError( exp.what() );
-	}
-	catch(std::string& err) {
-		rl::showError( err );
-	}
-	catch(...) {
-		rl::showError( "Unknown exception occured" );
-	}
+    }
+    catch(Ogre::Exception& oe) {
+        rl::showError(oe.getFullDescription());
+    }
+    catch(rl::Exception& re) {
+        rl::showError(re.toString());
+    }
+    catch(std::runtime_error& rte) {
+        rl::showError(rte.what());
+    }
+    catch(std::exception& exp) {
+        rl::showError( exp.what() );
+    }
+    catch(std::string& err) {
+        rl::showError( err );
+    }
+    catch(...) {
+        rl::showError( "Unknown exception occured" );
+    }
 #endif //#ifndef _DEBUG
 
 }
 
 void analyzeParameters(int argc, char** argv, bool& developerMode, Ogre::String& startModule)
 {
-	developerMode = false;
-	startModule = "";
+    developerMode = false;
+    startModule = "";
 
-	for (int argIdx = 0; argIdx < argc; argIdx++)
-	{
-		if (strncmp(argv[argIdx], "--dev", 5) == 0)
-			developerMode = true;
-		else if (strncmp(argv[argIdx], "--module", 8) == 0
-				&& argc > argIdx + 1) // N??chster Parameter existiert
-			startModule = argv[argIdx + 1];
-	}
+    for (int argIdx = 0; argIdx < argc; argIdx++)
+    {
+        if (strncmp(argv[argIdx], "--dev", 5) == 0)
+            developerMode = true;
+        else if (strncmp(argv[argIdx], "--module", 8) == 0
+                && argc > argIdx + 1) // N??chster Parameter existiert
+            startModule = argv[argIdx + 1];
+    }
 }
 
 #if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
 
 INT WINAPI WinMain( HINSTANCE hInst, HINSTANCE, LPSTR strCmdLine, INT )
 {
-	int argc;
-	LPWSTR* argList = CommandLineToArgvW(GetCommandLineW(), &argc);
-	char** argv = new char*[argc];
-	for (int argIdx = 0; argIdx < argc; argIdx++)
-	{
-		int len = wcslen(argList[argIdx])+1;
-		argv[argIdx] = new char[len];
-		wcstombs(argv[argIdx], argList[argIdx], len);
-		argv[argIdx][len-1] = '\0';
-	}
+    int argc;
+    LPWSTR* argList = CommandLineToArgvW(GetCommandLineW(), &argc);
+    char** argv = new char*[argc];
+    for (int argIdx = 0; argIdx < argc; argIdx++)
+    {
+        int len = wcslen(argList[argIdx])+1;
+        argv[argIdx] = new char[len];
+        wcstombs(argv[argIdx], argList[argIdx], len);
+        argv[argIdx][len-1] = '\0';
+    }
 
-	bool developer;
-	Ogre::String module;
-	analyzeParameters(argc, argv, developer, module);
+    bool developer;
+    Ogre::String module;
+    analyzeParameters(argc, argv, developer, module);
 
-	for (int argIdx = 0; argIdx < argc; argIdx++)
-	{
-		delete[] argv[argIdx];
-	}
-	delete[] argv;
-	LocalFree(argList);
+    for (int argIdx = 0; argIdx < argc; argIdx++)
+    {
+        delete[] argv[argIdx];
+    }
+    delete[] argv;
+    LocalFree(argList);
 
     startupRl(developer, module);
 
-	return 0;
+    return 0;
 }
 
 #else // if OGRE_PLATFORM != OGRE_PLATFORM_WIN32
 
 int main(int argc, char **argv)
 {
-	bool developer;
-	Ogre::String module;
+    bool developer;
+    Ogre::String module;
 
-	analyzeParameters(argc, argv, developer, module);
+    analyzeParameters(argc, argv, developer, module);
     startupRl(developer, module);
 
-	return 0;
+    return 0;
 }
 
 #endif

Modified: rl/trunk/engine/ui/include/CommandMapper.h
===================================================================
--- rl/trunk/engine/ui/include/CommandMapper.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/ui/include/CommandMapper.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -23,79 +23,78 @@
 
 namespace rl {
 
-	enum MovementState
-	{
-		MOVE_NONE = 0,
-		MOVE_LEFT = 1<<0,
-		MOVE_RIGHT = 1<<1,
-		MOVE_FORWARD = 1<<2,
-		MOVE_BACKWARD = 1<<3,
-		TURN_LEFT = 1<<4,
-		TURN_RIGHT = 1<<5,
-		MOVE_RUN = 1<<6,
-		MOVE_SNEAK = 1<<7,
-		MOVE_JUMP = 1<<8,
-		MOVE_RUN_LOCK = 1<<9
-	};
+    enum MovementState
+    {
+        MOVE_NONE = 0,
+        MOVE_LEFT = 1<<0,
+        MOVE_RIGHT = 1<<1,
+        MOVE_FORWARD = 1<<2,
+        MOVE_BACKWARD = 1<<3,
+        TURN_LEFT = 1<<4,
+        TURN_RIGHT = 1<<5,
+        MOVE_RUN = 1<<6,
+        MOVE_SNEAK = 1<<7,
+        MOVE_JUMP = 1<<8,
+        MOVE_RUN_LOCK = 1<<9
+    };
 
-	enum MapType
-	{
-		CMDMAP_KEYMAP_IN_COMBAT,
-		CMDMAP_KEYMAP_OFF_COMBAT,
-		CMDMAP_KEYMAP_MOVEMENT,
+    enum MapType
+    {
+        CMDMAP_KEYMAP_IN_COMBAT,
+        CMDMAP_KEYMAP_OFF_COMBAT,
+        CMDMAP_KEYMAP_MOVEMENT,
         CMDMAP_KEYMAP_GLOBAL,
-		CMDMAP_MOUSEMAP_IN_COMBAT,
-		CMDMAP_MOUSEMAP_OFF_COMBAT
-	};
+        CMDMAP_MOUSEMAP_IN_COMBAT,
+        CMDMAP_MOUSEMAP_OFF_COMBAT
+    };
 
-	const int CMDMAP_NO_MAPPING = -9999999;
+    const int CMDMAP_NO_MAPPING = -9999999;
 
-	class _RlUiExport CommandMapper
-	{
-	public:
+    class _RlUiExport CommandMapper
+    {
+    public:
 
-		CommandMapper();
-		~CommandMapper();
+        CommandMapper();
+        ~CommandMapper();
 
-		void loadCommandMap(const Ogre::String& mapfile);
-		void saveCommandMap(const Ogre::String& mapfile) const;
+        void buildCommandMapping(const Ogre::NameValuePairList& keylist);
 
-		void setMapping(MapType map, int code, const CeGuiString& actionName);
+        void setMapping(MapType map, int code, const CeGuiString& actionName);
 
-		int getMapping(MapType map, const CeGuiString& actionName);
+        int getMapping(MapType map, const CeGuiString& actionName);
 
-		std::map<CeGuiString, MovementState> getMovements();
+        std::map<CeGuiString, MovementState> getMovements();
 
-		static int encodeKey(int scancode, int syskeys);
-		static void decodeKey(int combinedKeyCode, int* scancode, int* syskeys);
+        static int encodeKey(int scancode, int syskeys);
+        static void decodeKey(int combinedKeyCode, int* scancode, int* syskeys);
 
-		const MovementState getMovement(int keycode) const;
+        const MovementState getMovement(int keycode) const;
 
-		// Finde die der Taste oder dem Mausbutton zugeordneten Aktion in der 
-		// angegebenen CommandMap
-		const CeGuiString& getAction(int keyCodeOrMouseButton, MapType mapType);
+        // Finde die der Taste oder dem Mausbutton zugeordneten Aktion in der
+        // angegebenen CommandMap
+        const CeGuiString& getAction(int keyCodeOrMouseButton, MapType mapType);
 
-	private:
+    private:
 
-		// KeyCode -> Name
-		typedef std::map<int, CeGuiString > KeyAndMouseCommandMap;
-		typedef std::map<int, MovementState> MovementCommandMap;
+        // KeyCode -> Name
+        typedef std::map<int, CeGuiString > KeyAndMouseCommandMap;
+        typedef std::map<int, MovementState> MovementCommandMap;
 
-		MovementCommandMap mMovementCommands;
-		KeyAndMouseCommandMap mKeyCommandsInCombat;
-		KeyAndMouseCommandMap mKeyCommandsOffCombat;
+        MovementCommandMap mMovementCommands;
+        KeyAndMouseCommandMap mKeyCommandsInCombat;
+        KeyAndMouseCommandMap mKeyCommandsOffCombat;
         KeyAndMouseCommandMap mKeyCommandsGlobal;
-		KeyAndMouseCommandMap mMouseCommandsInCombat;
-		KeyAndMouseCommandMap mMouseCommandsOffCombat;
+        KeyAndMouseCommandMap mMouseCommandsInCombat;
+        KeyAndMouseCommandMap mMouseCommandsOffCombat;
 
-		std::map<CeGuiString, MovementState> mMovement;
+        std::map<CeGuiString, MovementState> mMovement;
 
-		KeyAndMouseCommandMap* getCommandMap(MapType mapType);
-		int getKeyCode(const Ogre::String& keyDescription);
-		int getMouseButtonCode(int buttonNum);
-		int getMouseButtonCode(const Ogre::String& buttonDescription);
-		MovementState getMovement(const Ogre::String& movementDescription);
-	};
+        KeyAndMouseCommandMap* getCommandMap(MapType mapType);
+        int getKeyCode(const Ogre::String& keyDescription);
+        int getMouseButtonCode(int buttonNum);
+        int getMouseButtonCode(const Ogre::String& buttonDescription);
+        MovementState getMovement(const Ogre::String& movementDescription);
+    };
 
 }
 

Modified: rl/trunk/engine/ui/include/InputManager.h
===================================================================
--- rl/trunk/engine/ui/include/InputManager.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/ui/include/InputManager.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -33,24 +33,24 @@
 #include <OgreMemoryMacros.h>
 
 namespace CEGUI {
-	enum MouseButton;
+    enum MouseButton;
 }
 
 namespace rl {
 
-	class CeGuiWindow;
-	class GameObject;
-	class CharacterController;
+    class CeGuiWindow;
+    class GameObject;
+    class CharacterController;
     class CommandMapper;
 
     class _RlUiExport InputManager
-        :	public Ogre::Singleton<InputManager>, 
+        :    public Ogre::Singleton<InputManager>,
             public GameTask,
-            public OIS::KeyListener, 
+            public OIS::KeyListener,
             public OIS::MouseListener
     {
     public:
-		InputManager(Ogre::RenderWindow* window);
+        InputManager(Ogre::RenderWindow* window);
         ~InputManager();
 
         static InputManager & getSingleton(void);
@@ -71,15 +71,15 @@
         virtual bool mousePressed(const OIS::MouseEvent & arg, OIS::MouseButtonID id);
         virtual bool mouseReleased(const OIS::MouseEvent & arg, OIS::MouseButtonID id);
         virtual bool mouseMoved(const OIS::MouseEvent &arg);
-		virtual bool keyPressed(const OIS::KeyEvent &arg);
-		virtual bool keyReleased(const OIS::KeyEvent &arg);
+        virtual bool keyPressed(const OIS::KeyEvent &arg);
+        virtual bool keyReleased(const OIS::KeyEvent &arg);
 
         CeGuiString getKeyName(int scancode, int syskeys);
         CeGuiString getKeyName(int combinedKeyCode);
         int getScanCode(const CeGuiString& name);
         int getSystemCode(const CeGuiString& name);
         void loadKeyMapping(const Ogre::String& filename);
-        void loadCommandMapping(const Ogre::String& filename);
+        void buildCommandMapping(const Ogre::NameValuePairList& keylist);
         typedef std::map<int, CEGUI::utf8> KeyCharMap;
         typedef std::map<int, CeGuiString> KeyNameMap;
 
@@ -98,7 +98,7 @@
         int getModifierCode() const;
         const CEGUI::utf8& getKeyChar(int keycode, int modifiers) const;
 
-		Ogre::Vector3 mSavedMouseState;
+        Ogre::Vector3 mSavedMouseState;
 
         OIS::Mouse* mMouse;
         OIS::Keyboard* mKeyboard;

Modified: rl/trunk/engine/ui/src/CommandMapper.cpp
===================================================================
--- rl/trunk/engine/ui/src/CommandMapper.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/ui/src/CommandMapper.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -28,95 +28,95 @@
 
 namespace rl {
 
-	CommandMapper::CommandMapper()
-	    : mMovementCommands(),
-		  mKeyCommandsInCombat(),
-		  mKeyCommandsOffCombat(),
+    CommandMapper::CommandMapper()
+        : mMovementCommands(),
+          mKeyCommandsInCombat(),
+          mKeyCommandsOffCombat(),
           mKeyCommandsGlobal(),
-		  mMouseCommandsInCombat(),
-		  mMouseCommandsOffCombat()
-	{
-	}
+          mMouseCommandsInCombat(),
+          mMouseCommandsOffCombat()
+    {
+    }
 
-	CommandMapper::~CommandMapper()
-	{
-	}
+    CommandMapper::~CommandMapper()
+    {
+    }
 
-	const CeGuiString& CommandMapper::getAction(int keyCodeOrMouseButton, MapType mapType)
-	{
-		KeyAndMouseCommandMap* commandMap = getCommandMap(mapType);
+    const CeGuiString& CommandMapper::getAction(int keyCodeOrMouseButton, MapType mapType)
+    {
+        KeyAndMouseCommandMap* commandMap = getCommandMap(mapType);
 
-		KeyAndMouseCommandMap::const_iterator command = commandMap->find(keyCodeOrMouseButton);
+        KeyAndMouseCommandMap::const_iterator command = commandMap->find(keyCodeOrMouseButton);
 
-		if (command != commandMap->end())
-		{
-			return (*command).second;
-		}
+        if (command != commandMap->end())
+        {
+            return (*command).second;
+        }
 
-		static CeGuiString NO_ACTION = "";
-		return NO_ACTION;
-	}
+        static CeGuiString NO_ACTION = "";
+        return NO_ACTION;
+    }
 
 
-	void CommandMapper::setMapping(
-			MapType mapType,
-			int code,
-			const CeGuiString& actionName)
-	{
-		getCommandMap(mapType)->insert(make_pair(code, actionName));
-	}
+    void CommandMapper::setMapping(
+            MapType mapType,
+            int code,
+            const CeGuiString& actionName)
+    {
+        getCommandMap(mapType)->insert(make_pair(code, actionName));
+    }
 
-	CommandMapper::KeyAndMouseCommandMap* CommandMapper::getCommandMap(MapType mapType)
-	{
-		KeyAndMouseCommandMap* commandMap;
+    CommandMapper::KeyAndMouseCommandMap* CommandMapper::getCommandMap(MapType mapType)
+    {
+        KeyAndMouseCommandMap* commandMap;
 
-		if (mapType == CMDMAP_KEYMAP_OFF_COMBAT)
-			commandMap = &mKeyCommandsOffCombat;
-		else if (mapType == CMDMAP_KEYMAP_IN_COMBAT)
-			commandMap = &mKeyCommandsInCombat;
-		else if (mapType == CMDMAP_KEYMAP_GLOBAL)
-			commandMap = &mKeyCommandsGlobal;
-		else if (mapType == CMDMAP_MOUSEMAP_OFF_COMBAT)
-			commandMap = &mMouseCommandsOffCombat;
-		else if (mapType == CMDMAP_MOUSEMAP_IN_COMBAT)
-			commandMap = &mMouseCommandsInCombat;
-		else
-			Throw(RuntimeException, "Unknown command map");
+        if (mapType == CMDMAP_KEYMAP_OFF_COMBAT)
+            commandMap = &mKeyCommandsOffCombat;
+        else if (mapType == CMDMAP_KEYMAP_IN_COMBAT)
+            commandMap = &mKeyCommandsInCombat;
+        else if (mapType == CMDMAP_KEYMAP_GLOBAL)
+            commandMap = &mKeyCommandsGlobal;
+        else if (mapType == CMDMAP_MOUSEMAP_OFF_COMBAT)
+            commandMap = &mMouseCommandsOffCombat;
+        else if (mapType == CMDMAP_MOUSEMAP_IN_COMBAT)
+            commandMap = &mMouseCommandsInCombat;
+        else
+            Throw(RuntimeException, "Unknown command map");
 
-		return commandMap;
-	}
+        return commandMap;
+    }
 
-	int CommandMapper::getMapping(
-			MapType mapType,
-			const CeGuiString& actionName)
-	{
-		if (mapType == CMDMAP_KEYMAP_MOVEMENT)
-		{
-			return 0;
-		}
+    int CommandMapper::getMapping(
+            MapType mapType,
+            const CeGuiString& actionName)
+    {
+        if (mapType == CMDMAP_KEYMAP_MOVEMENT)
+        {
+            return 0;
+        }
 
-		KeyAndMouseCommandMap* commandMap = getCommandMap(mapType);
+        KeyAndMouseCommandMap* commandMap = getCommandMap(mapType);
 
-		for (KeyAndMouseCommandMap::iterator command = commandMap->begin();
-				command != commandMap->end(); command++)
-		{
-			CeGuiString name = (*command).second;
-			if (name.compare(actionName) == 0)
-				return (*command).first;
-		}
+        for (KeyAndMouseCommandMap::iterator command = commandMap->begin();
+                command != commandMap->end(); command++)
+        {
+            CeGuiString name = (*command).second;
+            if (name.compare(actionName) == 0)
+                return (*command).first;
+        }
 
-		return CMDMAP_NO_MAPPING;
-	}
+        return CMDMAP_NO_MAPPING;
+    }
 
-	int CommandMapper::encodeKey(int scancode, int syskeys)
-	{
+    int CommandMapper::encodeKey(int scancode, int syskeys)
+    {
         return scancode | syskeys << 16;
-	}
+    }
 
-	void CommandMapper::decodeKey(int combinedKeyCode, int* scancode, int* syskeys)
-	{
-		int syskeysTmp = combinedKeyCode >> 16;
-		int scancodeTmp = combinedKeyCode & ~(syskeysTmp << 16);
+    void CommandMapper::decodeKey(int combinedKeyCode, int* scancode, int* syskeys)
+    {
+        int syskeysTmp = combinedKeyCode >> 16;
+        int scancodeTmp = combinedKeyCode & ~(syskeysTmp << 16);
 
         if (syskeys != NULL)
         {
@@ -124,182 +124,195 @@
         }
         if (scancode != NULL)
         {
-		    *scancode = scancodeTmp;
+            *scancode = scancodeTmp;
         }
-	}
+    }
 
-	const MovementState CommandMapper::getMovement(int keycode) const
-	{
-		MovementCommandMap::const_iterator mvcmd = mMovementCommands.find(keycode);
+    const MovementState CommandMapper::getMovement(int keycode) const
+    {
+        MovementCommandMap::const_iterator mvcmd = mMovementCommands.find(keycode);
 
-		if (mvcmd == mMovementCommands.end())
-		{
-			return MOVE_NONE;
-		}
-		else
-		{
-			return (*mvcmd).second;
-		}
-	}
+        if (mvcmd == mMovementCommands.end())
+        {
+            return MOVE_NONE;
+        }
+        else
+        {
+            return (*mvcmd).second;
+        }
+    }
 
-	void CommandMapper::loadCommandMap(const Ogre::String& mapfile)
-	{
-		ConfigFile* cfg = new ConfigFile();
-		cfg->load(mapfile);
+    void CommandMapper::buildCommandMapping(const Ogre::NameValuePairList& keylist)
+    {
+        /** @Todo: Replace this with something not static */
+        mMovementCommands[InputManager::getSingleton().getScanCode("Q")] = getMovement("turn_left");
+        mMovementCommands[InputManager::getSingleton().getScanCode("E")] = getMovement("turn_right");
+        mMovementCommands[InputManager::getSingleton().getScanCode("W")] = getMovement("forward");
+        mMovementCommands[InputManager::getSingleton().getScanCode("S")] = getMovement("backward");
+        mMovementCommands[InputManager::getSingleton().getScanCode("A")] = getMovement("left");
+        mMovementCommands[InputManager::getSingleton().getScanCode("D")] = getMovement("right");
+        mMovementCommands[InputManager::getSingleton().getScanCode("Leertaste")] = getMovement("jump");
 
-		for (ConfigFile::SettingsIterator it = cfg->getSettingsIterator("Movement");
-			it.hasMoreElements();)
-		{
-			String key = it.peekNextKey();
-			String setting = it.getNext();
+        mKeyCommandsGlobal[getKeyCode("Ctrl+X")] = CeGuiString("quitgame");
+        mKeyCommandsGlobal[getKeyCode("F10")] = CeGuiString("toggleingameglobalmenu");
+        mKeyCommandsGlobal[getKeyCode("I")] = CeGuiString("toggleinventorywindow");
+        mKeyCommandsGlobal[getKeyCode("J")] = CeGuiString("showjournalwindow");
+        mKeyCommandsGlobal[getKeyCode("C")] = CeGuiString("showcharactersheet");
+        mKeyCommandsGlobal[getKeyCode("O")] = CeGuiString("togglecharacterstatewindow");
 
-			mMovementCommands[InputManager::getSingleton().getScanCode(key)] = getMovement(setting);
-			LOG_MESSAGE(Logger::UI,
-				Ogre::String("Key ") + key	+ " ("
-				+ StringConverter::toString(InputManager::getSingleton().getScanCode(key))
-				+ ") is assigned to movement "	+ setting+" ("
-				+ StringConverter::toString(getMovement(setting))+")");
-		}
+        /*
+        for (ConfigFile::SettingsIterator it = cfgfile->getSettingsIterator("Movement");
+            it.hasMoreElements();)
+        {
+            String key = it.peekNextKey();
+            String setting = it.getNext();
 
-        for (ConfigFile::SettingsIterator it = cfg->getSettingsIterator("Global keys");
-			it.hasMoreElements();)
-		{
-			String key = it.peekNextKey();
-			String setting = it.getNext();
+            mMovementCommands[InputManager::getSingleton().getScanCode(key)] = getMovement(setting);
+            LOG_MESSAGE(Logger::UI,
+                Ogre::String("Key ") + key    + " ("
+                + StringConverter::toString(InputManager::getSingleton().getScanCode(key))
+                + ") is assigned to movement "    + setting+" ("
+                + StringConverter::toString(getMovement(setting))+")");
+        }
 
-			mKeyCommandsGlobal[getKeyCode(key)] = CeGuiString(setting);
-			LOG_MESSAGE(Logger::UI,
-				Ogre::String("Key ") + key	+ " (" + StringConverter::toString(getKeyCode(key))
-				+ ") is assigned to command " + setting+" globally");
-		}
+        for (ConfigFile::SettingsIterator it = cfgfile->getSettingsIterator("Global keys");
+            it.hasMoreElements();)
+        {
+            String key = it.peekNextKey();
+            String setting = it.getNext();
 
-		for (ConfigFile::SettingsIterator it = cfg->getSettingsIterator("Keys off combat");
-			it.hasMoreElements();)
-		{
-			String key = it.peekNextKey();
-			String setting = it.getNext();
+            mKeyCommandsGlobal[getKeyCode(key)] = CeGuiString(setting);
+            LOG_MESSAGE(Logger::UI,
+                Ogre::String("Key ") + key    + " (" + StringConverter::toString(getKeyCode(key))
+                + ") is assigned to command " + setting+" globally");
+        }
 
-			mKeyCommandsOffCombat[getKeyCode(key)] = CeGuiString(setting);
-			LOG_MESSAGE(Logger::UI,
-				Ogre::String("Key ") + key	+ " (" + StringConverter::toString(getKeyCode(key))
-				+ ") is assigned to command " + setting+" while not in combat");
-		}
+        for (ConfigFile::SettingsIterator it = cfgfile->getSettingsIterator("Keys off combat");
+            it.hasMoreElements();)
+        {
+            String key = it.peekNextKey();
+            String setting = it.getNext();
 
-		for (ConfigFile::SettingsIterator it = cfg->getSettingsIterator("Keys in combat");
-			it.hasMoreElements();)
-		{
-			String key = it.peekNextKey();
-			String setting = it.getNext();
+            mKeyCommandsOffCombat[getKeyCode(key)] = CeGuiString(setting);
+            LOG_MESSAGE(Logger::UI,
+                Ogre::String("Key ") + key    + " (" + StringConverter::toString(getKeyCode(key))
+                + ") is assigned to command " + setting+" while not in combat");
+        }
 
-			mKeyCommandsInCombat[getKeyCode(key)] = CeGuiString(setting);
-			LOG_MESSAGE(Logger::UI,
-				Ogre::String("Key ") + key	+ " (" + StringConverter::toString(getKeyCode(key))
-				+ ") is assigned to command " + setting+" while in combat");
-		}
+        for (ConfigFile::SettingsIterator it = cfgfile->getSettingsIterator("Keys in combat");
+            it.hasMoreElements();)
+        {
+            String key = it.peekNextKey();
+            String setting = it.getNext();
 
-		for (ConfigFile::SettingsIterator it = cfg->getSettingsIterator("Mouse off combat");
-			it.hasMoreElements();)
-		{
-			String key = it.peekNextKey();
-			String setting = it.getNext();
+            mKeyCommandsInCombat[getKeyCode(key)] = CeGuiString(setting);
+            LOG_MESSAGE(Logger::UI,
+                Ogre::String("Key ") + key    + " (" + StringConverter::toString(getKeyCode(key))
+                + ") is assigned to command " + setting+" while in combat");
+        }
 
-			mMouseCommandsOffCombat[getMouseButtonCode(key)] = CeGuiString(setting);
-			LOG_MESSAGE(Logger::UI,
-				Ogre::String("Mouse Button ") + key	+ " (" + StringConverter::toString(getMouseButtonCode(key))
-				+ ") is assigned to command " + setting+" while not in combat");
-		}
+        for (ConfigFile::SettingsIterator it = cfgfile->getSettingsIterator("Mouse off combat");
+            it.hasMoreElements();)
+        {
+            String key = it.peekNextKey();
+            String setting = it.getNext();
 
-		for (ConfigFile::SettingsIterator it = cfg->getSettingsIterator("Mouse in combat");
-			it.hasMoreElements();)
-		{
-			String key = it.peekNextKey();
-			String setting = it.getNext();
+            mMouseCommandsOffCombat[getMouseButtonCode(key)] = CeGuiString(setting);
+            LOG_MESSAGE(Logger::UI,
+                Ogre::String("Mouse Button ") + key    + " (" + StringConverter::toString(getMouseButtonCode(key))
+                + ") is assigned to command " + setting+" while not in combat");
+        }
 
-			mMouseCommandsInCombat[getMouseButtonCode(key)] = CeGuiString(setting);
-			LOG_MESSAGE(Logger::UI,
-				Ogre::String("Mouse Button ") + key	+ " (" + StringConverter::toString(getMouseButtonCode(key))
-				+ ") is assigned to command " + setting+" while in combat");
-		}
+        for (ConfigFile::SettingsIterator it = cfgfile->getSettingsIterator("Mouse in combat");
+            it.hasMoreElements();)
+        {
+            String key = it.peekNextKey();
+            String setting = it.getNext();
 
-		delete cfg;
-	}
+            mMouseCommandsInCombat[getMouseButtonCode(key)] = CeGuiString(setting);
+            LOG_MESSAGE(Logger::UI,
+                Ogre::String("Mouse Button ") + key    + " (" + StringConverter::toString(getMouseButtonCode(key))
+                + ") is assigned to command " + setting+" while in combat");
+        }
+        */
+    }
 
-	int CommandMapper::getKeyCode(const Ogre::String &keyDescription)
-	{
-		StringVector parts = StringUtil::split(keyDescription, "+");
+    int CommandMapper::getKeyCode(const Ogre::String &keyDescription)
+    {
+        StringVector parts = StringUtil::split(keyDescription, "+");
 
-		int modifiers = 0;
-		for(size_t i = 0; i<parts.size()-1; i++)
-		{
-			modifiers |= InputManager::getSingleton().getSystemCode(parts[i]);
-		}
+        int modifiers = 0;
+        for(size_t i = 0; i<parts.size()-1; i++)
+        {
+            modifiers |= InputManager::getSingleton().getSystemCode(parts[i]);
+        }
 
-		return encodeKey(InputManager::getSingleton().getScanCode(parts[parts.size()-1]), modifiers);
-	}
+        return encodeKey(InputManager::getSingleton().getScanCode(parts[parts.size()-1]), modifiers);
+    }
 
-	int CommandMapper::getMouseButtonCode(int buttonNum)
-	{
-		return buttonNum;
-	}
+    int CommandMapper::getMouseButtonCode(int buttonNum)
+    {
+        return buttonNum;
+    }
 
-	int CommandMapper::getMouseButtonCode(const Ogre::String &buttonDescription)
-	{
-		StringVector parts = StringUtil::split(buttonDescription, "+");
+    int CommandMapper::getMouseButtonCode(const Ogre::String &buttonDescription)
+    {
+        StringVector parts = StringUtil::split(buttonDescription, "+");
 
-		int modifiers = 0;
-		for(size_t i = 0; i<parts.size()-1; i++)
-		{
-			modifiers |= InputManager::getSingleton().getSystemCode(parts[i]);
-		}
+        int modifiers = 0;
+        for(size_t i = 0; i<parts.size()-1; i++)
+        {
+            modifiers |= InputManager::getSingleton().getSystemCode(parts[i]);
+        }
 
-		int buttonNum = StringConverter::parseInt(parts[parts.size()-1].substr(6));
-		return encodeKey(getMouseButtonCode(buttonNum), modifiers);
-	}
+        int buttonNum = StringConverter::parseInt(parts[parts.size()-1].substr(6));
+        return encodeKey(getMouseButtonCode(buttonNum), modifiers);
+    }
 
-	MovementState CommandMapper::getMovement(const Ogre::String &movementDescription)
-	{
-		if (movementDescription == "left")
-		{
-			return MOVE_LEFT;
-		}
-		else if (movementDescription == "right")
-		{
-			return MOVE_RIGHT;
-		}
-		else if (movementDescription == "forward")
-		{
-			return MOVE_FORWARD;
-		}
-		else if (movementDescription == "backward")
-		{
-			return MOVE_BACKWARD;
-		}
-		else if (movementDescription == "turn_left")
-		{
-			return TURN_LEFT;
-		}
-		else if (movementDescription == "turn_right")
-		{
-			return TURN_RIGHT;
-		}
-		else if (movementDescription == "run")
-		{
-			return MOVE_RUN;
-		}
-		else if (movementDescription == "sneak")
-		{
-			return MOVE_SNEAK;
-		}
-		else if (movementDescription == "jump")
-		{
-			return MOVE_JUMP;
-		}
-		else if (movementDescription == "run_lock")
-		{
-			return MOVE_RUN_LOCK;
-		}
+    MovementState CommandMapper::getMovement(const Ogre::String &movementDescription)
+    {
+        if (movementDescription == "left")
+        {
+            return MOVE_LEFT;
+        }
+        else if (movementDescription == "right")
+        {
+            return MOVE_RIGHT;
+        }
+        else if (movementDescription == "forward")
+        {
+            return MOVE_FORWARD;
+        }
+        else if (movementDescription == "backward")
+        {
+            return MOVE_BACKWARD;
+        }
+        else if (movementDescription == "turn_left")
+        {
+            return TURN_LEFT;
+        }
+        else if (movementDescription == "turn_right")
+        {
+            return TURN_RIGHT;
+        }
+        else if (movementDescription == "run")
+        {
+            return MOVE_RUN;
+        }
+        else if (movementDescription == "sneak")
+        {
+            return MOVE_SNEAK;
+        }
+        else if (movementDescription == "jump")
+        {
+            return MOVE_JUMP;
+        }
+        else if (movementDescription == "run_lock")
+        {
+            return MOVE_RUN_LOCK;
+        }
 
-		return MOVE_NONE;
-	}
+        return MOVE_NONE;
+    }
 }
 

Modified: rl/trunk/engine/ui/src/DebugWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/DebugWindow.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/ui/src/DebugWindow.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -33,38 +33,38 @@
 
 template<> rl::DebugWindow* Ogre::Singleton<rl::DebugWindow>::ms_Singleton = 0;
 
-namespace rl 
+namespace rl
 {
   DebugWindow& DebugWindow::getSingleton(void)
     {
         return Ogre::Singleton<DebugWindow>::getSingleton();
     }
-	DebugWindow* DebugWindow::getSingletonPtr(void)
+    DebugWindow* DebugWindow::getSingletonPtr(void)
     {
         return Ogre::Singleton<DebugWindow>::getSingletonPtr();
     }
 
-	DebugWindow::DebugWindow() : CeGuiWindow("debugwindow.xml", WND_SHOW),
+    DebugWindow::DebugWindow() : CeGuiWindow("debugwindow.xml", WND_SHOW),
           mMessageText(),
           mPageCaption(),
           mPageText(),
           mPageTexts(),
           mCurrentPage(StringUtil::BLANK),
           mDebugPageName("General Informations")
-	{
-		mPageCaption = getWindow("DebugWindow/PageCaption");
-		mPageCaption->moveToFront();
+    {
+        mPageCaption = getWindow("DebugWindow/PageCaption");
+        mPageCaption->moveToFront();
 
-		mPageText = getMultiLineEditbox("DebugWindow/PageText");
+        mPageText = getMultiLineEditbox("DebugWindow/PageText");
 
-		mMessageText = getWindow("DebugWindow/MessageText");
-		mMessageText->moveToFront();
+        mMessageText = getWindow("DebugWindow/MessageText");
+        mMessageText->moveToFront();
 
-		bindCloseToCloseButton();
+        bindCloseToCloseButton();
         registerPage("General Informations");
-	}
+    }
 
-	DebugWindow::~DebugWindow()
+    DebugWindow::~DebugWindow()
     {
         unregisterPage("General Informations");
     }
@@ -123,7 +123,7 @@
             updatePageText();
         }
     }
-    
+
     void DebugWindow::setMessageText(const Ogre::String& text)
     {
         CeGuiString o(text.c_str());
@@ -132,7 +132,7 @@
 
     void DebugWindow::showNextPage()
     {
-        PageTextMap::iterator it = mPageTexts.find(mCurrentPage);        
+        PageTextMap::iterator it = mPageTexts.find(mCurrentPage);
         if (it != mPageTexts.end())
         {
             ++it;
@@ -149,10 +149,10 @@
         }
     }
 
-	void DebugWindow::run(Ogre::Real elapsedTime)
-	{
-		updateFps();
-	}
+    void DebugWindow::run(Ogre::Real elapsedTime)
+    {
+        updateFps();
+    }
 
     void DebugWindow::updatePageText()
     {
@@ -162,62 +162,62 @@
         mPageText->setText(text);
     }
 
-	void DebugWindow::updateFps()
-	{
-		const RenderTarget::FrameStats& stats = Root::getSingleton().getAutoCreatedWindow()->getStatistics();
+    void DebugWindow::updateFps()
+    {
+        const RenderTarget::FrameStats& stats = CoreSubsystem::getSingleton().getRenderWindow()->getStatistics();
 
-		Ogre::String textSt = "Current FPS: " + 
-			StringConverter::toString(stats.lastFPS)+
-			"\nBest/worst/avg FPS: " + 
-			StringConverter::toString(stats.bestFPS) + "/" + 
-			StringConverter::toString(stats.worstFPS) + "/" + 
-			StringConverter::toString(stats.avgFPS)+
-			"\nBest/worst Frame times: " + 
-			StringConverter::toString(stats.bestFPS) + "/" + 
-			StringConverter::toString(stats.worstFPS)+
-			"\nTriangle Count: " + 
-			StringConverter::toString(stats.triangleCount);
+        Ogre::String textSt = "Current FPS: " +
+            StringConverter::toString(stats.lastFPS)+
+            "\nBest/worst/avg FPS: " +
+            StringConverter::toString(stats.bestFPS) + "/" +
+            StringConverter::toString(stats.worstFPS) + "/" +
+            StringConverter::toString(stats.avgFPS)+
+            "\nBest/worst Frame times: " +
+            StringConverter::toString(stats.bestFPS) + "/" +
+            StringConverter::toString(stats.worstFPS)+
+            "\nTriangle Count: " +
+            StringConverter::toString(stats.triangleCount);
 
-		if (UiSubsystem::getSingleton().getActiveCharacter() != NULL && 
-			UiSubsystem::getSingleton().getActiveCharacter()->getActor() != NULL)
-		{
+        if (UiSubsystem::getSingleton().getActiveCharacter() != NULL &&
+            UiSubsystem::getSingleton().getActiveCharacter()->getActor() != NULL)
+        {
             ActorControlledObject* charObj = UiSubsystem::getSingletonPtr()->
-				getActiveCharacter()->getActor()->getControlledObject();
+                getActiveCharacter()->getActor()->getControlledObject();
 
             if( charObj != NULL )
             {
-			    Ogre::Vector3 pos = charObj->getMovableObject()->getParentNode()->getWorldPosition();
+                Ogre::Vector3 pos = charObj->getMovableObject()->getParentNode()->getWorldPosition();
 
-			    textSt += "\nPlayer Position [ "
-				    + StringConverter::toString(pos.x,2,0,32,std::ios_base::fixed)+", "
-				    + StringConverter::toString(pos.y,2,0,32,std::ios_base::fixed)+", "
-				    + StringConverter::toString(pos.z,2,0,32,std::ios_base::fixed)+" ]";
+                textSt += "\nPlayer Position [ "
+                    + StringConverter::toString(pos.x,2,0,32,std::ios_base::fixed)+", "
+                    + StringConverter::toString(pos.y,2,0,32,std::ios_base::fixed)+", "
+                    + StringConverter::toString(pos.z,2,0,32,std::ios_base::fixed)+" ]";
             }
-		}
+        }
 
         Actor* camActor = ActorManager::getSingleton().getActor("DefaultCamera");
-		if( camActor != 0 && camActor->_getSceneNode() != NULL )
-		{
-			Ogre::Camera* cam = dynamic_cast<CameraObject*>(camActor->getControlledObject())->getCamera();
+        if( camActor != 0 && camActor->_getSceneNode() != NULL )
+        {
+            Ogre::Camera* cam = dynamic_cast<CameraObject*>(camActor->getControlledObject())->getCamera();
             Ogre::Vector3 pos = cam->getDerivedPosition();
 
-			textSt += "\nCamera Position [ "
-				+ StringConverter::toString(pos.x,2,0,32,std::ios_base::fixed)+", "
-				+ StringConverter::toString(pos.y,2,0,32,std::ios_base::fixed)+", "
-				+ StringConverter::toString(pos.z,2,0,32,std::ios_base::fixed)+" ]";
-		}
+            textSt += "\nCamera Position [ "
+                + StringConverter::toString(pos.x,2,0,32,std::ios_base::fixed)+", "
+                + StringConverter::toString(pos.y,2,0,32,std::ios_base::fixed)+", "
+                + StringConverter::toString(pos.z,2,0,32,std::ios_base::fixed)+" ]";
+        }
 
         setPageText(mDebugPageName, textSt);
-	}
+    }
 
-	void DebugWindow::setVisible(bool visible, bool destroyAfterHide)
-	{
-		CeGuiWindow::setVisible(visible, destroyAfterHide);
-		if (visible)
+    void DebugWindow::setVisible(bool visible, bool destroyAfterHide)
+    {
+        CeGuiWindow::setVisible(visible, destroyAfterHide);
+        if (visible)
             GameLoop::getSingleton().addTask(this, GameLoop::TG_GRAPHICS);
-		else
-			GameLoop::getSingleton().removeTask(this);
-	}
+        else
+            GameLoop::getSingleton().removeTask(this);
+    }
 
     const Ogre::String& DebugWindow::getName() const
     {

Modified: rl/trunk/engine/ui/src/DialogCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/DialogCharacterController.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/ui/src/DialogCharacterController.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,7 +1,7 @@
 /*
 * This source file is part of Rastullahs Lockenpracht.
 * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
-* 
+*
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Perl Artistic License.
 *
@@ -43,126 +43,126 @@
 
 namespace rl {
 
-	DialogCharacterController::DialogCharacterController(Actor* camera, Actor* character)
-		: CharacterController(camera, character),
-		mTargetCameraPosition(Vector3::ZERO),
+    DialogCharacterController::DialogCharacterController(Actor* camera, Actor* character)
+        : CharacterController(camera, character),
+        mTargetCameraPosition(Vector3::ZERO),
         mTargetCameraDirection(Vector3::UNIT_Z),
-		mCurrFadeTextTime(0),
+        mCurrFadeTextTime(0),
         mTotalFadeTextTime(0),
         mText(),
         mDialogMode(DM_FRONT),
         mTextShown(false),
-		mDialogWindow(NULL),
-		mSubtitleWindow(NULL),
-		mSoundObject(NULL),
-		mTalkAnimation(NULL),
+        mDialogWindow(NULL),
+        mSubtitleWindow(NULL),
+        mSoundObject(NULL),
+        mTalkAnimation(NULL),
         mSubtitleSpeed(1.0f)
-	{
-		mCameraActor->getPhysicalThing()->freeze();
-		mCharacterActor->getPhysicalThing()->freeze();		
-		Camera* ogreCam = static_cast<Camera*>(mCameraActor->_getMovableObject());
-		ogreCam->setFixedYawAxis(true);
-		ogreCam->setPosition(Vector3::ZERO);	
-		ogreCam->setOrientation(Quaternion::IDENTITY);
-		mCameraActor->_getSceneNode()->setFixedYawAxis(true);
+    {
+        mCameraActor->getPhysicalThing()->freeze();
+        mCharacterActor->getPhysicalThing()->freeze();
+        Camera* ogreCam = static_cast<Camera*>(mCameraActor->_getMovableObject());
+        ogreCam->setFixedYawAxis(true);
+        ogreCam->setPosition(Vector3::ZERO);
+        ogreCam->setOrientation(Quaternion::IDENTITY);
+        mCameraActor->_getSceneNode()->setFixedYawAxis(true);
 
-        mSubtitleSpeed = ConfigurationManager::getSingleton().getRealSetting( "subtitle_speed", 1.0 );
-	}
+        mSubtitleSpeed = ConfigurationManager::getSingleton().getRealSetting(ConfigurationManager::CS_GENERAL, "Subtitle Speed");
+    }
 
-	DialogCharacterController::~DialogCharacterController()
-	{
-		mCameraActor->getPhysicalThing()->unfreeze();
-		mCharacterActor->getPhysicalThing()->unfreeze();
-		if (mDialogWindow != NULL)
-		{
+    DialogCharacterController::~DialogCharacterController()
+    {
+        mCameraActor->getPhysicalThing()->unfreeze();
+        mCharacterActor->getPhysicalThing()->unfreeze();
+        if (mDialogWindow != NULL)
+        {
             mDialogWindow->setVisible(false, true);
-			mDialogWindow = NULL;
-		}
-		if (mSubtitleWindow != NULL)
-		{
+            mDialogWindow = NULL;
+        }
+        if (mSubtitleWindow != NULL)
+        {
             mSubtitleWindow->setVisible(false, true);
-			mSubtitleWindow = NULL;
-		}
-		delete mSoundObject;
-	}
+            mSubtitleWindow = NULL;
+        }
+        delete mSoundObject;
+    }
 
-	CharacterController::ControllerType DialogCharacterController::getType() const
-	{
-		return CTRL_DIALOG;
-	}
+    CharacterController::ControllerType DialogCharacterController::getType() const
+    {
+        return CTRL_DIALOG;
+    }
 
-	void DialogCharacterController::setDialogPartner(Actor* partner)
-	{
-		mDialogPartner = partner;
-		resetCamera();
-	}
+    void DialogCharacterController::setDialogPartner(Actor* partner)
+    {
+        mDialogPartner = partner;
+        resetCamera();
+    }
 
-	void DialogCharacterController::run(Real elapsedTime)
-	{
-		if( elapsedTime <= 0.0 )
-			return;
+    void DialogCharacterController::run(Real elapsedTime)
+    {
+        if( elapsedTime <= 0.0 )
+            return;
 
-		// Aktuellen Abstand zur gew?nschten Position berechnen
-		Vector3 posDistance = (mTargetCameraPosition - mCameraActor->_getSceneNode()->getPosition());
-		// Ist eine Anpassung n?tig?
-		if( posDistance != Vector3::ZERO )
-		{
-			// Die Kameraanpassgeschwindigkeit
-			Real speed = 1/elapsedTime;
-			mCameraActor->setPosition(mTargetCameraPosition);					
-		}
+        // Aktuellen Abstand zur gew?nschten Position berechnen
+        Vector3 posDistance = (mTargetCameraPosition - mCameraActor->_getSceneNode()->getPosition());
+        // Ist eine Anpassung n?tig?
+        if( posDistance != Vector3::ZERO )
+        {
+            // Die Kameraanpassgeschwindigkeit
+            Real speed = 1/elapsedTime;
+            mCameraActor->setPosition(mTargetCameraPosition);
+        }
 
         mCameraActor->setOrientation( Quaternion::IDENTITY );
         mCameraActor->_getSceneNode()->setDirection( mTargetCameraDirection );
         mCameraActor->_getSceneNode()->_update( true, false );
 
-		// Textanzeigedauer
-		if (mCurrFadeTextTime >= 0)
-		{
-			mCurrFadeTextTime -= elapsedTime;
-		}
+        // Textanzeigedauer
+        if (mCurrFadeTextTime >= 0)
+        {
+            mCurrFadeTextTime -= elapsedTime;
+        }
 
-		if (mTextShown && mCurrFadeTextTime <= 0)
-		{
-			mCurrFadeTextTime = 0;
+        if (mTextShown && mCurrFadeTextTime <= 0)
+        {
+            mCurrFadeTextTime = 0;
             mTotalFadeTextTime = 0;
-			mTextShown = false;
-   			if (mSoundObject)
+            mTextShown = false;
+               if (mSoundObject)
             {
                 mSoundObject->stop();
             }
-			mSubtitleWindow->setVisible(false);
-			mDialogWindow->textFinished();
-		}
+            mSubtitleWindow->setVisible(false);
+            mDialogWindow->textFinished();
+        }
 
-        LOG_DEBUG(Logger::UI, 
-				StringConverter::toString(mSubtitleWindow->getWindow()->getEffectiveAlpha())
-				+ ": "
-				+ mSubtitleWindow->getText()
-				+ CeGuiString(mSubtitleWindow->getWindow()->isVisible() ? "vis" : "unvis")
-				+ ", Time: "
-				+ StringConverter::toString(mCurrFadeTextTime));
-	}
+        LOG_DEBUG(Logger::UI,
+                StringConverter::toString(mSubtitleWindow->getWindow()->getEffectiveAlpha())
+                + ": "
+                + mSubtitleWindow->getText()
+                + CeGuiString(mSubtitleWindow->getWindow()->isVisible() ? "vis" : "unvis")
+                + ", Time: "
+                + StringConverter::toString(mCurrFadeTextTime));
+    }
 
-	void DialogCharacterController::setDialogWindow(DialogWindow* dialog)
-	{
-		mDialogWindow = dialog;
-	}
+    void DialogCharacterController::setDialogWindow(DialogWindow* dialog)
+    {
+        mDialogWindow = dialog;
+    }
 
-	void DialogCharacterController::setSubtitleWindow(SubtitleWindow* subtitles)
-	{
-		mSubtitleWindow = subtitles;
-	}
+    void DialogCharacterController::setSubtitleWindow(SubtitleWindow* subtitles)
+    {
+        mSubtitleWindow = subtitles;
+    }
 
-	void DialogCharacterController::toggleViewMode()
-	{
-		/// @todo Krasser Gesichtszoom? Halbtotale... usw?
-	}
+    void DialogCharacterController::toggleViewMode()
+    {
+        /// @todo Krasser Gesichtszoom? Halbtotale... usw?
+    }
 
-	void DialogCharacterController::resetCamera()
-	{
-		recalculateCamera( mDialogPartner, mCharacterActor );
-	}
+    void DialogCharacterController::resetCamera()
+    {
+        recalculateCamera( mDialogPartner, mCharacterActor );
+    }
 
     void DialogCharacterController::recalculateCamera( Actor* speaker, Actor* listener )
     {
@@ -173,55 +173,55 @@
         {
             MeshObject* mo = dynamic_cast<MeshObject*>(speaker->getControlledObject());
             Ogre::AxisAlignedBox aab = mo->getDefaultSize();
-            Vector3 offset( 
-                aab.getCenter().x, 
-                aab.getMaximum().y*0.933, 
+            Vector3 offset(
+                aab.getCenter().x,
+                aab.getMaximum().y*0.933,
                 aab.getCenter().z );
             charEyes += speaker->getWorldOrientation()*offset;
-        }        
+        }
 
-        Vector3 partEyes = listener->getWorldPosition();        
+        Vector3 partEyes = listener->getWorldPosition();
         // Modify by MeshBounds
         if( listener->getControlledObject()->isMeshObject() )
         {
             MeshObject* mo = dynamic_cast<MeshObject*>(listener->getControlledObject());
             Ogre::AxisAlignedBox aab = mo->getDefaultSize();
-            Vector3 offset( 
-                aab.getCenter().x, 
-                aab.getMaximum().y*0.933, 
+            Vector3 offset(
+                aab.getCenter().x,
+                aab.getMaximum().y*0.933,
                 aab.getCenter().z );
             partEyes += listener->getWorldOrientation()*offset;
         }
 
-		Vector3 globalCameraPosition = ( charEyes + partEyes ) / 2.0f;
+        Vector3 globalCameraPosition = ( charEyes + partEyes ) / 2.0f;
 
-		// Weltkoordinaten in lokale umwandeln
-		mTargetCameraPosition = 
-			-1*(mCameraActor->_getSceneNode()->getParentSceneNode()->getWorldOrientation().Inverse()*
-			(mCameraActor->_getSceneNode()->getParentSceneNode()->getWorldPosition() - globalCameraPosition));
+        // Weltkoordinaten in lokale umwandeln
+        mTargetCameraPosition =
+            -1*(mCameraActor->_getSceneNode()->getParentSceneNode()->getWorldOrientation().Inverse()*
+            (mCameraActor->_getSceneNode()->getParentSceneNode()->getWorldPosition() - globalCameraPosition));
 
 
         mTargetCameraDirection = ( partEyes - mTargetCameraPosition ).normalisedCopy();
     }
 
-	float DialogCharacterController::getShowTextLength(const CeGuiString& text) const
-	{
-		return 0.019f * text.length() + // Zeit f?rs Text lesen
-			   0.25f;                   // Fade in
-	}
+    float DialogCharacterController::getShowTextLength(const CeGuiString& text) const
+    {
+        return 0.019f * text.length() + // Zeit f?rs Text lesen
+               0.25f;                   // Fade in
+    }
 
-	void DialogCharacterController::response(
-		Actor* actor, const CeGuiString& text, const Ogre::String& soundFile)
-	{
+    void DialogCharacterController::response(
+        Actor* actor, const CeGuiString& text, const Ogre::String& soundFile)
+    {
         if( actor == mDialogPartner )
-		    recalculateCamera( mCharacterActor, mDialogPartner );
+            recalculateCamera( mCharacterActor, mDialogPartner );
         else
             recalculateCamera( mDialogPartner, mCharacterActor );
 
         // Ungef?hre Lesedauer bestimmen
         float fadeTime = getShowTextLength(text);
-		if (soundFile.length() == 0)
-		{
+        if (soundFile.length() == 0)
+        {
             float speed = mSubtitleSpeed;
 
             if( mSubtitleSpeed == 0.0 )
@@ -229,64 +229,64 @@
 
             mCurrFadeTextTime = fadeTime*speed;
             mTotalFadeTextTime = fadeTime*speed;
-		}
-		else
-		{
+        }
+        else
+        {
             if( mSoundObject != NULL )
                 mSoundObject->getMovableObject()->getParentSceneNode()->detachObject(
                     mSoundObject->getMovableObject() );
 
-			delete mSoundObject;
-			mSoundObject = 
-				new SoundObject(
-					SoundManager::getSingleton().getActiveDriver()->
-						createSample(
-							SoundManager::getSingleton().getByName(soundFile)),
-					soundFile);
+            delete mSoundObject;
+            mSoundObject =
+                new SoundObject(
+                    SoundManager::getSingleton().getActiveDriver()->
+                        createSample(
+                            SoundManager::getSingleton().getByName(soundFile)),
+                    soundFile);
 
-			// An Sprecher h?ngen
+            // An Sprecher h?ngen
             actor->_getSceneNode()->attachObject( mSoundObject->getMovableObject() );
             actor->_getSceneNode()->_update( true, false );
             mSoundObject->_setActor( actor );
-			mSoundObject->set3d(true);
-			mSoundObject->play();
+            mSoundObject->set3d(true);
+            mSoundObject->play();
             mSoundObject->_update();
 
 
             mCurrFadeTextTime = std::max(fadeTime*mSubtitleSpeed,mSoundObject->getLength());
             mTotalFadeTextTime = mCurrFadeTextTime;
-		}
+        }
 
-		MeshObject* mesh = dynamic_cast<MeshObject*>(actor->getControlledObject());
-		if (mesh != NULL)
-		{
-			if (mesh->hasAnimation("reden"))
-			{
-				mesh->stopAllAnimations();
-				mTalkAnimation = mesh->startAnimation("reden");
-			}
-		}
+        MeshObject* mesh = dynamic_cast<MeshObject*>(actor->getControlledObject());
+        if (mesh != NULL)
+        {
+            if (mesh->hasAnimation("reden"))
+            {
+                mesh->stopAllAnimations();
+                mTalkAnimation = mesh->startAnimation("reden");
+            }
+        }
 
-        LOG_DEBUG(Logger::UI, 
-			"Response: "
-				+ actor->getName()
-				+ " File: '"
-				+ soundFile 
-				+ "', Text: '" + text + "', Time: "
-				+ StringConverter::toString(mCurrFadeTextTime));
+        LOG_DEBUG(Logger::UI,
+            "Response: "
+                + actor->getName()
+                + " File: '"
+                + soundFile
+                + "', Text: '" + text + "', Time: "
+                + StringConverter::toString(mCurrFadeTextTime));
 
 
-		mTextShown = true;
+        mTextShown = true;
 
-		if (mSubtitleWindow != NULL && !text.empty())
-		{
-			mSubtitleWindow->show(text);
-		}
-	}
+        if (mSubtitleWindow != NULL && !text.empty())
+        {
+            mSubtitleWindow->show(text);
+        }
+    }
 
     bool DialogCharacterController::injectMouseUp(int mouseButtonMask)
     {
-        
+
         if( mTextShown && (mCurrFadeTextTime+0.25)<mTotalFadeTextTime )
         {
             mCurrFadeTextTime = -1;

Modified: rl/trunk/engine/ui/src/MovementCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/MovementCharacterController.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/ui/src/MovementCharacterController.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
 * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
-* 
+*
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the Perl Artistic License.
 *
@@ -55,29 +55,29 @@
 
     String MovementCharacterController::msDebugWindowPageName = "MovementCharacterController";
 
-	MovementCharacterController::CharacterState::CharacterState()
-		: mIsAirBorne(false),
+    MovementCharacterController::CharacterState::CharacterState()
+        : mIsAirBorne(false),
         mHasFloorContact(false),
-		mStartJump(false),
-		mJumpTimer(0.0),
-		mDesiredVel(Vector3::ZERO),
-		mCurrentMovementState(MOVE_NONE),
-		mLastMovementState(MOVE_NONE),
+        mStartJump(false),
+        mJumpTimer(0.0),
+        mDesiredVel(Vector3::ZERO),
+        mCurrentMovementState(MOVE_NONE),
+        mLastMovementState(MOVE_NONE),
         mPose(Stand)
-	{
+    {
 
-	}
+    }
 
-	MovementCharacterController::MovementCharacterController(Actor* camera, Creature* character)
-		: CharacterController(camera, character->getActor()),
-		mCharacterState(),
-		mCharacter(character),
-		mDesiredDistance(2.00),
-		mDistanceRange(0.60, 7.00),
-		mYaw(0),
+    MovementCharacterController::MovementCharacterController(Actor* camera, Creature* character)
+        : CharacterController(camera, character->getActor()),
+        mCharacterState(),
+        mCharacter(character),
+        mDesiredDistance(2.00),
+        mDistanceRange(0.60, 7.00),
+        mYaw(0),
         mCamYaw(0),
-		mPitch(20),
-		mPitchRange(Degree(-75), Degree(85)),
+        mPitch(20),
+        mPitchRange(Degree(-75), Degree(85)),
         mLinearSpringK(400.0f),
         mLinearDampingK(Math::NEG_INFINITY),
         mCamMoveAwayVelocity(4.0f),
@@ -85,29 +85,26 @@
         mCamMoveAwayRange(8.0f),
         mRotLinearSpringK(600.0f),
         mRotLinearDampingK(Math::NEG_INFINITY),
-		mLookAtOffset(),
-		mRotationSpeed(Degree(120.0f)),
+        mLookAtOffset(),
+        mRotationSpeed(Degree(120.0f)),
         mMouseSensitivity(4.0f),
-		mSpeedModifier(1.0f),
-		mViewMode(VM_THIRD_PERSON),
-//		mMaxDelay(1.0/20.0),
-		mObstractedFrameCount(0),
-		mObstractedTime(0.0f),
-		mCameraJammedFrameCount(0),
-		mCameraJammedTime(0.0f),
-		mRaycast(new PhysicsMaterialRaycast()),
-		mGravitation(),
+        mSpeedModifier(1.0f),
+        mViewMode(VM_THIRD_PERSON),
+//        mMaxDelay(1.0/20.0),
+        mObstractedFrameCount(0),
+        mObstractedTime(0.0f),
+        mCameraJammedFrameCount(0),
+        mCameraJammedTime(0.0f),
+        mRaycast(new PhysicsMaterialRaycast()),
+        mGravitation(),
         mSelector(CoreSubsystem::getSingleton().getWorld()->getSceneManager())
-	{
+    {
         DebugWindow::getSingleton().registerPage(msDebugWindowPageName);
 
 
-		mGravitation = PhysicsManager::getSingleton().getGravity();
-		mMouseSensitivity
-			= ConfigurationManager::getSingleton().getIntSetting("mouse_sensitivity", 4);
-        int temp = 
-            ConfigurationManager::getSingleton().getIntSetting("mouse_invert", 0);
-        mInvertedMouse = temp != 0;
+        mGravitation = PhysicsManager::getSingleton().getGravity();
+        mMouseSensitivity = ConfigurationManager::getSingleton().getIntSetting(ConfigurationManager::CS_INPUT, "Mouse Sensitivity");
+        mInvertedMouse = ConfigurationManager::getSingleton().getBoolSetting(ConfigurationManager::CS_INPUT, "Mouse Invert");
 
         // The relationCoefficient determines the relation between spring accel in target direction
         // and damping in velocity direction. 1.0 means equilibrium is reached in optimal time
@@ -118,46 +115,46 @@
         mLinearDampingK = relationCoefficient * 2.0f * Math::Sqrt(mLinearSpringK);
         mRotLinearDampingK = relationCoefficient * 2.0f * Math::Sqrt(mRotLinearSpringK);
 
-		// Offset for the look at point,
-		// so the cam does look at the characters head instead of the feet.
-		MeshObject* charMesh = dynamic_cast<MeshObject*>(
-			mCharacterActor->getControlledObject());
+        // Offset for the look at point,
+        // so the cam does look at the characters head instead of the feet.
+        MeshObject* charMesh = dynamic_cast<MeshObject*>(
+            mCharacterActor->getControlledObject());
         AxisAlignedBox aabb = charMesh->getDefaultSize();
 
         // wird sp?ter neu berechnet in calculateOptimalCameraPosition
         mLookAtOffset = Vector3(0, (aabb.getMaximum() - aabb.getMinimum()).y * 0.45f, 0);
 
-		// The actor should be controlled manually,
-		// so let the PM prepare it accordingly
-		PhysicsManager::getSingleton().setPhysicsController(
-			mCharacterActor->getPhysicalThing(), this);
-		PhysicsManager::getSingleton().setPhysicsController(
-			mCameraActor->getPhysicalThing(), this);
+        // The actor should be controlled manually,
+        // so let the PM prepare it accordingly
+        PhysicsManager::getSingleton().setPhysicsController(
+            mCharacterActor->getPhysicalThing(), this);
+        PhysicsManager::getSingleton().setPhysicsController(
+            mCameraActor->getPhysicalThing(), this);
         // We also handle char<->level, char<->default collision from now on
         PhysicsManager::getSingleton().setCharLevelContactCallback(this);
         PhysicsManager::getSingleton().setCharDefaultContactCallback(this);
-		// Fit Collision proxy to idle anim
+        // Fit Collision proxy to idle anim
         mCharacterActor->getPhysicalThing()->fitToPose("idle");
 
         MeshObject* mesh = dynamic_cast<MeshObject*>(mCharacterActor->getControlledObject());
-		mesh->stopAllAnimations();
-		mesh->startAnimation("idle");
+        mesh->stopAllAnimations();
+        mesh->startAnimation("idle");
 
-		setViewMode(VM_THIRD_PERSON);
+        setViewMode(VM_THIRD_PERSON);
 
         // We want to check for visibility from char's POV.
         mSelector.setCheckVisibility(true, mCharacterActor);
-	}
+    }
 
-	//------------------------------------------------------------------------
-	MovementCharacterController::~MovementCharacterController()
-	{
+    //------------------------------------------------------------------------
+    MovementCharacterController::~MovementCharacterController()
+    {
         delete mRaycast;
-		// actors aren't controlled anymore
-		PhysicsManager::getSingleton().setPhysicsController(
-			mCharacterActor->getPhysicalThing(), NULL);
-		PhysicsManager::getSingleton().setPhysicsController(
-			mCameraActor->getPhysicalThing(), NULL);
+        // actors aren't controlled anymore
+        PhysicsManager::getSingleton().setPhysicsController(
+            mCharacterActor->getPhysicalThing(), NULL);
+        PhysicsManager::getSingleton().setPhysicsController(
+            mCameraActor->getPhysicalThing(), NULL);
         // Char<->Level collision back to default
         PhysicsManager::getSingleton().setCharLevelContactCallback(NULL);
         // Char<->Default collision back to default
@@ -180,17 +177,17 @@
         {
             mCharacterActor->_getSceneNode()->removeChild(mSceneNode);
         }
-	}
+    }
 
-	//------------------------------------------------------------------------
-	CharacterController::ControllerType MovementCharacterController::getType() const
-	{
-		return CTRL_MOVEMENT;
-	}
+    //------------------------------------------------------------------------
+    CharacterController::ControllerType MovementCharacterController::getType() const
+    {
+        return CTRL_MOVEMENT;
+    }
 
-	//------------------------------------------------------------------------
-	void MovementCharacterController::run(Real elapsedTime)
-	{
+    //------------------------------------------------------------------------
+    void MovementCharacterController::run(Real elapsedTime)
+    {
         int movement = mCharacterState.mCurrentMovementState;
         updateAnimationState(movement);
         updateCharacterState(movement, elapsedTime);
@@ -213,11 +210,11 @@
         // Do we need to reset the Camera?
         Vector3 charPos = mCharacterActor->getWorldPosition();
         Quaternion charOri = mCharacterActor->getWorldOrientation();
-		//mCharBody->getPositionOrientation(charPos, charOri);
+        //mCharBody->getPositionOrientation(charPos, charOri);
 
-		Vector3 camPos;
-		Quaternion camOri;
-		mCamBody->getPositionOrientation(camPos, camOri);
+        Vector3 camPos;
+        Quaternion camOri;
+        mCamBody->getPositionOrientation(camPos, camOri);
 
         float maxdistance;
         if (mViewMode == VM_FIRST_PERSON)
@@ -225,32 +222,32 @@
         else
             maxdistance = 1.3f * mDesiredDistance + 1.4f;
 
-		// if we have more than 250ms and at least five frames with camera distance higher
-		// than desired distance, reset camera
-		if ((camPos - (charPos + charOri*mLookAtOffset)).length() > maxdistance)
-		{
-			mCameraJammedTime += elapsedTime;
-			++mCameraJammedFrameCount;
-		}
-		else
-		{
-			mCameraJammedTime = 0.0f;
-			mCameraJammedFrameCount = 0;
-		}
+        // if we have more than 250ms and at least five frames with camera distance higher
+        // than desired distance, reset camera
+        if ((camPos - (charPos + charOri*mLookAtOffset)).length() > maxdistance)
+        {
+            mCameraJammedTime += elapsedTime;
+            ++mCameraJammedFrameCount;
+        }
+        else
+        {
+            mCameraJammedTime = 0.0f;
+            mCameraJammedFrameCount = 0;
+        }
 
-		if (mCameraJammedTime > 0.250f && mCameraJammedFrameCount > 5)
-		{
-			mCameraJammedFrameCount = 0;
-			resetCamera();
-		}
-			
+        if (mCameraJammedTime > 0.250f && mCameraJammedFrameCount > 5)
+        {
+            mCameraJammedFrameCount = 0;
+            resetCamera();
+        }
+
         mCharacterState.mLastMovementState = mCharacterState.mCurrentMovementState;
     }
 
-	//------------------------------------------------------------------------
-	void MovementCharacterController::updateCharacterState(int movement, Ogre::Real elapsedTime)
-	{
-		InputManager* im = InputManager::getSingletonPtr();
+    //------------------------------------------------------------------------
+    void MovementCharacterController::updateCharacterState(int movement, Ogre::Real elapsedTime)
+    {
+        InputManager* im = InputManager::getSingletonPtr();
         Real gs = mCharacter->getWert(Creature::WERT_GS);
         Real auPerSecond = 0.0; // Standard - Ausdauer-verbrauch/Regeneration pro Sekunde
         bool canRun = mCharacter->getAu() > 6.0f;
@@ -400,22 +397,22 @@
 
 
 
-		mDesiredDistance -= im->getMouseRelativeZ() * 0.002;
-		if (mDesiredDistance < mDistanceRange.first)
-		{
-			mDesiredDistance = mDistanceRange.first;
-		}
-		if (mDesiredDistance > mDistanceRange.second)
-		{
-			mDesiredDistance = mDistanceRange.second;
-		}
+        mDesiredDistance -= im->getMouseRelativeZ() * 0.002;
+        if (mDesiredDistance < mDistanceRange.first)
+        {
+            mDesiredDistance = mDistanceRange.first;
+        }
+        if (mDesiredDistance > mDistanceRange.second)
+        {
+            mDesiredDistance = mDistanceRange.second;
+        }
 
         if (mInvertedMouse)
-		    mPitch -= 0.5 * mMouseSensitivity * Degree(im->getMouseRelativeY() / 10);
+            mPitch -= 0.5 * mMouseSensitivity * Degree(im->getMouseRelativeY() / 10);
         else
             mPitch += 0.5 * mMouseSensitivity * Degree(im->getMouseRelativeY() / 10);
-		if (mPitch < mPitchRange.first) mPitch = mPitchRange.first;
-		if (mPitch > mPitchRange.second) mPitch = mPitchRange.second;
+        if (mPitch < mPitchRange.first) mPitch = mPitchRange.first;
+        if (mPitch > mPitchRange.second) mPitch = mPitchRange.second;
 
 
         if( !im->isCeguiActive() && mViewMode == VM_FIRST_PERSON || mViewMode == VM_THIRD_PERSON )
@@ -425,45 +422,45 @@
                 mYaw -= mMouseSensitivity / 6.0 * rotationSpeed * Degree(im->getMouseRelativeX() / 15);
 
                 while (mYaw.valueDegrees() > 360.0f) mYaw -= Degree(360.0f);
-		        while (mYaw.valueDegrees() < -360.0f) mYaw += Degree(360.0f);
+                while (mYaw.valueDegrees() < -360.0f) mYaw += Degree(360.0f);
             }
         }
     }
 
-	//------------------------------------------------------------------------
-	void MovementCharacterController::updateCameraLookAt(Ogre::Real elapsedTime)
-	{
+    //------------------------------------------------------------------------
+    void MovementCharacterController::updateCameraLookAt(Ogre::Real elapsedTime)
+    {
         InputManager* im = InputManager::getSingletonPtr();
-        
 
+
         if( !im->isCeguiActive() && mViewMode == VM_FREE_CAMERA )
         {
             mCamYaw -= 2 * mMouseSensitivity / 4.0 * mRotationSpeed * Degree(im->getMouseRelativeX() / 15);
 
-		    while (mCamYaw.valueDegrees() > 360.0f) mCamYaw -= Degree(360.0f);
-		    while (mCamYaw.valueDegrees() < -360.0f) mCamYaw += Degree(360.0f);
+            while (mCamYaw.valueDegrees() > 360.0f) mCamYaw -= Degree(360.0f);
+            while (mCamYaw.valueDegrees() < -360.0f) mCamYaw += Degree(360.0f);
         }
 
-		SceneNode* cameraNode = mCameraActor->_getSceneNode();
+        SceneNode* cameraNode = mCameraActor->_getSceneNode();
 
-		Vector3 charPos;
-		Quaternion charOri;
-		//mCharBody->getPositionOrientation(charPos, charOri);
+        Vector3 charPos;
+        Quaternion charOri;
+        //mCharBody->getPositionOrientation(charPos, charOri);
         charPos = mCharacterActor->getWorldPosition();
         charOri = mCharacterActor->getWorldOrientation();
 
-		if( mViewMode == VM_FIRST_PERSON)
-		{
-			Quaternion camOri;
+        if( mViewMode == VM_FIRST_PERSON)
+        {
+            Quaternion camOri;
             camOri.FromAngleAxis(mPitch, Vector3::NEGATIVE_UNIT_X);
-			cameraNode->lookAt(
-				charPos
-				+ charOri * mLookAtOffset
-				+ charOri * camOri * (-Vector3::UNIT_Z), 
-				Node::TS_WORLD);
-		}
-		else if( mViewMode == VM_THIRD_PERSON )
-		{
+            cameraNode->lookAt(
+                charPos
+                + charOri * mLookAtOffset
+                + charOri * camOri * (-Vector3::UNIT_Z),
+                Node::TS_WORLD);
+        }
+        else if( mViewMode == VM_THIRD_PERSON )
+        {
             // Kamera-Gr??e beziehen
             CameraObject* ogreCam = static_cast<CameraObject*>(
                 mCameraActor->getControlledObject());
@@ -472,15 +469,15 @@
             Real radius = (aabb.getMaximum()-aabb.getMinimum()).length() / 2.0f;
 
             cameraNode->lookAt(
-				charPos	+ mLookAtOffset
-                + charOri * (-Vector3::UNIT_Z*radius), 
-				Node::TS_WORLD);
+                charPos    + mLookAtOffset
+                + charOri * (-Vector3::UNIT_Z*radius),
+                Node::TS_WORLD);
 
-		}
+        }
         else if( mViewMode == VM_FREE_CAMERA )
         {
             cameraNode->lookAt(
-				charPos	+ mLookAtOffset,
+                charPos    + mLookAtOffset,
                 Node::TS_WORLD);
         }
 
@@ -495,7 +492,7 @@
             Quaternion camOri;
             mCamBody->getPositionOrientation(camPos, camOri);
             Vector3 camPoint, charPoint, normal;
-            int collisionPoints = 
+            int collisionPoints =
                 OgreNewt::CollisionTools::CollisionClosestPoint(
                     PhysicsManager::getSingleton()._getNewtonWorld(),
                     mCamBody->getCollision(), camOri, camPos,
@@ -516,17 +513,17 @@
     // adopted from the chararcter demo in the newton sdk
     // copyright 2000-2004
     // By Julio Jerez
-	int MovementCharacterController::userProcess()
-	{
+    int MovementCharacterController::userProcess()
+    {
         if ((m_body0 == mCamBody && m_body1 == mCharBody)
             || (m_body0 == mCharBody && m_body1 == mCamBody))
         {
             // No collision between char and camera
             return 0;
         }
-		else if (m_body0 == mCamBody || m_body1 == mCamBody)
-		{
-			// this is camera collision
+        else if (m_body0 == mCamBody || m_body1 == mCamBody)
+        {
+            // this is camera collision
 
             if( mViewMode == VM_FIRST_PERSON )
                 return 0;
@@ -535,17 +532,17 @@
             setContactElasticity(0.0f);
 
             return 1;
-		}
-		else if (m_body0 == mCharBody || m_body1 == mCharBody)
-		{
-			// this is character collision
-			Vector3 point;
-			Vector3 normal;
-			getContactPositionAndNormal(point, normal);
+        }
+        else if (m_body0 == mCharBody || m_body1 == mCharBody)
+        {
+            // this is character collision
+            Vector3 point;
+            Vector3 normal;
+            getContactPositionAndNormal(point, normal);
 
-			// determine if this contact is with the floor.
-			// Meaning the contact normal has an angle to UNIT_Y of 20? or less.
-			Degree angle = Math::ACos(normal.dotProduct(Vector3::UNIT_Y));
+            // determine if this contact is with the floor.
+            // Meaning the contact normal has an angle to UNIT_Y of 20? or less.
+            Degree angle = Math::ACos(normal.dotProduct(Vector3::UNIT_Y));
 
             Vector3 charPos;
             Quaternion charOri;
@@ -562,88 +559,88 @@
 
             if ( isFloorCollision )
             {
-				mCharacterState.mHasFloorContact = true;
+                mCharacterState.mHasFloorContact = true;
             }
             else
             {
 
-				Vector3 velocity = mCharBody->getVelocity();
+                Vector3 velocity = mCharBody->getVelocity();
 
-				// calculate char velocity perpendicular to the contact normal
-				Vector3 tangentVel = velocity - normal * (normal.dotProduct(velocity));
+                // calculate char velocity perpendicular to the contact normal
+                Vector3 tangentVel = velocity - normal * (normal.dotProduct(velocity));
 
-				// align the tangent at the contact point with the
-				// tangent velocity vector of the char
-				rotateTangentDirections(tangentVel);
-			}
+                // align the tangent at the contact point with the
+                // tangent velocity vector of the char
+                rotateTangentDirections(tangentVel);
+            }
 
 
             // beinflusst die Sprungh?he!
             // der erste Sprung bleibt normal, jeder weitere Sprung ist ungef?hr um
-            // die angegebene Zahl h?her (eher 2*die angegebene Zahl oder so, 
+            // die angegebene Zahl h?her (eher 2*die angegebene Zahl oder so,
             // vermutlich wieder framedauer abh?ngig!)
-			setContactElasticity(0.3f); // was 0.3f 
-			setContactSoftness(0.01f);
+            setContactElasticity(0.3f); // was 0.3f
+            setContactSoftness(0.01f);
 
-			setContactFrictionState(1, 0);
-			setContactFrictionState(1, 1);
-		}
+            setContactFrictionState(1, 0);
+            setContactFrictionState(1, 1);
+        }
 
-		// return one to tell Newton we want to accept this contact
-		return 1;
-	}
+        // return one to tell Newton we want to accept this contact
+        return 1;
+    }
 
     //------------------------------------------------------------------------
     // adopted from the chararcter demo in the newton sdk
     // copyright 2000-2004
     // By Julio Jerez
-	void MovementCharacterController::OnApplyForceAndTorque(PhysicalThing* thing)
-	{
-		OgreNewt::World* world = PhysicsManager::getSingleton()._getNewtonWorld();
-		OgreNewt::Body* body = thing->_getBody();
+    void MovementCharacterController::OnApplyForceAndTorque(PhysicalThing* thing)
+    {
+        OgreNewt::World* world = PhysicsManager::getSingleton()._getNewtonWorld();
+        OgreNewt::Body* body = thing->_getBody();
 
-		// Get the current world timestep
-		Real timestep = world->getTimeStep();
+        // Get the current world timestep
+        Real timestep = world->getTimeStep();
 
-		if (body == mCamBody)
-		{
-			calculateCamera(timestep);
-		}
-		else
-		{
-		    mCharacterState.mJumpTimer += timestep;
+        if (body == mCamBody)
+        {
+            calculateCamera(timestep);
+        }
+        else
+        {
+            mCharacterState.mJumpTimer += timestep;
             static Real timeSinceLastFloorContact(0.0f); // damit kleine Bodenunebenheiten nicht gleich zum "Sprung f?hren"
             if( !mCharacterState.mHasFloorContact )
                 timeSinceLastFloorContact += timestep;
             else
                 timeSinceLastFloorContact = 0.0f;
-            
-            
-            
-            
+
+
+
+
             // apply character force
-			Vector3 position;
-			Quaternion orientation;
-			body->getPositionOrientation(position, orientation);
+            Vector3 position;
+            Quaternion orientation;
+            body->getPositionOrientation(position, orientation);
 
-			// get the charater mass
-			Real mass;
-			Vector3 inertia;
-			body->getMassMatrix(mass, inertia);
+            // get the charater mass
+            Real mass;
+            Vector3 inertia;
+            body->getMassMatrix(mass, inertia);
 
-			// apply gravity
+            // apply gravity
             Vector3 force = Vector3::ZERO;
-			force = mass * mGravitation;
+            force = mass * mGravitation;
 
-			// Get the velocity vector
-			Vector3 currentVel = body->getVelocity();
+            // Get the velocity vector
+            Vector3 currentVel = body->getVelocity();
 
-			// Gravity is applied above, so not needed here
-			// prevent adding a counter force against gravity
-			//if (currentVel.y < 0.0f || mCharacterState.mJumpTimer < 2.0f) 
-			currentVel.y = 0.0f;
+            // Gravity is applied above, so not needed here
+            // prevent adding a counter force against gravity
+            //if (currentVel.y < 0.0f || mCharacterState.mJumpTimer < 2.0f)
+            currentVel.y = 0.0f;
 
-            if( (mCharacterState.mHasFloorContact && mCharacterState.mJumpTimer > 0.1f) || 
+            if( (mCharacterState.mHasFloorContact && mCharacterState.mJumpTimer > 0.1f) ||
                 ( timeSinceLastFloorContact < 0.2f && !mCharacterState.mIsAirBorne ) )
                 mCharacterState.mIsAirBorne = false;
             else
@@ -652,10 +649,10 @@
 
             if( !mCharacterState.mIsAirBorne )
             {
-			    // apply the jump
-			    if ( mCharacterState.mStartJump )
-			    {
-				    mCharacterState.mJumpTimer = 0.0f;
+                // apply the jump
+                if ( mCharacterState.mStartJump )
+                {
+                    mCharacterState.mJumpTimer = 0.0f;
                     mCharacterState.mIsAirBorne = true;
                     Real height = 0.75f; // beim zweiten gehts seltsamerweise was h?her /doppelsprung physik?)
                     Real gravity = 9.81f;
@@ -663,32 +660,32 @@
                     force += Vector3(0,
                         jumpForce,
                         0);
-			    }
+                }
 
                 Real delay = 2 * PhysicsManager::getSingleton().getMaxTimestep(); // so ist die Beschleunigung unabh?ngig von der framerate!
                 force += mass*(orientation*mCharacterState.mDesiredVel - currentVel) / delay;
             }
             mCharacterState.mStartJump = false;
 
-			body->setForce(force);
-			// Assume we are air borne.
-			// Might be set to true in the collision callback
-			mCharacterState.mHasFloorContact = false;
+            body->setForce(force);
+            // Assume we are air borne.
+            // Might be set to true in the collision callback
+            mCharacterState.mHasFloorContact = false;
 
 
 
 
 
 
-		    // Calculate angular velocity
-		    // We first need the yaw rotation from actual yaw to desired yaw
-		    Vector3 src = orientation*Vector3::NEGATIVE_UNIT_Z;
-		    src.y = 0;
-		    Vector3 dst = Quaternion(mYaw, Vector3::UNIT_Y)*Vector3::UNIT_Z;
-		    dst.y = 0;
-		    Radian yaw = src.getRotationTo(dst).getYaw();
+            // Calculate angular velocity
+            // We first need the yaw rotation from actual yaw to desired yaw
+            Vector3 src = orientation*Vector3::NEGATIVE_UNIT_Z;
+            src.y = 0;
+            Vector3 dst = Quaternion(mYaw, Vector3::UNIT_Y)*Vector3::UNIT_Z;
+            dst.y = 0;
+            Radian yaw = src.getRotationTo(dst).getYaw();
 
-            
+
             // was soll dieser komische Fehler?
             // wenn yaw 0 sein sollte, wird er manchmal zu -90 grad, find ich nich nett
             if( (yaw.valueDegrees() - (-90)) < 0.5 )
@@ -696,28 +693,28 @@
                     yaw = Degree(0);
 
 
-		    // Calculate omega in order to go this rotation in mMaxDelay seconds.
+            // Calculate omega in order to go this rotation in mMaxDelay seconds.
             // Real newOmega = yaw.valueRadians() / mMaxDelay;
             Vector3 diff = Vector3(0, yaw.valueRadians(), 0);
             Vector3 omega = mCharBody->getOmega();
             omega.x = omega.z = 0;
             // sollte nicht direkt gesetzt werden!
             Vector3 springAcc = -mRotLinearSpringK*diff - mRotLinearDampingK * omega;
-		    //body->setOmega(Vector3(0, newOmega, 0)); // omega sollte nicht direkt gesetzt werden
+            //body->setOmega(Vector3(0, newOmega, 0)); // omega sollte nicht direkt gesetzt werden
             body->setTorque( mass * springAcc );
         }
 
 
 
         SceneNode* node = mCharacterActor->_getSceneNode();
-		std::ostringstream ss;
+        std::ostringstream ss;
         Vector3 bodpos, playpos = node->getPosition();
         Quaternion egal;
         mCamBody->getPositionOrientation(bodpos,egal);
         static Real maxHeight(0);
         if( playpos.y > maxHeight )
             maxHeight = playpos.y;
-        ss 
+        ss
             << "scene node : " << playpos << endl
 //            << "player max Height : " << maxHeight << endl
             << "camera posder : " << static_cast<Camera*>(
@@ -736,17 +733,17 @@
     }
 
     //------------------------------------------------------------------------
-	void MovementCharacterController::calculateCamera(const Ogre::Real& timestep)
-	{
-		Vector3 charPos;
-		Quaternion charOri;
-		//mCharBody->getPositionOrientation(charPos, charOri);
+    void MovementCharacterController::calculateCamera(const Ogre::Real& timestep)
+    {
+        Vector3 charPos;
+        Quaternion charOri;
+        //mCharBody->getPositionOrientation(charPos, charOri);
         charPos = mCharacterActor->getWorldPosition();
         charOri = mCharacterActor->getWorldOrientation();
 
-		Vector3 camPos;
-		Quaternion camOri;
-		mCamBody->getPositionOrientation(camPos, camOri);
+        Vector3 camPos;
+        Quaternion camOri;
+        mCamBody->getPositionOrientation(camPos, camOri);
         SceneNode* cameraNode = mCameraActor->_getSceneNode();
 
 /*
@@ -760,12 +757,12 @@
         static std::vector<Ogre::Vector3> camOptPositionsBuffer(20);
         static size_t camOptPositionsBufferIdx = -1;
         camOptPositionsBufferIdx = (camOptPositionsBufferIdx + 1) % camOptPositionsBuffer.size();
-*/        
+*/
         Vector3 optimalCamPos = calculateOptimalCameraPosition(true, timestep);
         charPos = charPos + charOri * mLookAtOffset;
 //        camOptPositionsBuffer[camOptPositionsBufferIdx] = optimalCamPos;
-        
 
+
         // Ringbuffer mit Positionen des Characters
         static std::vector<Ogre::Vector3> charPositionsBuffer(20);
         static size_t charPositionsBufferIdx = -1;
@@ -789,14 +786,14 @@
 
 
 
-		if (mViewMode == VM_THIRD_PERSON || mViewMode == VM_FREE_CAMERA )
-		{
+        if (mViewMode == VM_THIRD_PERSON || mViewMode == VM_FREE_CAMERA )
+        {
 
             // wir machen ein paar Raycasts um herauszufinden, ob wir von der jetzigen Position
             // so zur optimalen kommen
             const OgreNewt::MaterialID* materialId =
                 mCharBody->getMaterialGroupID();
-//			    PhysicsManager::getSingleton()._getLevelMaterialID();
+//                PhysicsManager::getSingleton()._getLevelMaterialID();
             OgreNewt::World *world = PhysicsManager::getSingleton()._getNewtonWorld();
 
             Vector3 normToOptCamPos = (optimalCamPos - charPos);
@@ -805,16 +802,16 @@
 
 
             RaycastInfo infoCastOptPos = mRaycast->execute(
-                world, 
-                materialId, 
+                world,
+                materialId,
                 camPos + camRadius * normToOptCamPos, // Gr??e der Kamera einbeziehen
                 optimalCamPos + camRadius * normToOptCamPos,
                 true); // Gr??e der Kamera einbeziehen
 
             RaycastInfo infoCastChar = mRaycast->execute(
-                world, 
-                materialId, 
-                camPos, 
+                world,
+                materialId,
+                camPos,
                 charPos,
                 true);
 
@@ -850,7 +847,7 @@
                     while( delta > 0.05 ) // genauigkeit des gefundenen Punktes
                     {
                         infoCastNewPos = mRaycast->execute(
-                            world, 
+                            world,
                             materialId,
                             camPos + camRadius * normToOptCamPos, // Gr??e der Kamera!
                             temp,
@@ -875,7 +872,7 @@
             }
 
 
-            static bool isPathfinding (false); 
+            static bool isPathfinding (false);
             static unsigned int lastReachableBufPos;
             // gibt an, ob schon gebufferte Daten f?r den
             // neuen Weg existieren und dort weitergemacht werden kann,
@@ -902,7 +899,7 @@
                     while ( delta < buffSize )
                     {
                         RaycastInfo info = mRaycast->execute(
-                            world, 
+                            world,
                             materialId,
                             camPos,
                             charPositionsBuffer[ (charPositionsBufferIdx - delta) % buffSize ] ,
@@ -935,7 +932,7 @@
                     while ( delta > 0 ) // delta = 0 braucht nicht ?berpr?ft zu werden, wurde oben schon ausgeschlossen!
                     {
                         RaycastInfo info = mRaycast->execute(
-                            world, 
+                            world,
                             materialId,
                             camPos,
                             charPositionsBuffer[ (charPositionsBufferIdx - delta) % buffSize ],
@@ -966,8 +963,8 @@
             Vector3 springAcc = -mLinearSpringK*diff - mLinearDampingK * cameraVelocity;
 
             // get the camera mass
-			Real mass;
-			Vector3 inertia;
+            Real mass;
+            Vector3 inertia;
             mCamBody->getMassMatrix(mass, inertia);
 
             //mCamBody->setPositionOrientation(newCamPos, camOri);
@@ -977,7 +974,7 @@
         {
             mCamBody->setPositionOrientation(optimalCamPos, camOri);
         }
-	}
+    }
 
     //------------------------------------------------------------------------
     Ogre::Vector3 MovementCharacterController::calculateOptimalCameraPosition(bool SlowlyMoveBackward, const Real &timestep)
@@ -995,23 +992,23 @@
             charPos = charPos + charOri * mLookAtOffset;
             if(mViewMode == VM_THIRD_PERSON)
             {
-	            targetCamPos = 
-		            charPos 
-		            + charOri * Vector3(
-						            0, 
-						            Math::Sin(mPitch) * mDesiredDistance,
-						            Math::Cos(mPitch) * mDesiredDistance);
+                targetCamPos =
+                    charPos
+                    + charOri * Vector3(
+                                    0,
+                                    Math::Sin(mPitch) * mDesiredDistance,
+                                    Math::Cos(mPitch) * mDesiredDistance);
             }
             else
             {
                 Quaternion camOri;
                 camOri.FromAngleAxis(mCamYaw, Vector3::UNIT_Y);
-	            targetCamPos = 
-		            charPos 
-		            + charOri * camOri * Vector3(
-						                        0, 
-						                        Math::Sin(mPitch) * mDesiredDistance,
-						                        Math::Cos(mPitch) * mDesiredDistance);
+                targetCamPos =
+                    charPos
+                    + charOri * camOri * Vector3(
+                                                0,
+                                                Math::Sin(mPitch) * mDesiredDistance,
+                                                Math::Cos(mPitch) * mDesiredDistance);
             }
 
 
@@ -1033,9 +1030,9 @@
             Vector3 radiusOffset = charOri * Vector3(0, sinPitchRad, cosPitchRad);
 
             startRay[0] = charPos;
-            endRay[0] = targetCamPos; // hier ist nun leider was doppelt, 
+            endRay[0] = targetCamPos; // hier ist nun leider was doppelt,
                                       // dadurch kann aber sichergestellt
-                                      // werden, dass kein Objekt direkt 
+                                      // werden, dass kein Objekt direkt
                                       // hinter dem Helden ?bersehen wird
             startRay[1] = charPos + radiusOffset;
             endRay[1] = targetCamPos + radiusOffset;
@@ -1052,9 +1049,9 @@
 
             const OgreNewt::MaterialID* materialId =
                 mCharBody->getMaterialGroupID();
-//			    PhysicsManager::getSingleton()._getLevelMaterialID();
+//                PhysicsManager::getSingleton()._getLevelMaterialID();
             OgreNewt::World *world = PhysicsManager::getSingleton()._getNewtonWorld();
-            
+
             Vector3 diff = targetCamPos - charPos;
             bool CollisionFound = false;
             for( int i = 0; i < 6; i++ )
@@ -1065,7 +1062,7 @@
                     startRay[i],
                     endRay[i],
                     true);
-            
+
                 if( info.mBody )
                 {
                     CollisionFound = true;
@@ -1097,7 +1094,7 @@
             Quaternion camOri;
             mCamBody->getPositionOrientation(camPos, camOri);
 
-            if( SlowlyMoveBackward && 
+            if( SlowlyMoveBackward &&
                 desiredDistance > lastDistance )
             {
 
@@ -1105,18 +1102,18 @@
                 Real newDistance;
                 Vector3 actDiff = camPos - charPos;
                 actDiff.normalise();
-                
-                if( TimeOfLastCollision > mCamMoveAwayStartTime || 
+
+                if( TimeOfLastCollision > mCamMoveAwayStartTime ||
                     diff.directionEquals(actDiff, mCamMoveAwayRange*timestep) )
                     newDistance = lastDistance + mCamMoveAwayVelocity*timestep;
                 else
                     newDistance = lastDistance;
-                
+
                 if( newDistance > desiredDistance )
                     newDistance = desiredDistance;
-                
+
                 diff = diff*newDistance;
-                
+
                 lastDistance = newDistance;
             }
             else
@@ -1132,14 +1129,14 @@
             //mCharBody->getPositionOrientation(charPos, charOri);
             charPos = mCharacterActor->getWorldPosition();
             charOri = mCharacterActor->getWorldOrientation();
-            // determine the optimal target position of the camera            
-	        targetCamPos = 
-		        charPos 
-		        + charOri * mLookAtOffset 
-		        + charOri * Vector3(
-						        0, 
-						        Math::Sin(mPitch) * mDesiredDistance,
-						        Math::Cos(mPitch) * mDesiredDistance);
+            // determine the optimal target position of the camera
+            targetCamPos =
+                charPos
+                + charOri * mLookAtOffset
+                + charOri * Vector3(
+                                0,
+                                Math::Sin(mPitch) * mDesiredDistance,
+                                Math::Cos(mPitch) * mDesiredDistance);
         }
 
 
@@ -1147,8 +1144,8 @@
     }
 
     //------------------------------------------------------------------------
-	void MovementCharacterController::updateSelection()
-	{
+    void MovementCharacterController::updateSelection()
+    {
         InputManager* im = InputManager::getSingletonPtr();
         if( im->isCeguiActive() )
             return;
@@ -1169,7 +1166,7 @@
 
         if (newGo != NULL && newGo != oldGo)
         {
-            newGo->setHighlighted(true);            
+            newGo->setHighlighted(true);
         }
 
         // Optionen anzeigen
@@ -1181,13 +1178,13 @@
         {
             mSelector.getSelectedObject()->doDefaultAction(mCharacter, NULL);
         }
-	}
+    }
 
     //------------------------------------------------------------------------
-	void MovementCharacterController::updateAnimationState(int &movement)
-	{
-		MeshObject* mesh = dynamic_cast<MeshObject*>(mCharacterActor->getControlledObject());
-		PhysicalThing* pt = mCharacterActor->getPhysicalThing();
+    void MovementCharacterController::updateAnimationState(int &movement)
+    {
+        MeshObject* mesh = dynamic_cast<MeshObject*>(mCharacterActor->getControlledObject());
+        PhysicalThing* pt = mCharacterActor->getPhysicalThing();
         static std::string lastAnimation("");
         std::string newAnimation("");
         Real animSpeed = 1;
@@ -1195,8 +1192,8 @@
         static bool jumpNextFrame(false);
         unsigned int animTimesToPlay = 0;
         Real gs = mCharacter->getWert(Creature::WERT_GS);
-		static String lastCollisionPose = "";
-		String collisionPose = "idle";
+        static String lastCollisionPose = "";
+        String collisionPose = "idle";
 
         // the different factors used to calculate the animation-speed from the character-speed
         const Real factor_hocke_gehen = 0.7;
@@ -1239,7 +1236,7 @@
             if (meshAnim->getTimePlayed() >= meshAnim->getLength())
             {
                 newAnimation = "hocke_idle";
-				collisionPose = "hocke_idle";
+                collisionPose = "hocke_idle";
                 mCharacterState.mPose = CharacterState::Crouch;
             }
             // kamera-offset interpolieren grrr
@@ -1252,13 +1249,13 @@
             if (vel > 0.1 && movement & MOVE_FORWARD)
             {
                 newAnimation = "hocke_gehen";
-				collisionPose = "hocke_idle";
+                collisionPose = "hocke_idle";
                 animSpeed = charVelocity.length() * factor_hocke_gehen;
             }
             else
             {
                 newAnimation = "hocke_idle";
-				collisionPose = "hocke_idle";
+                collisionPose = "hocke_idle";
             }
         }
         else if (mCharacterState.mPose == CharacterState::Crouch)
@@ -1288,7 +1285,7 @@
                 MeshAnimation *meshAnim = mesh->getAnimation("rennen_absprung");
                 if (meshAnim->getTimePlayed() >= meshAnim->getLength())
                 {
-					///\todo Animation "rennen_sprung" has length of 0.0f. Substitute for Idle, till this is resolved.
+                    ///\todo Animation "rennen_sprung" has length of 0.0f. Substitute for Idle, till this is resolved.
                     //newAnimation = "rennen_sprung";
                     newAnimation = "idle";
 
@@ -1303,7 +1300,7 @@
                 MeshAnimation *meshAnim = mesh->getAnimation("idle_absprung");
                 if (meshAnim->getTimePlayed() >= meshAnim->getLength())
                 {
-					///\todo Animation "idle_sprung" has length of 0.0f. Substitute for Idle, till this is resolved.
+                    ///\todo Animation "idle_sprung" has length of 0.0f. Substitute for Idle, till this is resolved.
                     //newAnimation = "idle_sprung";
                     newAnimation = "idle";
 
@@ -1409,7 +1406,7 @@
                     animSpeed = factor_rennen_absprung * vel;
                     mCharacterState.mPose = CharacterState::StartJump;
                 }
-                else 
+                else
                 {
                     if ( vel > 0.1 )
                     {
@@ -1435,16 +1432,16 @@
 
         if (newAnimation != "")
         {
-			// nur schneller nicht langsamer ausf?hren!
+            // nur schneller nicht langsamer ausf?hren!
             if (animSpeed < 1) animSpeed = 1;
-                
+
             if (lastAnimation != newAnimation)
             {
-				if (collisionPose != lastCollisionPose)
-				{
-					pt->fitToPose(collisionPose);
-					lastCollisionPose = collisionPose;
-				}
+                if (collisionPose != lastCollisionPose)
+                {
+                    pt->fitToPose(collisionPose);
+                    lastCollisionPose = collisionPose;
+                }
                 mesh->stopAllAnimations();
                 mesh->startAnimation(newAnimation, animSpeed, animTimesToPlay);
                 lastAnimation = newAnimation;
@@ -1463,53 +1460,53 @@
     }
 
     //------------------------------------------------------------------------
-	void MovementCharacterController::setViewMode(ViewMode mode)
-	{
-		mViewMode = mode;
+    void MovementCharacterController::setViewMode(ViewMode mode)
+    {
+        mViewMode = mode;
 
-		MeshObject* charMesh = dynamic_cast<MeshObject*>(mCharacterActor->getControlledObject());
-		AxisAlignedBox aabb = charMesh->getDefaultSize();
-		if (mode == VM_FIRST_PERSON)
-		{
+        MeshObject* charMesh = dynamic_cast<MeshObject*>(mCharacterActor->getControlledObject());
+        AxisAlignedBox aabb = charMesh->getDefaultSize();
+        if (mode == VM_FIRST_PERSON)
+        {
             mLookAtOffset = Vector3(
-                    0, 
+                    0,
                     (aabb.getMaximum().y - aabb.getMinimum().y) * 0.90f,
                     (aabb.getMaximum().z - aabb.getMinimum().z) * (-0.3f) );
-			mDistanceRange.first = 0.0;
-			mDistanceRange.second = 0.0;
-			mDesiredDistance = 0.0;
-			mPitchRange.first = Degree(-85);
-			mPitchRange.second = Degree(85);
+            mDistanceRange.first = 0.0;
+            mDistanceRange.second = 0.0;
+            mDesiredDistance = 0.0;
+            mPitchRange.first = Degree(-85);
+            mPitchRange.second = Degree(85);
             mPitch = 0;
-			LOG_MESSAGE(Logger::UI, "Switch to 1st person view");
-			resetCamera();
-		}
-		else if(mode == VM_THIRD_PERSON)
-		{
+            LOG_MESSAGE(Logger::UI, "Switch to 1st person view");
+            resetCamera();
+        }
+        else if(mode == VM_THIRD_PERSON)
+        {
             mLookAtOffset = Vector3(0, (aabb.getMaximum() - aabb.getMinimum()).y * 0.90f, 0);
-			mDistanceRange.first = 0.60;
-			mDistanceRange.second = 7.00;
-			mDesiredDistance = 2.0;
-			mPitchRange.first = Degree(-75);
-			mPitchRange.second = Degree(85);
+            mDistanceRange.first = 0.60;
+            mDistanceRange.second = 7.00;
+            mDesiredDistance = 2.0;
+            mPitchRange.first = Degree(-75);
+            mPitchRange.second = Degree(85);
             mPitch = Degree(30);
-			LOG_MESSAGE(Logger::UI, "Switch to 3rd person view");			
-			resetCamera();
-		}
+            LOG_MESSAGE(Logger::UI, "Switch to 3rd person view");
+            resetCamera();
+        }
         else // mode == VM_FREE_CAMERA
         {
-			mLookAtOffset = Vector3(0, (aabb.getMaximum() - aabb.getMinimum()).y * 0.80f, 0);
-			mDistanceRange.first = 0.60;
-			mDistanceRange.second = 7.00;
-			mDesiredDistance = 2.0;
-			mPitchRange.first = Degree(-75);
-			mPitchRange.second = Degree(85);
+            mLookAtOffset = Vector3(0, (aabb.getMaximum() - aabb.getMinimum()).y * 0.80f, 0);
+            mDistanceRange.first = 0.60;
+            mDistanceRange.second = 7.00;
+            mDesiredDistance = 2.0;
+            mPitchRange.first = Degree(-75);
+            mPitchRange.second = Degree(85);
             mPitch = Degree(30);
             mCamYaw = mYaw;
-			LOG_MESSAGE(Logger::UI, "Switch to free camera view");			
-			resetCamera();
+            LOG_MESSAGE(Logger::UI, "Switch to free camera view");
+            resetCamera();
         }
-	}
+    }
 
     //------------------------------------------------------------------------
     void MovementCharacterController::interpolateAnimationLookAtOffset(std::string actAnim, std::string newAnim, Ogre::Real factor)
@@ -1546,81 +1543,81 @@
     }
 
     //------------------------------------------------------------------------
-	MovementCharacterController::ViewMode MovementCharacterController::getViewMode()
-	{
-		return mViewMode;
-	}
+    MovementCharacterController::ViewMode MovementCharacterController::getViewMode()
+    {
+        return mViewMode;
+    }
 
     //------------------------------------------------------------------------
-	void MovementCharacterController::toggleViewMode()
-	{
-		if (getViewMode() == VM_THIRD_PERSON)
+    void MovementCharacterController::toggleViewMode()
+    {
+        if (getViewMode() == VM_THIRD_PERSON)
             setViewMode(VM_FIRST_PERSON);
         else if(getViewMode() == VM_FIRST_PERSON)
             setViewMode(VM_FREE_CAMERA);
         else
-            setViewMode(VM_THIRD_PERSON);         
-	}
+            setViewMode(VM_THIRD_PERSON);
+    }
 
     //------------------------------------------------------------------------
-	void MovementCharacterController::resetCamera()
-	{
+    void MovementCharacterController::resetCamera()
+    {
         Vector3 camPos;
-		Quaternion camOri;
-		mCamBody->getPositionOrientation(camPos, camOri);
+        Quaternion camOri;
+        mCamBody->getPositionOrientation(camPos, camOri);
         mCamBody->setPositionOrientation(calculateOptimalCameraPosition(false, 0.0f), camOri);
         if(mViewMode == VM_FIRST_PERSON)
             mCharacterActor->setVisible(false);
         else
             mCharacterActor->setVisible(true);
-	}
+    }
 
     //------------------------------------------------------------------------
-	bool MovementCharacterController::injectKeyDown(int keycode)
-	{
+    bool MovementCharacterController::injectKeyDown(int keycode)
+    {
         int scancode;
         mCommandMapper->decodeKey(keycode, &scancode, NULL);
-		int movement = mCommandMapper->getMovement(scancode);
+        int movement = mCommandMapper->getMovement(scancode);
 
         if (movement & MOVE_RUN_LOCK) // dieses einrasten lassen
         {
             mCharacterState.mCurrentMovementState ^= MOVE_RUN_LOCK;
             movement &= ~MOVE_RUN_LOCK;
         }
-		if (movement != MOVE_NONE)
-		{
-			mCharacterState.mCurrentMovementState |= movement;
-			return true;
-		}
-		return false;
-	}
+        if (movement != MOVE_NONE)
+        {
+            mCharacterState.mCurrentMovementState |= movement;
+            return true;
+        }
+        return false;
+    }
 
     //------------------------------------------------------------------------
-	bool MovementCharacterController::injectKeyUp(int keycode)
-	{
+    bool MovementCharacterController::injectKeyUp(int keycode)
+    {
         int scancode;
         mCommandMapper->decodeKey(keycode, &scancode, NULL);
-		int movement = mCommandMapper->getMovement(scancode);
+        int movement = mCommandMapper->getMovement(scancode);
 
-		if (movement != MOVE_NONE)
-		{
-			mCharacterState.mCurrentMovementState &= (~movement | MOVE_RUN_LOCK);
-			return true;
-		}
+        if (movement != MOVE_NONE)
+        {
+            mCharacterState.mCurrentMovementState &= (~movement | MOVE_RUN_LOCK);
+            return true;
+        }
         else
         {
             return startAction(mCommandMapper->getAction(keycode, CMDMAP_KEYMAP_OFF_COMBAT), mCharacter);
         }
-			
-		return false;
-	}
 
+        return false;
+    }
+
     //------------------------------------------------------------------------
-	bool MovementCharacterController::injectMouseDown(int mouseButtonMask)
-	{
+    bool MovementCharacterController::injectMouseDown(int mouseButtonMask)
+    {
       //  if (!im->isCeguiActive())
       //  {
-		    //updateSelection();
+            //updateSelection();
       //      if (im->isMouseButtonDown(1) && mSelector.getSelectedObject() != NULL)
       //      {
       //          WindowFactory::getSingleton().showActionChoice(mSelector.getSelectedObject());
@@ -1630,22 +1627,22 @@
       //          mSelector.getSelectedObject()->doDefaultAction(mCharacter, NULL);
       //      }
       //  }
-	  return false;
-	}
+      return false;
+    }
 
     //------------------------------------------------------------------------
-	bool MovementCharacterController::injectMouseUp(int mouseButtonMask)
-	{
+    bool MovementCharacterController::injectMouseUp(int mouseButtonMask)
+    {
         if (!InputManager::getSingleton().isCeguiActive())
         {
-		    return startAction(mCommandMapper->getAction(mouseButtonMask,
-                CMDMAP_MOUSEMAP_OFF_COMBAT), mCharacter);		
+            return startAction(mCommandMapper->getAction(mouseButtonMask,
+                CMDMAP_MOUSEMAP_OFF_COMBAT), mCharacter);
         }
         else
         {
             return false;
         }
-	}
+    }
 
     //------------------------------------------------------------------------
     DebugVisualisableFlag MovementCharacterController::getFlag() const

Modified: rl/trunk/engine/ui/src/UiSubsystem.cpp
===================================================================
--- rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -50,111 +50,110 @@
 template<> rl::UiSubsystem* Singleton<rl::UiSubsystem>::ms_Singleton = 0;
 
 namespace rl {
-	const char* UiSubsystem::CEGUI_ROOT = "RootWindow";
+    const char* UiSubsystem::CEGUI_ROOT = "RootWindow";
 
-	UiSubsystem& UiSubsystem::getSingleton(void)
-	{
-		return Singleton<UiSubsystem>::getSingleton();
-	}
+    UiSubsystem& UiSubsystem::getSingleton(void)
+    {
+        return Singleton<UiSubsystem>::getSingleton();
+    }
 
-	UiSubsystem* UiSubsystem::getSingletonPtr(void)
-	{
-		return Singleton<UiSubsystem>::getSingletonPtr();
-	}
+    UiSubsystem* UiSubsystem::getSingletonPtr(void)
+    {
+        return Singleton<UiSubsystem>::getSingletonPtr();
+    }
 
-	UiSubsystem::UiSubsystem() :
+    UiSubsystem::UiSubsystem() :
         mCharacterController(NULL),
-		mCharacterControllerType(CharacterController::CTRL_NONE),
+        mCharacterControllerType(CharacterController::CTRL_NONE),
         mHero(NULL),
         mCharacter(NULL),
-		mInputManager(NULL),
-		mWindowFactory(NULL),
-		mWindowManager(NULL),
+        mInputManager(NULL),
+        mWindowFactory(NULL),
+        mWindowManager(NULL),
         mGuiRenderer(NULL),
         mGuiResourceProvider(NULL),
         mGuiSystem(NULL)
-	{
+    {
         CoreSubsystem::getSingletonPtr()->getWorld()->addSceneChangeListener(this);
-		mWindowFactory = new WindowFactory();
-	}
+        mWindowFactory = new WindowFactory();
+    }
 
     UiSubsystem::~UiSubsystem()
     {
         CoreSubsystem::getSingletonPtr()->getWorld()->removeSceneChangeListener(this);
 
-		delete mWindowFactory;
-		delete mWindowManager;
+        delete mWindowFactory;
+        delete mWindowManager;
 
         GameLoop::getSingleton().removeTask(mCharacterController);
-		delete mCharacterController;
+        delete mCharacterController;
 
-		delete mInputManager;
+        delete mInputManager;
 
         delete mGuiSystem;
         delete mGuiResourceProvider;
         delete mGuiRenderer;
-	}
+    }
 
     void UiSubsystem::initializeSubsystem()
     {
-		using namespace CEGUI;
+        using namespace CEGUI;
 
         LOG_MESSAGE2(Logger::UI,
             "Initialisiere UI", "UiSubsystem::initializeUiSubsystem");
         World* world = CoreSubsystem::getSingleton().getWorld();
         SceneManager* sceneMgr = world->getSceneManager();
 
-		Ogre::RenderWindow* window = Ogre::Root::getSingleton().getAutoCreatedWindow();
-		LOG_MESSAGE2(Logger::UI,
+        LOG_MESSAGE2(Logger::UI,
             "Initializing CEGUI Renderer.", "UiSubsystem::initializeUiSubsystem");
-		mGuiRenderer = new OgreCEGUIRenderer(window,
+        mGuiRenderer = new OgreCEGUIRenderer(CoreSubsystem::getSingleton().getRenderWindow(),
             Ogre::RENDER_QUEUE_OVERLAY, false, 3000, sceneMgr);
 
-		LOG_MESSAGE2(Logger::UI,
+        LOG_MESSAGE2(Logger::UI,
             "Initializing CEGUI System.", "UiSubsystem::initializeUiSubsystem");
         mGuiResourceProvider = new OgreCEGUIResourceProvider();
         CEGUI::System::setDefaultXMLParserName("XercesParser");
-		mGuiSystem = new System(mGuiRenderer, mGuiResourceProvider,
+        mGuiSystem = new System(mGuiRenderer, mGuiResourceProvider,
             NULL, NULL, (utf8*)"cegui.config", ConfigurationManager::getSingleton().getCeguiLogFile());
-		CEGUI::Logger::getSingleton().setLoggingLevel(
+        CEGUI::Logger::getSingleton().setLoggingLevel(
             rl::Logger::getSingleton().getCeGuiLogDetail());
-		LOG_MESSAGE2(Logger::UI,
+        LOG_MESSAGE2(Logger::UI,
             "CEGUI System initialized.", "UiSubsystem::initializeUiSubsystem");
 
-		// load scheme and set up defaults
-		///@todo Hier sollte was Lookunabh?ngiges rein!!! FIXME TODO BUG!
-		System::getSingleton().setDefaultMouseCursor((utf8*)"RastullahLook-Images",
+        // load scheme and set up defaults
+        ///@todo Hier sollte was Lookunabh?ngiges rein!!! FIXME TODO BUG!
+        System::getSingleton().setDefaultMouseCursor((utf8*)"RastullahLook-Images",
             (utf8*)"MouseArrow");
-		LOG_MESSAGE2(Logger::UI, "Mouse arrow loaded.",
+        LOG_MESSAGE2(Logger::UI, "Mouse arrow loaded.",
             "UiSubsystem::initializeUiSubsystem");
-		Window* sheet = CEGUI::WindowManager::getSingleton().createWindow((utf8*)"DefaultGUISheet",
+        Window* sheet = CEGUI::WindowManager::getSingleton().createWindow((utf8*)"DefaultGUISheet",
             (utf8*)CEGUI_ROOT);
-		LOG_MESSAGE2(Logger::UI, "CEGUI Root Window created.",
+        LOG_MESSAGE2(Logger::UI, "CEGUI Root Window created.",
             "UiSubsystem::initializeUiSubsystem");
-		sheet->setSize(
+        sheet->setSize(
             CeGuiHelper::asAbsolute(CEGUI::Vector2(
-                Ogre::Root::getSingleton().getAutoCreatedWindow()->getWidth(),
-				Ogre::Root::getSingleton().getAutoCreatedWindow()->getHeight())));
-		sheet->setPosition(CeGuiHelper::asAbsolute(CEGUI::Point(0, 0)));
-		System::getSingleton().setGUISheet(sheet);
+                CoreSubsystem::getSingleton().getRenderWindow()->getWidth(),
+                CoreSubsystem::getSingleton().getRenderWindow()->getHeight())));
+        sheet->setPosition(CeGuiHelper::asAbsolute(CEGUI::Point(0, 0)));
+        System::getSingleton().setGUISheet(sheet);
         sheet->setZOrderingEnabled(true);
         sheet->moveToBack();
-		System::getSingleton().setDefaultTooltip("RastullahLook/Tooltip");
+        System::getSingleton().setDefaultTooltip("RastullahLook/Tooltip");
         LOG_MESSAGE2(Logger::UI, "CEGUI initialized.",
             "UiSubsystem::initializeUiSubsystem");
 
-		mWindowManager = new WindowManager();
+        mWindowManager = new WindowManager();
 
-		//Initializing InputManager
-        mInputManager = new InputManager(Ogre::Root::getSingleton().getAutoCreatedWindow());
-		LOG_MESSAGE2(Logger::UI, "InputManager started.",
+        //Initializing InputManager
+        mInputManager = new InputManager(CoreSubsystem::getSingleton().getRenderWindow());
+        LOG_MESSAGE2(Logger::UI, "InputManager started.",
             "UiSubsystem::initializeUiSubsystem");
 
-		mInputManager->loadKeyMapping(ConfigurationManager::getSingleton().getKeymap());
-		LOG_MESSAGE2(Logger::UI, "Keymap geladen",
+        mInputManager->loadKeyMapping(ConfigurationManager::getSingleton().getKeymap());
+        LOG_MESSAGE2(Logger::UI, "Keymap geladen",
             "UiSubsystem::initializeUiSubsystem");
-        mInputManager->loadCommandMapping(ConfigurationManager::getSingleton().getInputConfigPath());
-		LOG_MESSAGE2(Logger::UI, "UI-Manager loaded.",
+        mInputManager->buildCommandMapping(ConfigurationManager::getSingleton().getInputSettings());
+        LOG_MESSAGE2(Logger::UI, "UI-Manager loaded.",
             "UiSubsystem::initializeUiSubsystem");
 
         mWindowFactory->initialize();
@@ -166,18 +165,18 @@
     }
 
 
-	CEGUI::OgreCEGUIRenderer* UiSubsystem::getGUIRenderer()
-	{
-		return mGuiRenderer;
-	}
+    CEGUI::OgreCEGUIRenderer* UiSubsystem::getGUIRenderer()
+    {
+        return mGuiRenderer;
+    }
 
-	Person* UiSubsystem::getActiveCharacter() const
-	{
-		return mCharacter;
-	}
+    Person* UiSubsystem::getActiveCharacter() const
+    {
+        return mCharacter;
+    }
 
-	void UiSubsystem::setActiveCharacter(Person* person)
-	{
+    void UiSubsystem::setActiveCharacter(Person* person)
+    {
         // Ensure we have a sound listener
         if (SoundManager::getSingleton().getListenerActor() == NULL)
         {
@@ -187,58 +186,58 @@
         // Nur wenn es sich ver?ndert hat
         if( person != mCharacter )
         {
-			if( mCharacter != NULL )
-			{
-				ScriptWrapper::getSingleton().disowned( mCharacter );
-				mCharacter->getActor()->detach(SoundManager::getSingleton().getListenerActor());
-			}
+            if( mCharacter != NULL )
+            {
+                ScriptWrapper::getSingleton().disowned( mCharacter );
+                mCharacter->getActor()->detach(SoundManager::getSingleton().getListenerActor());
+            }
 
             World* world = CoreSubsystem::getSingletonPtr()->getWorld();
 
-			if (person == NULL)
-			{
-				mCharacter = NULL;
+            if (person == NULL)
+            {
+                mCharacter = NULL;
                 world->setActiveActor( ActorManager::getSingleton().getActor("DefaultCamera") );
-			}
-			else
-			{
-				ScriptWrapper::getSingleton().owned( person );
-				mCharacter = person;
+            }
+            else
+            {
+                ScriptWrapper::getSingleton().owned( person );
+                mCharacter = person;
 
-				world->setActiveActor(person->getActor());
-				mWindowFactory->setActiveCharacter(person);
+                world->setActiveActor(person->getActor());
+                mWindowFactory->setActiveCharacter(person);
 
-				mCharacter->getActor()->attach(SoundManager::getSingleton().getListenerActor());
-				LOG_MESSAGE(Logger::UI, "SoundListener attached.");
+                mCharacter->getActor()->attach(SoundManager::getSingleton().getListenerActor());
+                LOG_MESSAGE(Logger::UI, "SoundListener attached.");
 
-				setCharacterController(CharacterController::CTRL_MOVEMENT);
-			}
+                setCharacterController(CharacterController::CTRL_MOVEMENT);
+            }
         }
-	}
+    }
 
-	void UiSubsystem::requestCharacterControllerSwitch(CharacterController::ControllerType type)
-	{
-		mCharacterControllerType = type;
-	}
+    void UiSubsystem::requestCharacterControllerSwitch(CharacterController::ControllerType type)
+    {
+        mCharacterControllerType = type;
+    }
 
-	void UiSubsystem::setCharacterController(CharacterController::ControllerType type)
-	{
-		if (mCharacterController != NULL)
-		{
-			if (mCharacterController->getType() == type)
-				return;
+    void UiSubsystem::setCharacterController(CharacterController::ControllerType type)
+    {
+        if (mCharacterController != NULL)
+        {
+            if (mCharacterController->getType() == type)
+                return;
 
-			GameLoop::getSingleton().removeTask(mCharacterController);
-			delete mCharacterController;
+            GameLoop::getSingleton().removeTask(mCharacterController);
+            delete mCharacterController;
             mCharacterController = NULL;
-			LOG_MESSAGE(Logger::UI,
+            LOG_MESSAGE(Logger::UI,
                 "Old CharacterController deleted.");
-		}
+        }
 
-   		if( type == CharacterController::CTRL_NONE )
+           if( type == CharacterController::CTRL_NONE )
         {
-			mCharacterController = NULL;
-			return;
+            mCharacterController = NULL;
+            return;
         }
 
         Actor* camera = ActorManager::getSingleton().getActor("DefaultCamera");
@@ -248,71 +247,71 @@
             return;
         }
 
-		if (type == CharacterController::CTRL_MOVEMENT)
+        if (type == CharacterController::CTRL_MOVEMENT)
         {
-			mCharacterController = new MovementCharacterController(camera, mCharacter);
-			if (!PhysicsManager::getSingleton().isEnabled())
-			{
-				PhysicsManager::getSingleton().setEnabled(true);
-			}
+            mCharacterController = new MovementCharacterController(camera, mCharacter);
+            if (!PhysicsManager::getSingleton().isEnabled())
+            {
+                PhysicsManager::getSingleton().setEnabled(true);
+            }
         }
-		else if (type == CharacterController::CTRL_FREEFLIGHT)
+        else if (type == CharacterController::CTRL_FREEFLIGHT)
         {
-			mCharacterController = new FreeFlightCharacterController(camera,
+            mCharacterController = new FreeFlightCharacterController(camera,
                 CoreSubsystem::getSingleton().getWorld()->getActiveActor());
         }
-		else if (type == CharacterController::CTRL_DIALOG)
+        else if (type == CharacterController::CTRL_DIALOG)
         {
-			mCharacterController = new DialogCharacterController(camera,
+            mCharacterController = new DialogCharacterController(camera,
                 CoreSubsystem::getSingleton().getWorld()->getActiveActor());
         }
-		else if (type == CharacterController::CTRL_VANITY_MODE)
+        else if (type == CharacterController::CTRL_VANITY_MODE)
         {
-			mCharacterController = new VanityModeCharacterController(camera,
+            mCharacterController = new VanityModeCharacterController(camera,
                 CoreSubsystem::getSingleton().getWorld()->getActiveActor());
         }
-		else if (type == CharacterController::CTRL_CUTSCENE)
+        else if (type == CharacterController::CTRL_CUTSCENE)
         {
-			mCharacterController = new CutsceneCharacterController(camera);
+            mCharacterController = new CutsceneCharacterController(camera);
         }
         else
         {
-			Throw(IllegalArgumentException, "Unknown CharacterControllerType.");
-		}
-		mCharacterControllerType = type;
+            Throw(IllegalArgumentException, "Unknown CharacterControllerType.");
+        }
+        mCharacterControllerType = type;
 
-		mInputManager->setCharacterController(mCharacterController);
+        mInputManager->setCharacterController(mCharacterController);
 
-	    LOG_MESSAGE(Logger::UI, "CharacterController created.");
+        LOG_MESSAGE(Logger::UI, "CharacterController created.");
         GameLoop::getSingleton().addTask(mCharacterController, GameLoop::TG_INPUT);
         LOG_MESSAGE(Logger::UI, "CharacterController task added.");
-	}
+    }
 
-	void UiSubsystem::run(Ogre::Real timeElapsed)
-	{
-		setCharacterController(mCharacterControllerType);
-	}
+    void UiSubsystem::run(Ogre::Real timeElapsed)
+    {
+        setCharacterController(mCharacterControllerType);
+    }
 
     CharacterController* UiSubsystem::getCharacterController() const
     {
         return mCharacterController;
     }
 
-	CharacterController::ControllerType UiSubsystem::getCharacterControllerType() const
-	{
-		if (mCharacterController == NULL)
-			return CharacterController::CTRL_NONE;
+    CharacterController::ControllerType UiSubsystem::getCharacterControllerType() const
+    {
+        if (mCharacterController == NULL)
+            return CharacterController::CTRL_NONE;
 
-		return mCharacterController->getType();
-	}
+        return mCharacterController->getType();
+    }
 
     void UiSubsystem::onBeforeClearScene()
     {
-		if (mCharacterController != NULL)
-		{
+        if (mCharacterController != NULL)
+        {
             setCharacterController(CharacterController::CTRL_NONE);
-			setActiveCharacter(NULL);
-		}
+            setActiveCharacter(NULL);
+        }
     }
 
     const Ogre::String& UiSubsystem::getName() const

Modified: rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h
===================================================================
--- rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -31,104 +31,113 @@
 namespace rl
 {
 
-typedef map<Ogre::String, StringList> DriverMap;
+    typedef map<Ogre::String, StringList> DriverMap;
 
-#define CHECK_FMOD4_ERRORS(fmod4_errorcode)\
-{\
-    if (fmod4_errorcode != FMOD_OK)\
+    #define CHECK_FMOD4_ERRORS(fmod4_errorcode)\
     {\
-        Throw(rl::RuntimeException,\
-            "FMOD error #"\
-            + StringConverter::toString(fmod4_errorcode)\
-            + " "\
-            + FMOD_ErrorString(fmod4_errorcode));\
-    }\
-}
+        if (fmod4_errorcode != FMOD_OK)\
+        {\
+            Throw(rl::RuntimeException,\
+                "FMOD error #"\
+                + StringConverter::toString(fmod4_errorcode)\
+                + " "\
+                + FMOD_ErrorString(fmod4_errorcode));\
+        }\
+    }
 
+    /** Diese Klasse ist der Treiber, der OpenAL zur
+     * Ausgabe benutzt.
+     */
+    class _RlFmod4DriverExport Fmod4Driver : public rl::SoundDriver
+    {
+    public:
+        /// Der Treibername
+        static Ogre::String NAME;
+        /// Der Konstruktor
+        Fmod4Driver(Ogre::ResourceManager* soundResourceManager);
+        /// Der Destruktor
+        virtual ~Fmod4Driver();
+        /// Ist der Treiber angeschaltet?
+        virtual bool isDriverAvailable();
+        /// Initialisiere den Treiber.
+        virtual bool initialize();
+        /// Deinitialisiere den Treiber.
+        virtual void shutdown();
+        /// Der Name des Treibers
+        virtual Ogre::String getName() const;
+        /// Update-Aufgaben erledigen
+        virtual void update();
+        /// Einen Sound-Stream mit Resource erzeugen
+        virtual Sound *createStream(const SoundResourcePtr &res);
+        /// Einen Sound-Sample mit Resource erzeugen
+        virtual Sound *createSample(const SoundResourcePtr &res);
+        /// Einen Soundlistener erzeugen
+        virtual ListenerMovable *createListener(const Ogre::String &name);
 
-/** Diese Klasse ist der Treiber, der OpenAL zur
- * Ausgabe benutzt.
- */
-class _RlFmod4DriverExport Fmod4Driver : public rl::SoundDriver
-{
-public:
-	/// Der Treibername
-    static Ogre::String NAME;
-    /// Der Konstruktor
-	Fmod4Driver(Ogre::ResourceManager* soundResourceManager);
-    /// Der Destruktor
-	virtual ~Fmod4Driver();
-    /// Ist der Treiber angeschaltet?
-    virtual bool isDriverAvailable();
-    /// Initialisiere den Treiber.
-    virtual bool initialize();
-    /// Deinitialisiere den Treiber.
-    virtual void shutdown();
-    /// Der Name des Treibers
-    virtual Ogre::String getName() const;
-    /// Update-Aufgaben erledigen
-    virtual void update();
-    /// Einen Sound-Stream mit Resource erzeugen
-    virtual Sound *createStream(const SoundResourcePtr &res);
-    /// Einen Sound-Sample mit Resource erzeugen
-    virtual Sound *createSample(const SoundResourcePtr &res);
-    /// Einen Soundlistener erzeugen
-    virtual ListenerMovable *createListener(const Ogre::String &name);
+        virtual void setMasterVolume(const Ogre::Real& vol);
 
-    virtual void setMasterVolume(const Ogre::Real& vol);
+        /**
+         * Returns the current sound driver settings as a key-value list
+         *
+         * @return key-value list of sound options
+         */
+        virtual Ogre::NameValuePairList getSettings() const;
 
-    /// Die Einstellungen in Datei schreiben
-    virtual void saveConf(rl::ConfigFile &conf) const;
-    /// Die Einstellungen laden
-    virtual void loadConf(rl::ConfigFile &conf);
+        /**
+         * Sets certain options for the sound driver, like volume settings for
+         * sound effects and music.
+         *
+         * @param settings key-value list of settings
+         */
+        virtual void applySettings(const Ogre::NameValuePairList& settings);
 
-    /// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
-	virtual void setRolloffFactor(const Ogre::Real&);
-	virtual const Ogre::Real getRolloffFactor();
+        /// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
+        virtual void setRolloffFactor(const Ogre::Real&);
+        virtual const Ogre::Real getRolloffFactor();
 
-	/// Datensammlung zurueckgeben
-	const DriverMap& getDriverData() const;
+        /// Datensammlung zurueckgeben
+        const DriverMap& getDriverData() const;
 
-    FMOD::System* _getFmodSystem();
+        FMOD::System* _getFmodSystem();
 
-private:
-    /// Informationen ???ber den Treiber ausgeben
-    virtual void printData() const;
-    void printDriverInfo(int driver) const;
+    private:
+        /// Informationen ???ber den Treiber ausgeben
+        virtual void printData() const;
+        void printDriverInfo(int driver) const;
 
-    // Wir merken uns die Konfiguration von Fmod4
-	DriverMap mDriverData;
-    FMOD::System* mFmod4System;
-    FMOD::ChannelGroup* mMasterChannelGroup;
+        // Wir merken uns die Konfiguration von Fmod4
+        DriverMap mDriverData;
+        FMOD::System* mFmod4System;
+        FMOD::ChannelGroup* mMasterChannelGroup;
 
-    static FMOD_RESULT F_CALLBACK open(
-        const char *  name, 
-        int  unicode, 
-        unsigned int *  filesize, 
-        void **  handle, 
-        void **  userdata
-    );
+        static FMOD_RESULT F_CALLBACK open(
+            const char *  name,
+            int  unicode,
+            unsigned int *  filesize,
+            void **  handle,
+            void **  userdata
+        );
 
-    static FMOD_RESULT F_CALLBACK close(
-        void *  handle, 
-        void *  userdata
-    );
+        static FMOD_RESULT F_CALLBACK close(
+            void *  handle,
+            void *  userdata
+        );
 
-    static FMOD_RESULT F_CALLBACK read(
-        void *  handle, 
-        void *  buffer, 
-        unsigned int  sizebytes, 
-        unsigned int *  bytesread, 
-        void *  userdata
-    );
+        static FMOD_RESULT F_CALLBACK read(
+            void *  handle,
+            void *  buffer,
+            unsigned int  sizebytes,
+            unsigned int *  bytesread,
+            void *  userdata
+        );
 
-    static FMOD_RESULT F_CALLBACK seek(
-        void *  handle, 
-        unsigned int  pos, 
-        void *  userdata
-    );
+        static FMOD_RESULT F_CALLBACK seek(
+            void *  handle,
+            unsigned int  pos,
+            void *  userdata
+        );
 
-};
+    };
 
 }
 

Modified: rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -24,339 +24,337 @@
 
 namespace rl
 {
-String Fmod4Driver::NAME = "FMOD4";
+    String Fmod4Driver::NAME = "RlFmod4Driver";
 
-Fmod4Driver::Fmod4Driver(Ogre::ResourceManager *soundResourceManager)
-    : SoundDriver(soundResourceManager),
-    mMasterChannelGroup(NULL)
-{    
-}
+    Fmod4Driver::Fmod4Driver(Ogre::ResourceManager *soundResourceManager)
+        : SoundDriver(soundResourceManager),
+        mMasterChannelGroup(NULL)
+    {
+    }
 
-Fmod4Driver::~Fmod4Driver()
-{
-}
+    Fmod4Driver::~Fmod4Driver()
+    {
+    }
 
-String Fmod4Driver::getName() const
-{
-    return NAME;
-}
+    String Fmod4Driver::getName() const
+    {
+        return NAME;
+    }
 
-bool Fmod4Driver::initialize()
-{
-    static int MAX_VIRTUAL_CHANNELS = 100;
+    bool Fmod4Driver::initialize()
+    {
+        static int MAX_VIRTUAL_CHANNELS = 100;
 
-    CHECK_FMOD4_ERRORS(FMOD::System_Create(&mFmod4System));
-    
-    mFmod4System->setFileSystem(
-        Fmod4Driver::open,
-        Fmod4Driver::close,
-        Fmod4Driver::read,
-        Fmod4Driver::seek,
-        -1);
+        CHECK_FMOD4_ERRORS(FMOD::System_Create(&mFmod4System));
 
-    printData();
+        mFmod4System->setFileSystem(
+            Fmod4Driver::open,
+            Fmod4Driver::close,
+            Fmod4Driver::read,
+            Fmod4Driver::seek,
+            -1);
 
-    mFmod4System->setDriver(-1);
-    //CHECK_FMOD4_ERRORS(mFmod4System->setOutput(FMOD_OUTPUTTYPE_ESD));
-    
-    FMOD_RESULT result = mFmod4System->init(MAX_VIRTUAL_CHANNELS, FMOD_INIT_NORMAL, NULL); //Alternative: ,Output)
-    if (result != FMOD_OK)
-    {
-        LOG_ERROR(Logger::CORE,
-            "FMOD error #"
-            + StringConverter::toString(result)
-            + " "
-            + FMOD_ErrorString(result));
-            
-        return false;
-    }
-    
-    mFmod4System->getMasterChannelGroup(&mMasterChannelGroup);
-    return true;
-}
+        printData();
 
-void Fmod4Driver::shutdown()
-{
-    CHECK_FMOD4_ERRORS(mFmod4System->close());
-    CHECK_FMOD4_ERRORS(mFmod4System->release());
-}
+        mFmod4System->setDriver(-1);
+        //CHECK_FMOD4_ERRORS(mFmod4System->setOutput(FMOD_OUTPUTTYPE_ESD));
 
-bool Fmod4Driver::isDriverAvailable()
-{
-    FMOD::System* system;
-    FMOD_RESULT result = FMOD::System_Create(&system);
-    if (result != FMOD_OK)
-    {
-        return false;
-    }
+        FMOD_RESULT result = mFmod4System->init(MAX_VIRTUAL_CHANNELS, FMOD_INIT_NORMAL, NULL); //Alternative: ,Output)
+        if (result != FMOD_OK)
+        {
+            LOG_ERROR(Logger::CORE,
+                "FMOD error #"
+                + StringConverter::toString(result)
+                + " "
+                + FMOD_ErrorString(result));
 
-    system->release();
-    return true;
-}
+            return false;
+        }
 
-void Fmod4Driver::update()
-{
-    mFmod4System->update();
-}
+        mFmod4System->getMasterChannelGroup(&mMasterChannelGroup);
+        return true;
+    }
 
-/**
-  * Einen Sound-Stream mit Resource erzeugen
-  * @return Der erzeugte Stream
-  * @author JoSch
-  * @date 03-06-2006
-  */
-Sound *Fmod4Driver::createStream(const SoundResourcePtr &res)
-{
- 	Sound *sound = new Fmod4Sound(this, res, Fmod4Sound::STREAM);
- 	return sound;
-}
+    void Fmod4Driver::shutdown()
+    {
+        CHECK_FMOD4_ERRORS(mFmod4System->close());
+        CHECK_FMOD4_ERRORS(mFmod4System->release());
+    }
 
-/**
- * Einen Sound-Sample mit Resource erzeugen
- * @return Das erzeugte Sample
- * @author JoSch
- * @date 03-06-2006
- */
-Sound *Fmod4Driver::createSample(const SoundResourcePtr &res)
-{
-    Sound *sound = new Fmod4Sound(this, res, Fmod4Sound::SAMPLE);
- 	return sound;
-}
+    bool Fmod4Driver::isDriverAvailable()
+    {
+        FMOD::System* system;
+        FMOD_RESULT result = FMOD::System_Create(&system);
+        if (result != FMOD_OK)
+        {
+            return false;
+        }
 
-ListenerMovable *Fmod4Driver::createListener(const Ogre::String &name)
-{
-    return new Fmod4Listener(name, mFmod4System);
-}
+        system->release();
+        return true;
+    }
 
-FMOD::System* Fmod4Driver::_getFmodSystem()
-{
-    return mFmod4System;
-}
+    void Fmod4Driver::update()
+    {
+        mFmod4System->update();
+    }
 
-void Fmod4Driver::loadConf(rl::ConfigFile &conf)
-{
-    SoundDriver::loadConf(conf);
-    mMasterChannelGroup->setVolume(mMasterVolume);
-}
+    /**
+      * Einen Sound-Stream mit Resource erzeugen
+      * @return Der erzeugte Stream
+      * @author JoSch
+      * @date 03-06-2006
+      */
+    Sound *Fmod4Driver::createStream(const SoundResourcePtr &res)
+    {
+         Sound *sound = new Fmod4Sound(this, res, Fmod4Sound::STREAM);
+         return sound;
+    }
 
-void Fmod4Driver::saveConf(rl::ConfigFile &conf) const
-{
-    SoundDriver::saveConf(conf);
-}
+    /**
+     * Einen Sound-Sample mit Resource erzeugen
+     * @return Das erzeugte Sample
+     * @author JoSch
+     * @date 03-06-2006
+     */
+    Sound *Fmod4Driver::createSample(const SoundResourcePtr &res)
+    {
+        Sound *sound = new Fmod4Sound(this, res, Fmod4Sound::SAMPLE);
+         return sound;
+    }
 
-void Fmod4Driver::printData() const
-{
-    int numDrivers;
-    mFmod4System->getNumDrivers(&numDrivers);
+    ListenerMovable *Fmod4Driver::createListener(const Ogre::String &name)
+    {
+        return new Fmod4Listener(name, mFmod4System);
+    }
 
-    for (int i = 0; i < numDrivers; i++)
+    FMOD::System* Fmod4Driver::_getFmodSystem()
     {
-        printDriverInfo(i);
+        return mFmod4System;
     }
 
-    int numPlugins;
-    mFmod4System->getNumPlugins(FMOD_PLUGINTYPE_CODEC, &numPlugins);
-    for (int i = 0; i < numDrivers; i++)
+    void Fmod4Driver::applySettings(const Ogre::NameValuePairList& settings)
     {
-        char pluginName[128];
-        unsigned int version;
+        SoundDriver::applySettings(settings);
+        mMasterChannelGroup->setVolume(mMasterVolume);
+    }
 
-        mFmod4System->getPluginInfo(
-            FMOD_PLUGINTYPE_CODEC,
-            i,
-            pluginName,
-            127,
-            &version);
-        LOG_MESSAGE(Logger::MULTIMEDIA, 
-            String("Fmod4Driver Plugin '")
-            + pluginName
-            + "' Version "
-            + StringConverter::toString(version));
+    Ogre::NameValuePairList Fmod4Driver::getSettings() const
+    {
+        return SoundDriver::getSettings();
     }
-}
 
-void Fmod4Driver::printDriverInfo(int driver) const
-{
-    int curdriver;
-    mFmod4System->getDriver(&curdriver);
+    void Fmod4Driver::printData() const
+    {
+        int numDrivers;
+        mFmod4System->getNumDrivers(&numDrivers);
 
-    char name[128];
-    mFmod4System->getDriverName(driver, name, 127);
+        for (int i = 0; i < numDrivers; i++)
+        {
+            printDriverInfo(i);
+        }
 
-    FMOD_CAPS caps;
-    int minfreq, maxfreq;
-    FMOD_SPEAKERMODE speakermode;
-    mFmod4System->getDriverCaps(driver, &caps, &minfreq, &maxfreq, &speakermode);
+        int numPlugins;
+        mFmod4System->getNumPlugins(FMOD_PLUGINTYPE_CODEC, &numPlugins);
+        for (int i = 0; i < numDrivers; i++)
+        {
+            char pluginName[128];
+            unsigned int version;
 
-    LOG_MESSAGE(Logger::MULTIMEDIA, 
-        String("Fmod4Driver '")
-        + name 
-        + "'"
-        + (driver == curdriver ? "(cur)" : "")
-        + ": \n"
-        + "Freq " + StringConverter::toString(minfreq)
-        + " - " + StringConverter::toString(maxfreq));
+            mFmod4System->getPluginInfo(
+                FMOD_PLUGINTYPE_CODEC,
+                i,
+                pluginName,
+                127,
+                &version);
+            LOG_MESSAGE(Logger::MULTIMEDIA,
+                String("Fmod4Driver Plugin '")
+                + pluginName
+                + "' Version "
+                + StringConverter::toString(version));
+        }
+    }
 
-    int hard2d, hard3d, hardtotal;
-    mFmod4System->getHardwareChannels(&hard2d, &hard3d, &hardtotal);
-    LOG_MESSAGE(Logger::MULTIMEDIA, 
-        String("Fmod4Driver '")
-        + name + "' Hardware Channels: "
-        + "2D #" + StringConverter::toString(hard2d)
-        + ", 3D #" + StringConverter::toString(hard3d)
-        + ", Total #" + StringConverter::toString(hardtotal));
+    void Fmod4Driver::printDriverInfo(int driver) const
+    {
+        int curdriver;
+        mFmod4System->getDriver(&curdriver);
 
-    int softchannels;
-    mFmod4System->getSoftwareChannels(&softchannels);
-    LOG_MESSAGE(Logger::MULTIMEDIA, 
-        String("Fmod4Driver '")
-        + name + "' Software Channels: "
-        + "#" + StringConverter::toString(softchannels));
+        char name[128];
+        mFmod4System->getDriverName(driver, name, 127);
 
-    FMOD_OUTPUTTYPE output;
-    mFmod4System->getOutput(&output);
-    String outputName;
+        FMOD_CAPS caps;
+        int minfreq, maxfreq;
+        FMOD_SPEAKERMODE speakermode;
+        mFmod4System->getDriverCaps(driver, &caps, &minfreq, &maxfreq, &speakermode);
 
-    if(output == FMOD_OUTPUTTYPE_AUTODETECT)
-		outputName = "Autodetect";
-    else if(output == FMOD_OUTPUTTYPE_UNKNOWN)
-		outputName = "Unknown";
-    else if(output == FMOD_OUTPUTTYPE_NOSOUND)
-		outputName = "No Sound";
-    else if(output == FMOD_OUTPUTTYPE_WAVWRITER)
-		outputName = "Wave Writer";
-    else if(output == FMOD_OUTPUTTYPE_NOSOUND_NRT)
-		outputName = "No Sound non realtime";
-    else if(output == FMOD_OUTPUTTYPE_WAVWRITER_NRT)
-		outputName = "Wave Writer non realtime";
-    else if(output == FMOD_OUTPUTTYPE_DSOUND)
-		outputName = "DirectSound";
-    else if(output == FMOD_OUTPUTTYPE_WINMM)
-		outputName = "Windows Multimedia";
-    else if(output == FMOD_OUTPUTTYPE_ASIO)
-		outputName = "Low Latency ASIO driver";
-    else if(output == FMOD_OUTPUTTYPE_OSS)
-		outputName = "Open Sound System (OSS)";
-    else if(output == FMOD_OUTPUTTYPE_ALSA)
-		outputName = "Advanced Linux Sound Architecture (ALSA)";
-    else if(output == FMOD_OUTPUTTYPE_ESD)
-		outputName = "Enlightment Sound Daemon (ESD)";
-    else if(output == FMOD_OUTPUTTYPE_SOUNDMANAGER)
-		outputName = "Macintosh SoundManager";
-    else if(output == FMOD_OUTPUTTYPE_COREAUDIO)
-		outputName = "Macintosh CoreAudio";
+        LOG_MESSAGE(Logger::MULTIMEDIA,
+            String("Fmod4Driver '")
+            + name
+            + "'"
+            + (driver == curdriver ? "(cur)" : "")
+            + ": \n"
+            + "Freq " + StringConverter::toString(minfreq)
+            + " - " + StringConverter::toString(maxfreq));
 
-    LOG_MESSAGE(Logger::MULTIMEDIA, 
-        String("Fmod4Driver '")
-        + name + "' Output: " + outputName);   
-}
+        int hard2d, hard3d, hardtotal;
+        mFmod4System->getHardwareChannels(&hard2d, &hard3d, &hardtotal);
+        LOG_MESSAGE(Logger::MULTIMEDIA,
+            String("Fmod4Driver '")
+            + name + "' Hardware Channels: "
+            + "2D #" + StringConverter::toString(hard2d)
+            + ", 3D #" + StringConverter::toString(hard3d)
+            + ", Total #" + StringConverter::toString(hardtotal));
 
-FMOD_RESULT F_CALLBACK Fmod4Driver::open(
-    const char *  name, 
-    int  unicode, 
-    unsigned int *  filesize, 
-    void **  handle, 
-    void **  userdata)
-{
-    SoundResourcePtr* res = new SoundResourcePtr(sSoundResourceManager->getByName(name));
-    LOG_DEBUG(Logger::MULTIMEDIA, 
-		"Opened stream " + (*res)->getName());
-    (*res)->load();
-    *filesize = (*res)->getSize();
-    *handle = res;
-    return FMOD_OK;
-}
+        int softchannels;
+        mFmod4System->getSoftwareChannels(&softchannels);
+        LOG_MESSAGE(Logger::MULTIMEDIA,
+            String("Fmod4Driver '")
+            + name + "' Software Channels: "
+            + "#" + StringConverter::toString(softchannels));
 
-FMOD_RESULT F_CALLBACK Fmod4Driver::close(
-    void *  handle, 
-    void *  userdata)
-{
-   	SoundResourcePtr *res = static_cast<SoundResourcePtr*>(handle);
-    LOG_DEBUG(Logger::MULTIMEDIA, 
-		"Closing stream " + (*res)->getName());
-    (*res)->unload();
-    delete res;
-    return FMOD_OK;
-}
+        FMOD_OUTPUTTYPE output;
+        mFmod4System->getOutput(&output);
+        String outputName;
 
-FMOD_RESULT F_CALLBACK Fmod4Driver::read(
-    void *  handle, 
-    void *  buffer, 
-    unsigned int  sizebytes, 
-    unsigned int *  bytesread, 
-    void *  userdata)
-{
-    if (handle == NULL)
+        if(output == FMOD_OUTPUTTYPE_AUTODETECT)
+            outputName = "Autodetect";
+        else if(output == FMOD_OUTPUTTYPE_UNKNOWN)
+            outputName = "Unknown";
+        else if(output == FMOD_OUTPUTTYPE_NOSOUND)
+            outputName = "No Sound";
+        else if(output == FMOD_OUTPUTTYPE_WAVWRITER)
+            outputName = "Wave Writer";
+        else if(output == FMOD_OUTPUTTYPE_NOSOUND_NRT)
+            outputName = "No Sound non realtime";
+        else if(output == FMOD_OUTPUTTYPE_WAVWRITER_NRT)
+            outputName = "Wave Writer non realtime";
+        else if(output == FMOD_OUTPUTTYPE_DSOUND)
+            outputName = "DirectSound";
+        else if(output == FMOD_OUTPUTTYPE_WINMM)
+            outputName = "Windows Multimedia";
+        else if(output == FMOD_OUTPUTTYPE_ASIO)
+            outputName = "Low Latency ASIO driver";
+        else if(output == FMOD_OUTPUTTYPE_OSS)
+            outputName = "Open Sound System (OSS)";
+        else if(output == FMOD_OUTPUTTYPE_ALSA)
+            outputName = "Advanced Linux Sound Architecture (ALSA)";
+        else if(output == FMOD_OUTPUTTYPE_ESD)
+            outputName = "Enlightment Sound Daemon (ESD)";
+        else if(output == FMOD_OUTPUTTYPE_SOUNDMANAGER)
+            outputName = "Macintosh SoundManager";
+        else if(output == FMOD_OUTPUTTYPE_COREAUDIO)
+            outputName = "Macintosh CoreAudio";
+
+        LOG_MESSAGE(Logger::MULTIMEDIA,
+            String("Fmod4Driver '")
+            + name + "' Output: " + outputName);
+    }
+
+    FMOD_RESULT F_CALLBACK Fmod4Driver::open(
+        const char *  name,
+        int  unicode,
+        unsigned int *  filesize,
+        void **  handle,
+        void **  userdata)
     {
-        return FMOD_ERR_INVALID_PARAM;
+        SoundResourcePtr* res = new SoundResourcePtr(sSoundResourceManager->getByName(name));
+        LOG_DEBUG(Logger::MULTIMEDIA,
+            "Opened stream " + (*res)->getName());
+        (*res)->load();
+        *filesize = (*res)->getSize();
+        *handle = res;
+        return FMOD_OK;
     }
 
-	SoundResourcePtr *sound = static_cast<SoundResourcePtr*>(handle);
-	if (!sound->isNull())
-	{
-        if (!(*sound)->isLoaded())
+    FMOD_RESULT F_CALLBACK Fmod4Driver::close(
+        void *  handle,
+        void *  userdata)
+    {
+           SoundResourcePtr *res = static_cast<SoundResourcePtr*>(handle);
+        LOG_DEBUG(Logger::MULTIMEDIA,
+            "Closing stream " + (*res)->getName());
+        (*res)->unload();
+        delete res;
+        return FMOD_OK;
+    }
+
+    FMOD_RESULT F_CALLBACK Fmod4Driver::read(
+        void *  handle,
+        void *  buffer,
+        unsigned int  sizebytes,
+        unsigned int *  bytesread,
+        void *  userdata)
+    {
+        if (handle == NULL)
         {
-            (*sound)->load();
+            return FMOD_ERR_INVALID_PARAM;
         }
 
-		DataStreamPtr ds = (*sound)->getDataStream();
-    	if (!ds.isNull())
-    	{
-            *bytesread = ds->read(buffer, sizebytes);
-            if (*bytesread < sizebytes)
+        SoundResourcePtr *sound = static_cast<SoundResourcePtr*>(handle);
+        if (!sound->isNull())
+        {
+            if (!(*sound)->isLoaded())
             {
-                return FMOD_ERR_FILE_EOF;
+                (*sound)->load();
             }
-            return FMOD_OK;
-    	}
-    }
 
-    return FMOD_ERR_FILE_EOF;
-}
+            DataStreamPtr ds = (*sound)->getDataStream();
+            if (!ds.isNull())
+            {
+                *bytesread = ds->read(buffer, sizebytes);
+                if (*bytesread < sizebytes)
+                {
+                    return FMOD_ERR_FILE_EOF;
+                }
+                return FMOD_OK;
+            }
+        }
 
-FMOD_RESULT F_CALLBACK Fmod4Driver::seek(
-    void *  handle, 
-    unsigned int  pos, 
-    void *  userdata)
-{
-    if (handle == NULL)
+        return FMOD_ERR_FILE_EOF;
+    }
+
+    FMOD_RESULT F_CALLBACK Fmod4Driver::seek(
+        void *  handle,
+        unsigned int  pos,
+        void *  userdata)
     {
+        if (handle == NULL)
+        {
+            return FMOD_ERR_INVALID_PARAM;
+        }
+
+        SoundResourcePtr *sound = static_cast<SoundResourcePtr*>(handle);
+        if (!sound->isNull())
+        {
+            DataStreamPtr ds = (*sound)->getDataStream();
+            if (!ds.isNull())
+            {
+                ds->seek(pos);
+                return FMOD_OK;
+            }
+        }
         return FMOD_ERR_INVALID_PARAM;
     }
 
-    SoundResourcePtr *sound = static_cast<SoundResourcePtr*>(handle);
-	if (!sound->isNull())
-	{
-		DataStreamPtr ds = (*sound)->getDataStream();
-    	if (!ds.isNull())
-    	{
-        	ds->seek(pos);
-        	return FMOD_OK;
-    	}
+    void Fmod4Driver::setMasterVolume(const Ogre::Real& vol)
+    {
+        SoundDriver::setMasterVolume(vol);
+        /**@todo: Lautst???rke setzen, geht m???glicherweise nur ???ber channelgroups*/
     }
-    return FMOD_ERR_INVALID_PARAM;
-}
 
-void Fmod4Driver::setMasterVolume(const Ogre::Real& vol)
-{
-    SoundDriver::setMasterVolume(vol);
-    /**@todo: Lautst???rke setzen, geht m???glicherweise nur ???ber channelgroups*/
-}
+    /// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
+    void Fmod4Driver::setRolloffFactor(const Ogre::Real& factor)
+    {
+        float dopplerScale;
+        mFmod4System->get3DSettings(&dopplerScale, NULL, NULL);
+        mFmod4System->set3DSettings(dopplerScale, 1.0, factor);
+    }
 
-/// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
-void Fmod4Driver::setRolloffFactor(const Ogre::Real& factor)
-{
-    float dopplerScale;
-    mFmod4System->get3DSettings(&dopplerScale, NULL, NULL);
-    mFmod4System->set3DSettings(dopplerScale, 1.0, factor);
+    const Ogre::Real Fmod4Driver::getRolloffFactor()
+    {
+        float factor;
+        mFmod4System->get3DSettings(NULL, NULL, &factor);
+        return factor;
+    }
 }
-
-const Ogre::Real Fmod4Driver::getRolloffFactor()
-{
-    float factor;
-    mFmod4System->get3DSettings(NULL, NULL, &factor);
-    return factor;
-}
-
-
-}

Modified: rl/trunk/plugins/openaldriver/include/OpenALDriver.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALDriver.h	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/plugins/openaldriver/include/OpenALDriver.h	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -22,49 +22,43 @@
 namespace rl
 {
 
-/** Diese Klasse ist der Treiber, der OpenAL zur
- * Ausgabe benutzt.
- */
-class _RlOpenALDriverExport OpenALDriver : public rl::SoundDriver
-{
-public:
-	/// Der Treibername
-    static Ogre::String NAME;
-    /// Der Konstruktor
-	OpenALDriver(Ogre::ResourceManager* soundResourceManager);
-    /// Der Destruktor
-	virtual ~OpenALDriver();
-    /// Ist der Treiber angeschaltet?
-    virtual bool isDriverAvailable();
-    /// Initialisiere den Treiber.
-    virtual bool initialize();
-    /// Deinitialisiere den Treiber.
-    virtual void shutdown();
-    /// Der Name des Treibers
-    virtual Ogre::String getName() const;
-    /// Update-Aufgaben erledigen
-    virtual void update();
-    /// Einen Sound-Stream mit Resource erzeugen
-    virtual Sound *createStream(const SoundResourcePtr &res);
-    /// Einen Sound-Sample mit Resource erzeugen
-    virtual Sound *createSample(const SoundResourcePtr &res);
-    /// Einen Soundlistener erzeugen
-    virtual ListenerMovable *createListener(const Ogre::String &name);
+    /** Diese Klasse ist der Treiber, der OpenAL zur
+     * Ausgabe benutzt.
+     */
+    class _RlOpenALDriverExport OpenALDriver : public rl::SoundDriver
+    {
+    public:
+        /// Der Treibername
+        static Ogre::String NAME;
+        /// Der Konstruktor
+        OpenALDriver(Ogre::ResourceManager* soundResourceManager);
+        /// Der Destruktor
+        virtual ~OpenALDriver();
+        /// Ist der Treiber angeschaltet?
+        virtual bool isDriverAvailable();
+        /// Initialisiere den Treiber.
+        virtual bool initialize();
+        /// Deinitialisiere den Treiber.
+        virtual void shutdown();
+        /// Der Name des Treibers
+        virtual Ogre::String getName() const;
+        /// Update-Aufgaben erledigen
+        virtual void update();
+        /// Einen Sound-Stream mit Resource erzeugen
+        virtual Sound *createStream(const SoundResourcePtr &res);
+        /// Einen Sound-Sample mit Resource erzeugen
+        virtual Sound *createSample(const SoundResourcePtr &res);
+        /// Einen Soundlistener erzeugen
+        virtual ListenerMovable *createListener(const Ogre::String &name);
 
-    /// Die Einstellungen in Datei schreiben
-    virtual void saveConf(rl::ConfigFile &conf) const;
-    /// Die Einstellungen laden
-    virtual void loadConf(rl::ConfigFile &conf);
+        /// Setzt den Faktor f, mit der die Lautst?rke nach der Formel 1/(f*Entfernung) abnimmt
+        virtual void setRolloffFactor(const Ogre::Real& f);
+        virtual const Ogre::Real getRolloffFactor();
 
-    /// Setzt den Faktor f, mit der die Lautst?rke nach der Formel 1/(f*Entfernung) abnimmt
-	virtual void setRolloffFactor(const Ogre::Real& f);
-	virtual const Ogre::Real getRolloffFactor();
-    
-private:
-    /// Informationen ?ber den Treiber ausgeben
-    virtual void printData() const;
-};
-
+    private:
+        /// Informationen ?ber den Treiber ausgeben
+        virtual void printData() const;
+    };
 }
 
 #endif /*OALDRIVER_H_*/

Modified: rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -17,201 +17,176 @@
 
 #if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
     // OpenAL 1.1 unter Windows
-//	extern "C" {
-//		#include "al.h"
-//		#include "alc.h"
-//	}
+//    extern "C" {
+//        #include "al.h"
+//        #include "alc.h"
+//    }
 //#else
 //    // OpenAL 1.0 unter Linux
-//	extern "C" {
-//		#include "AL/al.h"
-//		#include "AL/alc.h"
-//	}
+//    extern "C" {
+//        #include "AL/al.h"
+//        #include "AL/alc.h"
+//    }
 #endif
 
 #include "OpenALSoundSample.h"
 #include "OpenALSoundStream.h"
 #include "OpenALListener.h"
 
-Ogre::String rl::OpenALDriver::NAME = "OpenAL";
-
 namespace rl
 {
+    Ogre::String rl::OpenALDriver::NAME = "RlOpenALDriver";
 
-/** 
- * Konstruktor
- * @author JoSch
- * @date 12-23-2005
- */
-OpenALDriver::OpenALDriver(Ogre::ResourceManager* soundResourceManager)
-: SoundDriver(soundResourceManager)
-{
-}
+    /**
+     * Konstruktor
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    OpenALDriver::OpenALDriver(Ogre::ResourceManager* soundResourceManager)
+    : SoundDriver(soundResourceManager)
+    {
+    }
 
-/** 
- * Destruktor
- * @author JoSch
- * @date 12-23-2005
- */
-OpenALDriver::~OpenALDriver()
-{
-}
+    /**
+     * Destruktor
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    OpenALDriver::~OpenALDriver()
+    {
+    }
 
-/** 
- * Zeigt an, ob der Treiber funktionsf?hig ist.
- * @return Immer TRUE.
- * @author JoSch
- * @date 12-23-2005
- */
-bool OpenALDriver::isDriverAvailable()
-{
-    //try {
-    //    // Clear error code
-    //    alGetError();
-    //    ALCdevice *device = alcOpenDevice(0);
-    //    
-    //    if (device == 0)
-    //    {
-    //        return false;
-    //    }
-    //    
-    //    //Create context(s)
-    //    ALCcontext *context = alcCreateContext(device, 0);
-    //    //Set active context
-    //    alcMakeContextCurrent(context);
-    //    // Get Error Code
-    //    ALenum success = alGetError();
-    //    //Disable context
-    //    alcMakeContextCurrent(0);
-    //    //Release context(s)
-    //    alcDestroyContext(context);
-    //    //Close device
-    //    alcCloseDevice(device);
-    //    
-    //    return (success == AL_NO_ERROR);
-    //} catch (...)
-    //{
-        return false;
-    //}
-}
+    /**
+     * Zeigt an, ob der Treiber funktionsf?hig ist.
+     * @return Immer TRUE.
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    bool OpenALDriver::isDriverAvailable()
+    {
+        //try {
+        //    // Clear error code
+        //    alGetError();
+        //    ALCdevice *device = alcOpenDevice(0);
+        //
+        //    if (device == 0)
+        //    {
+        //        return false;
+        //    }
+        //
+        //    //Create context(s)
+        //    ALCcontext *context = alcCreateContext(device, 0);
+        //    //Set active context
+        //    alcMakeContextCurrent(context);
+        //    // Get Error Code
+        //    ALenum success = alGetError();
+        //    //Disable context
+        //    alcMakeContextCurrent(0);
+        //    //Release context(s)
+        //    alcDestroyContext(context);
+        //    //Close device
+        //    alcCloseDevice(device);
+        //
+        //    return (success == AL_NO_ERROR);
+        //} catch (...)
+        //{
+            return false;
+        //}
+    }
 
-/** 
- * Starte den Treiber und mache alle Initialisierung.
- * @author JoSch
- * @date 12-23-2005
- */
-bool OpenALDriver::initialize()
-{
-    return true;
-}
+    /**
+     * Starte den Treiber und mache alle Initialisierung.
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    bool OpenALDriver::initialize()
+    {
+        return true;
+    }
 
-/** 
- * Beeende den Treiber und gib alle Resourcen frei.
- * @author JoSch
- * @date 12-23-2005
- */
-void OpenALDriver::shutdown()
-{
-}
+    /**
+     * Beeende den Treiber und gib alle Resourcen frei.
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    void OpenALDriver::shutdown()
+    {
+    }
 
-/** 
- * Gibt den Anzeigename des Treiber zur?ck.
- * @return Anzeigename
- * @author JoSch
- * @date 12-23-2005
- */
-Ogre::String OpenALDriver::getName() const
-{
-    return NAME;
-}
+    /**
+     * Gibt den Anzeigename des Treiber zur?ck.
+     * @return Anzeigename
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    Ogre::String OpenALDriver::getName() const
+    {
+        return NAME;
+    }
 
-/**
- * Update-Aufgaben erledigen
- * @author JoSch
- * @date 03-06-2006
- */
- void OpenALDriver::update()
- {
- 	// Erstmal nichts zu tun.
- }
- 
- /**
-  * Einen Sound-Stream mit Resource erzeugen
-  * @return Der erzeugte Stream
-  * @author JoSch
-  * @date 03-06-2006
-  */
-Sound *OpenALDriver::createStream(const SoundResourcePtr &res)
-{
- 	Sound *sound = new OpenALSoundStream(this, res);
- 	return sound;
-}
+    /**
+     * Update-Aufgaben erledigen
+     * @author JoSch
+     * @date 03-06-2006
+     */
+     void OpenALDriver::update()
+     {
+         // Erstmal nichts zu tun.
+     }
 
-/**
- * Einen Sound-Sample mit Resource erzeugen
- * @return Das erzeugte Sample
- * @author JoSch
- * @date 03-06-2006
- */
-Sound *OpenALDriver::createSample(const SoundResourcePtr &res)
-{
- 	Sound *sound = new OpenALSoundSample(this, res);
- 	return sound;
-}
+     /**
+      * Einen Sound-Stream mit Resource erzeugen
+      * @return Der erzeugte Stream
+      * @author JoSch
+      * @date 03-06-2006
+      */
+    Sound *OpenALDriver::createStream(const SoundResourcePtr &res)
+    {
+         Sound *sound = new OpenALSoundStream(this, res);
+         return sound;
+    }
 
-/**
- * Einen Soundlistener erzeugen
- * @return Der erzeugte Listener
- * @param name Der Name des Channels.
- * @author JoSch
- * @date 04-04-2006
- */
-ListenerMovable *OpenALDriver::createListener(const Ogre::String &name)
-{
-    ListenerMovable *listener = new OpenALListener(name);
-    return listener;
-}
+    /**
+     * Einen Sound-Sample mit Resource erzeugen
+     * @return Das erzeugte Sample
+     * @author JoSch
+     * @date 03-06-2006
+     */
+    Sound *OpenALDriver::createSample(const SoundResourcePtr &res)
+    {
+         Sound *sound = new OpenALSoundSample(this, res);
+         return sound;
+    }
 
-/**
- * Ausdruck einiger Werte des Soundsystems.
- * @author JoSch
- * @date 01-20-2006
- */
-void OpenALDriver::printData() const
-{
-}
+    /**
+     * Einen Soundlistener erzeugen
+     * @return Der erzeugte Listener
+     * @param name Der Name des Channels.
+     * @author JoSch
+     * @date 04-04-2006
+     */
+    ListenerMovable *OpenALDriver::createListener(const Ogre::String &name)
+    {
+        ListenerMovable *listener = new OpenALListener(name);
+        return listener;
+    }
 
-/*
- * Die Konfiguration in Datei schreiben.
- * @author JoSch
- * @date 05-07-2006
- * @param conf Die Konfigurationdatei zum Schreiben.
- */
-void OpenALDriver::saveConf(ConfigFile &conf) const
-{
-	SoundDriver::saveConf(conf);
-    // DO NOTHING
-}
+    /**
+     * Ausdruck einiger Werte des Soundsystems.
+     * @author JoSch
+     * @date 01-20-2006
+     */
+    void OpenALDriver::printData() const
+    {
+    }
 
-/*
- * Die Konfiguration lesen
- * @author JoSch
- * @date 05-07-2006
- * @param conf Die Konfigurationdatei, aus der gelesen werden soll
- */
-void OpenALDriver::loadConf(ConfigFile &conf)
-{
-	SoundDriver::loadConf(conf);
-    // DO NOTHING
-}
+    void OpenALDriver::setRolloffFactor(const Ogre::Real& f)
+    {
+    }
 
-void OpenALDriver::setRolloffFactor(const Ogre::Real& f)
-{
-}
+    const Ogre::Real OpenALDriver::getRolloffFactor()
+    {
+        return 1.0;
+    }
 
-const Ogre::Real OpenALDriver::getRolloffFactor()
-{
-    return 1.0;
 }
-
-}

Modified: rl/trunk/rastullah.conf.in
===================================================================
--- rl/trunk/rastullah.conf.in	2007-02-06 18:57:23 UTC (rev 3025)
+++ rl/trunk/rastullah.conf.in	2007-02-07 19:30:10 UTC (rev 3026)
@@ -1,3 +1,3 @@
-[Rastullah]
-ModulesDirectory=@RL_MODULE_DIR@
-PluginCfg=plugins-linux.cfg
+[Paths]
+ModulesDirectory=@RL_MODULEDIR@
+OgrePluginDirectory=@OGRE_PLUGINDIR@



From chrber at mail.berlios.de  Wed Feb  7 21:25:06 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Wed, 7 Feb 2007 21:25:06 +0100
Subject: [Dsa-hl-svn] r3027 - modules/common/gui
Message-ID: <200702072025.l17KP6Kd030296@sheep.berlios.de>

Author: chrber
Date: 2007-02-07 21:25:03 +0100 (Wed, 07 Feb 2007)
New Revision: 3027

Modified:
   modules/common/gui/cegui.config
Log:
Removed modules directory from the path


Modified: modules/common/gui/cegui.config
===================================================================
--- modules/common/gui/cegui.config	2007-02-07 19:30:10 UTC (rev 3026)
+++ modules/common/gui/cegui.config	2007-02-07 20:25:03 UTC (rev 3027)
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <CEGUIConfig 
     DefaultFont="Vera Serif-8" 
-    Scheme="modules/common/gui/schemes/RastullahLook.scheme" 
+    Scheme="common/gui/schemes/RastullahLook.scheme" 
 />



From chrber at mail.berlios.de  Wed Feb  7 22:03:04 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Wed, 7 Feb 2007 22:03:04 +0100
Subject: [Dsa-hl-svn] r3028 - rl/trunk/engine/ui/src
Message-ID: <200702072103.l17L348Q032647@sheep.berlios.de>

Author: chrber
Date: 2007-02-07 22:03:03 +0100 (Wed, 07 Feb 2007)
New Revision: 3028

Modified:
   rl/trunk/engine/ui/src/InputManager.cpp
Log:
Missing InputManager changes


Modified: rl/trunk/engine/ui/src/InputManager.cpp
===================================================================
--- rl/trunk/engine/ui/src/InputManager.cpp	2007-02-07 20:25:03 UTC (rev 3027)
+++ rl/trunk/engine/ui/src/InputManager.cpp	2007-02-07 21:03:03 UTC (rev 3028)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -53,32 +53,32 @@
 namespace rl {
 
     InputManager::InputManager(Ogre::RenderWindow* win) :
-		mNumActiveWindowsMouseInput(0),
-		mNumActiveWindowsKeyboardInput(0),
-		mNumActiveWindowsAllInput(0),
+        mNumActiveWindowsMouseInput(0),
+        mNumActiveWindowsKeyboardInput(0),
+        mNumActiveWindowsAllInput(0),
         mKeyMapNormal(),
-		mKeyMapShift(),
-	    mKeyMapAlt(),
-		mKeyNames(),
+        mKeyMapShift(),
+        mKeyMapAlt(),
+        mKeyNames(),
         mCharacterController(NULL),
         mCommandMapper(NULL),
         mInputManager(NULL)
-	{
+    {
         initializeOis(win);
         GameLoop::getSingleton().addTask(this, GameLoop::TG_INPUT);
     }
 
-	InputManager::~InputManager()
-	{
+    InputManager::~InputManager()
+    {
         GameLoop::getSingleton().removeTask(this);
-		if( mInputManager )
-		{
-			mInputManager->destroyInputObject( mMouse );
-			mInputManager->destroyInputObject( mKeyboard );
+        if( mInputManager )
+        {
+            mInputManager->destroyInputObject( mMouse );
+            mInputManager->destroyInputObject( mKeyboard );
             OIS::InputManager::destroyInputSystem(mInputManager);
-			mInputManager = NULL;
-		}
-	}
+            mInputManager = NULL;
+        }
+    }
 
     InputManager& InputManager::getSingleton()
     {
@@ -94,74 +94,74 @@
     {
         // BEGIN INPUT INITIALIZATION
         LOG_DEBUG(Logger::UI, "Initializing input manager.");
-        
-		OIS::ParamList pl;	
-		size_t windowHnd = 0;
+
+        OIS::ParamList pl;
+        size_t windowHnd = 0;
         LOG_DEBUG(Logger::UI, "Initializing input manager: Render window parameters");
         win->getCustomAttribute("WINDOW", &windowHnd);
-        
+
         #if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
             pl.insert(std::make_pair(std::string("w32_keyboard"), std::string("DISCL_EXCLUSIVE")));
             pl.insert(std::make_pair(std::string("w32_keyboard"), std::string("DISCL_FOREGROUND")));
         #elif OGRE_PLATFORM == OGRE_PLATFORM_LINUX
-        //	pl.insert(std::make_pair(std::string("x11_mouse_grab"), std::string("false")));
-        //	pl.insert(std::make_pair(std::string("x11_mouse_hide"), std::string("false")));
+        //    pl.insert(std::make_pair(std::string("x11_mouse_grab"), std::string("false")));
+        //    pl.insert(std::make_pair(std::string("x11_mouse_hide"), std::string("false")));
         #endif
 
         std::ostringstream windowHndStr;
         windowHndStr << windowHnd;
-		pl.insert(std::make_pair(std::string("WINDOW"), windowHndStr.str()));
+        pl.insert(std::make_pair(std::string("WINDOW"), windowHndStr.str()));
 
-		LOG_DEBUG(Logger::UI, "Initializing input manager: Create input manager");
-		mInputManager = OIS::InputManager::createInputSystem(pl);
-		LOG_DEBUG(Logger::UI, "Initializing input manager: Create Keyboard input.");
-		mKeyboard = static_cast<OIS::Keyboard*>(mInputManager->createInputObject(OIS::OISKeyboard, true));
+        LOG_DEBUG(Logger::UI, "Initializing input manager: Create input manager");
+        mInputManager = OIS::InputManager::createInputSystem(pl);
+        LOG_DEBUG(Logger::UI, "Initializing input manager: Create Keyboard input.");
+        mKeyboard = static_cast<OIS::Keyboard*>(mInputManager->createInputObject(OIS::OISKeyboard, true));
         mKeyboard->setTextTranslation(OIS::Keyboard::Unicode);
         LOG_DEBUG(Logger::UI, "Initializing input manager: Create Mouse Input.");
-		mMouse = static_cast<OIS::Mouse*>(mInputManager->createInputObject(OIS::OISMouse, true));
-        
+        mMouse = static_cast<OIS::Mouse*>(mInputManager->createInputObject(OIS::OISMouse, true));
+
         LOG_DEBUG(Logger::UI, "Initializing input manager: Set mouse paremeters.");
         unsigned int width, height, depth;
-		int left, top;
-		win->getMetrics(width, height, depth, left, top);
+        int left, top;
+        win->getMetrics(width, height, depth, left, top);
         mMouse->getMouseState().width = width;
         mMouse->getMouseState().height = height;
 
         mKeyboard->setEventCallback(this);
         mMouse->setEventCallback(this);
-        
+
         LOG_DEBUG(Logger::UI, "Done initializing input manager.");
     }
 
     void InputManager::run(Ogre::Real elapsedTime)
     {
-		mMouse->capture();
-        mKeyboard->capture();		
+        mMouse->capture();
+        mKeyboard->capture();
     }
 
-	void InputManager::setCharacterController(CharacterController* controller)
-	{
-		mCharacterController = controller;
+    void InputManager::setCharacterController(CharacterController* controller)
+    {
+        mCharacterController = controller;
         mCharacterController->setCommandMapper(mCommandMapper);
     }
 
     bool InputManager::mousePressed(const OIS::MouseEvent & e, MouseButtonID id)
-	{
-		if (isCeguiActive())
-		{
-			System::getSingleton().injectMouseButtonDown(
+    {
+        if (isCeguiActive())
+        {
+            System::getSingleton().injectMouseButtonDown(
                 static_cast<CEGUI::MouseButton>(id));
-		}
-		else
-		{
+        }
+        else
+        {
             if (mCharacterController != NULL)
             {
-			    mCharacterController->
+                mCharacterController->
                     injectMouseDown(CommandMapper::encodeKey(id, getModifierCode()));
             }
-		}
+        }
         return true;
-	}
+    }
 
     bool InputManager::isMouseButtonDown( OIS::MouseButtonID buttonID )
     {
@@ -171,13 +171,13 @@
 
 
     bool InputManager::mouseReleased(const OIS::MouseEvent & arg, MouseButtonID id)
-	{
-		if (isCeguiActive())
-		{
-			System::getSingleton().injectMouseButtonUp(
+    {
+        if (isCeguiActive())
+        {
+            System::getSingleton().injectMouseButtonUp(
                 static_cast<CEGUI::MouseButton>(id));
             // return true;
-		}
+        }
         else
             /// {
             /// @todo Furchtbarer Hack. Das Ereignis wird durchgeschliffen, damit
@@ -187,22 +187,22 @@
             /// dass da noch mehr durcheinander ist. ^^
             if (mCharacterController != NULL)
                 mCharacterController->injectMouseUp(
-					CommandMapper::encodeKey(id, getModifierCode()));
-            
-		return true;
-	}
+                    CommandMapper::encodeKey(id, getModifierCode()));
 
+        return true;
+    }
+
     bool InputManager::mouseMoved(const OIS::MouseEvent &arg)
-	{
-		if (isCeguiActive())
-		{			
-			CEGUI::Renderer* renderer  = System::getSingleton().getRenderer();
-			System::getSingleton().injectMouseMove(arg.state.X.rel, arg.state.Y.rel);			
+    {
+        if (isCeguiActive())
+        {
+            CEGUI::Renderer* renderer  = System::getSingleton().getRenderer();
+            System::getSingleton().injectMouseMove(arg.state.X.rel, arg.state.Y.rel);
 
             return true;
-		}
+        }
         return false;
-	}
+    }
 
     Ogre::Real InputManager::getMouseRelativeX() const
     {
@@ -235,20 +235,20 @@
     }
 
     bool InputManager::sendKeyToCeGui(const OIS::KeyEvent& e) const
-	{
-		// Fenster, die alle Inputs wollen
-		if (mNumActiveWindowsAllInput > 0)
+    {
+        // Fenster, die alle Inputs wollen
+        if (mNumActiveWindowsAllInput > 0)
         {
-			return true;
+            return true;
         }
 
-		// Wenn kein Fenster mit Tastatureingabe aktiv ist, kriegt CEGUI keine KeyEvents
-		if (mNumActiveWindowsKeyboardInput == 0)
+        // Wenn kein Fenster mit Tastatureingabe aktiv ist, kriegt CEGUI keine KeyEvents
+        if (mNumActiveWindowsKeyboardInput == 0)
         {
-			return false;
+            return false;
         }
 
-		// ---- Tastatureingabe gefordert ----
+        // ---- Tastatureingabe gefordert ----
 
         // Tasten, die Zeichen liefern sollen an CEGUI gesendet werden
         if (getKeyChar(e.key, getModifierCode()) != 0)
@@ -256,27 +256,27 @@
             return true;
         }
 
-        if (e.key == OIS::KC_RETURN 
-			|| e.key == OIS::KC_HOME || e.key == OIS::KC_END
-			|| e.key == OIS::KC_LEFT || e.key == OIS::KC_RIGHT
-			|| e.key == OIS::KC_BACK || e.key == OIS::KC_DELETE
-			|| e.key == OIS::KC_UP   || e.key == OIS::KC_DOWN
-			|| e.key == OIS::KC_RMENU)
+        if (e.key == OIS::KC_RETURN
+            || e.key == OIS::KC_HOME || e.key == OIS::KC_END
+            || e.key == OIS::KC_LEFT || e.key == OIS::KC_RIGHT
+            || e.key == OIS::KC_BACK || e.key == OIS::KC_DELETE
+            || e.key == OIS::KC_UP   || e.key == OIS::KC_DOWN
+            || e.key == OIS::KC_RMENU)
         {
-			return true;
+            return true;
         }
 
-		return false;
-	}
+        return false;
+    }
 
     bool InputManager::keyPressed(const OIS::KeyEvent& e)
-	{
-        if (sendKeyToCeGui(e)) 
-		{   // Send all events to CEGUI
-			CEGUI::System& cegui = CEGUI::System::getSingleton();
-			cegui.injectKeyDown(e.key);
-			cegui.injectChar(getKeyChar(e.key, getModifierCode()));
-		}
+    {
+        if (sendKeyToCeGui(e))
+        {   // Send all events to CEGUI
+            CEGUI::System& cegui = CEGUI::System::getSingleton();
+            cegui.injectKeyDown(e.key);
+            cegui.injectChar(getKeyChar(e.key, getModifierCode()));
+        }
         else
         {
             int code = CommandMapper::encodeKey(e.key, getModifierCode());
@@ -301,17 +301,17 @@
         }
 
         return true;
-	}
+    }
 
-	bool InputManager::keyReleased(const OIS::KeyEvent& e)
-	{
-		LOG_MESSAGE2(Logger::UI, "Key released: " + mKeyboard->getAsString(e.key) , "InputManager::keyReleased");
-        if (sendKeyToCeGui(e)) 
-		{
-			CEGUI::System& cegui = CEGUI::System::getSingleton();
-			cegui.injectKeyUp(e.key);
-			LOG_MESSAGE2(Logger::UI, "    fed to cegui", "InputManager::keyReleased");
-		}
+    bool InputManager::keyReleased(const OIS::KeyEvent& e)
+    {
+        LOG_MESSAGE2(Logger::UI, "Key released: " + mKeyboard->getAsString(e.key) , "InputManager::keyReleased");
+        if (sendKeyToCeGui(e))
+        {
+            CEGUI::System& cegui = CEGUI::System::getSingleton();
+            cegui.injectKeyUp(e.key);
+            LOG_MESSAGE2(Logger::UI, "    fed to cegui", "InputManager::keyReleased");
+        }
         else
         {
             int code = CommandMapper::encodeKey(e.key, getModifierCode());
@@ -322,77 +322,77 @@
                 try
                 {
                     action->doAction(NULL, NULL, NULL);
-					LOG_MESSAGE2(Logger::UI, "    invoked action " + action->getName(), "InputManager::keyReleased");
+                    LOG_MESSAGE2(Logger::UI, "    invoked action " + action->getName(), "InputManager::keyReleased");
                 }
                 catch( ScriptInvocationFailedException& sife )
-		        {
-			        LOG_ERROR(Logger::UI, sife.toString() );
-		        }
+                {
+                    LOG_ERROR(Logger::UI, sife.toString() );
+                }
             }
 
             if (mCharacterController != NULL)
             {
-		        mCharacterController->injectKeyUp(e.key);
-				LOG_MESSAGE2(Logger::UI, "    fed to char controller", "InputManager::keyReleased");
+                mCharacterController->injectKeyUp(e.key);
+                LOG_MESSAGE2(Logger::UI, "    fed to char controller", "InputManager::keyReleased");
             }
         }
 
         return true;
-	}
+    }
 
-	CeGuiString InputManager::getKeyName(int combinedKeyCode)
-	{
-		int scancode, syskeys;
-		CommandMapper::decodeKey(combinedKeyCode, &scancode, &syskeys);
-		return getKeyName(scancode, syskeys);
-	}
+    CeGuiString InputManager::getKeyName(int combinedKeyCode)
+    {
+        int scancode, syskeys;
+        CommandMapper::decodeKey(combinedKeyCode, &scancode, &syskeys);
+        return getKeyName(scancode, syskeys);
+    }
 
-	CeGuiString InputManager::getKeyName(int scancode, int syskeys)
-	{
-		CeGuiString name = mKeyNames.find(scancode)->second;
-		if (syskeys & ALT_MASK)
-			name = "Alt+"+name;
-		if (syskeys & CTRL_MASK)
-			name = "Ctrl+"+name;
-		if (syskeys & SHIFT_MASK)
-			name = "Shift+"+name;
+    CeGuiString InputManager::getKeyName(int scancode, int syskeys)
+    {
+        CeGuiString name = mKeyNames.find(scancode)->second;
+        if (syskeys & ALT_MASK)
+            name = "Alt+"+name;
+        if (syskeys & CTRL_MASK)
+            name = "Ctrl+"+name;
+        if (syskeys & SHIFT_MASK)
+            name = "Shift+"+name;
         if (syskeys & SUPER_MASK)
-			name = "Super+"+name;
-		return name;
-	}
+            name = "Super+"+name;
+        return name;
+    }
 
-	int InputManager::getScanCode(const CeGuiString& name)
-	{
-		for(KeyNameMap::iterator it = mKeyNames.begin(); it != mKeyNames.end(); it++)
-		{
-			if ((*it).second == name)
-				return (*it).first;
-		}
+    int InputManager::getScanCode(const CeGuiString& name)
+    {
+        for(KeyNameMap::iterator it = mKeyNames.begin(); it != mKeyNames.end(); it++)
+        {
+            if ((*it).second == name)
+                return (*it).first;
+        }
 
-		Ogre::String msg = Ogre::String("Key ")+ name.c_str()+" not found.";
-		Throw(IllegalArgumentException, msg);
-	}
+        Ogre::String msg = Ogre::String("Key ")+ name.c_str()+" not found.";
+        Throw(IllegalArgumentException, msg);
+    }
 
-	int InputManager::getSystemCode(const CeGuiString& name)
-	{
-		if (name == "Alt")
+    int InputManager::getSystemCode(const CeGuiString& name)
+    {
+        if (name == "Alt")
         {
-			return ALT_MASK;
+            return ALT_MASK;
         }
-		else if (name == "Ctrl")
+        else if (name == "Ctrl")
         {
-			return CTRL_MASK;
+            return CTRL_MASK;
         }
-		else if (name == "Shift")
+        else if (name == "Shift")
         {
-			return SHIFT_MASK;
+            return SHIFT_MASK;
         }
-		else if (name == "Super")
+        else if (name == "Super")
         {
-			return SUPER_MASK;
+            return SUPER_MASK;
         }
-		return 0;
-	}
+        return 0;
+    }
 
     int InputManager::getModifierCode() const
     {
@@ -402,151 +402,151 @@
         if (mKeyboard->isModifierDown(OIS::Keyboard::Ctrl)) rval |= CTRL_MASK;
         if (mKeyboard->isModifierDown(OIS::Keyboard::Shift)) rval |= SHIFT_MASK;
 
-		return rval;
+        return rval;
     }
 
-	void InputManager::registerCeGuiWindow(CeGuiWindow* window)
-	{
-		if (window->getWindowType() == CeGuiWindow::WND_SHOW)
-			return;
+    void InputManager::registerCeGuiWindow(CeGuiWindow* window)
+    {
+        if (window->getWindowType() == CeGuiWindow::WND_SHOW)
+            return;
 
-		bool active = isCeguiActive();
+        bool active = isCeguiActive();
 
-		if (window->getWindowType() == CeGuiWindow::WND_MOUSE_INPUT)
-		{
-			mNumActiveWindowsMouseInput++;
+        if (window->getWindowType() == CeGuiWindow::WND_MOUSE_INPUT)
+        {
+            mNumActiveWindowsMouseInput++;
         }
-		else if (window->getWindowType() == CeGuiWindow::WND_KEYBOARD_INPUT)
-		{
-			mNumActiveWindowsKeyboardInput++;
+        else if (window->getWindowType() == CeGuiWindow::WND_KEYBOARD_INPUT)
+        {
+            mNumActiveWindowsKeyboardInput++;
         }
-		else if (window->getWindowType() == CeGuiWindow::WND_ALL_INPUT)
-		{
-			mNumActiveWindowsAllInput++;
+        else if (window->getWindowType() == CeGuiWindow::WND_ALL_INPUT)
+        {
+            mNumActiveWindowsAllInput++;
         }
-		
-		if (!active && isCeguiActive()) // war nicht aktiv, sollte jetzt aktiv sein -> anschalten
-		{
+
+        if (!active && isCeguiActive()) // war nicht aktiv, sollte jetzt aktiv sein -> anschalten
+        {
             mSavedMouseState.x = mMouse->getMouseState().X.rel;
             mSavedMouseState.y = mMouse->getMouseState().Y.rel;
             mSavedMouseState.z = mMouse->getMouseState().Z.rel;
             CEGUI::MouseCursor::getSingleton().show();
-		}
-	}
+        }
+    }
 
-	void InputManager::unregisterCeGuiWindow(CeGuiWindow* window)
-	{
-		if (window->getWindowType() == CeGuiWindow::WND_SHOW)
-		{
-			return;
+    void InputManager::unregisterCeGuiWindow(CeGuiWindow* window)
+    {
+        if (window->getWindowType() == CeGuiWindow::WND_SHOW)
+        {
+            return;
         }
 
-		bool active = isCeguiActive();
+        bool active = isCeguiActive();
 
-		if (window->getWindowType() == CeGuiWindow::WND_MOUSE_INPUT)
-		{
-			mNumActiveWindowsMouseInput--;
+        if (window->getWindowType() == CeGuiWindow::WND_MOUSE_INPUT)
+        {
+            mNumActiveWindowsMouseInput--;
         }
-		else if (window->getWindowType() == CeGuiWindow::WND_KEYBOARD_INPUT)
-		{
-			mNumActiveWindowsKeyboardInput--;
+        else if (window->getWindowType() == CeGuiWindow::WND_KEYBOARD_INPUT)
+        {
+            mNumActiveWindowsKeyboardInput--;
         }
-		else if (window->getWindowType() == CeGuiWindow::WND_ALL_INPUT)
-		{
-			mNumActiveWindowsAllInput--;
+        else if (window->getWindowType() == CeGuiWindow::WND_ALL_INPUT)
+        {
+            mNumActiveWindowsAllInput--;
         }
 
-		if (active && !isCeguiActive()) // war aktiv, sollte nicht mehr aktiv sein -> ausschalten
-		{
-			CEGUI::MouseCursor::getSingleton().hide();
-		}
-	}
+        if (active && !isCeguiActive()) // war aktiv, sollte nicht mehr aktiv sein -> ausschalten
+        {
+            CEGUI::MouseCursor::getSingleton().hide();
+        }
+    }
 
-	bool InputManager::isCeguiActive() const
-	{
-		return 
-			mNumActiveWindowsKeyboardInput > 0 || 
-			mNumActiveWindowsMouseInput > 0 || 
-			mNumActiveWindowsAllInput > 0;
-	}
+    bool InputManager::isCeguiActive() const
+    {
+        return
+            mNumActiveWindowsKeyboardInput > 0 ||
+            mNumActiveWindowsMouseInput > 0 ||
+            mNumActiveWindowsAllInput > 0;
+    }
 
-	void InputManager::loadKeyMapping(const Ogre::String& filename)
-	{
-		using namespace XERCES_CPP_NAMESPACE;
-		using XERCES_CPP_NAMESPACE::DOMDocument;
-		using std::make_pair;
+    void InputManager::loadKeyMapping(const Ogre::String& filename)
+    {
+        using namespace XERCES_CPP_NAMESPACE;
+        using XERCES_CPP_NAMESPACE::DOMDocument;
+        using std::make_pair;
 
-		XMLPlatformUtils::Initialize();
-		XmlHelper::initializeTranscoder();
+        XMLPlatformUtils::Initialize();
+        XmlHelper::initializeTranscoder();
 
-		XercesDOMParser* parser = new XercesDOMParser();
+        XercesDOMParser* parser = new XercesDOMParser();
         parser->setValidationScheme(XercesDOMParser::Val_Auto);    // optional.
         parser->setDoNamespaces(true);    // optional
 
 /*        ErrorHandler* errHandler = (ErrorHandler*) new HandlerBase();
         parser->setErrorHandler(errHandler);*/
 
-		XMLCh* ALT = XMLString::transcode("AltChar");
-		XMLCh* SHIFT = XMLString::transcode("ShiftChar");
-		XMLCh* NORMAL = XMLString::transcode("NormalChar");
-		XMLCh* DESCR = XMLString::transcode("KeyDescription");
-		XMLCh* CODE = XMLString::transcode("KeyCode");
-		XMLCh* KEY = XMLString::transcode("Key");
-		
-		XmlPtr res = 
-			XmlResourceManager::getSingleton().create(
-			filename, 
-			ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
-		res->parseBy(parser);
-		DOMDocument* doc = parser->getDocument();
-		DOMElement* dataDocumentContent = doc->getDocumentElement();
+        XMLCh* ALT = XMLString::transcode("AltChar");
+        XMLCh* SHIFT = XMLString::transcode("ShiftChar");
+        XMLCh* NORMAL = XMLString::transcode("NormalChar");
+        XMLCh* DESCR = XMLString::transcode("KeyDescription");
+        XMLCh* CODE = XMLString::transcode("KeyCode");
+        XMLCh* KEY = XMLString::transcode("Key");
 
-		DOMNodeList* keymaps = dataDocumentContent->getElementsByTagName(KEY);
-		for (unsigned int idx = 0; idx < keymaps->getLength(); idx++)
-		{
-			DOMElement* key = static_cast<DOMElement*>(keymaps->item(idx));
-			int keycode = XMLString::parseInt(key->getAttribute(CODE));
+        XmlPtr res =
+            XmlResourceManager::getSingleton().create(
+            filename,
+            ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
+        res->parseBy(parser);
+        DOMDocument* doc = parser->getDocument();
+        DOMElement* dataDocumentContent = doc->getDocumentElement();
 
-			const XMLCh* xmlch;
+        DOMNodeList* keymaps = dataDocumentContent->getElementsByTagName(KEY);
+        for (unsigned int idx = 0; idx < keymaps->getLength(); idx++)
+        {
+            DOMElement* key = static_cast<DOMElement*>(keymaps->item(idx));
+            int keycode = XMLString::parseInt(key->getAttribute(CODE));
 
-			xmlch = key->getAttribute(NORMAL);
-			if (xmlch != NULL && XMLString::stringLen(xmlch) > 0)
-			{
-				CeGuiString s(XmlHelper::transcodeToString(xmlch)); 
-				mKeyMapNormal.insert(make_pair(keycode, s[0]));
-			}
+            const XMLCh* xmlch;
 
-			xmlch = key->getAttribute(ALT);
-			if (xmlch != NULL && XMLString::stringLen(xmlch) > 0)
-			{
-				CeGuiString s(XmlHelper::transcodeToString(xmlch)); 
-				mKeyMapAlt.insert(make_pair(keycode, s[0]));
-			}
+            xmlch = key->getAttribute(NORMAL);
+            if (xmlch != NULL && XMLString::stringLen(xmlch) > 0)
+            {
+                CeGuiString s(XmlHelper::transcodeToString(xmlch));
+                mKeyMapNormal.insert(make_pair(keycode, s[0]));
+            }
 
-			xmlch = key->getAttribute(SHIFT);
-			if (xmlch != NULL && XMLString::stringLen(xmlch) > 0)
-			{
-				CeGuiString s(XmlHelper::transcodeToString(xmlch)); 
-				mKeyMapShift.insert(make_pair(keycode, s[0]));
-			}
+            xmlch = key->getAttribute(ALT);
+            if (xmlch != NULL && XMLString::stringLen(xmlch) > 0)
+            {
+                CeGuiString s(XmlHelper::transcodeToString(xmlch));
+                mKeyMapAlt.insert(make_pair(keycode, s[0]));
+            }
 
-			xmlch = key->getAttribute(DESCR);
-			mKeyNames.insert(make_pair(keycode, XmlHelper::transcodeToString(xmlch)));
-		}
+            xmlch = key->getAttribute(SHIFT);
+            if (xmlch != NULL && XMLString::stringLen(xmlch) > 0)
+            {
+                CeGuiString s(XmlHelper::transcodeToString(xmlch));
+                mKeyMapShift.insert(make_pair(keycode, s[0]));
+            }
 
-		XMLString::release(&ALT);
-		XMLString::release(&SHIFT);
-		XMLString::release(&NORMAL);
-		XMLString::release(&CODE);
-		XMLString::release(&DESCR);
-		XMLString::release(&KEY);
+            xmlch = key->getAttribute(DESCR);
+            mKeyNames.insert(make_pair(keycode, XmlHelper::transcodeToString(xmlch)));
+        }
 
-		doc->release();
-		XMLPlatformUtils::Terminate();
+        XMLString::release(&ALT);
+        XMLString::release(&SHIFT);
+        XMLString::release(&NORMAL);
+        XMLString::release(&CODE);
+        XMLString::release(&DESCR);
+        XMLString::release(&KEY);
 
+        doc->release();
+        XMLPlatformUtils::Terminate();
+
         //XmlResourceManager::getSingleton().remove(filename);
         //res.setNull();
-	}
+    }
 
     const CEGUI::utf8& InputManager::getKeyChar(int scancode, int modifiers) const
     {
@@ -579,13 +579,13 @@
         return NO_CHAR;
     }
 
-    void InputManager::loadCommandMapping(const Ogre::String& filename)
+    void InputManager::buildCommandMapping(const Ogre::NameValuePairList& keylist)
     {
         if (mCommandMapper == NULL)
         {
             mCommandMapper = new CommandMapper();
         }
-		mCommandMapper->loadCommandMap(filename);
+        mCommandMapper->buildCommandMapping(keylist);
     }
 
     const Ogre::String& InputManager::getName() const
@@ -626,7 +626,7 @@
                 it->second = command;
             }
             ss << keyStr << "' to command '" << command << "'.";
-            
+
         }
 
         LOG_MESSAGE(Logger::UI, ss.str());



From chrber at mail.berlios.de  Thu Feb  8 21:21:15 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Thu, 8 Feb 2007 21:21:15 +0100
Subject: [Dsa-hl-svn] r3029 - in dependencies/opensteer/macosx: .
	OpenSteer.xcodeproj
Message-ID: <200702082021.l18KLFW6031507@sheep.berlios.de>

Author: chrber
Date: 2007-02-08 21:18:58 +0100 (Thu, 08 Feb 2007)
New Revision: 3029

Added:
   dependencies/opensteer/macosx/OpenSteerDemo-Info.plist
Modified:
   dependencies/opensteer/macosx/Info.plist
   dependencies/opensteer/macosx/OpenSteer.xcodeproj/project.pbxproj
Log:
Updated XCode Project, so that OpenSteer is build as a framework


Modified: dependencies/opensteer/macosx/Info.plist
===================================================================
--- dependencies/opensteer/macosx/Info.plist	2007-02-07 21:03:03 UTC (rev 3028)
+++ dependencies/opensteer/macosx/Info.plist	2007-02-08 20:18:58 UTC (rev 3029)
@@ -1,26 +1,20 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
-<plist version="1.0">
-<dict>
-	<key>CFBundleDevelopmentRegion</key>
-	<string>English</string>
-	<key>CFBundleExecutable</key>
-	<string>OpenSteerDemo</string>
-	<key>CFBundleIconFile</key>
-	<string>OpenSteer.icns</string>
-	<key>CFBundleIdentifier</key>
-	<string>com.sony.OpenSteerDemo</string>
-	<key>CFBundleInfoDictionaryVersion</key>
-	<string>6.0</string>
-	<key>CFBundlePackageType</key>
-	<string>APPL</string>
-	<key>CFBundleSignature</key>
-	<string>????</string>
-	<key>CFBundleVersion</key>
-	<string>1.0</string>
-	<key>NSMainNibFile</key>
-	<string>MainMenu</string>
-	<key>NSPrincipalClass</key>
-	<string>NSApplication</string>
-</dict>
-</plist>
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
+<plist version="1.0">
+<dict>
+	<key>CFBundleDevelopmentRegion</key>
+	<string>English</string>
+	<key>CFBundleExecutable</key>
+	<string>OpenSteer</string>
+	<key>CFBundleIdentifier</key>
+	<string>com.sony.OpenSteerDemo</string>
+	<key>CFBundleInfoDictionaryVersion</key>
+	<string>6.0</string>
+	<key>CFBundlePackageType</key>
+	<string>FMWK</string>
+	<key>CFBundleSignature</key>
+	<string>????</string>
+	<key>CFBundleVersion</key>
+	<string>0.8</string>
+</dict>
+</plist>

Modified: dependencies/opensteer/macosx/OpenSteer.xcodeproj/project.pbxproj
===================================================================
--- dependencies/opensteer/macosx/OpenSteer.xcodeproj/project.pbxproj	2007-02-07 21:03:03 UTC (rev 3028)
+++ dependencies/opensteer/macosx/OpenSteer.xcodeproj/project.pbxproj	2007-02-08 20:18:58 UTC (rev 3029)
@@ -6,183 +6,90 @@
 	objectVersion = 42;
 	objects = {
 
-/* Begin PBXAggregateTarget section */
-		327C7E980856F0B300C14AE6 /* Doxygen */ = {
-			isa = PBXAggregateTarget;
-			buildConfigurationList = 327C7E9B0856F0D200C14AE6 /* Build configuration list for PBXAggregateTarget "Doxygen" */;
-			buildPhases = (
-				327C7E970856F0B300C14AE6 /* ShellScript */,
-			);
-			buildSettings = {
-				OPTIMIZATION_CFLAGS = "";
-				OTHER_CFLAGS = "";
-				OTHER_LDFLAGS = "";
-				OTHER_REZFLAGS = "";
-				PRODUCT_NAME = Doxygen;
-				SECTORDER_FLAGS = "";
-				WARNING_CFLAGS = (
-					"-Wmost",
-					"-Wno-four-char-constants",
-					"-Wno-unknown-pragmas",
-				);
-			};
-			comments = "Generates doxygen documentation for the code.";
-			dependencies = (
-			);
-			name = Doxygen;
-			productName = Doxygen;
-		};
-/* End PBXAggregateTarget section */
-
 /* Begin PBXBuildFile section */
 		3224E47908435D8C00C13D97 /* libcppunit-1.10.2.0.0.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 3224E47808435D8C00C13D97 /* libcppunit-1.10.2.0.0.dylib */; };
-		3224E47C08435DE800C13D97 /* PolylineSegmentedPathTest.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E47B08435DE800C13D97 /* PolylineSegmentedPathTest.cpp */; };
-		3224E47E08435E0700C13D97 /* TestMain.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E47D08435E0700C13D97 /* TestMain.cpp */; };
-		3224E4FC0844B13C00C13D97 /* Path.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E4FB0844B13C00C13D97 /* Path.cpp */; };
-		3224E4FE0844B15200C13D97 /* SegmentedPath.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E4FD0844B15200C13D97 /* SegmentedPath.cpp */; };
-		3224E5000844B16200C13D97 /* PolylineSegmentedPath.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E4FF0844B16200C13D97 /* PolylineSegmentedPath.cpp */; };
-		3224E5020844B17700C13D97 /* Pathway.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5010844B17700C13D97 /* Pathway.cpp */; };
-		3224E5040844B18600C13D97 /* SegmentedPathway.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5030844B18600C13D97 /* SegmentedPathway.cpp */; };
-		3224E5060844B1A500C13D97 /* PolylineSegmentedPathwaySingleRadius.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5050844B1A500C13D97 /* PolylineSegmentedPathwaySingleRadius.cpp */; };
-		3224E5080844B1B800C13D97 /* PolylineSegmentedPathwaySegmentRadii.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5070844B1B800C13D97 /* PolylineSegmentedPathwaySegmentRadii.cpp */; };
-		3230BE85084CD9AE00CBB0D9 /* MultiplePursuit.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56806E9CECE00E1D8A3 /* MultiplePursuit.cpp */; };
-		3230C06F084DB77D00CBB0D9 /* Boids.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56406E9CECE00E1D8A3 /* Boids.cpp */; };
-		3230C070084DB77E00CBB0D9 /* Camera.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54506E9CEBD00E1D8A3 /* Camera.cpp */; };
-		3230C071084DB77F00CBB0D9 /* CaptureTheFlag.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56506E9CECE00E1D8A3 /* CaptureTheFlag.cpp */; };
-		3230C072084DB78000CBB0D9 /* Clock.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54606E9CEBD00E1D8A3 /* Clock.cpp */; };
-		3230C073084DB78200CBB0D9 /* Color.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 324DA5EE082ABDD8000F3779 /* Color.cpp */; };
-		3230C074084DB78400CBB0D9 /* Draw.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54706E9CEBD00E1D8A3 /* Draw.cpp */; };
-		3230C075084DB78800CBB0D9 /* LowSpeedTurn.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56606E9CECE00E1D8A3 /* LowSpeedTurn.cpp */; };
-		3230C076084DB78900CBB0D9 /* lq.c in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54806E9CEBD00E1D8A3 /* lq.c */; };
-		3230C078084DB78D00CBB0D9 /* MultiplePursuit.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56806E9CECE00E1D8A3 /* MultiplePursuit.cpp */; };
-		3230C079084DB79000CBB0D9 /* Obstacle.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 841E3BFC0736BF4400E3AD2C /* Obstacle.cpp */; };
-		3230C07B084DB79800CBB0D9 /* OneTurning.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56906E9CECE00E1D8A3 /* OneTurning.cpp */; };
-		3230C07C084DB79900CBB0D9 /* OpenSteerDemo.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 84AD12B1070E224000559513 /* OpenSteerDemo.cpp */; };
-		3230C07D084DB79C00CBB0D9 /* Path.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E4FB0844B13C00C13D97 /* Path.cpp */; };
-		3230C07E084DB79F00CBB0D9 /* Pathway.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5010844B17700C13D97 /* Pathway.cpp */; };
-		3230C07F084DB7A300CBB0D9 /* Pedestrian.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56A06E9CECE00E1D8A3 /* Pedestrian.cpp */; };
-		3230C080084DB7A400CBB0D9 /* PlugIn.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54B06E9CEBD00E1D8A3 /* PlugIn.cpp */; };
-		3230C081084DB7A800CBB0D9 /* PolylineSegmentedPath.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E4FF0844B16200C13D97 /* PolylineSegmentedPath.cpp */; };
-		3230C082084DB7AD00CBB0D9 /* PolylineSegmentedPathwaySegmentRadii.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5070844B1B800C13D97 /* PolylineSegmentedPathwaySegmentRadii.cpp */; };
-		3230C083084DB7AF00CBB0D9 /* PolylineSegmentedPathwaySingleRadius.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5050844B1A500C13D97 /* PolylineSegmentedPathwaySingleRadius.cpp */; };
-		3230C084084DB7B400CBB0D9 /* SegmentedPath.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E4FD0844B15200C13D97 /* SegmentedPath.cpp */; };
-		3230C085084DB7B700CBB0D9 /* SegmentedPathway.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5030844B18600C13D97 /* SegmentedPathway.cpp */; };
-		3230C086084DB7BA00CBB0D9 /* SimpleVehicle.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54C06E9CEBD00E1D8A3 /* SimpleVehicle.cpp */; };
-		3230C087084DB7BC00CBB0D9 /* Soccer.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56B06E9CECE00E1D8A3 /* Soccer.cpp */; };
-		3230C088084DB7BF00CBB0D9 /* TerrainRayTest.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32C150890765ABE000A8BC25 /* TerrainRayTest.cpp */; };
-		3230C089084DB7C400CBB0D9 /* Vec3.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54E06E9CEBD00E1D8A3 /* Vec3.cpp */; };
-		3230C08A084DB7C700CBB0D9 /* Vec3Utilities.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32ECFEAF083389F000E5E444 /* Vec3Utilities.cpp */; };
 		3230C0C4084DBBA100CBB0D9 /* OpenGL.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 32FFF49206E90A9F00E1D8A3 /* OpenGL.framework */; };
 		3230C0C5084DBBA100CBB0D9 /* GLUT.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 32FFF49106E90A9F00E1D8A3 /* GLUT.framework */; };
 		3230C0C6084DBBA500CBB0D9 /* Cocoa.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 1058C7A1FEA54F0111CA2CBB /* Cocoa.framework */; };
-		3230C3EF084F4ED600CBB0D9 /* MapDrive.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56706E9CECE00E1D8A3 /* MapDrive.cpp */; };
-		3243869207292CC300B6EBA6 /* SimpleVehicle.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54C06E9CEBD00E1D8A3 /* SimpleVehicle.cpp */; };
-		3243869307292CC400B6EBA6 /* PlugIn.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54B06E9CEBD00E1D8A3 /* PlugIn.cpp */; };
-		3243869407292CCB00B6EBA6 /* OpenSteerDemo.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 84AD12B1070E224000559513 /* OpenSteerDemo.cpp */; };
-		324386DB07293A2200B6EBA6 /* Draw.h in Resources */ = {isa = PBXBuildFile; fileRef = 324386DA07293A2200B6EBA6 /* Draw.h */; };
-		324DA5EF082ABDD8000F3779 /* Color.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 324DA5EE082ABDD8000F3779 /* Color.cpp */; };
-		327C7F2E0857205E00C14AE6 /* OldPathway.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 327C7F2D0857205D00C14AE6 /* OldPathway.cpp */; };
-		327C7F2F0857205E00C14AE6 /* OldPathway.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 327C7F2D0857205D00C14AE6 /* OldPathway.cpp */; };
-		32BF79F40861C70F0045ADCC /* PolylineSegmentedPathwaySingleRadiusTest.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32BF79F30861C70F0045ADCC /* PolylineSegmentedPathwaySingleRadiusTest.cpp */; };
-		32BF7A5D0861DE270045ADCC /* MapDrive.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56706E9CECE00E1D8A3 /* MapDrive.cpp */; };
-		32BF7CB90864A4550045ADCC /* Pedestrian.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56A06E9CECE00E1D8A3 /* Pedestrian.cpp */; };
-		32C1508B0765ABE000A8BC25 /* TerrainRayTest.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32C150890765ABE000A8BC25 /* TerrainRayTest.cpp */; };
-		32C1508C0765ABE000A8BC25 /* TerrainRayTest.h in Resources */ = {isa = PBXBuildFile; fileRef = 32C1508A0765ABE000A8BC25 /* TerrainRayTest.h */; };
-		32ECFEB0083389F000E5E444 /* Vec3Utilities.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32ECFEAF083389F000E5E444 /* Vec3Utilities.cpp */; };
-		32F3E5C707295CBA002E9EDE /* Clock.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52706E9CEA700E1D8A3 /* Clock.h */; };
-		32F3E5C907295CBD002E9EDE /* Camera.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52606E9CEA700E1D8A3 /* Camera.h */; };
-		32F3E5CA07295CBE002E9EDE /* Annotation.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52506E9CEA700E1D8A3 /* Annotation.h */; };
-		32F3E5CB07295CBE002E9EDE /* AbstractVehicle.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52406E9CEA700E1D8A3 /* AbstractVehicle.h */; };
-		32F3E5CC07295CC0002E9EDE /* Vec3.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF53306E9CEA700E1D8A3 /* Vec3.h */; };
-		32F3E5CD07295CC0002E9EDE /* Utilities.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF53206E9CEA700E1D8A3 /* Utilities.h */; };
-		32F3E5CE07295CC1002E9EDE /* SteerLibrary.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF53006E9CEA700E1D8A3 /* SteerLibrary.h */; };
-		32F3E5CF07295CC2002E9EDE /* SimpleVehicle.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52F06E9CEA700E1D8A3 /* SimpleVehicle.h */; };
-		32F3E5D007295CC3002E9EDE /* Proximity.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52E06E9CEA700E1D8A3 /* Proximity.h */; };
-		32F3E5D107295CC3002E9EDE /* PlugIn.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52D06E9CEA700E1D8A3 /* PlugIn.h */; };
-		32F3E5D207295CC4002E9EDE /* OldPathway.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52C06E9CEA700E1D8A3 /* OldPathway.h */; };
-		32F3E5D307295CC5002E9EDE /* OpenSteerDemo.h in Resources */ = {isa = PBXBuildFile; fileRef = 84AD12AD070E221100559513 /* OpenSteerDemo.h */; };
-		32F3E5D407295CC5002E9EDE /* Obstacle.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52B06E9CEA700E1D8A3 /* Obstacle.h */; };
-		32F3E5D507295CC6002E9EDE /* lq.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52A06E9CEA700E1D8A3 /* lq.h */; };
-		32F3E5D607295CC7002E9EDE /* LocalSpace.h in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF52906E9CEA700E1D8A3 /* LocalSpace.h */; };
-		32F3E5D707295CCD002E9EDE /* Draw.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54706E9CEBD00E1D8A3 /* Draw.cpp */; };
-		32F3E5D807295CCF002E9EDE /* Camera.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54506E9CEBD00E1D8A3 /* Camera.cpp */; };
 		32FFF49306E90A9F00E1D8A3 /* GLUT.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 32FFF49106E90A9F00E1D8A3 /* GLUT.framework */; };
 		32FFF49406E90A9F00E1D8A3 /* OpenGL.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 32FFF49206E90A9F00E1D8A3 /* OpenGL.framework */; };
-		32FFF55006E9CEBD00E1D8A3 /* Clock.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54606E9CEBD00E1D8A3 /* Clock.cpp */; };
-		32FFF55206E9CEBD00E1D8A3 /* lq.c in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54806E9CEBD00E1D8A3 /* lq.c */; };
-		32FFF55306E9CEBD00E1D8A3 /* main.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54906E9CEBD00E1D8A3 /* main.cpp */; };
-		32FFF55806E9CEBE00E1D8A3 /* Vec3.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54E06E9CEBD00E1D8A3 /* Vec3.cpp */; };
-		32FFF56C06E9CECE00E1D8A3 /* Boids.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56406E9CECE00E1D8A3 /* Boids.cpp */; };
-		32FFF56D06E9CECE00E1D8A3 /* CaptureTheFlag.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56506E9CECE00E1D8A3 /* CaptureTheFlag.cpp */; };
-		32FFF56E06E9CECE00E1D8A3 /* LowSpeedTurn.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56606E9CECE00E1D8A3 /* LowSpeedTurn.cpp */; };
-		32FFF57106E9CECE00E1D8A3 /* OneTurning.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56906E9CECE00E1D8A3 /* OneTurning.cpp */; };
-		32FFF57306E9CECE00E1D8A3 /* Soccer.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56B06E9CECE00E1D8A3 /* Soccer.cpp */; };
 		32FFF58106E9CF3800E1D8A3 /* OpenSteer.icns in Resources */ = {isa = PBXBuildFile; fileRef = 32FFF58006E9CF3800E1D8A3 /* OpenSteer.icns */; };
-		841E3BFD0736BF4400E3AD2C /* Obstacle.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 841E3BFC0736BF4400E3AD2C /* Obstacle.cpp */; };
+		441067300B7BB59200B3A8B5 /* OpenSteerDemo-Info.plist in Resources */ = {isa = PBXBuildFile; fileRef = 8D1107310486CEB800E47090 /* OpenSteerDemo-Info.plist */; };
+		4425B2FC0B7B59D80067899D /* main.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54906E9CEBD00E1D8A3 /* main.cpp */; };
+		4425B2FD0B7B59D80067899D /* OpenSteerDemo.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 84AD12B1070E224000559513 /* OpenSteerDemo.cpp */; };
+		4425B2FE0B7B5A1E0067899D /* Boids.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56406E9CECE00E1D8A3 /* Boids.cpp */; };
+		4425B2FF0B7B5A1E0067899D /* CaptureTheFlag.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56506E9CECE00E1D8A3 /* CaptureTheFlag.cpp */; };
+		4425B3000B7B5A1E0067899D /* LowSpeedTurn.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56606E9CECE00E1D8A3 /* LowSpeedTurn.cpp */; };
+		4425B3010B7B5A1E0067899D /* MapDrive.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56706E9CECE00E1D8A3 /* MapDrive.cpp */; };
+		4425B3020B7B5A1E0067899D /* MultiplePursuit.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56806E9CECE00E1D8A3 /* MultiplePursuit.cpp */; };
+		4425B3030B7B5A1E0067899D /* OneTurning.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56906E9CECE00E1D8A3 /* OneTurning.cpp */; };
+		4425B3040B7B5A1E0067899D /* Pedestrian.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56A06E9CECE00E1D8A3 /* Pedestrian.cpp */; };
+		4425B3050B7B5A1E0067899D /* Soccer.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF56B06E9CECE00E1D8A3 /* Soccer.cpp */; };
+		4425B3EE0B7B676F0067899D /* AbstractVehicle.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF52406E9CEA700E1D8A3 /* AbstractVehicle.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3EF0B7B676F0067899D /* Annotation.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF52506E9CEA700E1D8A3 /* Annotation.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3F00B7B676F0067899D /* Clock.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF52706E9CEA700E1D8A3 /* Clock.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3F10B7B676F0067899D /* Color.h in Headers */ = {isa = PBXBuildFile; fileRef = 324DA5F6082ABE43000F3779 /* Color.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3F20B7B676F0067899D /* LocalSpace.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF52906E9CEA700E1D8A3 /* LocalSpace.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3F30B7B676F0067899D /* lq.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF52A06E9CEA700E1D8A3 /* lq.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3F40B7B676F0067899D /* Obstacle.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF52B06E9CEA700E1D8A3 /* Obstacle.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3F50B7B676F0067899D /* OldPathway.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF52C06E9CEA700E1D8A3 /* OldPathway.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3F60B7B676F0067899D /* Path.h in Headers */ = {isa = PBXBuildFile; fileRef = 3224E4F40844AC1700C13D97 /* Path.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3F70B7B676F0067899D /* Pathway.h in Headers */ = {isa = PBXBuildFile; fileRef = 32ECFE4C08336C8C00E5E444 /* Pathway.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3F80B7B676F0067899D /* PlugIn.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF52D06E9CEA700E1D8A3 /* PlugIn.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3F90B7B676F0067899D /* PolylineSegmentedPath.h in Headers */ = {isa = PBXBuildFile; fileRef = 3224E4F50844AC3B00C13D97 /* PolylineSegmentedPath.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3FA0B7B676F0067899D /* PolylineSegmentedPathwaySegmentRadii.h in Headers */ = {isa = PBXBuildFile; fileRef = 3224E4F70844ACA200C13D97 /* PolylineSegmentedPathwaySegmentRadii.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3FB0B7B676F0067899D /* PolylineSegmentedPathwaySingleRadius.h in Headers */ = {isa = PBXBuildFile; fileRef = 3224E4F60844AC8700C13D97 /* PolylineSegmentedPathwaySingleRadius.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3FC0B7B676F0067899D /* Proximity.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF52E06E9CEA700E1D8A3 /* Proximity.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3FD0B7B676F0067899D /* QueryPathAlike.h in Headers */ = {isa = PBXBuildFile; fileRef = 3224E4F80844ACF800C13D97 /* QueryPathAlike.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3FE0B7B676F0067899D /* QueryPathAlikeBaseDataExtractionPolicies.h in Headers */ = {isa = PBXBuildFile; fileRef = 327C89DE085762AD00C14AE6 /* QueryPathAlikeBaseDataExtractionPolicies.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B3FF0B7B676F0067899D /* QueryPathAlikeMappings.h in Headers */ = {isa = PBXBuildFile; fileRef = 3224E6600849C27400C13D97 /* QueryPathAlikeMappings.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B4000B7B676F0067899D /* QueryPathAlikeUtilities.h in Headers */ = {isa = PBXBuildFile; fileRef = 3224E59508485F8A00C13D97 /* QueryPathAlikeUtilities.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B4010B7B676F0067899D /* SegmentedPath.h in Headers */ = {isa = PBXBuildFile; fileRef = 3224E4F20844AB8E00C13D97 /* SegmentedPath.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B4020B7B676F0067899D /* SegmentedPathAlikeUtilities.h in Headers */ = {isa = PBXBuildFile; fileRef = 3230C46B085066DD00CBB0D9 /* SegmentedPathAlikeUtilities.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B4030B7B676F0067899D /* SegmentedPathway.h in Headers */ = {isa = PBXBuildFile; fileRef = 3224E4AC0844A32F00C13D97 /* SegmentedPathway.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B4040B7B676F0067899D /* StandardTypes.h in Headers */ = {isa = PBXBuildFile; fileRef = 3224E4A50843657800C13D97 /* StandardTypes.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B4050B7B676F0067899D /* SteerLibrary.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF53006E9CEA700E1D8A3 /* SteerLibrary.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B4060B7B676F0067899D /* UnusedParameter.h in Headers */ = {isa = PBXBuildFile; fileRef = 32ECF063082FC7FB00E5E444 /* UnusedParameter.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B4070B7B676F0067899D /* Utilities.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF53206E9CEA700E1D8A3 /* Utilities.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B4080B7B676F0067899D /* Vec3.h in Headers */ = {isa = PBXBuildFile; fileRef = 32FFF53306E9CEA700E1D8A3 /* Vec3.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B4090B7B676F0067899D /* Vec3Utilities.h in Headers */ = {isa = PBXBuildFile; fileRef = 32ECFEAA0833893500E5E444 /* Vec3Utilities.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B40B0B7B678E0067899D /* SharedPointer.h in Headers */ = {isa = PBXBuildFile; fileRef = 4425B40A0B7B678E0067899D /* SharedPointer.h */; settings = {ATTRIBUTES = (Public, ); }; };
+		4425B40C0B7B67D20067899D /* Clock.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54606E9CEBD00E1D8A3 /* Clock.cpp */; };
+		4425B40D0B7B67D20067899D /* Color.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 324DA5EE082ABDD8000F3779 /* Color.cpp */; };
+		4425B40E0B7B67D20067899D /* lq.c in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54806E9CEBD00E1D8A3 /* lq.c */; };
+		4425B40F0B7B67D20067899D /* Obstacle.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 841E3BFC0736BF4400E3AD2C /* Obstacle.cpp */; };
+		4425B4100B7B67D20067899D /* OldPathway.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 327C7F2D0857205D00C14AE6 /* OldPathway.cpp */; };
+		4425B4110B7B67D20067899D /* Path.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E4FB0844B13C00C13D97 /* Path.cpp */; };
+		4425B4120B7B67D20067899D /* Pathway.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5010844B17700C13D97 /* Pathway.cpp */; };
+		4425B4130B7B67D20067899D /* PlugIn.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54B06E9CEBD00E1D8A3 /* PlugIn.cpp */; };
+		4425B4140B7B67D20067899D /* PolylineSegmentedPath.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E4FF0844B16200C13D97 /* PolylineSegmentedPath.cpp */; };
+		4425B4150B7B67D20067899D /* PolylineSegmentedPathwaySegmentRadii.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5070844B1B800C13D97 /* PolylineSegmentedPathwaySegmentRadii.cpp */; };
+		4425B4160B7B67D20067899D /* PolylineSegmentedPathwaySingleRadius.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5050844B1A500C13D97 /* PolylineSegmentedPathwaySingleRadius.cpp */; };
+		4425B4170B7B67D20067899D /* SegmentedPath.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E4FD0844B15200C13D97 /* SegmentedPath.cpp */; };
+		4425B4180B7B67D20067899D /* SegmentedPathway.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5030844B18600C13D97 /* SegmentedPathway.cpp */; };
+		4425B4190B7B67D20067899D /* Vec3.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54E06E9CEBD00E1D8A3 /* Vec3.cpp */; };
+		4425B41A0B7B67D20067899D /* Vec3Utilities.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32ECFEAF083389F000E5E444 /* Vec3Utilities.cpp */; };
+		4425B41B0B7B67E50067899D /* Cocoa.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 1058C7A1FEA54F0111CA2CBB /* Cocoa.framework */; };
+		4425B41D0B7B67F90067899D /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4425B41C0B7B67F90067899D /* Carbon.framework */; };
+		4425B41F0B7B681A0067899D /* OpenSteer.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4425B3E60B7B61DB0067899D /* OpenSteer.framework */; };
+		4425B4430B7B6AF90067899D /* SimpleVehicle.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54C06E9CEBD00E1D8A3 /* SimpleVehicle.cpp */; };
+		4425B44A0B7B6B460067899D /* Camera.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54506E9CEBD00E1D8A3 /* Camera.cpp */; };
+		4425B44F0B7B6B9C0067899D /* Draw.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54706E9CEBD00E1D8A3 /* Draw.cpp */; };
+		4425B45F0B7B71DF0067899D /* OpenSteer.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4425B3E60B7B61DB0067899D /* OpenSteer.framework */; };
+		4425B47F0B7B76740067899D /* PolylineSegmentedPathTest.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 4425B47B0B7B76740067899D /* PolylineSegmentedPathTest.cpp */; };
+		4425B4800B7B76740067899D /* PolylineSegmentedPathwaySingleRadiusTest.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 4425B47C0B7B76740067899D /* PolylineSegmentedPathwaySingleRadiusTest.cpp */; };
+		4425B4810B7B76740067899D /* SharedPointerTest.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 4425B47D0B7B76740067899D /* SharedPointerTest.cpp */; };
+		4425B4820B7B76740067899D /* TestMain.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 4425B47E0B7B76740067899D /* TestMain.cpp */; };
 		8D11072A0486CEB800E47090 /* MainMenu.nib in Resources */ = {isa = PBXBuildFile; fileRef = 29B97318FDCFA39411CA2CEA /* MainMenu.nib */; };
 		8D11072B0486CEB800E47090 /* InfoPlist.strings in Resources */ = {isa = PBXBuildFile; fileRef = 089C165CFE840E0CC02AAC07 /* InfoPlist.strings */; };
-		8D11072F0486CEB800E47090 /* Cocoa.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 1058C7A1FEA54F0111CA2CBB /* Cocoa.framework */; };
 /* End PBXBuildFile section */
 
-/* Begin PBXBuildStyle section */
-		4A9504CCFFE6A4B311CA0CBA /* Development */ = {
-			isa = PBXBuildStyle;
-			buildSettings = {
-				COPY_PHASE_STRIP = NO;
-				GCC_DYNAMIC_NO_PIC = NO;
-				GCC_ENABLE_FIX_AND_CONTINUE = YES;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
-				GCC_OPTIMIZATION_LEVEL = 0;
-				GCC_WARN_ABOUT_MISSING_NEWLINE = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_ABOUT_RETURN_TYPE = YES;
-				GCC_WARN_ALLOW_INCOMPLETE_PROTOCOL = YES;
-				GCC_WARN_CHECK_SWITCH_STATEMENTS = YES;
-				GCC_WARN_EFFECTIVE_CPLUSPLUS_VIOLATIONS = NO;
-				GCC_WARN_FOUR_CHARACTER_CONSTANTS = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = YES;
-				GCC_WARN_INHIBIT_ALL_WARNINGS = NO;
-				GCC_WARN_INITIALIZER_NOT_FULLY_BRACKETED = YES;
-				GCC_WARN_MISSING_PARENTHESES = YES;
-				GCC_WARN_NON_VIRTUAL_DESTRUCTOR = YES;
-				GCC_WARN_PEDANTIC = YES;
-				GCC_WARN_SHADOW = NO;
-				GCC_WARN_SIGN_COMPARE = YES;
-				GCC_WARN_TYPECHECK_CALLS_TO_PRINTF = YES;
-				GCC_WARN_UNINITIALIZED_AUTOS = NO;
-				GCC_WARN_UNUSED_FUNCTION = YES;
-				GCC_WARN_UNUSED_LABEL = YES;
-				GCC_WARN_UNUSED_PARAMETER = YES;
-				GCC_WARN_UNUSED_VALUE = YES;
-				GCC_WARN_UNUSED_VARIABLE = YES;
-				USE_HEADERMAP = NO;
-			};
-			name = Development;
-		};
-		4A9504CDFFE6A4B311CA0CBA /* Deployment */ = {
-			isa = PBXBuildStyle;
-			buildSettings = {
-				COPY_PHASE_STRIP = YES;
-				GCC_ENABLE_FIX_AND_CONTINUE = NO;
-				GCC_MODEL_CPU = "";
-				GCC_PREPROCESSOR_DEFINITIONS = NDEBUG;
-				GCC_WARN_SIGN_COMPARE = NO;
-				USE_HEADERMAP = NO;
-				ZERO_LINK = NO;
-			};
-			name = Deployment;
-		};
-/* End PBXBuildStyle section */
-
 /* Begin PBXFileReference section */
 		089C165DFE840E0CC02AAC07 /* English */ = {isa = PBXFileReference; fileEncoding = 10; lastKnownFileType = text.plist.strings; name = English; path = English.lproj/InfoPlist.strings; sourceTree = "<group>"; };
 		1058C7A1FEA54F0111CA2CBB /* Cocoa.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Cocoa.framework; path = /System/Library/Frameworks/Cocoa.framework; sourceTree = "<absolute>"; };
 		29B97319FDCFA39411CA2CEA /* English */ = {isa = PBXFileReference; lastKnownFileType = wrapper.nib; name = English; path = English.lproj/MainMenu.nib; sourceTree = "<group>"; };
-		3224E47608435BCC00C13D97 /* UnitTest */ = {isa = PBXFileReference; explicitFileType = "compiled.mach-o.executable"; includeInIndex = 0; path = UnitTest; sourceTree = BUILT_PRODUCTS_DIR; };
-		3224E47808435D8C00C13D97 /* libcppunit-1.10.2.0.0.dylib */ = {isa = PBXFileReference; lastKnownFileType = "compiled.mach-o.dylib"; name = "libcppunit-1.10.2.0.0.dylib"; path = "../../../../Applications/usr/local/lib/libcppunit-1.10.2.0.0.dylib"; sourceTree = SOURCE_ROOT; };
-		3224E47A08435DE800C13D97 /* PolylineSegmentedPathTest.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = PolylineSegmentedPathTest.h; sourceTree = "<group>"; };
-		3224E47B08435DE800C13D97 /* PolylineSegmentedPathTest.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = PolylineSegmentedPathTest.cpp; sourceTree = "<group>"; };
-		3224E47D08435E0700C13D97 /* TestMain.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = TestMain.cpp; sourceTree = "<group>"; };
+		3224E47608435BCC00C13D97 /* UnitTest */ = {isa = PBXFileReference; includeInIndex = 0; lastKnownFileType = "compiled.mach-o.executable"; path = UnitTest; sourceTree = BUILT_PRODUCTS_DIR; };
+		3224E47808435D8C00C13D97 /* libcppunit-1.10.2.0.0.dylib */ = {isa = PBXFileReference; explicitFileType = "compiled.mach-o.dylib"; name = "libcppunit-1.10.2.0.0.dylib"; path = "../../libcppunit-1.10.2.0.0.dylib"; sourceTree = SOURCE_ROOT; };
 		3224E4A50843657800C13D97 /* StandardTypes.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = StandardTypes.h; sourceTree = "<group>"; };
 		3224E4AC0844A32F00C13D97 /* SegmentedPathway.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = SegmentedPathway.h; sourceTree = "<group>"; };
 		3224E4F20844AB8E00C13D97 /* SegmentedPath.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = SegmentedPath.h; sourceTree = "<group>"; };
@@ -207,9 +114,6 @@
 		324DA5F6082ABE43000F3779 /* Color.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = Color.h; sourceTree = "<group>"; };
 		327C7F2D0857205D00C14AE6 /* OldPathway.cpp */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.cpp.cpp; path = OldPathway.cpp; sourceTree = "<group>"; };
 		327C89DE085762AD00C14AE6 /* QueryPathAlikeBaseDataExtractionPolicies.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = QueryPathAlikeBaseDataExtractionPolicies.h; sourceTree = "<group>"; };
-		32BF79F20861C70F0045ADCC /* PolylineSegmentedPathwaySingleRadiusTest.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = PolylineSegmentedPathwaySingleRadiusTest.h; sourceTree = "<group>"; };
-		32BF79F30861C70F0045ADCC /* PolylineSegmentedPathwaySingleRadiusTest.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = PolylineSegmentedPathwaySingleRadiusTest.cpp; sourceTree = "<group>"; };
-		32BF7B31086389600045ADCC /* PedestrianPathwayTest.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = PedestrianPathwayTest.cpp; sourceTree = "<group>"; };
 		32C150890765ABE000A8BC25 /* TerrainRayTest.cpp */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.cpp.cpp; path = TerrainRayTest.cpp; sourceTree = "<group>"; };
 		32C1508A0765ABE000A8BC25 /* TerrainRayTest.h */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.c.h; path = TerrainRayTest.h; sourceTree = "<group>"; };
 		32ECF063082FC7FB00E5E444 /* UnusedParameter.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = UnusedParameter.h; sourceTree = "<group>"; };
@@ -249,12 +153,18 @@
 		32FFF56A06E9CECE00E1D8A3 /* Pedestrian.cpp */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.cpp.cpp; path = Pedestrian.cpp; sourceTree = "<group>"; };
 		32FFF56B06E9CECE00E1D8A3 /* Soccer.cpp */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.cpp.cpp; path = Soccer.cpp; sourceTree = "<group>"; };
 		32FFF58006E9CF3800E1D8A3 /* OpenSteer.icns */ = {isa = PBXFileReference; lastKnownFileType = image.icns; path = OpenSteer.icns; sourceTree = "<group>"; };
-		32FFF59306EB3FDE00E1D8A3 /* doc */ = {isa = PBXFileReference; includeInIndex = 0; lastKnownFileType = folder; name = doc; path = ../doc; sourceTree = "<group>"; };
-		32FFF5A506EB3FFD00E1D8A3 /* COPYING.OPENSTEER */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = text; name = COPYING.OPENSTEER; path = ../COPYING.OPENSTEER; sourceTree = "<group>"; };
+		4425B3E60B7B61DB0067899D /* OpenSteer.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = OpenSteer.framework; sourceTree = BUILT_PRODUCTS_DIR; };
+		4425B3E70B7B61DB0067899D /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.xml; path = Info.plist; sourceTree = "<group>"; };
+		4425B40A0B7B678E0067899D /* SharedPointer.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = SharedPointer.h; sourceTree = "<group>"; };
+		4425B41C0B7B67F90067899D /* Carbon.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Carbon.framework; path = /System/Library/Frameworks/Carbon.framework; sourceTree = "<absolute>"; };
+		4425B47B0B7B76740067899D /* PolylineSegmentedPathTest.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = PolylineSegmentedPathTest.cpp; path = ../test/PolylineSegmentedPathTest.cpp; sourceTree = SOURCE_ROOT; };
+		4425B47C0B7B76740067899D /* PolylineSegmentedPathwaySingleRadiusTest.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = PolylineSegmentedPathwaySingleRadiusTest.cpp; path = ../test/PolylineSegmentedPathwaySingleRadiusTest.cpp; sourceTree = SOURCE_ROOT; };
+		4425B47D0B7B76740067899D /* SharedPointerTest.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = SharedPointerTest.cpp; path = ../test/SharedPointerTest.cpp; sourceTree = SOURCE_ROOT; };
+		4425B47E0B7B76740067899D /* TestMain.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = TestMain.cpp; path = ../test/TestMain.cpp; sourceTree = SOURCE_ROOT; };
 		841E3BFC0736BF4400E3AD2C /* Obstacle.cpp */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.cpp.cpp; path = Obstacle.cpp; sourceTree = "<group>"; };
 		84AD12AD070E221100559513 /* OpenSteerDemo.h */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.c.h; path = OpenSteerDemo.h; sourceTree = "<group>"; };
 		84AD12B1070E224000559513 /* OpenSteerDemo.cpp */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.cpp.cpp; path = OpenSteerDemo.cpp; sourceTree = "<group>"; };
-		8D1107310486CEB800E47090 /* Info.plist */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.plist; path = Info.plist; sourceTree = "<group>"; };
+		8D1107310486CEB800E47090 /* OpenSteerDemo-Info.plist */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.xml; path = "OpenSteerDemo-Info.plist"; sourceTree = "<group>"; };
 		8D1107320486CEB800E47090 /* OpenSteerDemo.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = OpenSteerDemo.app; sourceTree = BUILT_PRODUCTS_DIR; };
 /* End PBXFileReference section */
 
@@ -263,6 +173,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
+				4425B45F0B7B71DF0067899D /* OpenSteer.framework in Frameworks */,
 				3224E47908435D8C00C13D97 /* libcppunit-1.10.2.0.0.dylib in Frameworks */,
 				3230C0C4084DBBA100CBB0D9 /* OpenGL.framework in Frameworks */,
 				3230C0C5084DBBA100CBB0D9 /* GLUT.framework in Frameworks */,
@@ -270,11 +181,20 @@
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
+		4425B3E40B7B61DB0067899D /* Frameworks */ = {
+			isa = PBXFrameworksBuildPhase;
+			buildActionMask = 2147483647;
+			files = (
+				4425B41B0B7B67E50067899D /* Cocoa.framework in Frameworks */,
+				4425B41D0B7B67F90067899D /* Carbon.framework in Frameworks */,
+			);
+			runOnlyForDeploymentPostprocessing = 0;
+		};
 		8D11072E0486CEB800E47090 /* Frameworks */ = {
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				8D11072F0486CEB800E47090 /* Cocoa.framework in Frameworks */,
+				4425B41F0B7B681A0067899D /* OpenSteer.framework in Frameworks */,
 				32FFF49306E90A9F00E1D8A3 /* GLUT.framework in Frameworks */,
 				32FFF49406E90A9F00E1D8A3 /* OpenGL.framework in Frameworks */,
 			);
@@ -288,6 +208,7 @@
 			children = (
 				8D1107320486CEB800E47090 /* OpenSteerDemo.app */,
 				3224E47608435BCC00C13D97 /* UnitTest */,
+				4425B3E60B7B61DB0067899D /* OpenSteer.framework */,
 			);
 			name = Products;
 			sourceTree = "<group>";
@@ -300,6 +221,7 @@
 				29B97317FDCFA39411CA2CEA /* Resources */,
 				29B97323FDCFA39411CA2CEA /* Frameworks */,
 				19C28FACFE9D520D11CA2CBB /* Products */,
+				8D1107310486CEB800E47090 /* OpenSteerDemo-Info.plist */,
 			);
 			comments = "Set USE_HEADERMAP to no to disable header caching that leads to problems with the Math.h header. Mac OS X file system isn't case sensitive and in this case the header gets cached and is included by cmath - so the std c math.h declarations are missing...";
 			name = opensteer;
@@ -308,8 +230,8 @@
 		29B97317FDCFA39411CA2CEA /* Resources */ = {
 			isa = PBXGroup;
 			children = (
+				4425B3E70B7B61DB0067899D /* Info.plist */,
 				32FFF58006E9CF3800E1D8A3 /* OpenSteer.icns */,
-				8D1107310486CEB800E47090 /* Info.plist */,
 				089C165CFE840E0CC02AAC07 /* InfoPlist.strings */,
 				29B97318FDCFA39411CA2CEA /* MainMenu.nib */,
 			);
@@ -319,6 +241,7 @@
 		29B97323FDCFA39411CA2CEA /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
+				4425B41C0B7B67F90067899D /* Carbon.framework */,
 				3224E47808435D8C00C13D97 /* libcppunit-1.10.2.0.0.dylib */,
 				32FFF49106E90A9F00E1D8A3 /* GLUT.framework */,
 				32FFF49206E90A9F00E1D8A3 /* OpenGL.framework */,
@@ -327,20 +250,6 @@
 			name = Frameworks;
 			sourceTree = "<group>";
 		};
-		3224E43408435A4600C13D97 /* tests */ = {
-			isa = PBXGroup;
-			children = (
-				3224E47D08435E0700C13D97 /* TestMain.cpp */,
-				3224E47A08435DE800C13D97 /* PolylineSegmentedPathTest.h */,
-				3224E47B08435DE800C13D97 /* PolylineSegmentedPathTest.cpp */,
-				32BF79F20861C70F0045ADCC /* PolylineSegmentedPathwaySingleRadiusTest.h */,
-				32BF79F30861C70F0045ADCC /* PolylineSegmentedPathwaySingleRadiusTest.cpp */,
-			);
-			comments = "Unit tests for the OpenSteer library and demo application.";
-			name = tests;
-			path = ../tests;
-			sourceTree = SOURCE_ROOT;
-		};
 		32FFF52206E9CEA700E1D8A3 /* include */ = {
 			isa = PBXGroup;
 			children = (
@@ -353,6 +262,7 @@
 		32FFF52306E9CEA700E1D8A3 /* OpenSteer */ = {
 			isa = PBXGroup;
 			children = (
+				4425B40A0B7B678E0067899D /* SharedPointer.h */,
 				32FFF52406E9CEA700E1D8A3 /* AbstractVehicle.h */,
 				32FFF52506E9CEA700E1D8A3 /* Annotation.h */,
 				32FFF52606E9CEA700E1D8A3 /* Camera.h */,
@@ -430,7 +340,6 @@
 				32FFF56906E9CECE00E1D8A3 /* OneTurning.cpp */,
 				32FFF56A06E9CECE00E1D8A3 /* Pedestrian.cpp */,
 				32FFF56B06E9CECE00E1D8A3 /* Soccer.cpp */,
-				32BF7B31086389600045ADCC /* PedestrianPathwayTest.cpp */,
 			);
 			name = plugins;
 			path = ../plugins;
@@ -440,18 +349,27 @@
 			isa = PBXGroup;
 			children = (
 				3248EFBB06F0A6380069A576 /* README_CVS_WITH_XCODE.txt */,
-				32FFF5A506EB3FFD00E1D8A3 /* COPYING.OPENSTEER */,
-				32FFF59306EB3FDE00E1D8A3 /* doc */,
 			);
 			name = Documents;
 			sourceTree = "<group>";
 		};
+		4425B48B0B7B76B90067899D /* test */ = {
+			isa = PBXGroup;
+			children = (
+				4425B47B0B7B76740067899D /* PolylineSegmentedPathTest.cpp */,
+				4425B47C0B7B76740067899D /* PolylineSegmentedPathwaySingleRadiusTest.cpp */,
+				4425B47D0B7B76740067899D /* SharedPointerTest.cpp */,
+				4425B47E0B7B76740067899D /* TestMain.cpp */,
+			);
+			name = test;
+			sourceTree = "<group>";
+		};
 		84FACBA506EFC297000A998A /* Source Code */ = {
 			isa = PBXGroup;
 			children = (
+				4425B48B0B7B76B90067899D /* test */,
 				32FFF56306E9CECE00E1D8A3 /* plugins */,
 				32FFF54406E9CEBD00E1D8A3 /* src */,
-				3224E43408435A4600C13D97 /* tests */,
 				32FFF52206E9CEA700E1D8A3 /* include */,
 			);
 			name = "Source Code";
@@ -459,6 +377,45 @@
 		};
 /* End PBXGroup section */
 
+/* Begin PBXHeadersBuildPhase section */
+		4425B3E10B7B61DB0067899D /* Headers */ = {
+			isa = PBXHeadersBuildPhase;
+			buildActionMask = 2147483647;
+			files = (
+				4425B3EE0B7B676F0067899D /* AbstractVehicle.h in Headers */,
+				4425B3EF0B7B676F0067899D /* Annotation.h in Headers */,
+				4425B3F00B7B676F0067899D /* Clock.h in Headers */,
+				4425B3F10B7B676F0067899D /* Color.h in Headers */,
+				4425B3F20B7B676F0067899D /* LocalSpace.h in Headers */,
+				4425B3F30B7B676F0067899D /* lq.h in Headers */,
+				4425B3F40B7B676F0067899D /* Obstacle.h in Headers */,
+				4425B3F50B7B676F0067899D /* OldPathway.h in Headers */,
+				4425B3F60B7B676F0067899D /* Path.h in Headers */,
+				4425B3F70B7B676F0067899D /* Pathway.h in Headers */,
+				4425B3F80B7B676F0067899D /* PlugIn.h in Headers */,
+				4425B3F90B7B676F0067899D /* PolylineSegmentedPath.h in Headers */,
+				4425B3FA0B7B676F0067899D /* PolylineSegmentedPathwaySegmentRadii.h in Headers */,
+				4425B3FB0B7B676F0067899D /* PolylineSegmentedPathwaySingleRadius.h in Headers */,
+				4425B3FC0B7B676F0067899D /* Proximity.h in Headers */,
+				4425B3FD0B7B676F0067899D /* QueryPathAlike.h in Headers */,
+				4425B3FE0B7B676F0067899D /* QueryPathAlikeBaseDataExtractionPolicies.h in Headers */,
+				4425B3FF0B7B676F0067899D /* QueryPathAlikeMappings.h in Headers */,
+				4425B4000B7B676F0067899D /* QueryPathAlikeUtilities.h in Headers */,
+				4425B4010B7B676F0067899D /* SegmentedPath.h in Headers */,
+				4425B4020B7B676F0067899D /* SegmentedPathAlikeUtilities.h in Headers */,
+				4425B4030B7B676F0067899D /* SegmentedPathway.h in Headers */,
+				4425B4040B7B676F0067899D /* StandardTypes.h in Headers */,
+				4425B4050B7B676F0067899D /* SteerLibrary.h in Headers */,
+				4425B4060B7B676F0067899D /* UnusedParameter.h in Headers */,
+				4425B4070B7B676F0067899D /* Utilities.h in Headers */,
+				4425B4080B7B676F0067899D /* Vec3.h in Headers */,
+				4425B4090B7B676F0067899D /* Vec3Utilities.h in Headers */,
+				4425B40B0B7B678E0067899D /* SharedPointer.h in Headers */,
+			);
+			runOnlyForDeploymentPostprocessing = 0;
+		};
+/* End PBXHeadersBuildPhase section */
+
 /* Begin PBXNativeTarget section */
 		3224E47508435BCC00C13D97 /* UnitTest */ = {
 			isa = PBXNativeTarget;
@@ -469,23 +426,6 @@
 			);
 			buildRules = (
 			);
-			buildSettings = {
-				GCC_GENERATE_DEBUGGING_SYMBOLS = NO;
-				GCC_MODEL_TUNING = G5;
-				HEADER_SEARCH_PATHS = (
-					../include,
-					/Users/bknafla/Applications/usr/local/include,
-				);
-				INSTALL_PATH = "$(HOME)/bin";
-				LIBRARY_SEARCH_PATHS = /Users/bknafla/Applications/usr/local/lib;
-				OTHER_CFLAGS = "";
-				OTHER_LDFLAGS = "";
-				OTHER_REZFLAGS = "";
-				PREBINDING = NO;
-				PRODUCT_NAME = UnitTest;
-				SECTORDER_FLAGS = "";
-				WARNING_CFLAGS = "";
-			};
 			comments = "Suite of unit tests for different OpenSteer functionality. Uses the CppUnit Framework ( http://cppunit.sourceforge.net/cgi-bin/moin.cgi ).";
 			dependencies = (
 			);
@@ -494,6 +434,23 @@
 			productReference = 3224E47608435BCC00C13D97 /* UnitTest */;
 			productType = "com.apple.product-type.tool";
 		};
+		4425B3E50B7B61DB0067899D /* OpenSteer Framework */ = {
+			isa = PBXNativeTarget;
+			buildConfigurationList = 4425B3E80B7B61DB0067899D /* Build configuration list for PBXNativeTarget "OpenSteer Framework" */;
+			buildPhases = (
+				4425B3E10B7B61DB0067899D /* Headers */,
+				4425B3E30B7B61DB0067899D /* Sources */,
+				4425B3E40B7B61DB0067899D /* Frameworks */,
+			);
+			buildRules = (
+			);
+			dependencies = (
+			);
+			name = "OpenSteer Framework";
+			productName = OpenSteer;
+			productReference = 4425B3E60B7B61DB0067899D /* OpenSteer.framework */;
+			productType = "com.apple.product-type.framework";
+		};
 		8D1107260486CEB800E47090 /* OpenSteerDemo */ = {
 			isa = PBXNativeTarget;
 			buildConfigurationList = 3219D3030855BC5800EB7908 /* Build configuration list for PBXNativeTarget "OpenSteerDemo" */;
@@ -504,18 +461,6 @@
 			);
 			buildRules = (
 			);
-			buildSettings = {
-				GCC_GENERATE_DEBUGGING_SYMBOLS = NO;
-				GCC_PRECOMPILE_PREFIX_HEADER = NO;
-				GCC_PREFIX_HEADER = "";
-				HEADER_SEARCH_PATHS = ../include;
-				INFOPLIST_FILE = Info.plist;
-				INSTALL_PATH = "$(HOME)/Applications";
-				LIBRARY_SEARCH_PATHS = "";
-				PRODUCT_NAME = OpenSteerDemo;
-				WRAPPER_EXTENSION = app;
-				ZERO_LINK = YES;
-			};
 			dependencies = (
 			);
 			name = OpenSteerDemo;
@@ -530,19 +475,13 @@
 		29B97313FDCFA39411CA2CEA /* Project object */ = {
 			isa = PBXProject;
 			buildConfigurationList = 3219D30B0855BC5800EB7908 /* Build configuration list for PBXProject "OpenSteer" */;
-			buildSettings = {
-			};
-			buildStyles = (
-				4A9504CCFFE6A4B311CA0CBA /* Development */,
-				4A9504CDFFE6A4B311CA0CBA /* Deployment */,
-			);
 			hasScannedForEncodings = 1;
 			mainGroup = 29B97314FDCFA39411CA2CEA /* opensteer */;
 			projectDirPath = "";
 			targets = (
+				4425B3E50B7B61DB0067899D /* OpenSteer Framework */,
 				8D1107260486CEB800E47090 /* OpenSteerDemo */,
 				3224E47508435BCC00C13D97 /* UnitTest */,
-				327C7E980856F0B300C14AE6 /* Doxygen */,
 			);
 		};
 /* End PBXProject section */
@@ -555,81 +494,43 @@
 				8D11072A0486CEB800E47090 /* MainMenu.nib in Resources */,
 				8D11072B0486CEB800E47090 /* InfoPlist.strings in Resources */,
 				32FFF58106E9CF3800E1D8A3 /* OpenSteer.icns in Resources */,
-				324386DB07293A2200B6EBA6 /* Draw.h in Resources */,
-				32F3E5C707295CBA002E9EDE /* Clock.h in Resources */,
-				32F3E5C907295CBD002E9EDE /* Camera.h in Resources */,
-				32F3E5CA07295CBE002E9EDE /* Annotation.h in Resources */,
-				32F3E5CB07295CBE002E9EDE /* AbstractVehicle.h in Resources */,
-				32F3E5CC07295CC0002E9EDE /* Vec3.h in Resources */,
-				32F3E5CD07295CC0002E9EDE /* Utilities.h in Resources */,
-				32F3E5CE07295CC1002E9EDE /* SteerLibrary.h in Resources */,
-				32F3E5CF07295CC2002E9EDE /* SimpleVehicle.h in Resources */,
-				32F3E5D007295CC3002E9EDE /* Proximity.h in Resources */,
-				32F3E5D107295CC3002E9EDE /* PlugIn.h in Resources */,
-				32F3E5D207295CC4002E9EDE /* OldPathway.h in Resources */,
-				32F3E5D307295CC5002E9EDE /* OpenSteerDemo.h in Resources */,
-				32F3E5D407295CC5002E9EDE /* Obstacle.h in Resources */,
-				32F3E5D507295CC6002E9EDE /* lq.h in Resources */,
-				32F3E5D607295CC7002E9EDE /* LocalSpace.h in Resources */,
-				32C1508C0765ABE000A8BC25 /* TerrainRayTest.h in Resources */,
+				441067300B7BB59200B3A8B5 /* OpenSteerDemo-Info.plist in Resources */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
 /* End PBXResourcesBuildPhase section */
 
-/* Begin PBXShellScriptBuildPhase section */
-		327C7E970856F0B300C14AE6 /* ShellScript */ = {
-			isa = PBXShellScriptBuildPhase;
+/* Begin PBXSourcesBuildPhase section */
+		3224E47308435BCC00C13D97 /* Sources */ = {
+			isa = PBXSourcesBuildPhase;
 			buildActionMask = 2147483647;
-			comments = "Change into the doc directory where the doxygen configuration file is stored and put the generated documentation into doc/code_doc.";
 			files = (
+				4425B47F0B7B76740067899D /* PolylineSegmentedPathTest.cpp in Sources */,
+				4425B4800B7B76740067899D /* PolylineSegmentedPathwaySingleRadiusTest.cpp in Sources */,
+				4425B4810B7B76740067899D /* SharedPointerTest.cpp in Sources */,
+				4425B4820B7B76740067899D /* TestMain.cpp in Sources */,
 			);
-			inputPaths = (
-			);
-			outputPaths = (
-			);
 			runOnlyForDeploymentPostprocessing = 0;
-			shellPath = /bin/sh;
-			shellScript = "# shell script goes here\ncd ../doc\ndoxygen\nexit 0";
 		};
-/* End PBXShellScriptBuildPhase section */
-
-/* Begin PBXSourcesBuildPhase section */
-		3224E47308435BCC00C13D97 /* Sources */ = {
+		4425B3E30B7B61DB0067899D /* Sources */ = {
 			isa = PBXSourcesBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				3224E47C08435DE800C13D97 /* PolylineSegmentedPathTest.cpp in Sources */,
-				3224E47E08435E0700C13D97 /* TestMain.cpp in Sources */,
-				3230C06F084DB77D00CBB0D9 /* Boids.cpp in Sources */,
-				3230C070084DB77E00CBB0D9 /* Camera.cpp in Sources */,
-				3230C071084DB77F00CBB0D9 /* CaptureTheFlag.cpp in Sources */,
-				3230C072084DB78000CBB0D9 /* Clock.cpp in Sources */,
-				3230C073084DB78200CBB0D9 /* Color.cpp in Sources */,
-				3230C074084DB78400CBB0D9 /* Draw.cpp in Sources */,
-				3230C075084DB78800CBB0D9 /* LowSpeedTurn.cpp in Sources */,
-				3230C076084DB78900CBB0D9 /* lq.c in Sources */,
-				3230C078084DB78D00CBB0D9 /* MultiplePursuit.cpp in Sources */,
-				3230C079084DB79000CBB0D9 /* Obstacle.cpp in Sources */,
-				3230C07B084DB79800CBB0D9 /* OneTurning.cpp in Sources */,
-				3230C07C084DB79900CBB0D9 /* OpenSteerDemo.cpp in Sources */,
-				3230C07D084DB79C00CBB0D9 /* Path.cpp in Sources */,
-				3230C07E084DB79F00CBB0D9 /* Pathway.cpp in Sources */,
-				3230C07F084DB7A300CBB0D9 /* Pedestrian.cpp in Sources */,
-				3230C080084DB7A400CBB0D9 /* PlugIn.cpp in Sources */,
-				3230C081084DB7A800CBB0D9 /* PolylineSegmentedPath.cpp in Sources */,
-				3230C082084DB7AD00CBB0D9 /* PolylineSegmentedPathwaySegmentRadii.cpp in Sources */,
-				3230C083084DB7AF00CBB0D9 /* PolylineSegmentedPathwaySingleRadius.cpp in Sources */,
-				3230C084084DB7B400CBB0D9 /* SegmentedPath.cpp in Sources */,
-				3230C085084DB7B700CBB0D9 /* SegmentedPathway.cpp in Sources */,
-				3230C086084DB7BA00CBB0D9 /* SimpleVehicle.cpp in Sources */,
-				3230C087084DB7BC00CBB0D9 /* Soccer.cpp in Sources */,
-				3230C088084DB7BF00CBB0D9 /* TerrainRayTest.cpp in Sources */,
-				3230C089084DB7C400CBB0D9 /* Vec3.cpp in Sources */,
-				3230C08A084DB7C700CBB0D9 /* Vec3Utilities.cpp in Sources */,
-				327C7F2F0857205E00C14AE6 /* OldPathway.cpp in Sources */,
-				32BF79F40861C70F0045ADCC /* PolylineSegmentedPathwaySingleRadiusTest.cpp in Sources */,
-				32BF7A5D0861DE270045ADCC /* MapDrive.cpp in Sources */,
+				4425B40C0B7B67D20067899D /* Clock.cpp in Sources */,
+				4425B40D0B7B67D20067899D /* Color.cpp in Sources */,
+				4425B40E0B7B67D20067899D /* lq.c in Sources */,
+				4425B40F0B7B67D20067899D /* Obstacle.cpp in Sources */,
+				4425B4100B7B67D20067899D /* OldPathway.cpp in Sources */,
+				4425B4110B7B67D20067899D /* Path.cpp in Sources */,
+				4425B4120B7B67D20067899D /* Pathway.cpp in Sources */,
+				4425B4130B7B67D20067899D /* PlugIn.cpp in Sources */,
+				4425B4140B7B67D20067899D /* PolylineSegmentedPath.cpp in Sources */,
+				4425B4150B7B67D20067899D /* PolylineSegmentedPathwaySegmentRadii.cpp in Sources */,
+				4425B4160B7B67D20067899D /* PolylineSegmentedPathwaySingleRadius.cpp in Sources */,
+				4425B4170B7B67D20067899D /* SegmentedPath.cpp in Sources */,
+				4425B4180B7B67D20067899D /* SegmentedPathway.cpp in Sources */,
+				4425B4190B7B67D20067899D /* Vec3.cpp in Sources */,
+				4425B41A0B7B67D20067899D /* Vec3Utilities.cpp in Sources */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -637,35 +538,19 @@
 			isa = PBXSourcesBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				32FFF55006E9CEBD00E1D8A3 /* Clock.cpp in Sources */,
-				32FFF55206E9CEBD00E1D8A3 /* lq.c in Sources */,
-				32FFF55306E9CEBD00E1D8A3 /* main.cpp in Sources */,
-				32FFF55806E9CEBE00E1D8A3 /* Vec3.cpp in Sources */,
-				32FFF56C06E9CECE00E1D8A3 /* Boids.cpp in Sources */,
-				32FFF56D06E9CECE00E1D8A3 /* CaptureTheFlag.cpp in Sources */,
-				32FFF56E06E9CECE00E1D8A3 /* LowSpeedTurn.cpp in Sources */,
-				32FFF57106E9CECE00E1D8A3 /* OneTurning.cpp in Sources */,
-				32FFF57306E9CECE00E1D8A3 /* Soccer.cpp in Sources */,
-				3243869207292CC300B6EBA6 /* SimpleVehicle.cpp in Sources */,
-				3243869307292CC400B6EBA6 /* PlugIn.cpp in Sources */,
-				3243869407292CCB00B6EBA6 /* OpenSteerDemo.cpp in Sources */,
-				32F3E5D707295CCD002E9EDE /* Draw.cpp in Sources */,
-				32F3E5D807295CCF002E9EDE /* Camera.cpp in Sources */,
-				841E3BFD0736BF4400E3AD2C /* Obstacle.cpp in Sources */,
-				32C1508B0765ABE000A8BC25 /* TerrainRayTest.cpp in Sources */,
-				324DA5EF082ABDD8000F3779 /* Color.cpp in Sources */,
-				32ECFEB0083389F000E5E444 /* Vec3Utilities.cpp in Sources */,
-				3224E4FC0844B13C00C13D97 /* Path.cpp in Sources */,
-				3224E4FE0844B15200C13D97 /* SegmentedPath.cpp in Sources */,
-				3224E5000844B16200C13D97 /* PolylineSegmentedPath.cpp in Sources */,
-				3224E5020844B17700C13D97 /* Pathway.cpp in Sources */,
-				3224E5040844B18600C13D97 /* SegmentedPathway.cpp in Sources */,
-				3224E5060844B1A500C13D97 /* PolylineSegmentedPathwaySingleRadius.cpp in Sources */,
-				3224E5080844B1B800C13D97 /* PolylineSegmentedPathwaySegmentRadii.cpp in Sources */,
-				3230BE85084CD9AE00CBB0D9 /* MultiplePursuit.cpp in Sources */,
-				3230C3EF084F4ED600CBB0D9 /* MapDrive.cpp in Sources */,
-				327C7F2E0857205E00C14AE6 /* OldPathway.cpp in Sources */,
-				32BF7CB90864A4550045ADCC /* Pedestrian.cpp in Sources */,
+				4425B44F0B7B6B9C0067899D /* Draw.cpp in Sources */,
+				4425B44A0B7B6B460067899D /* Camera.cpp in Sources */,
+				4425B4430B7B6AF90067899D /* SimpleVehicle.cpp in Sources */,
+				4425B2FE0B7B5A1E0067899D /* Boids.cpp in Sources */,
+				4425B2FF0B7B5A1E0067899D /* CaptureTheFlag.cpp in Sources */,
+				4425B3000B7B5A1E0067899D /* LowSpeedTurn.cpp in Sources */,
+				4425B3010B7B5A1E0067899D /* MapDrive.cpp in Sources */,
+				4425B3020B7B5A1E0067899D /* MultiplePursuit.cpp in Sources */,
+				4425B3030B7B5A1E0067899D /* OneTurning.cpp in Sources */,
+				4425B3040B7B5A1E0067899D /* Pedestrian.cpp in Sources */,
+				4425B3050B7B5A1E0067899D /* Soccer.cpp in Sources */,
+				4425B2FC0B7B59D80067899D /* main.cpp in Sources */,
+				4425B2FD0B7B59D80067899D /* OpenSteerDemo.cpp in Sources */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -724,7 +609,7 @@
 				GCC_WARN_UNUSED_VALUE = YES;
 				GCC_WARN_UNUSED_VARIABLE = YES;
 				HEADER_SEARCH_PATHS = ../include;
-				INFOPLIST_FILE = Info.plist;
+				INFOPLIST_FILE = "OpenSteerDemo-Info.plist";
 				INSTALL_PATH = "$(HOME)/Applications";
 				LIBRARY_SEARCH_PATHS = "";
 				PRODUCT_NAME = OpenSteerDemo;
@@ -746,7 +631,7 @@
 				GCC_PREPROCESSOR_DEFINITIONS = NDEBUG;
 				GCC_WARN_SIGN_COMPARE = NO;
 				HEADER_SEARCH_PATHS = ../include;
-				INFOPLIST_FILE = Info.plist;
+				INFOPLIST_FILE = "OpenSteerDemo-Info.plist";
 				INSTALL_PATH = "$(HOME)/Applications";
 				LIBRARY_SEARCH_PATHS = "";
 				PRODUCT_NAME = OpenSteerDemo;
@@ -763,7 +648,7 @@
 				GCC_PRECOMPILE_PREFIX_HEADER = NO;
 				GCC_PREFIX_HEADER = "";
 				HEADER_SEARCH_PATHS = ../include;
-				INFOPLIST_FILE = Info.plist;
+				INFOPLIST_FILE = "OpenSteerDemo-Info.plist";
 				INSTALL_PATH = "$(HOME)/Applications";
 				LIBRARY_SEARCH_PATHS = "";
 				PRODUCT_NAME = OpenSteerDemo;
@@ -775,6 +660,7 @@
 		3219D3080855BC5800EB7908 /* Development */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
+				ARCHS = i386;
 				COPY_PHASE_STRIP = NO;
 				GCC_DYNAMIC_NO_PIC = NO;
 				GCC_ENABLE_FIX_AND_CONTINUE = YES;
@@ -805,10 +691,11 @@
 				GCC_WARN_UNUSED_VARIABLE = YES;
 				HEADER_SEARCH_PATHS = (
 					../include,
-					/Users/bknafla/Applications/usr/local/include,
+					/usr/local/include,
 				);
 				INSTALL_PATH = "$(HOME)/bin";
-				LIBRARY_SEARCH_PATHS = /Users/bknafla/Applications/usr/local/lib;
+				LIBRARY_SEARCH_PATHS = /usr/local/lib;
+				MACH_O_TYPE = mh_execute;
 				OTHER_CFLAGS = "";
 				OTHER_LDFLAGS = "";
 				OTHER_REZFLAGS = "";
@@ -823,6 +710,7 @@
 		3219D3090855BC5800EB7908 /* Deployment */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
+				ARCHS = i386;
 				COPY_PHASE_STRIP = YES;
 				GCC_ENABLE_FIX_AND_CONTINUE = NO;
 				GCC_GENERATE_DEBUGGING_SYMBOLS = NO;
@@ -832,10 +720,11 @@
 				GCC_WARN_SIGN_COMPARE = NO;
 				HEADER_SEARCH_PATHS = (
 					../include,
-					/Users/bknafla/Applications/usr/local/include,
+					/usr/local/include,
 				);
 				INSTALL_PATH = "$(HOME)/bin";
-				LIBRARY_SEARCH_PATHS = /Users/bknafla/Applications/usr/local/lib;
+				LIBRARY_SEARCH_PATHS = /usr/local/lib;
+				MACH_O_TYPE = mh_execute;
 				OTHER_CFLAGS = "";
 				OTHER_LDFLAGS = "";
 				OTHER_REZFLAGS = "";
@@ -851,14 +740,16 @@
 		3219D30A0855BC5800EB7908 /* Default */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
+				ARCHS = i386;
 				GCC_GENERATE_DEBUGGING_SYMBOLS = NO;
 				GCC_MODEL_TUNING = G5;
 				HEADER_SEARCH_PATHS = (
 					../include,
-					/Users/bknafla/Applications/usr/local/include,
+					/usr/local/include,
 				);
 				INSTALL_PATH = "$(HOME)/bin";
-				LIBRARY_SEARCH_PATHS = /Users/bknafla/Applications/usr/local/lib;
+				LIBRARY_SEARCH_PATHS = /usr/local/lib;
+				MACH_O_TYPE = mh_execute;
 				OTHER_CFLAGS = "";
 				OTHER_LDFLAGS = "";
 				OTHER_REZFLAGS = "";
@@ -872,7 +763,12 @@
 		3219D30C0855BC5800EB7908 /* Development */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				GCC_ENABLE_FIX_AND_CONTINUE = YES;
+				ARCHS = (
+					ppc,
+					i386,
+				);
+				FRAMEWORK_VERSION = 0.8;
+				GCC_ENABLE_FIX_AND_CONTINUE = NO;
 				GCC_MODEL_TUNING = G4;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_WARN_ABOUT_MISSING_NEWLINE = YES;
@@ -892,13 +788,21 @@
 				GCC_WARN_UNUSED_PARAMETER = YES;
 				GCC_WARN_UNUSED_VALUE = YES;
 				GCC_WARN_UNUSED_VARIABLE = YES;
-				ZERO_LINK = YES;
+				INSTALL_PATH = /Library/Frameworks;
+				SDKROOT = /Developer/SDKs/MacOSX10.4u.sdk;
+				ZERO_LINK = NO;
 			};
 			name = Development;
 		};
 		3219D30D0855BC5800EB7908 /* Deployment */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
+				ARCHS = (
+					ppc,
+					i386,
+				);
+				FRAMEWORK_VERSION = 0.8;
+				GCC_ENABLE_FIX_AND_CONTINUE = NO;
 				GCC_MODEL_TUNING = G4;
 				GCC_WARN_ABOUT_MISSING_NEWLINE = YES;
 				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
@@ -916,12 +820,21 @@
 				GCC_WARN_UNUSED_PARAMETER = YES;
 				GCC_WARN_UNUSED_VALUE = YES;
 				GCC_WARN_UNUSED_VARIABLE = YES;
+				INSTALL_PATH = /Library/Frameworks;
+				SDKROOT = /Developer/SDKs/MacOSX10.4u.sdk;
+				ZERO_LINK = NO;
 			};
 			name = Deployment;
 		};
 		3219D30E0855BC5800EB7908 /* Default */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
+				ARCHS = (
+					ppc,
+					i386,
+				);
+				FRAMEWORK_VERSION = 0.8;
+				GCC_ENABLE_FIX_AND_CONTINUE = NO;
 				GCC_MODEL_TUNING = G4;
 				GCC_WARN_ABOUT_MISSING_NEWLINE = YES;
 				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
@@ -939,61 +852,102 @@
 				GCC_WARN_UNUSED_PARAMETER = YES;
 				GCC_WARN_UNUSED_VALUE = YES;
 				GCC_WARN_UNUSED_VARIABLE = YES;
+				INSTALL_PATH = /Library/Frameworks;
+				SDKROOT = /Developer/SDKs/MacOSX10.4u.sdk;
+				ZERO_LINK = NO;
 			};
 			name = Default;
 		};
-		327C7E9C0856F0D200C14AE6 /* Development */ = {
+		4425B3E90B7B61DB0067899D /* Development */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
+				ARCHS = (
+					ppc,
+					i386,
+				);
 				COPY_PHASE_STRIP = NO;
+				DYLIB_COMPATIBILITY_VERSION = 2;
+				DYLIB_CURRENT_VERSION = 2;
+				FRAMEWORK_SEARCH_PATHS = (
+					/Library/Frameworks,
+					/System/Library/Frameworks,
+				);
+				FRAMEWORK_VERSION = 0.8;
+				GCC_DYNAMIC_NO_PIC = NO;
+				GCC_ENABLE_FIX_AND_CONTINUE = YES;
 				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
-				OPTIMIZATION_CFLAGS = "-O0";
-				OTHER_CFLAGS = "";
+				GCC_MODEL_TUNING = G5;
+				GCC_OPTIMIZATION_LEVEL = 0;
+				GCC_PRECOMPILE_PREFIX_HEADER = YES;
+				GCC_PREFIX_HEADER = "$(SYSTEM_LIBRARY_DIR)/Frameworks/Carbon.framework/Headers/Carbon.h";
+				HEADER_SEARCH_PATHS = ../include;
+				INFOPLIST_FILE = Info.plist;
+				INSTALL_PATH = "$(HOME)/Library/Frameworks";
 				OTHER_LDFLAGS = "";
-				OTHER_REZFLAGS = "";
-				PRODUCT_NAME = Doxygen;
-				SECTORDER_FLAGS = "";
-				WARNING_CFLAGS = (
-					"-Wmost",
-					"-Wno-four-char-constants",
-					"-Wno-unknown-pragmas",
-				);
+				PREBINDING = NO;
+				PRODUCT_NAME = OpenSteer;
+				USER_HEADER_SEARCH_PATHS = ../include;
+				ZERO_LINK = YES;
 			};
 			name = Development;
 		};
-		327C7E9D0856F0D200C14AE6 /* Deployment */ = {
+		4425B3EA0B7B61DB0067899D /* Deployment */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
+				ARCHS = (
+					ppc,
+					i386,
+				);
 				COPY_PHASE_STRIP = YES;
+				DYLIB_COMPATIBILITY_VERSION = 2;
+				DYLIB_CURRENT_VERSION = 2;
+				FRAMEWORK_SEARCH_PATHS = (
+					/Library/Frameworks,
+					/System/Library/Frameworks,
+				);
+				FRAMEWORK_VERSION = 0.8;
+				GCC_ENABLE_FIX_AND_CONTINUE = NO;
 				GCC_GENERATE_DEBUGGING_SYMBOLS = NO;
-				OPTIMIZATION_CFLAGS = "-O0";
-				OTHER_CFLAGS = "";
+				GCC_MODEL_TUNING = G5;
+				GCC_PRECOMPILE_PREFIX_HEADER = YES;
+				GCC_PREFIX_HEADER = "$(SYSTEM_LIBRARY_DIR)/Frameworks/Carbon.framework/Headers/Carbon.h";
+				HEADER_SEARCH_PATHS = ../include;
+				INFOPLIST_FILE = Info.plist;
+				INSTALL_PATH = "$(HOME)/Library/Frameworks";
 				OTHER_LDFLAGS = "";
-				OTHER_REZFLAGS = "";
-				PRODUCT_NAME = Doxygen;
-				SECTORDER_FLAGS = "";
-				WARNING_CFLAGS = (
-					"-Wmost",
-					"-Wno-four-char-constants",
-					"-Wno-unknown-pragmas",
-				);
+				PREBINDING = NO;
+				PRODUCT_NAME = OpenSteer;
+				USER_HEADER_SEARCH_PATHS = ../include;
+				ZERO_LINK = NO;
 			};
 			name = Deployment;
 		};
-		327C7E9E0856F0D200C14AE6 /* Default */ = {
+		4425B3EB0B7B61DB0067899D /* Default */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				OPTIMIZATION_CFLAGS = "-O0";
-				OTHER_CFLAGS = "";
-				OTHER_LDFLAGS = "";
-				OTHER_REZFLAGS = "";
-				PRODUCT_NAME = Doxygen;
-				SECTORDER_FLAGS = "";
-				WARNING_CFLAGS = (
-					"-Wmost",
-					"-Wno-four-char-constants",
-					"-Wno-unknown-pragmas",
+				ARCHS = (
+					ppc,
+					i386,
 				);
+				DYLIB_COMPATIBILITY_VERSION = 2;
+				DYLIB_CURRENT_VERSION = 2;
+				FRAMEWORK_SEARCH_PATHS = (
+					/Library/Frameworks,
+					/System/Library/Frameworks,
+				);
+				FRAMEWORK_VERSION = 0.8;
+				GCC_ENABLE_FIX_AND_CONTINUE = YES;
+				GCC_MODEL_TUNING = G5;
+				GCC_PRECOMPILE_PREFIX_HEADER = YES;
+				GCC_PREFIX_HEADER = "$(SYSTEM_LIBRARY_DIR)/Frameworks/Carbon.framework/Headers/Carbon.h";
+				HEADER_SEARCH_PATHS = ../include;
+				INFOPLIST_FILE = Info.plist;
+				INSTALL_PATH = "$(HOME)/Library/Frameworks";
+				OTHER_LDFLAGS = "";
+				PREBINDING = NO;
+				PRODUCT_NAME = OpenSteer;
+				USER_HEADER_SEARCH_PATHS = ../include;
+				ZERO_LINK = YES;
 			};
 			name = Default;
 		};
@@ -1030,14 +984,15 @@
 			defaultConfigurationIsVisible = 0;
 			defaultConfigurationName = Default;
 		};
-		327C7E9B0856F0D200C14AE6 /* Build configuration list for PBXAggregateTarget "Doxygen" */ = {
+		4425B3E80B7B61DB0067899D /* Build configuration list for PBXNativeTarget "OpenSteer Framework" */ = {
 			isa = XCConfigurationList;
 			buildConfigurations = (
-				327C7E9C0856F0D200C14AE6 /* Development */,
-				327C7E9D0856F0D200C14AE6 /* Deployment */,
-				327C7E9E0856F0D200C14AE6 /* Default */,
+				4425B3E90B7B61DB0067899D /* Development */,
+				4425B3EA0B7B61DB0067899D /* Deployment */,
+				4425B3EB0B7B61DB0067899D /* Default */,
 			);
 			defaultConfigurationIsVisible = 0;
+			defaultConfigurationName = Default;
 		};
 /* End XCConfigurationList section */
 	};

Added: dependencies/opensteer/macosx/OpenSteerDemo-Info.plist
===================================================================
--- dependencies/opensteer/macosx/OpenSteerDemo-Info.plist	2007-02-07 21:03:03 UTC (rev 3028)
+++ dependencies/opensteer/macosx/OpenSteerDemo-Info.plist	2007-02-08 20:18:58 UTC (rev 3029)
@@ -0,0 +1,26 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
+<plist version="1.0">
+<dict>
+	<key>CFBundleDevelopmentRegion</key>
+	<string>English</string>
+	<key>CFBundleExecutable</key>
+	<string>OpenSteer</string>
+	<key>CFBundleIconFile</key>
+	<string>OpenSteer.icns</string>
+	<key>CFBundleIdentifier</key>
+	<string>com.sony.OpenSteerDemo</string>
+	<key>CFBundleInfoDictionaryVersion</key>
+	<string>6.0</string>
+	<key>CFBundlePackageType</key>
+	<string>APPL</string>
+	<key>CFBundleSignature</key>
+	<string>????</string>
+	<key>CFBundleVersion</key>
+	<string>0.8</string>
+	<key>NSMainNibFile</key>
+	<string>MainMenu</string>
+	<key>NSPrincipalClass</key>
+	<string>NSApplication</string>
+</dict>
+</plist>



From tanis at mail.berlios.de  Thu Feb  8 21:31:54 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Thu, 8 Feb 2007 21:31:54 +0100
Subject: [Dsa-hl-svn] r3030 - in rl/trunk/engine: core/include core/src
	startup/src
Message-ID: <200702082031.l18KVsXs032233@sheep.berlios.de>

Author: tanis
Date: 2007-02-08 21:31:46 +0100 (Thu, 08 Feb 2007)
New Revision: 3030

Modified:
   rl/trunk/engine/core/include/ConfigurationManager.h
   rl/trunk/engine/core/src/ConfigurationManager.cpp
   rl/trunk/engine/core/src/CoreSubsystem.cpp
   rl/trunk/engine/core/src/SoundManager.cpp
   rl/trunk/engine/startup/src/RastullahMain.cpp
Log:
Adjusted windows version to configuration changes.

Modified: rl/trunk/engine/core/include/ConfigurationManager.h
===================================================================
--- rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-08 20:18:58 UTC (rev 3029)
+++ rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-08 20:31:46 UTC (rev 3030)
@@ -36,6 +36,8 @@
     class _RlCoreExport ConfigurationManager : protected Ogre::Singleton<ConfigurationManager>
     {
         public:
+            static Ogre::String PathDelimiter;
+
             /// Sections where settings can be queried from
             enum ConfigurationSection
             {

Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-08 20:18:58 UTC (rev 3029)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-08 20:31:46 UTC (rev 3030)
@@ -18,6 +18,11 @@
 #include "CoreSubsystem.h"
 
 template<> rl::ConfigurationManager* Ogre::Singleton<rl::ConfigurationManager>::ms_Singleton = 0;
+#if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
+    Ogre::String rl::ConfigurationManager::PathDelimiter = "/";
+#else
+    Ogre::String rl::ConfigurationManager::PathDelimiter = "/";
+#endif
 
 namespace rl
 {
@@ -85,22 +90,22 @@
 
     Ogre::String ConfigurationManager::getOgreLogFile() const
     {
-        return mRastullahLogDirectory + "/" + mOgreLogFile;
+        return mRastullahLogDirectory + PathDelimiter + mOgreLogFile;
     }
 
     Ogre::String ConfigurationManager::getRastullahLogFile() const
     {
-        return mRastullahLogDirectory + "/" + mRastullahLogFile;
+        return mRastullahLogDirectory + PathDelimiter + mRastullahLogFile;
     }
 
     Ogre::String ConfigurationManager::getCeguiLogFile() const
     {
-        return mRastullahLogDirectory + "/" + mCeguiLogFile;
+        return mRastullahLogDirectory + PathDelimiter + mCeguiLogFile;
     }
 
     Ogre::String ConfigurationManager::getModulesCfgFile() const
     {
-        return mModulesRootDirectory  + "/" + mModulesCfgFile;
+        return mModulesRootDirectory  + PathDelimiter + mModulesCfgFile;
     }
 
     Ogre::String ConfigurationManager::getModulesRootDirectory() const
@@ -137,7 +142,8 @@
     {
         // On Linux, we create the .rastullah directory
 #       if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
-        fs::path rastullahCfgDirectory(string(::getenv("HOME")) + "/.rastullah", fs::portable_posix_name);
+        fs::path rastullahCfgDirectory(string(::getenv("HOME")) + "/.rastullah",
+            fs::portable_posix_name);
 
         if (!fs::exists(rastullahCfgDirectory))
         {
@@ -165,7 +171,8 @@
             {
                 try
                 {
-                    std::cout << "Loading Configuration File " << cfg_paths[i] << mRastullahCfgFile << std::endl;
+                    std::cout << "Loading Configuration File " << cfg_paths[i]
+                        << mRastullahCfgFile << std::endl;
                     configfile->load(cfg_paths[i] + mRastullahCfgFile, "=", true);
                 }
                 catch (Ogre::Exception)
@@ -183,7 +190,9 @@
                 // Get general settings
                 try
                 {
-                    for (ConfigFile::SettingsIterator it = configfile->getSettingsIterator("General"); it.hasMoreElements(); it.moveNext())
+                    for (ConfigFile::SettingsIterator it =
+                        configfile->getSettingsIterator("General");
+                        it.hasMoreElements(); it.moveNext())
                     {
                         addSetting(CS_GENERAL, it.peekNextKey(), it.peekNextValue());
                     }
@@ -191,13 +200,17 @@
                 catch (Ogre::Exception& oe)
                 {
                     // Log it as information
-                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] + mRastullahCfgFile + " does not contain a section 'General'. Defaults will be used.");
+                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] +
+                        mRastullahCfgFile +
+                        " does not contain a section 'General'. Defaults will be used.");
                 }
 
                 // Get video settings
                 try
                 {
-                    for (ConfigFile::SettingsIterator it = configfile->getSettingsIterator("Video"); it.hasMoreElements(); it.moveNext())
+                    for (ConfigFile::SettingsIterator it =
+                        configfile->getSettingsIterator("Video");
+                        it.hasMoreElements(); it.moveNext())
                     {
                         addSetting(CS_GRAPHICS, it.peekNextKey(), it.peekNextValue());
                     }
@@ -205,13 +218,17 @@
                 catch (Ogre::Exception& oe)
                 {
                     // Log it as information
-                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] + mRastullahCfgFile + " does not contain a section 'Video'. Defaults will be used.");
+                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] +
+                        mRastullahCfgFile +
+                        " does not contain a section 'Video'. Defaults will be used.");
                 }
 
                 // Get sound settings
                 try
                 {
-                    for (ConfigFile::SettingsIterator it = configfile->getSettingsIterator("Sound"); it.hasMoreElements(); it.moveNext())
+                    for (ConfigFile::SettingsIterator it =
+                        configfile->getSettingsIterator("Sound");
+                        it.hasMoreElements(); it.moveNext())
                     {
                         addSetting(CS_SOUND, it.peekNextKey(), it.peekNextValue());
                     }
@@ -219,13 +236,17 @@
                 catch (Ogre::Exception& oe)
                 {
                     // Log it as information
-                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] + mRastullahCfgFile + " does not contain a section 'Video'. Defaults will be used.");
+                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] +
+                        mRastullahCfgFile +
+                        " does not contain a section 'Video'. Defaults will be used.");
                 }
 
                 // Get input settings
                 try
                 {
-                    for (ConfigFile::SettingsIterator it = configfile->getSettingsIterator("Input"); it.hasMoreElements(); it.moveNext())
+                    for (ConfigFile::SettingsIterator it =
+                        configfile->getSettingsIterator("Input");
+                        it.hasMoreElements(); it.moveNext())
                     {
                         addSetting(CS_INPUT, it.peekNextKey(), it.peekNextValue());
                     }
@@ -233,7 +254,9 @@
                 catch (Ogre::Exception& oe)
                 {
                     // Log it as information
-                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] + mRastullahCfgFile + " does not contain a section 'Input'. Defaults will be used.");
+                    LOG_WARNING(Logger::CORE, "Configuration File " + cfg_paths[i] +
+                        mRastullahCfgFile +
+                        " does not contain a section 'Input'. Defaults will be used.");
                 }
             }
 
@@ -254,7 +277,7 @@
 #           if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
                 mModulesRootDirectory = RL_MODULEDIR;
 #           else
-                mModulesRootDirectory = "./";
+                mModulesRootDirectory = "./modules";
 #           endif
         }
 
@@ -263,7 +286,7 @@
 #           if OGRE_PLATFORM == OGRE_PLATFORM_LINUX
             mOgrePluginDirectory = OGRE_PLUGINDIR;
 #           else
-            mOgrePluginDirectory = "";
+            mOgrePluginDirectory = ".";
 #           endif
         }
     }
@@ -290,7 +313,7 @@
         cfgfile->addSection("Input", mInputSettings);
 
 #       if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
-        cfgfile->save("./config");
+        cfgfile->save(fs::path("./modules/config/" + mRastullahCfgFile).native_file_string());
 #       else
         cfgfile->save(Ogre::String(::getenv("HOME")) + "/.rastullah/" + mRastullahCfgFile);
 #       endif
@@ -302,7 +325,8 @@
 
     Logger::LogLevel ConfigurationManager::getLogLevel()
     {
-        return static_cast<Logger::LogLevel>(getIntSetting(ConfigurationManager::CS_GENERAL, "Log Level"));
+        return static_cast<Logger::LogLevel>(getIntSetting(ConfigurationManager::CS_GENERAL,
+            "Log Level"));
     }
 
     Ogre::String ConfigurationManager::getEngineVersionString() const
@@ -317,7 +341,8 @@
         return version;
     }
 
-    Ogre::String ConfigurationManager::getStringSetting(ConfigurationSection section, Ogre::String key)
+    Ogre::String ConfigurationManager::getStringSetting(ConfigurationSection section,
+        Ogre::String key)
     {
         // Get the value we are looking for
         return findSetting(section, key);
@@ -341,7 +366,8 @@
         return Ogre::StringConverter::parseReal(findSetting(section, key));
     }
 
-    Ogre::String ConfigurationManager::findSetting(ConfigurationSection section, Ogre::String key) const
+    Ogre::String ConfigurationManager::findSetting(ConfigurationSection section,
+        Ogre::String key) const
     {
         Ogre::NameValuePairList::const_iterator it;
         const Ogre::NameValuePairList* searchList;
@@ -378,7 +404,8 @@
         }
     }
 
-    void ConfigurationManager::addSetting(ConfigurationSection section, Ogre::String key, Ogre::String value)
+    void ConfigurationManager::addSetting(ConfigurationSection section, Ogre::String key,
+        Ogre::String value)
     {
         Ogre::NameValuePairList::iterator it;
         Ogre::NameValuePairList* addList;
@@ -450,7 +477,8 @@
     const CeGuiString& ConfigurationManager::getAboutText() const
     {
         static CeGuiString aboutText =
-            "Rastullahs Lockenpracht\n\nCopyright 2003-2006 Team Pantheon\n\nBenutzte Bibliotheken: Ogre, fmod, Newton, boost, ...";
+            "Rastullahs Lockenpracht\n\nCopyright 2003-2006 Team Pantheon\
+\n\nBenutzte Bibliotheken: Ogre, fmod, Newton, boost, ...";
         return aboutText;
     }
 
@@ -470,7 +498,7 @@
         // Check home .rastullah directory
         addToCfgPath(Ogre::String(::getenv("HOME")) + "/.rastullah/");
 #       else
-        addToCfgPath("./config/");
+        addToCfgPath("./modules/config/");
 #       endif
     }
 
@@ -489,7 +517,8 @@
                 mRastullahCfgPath = path;
             }
 
-            std::cout << "Adding path " << path << " to Rastullah configuration path." << std::endl;
+            std::cout << "Adding path " << path << " to Rastullah configuration path."
+                << std::endl;
         }
     }
 

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-08 20:18:58 UTC (rev 3029)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-08 20:31:46 UTC (rev 3030)
@@ -158,11 +158,15 @@
         // Load Ogre plugins
         String PluginDir = ConfigurationManager::getSingleton().getOgrePluginDirectory();
 #       if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
-        mOgreRoot->loadPlugin(PluginDir + "/RenderSystem_Direct3D9");
-#       endif
+        mOgreRoot->loadPlugin(PluginDir + "\\RenderSystem_Direct3D9");
+        mOgreRoot->loadPlugin(PluginDir + "\\RenderSystem_GL");
+        mOgreRoot->loadPlugin(PluginDir + "\\Plugin_ParticleFX");
+        mOgreRoot->loadPlugin(PluginDir + "\\Plugin_OctreeSceneManager");
+#       else
         mOgreRoot->loadPlugin(PluginDir + "/RenderSystem_GL");
         mOgreRoot->loadPlugin(PluginDir + "/Plugin_ParticleFX");
         mOgreRoot->loadPlugin(PluginDir + "/Plugin_OctreeSceneManager");
+#       endif
 
         // Find out, what Renderer plugins are available
         RenderSystemList* rsl = mOgreRoot->getAvailableRenderers();
@@ -170,7 +174,8 @@
 
         for (it = rsl->begin(); it < rsl->end(); it++)
         {
-            if ((*it)->getName() == ConfigurationManager::getSingleton().getStringSetting(ConfigurationManager::CS_GRAPHICS, "Render System"))
+            if ((*it)->getName() == ConfigurationManager::getSingleton().getStringSetting(
+                ConfigurationManager::CS_GRAPHICS, "Render System"))
             {
                 // Select and initialise the render system
                 mOgreRoot->setRenderSystem(*it);
@@ -194,12 +199,16 @@
         name << ConfigurationManager::getSingleton().getEngineBuildNumber() << "]";
 
         // Get width and height of the RenderWindow from the "Video Mode" setting
-        Ogre::String VideoMode = ConfigurationManager::getSingleton().getStringSetting(ConfigurationManager::CS_GRAPHICS, "Video Mode");
+        Ogre::String VideoMode = ConfigurationManager::getSingleton().getStringSetting(
+            ConfigurationManager::CS_GRAPHICS, "Video Mode");
         int temp = VideoMode.find("x");
         int width = Ogre::StringConverter::parseInt(VideoMode.substr(0, temp));
         int height = Ogre::StringConverter::parseInt(VideoMode.substr(temp + 1, VideoMode.size()));
 
-        mRenderWindow = mOgreRoot->createRenderWindow(name.str(), width, height, ConfigurationManager::getSingleton().getBoolSetting(ConfigurationManager::CS_GRAPHICS, "Fullscreen"), &ConfigurationManager::getSingleton().getGraphicSettings());
+        mRenderWindow = mOgreRoot->createRenderWindow(name.str(), width, height,
+            ConfigurationManager::getSingleton().getBoolSetting(
+                ConfigurationManager::CS_GRAPHICS, "Fullscreen"),
+                    &ConfigurationManager::getSingleton().getGraphicSettings());
 
         if (!mRenderWindow)
             return false;
@@ -228,7 +237,8 @@
         TextureManager::getSingleton().setDefaultNumMipmaps(5);
         MaterialManager::getSingleton().setDefaultTextureFiltering(TFO_TRILINEAR);
         MaterialManager::getSingleton().setDefaultAnisotropy(
-            ConfigurationManager::getSingleton().getIntSetting(ConfigurationManager::CS_GRAPHICS, "Max Anisotropy"));
+            ConfigurationManager::getSingleton().getIntSetting(
+                ConfigurationManager::CS_GRAPHICS, "Max Anisotropy"));
 
 
         mWorld = new DotSceneOctreeWorld();
@@ -265,8 +275,9 @@
             ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
 
         // Laden mittels eines Configfiles
+        String cfgFilePath = mConfigurationManager->getModulesCfgFile();
         ConfigFile cf;
-        cf.load(mConfigurationManager->getModulesCfgFile());
+        cf.load(boost::filesystem::path(cfgFilePath).native_directory_string());
 
         // Durchgehen der einzelnen Settings
         ConfigFile::SettingsIterator i = cf.getSettingsIterator();

Modified: rl/trunk/engine/core/src/SoundManager.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundManager.cpp	2007-02-08 20:18:58 UTC (rev 3029)
+++ rl/trunk/engine/core/src/SoundManager.cpp	2007-02-08 20:31:46 UTC (rev 3030)
@@ -311,7 +311,7 @@
      *        Don't know yet, why this happens.
      */
     DriverList::iterator it = mDriverList.begin();
-    it++;
+    if (!mDriverList.empty()) ++it;
     /** Hack End **/
     for(/*DriverList::iterator it = mDriverList.begin()*/; it != mDriverList.end(); it++)
     {

Modified: rl/trunk/engine/startup/src/RastullahMain.cpp
===================================================================
--- rl/trunk/engine/startup/src/RastullahMain.cpp	2007-02-08 20:18:58 UTC (rev 3029)
+++ rl/trunk/engine/startup/src/RastullahMain.cpp	2007-02-08 20:31:46 UTC (rev 3030)
@@ -54,10 +54,12 @@
 #endif // #ifndef _DEBUG
         rl::ConfigurationManager::getSingleton().loadConfig();
 
-        logger = new rl::Logger(
-            rl::ConfigurationManager::getSingleton().getRastullahLogDirectory(),
-            rl::ConfigurationManager::getSingleton().getOgreLogFile(),
-            rl::ConfigurationManager::getSingleton().getRastullahLogFile());
+        Ogre::String logDir = rl::ConfigurationManager::getSingleton().getRastullahLogDirectory();
+        Ogre::String ogreLogFile = rl::ConfigurationManager::getSingleton().getOgreLogFile();
+        Ogre::String rlLogFile = rl::ConfigurationManager::getSingleton().getRastullahLogFile();
+
+
+        logger = new rl::Logger(logDir, ogreLogFile, rlLogFile);
         // @todo in ConfigDatei auslagern/ oder auch Parameter
 
         rl::Logger::getSingleton().setLogDetail(



From tanis at mail.berlios.de  Thu Feb  8 21:49:26 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Thu, 8 Feb 2007 21:49:26 +0100
Subject: [Dsa-hl-svn] r3031 - in rl/trunk/engine/core: include src
Message-ID: <200702082049.l18KnQN7000548@sheep.berlios.de>

Author: tanis
Date: 2007-02-08 21:49:20 +0100 (Thu, 08 Feb 2007)
New Revision: 3031

Modified:
   rl/trunk/engine/core/include/ConfigurationManager.h
   rl/trunk/engine/core/src/ConfigurationManager.cpp
Log:
Revert obsolete change from last commit.

Modified: rl/trunk/engine/core/include/ConfigurationManager.h
===================================================================
--- rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-08 20:31:46 UTC (rev 3030)
+++ rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-08 20:49:20 UTC (rev 3031)
@@ -36,8 +36,6 @@
     class _RlCoreExport ConfigurationManager : protected Ogre::Singleton<ConfigurationManager>
     {
         public:
-            static Ogre::String PathDelimiter;
-
             /// Sections where settings can be queried from
             enum ConfigurationSection
             {

Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-08 20:31:46 UTC (rev 3030)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-08 20:49:20 UTC (rev 3031)
@@ -18,11 +18,6 @@
 #include "CoreSubsystem.h"
 
 template<> rl::ConfigurationManager* Ogre::Singleton<rl::ConfigurationManager>::ms_Singleton = 0;
-#if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
-    Ogre::String rl::ConfigurationManager::PathDelimiter = "/";
-#else
-    Ogre::String rl::ConfigurationManager::PathDelimiter = "/";
-#endif
 
 namespace rl
 {
@@ -90,22 +85,22 @@
 
     Ogre::String ConfigurationManager::getOgreLogFile() const
     {
-        return mRastullahLogDirectory + PathDelimiter + mOgreLogFile;
+        return mRastullahLogDirectory + "/" + mOgreLogFile;
     }
 
     Ogre::String ConfigurationManager::getRastullahLogFile() const
     {
-        return mRastullahLogDirectory + PathDelimiter + mRastullahLogFile;
+        return mRastullahLogDirectory + "/" + mRastullahLogFile;
     }
 
     Ogre::String ConfigurationManager::getCeguiLogFile() const
     {
-        return mRastullahLogDirectory + PathDelimiter + mCeguiLogFile;
+        return mRastullahLogDirectory + "/" + mCeguiLogFile;
     }
 
     Ogre::String ConfigurationManager::getModulesCfgFile() const
     {
-        return mModulesRootDirectory  + PathDelimiter + mModulesCfgFile;
+        return mModulesRootDirectory  + "/" + mModulesCfgFile;
     }
 
     Ogre::String ConfigurationManager::getModulesRootDirectory() const



From tanis at mail.berlios.de  Thu Feb  8 22:22:58 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Thu, 8 Feb 2007 22:22:58 +0100
Subject: [Dsa-hl-svn] r3032 - in rl/trunk: engine/core/include
	engine/core/include/nulldriver engine/core/src
	engine/core/src/nulldriver plugins/fmod4driver/include
	plugins/fmod4driver/src plugins/openaldriver/include
	plugins/openaldriver/src
Message-ID: <200702082122.l18LMwre002841@sheep.berlios.de>

Author: tanis
Date: 2007-02-08 22:22:41 +0100 (Thu, 08 Feb 2007)
New Revision: 3032

Modified:
   rl/trunk/engine/core/include/SoundDriver.h
   rl/trunk/engine/core/include/nulldriver/NullDriver.h
   rl/trunk/engine/core/src/SoundDriver.cpp
   rl/trunk/engine/core/src/SoundObject.cpp
   rl/trunk/engine/core/src/nulldriver/NullDriver.cpp
   rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h
   rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp
   rl/trunk/plugins/openaldriver/include/OpenALDriver.h
   rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp
Log:
Sounds are managed by the drivers. First step to this goal.

Modified: rl/trunk/engine/core/include/SoundDriver.h
===================================================================
--- rl/trunk/engine/core/include/SoundDriver.h	2007-02-08 20:49:20 UTC (rev 3031)
+++ rl/trunk/engine/core/include/SoundDriver.h	2007-02-08 21:22:41 UTC (rev 3032)
@@ -52,9 +52,13 @@
         /// Update-Aufgaben erledigen
         virtual void update() = 0;
         /// Einen Sound-Stream mit Resource erzeugen
-        virtual Sound *createStream(const SoundResourcePtr &res) = 0;
+        virtual Sound* createStream(const SoundResourcePtr &res);
         /// Einen Sound-Sample mit Resource erzeugen
-        virtual Sound *createSample(const SoundResourcePtr &res) = 0;
+        virtual Sound* createSample(const SoundResourcePtr &res);
+
+        /// Destroy a sound created by this driver. Do not call the Sound destructor yourself!
+        virtual void destroySound(Sound*);
+
         /// Einen Soundlistener erzeugen
         virtual ListenerMovable *createListener(const Ogre::String &name) = 0;
 
@@ -74,8 +78,6 @@
         virtual void setMasterVolume(const Ogre::Real& vol);
         /// Die Standardlautst???rke f???r Musik zur???ckgeben.
         const Ogre::Real getMasterVolume() const;
-        /// Einen Sound aus den Listen entfernen
-        void remove(Sound *sound);
 
         /**
          * Returns the current sound driver settings as a key-value list
@@ -93,17 +95,18 @@
         virtual void applySettings(const Ogre::NameValuePairList& settings);
 
     protected:
-        /// Liste der Musikst???cke
-        SoundSet mMusicSet;
-        /// Liste der Sounds
-        SoundSet mSoundSet;
+        static Ogre::ResourceManager* sSoundResourceManager;
+
+        SoundSet mStreamSet;
+        SoundSet mSampleSet;
+
         Ogre::Real mDefaultMusicVolume;  ///!< Music volume
         Ogre::Real mDefaultSoundVolume;  ///!< Sound effect volume
         Ogre::Real mMasterVolume;        ///!< Master volume
 
-        static Ogre::ResourceManager* sSoundResourceManager;
+        virtual Sound* createStreamImpl(const SoundResourcePtr &res) = 0;
+        virtual Sound* createSampleImpl(const SoundResourcePtr &res) = 0;
     };
-
 }
 
 #endif /*SOUNDDRIVER_H_*/

Modified: rl/trunk/engine/core/include/nulldriver/NullDriver.h
===================================================================
--- rl/trunk/engine/core/include/nulldriver/NullDriver.h	2007-02-08 20:49:20 UTC (rev 3031)
+++ rl/trunk/engine/core/include/nulldriver/NullDriver.h	2007-02-08 21:22:41 UTC (rev 3032)
@@ -44,15 +44,15 @@
     virtual Ogre::String getName() const;
     /// Update-Aufgaben erledigen
     virtual void update();
-    /// Einen Sound-Stream mit Resource erzeugen
-    virtual Sound *createStream(const SoundResourcePtr &res);
-    /// Einen Sound-Sample mit Resource erzeugen
-    virtual Sound *createSample(const SoundResourcePtr &res);
     /// Einen Soundlistener erzeugen
     virtual ListenerMovable *createListener(const Ogre::String &name);
-    /// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
+    /// Set volume attenuation factor f in 1/(f*distance)
     virtual void setRolloffFactor(const Ogre::Real&);
     virtual const Ogre::Real getRolloffFactor();
+
+protected:
+    virtual Sound *createStreamImpl(const SoundResourcePtr &res);
+    virtual Sound *createSampleImpl(const SoundResourcePtr &res);
 };
 
 }

Modified: rl/trunk/engine/core/src/SoundDriver.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundDriver.cpp	2007-02-08 20:49:20 UTC (rev 3031)
+++ rl/trunk/engine/core/src/SoundDriver.cpp	2007-02-08 21:22:41 UTC (rev 3032)
@@ -25,8 +25,8 @@
 Ogre::ResourceManager* SoundDriver::sSoundResourceManager = NULL;
 
 SoundDriver::SoundDriver(ResourceManager* soundResourceManager)
- :  mMusicSet(),
-    mSoundSet(),
+ :  mStreamSet(),
+    mSampleSet(),
     mDefaultMusicVolume(40),
     mDefaultSoundVolume(100),
     mMasterVolume(100)
@@ -36,6 +36,17 @@
 
 SoundDriver::~SoundDriver()
 {
+    SoundSet sounds;
+    sounds.insert(mSampleSet.begin(), mSampleSet.end());
+    sounds.insert(mSampleSet.begin(), mSampleSet.end());
+    for (SoundSet::iterator it = sounds.begin(); it != sounds.end(); ++it)
+    {
+        if ((*it)->isPlaying())
+        {
+            (*it)->stop();
+        }
+        delete *it;
+    }
 }
 
 /// Die Standardlautst?rke f?r Musik einstellen
@@ -43,7 +54,7 @@
 {
     mDefaultMusicVolume = vol;
     SoundSet::iterator it;
-    for(it = mMusicSet.begin(); it != mMusicSet.end(); it++)
+    for(it = mStreamSet.begin(); it != mStreamSet.end(); it++)
     {
         (*it)->setVolume(vol);
     }
@@ -60,7 +71,7 @@
 {
     mDefaultSoundVolume = vol;
     SoundSet::iterator it;
-    for(it = mSoundSet.begin(); it != mSoundSet.end(); it++)
+    for(it = mSampleSet.begin(); it != mSampleSet.end(); it++)
     {
         (*it)->setVolume(vol);
     }
@@ -82,13 +93,6 @@
     return mMasterVolume;
 }
 
-/// Aus einer Liste entfernen.
-void SoundDriver::remove(Sound *sound)
-{
-    mMusicSet.erase(sound);
-    mSoundSet.erase(sound);
-}
-
     Ogre::NameValuePairList SoundDriver::getSettings() const
     {
         Ogre::NameValuePairList SoundSettings;
@@ -138,4 +142,35 @@
             setDefaultSoundVolume(Ogre::StringConverter::parseReal(it->second));
         }
     }
+
+    Sound* SoundDriver::createStream(const SoundResourcePtr &res)
+    {
+        Sound* sound = createStreamImpl(res);
+        if (sound != NULL)
+        {
+            mStreamSet.insert(sound);
+        }
+        return sound;
+    }
+
+    Sound* SoundDriver::createSample(const SoundResourcePtr &res)
+    {
+        Sound* sound = createSampleImpl(res);
+        if (sound != NULL)
+        {
+            mSampleSet.insert(sound);
+        }
+        return sound;
+    }
+
+    void SoundDriver::destroySound(Sound* sound)
+    {
+        if (sound->isPlaying())
+        {
+            sound->stop();
+        }
+        mStreamSet.erase(sound);
+        mSampleSet.erase(sound);
+        delete sound;
+    }
 }

Modified: rl/trunk/engine/core/src/SoundObject.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundObject.cpp	2007-02-08 20:49:20 UTC (rev 3031)
+++ rl/trunk/engine/core/src/SoundObject.cpp	2007-02-08 21:22:41 UTC (rev 3032)
@@ -53,13 +53,8 @@
 {
     if (mMovableObject != NULL)
     {
-        if (getSound()->isPlaying())
-        {
-            getSound()->stop();
-        }
         getSound()->removeEventListener(this);
-		SoundManager::getSingleton().getActiveDriver()->remove(getSound());
-        delete mMovableObject;
+		SoundManager::getSingleton().getActiveDriver()->destroySound(getSound());
         mMovableObject = NULL;
     }
 }

Modified: rl/trunk/engine/core/src/nulldriver/NullDriver.cpp
===================================================================
--- rl/trunk/engine/core/src/nulldriver/NullDriver.cpp	2007-02-08 20:49:20 UTC (rev 3031)
+++ rl/trunk/engine/core/src/nulldriver/NullDriver.cpp	2007-02-08 21:22:41 UTC (rev 3032)
@@ -99,7 +99,7 @@
   * @author JoSch
   * @date 03-06-2006
   */
-Sound *NullDriver::createStream(const SoundResourcePtr &res)
+Sound *NullDriver::createStreamImpl(const SoundResourcePtr &res)
 {
      Sound *sound = new NullSound(res);
      return sound;
@@ -112,7 +112,7 @@
  * @author JoSch
  * @date 03-06-2006
  */
-Sound *NullDriver::createSample(const SoundResourcePtr &res)
+Sound *NullDriver::createSampleImpl(const SoundResourcePtr &res)
 {
      Sound *sound = new NullSound(res);
      return sound;

Modified: rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h
===================================================================
--- rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h	2007-02-08 20:49:20 UTC (rev 3031)
+++ rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h	2007-02-08 21:22:41 UTC (rev 3032)
@@ -67,10 +67,6 @@
         virtual Ogre::String getName() const;
         /// Update-Aufgaben erledigen
         virtual void update();
-        /// Einen Sound-Stream mit Resource erzeugen
-        virtual Sound *createStream(const SoundResourcePtr &res);
-        /// Einen Sound-Sample mit Resource erzeugen
-        virtual Sound *createSample(const SoundResourcePtr &res);
         /// Einen Soundlistener erzeugen
         virtual ListenerMovable *createListener(const Ogre::String &name);
 
@@ -100,6 +96,10 @@
 
         FMOD::System* _getFmodSystem();
 
+    protected:
+        virtual Sound* createStreamImpl(const SoundResourcePtr &res);
+        virtual Sound* createSampleImpl(const SoundResourcePtr &res);
+
     private:
         /// Informationen ???ber den Treiber ausgeben
         virtual void printData() const;

Modified: rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp	2007-02-08 20:49:20 UTC (rev 3031)
+++ rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp	2007-02-08 21:22:41 UTC (rev 3032)
@@ -105,7 +105,7 @@
       * @author JoSch
       * @date 03-06-2006
       */
-    Sound *Fmod4Driver::createStream(const SoundResourcePtr &res)
+    Sound *Fmod4Driver::createStreamImpl(const SoundResourcePtr &res)
     {
          Sound *sound = new Fmod4Sound(this, res, Fmod4Sound::STREAM);
          return sound;
@@ -117,7 +117,7 @@
      * @author JoSch
      * @date 03-06-2006
      */
-    Sound *Fmod4Driver::createSample(const SoundResourcePtr &res)
+    Sound *Fmod4Driver::createSampleImpl(const SoundResourcePtr &res)
     {
         Sound *sound = new Fmod4Sound(this, res, Fmod4Sound::SAMPLE);
          return sound;

Modified: rl/trunk/plugins/openaldriver/include/OpenALDriver.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALDriver.h	2007-02-08 20:49:20 UTC (rev 3031)
+++ rl/trunk/plugins/openaldriver/include/OpenALDriver.h	2007-02-08 21:22:41 UTC (rev 3032)
@@ -44,10 +44,6 @@
         virtual Ogre::String getName() const;
         /// Update-Aufgaben erledigen
         virtual void update();
-        /// Einen Sound-Stream mit Resource erzeugen
-        virtual Sound *createStream(const SoundResourcePtr &res);
-        /// Einen Sound-Sample mit Resource erzeugen
-        virtual Sound *createSample(const SoundResourcePtr &res);
         /// Einen Soundlistener erzeugen
         virtual ListenerMovable *createListener(const Ogre::String &name);
 
@@ -55,6 +51,10 @@
         virtual void setRolloffFactor(const Ogre::Real& f);
         virtual const Ogre::Real getRolloffFactor();
 
+    protected:
+        virtual Sound* createStreamImpl(const SoundResourcePtr &res);
+        virtual Sound* createSampleImpl(const SoundResourcePtr &res);
+
     private:
         /// Informationen ?ber den Treiber ausgeben
         virtual void printData() const;

Modified: rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp	2007-02-08 20:49:20 UTC (rev 3031)
+++ rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp	2007-02-08 21:22:41 UTC (rev 3032)
@@ -140,7 +140,7 @@
       * @author JoSch
       * @date 03-06-2006
       */
-    Sound *OpenALDriver::createStream(const SoundResourcePtr &res)
+    Sound* OpenALDriver::createStreamImpl(const SoundResourcePtr &res)
     {
          Sound *sound = new OpenALSoundStream(this, res);
          return sound;
@@ -152,7 +152,7 @@
      * @author JoSch
      * @date 03-06-2006
      */
-    Sound *OpenALDriver::createSample(const SoundResourcePtr &res)
+    Sound* OpenALDriver::createSampleImpl(const SoundResourcePtr &res)
     {
          Sound *sound = new OpenALSoundSample(this, res);
          return sound;



From chrber at mail.berlios.de  Fri Feb  9 17:04:05 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Fri, 9 Feb 2007 17:04:05 +0100
Subject: [Dsa-hl-svn] r3033 -
	dependencies/opensteer/macosx/OpenSteer.xcodeproj
Message-ID: <200702091604.l19G45lY001444@sheep.berlios.de>

Author: chrber
Date: 2007-02-09 17:04:00 +0100 (Fri, 09 Feb 2007)
New Revision: 3033

Modified:
   dependencies/opensteer/macosx/OpenSteer.xcodeproj/project.pbxproj
Log:
Removed linking of OpenSteer framework agains Cocoa/Carbon frameworks.


Modified: dependencies/opensteer/macosx/OpenSteer.xcodeproj/project.pbxproj
===================================================================
--- dependencies/opensteer/macosx/OpenSteer.xcodeproj/project.pbxproj	2007-02-08 21:22:41 UTC (rev 3032)
+++ dependencies/opensteer/macosx/OpenSteer.xcodeproj/project.pbxproj	2007-02-09 16:04:00 UTC (rev 3033)
@@ -69,8 +69,6 @@
 		4425B4180B7B67D20067899D /* SegmentedPathway.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 3224E5030844B18600C13D97 /* SegmentedPathway.cpp */; };
 		4425B4190B7B67D20067899D /* Vec3.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54E06E9CEBD00E1D8A3 /* Vec3.cpp */; };
 		4425B41A0B7B67D20067899D /* Vec3Utilities.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32ECFEAF083389F000E5E444 /* Vec3Utilities.cpp */; };
-		4425B41B0B7B67E50067899D /* Cocoa.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 1058C7A1FEA54F0111CA2CBB /* Cocoa.framework */; };
-		4425B41D0B7B67F90067899D /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4425B41C0B7B67F90067899D /* Carbon.framework */; };
 		4425B41F0B7B681A0067899D /* OpenSteer.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4425B3E60B7B61DB0067899D /* OpenSteer.framework */; };
 		4425B4430B7B6AF90067899D /* SimpleVehicle.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54C06E9CEBD00E1D8A3 /* SimpleVehicle.cpp */; };
 		4425B44A0B7B6B460067899D /* Camera.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 32FFF54506E9CEBD00E1D8A3 /* Camera.cpp */; };
@@ -88,7 +86,7 @@
 		089C165DFE840E0CC02AAC07 /* English */ = {isa = PBXFileReference; fileEncoding = 10; lastKnownFileType = text.plist.strings; name = English; path = English.lproj/InfoPlist.strings; sourceTree = "<group>"; };
 		1058C7A1FEA54F0111CA2CBB /* Cocoa.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Cocoa.framework; path = /System/Library/Frameworks/Cocoa.framework; sourceTree = "<absolute>"; };
 		29B97319FDCFA39411CA2CEA /* English */ = {isa = PBXFileReference; lastKnownFileType = wrapper.nib; name = English; path = English.lproj/MainMenu.nib; sourceTree = "<group>"; };
-		3224E47608435BCC00C13D97 /* UnitTest */ = {isa = PBXFileReference; includeInIndex = 0; lastKnownFileType = "compiled.mach-o.executable"; path = UnitTest; sourceTree = BUILT_PRODUCTS_DIR; };
+		3224E47608435BCC00C13D97 /* UnitTest */ = {isa = PBXFileReference; explicitFileType = "compiled.mach-o.executable"; includeInIndex = 0; path = UnitTest; sourceTree = BUILT_PRODUCTS_DIR; };
 		3224E47808435D8C00C13D97 /* libcppunit-1.10.2.0.0.dylib */ = {isa = PBXFileReference; explicitFileType = "compiled.mach-o.dylib"; name = "libcppunit-1.10.2.0.0.dylib"; path = "../../libcppunit-1.10.2.0.0.dylib"; sourceTree = SOURCE_ROOT; };
 		3224E4A50843657800C13D97 /* StandardTypes.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = StandardTypes.h; sourceTree = "<group>"; };
 		3224E4AC0844A32F00C13D97 /* SegmentedPathway.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = SegmentedPathway.h; sourceTree = "<group>"; };
@@ -165,7 +163,7 @@
 		84AD12AD070E221100559513 /* OpenSteerDemo.h */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.c.h; path = OpenSteerDemo.h; sourceTree = "<group>"; };
 		84AD12B1070E224000559513 /* OpenSteerDemo.cpp */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.cpp.cpp; path = OpenSteerDemo.cpp; sourceTree = "<group>"; };
 		8D1107310486CEB800E47090 /* OpenSteerDemo-Info.plist */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.xml; path = "OpenSteerDemo-Info.plist"; sourceTree = "<group>"; };
-		8D1107320486CEB800E47090 /* OpenSteerDemo.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = OpenSteerDemo.app; sourceTree = BUILT_PRODUCTS_DIR; };
+		8D1107320486CEB800E47090 /* OpenSteerDemo.app */ = {isa = PBXFileReference; includeInIndex = 0; lastKnownFileType = wrapper.application; path = OpenSteerDemo.app; sourceTree = BUILT_PRODUCTS_DIR; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -181,15 +179,6 @@
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
-		4425B3E40B7B61DB0067899D /* Frameworks */ = {
-			isa = PBXFrameworksBuildPhase;
-			buildActionMask = 2147483647;
-			files = (
-				4425B41B0B7B67E50067899D /* Cocoa.framework in Frameworks */,
-				4425B41D0B7B67F90067899D /* Carbon.framework in Frameworks */,
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
 		8D11072E0486CEB800E47090 /* Frameworks */ = {
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
@@ -440,7 +429,6 @@
 			buildPhases = (
 				4425B3E10B7B61DB0067899D /* Headers */,
 				4425B3E30B7B61DB0067899D /* Sources */,
-				4425B3E40B7B61DB0067899D /* Frameworks */,
 			);
 			buildRules = (
 			);
@@ -779,7 +767,7 @@
 				GCC_WARN_INITIALIZER_NOT_FULLY_BRACKETED = YES;
 				GCC_WARN_MISSING_PARENTHESES = YES;
 				GCC_WARN_NON_VIRTUAL_DESTRUCTOR = YES;
-				GCC_WARN_PEDANTIC = YES;
+				GCC_WARN_PEDANTIC = NO;
 				GCC_WARN_SIGN_COMPARE = YES;
 				GCC_WARN_TYPECHECK_CALLS_TO_PRINTF = YES;
 				GCC_WARN_UNKNOWN_PRAGMAS = YES;
@@ -811,7 +799,7 @@
 				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = YES;
 				GCC_WARN_INITIALIZER_NOT_FULLY_BRACKETED = YES;
 				GCC_WARN_MISSING_PARENTHESES = YES;
-				GCC_WARN_PEDANTIC = YES;
+				GCC_WARN_PEDANTIC = NO;
 				GCC_WARN_SIGN_COMPARE = YES;
 				GCC_WARN_TYPECHECK_CALLS_TO_PRINTF = YES;
 				GCC_WARN_UNKNOWN_PRAGMAS = YES;
@@ -843,7 +831,7 @@
 				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = YES;
 				GCC_WARN_INITIALIZER_NOT_FULLY_BRACKETED = YES;
 				GCC_WARN_MISSING_PARENTHESES = YES;
-				GCC_WARN_PEDANTIC = YES;
+				GCC_WARN_PEDANTIC = NO;
 				GCC_WARN_SIGN_COMPARE = YES;
 				GCC_WARN_TYPECHECK_CALLS_TO_PRINTF = YES;
 				GCC_WARN_UNKNOWN_PRAGMAS = YES;
@@ -878,8 +866,8 @@
 				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_MODEL_TUNING = G5;
 				GCC_OPTIMIZATION_LEVEL = 0;
-				GCC_PRECOMPILE_PREFIX_HEADER = YES;
-				GCC_PREFIX_HEADER = "$(SYSTEM_LIBRARY_DIR)/Frameworks/Carbon.framework/Headers/Carbon.h";
+				GCC_PRECOMPILE_PREFIX_HEADER = NO;
+				GCC_PREFIX_HEADER = "";
 				HEADER_SEARCH_PATHS = ../include;
 				INFOPLIST_FILE = Info.plist;
 				INSTALL_PATH = "$(HOME)/Library/Frameworks";
@@ -909,8 +897,8 @@
 				GCC_ENABLE_FIX_AND_CONTINUE = NO;
 				GCC_GENERATE_DEBUGGING_SYMBOLS = NO;
 				GCC_MODEL_TUNING = G5;
-				GCC_PRECOMPILE_PREFIX_HEADER = YES;
-				GCC_PREFIX_HEADER = "$(SYSTEM_LIBRARY_DIR)/Frameworks/Carbon.framework/Headers/Carbon.h";
+				GCC_PRECOMPILE_PREFIX_HEADER = NO;
+				GCC_PREFIX_HEADER = "";
 				HEADER_SEARCH_PATHS = ../include;
 				INFOPLIST_FILE = Info.plist;
 				INSTALL_PATH = "$(HOME)/Library/Frameworks";
@@ -938,8 +926,8 @@
 				FRAMEWORK_VERSION = 0.8;
 				GCC_ENABLE_FIX_AND_CONTINUE = YES;
 				GCC_MODEL_TUNING = G5;
-				GCC_PRECOMPILE_PREFIX_HEADER = YES;
-				GCC_PREFIX_HEADER = "$(SYSTEM_LIBRARY_DIR)/Frameworks/Carbon.framework/Headers/Carbon.h";
+				GCC_PRECOMPILE_PREFIX_HEADER = NO;
+				GCC_PREFIX_HEADER = "";
 				HEADER_SEARCH_PATHS = ../include;
 				INFOPLIST_FILE = Info.plist;
 				INSTALL_PATH = "$(HOME)/Library/Frameworks";



From chrber at mail.berlios.de  Sat Feb 10 15:32:00 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Sat, 10 Feb 2007 15:32:00 +0100
Subject: [Dsa-hl-svn] r3034 - in rl/trunk: . engine/core/src
	engine/ui/include engine/ui/src
Message-ID: <200702101432.l1AEW00V015165@sheep.berlios.de>

Author: chrber
Date: 2007-02-10 15:31:59 +0100 (Sat, 10 Feb 2007)
New Revision: 3034

Modified:
   rl/trunk/configure.in
   rl/trunk/engine/core/src/MovableText.cpp
   rl/trunk/engine/ui/include/UiSubsystem.h
   rl/trunk/engine/ui/src/UiSubsystem.cpp
Log:
Changes for Ogre 1.4, which is now a requirement


Modified: rl/trunk/configure.in
===================================================================
--- rl/trunk/configure.in	2007-02-09 16:04:00 UTC (rev 3033)
+++ rl/trunk/configure.in	2007-02-10 14:31:59 UTC (rev 3034)
@@ -107,7 +107,7 @@
 fi
 
 # Ogre
-PKG_CHECK_MODULES(OGRE, OGRE >= 1.3.0)
+PKG_CHECK_MODULES(OGRE, OGRE >= 1.4.0)
 AC_ARG_WITH(ogre-plugins,[  --with-ogre-plugins=path        Set location of Ogre plugins],[ OGRE_PLUGINDIR="$withval"], [OGRE_PLUGINDIR=`pkg-config OGRE --variable=plugindir`])
 AC_SUBST(OGRE_PLUGINDIR)
 

Modified: rl/trunk/engine/core/src/MovableText.cpp
===================================================================
--- rl/trunk/engine/core/src/MovableText.cpp	2007-02-09 16:04:00 UTC (rev 3033)
+++ rl/trunk/engine/core/src/MovableText.cpp	2007-02-10 14:31:59 UTC (rev 3034)
@@ -177,8 +177,8 @@
         mRenderOp.indexData = 0;
         mRenderOp.vertexData->vertexStart = 0;
         mRenderOp.vertexData->vertexCount = vertexCount;
-        mRenderOp.operationType = RenderOperation::OT_TRIANGLE_LIST; 
-        mRenderOp.useIndexes = false; 
+        mRenderOp.operationType = RenderOperation::OT_TRIANGLE_LIST;
+        mRenderOp.useIndexes = false;
 
         VertexDeclaration  *decl = mRenderOp.vertexData->vertexDeclaration;
         VertexBufferBinding   *bind = mRenderOp.vertexData->vertexBufferBinding;
@@ -248,7 +248,7 @@
                 {
                     if (*j == ' ')
                         len += mSpaceWidth;
-                    else 
+                    else
                         len += mFont->getGlyphAspectRatio(*j) * mCharHeight * 2.0;
                 }
                 newLine = false;
@@ -272,8 +272,12 @@
             }
 
             Real horiz_height = mFont->getGlyphAspectRatio(*i);
-            Real u1, u2, v1, v2; 
-            mFont->getGlyphTexCoords(*i, u1, v1, u2, v2);
+            Real u1, u2, v1, v2;
+            Font::UVRect rect = mFont->getGlyphTexCoords(*i);
+            u1 = rect.left;
+            v1 = rect.top;
+            u2 = rect.right;
+            v2 = rect.bottom;
 
             // each vert is (x, y, z, u, v)
             //---------------------------------------------------------------
@@ -436,7 +440,7 @@
     }
 
     /************************************************************************/
-    void MovableText::getWorldTransforms(Matrix4* xform) const 
+    void MovableText::getWorldTransforms(Matrix4* xform) const
     {
         if (this->isVisible() && mCamera != 0)
         {
@@ -463,7 +467,7 @@
             scale3x3[0][0] = 0.01 * mScaleOffset.x * mParentNode->_getDerivedScale().x / 2;
             scale3x3[1][1] = 0.01 * mScaleOffset.y * mParentNode->_getDerivedScale().y / 2;
             scale3x3[2][2] = 0.01 * mScaleOffset.z * mParentNode->_getDerivedScale().z / 2;
-            // apply all transforms to xform       
+            // apply all transforms to xform
             *xform = (rot3x3 * scale3x3);
             xform->setTrans(ppos);
         }

Modified: rl/trunk/engine/ui/include/UiSubsystem.h
===================================================================
--- rl/trunk/engine/ui/include/UiSubsystem.h	2007-02-09 16:04:00 UTC (rev 3033)
+++ rl/trunk/engine/ui/include/UiSubsystem.h	2007-02-10 14:31:59 UTC (rev 3034)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -37,19 +37,19 @@
 
     class Creature;
     class GameActor;
-	class GameObject;
-	class InputManager;
-	class Person;
-	class RBCombat;
-	class RTCombat;
-	class WindowFactory;
-	class WindowManager;
+    class GameObject;
+    class InputManager;
+    class Person;
+    class RBCombat;
+    class RTCombat;
+    class WindowFactory;
+    class WindowManager;
 
     class _RlUiExport UiSubsystem : public SceneChangeListener,
         protected Ogre::Singleton<UiSubsystem>, protected GameTask
     {
     public:
-		static const char* CEGUI_ROOT;
+        static const char* CEGUI_ROOT;
 
         /** Default Constructor */
         UiSubsystem();
@@ -60,30 +60,30 @@
         static UiSubsystem & getSingleton(void);
         static UiSubsystem * getSingletonPtr(void);
 
-		CEGUI::OgreCEGUIRenderer* getGUIRenderer();
-		Person* getActiveCharacter() const;
-		void setActiveCharacter(Person* person);
+        CEGUI::OgreCEGUIRenderer* getGUIRenderer();
+        Person* getActiveCharacter() const;
+        void setActiveCharacter(Person* person);
         CharacterController* getCharacterController() const;
-		CharacterController::ControllerType getCharacterControllerType() const;
-		
-		/**
-		 * Aendert den CharacterController, wird sofort durchgefuehrt
-		 * kann Probleme bei Ausfuehrung innerhalb eines Controllers geben,
-		 * dann ist @see requestCharacterControllerSwitch empfohlen
-		*/
-		void setCharacterController(CharacterController::ControllerType type);
-		
-		/**
-		 * Aendert den CharacterController nach dem naechsten Frame
-		*/
-		void requestCharacterControllerSwitch(CharacterController::ControllerType type);
+        CharacterController::ControllerType getCharacterControllerType() const;
 
-		void update();
+        /**
+         * Aendert den CharacterController, wird sofort durchgefuehrt
+         * kann Probleme bei Ausfuehrung innerhalb eines Controllers geben,
+         * dann ist @see requestCharacterControllerSwitch empfohlen
+        */
+        void setCharacterController(CharacterController::ControllerType type);
 
+        /**
+         * Aendert den CharacterController nach dem naechsten Frame
+        */
+        void requestCharacterControllerSwitch(CharacterController::ControllerType type);
+
+        void update();
+
         /// from SceneChangeListener
         virtual void onBeforeClearScene();
 
-		virtual void run(Ogre::Real elapsedTime);
+        virtual void run(Ogre::Real elapsedTime);
 
         virtual const Ogre::String& getName() const;
 
@@ -94,17 +94,17 @@
 
     private:
         CharacterController* mCharacterController;
-		CharacterController::ControllerType mCharacterControllerType;
+        CharacterController::ControllerType mCharacterControllerType;
         GameActor* mHero;
         Person* mCharacter;
 
         // Singletons
-		InputManager* mInputManager;
-		WindowFactory* mWindowFactory;
-		WindowManager* mWindowManager;
+        InputManager* mInputManager;
+        WindowFactory* mWindowFactory;
+        WindowManager* mWindowManager;
 
         CEGUI::OgreCEGUIRenderer* mGuiRenderer;
-        CEGUI::OgreCEGUIResourceProvider* mGuiResourceProvider;
+        CEGUI::ResourceProvider* mGuiResourceProvider;
         CEGUI::System* mGuiSystem;
     };
 }

Modified: rl/trunk/engine/ui/src/UiSubsystem.cpp
===================================================================
--- rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-02-09 16:04:00 UTC (rev 3033)
+++ rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-02-10 14:31:59 UTC (rev 3034)
@@ -91,7 +91,6 @@
         delete mInputManager;
 
         delete mGuiSystem;
-        delete mGuiResourceProvider;
         delete mGuiRenderer;
     }
 
@@ -111,7 +110,7 @@
 
         LOG_MESSAGE2(Logger::UI,
             "Initializing CEGUI System.", "UiSubsystem::initializeUiSubsystem");
-        mGuiResourceProvider = new OgreCEGUIResourceProvider();
+        mGuiResourceProvider = mGuiRenderer->createResourceProvider();
         CEGUI::System::setDefaultXMLParserName("XercesParser");
         mGuiSystem = new System(mGuiRenderer, mGuiResourceProvider,
             NULL, NULL, (utf8*)"cegui.config", ConfigurationManager::getSingleton().getCeguiLogFile());



From chrber at mail.berlios.de  Sat Feb 10 17:36:20 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Sat, 10 Feb 2007 17:36:20 +0100
Subject: [Dsa-hl-svn] r3035 - in rl/trunk/engine: common/include common/src
	core/include core/src
Message-ID: <200702101636.l1AGaK6m021736@sheep.berlios.de>

Author: chrber
Date: 2007-02-10 17:36:19 +0100 (Sat, 10 Feb 2007)
New Revision: 3035

Modified:
   rl/trunk/engine/common/include/ConfigFile.h
   rl/trunk/engine/common/src/ConfigFile.cpp
   rl/trunk/engine/core/include/ConfigurationManager.h
   rl/trunk/engine/core/src/ConfigurationManager.cpp
   rl/trunk/engine/core/src/CoreSubsystem.cpp
Log:
Removed obsolete functions from ConfigFile class
Avoid one #ifdef clutch in CoreSubsystem by letting the ConfigurationManager specifiy the list of plugins
Removes also one now obsolete method of ConfigurationManager


Modified: rl/trunk/engine/common/include/ConfigFile.h
===================================================================
--- rl/trunk/engine/common/include/ConfigFile.h	2007-02-10 14:31:59 UTC (rev 3034)
+++ rl/trunk/engine/common/include/ConfigFile.h	2007-02-10 16:36:19 UTC (rev 3035)
@@ -19,175 +19,72 @@
 
 #include "CommonPrerequisites.h"
 #include <OgreConfigFile.h>
-#include <OgreDataStream.h>
-#include <OgreStringConverter.h>
 
-namespace Ogre
-{
-    template<class T> class SharedPtr;
-    class DataStream;
-    typedef class SharedPtr<DataStream> DataStreamPtr;
-
-}
-
 namespace rl
 {
-
-class _RlCommonExport ConfigFile : public Ogre::ConfigFile
-{
-public:
-    ConfigFile();
-    /// save to a filename (not using resource group locations)
-    void save(const Ogre::String& filename, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
-    /// save to a filename (using resource group locations)
-    void save(const Ogre::String& filename, const Ogre::String& resourceGroup, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
-    /// save to a data stream
-    void save(std::ofstream& stream, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
-    /// save to a filename (not using resource group locations)
-    void saveDirect(const Ogre::String& filename, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
-    /// save to a filename (using resource group locations)
-    void saveToResourceSystem(const Ogre::String& filename, const Ogre::String& resourceGroup, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
-
-
-    /**
-     * Setzt die Einstellung mit Namen und Abschnitt
-     * @param name Der Name der Einstellung
-     * @param value Der Wert der Einstellung
-     * @param section Der Name des Abschnitts
-     * @author JoSch
-     * @date 05-10-2006
-    */
-    template <class T>
-    void setValue(const T &value, const Ogre::String &name,
-        const Ogre::String &section = Ogre::StringUtil::BLANK)
+    class _RlCommonExport ConfigFile : public Ogre::ConfigFile
     {
-        if (mSettings[section] == 0)
-        {
-            // Neue Sektion anlegen
-            mSettings[section] = new SettingsMultiMap();
-        }
-        Ogre::String _value = Ogre::StringConverter::toString(value);
-        mSettings[section]->insert( std::multimap<Ogre::String, Ogre::String>::value_type(name, _value));
-    }
+    public:
+        /**
+         * Default constructor
+         *
+         * Calls parent constructor
+         */
+        ConfigFile();
 
-    /**
-     * Setzt die Einstellung mit Namen und Abschnitt
-     * @param name Der Name der Einstellung
-     * @param value Der Wert der Einstellung
-     * @param section Der Name des Abschnitts
-     * @author JoSch
-     * @date 05-10-2006
-    */
-    void setValues(const Ogre::StringVector values, const Ogre::String &name,
-        const Ogre::String &section = Ogre::StringUtil::BLANK)
-    {
-        if (mSettings[section] == 0)
-        {
-            // Neue Sektion anlegen
-            mSettings[section] = new SettingsMultiMap();
-        }
-        for (Ogre::StringVector::const_iterator it = values.begin();
-            it != values.end(); it++)
-        {
-            mSettings[section]->insert( std::multimap<Ogre::String, Ogre::String>::value_type(name, *it));
-        }
-    }
+        /**
+         * Wrapper function for saveDirect
+         *
+         * @param filename Filename of the configuration file
+         * @param separators Inserted between key and value
+         * @param trimWhitespace Should leading and trailing whitespace be removed?
+         */
+        void save(const Ogre::String& filename, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
 
-    /**
-     * Holt eine Einstellung mit Namen und Abschnitt
-     * @param name Der Name der Einstellung
-     * @param section Der Name des Abschnitts
-     * @param _default Ein Standardwert, falls die Einstellung nicht
-     * gespeichert wurde
-     * @author JoSch
-     * @date 05-10-2006
-     */
-    int getValue(const int _default, const Ogre::String &name,
-        const Ogre::String &section = Ogre::StringUtil::BLANK);
+        /**
+         * Wrapper function for saveToResourceSystem
+         *
+         * @param filename Filename of the configuration file
+         * @param separators Inserted between key and value
+         * @param trimWhitespace Should leading and trailing whitespace be removed?
+         */
+        void save(const Ogre::String& filename, const Ogre::String& resourceGroup, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
 
-    /**
-     * Holt eine Einstellung mit Namen und Abschnitt
-     * @param name Der Name der Einstellung
-     * @param section Der Name des Abschnitts
-     * @param __default Ein Standardwert, falls die Einstellung nicht
-     * gespeichert wurde
-     * @author JoSch
-     * @date 05-10-2006
-     */
-    Ogre::String getValue(const Ogre::String &_default, const Ogre::String &name,
-        const Ogre::String &section = Ogre::StringUtil::BLANK);
+        /**
+         * Save to a stream
+         *
+         * The function, which actually save the contents of the ConfigFile
+         * object.
+         *
+         * @param stream Data stream
+         * @param separators Inserted between key and value
+         * @param trimWhitespace Should leading and trailing whitespace be removed?
+         */
+        void save(std::ofstream& stream, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
 
-    /**
-     * Holt alle Einstellungen mit selbem Namen und Abschnitt
-     * @param name Der Name der Einstellung
-     * @param section Der Name des Abschnitts
-     * @author JoSch
-     * @date 05-10-2006
-     */
-    Ogre::StringVector getValues(const Ogre::String &name,
-        const Ogre::String &section = Ogre::StringUtil::BLANK);
+        /**
+         * Save to a filename (not using resource group locations)
+         *
+         * Opens a filehandle to filename and calls the stream save function.
+         *
+         * @param filename Filename of the configuration file
+         * @param separators Inserted between key and value
+         * @param trimWhitespace Should leading and trailing whitespace be removed?
+         */
+        void saveDirect(const Ogre::String& filename, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
 
+        /**
+         * Save to a filename (using resource group locations)
+         *
+         * Creates the resource group if needed, opens a filehandle to filename
+         * and calls the stream save function.
+         *
+         * @param filename Filename of the configuration file
+         * @param separators Inserted between key and value
+         * @param trimWhitespace Should leading and trailing whitespace be removed?
+         */
+        void saveToResourceSystem(const Ogre::String& filename, const Ogre::String& resourceGroup, const Ogre::String& separators = "\t:=", bool trimWhitespace = true);
 
-    /**
-     * Holt eine Einstellung mit Namen und Abschnitt
-     * @param name Der Name der Einstellung
-     * @param section Der Name des Abschnitts
-     * @param __default Ein Standardwert, falls die Einstellung nicht
-     * gespeichert wurde
-     * @author JoSch
-     * @date 05-10-2006
-     */
-    Ogre::Real getValue(const Ogre::Real &_default, const Ogre::String &name,
-        const Ogre::String &section = Ogre::StringUtil::BLANK);
-
-    /**
-     * Holt eine Einstellung mit Namen und Abschnitt
-     * @param name Der Name der Einstellung
-     * @param section Der Name des Abschnitts
-     * @param __default Ein Standardwert, falls die Einstellung nicht
-     * gespeichert wurde
-     * @author JoSch
-     * @date 05-10-2006
-     */
-    bool getValue(const bool _default, const Ogre::String &name,
-        const Ogre::String &section = Ogre::StringUtil::BLANK);
-
-    /**
-     * Holt eine Einstellung mit Namen und Abschnitt
-     * @param name Der Name der Einstellung
-     * @param section Der Name des Abschnitts
-     * @param __default Ein Standardwert, falls die Einstellung nicht
-     * gespeichert wurde
-     * @author JoSch
-     * @date 05-10-2006
-     */
-    long int getValue(const long int _default, const Ogre::String &name,
-        const Ogre::String &section = Ogre::StringUtil::BLANK);
-
-    /**
-     * Holt eine Einstellung mit Namen und Abschnitt
-     * @param name Der Name der Einstellung
-     * @param section Der Name des Abschnitts
-     * @param __default Ein Standardwert, falls die Einstellung nicht
-     * gespeichert wurde
-     * @author JoSch
-     * @date 05-10-2006
-     */
-    unsigned int getValue(const unsigned int _default, const Ogre::String &name,
-        const Ogre::String &section = Ogre::StringUtil::BLANK);
-
-    /**
-     * Holt eine Einstellung mit Namen und Abschnitt
-     * @param name Der Name der Einstellung
-     * @param section Der Name des Abschnitts
-     * @param __default Ein Standardwert, falls die Einstellung nicht
-     * gespeichert wurde
-     * @author JoSch
-     * @date 05-10-2006
-     */
-    unsigned long int getValue(const unsigned long int _default, const Ogre::String &name,
-        const Ogre::String &section = Ogre::StringUtil::BLANK);
-
         /**
          * Adds a section to the config file and adds a list of key-value pairs
          *
@@ -195,20 +92,7 @@
          * @param settings The list of key-value pairs
          */
         void addSection(const Ogre::String& section, const Ogre::NameValuePairList& settings);
-};
-
-template<> inline
-void ConfigFile::setValue<Ogre::String>(const Ogre::String &value, const Ogre::String &name,
-        const Ogre::String &section)
-{
-        if (mSettings[section] == 0)
-    {
-        // Neue Sektion anlegen
-        mSettings[section] = new SettingsMultiMap();
-    }
-    mSettings[section]->insert( std::multimap<Ogre::String, Ogre::String>::value_type(name, value));
+    };
 }
 
-}
-
 #endif /*CONFIGFILE_H_*/

Modified: rl/trunk/engine/common/src/ConfigFile.cpp
===================================================================
--- rl/trunk/engine/common/src/ConfigFile.cpp	2007-02-10 14:31:59 UTC (rev 3034)
+++ rl/trunk/engine/common/src/ConfigFile.cpp	2007-02-10 16:36:19 UTC (rev 3035)
@@ -17,174 +17,81 @@
 #include "ConfigFile.h"
 #include "Exception.h"
 
-#include <OgreString.h>
-#include <OgreDataStream.h>
-
 using namespace Ogre;
 using namespace std;
 
 namespace rl
 {
 
-ConfigFile::ConfigFile()
-    : Ogre::ConfigFile()
-{
-}
+    ConfigFile::ConfigFile()
+        : Ogre::ConfigFile()
+    {
+    }
 
-//-----------------------------------------------------------------------
-void ConfigFile::save(const String& filename, const String& separators, bool trimWhitespace)
-{
-    saveDirect(filename, separators, trimWhitespace);
-}
-//-----------------------------------------------------------------------
-void ConfigFile::save(const String& filename, const String& resourceGroup,
-    const String& separators, bool trimWhitespace)
-{
-    saveToResourceSystem(filename, resourceGroup, separators, trimWhitespace);
-}
-//-----------------------------------------------------------------------
-void ConfigFile::saveDirect(const String& filename, const String& separators,
-    bool trimWhitespace)
-{
-    /* Open the configuration file */
-    ofstream fp;
-    fp.open(filename.c_str());
-    if(!fp)
+    void ConfigFile::save(const String& filename, const String& separators, bool trimWhitespace)
     {
-        Throw(FileNotFoundException, "'" + filename + "' file not found!");
+        saveDirect(filename, separators, trimWhitespace);
     }
 
-    save(fp, separators, trimWhitespace);
-
-}
-//-----------------------------------------------------------------------
-void ConfigFile::saveToResourceSystem(const String& filename,
-    const String& resourceGroup, const String& separators, bool trimWhitespace)
-{
-    ///@todo ResourceGroup zum Dateiname erstellen.
-    ofstream fp;
-    fp.open(filename.c_str());
-    if(!fp)
+    void ConfigFile::save(const String& filename, const String& resourceGroup, const String& separators, bool trimWhitespace)
     {
-        Throw(FileNotFoundException, "'" + filename + "' file not found!");
+        saveToResourceSystem(filename, resourceGroup, separators, trimWhitespace);
     }
 
-    save(fp, separators, trimWhitespace);
-}
-//-----------------------------------------------------------------------
-void ConfigFile::save(ofstream& stream, const String& separators,
-    bool trimWhitespace)
-{
-    SettingsBySection::const_iterator section;
-    for(section = mSettings.begin(); section != mSettings.end(); section++)
+    void ConfigFile::saveDirect(const String& filename, const String& separators, bool trimWhitespace)
     {
-        if (section->first != StringUtil::BLANK)
+        /* Open the configuration file */
+        ofstream fp;
+        fp.open(filename.c_str());
+        if(!fp)
         {
-            stream << "[" << section->first << "]" << endl;
-        } else {
-            /// Keine Sektion
+            Throw(FileNotFoundException, "'" + filename + "' file not found!");
         }
-        SettingsMultiMap::const_iterator setting;
-        SettingsMultiMap *settings = section->second;
-        for(setting = settings->begin(); setting != settings->end(); setting++)
-        {
-            stream << setting->first << "=" << setting->second << endl;
-        }
 
-        // Insert a linebreak
-        stream << endl;
+        save(fp, separators, trimWhitespace);
     }
-}
 
-int ConfigFile::getValue(const int _default, const Ogre::String &name,
-        const Ogre::String &section)
-{
-    Ogre::String v = getSetting(name, section);
-    if (v == Ogre::StringUtil::BLANK)
+    void ConfigFile::saveToResourceSystem(const String& filename, const String& resourceGroup, const String& separators, bool trimWhitespace)
     {
-        return _default;
-    } else {
-        return Ogre::StringConverter::parseInt(v);
-    }
-}
+        ///@todo ResourceGroup zum Dateiname erstellen.
+        ofstream fp;
+        fp.open(filename.c_str());
+        if(!fp)
+        {
+            Throw(FileNotFoundException, "'" + filename + "' file not found!");
+        }
 
-String ConfigFile::getValue(const String &_default, const Ogre::String &name,
-        const Ogre::String &section)
-{
-    return getSetting(name, section);
-}
-
-StringVector ConfigFile::getValues(const Ogre::String &name,
-        const Ogre::String &section)
-{
-    return getMultiSetting(name, section);
-}
-
-Real ConfigFile::getValue(const Real &_default, const Ogre::String &name,
-        const Ogre::String &section)
-{
-    Ogre::String v = getSetting(name, section);
-    if (v == Ogre::StringUtil::BLANK)
-    {
-        return _default;
-    } else {
-        return Ogre::StringConverter::parseReal(v);
+        save(fp, separators, trimWhitespace);
     }
-}
 
-bool ConfigFile::getValue(const bool _default, const Ogre::String &name,
-        const Ogre::String &section)
-{
-    Ogre::String v = getSetting(name, section);
-    if (v == Ogre::StringUtil::BLANK)
+    void ConfigFile::save(ofstream& stream, const String& separators, bool trimWhitespace)
     {
-        return _default;
-    } else {
-        return Ogre::StringConverter::parseBool(v);
-    }
-}
+        SettingsBySection::const_iterator section;
+        for(section = mSettings.begin(); section != mSettings.end(); section++)
+        {
+            if (section->first != StringUtil::BLANK)
+            {
+                stream << "[" << section->first << "]" << endl;
+            } else {
+                /// Keine Sektion
+            }
+            SettingsMultiMap::const_iterator setting;
+            SettingsMultiMap *settings = section->second;
+            for(setting = settings->begin(); setting != settings->end(); setting++)
+            {
+                stream << setting->first << "=" << setting->second << endl;
+            }
 
-long int ConfigFile::getValue(const long int _default, const Ogre::String &name,
-        const Ogre::String &section)
-{
-    Ogre::String v = getSetting(name, section);
-    if (v == Ogre::StringUtil::BLANK)
-    {
-        return _default;
-    } else {
-        return Ogre::StringConverter::parseLong(v);
+            // Insert a linebreak
+            stream << endl;
+        }
     }
-}
 
-unsigned int ConfigFile::getValue(const unsigned int _default, const Ogre::String &name,
-        const Ogre::String &section)
-{
-    Ogre::String v = getSetting(name, section);
-    if (v == Ogre::StringUtil::BLANK)
-    {
-        return _default;
-    } else {
-        return Ogre::StringConverter::parseUnsignedInt(v);
-    }
-}
-
-unsigned long int ConfigFile::getValue(const unsigned long int _default, const Ogre::String &name,
-        const Ogre::String &section)
-{
-    Ogre::String v = getSetting(name, section);
-    if (v == Ogre::StringUtil::BLANK)
-    {
-        return _default;
-    } else {
-        return Ogre::StringConverter::parseUnsignedLong(v);
-    }
-}
-
     void ConfigFile::addSection(const Ogre::String& section, const Ogre::NameValuePairList& settings)
     {
         // Create new section
         mSettings[section] = new SettingsMultiMap();
-        // Insert values from the settings map
+        // Insert values from the settings list
         mSettings[section]->insert(settings.begin(), settings.end());
     }
 }

Modified: rl/trunk/engine/core/include/ConfigurationManager.h
===================================================================
--- rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-10 14:31:59 UTC (rev 3034)
+++ rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-10 16:36:19 UTC (rev 3035)
@@ -98,14 +98,6 @@
             Ogre::String getModulesCfgFile() const;
 
             /**
-             * Returns the filename of the configuration file for the OS
-             * specific plugins
-             *
-             * @return filename of the plugin's configuration file
-             */
-            Ogre::String getPluginCfgFile() const;
-
-            /**
              * Returns a list of paths, were Rastullah configuration files
              * reside
              *
@@ -132,13 +124,6 @@
             Ogre::String getRastullahLogDirectory() const;
 
             /**
-             * Returns the directory where OGRE stores its plugins
-             *
-             * @return directory where OGRE plugins are stored
-             */
-            Ogre::String getOgrePluginDirectory() const;
-
-            /**
              * Adds a key-value pair to the list specified by section
              *
              * If the key already exists in the list, its value will be updated
@@ -200,6 +185,13 @@
             Ogre::NameValuePairList getSoundSettings() const;
 
             /**
+             * Returns a list of Ogre plugins specific to the OS
+             *
+             * @return vector of plugin names
+             */
+            Ogre::StringVector getPluginList() const;
+
+            /**
              * Returns the filename of the current keymap file used by
              * Rastullah
              *
@@ -302,6 +294,7 @@
             Ogre::NameValuePairList mGraphicSettings; //!< Graphic settings for the OGRE Renderer
             Ogre::NameValuePairList mSoundSettings;   //!< Sound settings for the Rastullah soundsystem
             Ogre::NameValuePairList mInputSettings;   //!< Input settings for the Rastullah inputsystem
+            Ogre::StringVector mPluginList;           //!< List of OGRE Plugins, which will be loaded by CoreSubsystem
     };
 }
 

Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-10 14:31:59 UTC (rev 3034)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-10 16:36:19 UTC (rev 3035)
@@ -113,11 +113,6 @@
         return mRastullahLogDirectory;
     }
 
-    Ogre::String ConfigurationManager::getOgrePluginDirectory() const
-    {
-        return mOgrePluginDirectory;
-    }
-
     Ogre::NameValuePairList ConfigurationManager::getGraphicSettings() const
     {
         return mGraphicSettings;
@@ -133,6 +128,11 @@
         return mInputSettings;
     }
 
+    Ogre::StringVector ConfigurationManager::getPluginList() const
+    {
+        return mPluginList;
+    }
+
     void ConfigurationManager::loadConfig()
     {
         // On Linux, we create the .rastullah directory
@@ -284,6 +284,24 @@
             mOgrePluginDirectory = ".";
 #           endif
         }
+
+        // Plugin list for OGRE specific to operating system
+#       if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
+        Ogre::String dirSeparator = "\\";
+        mPluginList.push_back(mOgrePluginDirectory + dirSeparator + "RenderSystem_Direct3D9");
+#       else
+        Ogre::String dirSeparator = "/";
+#       endif
+        mPluginList.push_back(mOgrePluginDirectory + dirSeparator + "RenderSystem_GL");
+        mPluginList.push_back(mOgrePluginDirectory + dirSeparator + "Plugin_ParticleFX");
+        mPluginList.push_back(mOgrePluginDirectory + dirSeparator + "Plugin_OctreeSceneManager");
+
+        Ogre::StringVector test = getPluginList();
+
+        for (Ogre::StringVector::const_iterator it = test.begin(); it < test.end(); it++)
+        {
+            std::cout << std::endl << *it << std::endl;
+        }
     }
 
     void ConfigurationManager::saveConfig()

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-10 14:31:59 UTC (rev 3034)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-10 16:36:19 UTC (rev 3035)
@@ -156,18 +156,13 @@
         mOgreRoot = new Root("", "", ConfigurationManager::getSingleton().getOgreLogFile());
 
         // Load Ogre plugins
-        String PluginDir = ConfigurationManager::getSingleton().getOgrePluginDirectory();
-#       if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
-        mOgreRoot->loadPlugin(PluginDir + "\\RenderSystem_Direct3D9");
-        mOgreRoot->loadPlugin(PluginDir + "\\RenderSystem_GL");
-        mOgreRoot->loadPlugin(PluginDir + "\\Plugin_ParticleFX");
-        mOgreRoot->loadPlugin(PluginDir + "\\Plugin_OctreeSceneManager");
-#       else
-        mOgreRoot->loadPlugin(PluginDir + "/RenderSystem_GL");
-        mOgreRoot->loadPlugin(PluginDir + "/Plugin_ParticleFX");
-        mOgreRoot->loadPlugin(PluginDir + "/Plugin_OctreeSceneManager");
-#       endif
+        Ogre::StringVector pluginList = ConfigurationManager::getSingleton().getPluginList();
 
+        for (Ogre::StringVector::const_iterator it = pluginList.begin(); it < pluginList.end(); it++)
+        {
+            mOgreRoot->loadPlugin(*it);
+        }
+
         // Find out, what Renderer plugins are available
         RenderSystemList* rsl = mOgreRoot->getAvailableRenderers();
         RenderSystemList::iterator it;



From chrber at mail.berlios.de  Sat Feb 10 19:04:40 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Sat, 10 Feb 2007 19:04:40 +0100
Subject: [Dsa-hl-svn] r3036 - modules/config
Message-ID: <200702101804.l1AI4evC014350@sheep.berlios.de>

Author: chrber
Date: 2007-02-10 19:04:37 +0100 (Sat, 10 Feb 2007)
New Revision: 3036

Removed:
   modules/config/plugins-linux.cfg
   modules/config/plugins-mac.cfg
   modules/config/plugins-win.cfg
   modules/config/rastullah_input.cfg
   modules/config/rastullah_system.cfg
   modules/config/sound.cfg
Log:
Removed obsolete configuration files


Deleted: modules/config/plugins-linux.cfg
===================================================================
--- modules/config/plugins-linux.cfg	2007-02-10 16:36:19 UTC (rev 3035)
+++ modules/config/plugins-linux.cfg	2007-02-10 18:04:37 UTC (rev 3036)
@@ -1,10 +0,0 @@
-# Defines plugins to load
-
-# Define plugin folder
-PluginFolder=/usr/local/lib/OGRE
-
-# Define plugins
-Plugin=RenderSystem_GL
-Plugin=Plugin_ParticleFX
-Plugin=Plugin_OctreeSceneManager
-#Plugin=Plugin_TheoraVideoSystem

Deleted: modules/config/plugins-mac.cfg
===================================================================
--- modules/config/plugins-mac.cfg	2007-02-10 16:36:19 UTC (rev 3035)
+++ modules/config/plugins-mac.cfg	2007-02-10 18:04:37 UTC (rev 3036)
@@ -1,13 +0,0 @@
-# Defines plugins to load
-
-# Define plugin folder
-PluginFolder=.
-
-# Define plugins
-Plugin=RenderSystem_GL
-Plugin=Plugin_FileSystem
-Plugin=Plugin_ParticleFX
-Plugin=Plugin_OctreeSceneManager
-#Plugin=Plugin_TheoraVideoSystem
-
-

Deleted: modules/config/plugins-win.cfg
===================================================================
--- modules/config/plugins-win.cfg	2007-02-10 16:36:19 UTC (rev 3035)
+++ modules/config/plugins-win.cfg	2007-02-10 18:04:37 UTC (rev 3036)
@@ -1,13 +0,0 @@
-# Defines plugins to load
-
-# Define plugin folder
-PluginFolder=.
-
-# Define plugins
-Plugin=RenderSystem_Direct3D9
-Plugin=RenderSystem_GL
-#Plugin=Plugin_FileSystem
-Plugin=Plugin_ParticleFX
-Plugin=Plugin_OctreeSceneManager
-#Plugin=Plugin_TheoraVideoSystem
-#Plugin=Plugin_CgProgramManager

Deleted: modules/config/rastullah_input.cfg
===================================================================
--- modules/config/rastullah_input.cfg	2007-02-10 16:36:19 UTC (rev 3035)
+++ modules/config/rastullah_input.cfg	2007-02-10 18:04:37 UTC (rev 3036)
@@ -1,49 +0,0 @@
-[Movement]
-Q = turn_left
-E = turn_right
-W = forward
-S = backward
-A = left
-D = right
-Umschalt links = run
-< | > = run_lock
-Strg links = sneak
-Leertaste = jump
-
-[Mouse off combat]
-
-[Global keys]
-Ctrl+X = quitgame
-Escape = closecurrentwindow
-Tabulator = toggleconsole
-F2 = toggledebugwindow
-F3 = togglegamelogwindow
-F = toggleviewmode
-0 (Nummernblock) = resetcamera
-P = makescreenshot
-Ctrl+P = makescreenshot
-L = togglecollisiondebug
-Ctrl+L = togglecollisiondebug
-Ctrl+O = toggledebugvisualisation
-V = togglevanitymode
-
-R = usecurrentobjectdefaultaction													
-I = toggleinventorywindow
-J = showjournalwindow
-C = showcharactersheet
-O = togglecharacterstatewindow
-F10 = toggleingameglobalmenu
-M = togglecharactercontroller
-Ctrl+M = shownextdebugwindowpage
-
-[Mouse in combat]
-
-[Keys off combat]
-#R = usecurrentobjectdefaultaction													
-U = showobjectactions
-#I = toggleinventorywindow
-#J = showjournalwindow
-#C = showcharactersheet
-#O = togglecharacterstatewindow
-
-[Keys in combat]

Deleted: modules/config/rastullah_system.cfg
===================================================================
--- modules/config/rastullah_system.cfg	2007-02-10 16:36:19 UTC (rev 3035)
+++ modules/config/rastullah_system.cfg	2007-02-10 18:04:37 UTC (rev 3036)
@@ -1,38 +0,0 @@
-	# Schaltet die Benutzung von Static Geometry ein, 
-# dies erm?glicht eine optimierte Darstellung der Szenen
-# use_static_geometry = [yes|no|auto]
-# Bei auto wird sich nach dem Vorhandensein von 
-# Hardware VertexBuffern auf der Grafikkarte gerichtet
-# Default ist auto
-use_static_geometry = auto
-
-# 1 - No Anisotropy used
-max_anisotropy = 1
-
-# Setzt den Detailgrad von rastullah.log, ogre.log und cegui.log
-# log_level = [1|2|3|4|5]
-# 1 - Alles wird geloggt             (LL_DEBUG)
-# 2 -                                (LL_MESSAGE)
-# 3 - Warnungen + alle Fehler        (LL_WARNING)
-# 4 - Fehler und kritische Fehler    (LL_ERROR)
-# 5 - Nur kritische Fehler           (LL_CRITICAL)
-log_level = 2
-
-# Mausaufl?sung
-# 1 sehr langsam - 9 sehr schnell
-# Default ist 4
-mouse_sensitivity = 4
-
-# Maus invertieren hoch/runter
-# wie in alten Spielen
-# 0 false, 1 true
-# Default 0
-mouse_invert = 0
-
-
-# Untertitel Geschwindigkeit
-# subtitle_speed 
-# 0 - Untertiteldauer richtet sich nach Sounddauer, ist kein Sound vorhanden, wird subtitle_speed 1 genommen
-# 1.0 - normale Untertitelgeschwindigkeit .. 1.5 anderthalbfache Geschwindigkeit, usw. usf.
-subtitle_speed = 0.0 
-

Deleted: modules/config/sound.cfg
===================================================================
--- modules/config/sound.cfg	2007-02-10 16:36:19 UTC (rev 3035)
+++ modules/config/sound.cfg	2007-02-10 18:04:37 UTC (rev 3036)
@@ -1,7 +0,0 @@
-[Drivers]
-Driver=RlFmod4Driver
-[General]
-ActiveDriver=FMOD4
-DefaultMusicVolume=0.4
-DefaultSoundVolume=0.9
-MasterVolume=1



From chrber at mail.berlios.de  Sun Feb 11 18:29:14 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Sun, 11 Feb 2007 18:29:14 +0100
Subject: [Dsa-hl-svn] r3037 - in rl/trunk/engine/core: include src
Message-ID: <200702111729.l1BHTEiE031497@sheep.berlios.de>

Author: chrber
Date: 2007-02-11 18:29:13 +0100 (Sun, 11 Feb 2007)
New Revision: 3037

Modified:
   rl/trunk/engine/core/include/ConfigurationManager.h
   rl/trunk/engine/core/src/ConfigurationManager.cpp
   rl/trunk/engine/core/src/CoreSubsystem.cpp
Log:
Moved loading of module configuration file to ConfigurationManager


Modified: rl/trunk/engine/core/include/ConfigurationManager.h
===================================================================
--- rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-10 18:04:37 UTC (rev 3036)
+++ rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-11 17:29:13 UTC (rev 3037)
@@ -91,13 +91,6 @@
             Ogre::String getCeguiLogFile() const;
 
             /**
-             * Returns the filename of the configuration file for the modules
-             *
-             * @return filename of module's configuration file
-             */
-            Ogre::String getModulesCfgFile() const;
-
-            /**
              * Returns a list of paths, were Rastullah configuration files
              * reside
              *
@@ -132,7 +125,7 @@
              * @param key The key of the key-value pair
              * @param value The value of the key-value pair
              */
-            void addSetting(ConfigurationSection section, Ogre::String key, Ogre::String value);
+            void addSetting(const ConfigurationSection& section, const Ogre::String& key, const Ogre::String& value);
 
             /**
              * Returns the string value for a specific key in a specific section
@@ -141,7 +134,7 @@
              * @param key The key, for which a value will be returned
              * @return string value for the specific key in the specific section
              */
-            Ogre::String getStringSetting(ConfigurationSection section, Ogre::String key);
+            Ogre::String getStringSetting(const ConfigurationSection& section, const Ogre::String& key) const;
 
             /**
              * Returns the int value for a specific key in a specific section
@@ -150,7 +143,7 @@
              * @param key The key, for which a value will be returned
              * @return int value for the specific key in the specific section
              */
-            int getIntSetting(ConfigurationSection section, Ogre::String key);
+            int getIntSetting(const ConfigurationSection& section, const Ogre::String& key) const;
 
             /**
              * Returns the boolean value for a specific key in a specific section
@@ -159,7 +152,7 @@
              * @param key The key, for which a value will be returned
              * @return boolean value for the specific key in the specific section
              */
-            bool getBoolSetting(ConfigurationSection section, Ogre::String key);
+            bool getBoolSetting(const ConfigurationSection& section, const Ogre::String& key) const;
 
             /**
              * Returns the real value for a specific key in a specific section
@@ -168,7 +161,7 @@
              * @param key The key, for which a value will be returned
              * @return real value for the specific key in the specific section
              */
-            Ogre::Real getRealSetting(ConfigurationSection section, Ogre::String key);
+            Ogre::Real getRealSetting(const ConfigurationSection& section, const Ogre::String& key) const;
 
             /**
              * Returns a pointer to the graphical settings for the OGRE renderer
@@ -185,6 +178,13 @@
             Ogre::NameValuePairList getSoundSettings() const;
 
             /**
+             * Returns the input settings for the CommandMapper
+             *
+             * @return key-value list of input settings
+             */
+            Ogre::NameValuePairList getInputSettings() const;
+
+            /**
              * Returns a list of Ogre plugins specific to the OS
              *
              * @return vector of plugin names
@@ -192,6 +192,13 @@
             Ogre::StringVector getPluginList() const;
 
             /**
+             * Returns the list of Rastullah game modules
+             *
+             * @return vector of module names
+             */
+            Ogre::StringVector getModuleList() const;
+
+            /**
              * Returns the filename of the current keymap file used by
              * Rastullah
              *
@@ -200,19 +207,12 @@
             Ogre::String getKeymap() const;
 
             /**
-             * Returns the input settings for the CommandMapper
-             *
-             * @return key-value list of input settings
-             */
-            Ogre::NameValuePairList getInputSettings() const;
-
-            /**
              * Returns the log level specifying how verbose the created
              * logfiles are
              *
              * @return verbosity level of logfiles
              */
-            Logger::LogLevel getLogLevel();
+            Logger::LogLevel getLogLevel() const;
 
             Ogre::String getEngineVersionString() const;
             Ogre::String getEngineVersionName() const;
@@ -236,7 +236,7 @@
             /**
              * Saves a configuration file in OS specific directory
              */
-            void saveConfig();
+            void saveConfig() const;
 
         private:
             /**
@@ -279,7 +279,7 @@
              * @param key The key, for which a value will be returned
              * @return value if key exits, otherwise NULL
              */
-            Ogre::String findSetting(ConfigurationSection section, Ogre::String key) const;
+            Ogre::String findSetting(const ConfigurationSection& section, const Ogre::String& key) const;
 
             Ogre::String mRastullahCfgFile;           //!< Filename of the Rastullah configuration file
             Ogre::String mOgreLogFile;                //!< Filename of the logfile written by OGRE
@@ -294,6 +294,7 @@
             Ogre::NameValuePairList mGraphicSettings; //!< Graphic settings for the OGRE Renderer
             Ogre::NameValuePairList mSoundSettings;   //!< Sound settings for the Rastullah soundsystem
             Ogre::NameValuePairList mInputSettings;   //!< Input settings for the Rastullah inputsystem
+            Ogre::StringVector mModuleList;           //!< List of Rastullah game modules
             Ogre::StringVector mPluginList;           //!< List of OGRE Plugins, which will be loaded by CoreSubsystem
     };
 }

Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-10 18:04:37 UTC (rev 3036)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-11 17:29:13 UTC (rev 3037)
@@ -98,11 +98,6 @@
         return mRastullahLogDirectory + "/" + mCeguiLogFile;
     }
 
-    Ogre::String ConfigurationManager::getModulesCfgFile() const
-    {
-        return mModulesRootDirectory  + "/" + mModulesCfgFile;
-    }
-
     Ogre::String ConfigurationManager::getModulesRootDirectory() const
     {
         return mModulesRootDirectory;
@@ -133,6 +128,11 @@
         return mPluginList;
     }
 
+    Ogre::StringVector ConfigurationManager::getModuleList() const
+    {
+        return mModuleList;
+    }
+
     void ConfigurationManager::loadConfig()
     {
         // On Linux, we create the .rastullah directory
@@ -296,15 +296,25 @@
         mPluginList.push_back(mOgrePluginDirectory + dirSeparator + "Plugin_ParticleFX");
         mPluginList.push_back(mOgrePluginDirectory + dirSeparator + "Plugin_OctreeSceneManager");
 
-        Ogre::StringVector test = getPluginList();
+        // Load the module list
+        ConfigFile* configfile = new ConfigFile();
+        configfile->load(fs::path(mModulesRootDirectory + "/" + mModulesCfgFile).native_directory_string());
 
-        for (Ogre::StringVector::const_iterator it = test.begin(); it < test.end(); it++)
+        ConfigFile::SettingsIterator it = configfile->getSettingsIterator();
+        for (ConfigFile::SettingsIterator it = configfile->getSettingsIterator();
+             it.hasMoreElements(); it.moveNext())
         {
-            std::cout << std::endl << *it << std::endl;
+            // If key is module, we add value to our module list
+            if (it.peekNextKey() == "module")
+            {
+                mModuleList.push_back(it.peekNextValue());
+            }
         }
+
+        delete configfile;
     }
 
-    void ConfigurationManager::saveConfig()
+    void ConfigurationManager::saveConfig() const
     {
         ConfigFile* cfgfile = new ConfigFile();
 
@@ -336,7 +346,7 @@
         delete cfgfile;
     }
 
-    Logger::LogLevel ConfigurationManager::getLogLevel()
+    Logger::LogLevel ConfigurationManager::getLogLevel() const
     {
         return static_cast<Logger::LogLevel>(getIntSetting(ConfigurationManager::CS_GENERAL,
             "Log Level"));
@@ -354,33 +364,36 @@
         return version;
     }
 
-    Ogre::String ConfigurationManager::getStringSetting(ConfigurationSection section,
-        Ogre::String key)
+    Ogre::String ConfigurationManager::getStringSetting(const ConfigurationSection& section,
+        const Ogre::String& key) const
     {
         // Get the value we are looking for
         return findSetting(section, key);
     }
 
-    int ConfigurationManager::getIntSetting(ConfigurationSection section, Ogre::String key)
+    int ConfigurationManager::getIntSetting(const ConfigurationSection& section,
+        const Ogre::String& key) const
     {
         // Get the value we are looking for
         return Ogre::StringConverter::parseInt(findSetting(section, key));
     }
 
-    bool ConfigurationManager::getBoolSetting(ConfigurationSection section, Ogre::String key)
+    bool ConfigurationManager::getBoolSetting(const ConfigurationSection& section,
+        const Ogre::String& key) const
     {
         // Get the value we are looking for
         return Ogre::StringConverter::parseBool(findSetting(section, key));
     }
 
-    Ogre::Real ConfigurationManager::getRealSetting(ConfigurationSection section, Ogre::String key)
+    Ogre::Real ConfigurationManager::getRealSetting(const ConfigurationSection& section,
+        const Ogre::String& key) const
     {
         // Get the value we are looking for
         return Ogre::StringConverter::parseReal(findSetting(section, key));
     }
 
-    Ogre::String ConfigurationManager::findSetting(ConfigurationSection section,
-        Ogre::String key) const
+    Ogre::String ConfigurationManager::findSetting(const ConfigurationSection& section,
+        const Ogre::String& key) const
     {
         Ogre::NameValuePairList::const_iterator it;
         const Ogre::NameValuePairList* searchList;
@@ -417,8 +430,8 @@
         }
     }
 
-    void ConfigurationManager::addSetting(ConfigurationSection section, Ogre::String key,
-        Ogre::String value)
+    void ConfigurationManager::addSetting(const ConfigurationSection& section,
+        const Ogre::String& key, const Ogre::String& value)
     {
         Ogre::NameValuePairList::iterator it;
         Ogre::NameValuePairList* addList;

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-10 18:04:37 UTC (rev 3036)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-11 17:29:13 UTC (rev 3037)
@@ -269,40 +269,29 @@
             "FileSystem",
             ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);
 
-        // Laden mittels eines Configfiles
-        String cfgFilePath = mConfigurationManager->getModulesCfgFile();
-        ConfigFile cf;
-        cf.load(boost::filesystem::path(cfgFilePath).native_directory_string());
 
-        // Durchgehen der einzelnen Settings
-        ConfigFile::SettingsIterator i = cf.getSettingsIterator();
-        String key, value;
-        while (i.hasMoreElements())
+        // Initialise the modules
+        Ogre::StringVector modulesList = ConfigurationManager::getSingleton().getModuleList();
+
+        for (int i = 0; i < modulesList.size(); i++)
         {
-            key = i.peekNextKey();
-            value = i.getNext();
+            mRubyInterpreter->executeFile(ContentModule::getInitFile(modulesList[i]));
 
-            if (key.compare("module") == 0)
-            {
-                mRubyInterpreter->executeFile(ContentModule::getInitFile(value));
+            ContentModule* module = getModule(modulesList[i]);
 
-                ContentModule* module = getModule(value);
-
-                if (module == NULL)
-                {
-                    Throw(
-                        rl::RuntimeException,
-                        ContentModule::getInitFile(value) + " did not register module '"+value+"'");
-                }
-                //else
-                //{
-                //    if (module->isCommon())
-                //    {
-                //        module->initializeTextures();
-                //        module->initialize();
-                //    }
-                //}
+            if (module == NULL)
+            {
+                Throw(rl::RuntimeException,
+                      ContentModule::getInitFile(modulesList[i]) + " did not register module '" + modulesList[i] + "'");
             }
+            //else
+            //{
+            //    if (module->isCommon())
+            //    {
+            //        module->initializeTextures();
+            //        module->initialize();
+            //    }
+            //}
         }
     }
 



From chrber at mail.berlios.de  Sun Feb 11 20:10:24 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Sun, 11 Feb 2007 20:10:24 +0100
Subject: [Dsa-hl-svn] r3038 - rl/trunk/engine/core/src
Message-ID: <200702111910.l1BJAOZq014722@sheep.berlios.de>

Author: chrber
Date: 2007-02-11 20:10:24 +0100 (Sun, 11 Feb 2007)
New Revision: 3038

Modified:
   rl/trunk/engine/core/src/ConfigurationManager.cpp
Log:
Corrected error, which resulted in a wrong section name for path values
Added check to set path variables only if the find operation returns a non empty string


Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-11 17:29:13 UTC (rev 3037)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-11 19:10:24 UTC (rev 3038)
@@ -178,10 +178,21 @@
                 }
 
                 // Set log, modules and OGRE plugin directory
-                mRastullahLogDirectory = configfile->getSetting("LogDirectory", "Paths");
-                mModulesRootDirectory = configfile->getSetting("ModulesDirectory", "Paths");
-                mOgrePluginDirectory = configfile->getSetting("OgrePluginDirectory", "Paths");
+                if (!configfile->getSetting("LogDirectory", "Paths").empty())
+                {
+                    mRastullahLogDirectory = configfile->getSetting("LogDirectory", "Paths");
+                }
 
+                if (!configfile->getSetting("ModulesDirectory", "Paths").empty())
+                {
+                    mModulesRootDirectory = configfile->getSetting("ModulesDirectory", "Paths");
+                }
+
+                if (!configfile->getSetting("OgrePluginDirectory", "Paths").empty())
+                {
+                    mOgrePluginDirectory = configfile->getSetting("OgrePluginDirectory", "Paths");
+                }
+
                 // Get general settings
                 try
                 {
@@ -327,7 +338,7 @@
         // Add General settings
         cfgfile->addSection("General", mGeneralSettings);
         // Add Path settings
-        cfgfile->addSection("Path", *PathSettings);
+        cfgfile->addSection("Paths", *PathSettings);
         // Add Video settings
         cfgfile->addSection("Video", mGraphicSettings);
         // Add Sound settings



From chrber at mail.berlios.de  Mon Feb 12 20:52:38 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Mon, 12 Feb 2007 20:52:38 +0100
Subject: [Dsa-hl-svn] r3039 - in rl/trunk: . engine/common/include
	engine/common/src engine/core/include engine/script/src
	engine/script/swig engine/startup/src engine/ui/src m4
	plugins/fmod4driver/src plugins/openaldriver/src
Message-ID: <200702121952.l1CJqcVN017853@sheep.berlios.de>

Author: chrber
Date: 2007-02-12 20:52:36 +0100 (Mon, 12 Feb 2007)
New Revision: 3039

Removed:
   rl/trunk/engine/common/include/PauseObject.h
   rl/trunk/engine/common/src/PauseObject.cpp
   rl/trunk/rastullah.conf.in
Modified:
   rl/trunk/Makefile.am
   rl/trunk/configure.in
   rl/trunk/engine/common/include/Makefile.am
   rl/trunk/engine/common/src/Makefile.am
   rl/trunk/engine/core/include/GameLoop.h
   rl/trunk/engine/core/include/SoundManager.h
   rl/trunk/engine/script/src/Makefile.am
   rl/trunk/engine/script/swig/RlCommon.head.inc
   rl/trunk/engine/script/swig/RlCommon.inc
   rl/trunk/engine/startup/src/Makefile.am
   rl/trunk/engine/ui/src/InputManager.cpp
   rl/trunk/engine/ui/src/Makefile.am
   rl/trunk/m4/boost.m4
   rl/trunk/plugins/fmod4driver/src/Makefile.am
   rl/trunk/plugins/openaldriver/src/Makefile.am
Log:
Replaced linker -l parameters with path to la files (avoids linker failures when libRl*.so files are installed in an ldconfig path)
configure now decides, if a sound driver should be compiled (can be overwritten via --enable-/--disable-driver)
Removed boost::thread references from two source files


Modified: rl/trunk/Makefile.am
===================================================================
--- rl/trunk/Makefile.am	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/Makefile.am	2007-02-12 19:52:36 UTC (rev 3039)
@@ -5,18 +5,3 @@
 
 doc:
 	cd docs; ${MAKE} doc
-	
-install-data-local:
-	@if [ "$(enable_global_config)" == "yes" ]; then \
-		install -d /etc/rastullah; \
-		install -m 644 rastullah.conf /etc/rastullah; \
-	else \
-		echo Nothing to install here; \
-	fi 
-
-uninstall-local:
-	@if [ "$(enable_global_config)" == "yes" ]; then \
-		rm -rf /etc/rastullah; \
-	else \
-		echo Nothing to uninstall here; \
-	fi 

Modified: rl/trunk/configure.in
===================================================================
--- rl/trunk/configure.in	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/configure.in	2007-02-12 19:52:36 UTC (rev 3039)
@@ -1,6 +1,6 @@
 AC_PREREQ(2.50)
 
-AC_INIT(RL, 0.11.0)
+AC_INIT(RL, 0.2.0)
 AC_CANONICAL_TARGET
 AM_INIT_AUTOMAKE([1.6.1 foreign no-installinfo no-installman subdir-objects])
 AC_CONFIG_HEADER(engine/common/include/config.h)
@@ -44,16 +44,6 @@
     LDFLAGS="$LDFLAGS -pg -g"
 fi
 
-# **** Installation of global config file 
-AC_ARG_ENABLE(global-config,
-		AS_HELP_STRING([--enable-global-config], [install global config file [default=no]]),,
-		[enable_global_config=yes])
-if test "$enable_global_config" = "yes"; then
-	AC_SUBST(enable_global_config, yes)
-else
-	AC_SUBST(enable_global_config, no)
-fi
-
 # Pthreads
 CXXFLAGS="$CXXFLAGS -pthread"
 
@@ -77,33 +67,27 @@
 
 plugins=""
 # fmod4
-AC_ARG_ENABLE(fmod4, AS_HELP_STRING([--enable-fmod4], [enable fmod 4.xx (FMODex) support [default=off]]))
-if test "$enable_fmod4" = "yes"; then
+AC_ARG_ENABLE(fmod4, AS_HELP_STRING([--enable-fmod4], [enable fmod 4.xx (FMODex) support @<:@default=check@:>@]),,enable_fmod4=check)
+if test "$enable_fmod4" = "yes" || test "$enable_fmod4" = "check"; then
 	AC_CHECK_LIB(fmodex, main, , 
 		[
-		  AM_CONDITIONAL(with_fmod4, [false])
 		  AC_MSG_ERROR([Cannot find fmod 4.xx libs])
 		])
 	AC_CHECK_HEADERS(fmodex/fmod.hpp, , 
 	    [
-		  AM_CONDITIONAL(with_fmod4, [false])
 	      AC_MSG_ERROR([Cannot find fmod headers])
 	    ])
-	AM_CONDITIONAL(with_fmod4, [true])
+	enable_fmod4="yes"
 	plugins="$plugins fmod4driver"
-else
-    AM_CONDITIONAL(with_fmod4, [false])
 fi
 
 # openal
-AC_ARG_ENABLE(openal, AS_HELP_STRING([--enable-openal], [enable OpenAL support [default=off]]))
-if test "$enable_openal" = "yes"; then
+AC_ARG_ENABLE(openal, AS_HELP_STRING([--enable-openal], [enable OpenAL support @<:@default=check@:>@]),,enable_openal=check)
+if test "$enable_openal" = "yes" || test "$enable_openal" = "check"; then
 	AC_CHECK_LIB(openal, main, , AC_MSG_ERROR([Cannot find OpenAL libs]))
 	AC_CHECK_HEADERS(AL/al.h, , AC_MSG_ERROR([Cannot find OpenAL headers]))
-	AM_CONDITIONAL(with_oal, [true])
+	enable_openal="yes"
 	plugins="$plugins openaldriver"
-else
-        AM_CONDITIONAL(with_oal, [false])
 fi
 
 # Ogre
@@ -152,7 +136,6 @@
 
 # Boost
 AX_BOOST_BASE(1.33.1)
-AX_BOOST_THREAD()
 AX_BOOST_FILESYSTEM()
 
 dnl --------------------------------------------
@@ -211,13 +194,12 @@
 		engine/rules/Makefile engine/rules/src/Makefile engine/rules/include/Makefile \
 		engine/script/Makefile engine/script/swig/Makefile engine/script/src/Makefile \
 		engine/startup/Makefile engine/startup/src/Makefile \
-		tests/Makefile tests/coretests/Makefile tests/rulestests/Makefile tests/multimediatests/Makefile \
-		tests/RlDialogTests/Makefile \
+		tests/Makefile tests/coretests/Makefile tests/rulestests/Makefile \
+		tests/multimediatests/Makefile tests/RlDialogTests/Makefile \
 		plugins/Makefile \
 		plugins/fmod4driver/Makefile plugins/fmod4driver/include/Makefile plugins/fmod4driver/src/Makefile \
 		plugins/openaldriver/Makefile plugins/openaldriver/include/Makefile plugins/openaldriver/src/Makefile \
-		tools/Makefile \
-		rastullah.conf
+		tools/Makefile
     ])
 
 AC_OUTPUT
@@ -243,7 +225,4 @@
 echo "       rastullah binary will be placed in: ${RL_GAMEDIR}"
 echo "       Module directory:                   ${RL_MODULEDIR}"
 echo
-echo " Configuration files:"
-echo "       installation of global config file: ${enable_global_config-no}"
-echo
 echo "Type make && make install and pray!"

Modified: rl/trunk/engine/common/include/Makefile.am
===================================================================
--- rl/trunk/engine/common/include/Makefile.am	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/common/include/Makefile.am	2007-02-12 19:52:36 UTC (rev 3039)
@@ -13,7 +13,6 @@
 	LinkedPlaylist.h \
 	MathUtil.h \
 	OgreXercesInput.h \
-	PauseObject.h \
 	Playlist.h \
 	SimplePlaylist.h \
 	PlaylistEvent.h \

Deleted: rl/trunk/engine/common/include/PauseObject.h
===================================================================
--- rl/trunk/engine/common/include/PauseObject.h	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/common/include/PauseObject.h	2007-02-12 19:52:36 UTC (rev 3039)
@@ -1,57 +0,0 @@
-/*
-* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
-*/
-
-#ifndef _PAUSEOBJECT_H_
-#define _PAUSEOBJECT_H_
-
-#include "CommonPrerequisites.h"
-#include "PlaylistObject.h"
-
-namespace boost
-{
-	class thread;
-}
-
-namespace rl 
-{
-
-	class _RlCommonExport PauseObject : public PlaylistObject {
-		private:
-			/// Die Dauer der Pause
-			long unsigned int mNSec;
-			/// Der Timing-Thread
-			boost::thread *mThread;
-			struct ThreadFunctor {
-				/// Die Funktion, die vom Thread ausgef?hrt wird.
-				void operator()();
-				/// Zum Zugriff auf das ?bergeordnete Objekt.
-				PauseObject *that;
-			} mThreadFunctor;
-			friend struct ThreadFunctor;
-
-
-		public:
-			PauseObject(long unsigned int nsec);
-			~PauseObject();
-			const long unsigned int getPause() const;
-			virtual void start();
-			virtual void stop();
-			virtual void pause();
-	};
-
-} // End Namespace
-
-#endif

Modified: rl/trunk/engine/common/src/Makefile.am
===================================================================
--- rl/trunk/engine/common/src/Makefile.am	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/common/src/Makefile.am	2007-02-12 19:52:36 UTC (rev 3039)
@@ -11,7 +11,6 @@
   LinkedPlaylist.cpp \
   MathUtil.cpp \
   OgreXercesInput.cpp \
-  PauseObject.cpp \
   Playlist.cpp \
   PlaylistEvent.cpp \
   PlaylistObject.cpp \

Deleted: rl/trunk/engine/common/src/PauseObject.cpp
===================================================================
--- rl/trunk/engine/common/src/PauseObject.cpp	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/common/src/PauseObject.cpp	2007-02-12 19:52:36 UTC (rev 3039)
@@ -1,76 +0,0 @@
-/*
-* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
-*/
-
-#include "PauseObject.h"
-#include <boost/thread.hpp>
-
-using namespace boost;
-
-namespace rl
-{
-	PauseObject::PauseObject(unsigned long nsec)
-		: PlaylistObject(),
-		mNSec(nsec),
-		mThread(0),
-		mThreadFunctor()
-	{
-		mThreadFunctor.that = this;
-	}
-
-	PauseObject::~PauseObject()
-	{
-		stop();
-	}
-
-	const long unsigned int PauseObject::getPause() const
-	{
-		return mNSec;
-	}
-
-	void PauseObject::start()
-	{
-		PlaylistObject::start();
-		if (mThread != 0)
-		{
-			mThread = new thread(mThreadFunctor);
-		}
-	}
-
-	void PauseObject::stop()
-	{
-		PlaylistObject::stop();
-		if (mThread != 0)
-		{
-			delete mThread;
-			mThread = 0;
-		}
-	}
-
-	void PauseObject::pause()
-	{
-		PlaylistObject::pause();
-		// Big TODO, Warten unterbrechen
-	}
-
-	void PauseObject::ThreadFunctor::operator()()
-	{
-		xtime timeToSleep;
-		xtime_get(&timeToSleep, TIME_UTC);
-		timeToSleep.nsec += that->mNSec;          
-		thread::sleep(timeToSleep);
-	}
-
-}

Modified: rl/trunk/engine/core/include/GameLoop.h
===================================================================
--- rl/trunk/engine/core/include/GameLoop.h	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/core/include/GameLoop.h	2007-02-12 19:52:36 UTC (rev 3039)
@@ -20,7 +20,6 @@
 #include <list>
 #include <deque>
 #include <OgreSingleton.h>
-#include <boost/thread.hpp>
 
 #include "CorePrerequisites.h"
 

Modified: rl/trunk/engine/core/include/SoundManager.h
===================================================================
--- rl/trunk/engine/core/include/SoundManager.h	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/core/include/SoundManager.h	2007-02-12 19:52:36 UTC (rev 3039)
@@ -23,7 +23,6 @@
 #include <OgreSingleton.h>
 #include <OgreResourceGroupManager.h>
 #include <list>
-#include <boost/thread/mutex.hpp>
 
 #include "GameTask.h"
 
@@ -105,8 +104,6 @@
             const Ogre::NameValuePairList* createParams);
 
     private:
-        /// Ein MutEx, um das Hinzuf?gen der Sounds zu synchronisieren.
-        boost::mutex mResListMutex;
         /// Welche Dateiendung soll verwendet werden.
         virtual StringList getExtension();
 

Modified: rl/trunk/engine/script/src/Makefile.am
===================================================================
--- rl/trunk/engine/script/src/Makefile.am	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/script/src/Makefile.am	2007-02-12 19:52:36 UTC (rev 3039)
@@ -4,10 +4,14 @@
 	-I../../ai/include
 
 lib_LTLIBRARIES = libRlScript.la
-libRlScript_la_LDFLAGS = $(CEGUI_LIBS) $(OGRE_LIBS) $(RUBY_LIBS) $(LIBS)  \
-	-Wl,--defsym -Wl,Init_libRlScript=Init_RlScript \
-	-lRlCore -lRlCommon -lRlDialog -lRlUi -lRlRules \
-	-L../../core/src  -L../../common/src -L../../dialog/src -L../../ui/src -L../../rules/src 
+libRlScript_la_LDFLAGS = \
+    $(top_builddir)/engine/common/src/libRlCommon.la \
+    $(top_builddir)/engine/core/src/libRlCore.la \
+    $(top_builddir)/engine/dialog/src/libRlDialog.la \
+    $(top_builddir)/engine/ui/src/libRlUi.la \
+    $(top_builddir)/engine/rules/src/libRlRules.la \
+    $(CEGUI_LIBS) $(OGRE_LIBS) $(RUBY_LIBS) $(LIBS) \ 
+    -Wl,--defsym -Wl,Init_libRlScript=Init_RlScript
 	
 libRlScript_la_SOURCES = \
   ScriptSubsystem.cpp \

Modified: rl/trunk/engine/script/swig/RlCommon.head.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCommon.head.inc	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/script/swig/RlCommon.head.inc	2007-02-12 19:52:36 UTC (rev 3039)
@@ -29,5 +29,4 @@
 #include "Property.h"
 #include "SimplePlaylist.h"
 #include "LinkedPlaylist.h"
-#include "PauseObject.h"
 %}

Modified: rl/trunk/engine/script/swig/RlCommon.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCommon.inc	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/script/swig/RlCommon.inc	2007-02-12 19:52:36 UTC (rev 3039)
@@ -171,18 +171,5 @@
 	LinkItem* getList() const;
 };
 
-class PauseObject : public rl::PlaylistObject {
-	public:
-		PauseObject(long unsigned int nsec);
-		~PauseObject();
-		const long unsigned int getPause() const;
-		virtual void start();
-		virtual void stop();
-		virtual void pause();
-		virtual void load();
-		virtual void unload();
-};
-
-
 }
 

Modified: rl/trunk/engine/startup/src/Makefile.am
===================================================================
--- rl/trunk/engine/startup/src/Makefile.am	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/startup/src/Makefile.am	2007-02-12 19:52:36 UTC (rev 3039)
@@ -4,12 +4,16 @@
 
 bin_PROGRAMS = rastullah
 rastullah_SOURCES = RastullahMain.cpp
-rastullah_LDFLAGS = -L../../script/src -L../../core/src  -L../../common/src -L../../dialog/src \
-	-L../../ui/src -L../../rules/src -L../../uicomponents/src \
-	-L../../ai/src
-rastullah_LDADD = $(RUBY_LIBS) $(LIBS) $(CEGUI_LIBS) $(OGRE_LIBS) \
-	 -lRlUiComponents -lRlCore -lRlScript -lRlCommon -lRlDialog -lRlUi -lRlRules \
-	 $(BOOST_THREAD_LIB) -lRlAi
+rastullah_LDADD = \
+    $(top_builddir)/engine/common/src/libRlCommon.la \
+    $(top_builddir)/engine/core/src/libRlCore.la \
+    $(top_builddir)/engine/ui/src/libRlUi.la \
+    $(top_builddir)/engine/uicomponents/src/libRlUiComponents.la \
+    $(top_builddir)/engine/dialog/src/libRlDialog.la \
+    $(top_builddir)/engine/rules/src/libRlRules.la \
+    $(top_builddir)/engine/script/src/libRlScript.la \
+    $(top_builddir)/engine/ai/src/libRlAi.la \
+    $(RUBY_LIBS) $(LIBS) $(CEGUI_LIBS) $(OGRE_LIBS)
 
 
 

Modified: rl/trunk/engine/ui/src/InputManager.cpp
===================================================================
--- rl/trunk/engine/ui/src/InputManager.cpp	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/ui/src/InputManager.cpp	2007-02-12 19:52:36 UTC (rev 3039)
@@ -105,7 +105,7 @@
             pl.insert(std::make_pair(std::string("w32_keyboard"), std::string("DISCL_FOREGROUND")));
         #elif OGRE_PLATFORM == OGRE_PLATFORM_LINUX
         //    pl.insert(std::make_pair(std::string("x11_mouse_grab"), std::string("false")));
-        //    pl.insert(std::make_pair(std::string("x11_mouse_hide"), std::string("false")));
+        //    pl.insert(std::make_pair(std::string("x11_keyboard_grab"), std::string("false")));
         #endif
 
         std::ostringstream windowHndStr;

Modified: rl/trunk/engine/ui/src/Makefile.am
===================================================================
--- rl/trunk/engine/ui/src/Makefile.am	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/engine/ui/src/Makefile.am	2007-02-12 19:52:36 UTC (rev 3039)
@@ -4,9 +4,10 @@
 	-I../../startup/include -I../../uicomponents/include 
 
 lib_LTLIBRARIES = libRlUi.la
-libRlUi_la_LIBADD = -lRlUiComponents $(RUBY_LIBS) $(LIBS) \
-	$(CEGUI_LIBS) $(OGRE_LIBS) $(CEGUIOGRE_LIBS) $(OIS_LIBS)
-libRlUi_la_LDFLAGS = -L../../uicomponents/src
+libRlUi_la_LIBADD = \
+    $(top_builddir)/engine/uicomponents/src/libRlUiComponents.la \
+    $(RUBY_LIBS) $(LIBS) $(CEGUI_LIBS) $(OGRE_LIBS) $(CEGUIOGRE_LIBS) $(OIS_LIBS)
+
 libRlUi_la_SOURCES = \
 	AboutWindow.cpp \
 	ActionChoiceWindow.cpp \

Modified: rl/trunk/m4/boost.m4
===================================================================
--- rl/trunk/m4/boost.m4	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/m4/boost.m4	2007-02-12 19:52:36 UTC (rev 3039)
@@ -177,110 +177,6 @@
 
 ])
 
-dnl @synopsis AX_BOOST_THREAD
-dnl
-dnl Test for Thread library from the Boost C++ libraries. The macro
-dnl requires a preceding call to AX_BOOST_BASE. Further documentation
-dnl is available at <http://randspringer.de/boost/index.html>.
-dnl
-dnl This macro calls:
-dnl
-dnl   AC_SUBST(BOOST_THREAD_LIB)
-dnl
-dnl And sets:
-dnl
-dnl   HAVE_BOOST_THREAD
-dnl
-dnl @category InstalledPackages
-dnl @category Cxx
-dnl @author Thomas Porschberg <thomas at randspringer.de>
-dnl @author Michael Tindal <mtindal at paradoxpoint.com>
-dnl @version 2006-06-15
-dnl @license AllPermissive
-
-AC_DEFUN([AX_BOOST_THREAD],
-[
-AC_ARG_WITH([boost-thread],
-            AS_HELP_STRING([--with-boost-thread@<:@=special-lib@:>@],
-            [use the Thread library from boost - it is possible to specify a certain library for the linker
-                        e.g. --with-boost-thread=boost_thread-gcc-mt ]),
-            [
-    if test "$withval" = "yes"; then
-        want_boost="yes"
-        ax_boost_user_thread_lib=""
-    else
-        want_boost="yes"
-        ax_boost_user_thread_lib="$withval"
-    fi
-            ],
-            [want_boost="yes"])
-
-AC_REQUIRE([AC_PROG_CC])
-CPPFLAGS_SAVED="$CPPFLAGS"
-CPPFLAGS="$CPPFLAGS $BOOST_CPPFLAGS"
-export CPPFLAGS
-
-LDFLAGS_SAVED="$LDFLAGS"
-LDFLAGS="$LDFLAGS $BOOST_LDFLAGS"
-export LDFLAGS
-
-AC_CACHE_CHECK(whether the Boost::Thread library is available,
-               ax_cv_boost_thread,
-               [AC_LANG_PUSH([C++])
-CXXFLAGS_SAVE=$CXXFLAGS
-
-if test "x$build_os" = "xsolaris" ; then
-    CXXFLAGS="-pthreads $CXXFLAGS"
-elif test "x$build_os" = "xming32" ; then
-    CXXFLAGS="-mthreads $CXXFLAGS"
-else
-    CXXFLAGS="-pthread $CXXFLAGS"
-fi
-AC_COMPILE_IFELSE(AC_LANG_PROGRAM([[@%:@include <boost/thread/thread.hpp>]],
-                  [[boost::thread_group thrds; return 0;]]),
-                  ax_cv_boost_thread=yes, ax_cv_boost_thread=no)
-CXXFLAGS=$CXXFLAGS_SAVE
-AC_LANG_POP([C++])
-               ])
-
-if test "x$ax_cv_boost_thread" = "xyes"; then
-    if test "x$build_os" = "xsolaris" ; then
-        BOOST_CPPFLAGS="-pthreads $BOOST_CPPFLAGS"
-    elif test "x$build_os" = "xming32" ; then
-        BOOST_CPPFLAGS="-mthreads $BOOST_CPPFLAGS"
-    else
-        BOOST_CPPFLAGS="-pthread $BOOST_CPPFLAGS"
-    fi
-
-    AC_SUBST(BOOST_CPPFLAGS)
-
-    AC_DEFINE(HAVE_BOOST_THREAD,,[define if the Boost::Thread library is available])
-    BN=boost_thread
-
-    if test "x$ax_boost_user_thread_lib" = "x"; then
-        for ax_lib in $BN $BN-$CC $BN-$CC-mt $BN-$CC-mt-s $BN-$CC-s \
-            lib$BN lib$BN-$CC lib$BN-$CC-mt lib$BN-$CC-mt-s lib$BN-$CC-s \
-            $BN-mgw $BN-mgw $BN-mgw-mt $BN-mgw-mt-s $BN-mgw-s ; do
-            AC_CHECK_LIB($ax_lib, main, [BOOST_THREAD_LIB="-l$ax_lib" AC_SUBST(BOOST_THREAD_LIB) link_thread="yes" break],
-                         [link_thread="no"])
-        done
-    else
-        for ax_lib in $ax_boost_user_thread_lib $BN-$ax_boost_user_thread_lib; do
-             AC_CHECK_LIB($ax_lib, main,
-                         [BOOST_THREAD_LIB="-l$ax_lib" AC_SUBST(BOOST_THREAD_LIB) link_thread="yes" break],
-                         [link_thread="no"])
-        done
-    fi
-
-    if test "x$link_thread" = "xno"; then
-        AC_MSG_ERROR(Could not link against $ax_lib !)
-    fi
-fi
-
-CPPFLAGS="$CPPFLAGS_SAVED"
-LDFLAGS="$LDFLAGS_SAVED"
-])
-
 dnl @synopsis AX_BOOST_FILESYSTEM
 dnl
 dnl Test for Filesystem library from the Boost C++ libraries. The macro

Modified: rl/trunk/plugins/fmod4driver/src/Makefile.am
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Makefile.am	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/plugins/fmod4driver/src/Makefile.am	2007-02-12 19:52:36 UTC (rev 3039)
@@ -3,13 +3,16 @@
 	-I../../../engine/common/include
 
 lib_LTLIBRARIES = libRlFmod4Driver.la
-libRlFmod4Driver_la_LDFLAGS = $(OGRE_LIBS) $(CEGUIOGRE_LIBS) $(LIBS) \
-	-L../../../engine/common/src -L../../../engine/core/src -L../../../engine/ui/src \
-	-lRlCommon -lRlCore -lRlUi
+libRlFmod4Driver_la_LDFLAGS = \
+     $(top_builddir)/engine/common/src/libRlCommon.la \
+     $(top_builddir)/engine/core/src/libRlCore.la \
+     $(top_builddir)/engine/ui/src/libRlUi.la \
+     $(OGRE_LIBS) $(CEGUIOGRE_LIBS) $(LIBS)
+
 libRlFmod4Driver_la_SOURCES = \
 	Fmod4Config.cpp \
 	Fmod4Driver.cpp \
 	Fmod4DriverDllMain.cpp \
 	Fmod4Listener.cpp \
 	Fmod4Sound.cpp
-	
\ No newline at end of file
+	

Modified: rl/trunk/plugins/openaldriver/src/Makefile.am
===================================================================
--- rl/trunk/plugins/openaldriver/src/Makefile.am	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/plugins/openaldriver/src/Makefile.am	2007-02-12 19:52:36 UTC (rev 3039)
@@ -3,9 +3,12 @@
 	-I../../../engine/common/include
 
 lib_LTLIBRARIES = libRlOpenALDriver.la
-libRlOpenALDriver_la_LDFLAGS = $(RUBY_LIBS) $(OGRE_LIBS) $(CEGUI_LIBS) $(LIBS) \
-	-L../../../engine/common/src -L../../../engine/core/src -L../../../engine/ui/src \
-	-lRlCommon -lRlCore -lRlUi
+libRlOpenALDriver_la_LDFLAGS = \
+    $(top_builddir)/engine/common/src/libRlCommon.la \
+    $(top_builddir)/engine/core/src/libRlCore.la \
+    $(top_builddir)/engine/ui/src/libRlUi.la \
+    $(RUBY_LIBS) $(OGRE_LIBS) $(CEGUI_LIBS) $(LIBS)
+
 libRlOpenALDriver_la_SOURCES = \
 	OpenALDriver.cpp \
 	OpenALConfig.cpp \

Deleted: rl/trunk/rastullah.conf.in
===================================================================
--- rl/trunk/rastullah.conf.in	2007-02-11 19:10:24 UTC (rev 3038)
+++ rl/trunk/rastullah.conf.in	2007-02-12 19:52:36 UTC (rev 3039)
@@ -1,3 +0,0 @@
-[Paths]
-ModulesDirectory=@RL_MODULEDIR@
-OgrePluginDirectory=@OGRE_PLUGINDIR@



From tanis at mail.berlios.de  Mon Feb 12 22:35:18 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Mon, 12 Feb 2007 22:35:18 +0100
Subject: [Dsa-hl-svn] r3040 - dependencies/OgreNewt
Message-ID: <200702122135.l1CLZIi8024316@sheep.berlios.de>

Author: tanis
Date: 2007-02-12 22:35:08 +0100 (Mon, 12 Feb 2007)
New Revision: 3040

Modified:
   dependencies/OgreNewt/OgreNewt_Main.vcproj
Log:
Changes for Ogre 1.4.0. All Ogre libs are now in ogrenew/lib.

Modified: dependencies/OgreNewt/OgreNewt_Main.vcproj
===================================================================
--- dependencies/OgreNewt/OgreNewt_Main.vcproj	2007-02-12 19:52:36 UTC (rev 3039)
+++ dependencies/OgreNewt/OgreNewt_Main.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
@@ -65,7 +65,7 @@
 				Name="VCLinkerTool"
 				AdditionalDependencies="Newton.lib OgreMain_d.lib"
 				OutputFile="$(OutDir)/OgreNewt_d.dll"
-				AdditionalLibraryDirectories="..\NewtonSDK\sdk\dll;&quot;..\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;"
+				AdditionalLibraryDirectories="..\NewtonSDK\sdk\dll;..\ogrenew\lib"
 				GenerateDebugInformation="true"
 				ProgramDatabaseFile="$(OutDir)/OgreNewt_d.pdb"
 				SubSystem="2"
@@ -144,7 +144,7 @@
 				Name="VCLinkerTool"
 				AdditionalDependencies="Newton.lib OgreMain.lib"
 				OutputFile="$(OutDir)/OgreNewt.dll"
-				AdditionalLibraryDirectories="..\NewtonSDK\sdk\dll;&quot;..\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;"
+				AdditionalLibraryDirectories="..\NewtonSDK\sdk\dll;..\ogrenew\lib"
 				ImportLibrary="$(OutDir)/OgreNewt.lib"
 			/>
 			<Tool



From tanis at mail.berlios.de  Tue Feb 13 00:26:40 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Tue, 13 Feb 2007 00:26:40 +0100
Subject: [Dsa-hl-svn] r3041 - in rl/trunk: engine/ai engine/common
	engine/core engine/core/include engine/core/src engine/dialog
	engine/rules engine/script engine/startup engine/ui
	engine/uicomponents plugins/fmod4driver plugins/openaldriver tools
Message-ID: <200702122326.l1CNQeBQ000389@sheep.berlios.de>

Author: tanis
Date: 2007-02-13 00:26:20 +0100 (Tue, 13 Feb 2007)
New Revision: 3041

Added:
   rl/trunk/engine/core/include/PlaySoundJob.h
   rl/trunk/engine/core/src/PlaySoundJob.cpp
Modified:
   rl/trunk/engine/ai/RlAI2005.vcproj
   rl/trunk/engine/common/RlCommon2005.vcproj
   rl/trunk/engine/core/RlCore2005.vcproj
   rl/trunk/engine/core/src/CoreSubsystem.cpp
   rl/trunk/engine/dialog/RlDialog2005.vcproj
   rl/trunk/engine/rules/RlRules2005.vcproj
   rl/trunk/engine/script/RlScript2005.vcproj
   rl/trunk/engine/startup/RlStartup2005.vcproj
   rl/trunk/engine/ui/RlUI2005.vcproj
   rl/trunk/engine/uicomponents/RlUIComponents2005.vcproj
   rl/trunk/plugins/fmod4driver/RlFmod4Driver.vcproj
   rl/trunk/plugins/openaldriver/RlOpenALDriver.vcproj
   rl/trunk/tools/copy_dependencies.bat
Log:
Changes to make RL work with Ogre 1.4.0RC1. You have to update to Ogre 1.4.0RC1 on Windows too now!

Also prematurely commit sound job, this doesn't work yet, but doesn't hurt either. Only committed it, in order to not have two different RlCore project files locally.

Modified: rl/trunk/engine/ai/RlAI2005.vcproj
===================================================================
--- rl/trunk/engine/ai/RlAI2005.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/ai/RlAI2005.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -74,7 +74,7 @@
 				AdditionalDependencies="OgreMain_d.lib OgreNewt_d.lib CEGUIBase_d.lib opensteerd.lib RlCommon.lib RlCore.lib RlRules.lib RlDialog.lib Newton.lib"
 				OutputFile="$(OutDir)/RlAI.dll"
 				LinkIncremental="2"
-				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\dialog\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\dll"
+				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\dialog\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib\;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\dll"
 				GenerateDebugInformation="true"
 				AssemblyDebug="1"
 				ProgramDatabaseFile="$(OutDir)/RlAI.pdb"
@@ -160,7 +160,7 @@
 				AdditionalDependencies="OgreMain.lib OgreNewt.lib CEGUIBase.lib opensteer.lib RlCommon.lib RlCore.lib RlRules.lib RlDialog.lib Newton.lib"
 				OutputFile="$(OutDir)/RlAI.dll"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\dialog\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\dll"
+				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\dialog\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\dll"
 				GenerateDebugInformation="false"
 				SubSystem="2"
 				OptimizeReferences="2"
@@ -244,7 +244,7 @@
 				AdditionalDependencies="OgreMain.lib OgreNewt.lib CEGUIBase.lib opensteer.lib RlCommon.lib RlCore.lib RlRules.lib RlDialog.lib Newton.lib"
 				OutputFile="$(OutDir)/RlAI.dll"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="..\common\lib\Release;..\core\lib\Release;..\rules\lib\Release;..\dialog\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\ogrenewt\lib\Release;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\dll"
+				AdditionalLibraryDirectories="..\common\lib\Release;..\core\lib\Release;..\rules\lib\Release;..\dialog\lib\Release;..\..\dependencies\ogrenew\lib;..\..\dependencies\ogrenewt\lib\Release;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\opensteer\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\dll"
 				GenerateDebugInformation="true"
 				SubSystem="2"
 				OptimizeReferences="2"

Modified: rl/trunk/engine/common/RlCommon2005.vcproj
===================================================================
--- rl/trunk/engine/common/RlCommon2005.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/common/RlCommon2005.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -70,7 +70,7 @@
 				AdditionalDependencies="OgreMain_d.lib xerces-c_2D.lib CEGUIBase_d.lib boost_thread-vc80-mt-gd-1_33_1.lib"
 				OutputFile="./lib/$(ConfigurationName)/RlCommon.dll"
 				LinkIncremental="2"
-				AdditionalLibraryDirectories="&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\cegui_mk2\lib\$(PlatformName)\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib\;..\..\dependencies\boost\lib"
+				AdditionalLibraryDirectories="..\..\dependencies\ogrenew\lib;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\cegui_mk2\lib\$(PlatformName)\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib\;..\..\dependencies\boost\lib"
 				GenerateDebugInformation="true"
 				AssemblyDebug="1"
 				ProgramDatabaseFile="$(OutDir)/RlCommon.pdb"
@@ -156,7 +156,7 @@
 				AdditionalDependencies="OgreMain.lib xerces-c_2.lib CEGUIBase.lib boost_thread-vc80-mt-1_33_1.lib"
 				OutputFile="./lib/$(ConfigurationName)/RlCommon.dll"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\cegui_mk2\lib\$(PlatformName)\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib\;..\..\dependencies\boost\lib"
+				AdditionalLibraryDirectories="..\..\dependencies\ogrenew\lib;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\cegui_mk2\lib\$(PlatformName)\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib\;..\..\dependencies\boost\lib"
 				GenerateDebugInformation="false"
 				SubSystem="2"
 				OptimizeReferences="2"
@@ -240,7 +240,7 @@
 				AdditionalDependencies="OgreMain.lib xerces-c_2.lib CEGUIBase.lib boost_thread-vc80-mt-1_33_1.lib"
 				OutputFile="./lib/$(ConfigurationName)/RlCommon.dll"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\cegui_mk2\lib\$(PlatformName)\Release&quot;;..\..\dependencies\cegui_mk2\lib\;..\..\dependencies\boost\lib"
+				AdditionalLibraryDirectories="..\..\dependencies\ogrenew\lib;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\cegui_mk2\lib\$(PlatformName)\Release&quot;;..\..\dependencies\cegui_mk2\lib\;..\..\dependencies\boost\lib"
 				GenerateDebugInformation="true"
 				SubSystem="2"
 				OptimizeReferences="2"
@@ -317,10 +317,6 @@
 				>
 			</File>
 			<File
-				RelativePath=".\src\PauseObject.cpp"
-				>
-			</File>
-			<File
 				RelativePath=".\src\Playlist.cpp"
 				>
 			</File>
@@ -433,10 +429,6 @@
 				>
 			</File>
 			<File
-				RelativePath=".\include\PauseObject.h"
-				>
-			</File>
-			<File
 				RelativePath=".\include\Playlist.h"
 				>
 			</File>

Modified: rl/trunk/engine/core/RlCore2005.vcproj
===================================================================
--- rl/trunk/engine/core/RlCore2005.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/core/RlCore2005.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -87,7 +87,7 @@
 				OutputFile="./lib/$(ConfigurationName)/RlCore.dll"
 				LinkIncremental="2"
 				SuppressStartupBanner="true"
-				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll"
+				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll"
 				IgnoreDefaultLibraryNames=""
 				TypeLibraryFile="$(OutDir)\RlCore.lib"
 				GenerateDebugInformation="true"
@@ -197,7 +197,7 @@
 				OutputFile="./lib/$(ConfigurationName)/RlCore.dll"
 				LinkIncremental="1"
 				SuppressStartupBanner="true"
-				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll"
+				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll"
 				TypeLibraryFile="$(OutDir)\RlCore.lib"
 				ProgramDatabaseFile=""
 				SubSystem="2"
@@ -302,7 +302,7 @@
 				OutputFile="$(OutDir)/RlCore.dll"
 				LinkIncremental="1"
 				SuppressStartupBanner="true"
-				AdditionalLibraryDirectories="..\common\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib\Release;..\..\dependencies\NewtonSDK\sdk\dll"
+				AdditionalLibraryDirectories="..\common\lib\Release;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib\Release;..\..\dependencies\NewtonSDK\sdk\dll"
 				TypeLibraryFile="$(OutDir)\RlCore.lib"
 				GenerateDebugInformation="true"
 				ProgramDatabaseFile="$(TargetDir)$(TargetName).pdb"
@@ -513,6 +513,10 @@
 				>
 			</File>
 			<File
+				RelativePath=".\include\PlaySoundJob.h"
+				>
+			</File>
+			<File
 				RelativePath=".\include\PrimitiveObject.h"
 				>
 			</File>
@@ -730,6 +734,10 @@
 				>
 			</File>
 			<File
+				RelativePath=".\src\PlaySoundJob.cpp"
+				>
+			</File>
+			<File
 				RelativePath=".\src\PrimitiveObject.cpp"
 				>
 			</File>

Added: rl/trunk/engine/core/include/PlaySoundJob.h
===================================================================
--- rl/trunk/engine/core/include/PlaySoundJob.h	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/core/include/PlaySoundJob.h	2007-02-12 23:26:20 UTC (rev 3041)
@@ -0,0 +1,50 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#ifndef __RL_PLAY_SOUND_JOB_H__
+#define __RL_PLAY_SOUND_JOB_H__
+
+#include "CorePrerequisites.h"
+#include "Job.h"
+
+namespace rl
+{
+    class Sound;
+
+    class _RlCoreExport PlaySound2dJob : public Job
+    {
+    public:
+
+        PlaySound2dJob(const Ogre::String& sound, Ogre::Real volume=1.0f,
+            bool looping=false, bool isDiscardable=false);
+        virtual ~PlaySound2dJob();
+
+        /// Play the sound.
+        /// @return true, when the sound is done playing, false else.
+        /// @todo this return-behaviour is actually a hack to prevent a memory leak.
+        ///       We have to find a way to get rid of the sound automatically, when it is done
+        ///       playing.
+        virtual bool execute(Ogre::Real time);
+
+        /// Do nothing, since the sound can be either played or not.
+        /// Once started, it is not aborted.
+        virtual void discard();
+    private:
+        Sound* mSound;
+    };
+}
+
+#endif

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-12 23:26:20 UTC (rev 3041)
@@ -158,9 +158,19 @@
         // Load Ogre plugins
         Ogre::StringVector pluginList = ConfigurationManager::getSingleton().getPluginList();
 
+        ///\todo In Windows Ogre now uses a _d suffix for debug plugins. But client application is
+        /// responsible for loading the proper vesion. This way to do it is kinda ugly.
+        /// We should somehow handle this in the ConfigurationManager.
+        Ogre::String pluginSuffix = "";
+#if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
+#ifdef _DEBUG
+        pluginSuffix = "_d";
+#endif
+#endif
+
         for (Ogre::StringVector::const_iterator it = pluginList.begin(); it < pluginList.end(); it++)
         {
-            mOgreRoot->loadPlugin(*it);
+            mOgreRoot->loadPlugin(*it + pluginSuffix);
         }
 
         // Find out, what Renderer plugins are available

Added: rl/trunk/engine/core/src/PlaySoundJob.cpp
===================================================================
--- rl/trunk/engine/core/src/PlaySoundJob.cpp	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/core/src/PlaySoundJob.cpp	2007-02-12 23:26:20 UTC (rev 3041)
@@ -0,0 +1,51 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#include "PlaySoundJob.h"
+#include "Sound.h"
+#include "SoundManager.h"
+#include "SoundDriver.h"
+
+using namespace Ogre;
+
+namespace rl
+{
+
+    PlaySound2dJob::PlaySound2dJob(const String& sound, Real volume,
+        bool looping, bool isDiscardable) : Job(isDiscardable, true), mSound()
+    {
+        mSound = SoundManager::getSingleton().getActiveDriver()->
+            createStream(SoundManager::getSingleton().getByName(sound));
+        mSound->set3d(false);
+        mSound->setVolume(volume);
+        mSound->setLooping(looping);
+    }
+
+    PlaySound2dJob::~PlaySound2dJob()
+    {
+        delete mSound;
+    }
+
+    bool PlaySound2dJob::execute(Ogre::Real time)
+    {
+        if (mSound) mSound->play();
+        return true;
+    }
+
+    void PlaySound2dJob::discard()
+    {
+    }
+}

Modified: rl/trunk/engine/dialog/RlDialog2005.vcproj
===================================================================
--- rl/trunk/engine/dialog/RlDialog2005.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/dialog/RlDialog2005.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -73,7 +73,7 @@
 				AdditionalDependencies="OgreMain_d.lib xerces-c_2D.lib RlCommon.lib RlCore.lib RlRules.lib CEGUIBase_d.lib MadaBot.lib"
 				OutputFile="$(OutDir)/RlDialog.dll"
 				LinkIncremental="2"
-				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;&quot;..\..\dependencies\aiml\MadaBot\lib\$(ConfigurationName)&quot;"
+				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;&quot;..\..\dependencies\aiml\MadaBot\lib\$(ConfigurationName)&quot;"
 				GenerateDebugInformation="true"
 				AssemblyDebug="1"
 				ProgramDatabaseFile="$(OutDir)/RlDialog.pdb"
@@ -159,7 +159,7 @@
 				AdditionalDependencies="OgreMain.lib xerces-c_2.lib RlCommon.lib RlCore.lib RlRules.lib CEGUIBase.lib MadaBot.lib"
 				OutputFile="$(OutDir)/RlDialog.dll"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;&quot;..\..\dependencies\aiml\MadaBot\lib\$(ConfigurationName)&quot;"
+				AdditionalLibraryDirectories="&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;&quot;..\..\dependencies\aiml\MadaBot\lib\$(ConfigurationName)&quot;"
 				GenerateDebugInformation="false"
 				SubSystem="2"
 				OptimizeReferences="2"
@@ -243,7 +243,7 @@
 				AdditionalDependencies="OgreMain.lib xerces-c_2.lib RlCommon.lib RlCore.lib RlRules.lib CEGUIBase.lib MadaBot.lib"
 				OutputFile="$(OutDir)/RlDialog.dll"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="..\common\lib\Release;..\core\lib\Release;..\rules\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\aiml\MadaBot\lib\Release"
+				AdditionalLibraryDirectories="..\common\lib\Release;..\core\lib\Release;..\rules\lib\Release;..\..\dependencies\ogrenew\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\aiml\MadaBot\lib\Release"
 				GenerateDebugInformation="true"
 				SubSystem="2"
 				OptimizeReferences="2"

Modified: rl/trunk/engine/rules/RlRules2005.vcproj
===================================================================
--- rl/trunk/engine/rules/RlRules2005.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/rules/RlRules2005.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -70,7 +70,7 @@
 				AdditionalDependencies="msvcrt-ruby18.lib xerces-c_2D.lib OgreMain_d.lib CEGUIBase_d.lib RlCore.lib OgreNewt_d.lib Newton.lib"
 				OutputFile="$(OutDir)/RlRules.dll"
 				LinkIncremental="2"
-				AdditionalLibraryDirectories="&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\dll;&quot;..\..\dependencies\OgreNewt\lib\$(ConfigurationName)&quot;"
+				AdditionalLibraryDirectories="&quot;..\core\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\NewtonSDK\sdk\dll;&quot;..\..\dependencies\OgreNewt\lib\$(ConfigurationName)&quot;"
 				GenerateDebugInformation="true"
 				AssemblyDebug="1"
 				ProgramDatabaseFile="$(OutDir)/RlRules.pdb"
@@ -156,7 +156,7 @@
 				AdditionalDependencies="msvcrt-ruby18.lib OgreMain.lib xerces-c_2.lib CEGUIBase.lib RlCore.lib OgreNewt.lib Newton.lib"
 				OutputFile="$(OutDir)/RlRules.dll"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;&quot;..\..\dependencies\OgreNewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll"
+				AdditionalLibraryDirectories="&quot;..\core\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;&quot;..\..\dependencies\OgreNewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll"
 				GenerateDebugInformation="false"
 				SubSystem="2"
 				OptimizeReferences="2"
@@ -240,7 +240,7 @@
 				AdditionalDependencies="msvcrt-ruby18.lib OgreMain.lib xerces-c_2.lib CEGUIBase.lib RlCore.lib OgreNewt.lib Newton.lib"
 				OutputFile="$(OutDir)/RlRules.dll"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="..\core\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\OgreNewt\lib\Release;..\..\dependencies\NewtonSDK\sdk\dll"
+				AdditionalLibraryDirectories="..\core\lib\Release;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\OgreNewt\lib\Release;..\..\dependencies\NewtonSDK\sdk\dll"
 				GenerateDebugInformation="true"
 				SubSystem="2"
 				OptimizeReferences="2"

Modified: rl/trunk/engine/script/RlScript2005.vcproj
===================================================================
--- rl/trunk/engine/script/RlScript2005.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/script/RlScript2005.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -67,7 +67,7 @@
 				AdditionalDependencies="RlCore.lib RlAi.lib RlUi.lib RlRules.lib RlDialog.lib OgreMain_d.lib msvcrt-ruby18.lib CEGUIBase_d.lib"
 				OutputFile="$(OutDir)/RlScript.dll"
 				LinkIncremental="2"
-				AdditionalLibraryDirectories="&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\dialog\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib"
+				AdditionalLibraryDirectories="&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\dialog\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib"
 				GenerateDebugInformation="true"
 				AssemblyDebug="1"
 				ProgramDatabaseFile="$(OutDir)/RlScript.pdb"
@@ -151,7 +151,7 @@
 				AdditionalDependencies="RlCore.lib RlAi.lib RlUi.lib RlRules.lib RlDialog.lib OgreMain.lib msvcrt-ruby18.lib CEGUIBase.lib"
 				OutputFile="$(OutDir)/RlScript.dll"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\dialog\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib"
+				AdditionalLibraryDirectories="&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\dialog\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib"
 				GenerateDebugInformation="false"
 				SubSystem="2"
 				OptimizeReferences="2"
@@ -233,7 +233,7 @@
 				AdditionalDependencies="RlCore.lib RlAi.lib RlUi.lib RlRules.lib RlDialog.lib OgreMain.lib msvcrt-ruby18.lib CEGUIBase.lib"
 				OutputFile="$(OutDir)/RlScript.dll"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="..\rules\lib\Release;..\core\lib\Release;..\dialog\lib\Release;..\ui\lib\Release;..\ai\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib"
+				AdditionalLibraryDirectories="..\rules\lib\Release;..\core\lib\Release;..\dialog\lib\Release;..\ui\lib\Release;..\ai\lib\Release;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib"
 				GenerateDebugInformation="true"
 				SubSystem="2"
 				OptimizeReferences="2"

Modified: rl/trunk/engine/startup/RlStartup2005.vcproj
===================================================================
--- rl/trunk/engine/startup/RlStartup2005.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/startup/RlStartup2005.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -68,7 +68,7 @@
 				AdditionalDependencies="OgreMain_d.lib RlCommon.lib RlCore.lib RlAi.lib RlUi.lib RlScript.lib CEGUIBase_d.lib Shell32.lib"
 				OutputFile="$(OutDir)/Rastullah.exe"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\script\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\xerces\lib;..\..\dependencies\boost\lib"
+				AdditionalLibraryDirectories="&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\script\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\xerces\lib;..\..\dependencies\boost\lib"
 				GenerateDebugInformation="true"
 				AssemblyDebug="1"
 				ProgramDatabaseFile="$(OutDir)/Rastullah.pdb"
@@ -156,7 +156,7 @@
 				AdditionalDependencies="OgreMain.lib RlCommon.lib RlCore.lib RlAi.lib RlUi.lib RlScript.lib CEGUIBase.lib Shell32.lib user32.lib"
 				OutputFile="$(OutDir)/Rastullah.exe"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\script\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\xerces\lib;..\..\dependencies\boost\lib"
+				AdditionalLibraryDirectories="&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\common\lib\$(ConfigurationName)&quot;;&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\script\lib\$(ConfigurationName)&quot;;&quot;..\ai\lib\$(ConfigurationName)&quot;;&quot;..\ui\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\xerces\lib;..\..\dependencies\boost\lib"
 				GenerateDebugInformation="false"
 				SubSystem="2"
 				OptimizeReferences="2"
@@ -242,7 +242,7 @@
 				AdditionalDependencies="OgreMain.lib RlCommon.lib RlCore.lib RlAi.lib RlUi.lib RlScript.lib CEGUIBase.lib Shell32.lib user32.lib"
 				OutputFile="$(OutDir)/Rastullah.exe"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="..\rules\lib\Release;..\common\lib\Release;..\core\lib\Release;..\script\lib\Release;..\ai\lib\Release;..\ui\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\xerces\lib;..\..\dependencies\boost\lib"
+				AdditionalLibraryDirectories="..\rules\lib\Release;..\common\lib\Release;..\core\lib\Release;..\script\lib\Release;..\ai\lib\Release;..\ui\lib\Release;..\..\dependencies\ogrenew\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\xerces\lib;..\..\dependencies\boost\lib"
 				GenerateDebugInformation="true"
 				SubSystem="2"
 				OptimizeReferences="2"

Modified: rl/trunk/engine/ui/RlUI2005.vcproj
===================================================================
--- rl/trunk/engine/ui/RlUI2005.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/ui/RlUI2005.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -87,7 +87,7 @@
 				OutputFile="$(OutDir)/RlUI.dll"
 				LinkIncremental="2"
 				SuppressStartupBanner="true"
-				AdditionalLibraryDirectories="&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\uicomponents\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\OgreNewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\ois\dll"
+				AdditionalLibraryDirectories="&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\uicomponents\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\OgreNewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\ois\dll"
 				IgnoreDefaultLibraryNames=""
 				GenerateDebugInformation="true"
 				AssemblyDebug="1"
@@ -194,7 +194,7 @@
 				OutputFile="$(OutDir)/RlUI.dll"
 				LinkIncremental="1"
 				SuppressStartupBanner="true"
-				AdditionalLibraryDirectories="&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\uicomponents\lib\$(ConfigurationName)&quot;;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\OgreNewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\ois\dll"
+				AdditionalLibraryDirectories="&quot;..\core\lib\$(ConfigurationName)&quot;;&quot;..\rules\lib\$(ConfigurationName)&quot;;&quot;..\uicomponents\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;&quot;..\..\dependencies\OgreNewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\ois\dll"
 				ProgramDatabaseFile=""
 				SubSystem="2"
 			/>
@@ -296,7 +296,7 @@
 				OutputFile="$(OutDir)/RlUI.dll"
 				LinkIncremental="1"
 				SuppressStartupBanner="true"
-				AdditionalLibraryDirectories="..\core\lib\Release;..\rules\lib\Release;..\uicomponents\lib\Release;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\ogrenew\Samples\Common\CEGUIRenderer\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib\Release;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\ois\dll"
+				AdditionalLibraryDirectories="..\core\lib\Release;..\rules\lib\Release;..\uicomponents\lib\Release;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\OgreNewt\lib\Release;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\ois\dll"
 				GenerateDebugInformation="true"
 				ProgramDatabaseFile="$(TargetDir)$(TargetName).pdb"
 				SubSystem="2"

Modified: rl/trunk/engine/uicomponents/RlUIComponents2005.vcproj
===================================================================
--- rl/trunk/engine/uicomponents/RlUIComponents2005.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/engine/uicomponents/RlUIComponents2005.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -86,7 +86,7 @@
 				OutputFile="./lib/debug/RlUiComponents.dll"
 				LinkIncremental="2"
 				SuppressStartupBanner="true"
-				AdditionalLibraryDirectories="..\..\dependencies\cegui_mk2\lib;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;"
+				AdditionalLibraryDirectories="..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenew\lib"
 				IgnoreDefaultLibraryNames=""
 				GenerateDebugInformation="true"
 				AssemblyDebug="1"
@@ -193,7 +193,7 @@
 				OutputFile="./lib/release/RlUiComponents.dll"
 				LinkIncremental="1"
 				SuppressStartupBanner="true"
-				AdditionalLibraryDirectories="..\..\dependencies\cegui_mk2\lib;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;"
+				AdditionalLibraryDirectories="..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenew\lib"
 				ProgramDatabaseFile=""
 				SubSystem="2"
 			/>
@@ -295,7 +295,7 @@
 				OutputFile="$(OutDir)/RlUiComponents.dll"
 				LinkIncremental="1"
 				SuppressStartupBanner="true"
-				AdditionalLibraryDirectories="..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenew\OgreMain\lib\Release"
+				AdditionalLibraryDirectories="..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenew\lib"
 				GenerateDebugInformation="true"
 				ProgramDatabaseFile="$(TargetDir)$(TargetName).pdb"
 				SubSystem="2"

Modified: rl/trunk/plugins/fmod4driver/RlFmod4Driver.vcproj
===================================================================
--- rl/trunk/plugins/fmod4driver/RlFmod4Driver.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/plugins/fmod4driver/RlFmod4Driver.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -65,7 +65,7 @@
 				Name="VCLinkerTool"
 				AdditionalDependencies="RlCommon.lib RlCore.lib RlUi.lib OgreMain_d.lib ceguibase_d.lib fmodex_vc.lib"
 				LinkIncremental="2"
-				AdditionalLibraryDirectories="&quot;..\..\engine\common\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\core\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\multimedia\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\ui\lib\$(ConfigurationName)&quot;;..\..\dependencies\boost\lib;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\fmod4\api\lib"
+				AdditionalLibraryDirectories="&quot;..\..\engine\common\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\core\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\multimedia\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\ui\lib\$(ConfigurationName)&quot;;..\..\dependencies\boost\lib;..\..\dependencies\ogrenew\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\fmod4\api\lib"
 				ModuleDefinitionFile="Fmod4DriverDllExports.def"
 				GenerateDebugInformation="true"
 				AssemblyDebug="1"
@@ -143,7 +143,7 @@
 				Name="VCLinkerTool"
 				AdditionalDependencies="RlCommon.lib RlCore.lib RlUi.lib OgreMain.lib ceguibase.lib fmodex_vc.lib"
 				OutputFile="$(OutDir)\$(ProjectName).dll"
-				AdditionalLibraryDirectories="&quot;..\..\engine\common\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\core\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\multimedia\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\ui\lib\$(ConfigurationName)&quot;;..\..\dependencies\boost\lib;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\fmod4\api\lib"
+				AdditionalLibraryDirectories="&quot;..\..\engine\common\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\core\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\multimedia\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\ui\lib\$(ConfigurationName)&quot;;..\..\dependencies\boost\lib;..\..\dependencies\ogrenew\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\fmod4\api\lib"
 				ModuleDefinitionFile="Fmod4DriverDllExports.def"
 			/>
 			<Tool
@@ -214,7 +214,7 @@
 				Name="VCLinkerTool"
 				AdditionalDependencies="RlCommon.lib RlCore.lib RlUi.lib OgreMain.lib ceguibase.lib fmodex_vc.lib"
 				OutputFile="$(OutDir)\$(ProjectName).dll"
-				AdditionalLibraryDirectories="..\..\engine\common\lib\Release;..\..\engine\core\lib\Release;..\..\engine\multimedia\lib\Release;..\..\engine\ui\lib\Release;..\..\dependencies\boost\lib;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\fmod4\api\lib"
+				AdditionalLibraryDirectories="..\..\engine\common\lib\Release;..\..\engine\core\lib\Release;..\..\engine\multimedia\lib\Release;..\..\engine\ui\lib\Release;..\..\dependencies\boost\lib;..\..\dependencies\ogrenew\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\fmod4\api\lib"
 				ModuleDefinitionFile="Fmod4DriverDllExports.def"
 				GenerateDebugInformation="true"
 			/>

Modified: rl/trunk/plugins/openaldriver/RlOpenALDriver.vcproj
===================================================================
--- rl/trunk/plugins/openaldriver/RlOpenALDriver.vcproj	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/plugins/openaldriver/RlOpenALDriver.vcproj	2007-02-12 23:26:20 UTC (rev 3041)
@@ -59,7 +59,7 @@
 				Name="VCLinkerTool"
 				AdditionalDependencies="RlCommon.lib RlCore.lib RlUi.lib OgreMain_d.lib ceguibase_d.lib"
 				LinkIncremental="2"
-				AdditionalLibraryDirectories="&quot;..\..\engine\common\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\core\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\multimedia\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\ui\lib\$(ConfigurationName)&quot;;..\..\dependencies\boost\lib;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\OpenAL\libs\Win32"
+				AdditionalLibraryDirectories="&quot;..\..\engine\common\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\core\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\multimedia\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\ui\lib\$(ConfigurationName)&quot;;..\..\dependencies\boost\lib;..\..\dependencies\ogrenew\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\OpenAL\libs\Win32"
 				ModuleDefinitionFile="OpenALDriverDllExports.def"
 				GenerateDebugInformation="true"
 				AssemblyDebug="1"
@@ -132,7 +132,7 @@
 				Name="VCLinkerTool"
 				AdditionalDependencies="RlCommon.lib RlCore.lib RlUi.lib OgreMain.lib ceguibase.lib"
 				OutputFile="$(OutDir)\$(ProjectName).dll"
-				AdditionalLibraryDirectories="&quot;..\..\engine\common\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\core\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\multimedia\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\ui\lib\$(ConfigurationName)&quot;;..\..\dependencies\boost\lib;&quot;..\..\dependencies\ogrenew\OgreMain\lib\$(ConfigurationName)&quot;;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\OpenAL\libs\Win32"
+				AdditionalLibraryDirectories="&quot;..\..\engine\common\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\core\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\multimedia\lib\$(ConfigurationName)&quot;;&quot;..\..\engine\ui\lib\$(ConfigurationName)&quot;;..\..\dependencies\boost\lib;..\..\dependencies\ogrenew\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\OpenAL\libs\Win32"
 				ModuleDefinitionFile="OpenALDriverDllExports.def"
 			/>
 			<Tool
@@ -201,7 +201,7 @@
 				Name="VCLinkerTool"
 				AdditionalDependencies="RlCommon.lib RlCore.lib RlUi.lib OgreMain.lib ceguibase.lib"
 				OutputFile="$(OutDir)\$(ProjectName).dll"
-				AdditionalLibraryDirectories="..\..\engine\common\lib\Release;..\..\engine\core\lib\Release;..\..\engine\multimedia\lib\Release;..\..\engine\ui\lib\Release;..\..\dependencies\boost\lib;..\..\dependencies\ogrenew\OgreMain\lib\Release;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\OpenAL\libs\Win32"
+				AdditionalLibraryDirectories="..\..\engine\common\lib\Release;..\..\engine\core\lib\Release;..\..\engine\multimedia\lib\Release;..\..\engine\ui\lib\Release;..\..\dependencies\boost\lib;..\..\dependencies\ogrenew\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\OpenAL\libs\Win32"
 				ModuleDefinitionFile="OpenALDriverDllExports.def"
 				GenerateDebugInformation="true"
 			/>

Modified: rl/trunk/tools/copy_dependencies.bat
===================================================================
--- rl/trunk/tools/copy_dependencies.bat	2007-02-12 21:35:08 UTC (rev 3040)
+++ rl/trunk/tools/copy_dependencies.bat	2007-02-12 23:26:20 UTC (rev 3041)
@@ -4,9 +4,6 @@
 
 @SET OGREHOME="%1\Dependencies\ogrenew"
 @SET OGREDEPS="%1\Dependencies\ogrenew\Dependencies"
- at SET OGREPLUGINS="%1\Dependencies\ogrenew\PlugIns"
- at SET OGRERENDERERS="%1\Dependencies\ogrenew\RenderSystems"
- at SET OGREPLATFORMS="%1\Dependencies\ogrenew\PlatformManagers"
 
 REM Verzeichnisse erzeugen
 REM ----------------------
@@ -19,26 +16,25 @@
 
 REM Ogre Dateien kopieren
 REM ---------------------
-copy "%OGREHOME%\OgreMain\lib\%BUILD%\OgreMain.dll" "%RL_DIST%"
-copy "%OGREHOME%\OgreMain\lib\%BUILD%\OgreMain_d.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\OgreMain.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\OgreMain_d.dll" "%RL_DIST%"
 
-copy "%OGREPLUGINS%\CgProgramManager\bin\%BUILD%\Plugin_CgProgramManager.dll" "%RL_DIST%"
-copy "%OGREPLUGINS%\OctreeSceneManager\bin\%BUILD%\Plugin_OctreeSceneManager.dll" "%RL_DIST%"
-copy "%OGREPLUGINS%\ParticleFx\bin\%BUILD%\Plugin_ParticleFx.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\Plugin_CgProgramManager.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\Plugin_OctreeSceneManager.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\Plugin_ParticleFx.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\Plugin_CgProgramManager_d.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\Plugin_OctreeSceneManager_d.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\Plugin_ParticleFx_d.dll" "%RL_DIST%"
 
-copy "%OGRERENDERERS%\Direct3D9\bin\%BUILD%\RenderSystem_Direct3D9.dll" "%RL_DIST%"
-copy "%OGRERENDERERS%\GL\bin\%BUILD%\RenderSystem_GL.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\RenderSystem_Direct3D9.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\RenderSystem_GL.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\RenderSystem_Direct3D9_d.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\RenderSystem_GL_d.dll" "%RL_DIST%"
 
-copy "%OGREPLATFORMS%\Win32\bin\%BUILD%\PlatFormManager_Win32.dll" "%RL_DIST%\OgrePlatform.dll"
-copy "%OGREPLATFORMS%\Win32\bin\%BUILD%\PlatFormManager_Win32.dll" "%RL_DIST%\OgrePlatform_d.dll"
+copy "%OGREHOME%\lib\OgreGUIRenderer_d.dll" "%RL_DIST%"
+copy "%OGREHOME%\lib\OgreGUIRenderer.dll" "%RL_DIST%"
 
-copy "%OGREHOME%\Samples\Common\CEGUIRenderer\bin\Debug\OgreGUIRenderer_d.dll" "%RL_DIST%"
-copy "%OGREHOME%\Samples\Common\CEGUIRenderer\bin\Release\OgreGUIRenderer.dll" "%RL_DIST%"
-
 copy "%OGREHOME%\Samples\Common\Bin\%BUILD%\cg.dll" "%RL_DIST%"
-copy "%OGREHOME%\Samples\Common\Bin\%BUILD%\freeimage.dll" "%RL_DIST%"
-copy "%OGREHOME%\Samples\Common\Bin\%BUILD%\freeimaged.dll" "%RL_DIST%"
-copy "%OGREHOME%\Samples\Common\Bin\%BUILD%\zlib1.dll" "%RL_DIST%"
 
 REM Boost Dateien kopieren
 REM ---------------------



From chrber at mail.berlios.de  Tue Feb 13 12:17:44 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Tue, 13 Feb 2007 12:17:44 +0100
Subject: [Dsa-hl-svn] r3042 - in rl/trunk: . engine/script/src plugins
Message-ID: <200702131117.l1DBHiAJ026034@sheep.berlios.de>

Author: chrber
Date: 2007-02-13 12:17:44 +0100 (Tue, 13 Feb 2007)
New Revision: 3042

Modified:
   rl/trunk/configure.in
   rl/trunk/engine/script/src/Makefile.am
   rl/trunk/plugins/Makefile.am
Log:
Corrected checks for fmod4 and OpenAL, configure will only bark, if support is requested, but headers/libs cannot be found


Modified: rl/trunk/configure.in
===================================================================
--- rl/trunk/configure.in	2007-02-12 23:26:20 UTC (rev 3041)
+++ rl/trunk/configure.in	2007-02-13 11:17:44 UTC (rev 3042)
@@ -1,6 +1,6 @@
 AC_PREREQ(2.50)
 
-AC_INIT(RL, 0.2.0)
+AC_INIT(RL, 0.3.0)
 AC_CANONICAL_TARGET
 AM_INIT_AUTOMAKE([1.6.1 foreign no-installinfo no-installman subdir-objects])
 AC_CONFIG_HEADER(engine/common/include/config.h)
@@ -10,39 +10,18 @@
 
 dnl Check for programs
 AC_LANG([C++])
-AC_PROG_CC
 AC_PROG_CXX
-AM_PROG_CC_C_O
 AC_PROG_INSTALL
 AM_PROG_LIBTOOL
 
-
-dnl GCC version check
-if test x$GCC = xyes; then
-    AC_MSG_CHECKING([version 3.x of gcc])
-    if test -n "`$CC --version 2>&1|grep '3.'`"; then
-        AC_DEFINE(EXT_HASH, 1, Use old STL hash options)
-        AC_DEFINE(GCC_3_1, 1, 3.x GCC version)
-        AC_MSG_RESULT(yes);
-    else
-        AC_MSG_RESULT(no);
-    fi
-fi
-
 # ***** DEBUGGING
-AC_ARG_ENABLE(debug,AS_HELP_STRING([--enable-debug],[enable debugging [default=no]]))
-if test "$enable_debug" = "yes"; then
-    CXXFLAGS="$CXXFLAGS -g -O0"
-else
-    CXXFLAGS="$CXXFLAGS -O2"
-fi
+AC_ARG_ENABLE([debug], AS_HELP_STRING([--enable-debug], [enable debugging @<:@default=no@:>@],
+              AC_SUBST([CXXFLAGS], ["$CXXFLAGS -g -O0"], AC_SUBST([CXXFLAGS], ["$CXXFLAGS -O2"]))))
 
 # ***** PROFILING
-AC_ARG_ENABLE(profiling,AS_HELP_STRING([--enable-profiling],[enable profiling [default=no]]))
-if test "$enable_profiling" = "yes"; then
-    CXXFLAGS="$CXXFLAGS -pg -g"
-    LDFLAGS="$LDFLAGS -pg -g"
-fi
+AC_ARG_ENABLE([profiling], AS_HELP_STRING([--enable-profiling], [enable profiling @<:@default=no@:>@],
+              AC_SUBST([CXXFLAGS], "$CXXFLAGS -pg -g")
+              AC_SUBST([LDFLAGS], "$LDFLAGS -pg -g")))
 
 # Pthreads
 CXXFLAGS="$CXXFLAGS -pthread"
@@ -54,77 +33,80 @@
 
 AC_ARG_ENABLE(tests,[  --enable-tests  enable unit testing [default=no]])
 if test "$enable_tests" = "yes"; then
-	AM_PATH_CPPUNIT(1.0.0, [], 
-		[
-			AM_CONDITIONAL(with_tests, [false])
-		  	AC_MSG_ERROR([Cannot find cppunit libs needed for testing])
-		])
-	AM_CONDITIONAL(with_tests, [true])
+    AM_PATH_CPPUNIT(1.0.0, [],
+        [
+            AM_CONDITIONAL(with_tests, [false])
+              AC_MSG_ERROR([Cannot find cppunit libs needed for testing])
+        ])
+    AM_CONDITIONAL(with_tests, [true])
 else
     AM_CONDITIONAL(with_tests, [false])
 fi
 
-
-plugins=""
 # fmod4
-AC_ARG_ENABLE(fmod4, AS_HELP_STRING([--enable-fmod4], [enable fmod 4.xx (FMODex) support @<:@default=check@:>@]),,enable_fmod4=check)
-if test "$enable_fmod4" = "yes" || test "$enable_fmod4" = "check"; then
-	AC_CHECK_LIB(fmodex, main, , 
-		[
-		  AC_MSG_ERROR([Cannot find fmod 4.xx libs])
-		])
-	AC_CHECK_HEADERS(fmodex/fmod.hpp, , 
-	    [
-	      AC_MSG_ERROR([Cannot find fmod headers])
-	    ])
-	enable_fmod4="yes"
-	plugins="$plugins fmod4driver"
-fi
+AC_ARG_ENABLE([fmod4], [AS_HELP_STRING([--enable-fmod4], [enable fmod 4.xx (FMODex) support @<:@default=check@:>@])],,[enable_fmod4=check])
+AS_IF([test "x$enable_fmod4" != xno],
+      [AC_CHECK_LIB([fmodex], [main],
+          [AC_CHECK_HEADER([fmodex/fmod.hpp],
+              [AC_SUBST([RL_AUDIOPLUGINS], ["$RL_AUDIOPLUGINS fmod4driver"])]
+              [AC_SUBST([enable_fmod4], ["yes"])],
+              [if test "x$enable_fmod4" != xcheck; then
+                  AC_MSG_ERROR([fmod 4.xx support was explicitly enabled, but headers were not found])
+              fi])
+          ],
+          [if test "x$enable_fmod4" != xcheck; then
+              AC_MSG_ERROR([fmod 4.xx support was explicitly enabled, but libraries were not found])
+           fi]
+          [AC_SUBST([enable_fmod4], ["no"])])
+      ])
 
 # openal
-AC_ARG_ENABLE(openal, AS_HELP_STRING([--enable-openal], [enable OpenAL support @<:@default=check@:>@]),,enable_openal=check)
-if test "$enable_openal" = "yes" || test "$enable_openal" = "check"; then
-	AC_CHECK_LIB(openal, main, , AC_MSG_ERROR([Cannot find OpenAL libs]))
-	AC_CHECK_HEADERS(AL/al.h, , AC_MSG_ERROR([Cannot find OpenAL headers]))
-	enable_openal="yes"
-	plugins="$plugins openaldriver"
-fi
+AC_ARG_ENABLE([openal], [AS_HELP_STRING([--enable-openal], [enable OpenAL support @<:@default=check@:>@])],,[enable_openal=check])
+AS_IF([test "x$enable_openal" != xno],
+      [AC_CHECK_LIB([openal], [main],
+          [AC_CHECK_HEADER([AL/al.h],
+              [AC_SUBST([RL_AUDIOPLUGINS], ["$RL_AUDIOPLUGINS openaldriver"])]
+              [AC_SUBST([enable_openal], ["yes"])],
+              [if test "x$enable_openal" != xcheck; then
+                  AC_MSG_ERROR([OpenAL support was explicitly enabled, but headers were not found])
+              fi])
+          ],
+          [if test "x$enable_openal" != xcheck; then
+              AC_MSG_ERROR([OpenAL support was explicitly enabled, but libraries were not found])
+           fi]
+          [AC_SUBST([enable_openal], ["no"])])
+      ])
 
 # Ogre
-PKG_CHECK_MODULES(OGRE, OGRE >= 1.4.0)
-AC_ARG_WITH(ogre-plugins,[  --with-ogre-plugins=path        Set location of Ogre plugins],[ OGRE_PLUGINDIR="$withval"], [OGRE_PLUGINDIR=`pkg-config OGRE --variable=plugindir`])
+PKG_CHECK_MODULES([OGRE], [OGRE >= 1.4.0])
+AC_ARG_WITH([ogre-plugins], [AS_HELP_STRING([--with-ogre-plugins=@<:@=DIR@:>@], [set location of Ogre plugins])] ,[OGRE_PLUGINDIR="$withval"], [OGRE_PLUGINDIR=`pkg-config OGRE --variable=plugindir`])
 AC_SUBST(OGRE_PLUGINDIR)
 
 # CEGUI
-PKG_CHECK_MODULES(CEGUI, CEGUI >= 0.5.0)
-PKG_CHECK_MODULES(CEGUIOGRE, CEGUI-OGRE)
+PKG_CHECK_MODULES([CEGUI], [CEGUI >= 0.5.0])
+PKG_CHECK_MODULES([CEGUIOGRE], [CEGUI-OGRE])
 
 # OpenSteer
-AC_CHECK_HEADERS(OpenSteer/SteerLibrary.h, , AC_MSG_ERROR([Can't find OpenSteer headers]))
-AC_CHECK_LIB(OpenSteer, main, , AC_MSG_ERROR([Can't find libOpenSteer]))
+AC_CHECK_HEADERS([OpenSteer/SteerLibrary.h], ,[AC_MSG_ERROR([Can't find OpenSteer headers])])
+AC_CHECK_LIB([OpenSteer], [main], , [AC_MSG_ERROR([Can't find libOpenSteer])])
 
 
 dnl Other stuff we need
-AC_CHECK_LIB(m, pow)
-AC_CHECK_LIB(z, gzopen)
-AC_CHECK_FUNC(snprintf, AC_DEFINE(HAVE_SNPRINTF,,snprintf))
-AC_CHECK_FUNC(vsnprintf, AC_DEFINE(HAVE_VSNPRINTF,1,vsnprintf))
 AC_CHECK_PROG(HAVE_DOXYGEN_PROG, doxygen, `which doxygen`, false)
 AC_CHECK_LIB([MadaBot], [main], [], AC_MSG_ERROR([Can't find libMadaBot]))
 
 # Newton
-AC_CHECK_LIB([Newton], [fopen], [], AC_MSG_ERROR([Can't find libNewton]) ) 
-AC_CHECK_HEADERS(Newton.h, , AC_MSG_ERROR([Can't find Newton headers]))
+AC_CHECK_LIB([Newton], [fopen], [], AC_MSG_ERROR([Can't find libNewton]) )
+AC_CHECK_HEADERS([Newton.h], , AC_MSG_ERROR([Can't find Newton headers]))
 
 # OgreNewt
-PKG_CHECK_MODULES(OgreNewt, OgreNewt >= 0.07)
+PKG_CHECK_MODULES([OgreNewt], [OgreNewt >= 0.07])
 OGRE_CFLAGS="${OGRE_CFLAGS} ${OgreNewt_CFLAGS}"
 OGRE_LIBS="${OGRE_LIBS} ${OgreNewt_LIBS}"
 
 # DSA4Werkzeug
 PKG_CHECK_MODULES(Dsa4Wz, Dsa4Wz >= 1.33.0)
 
-
 # XERCES
 AC_CHECK_HEADERS(xercesc/util/XercesVersion.hpp, ,
     [AC_MSG_ERROR([cannot find libxerces headers]) ])
@@ -145,12 +127,12 @@
 dnl determine location of ruby
 AC_PATH_PROG(ruby_path, ruby, no)
 if test $ruby_path = no; then
-	AC_MSG_ERROR(Cannot find Ruby! This program requires Ruby-1.8.0)
+    AC_MSG_ERROR(Cannot find Ruby! This program requires Ruby-1.8.0)
 fi
 
 dnl determine if the installed Ruby is suitable for us
 if `$ruby_path -e 'exit 1 if VERSION >= "1.8.0"'` ; then
-	AC_MSG_ERROR(Your Ruby is too old! At least Ruby-1.8.0 is required)
+    AC_MSG_ERROR(Your Ruby is too old! At least Ruby-1.8.0 is required)
 fi
 
 dnl locate "ruby.h", "intern.h"
@@ -161,10 +143,8 @@
 ruby_lib=`$ruby_path -r mkmf -e 'c=Config::CONFIG; libs=c[["libdir"]]+"/"+c[["LIBRUBY"]]+" "+c[["LIBS"]]; print libs'`
 RUBY_LIBS=$ruby_lib
 
-PLUGIN_DIRS=$plugins
 AC_SUBST(RUBY_CFLAGS)
 AC_SUBST(RUBY_LIBS)
-AC_SUBST(PLUGIN_DIRS)
 
 dnl Test for modified swig version
 SWIG_PROG(1.3.29-pantheon)
@@ -173,7 +153,7 @@
 
 dnl Define the directory, where RL should look for modules
 if test "x${prefix}" = "xNONE"; then
-	prefix=${ac_default_prefix}
+    prefix=${ac_default_prefix}
 fi
 dnl Must double eval here, to replace ${datadir} and after that ${prefix}
 eval RL_MODULEDIR="${datadir}"
@@ -183,23 +163,23 @@
 
 dnl Create the makefiles
 AC_CONFIG_FILES([Makefile \
-		docs/Makefile docs/src/Makefile \
-		engine/Makefile \
-		engine/ai/Makefile engine/ai/src/Makefile engine/ai/include/Makefile\
-		engine/common/Makefile engine/common/src/Makefile engine/common/include/Makefile \
-		engine/core/Makefile engine/core/src/Makefile engine/core/include/Makefile \
-		engine/dialog/Makefile engine/dialog/src/Makefile engine/dialog/include/Makefile \
-		engine/uicomponents/Makefile engine/uicomponents/src/Makefile engine/uicomponents/include/Makefile \
-		engine/ui/Makefile engine/ui/src/Makefile engine/ui/include/Makefile \
-		engine/rules/Makefile engine/rules/src/Makefile engine/rules/include/Makefile \
-		engine/script/Makefile engine/script/swig/Makefile engine/script/src/Makefile \
-		engine/startup/Makefile engine/startup/src/Makefile \
-		tests/Makefile tests/coretests/Makefile tests/rulestests/Makefile \
-		tests/multimediatests/Makefile tests/RlDialogTests/Makefile \
-		plugins/Makefile \
-		plugins/fmod4driver/Makefile plugins/fmod4driver/include/Makefile plugins/fmod4driver/src/Makefile \
-		plugins/openaldriver/Makefile plugins/openaldriver/include/Makefile plugins/openaldriver/src/Makefile \
-		tools/Makefile
+        docs/Makefile docs/src/Makefile \
+        engine/Makefile \
+        engine/ai/Makefile engine/ai/src/Makefile engine/ai/include/Makefile\
+        engine/common/Makefile engine/common/src/Makefile engine/common/include/Makefile \
+        engine/core/Makefile engine/core/src/Makefile engine/core/include/Makefile \
+        engine/dialog/Makefile engine/dialog/src/Makefile engine/dialog/include/Makefile \
+        engine/uicomponents/Makefile engine/uicomponents/src/Makefile engine/uicomponents/include/Makefile \
+        engine/ui/Makefile engine/ui/src/Makefile engine/ui/include/Makefile \
+        engine/rules/Makefile engine/rules/src/Makefile engine/rules/include/Makefile \
+        engine/script/Makefile engine/script/swig/Makefile engine/script/src/Makefile \
+        engine/startup/Makefile engine/startup/src/Makefile \
+        tests/Makefile tests/coretests/Makefile tests/rulestests/Makefile \
+        tests/multimediatests/Makefile tests/RlDialogTests/Makefile \
+        plugins/Makefile \
+        plugins/fmod4driver/Makefile plugins/fmod4driver/include/Makefile plugins/fmod4driver/src/Makefile \
+        plugins/openaldriver/Makefile plugins/openaldriver/include/Makefile plugins/openaldriver/src/Makefile \
+        tools/Makefile
     ])
 
 AC_OUTPUT

Modified: rl/trunk/engine/script/src/Makefile.am
===================================================================
--- rl/trunk/engine/script/src/Makefile.am	2007-02-12 23:26:20 UTC (rev 3041)
+++ rl/trunk/engine/script/src/Makefile.am	2007-02-13 11:17:44 UTC (rev 3042)
@@ -10,7 +10,7 @@
     $(top_builddir)/engine/dialog/src/libRlDialog.la \
     $(top_builddir)/engine/ui/src/libRlUi.la \
     $(top_builddir)/engine/rules/src/libRlRules.la \
-    $(CEGUI_LIBS) $(OGRE_LIBS) $(RUBY_LIBS) $(LIBS) \ 
+    $(CEGUI_LIBS) $(OGRE_LIBS) $(RUBY_LIBS) $(LIBS) \
     -Wl,--defsym -Wl,Init_libRlScript=Init_RlScript
 	
 libRlScript_la_SOURCES = \

Modified: rl/trunk/plugins/Makefile.am
===================================================================
--- rl/trunk/plugins/Makefile.am	2007-02-12 23:26:20 UTC (rev 3041)
+++ rl/trunk/plugins/Makefile.am	2007-02-13 11:17:44 UTC (rev 3042)
@@ -1 +1 @@
-SUBDIRS = $(PLUGIN_DIRS)
+SUBDIRS = $(RL_AUDIOPLUGINS)



From chrber at mail.berlios.de  Tue Feb 13 15:04:03 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Tue, 13 Feb 2007 15:04:03 +0100
Subject: [Dsa-hl-svn] r3043 - in rl/trunk/plugins: fmod4driver/src
	openaldriver/src
Message-ID: <200702131404.l1DE43Qq016970@sheep.berlios.de>

Author: chrber
Date: 2007-02-13 15:04:03 +0100 (Tue, 13 Feb 2007)
New Revision: 3043

Modified:
   rl/trunk/plugins/fmod4driver/src/Makefile.am
   rl/trunk/plugins/openaldriver/src/Makefile.am
Log:
Added linker flags for fmodex and openal


Modified: rl/trunk/plugins/fmod4driver/src/Makefile.am
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Makefile.am	2007-02-13 11:17:44 UTC (rev 3042)
+++ rl/trunk/plugins/fmod4driver/src/Makefile.am	2007-02-13 14:04:03 UTC (rev 3043)
@@ -7,7 +7,7 @@
      $(top_builddir)/engine/common/src/libRlCommon.la \
      $(top_builddir)/engine/core/src/libRlCore.la \
      $(top_builddir)/engine/ui/src/libRlUi.la \
-     $(OGRE_LIBS) $(CEGUIOGRE_LIBS) $(LIBS)
+     -lfmodex $(OGRE_LIBS) $(CEGUIOGRE_LIBS) $(LIBS)
 
 libRlFmod4Driver_la_SOURCES = \
 	Fmod4Config.cpp \

Modified: rl/trunk/plugins/openaldriver/src/Makefile.am
===================================================================
--- rl/trunk/plugins/openaldriver/src/Makefile.am	2007-02-13 11:17:44 UTC (rev 3042)
+++ rl/trunk/plugins/openaldriver/src/Makefile.am	2007-02-13 14:04:03 UTC (rev 3043)
@@ -7,7 +7,7 @@
     $(top_builddir)/engine/common/src/libRlCommon.la \
     $(top_builddir)/engine/core/src/libRlCore.la \
     $(top_builddir)/engine/ui/src/libRlUi.la \
-    $(RUBY_LIBS) $(OGRE_LIBS) $(CEGUI_LIBS) $(LIBS)
+    -lopenal $(RUBY_LIBS) $(OGRE_LIBS) $(CEGUI_LIBS) $(LIBS)
 
 libRlOpenALDriver_la_SOURCES = \
 	OpenALDriver.cpp \



From blakharaz at mail.berlios.de  Tue Feb 13 17:56:30 2007
From: blakharaz at mail.berlios.de (blakharaz at mail.berlios.de)
Date: Tue, 13 Feb 2007 17:56:30 +0100
Subject: [Dsa-hl-svn] r3044 - rl/trunk/engine/common/include
Message-ID: <200702131656.l1DGuU3V031292@sheep.berlios.de>

Author: blakharaz
Date: 2007-02-13 17:56:28 +0100 (Tue, 13 Feb 2007)
New Revision: 3044

Modified:
   rl/trunk/engine/common/include/FixRubyHeaders.h
Log:
Undef ruby's config.h macros (PACKAGE_NAME, ...) to remove warnings 
about duplicate defines


Modified: rl/trunk/engine/common/include/FixRubyHeaders.h
===================================================================
--- rl/trunk/engine/common/include/FixRubyHeaders.h	2007-02-13 14:04:03 UTC (rev 3043)
+++ rl/trunk/engine/common/include/FixRubyHeaders.h	2007-02-13 16:56:28 UTC (rev 3044)
@@ -30,3 +30,9 @@
 #undef sleep
 #undef strcasecmp
 #undef rename
+#ifdef HAVE_CONFIG_H
+    #undef PACKAGE_VERSION
+    #undef PACKAGE_STRING
+    #undef PACKAGE_NAME
+    #undef PACKAGE_TARNAME
+#endif



From tanis at mail.berlios.de  Tue Feb 13 21:46:41 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Tue, 13 Feb 2007 21:46:41 +0100
Subject: [Dsa-hl-svn] r3045 - modules/common/scripts
Message-ID: <200702132046.l1DKkfwX025361@sheep.berlios.de>

Author: tanis
Date: 2007-02-13 21:46:36 +0100 (Tue, 13 Feb 2007)
New Revision: 3045

Modified:
   modules/common/scripts/questsound.rb
Log:
We removed getClock, so don't use it here.

Modified: modules/common/scripts/questsound.rb
===================================================================
--- modules/common/scripts/questsound.rb	2007-02-13 16:56:28 UTC (rev 3044)
+++ modules/common/scripts/questsound.rb	2007-02-13 20:46:36 UTC (rev 3045)
@@ -16,7 +16,7 @@
 		super()
 		@mHasSound = false;
 		@mSound = nil;
-		@mSoundTimer = TimerEventSource.new($CORE.getClock() + 1000, 1000)
+		@mSoundTimer = TimerEventSource.new(0, 1000)
         @mTimerListener = QuestSoundTimer.new(self)
 		@mSoundTimer.addTimerListener( @mTimerListener )
 	end



From tanis at mail.berlios.de  Tue Feb 13 22:36:24 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Tue, 13 Feb 2007 22:36:24 +0100
Subject: [Dsa-hl-svn] r3046 - modules/common/scripts
Message-ID: <200702132136.l1DLaOdD028280@sheep.berlios.de>

Author: tanis
Date: 2007-02-13 22:36:19 +0100 (Tue, 13 Feb 2007)
New Revision: 3046

Modified:
   modules/common/scripts/npc.rb
Log:
Added missing end.

Modified: modules/common/scripts/npc.rb
===================================================================
--- modules/common/scripts/npc.rb	2007-02-13 20:46:36 UTC (rev 3045)
+++ modules/common/scripts/npc.rb	2007-02-13 21:36:19 UTC (rev 3046)
@@ -1,4 +1,4 @@
-load( "embed.rb" );
+require 'steering.rb'
 
 class TalkAction < Action
   def initialize()
@@ -64,4 +64,4 @@
 class NPC < Person
   include TalkTarget
   include BehaviourBot
-end
\ No newline at end of file
+end



From chrber at mail.berlios.de  Wed Feb 14 17:38:11 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Wed, 14 Feb 2007 17:38:11 +0100
Subject: [Dsa-hl-svn] r3047 - in rl/trunk/engine: core/src ui/include ui/src
Message-ID: <200702141638.l1EGcB9N008969@sheep.berlios.de>

Author: chrber
Date: 2007-02-14 17:38:10 +0100 (Wed, 14 Feb 2007)
New Revision: 3047

Modified:
   rl/trunk/engine/core/src/ConfigurationManager.cpp
   rl/trunk/engine/ui/include/CommandMapper.h
   rl/trunk/engine/ui/src/CommandMapper.cpp
Log:
Reworked CommandMapper so that it works with the new ConfiguratioManager


Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-13 21:36:19 UTC (rev 3046)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-14 16:38:10 UTC (rev 3047)
@@ -75,6 +75,36 @@
         // Setup input default values
         mInputSettings.insert(make_pair("Mouse Sensitivity", "4"));
         mInputSettings.insert(make_pair("Mouse Invert", "no"));
+        mInputSettings.insert(make_pair("mov_turn_left", "Q"));
+        mInputSettings.insert(make_pair("mov_turn_right", "E"));
+        mInputSettings.insert(make_pair("mov_move_left", "A"));
+        mInputSettings.insert(make_pair("mov_move_right", "D"));
+        mInputSettings.insert(make_pair("mov_move_forward", "W"));
+        mInputSettings.insert(make_pair("mov_move_backward", "S"));
+        mInputSettings.insert(make_pair("mov_jump", "Leertaste"));
+        mInputSettings.insert(make_pair("mov_run", "Umschalt links"));
+        mInputSettings.insert(make_pair("mov_sneak", "Strg links"));
+        //mInputSettings.insert(make_pair("act_run_lock", "<,|,>"));
+        mInputSettings.insert(make_pair("act_quitgame", "Ctrl+X"));
+        mInputSettings.insert(make_pair("act_closecurrentwindow", "Escape"));
+        mInputSettings.insert(make_pair("act_toggleconsole", "Tabulator"));
+        mInputSettings.insert(make_pair("act_toggledebugwindow", "F2"));
+        mInputSettings.insert(make_pair("act_togglegamelogwindow", "F3"));
+        mInputSettings.insert(make_pair("act_toggleviewmode", "F"));
+        mInputSettings.insert(make_pair("act_resetcamera", "0 (Nummernblock)"));
+        mInputSettings.insert(make_pair("act_makescreenshot", "P,Ctrl+P"));
+        mInputSettings.insert(make_pair("act_togglecollisiondebug", "L,Ctrl+L"));
+        mInputSettings.insert(make_pair("act_toggledebugvisualisation", "Ctrl+O"));
+        mInputSettings.insert(make_pair("act_togglevanitymode", "V"));
+        mInputSettings.insert(make_pair("act_usecurrentobjectdefaultaction", "R"));
+        mInputSettings.insert(make_pair("act_toggleinventorywindow", "I"));
+        mInputSettings.insert(make_pair("act_showjournalwindow ", "J"));
+        mInputSettings.insert(make_pair("act_showcharactersheet", "C"));
+        mInputSettings.insert(make_pair("act_togglecharacterstatewindow", "O"));
+        mInputSettings.insert(make_pair("act_toggleingameglobalmenu", "F10"));
+        mInputSettings.insert(make_pair("act_togglecharactercontroller", "M"));
+        mInputSettings.insert(make_pair("act_shownextdebugwindowpage ", "Ctrl+M"));
+        mInputSettings.insert(make_pair("act_showobjectactions", "U"));
 
         setRastullahCfgPath();
     }
@@ -150,17 +180,9 @@
         if (!mRastullahCfgPath.empty())
         {
             ConfigFile* configfile = new ConfigFile();
-            std::vector<Ogre::String> cfg_paths;
 
-            if (mRastullahCfgPath.find(":") == std::string::npos)
-            {
-                cfg_paths.push_back(mRastullahCfgPath);
-            }
-            else
-            {
-                // Split the path at the ':' character
-                cfg_paths = Ogre::StringUtil::split(mRastullahCfgPath, ":");
-            }
+            // Split the path at the ':' character
+            std::vector<Ogre::String> cfg_paths = Ogre::StringUtil::split(mRastullahCfgPath, ":");
 
             for (unsigned int i = 0; i < cfg_paths.size(); i++)
             {

Modified: rl/trunk/engine/ui/include/CommandMapper.h
===================================================================
--- rl/trunk/engine/ui/include/CommandMapper.h	2007-02-13 21:36:19 UTC (rev 3046)
+++ rl/trunk/engine/ui/include/CommandMapper.h	2007-02-14 16:38:10 UTC (rev 3047)
@@ -57,6 +57,11 @@
         CommandMapper();
         ~CommandMapper();
 
+        /**
+         * Creates the key -> action mapping from the key-value list
+         *
+         * @param keylist key-value list of input options
+         */
         void buildCommandMapping(const Ogre::NameValuePairList& keylist);
 
         void setMapping(MapType map, int code, const CeGuiString& actionName);

Modified: rl/trunk/engine/ui/src/CommandMapper.cpp
===================================================================
--- rl/trunk/engine/ui/src/CommandMapper.cpp	2007-02-13 21:36:19 UTC (rev 3046)
+++ rl/trunk/engine/ui/src/CommandMapper.cpp	2007-02-14 16:38:10 UTC (rev 3047)
@@ -145,36 +145,51 @@
     void CommandMapper::buildCommandMapping(const Ogre::NameValuePairList& keylist)
     {
         /** @Todo: Replace this with something not static */
-        mMovementCommands[InputManager::getSingleton().getScanCode("Q")] = getMovement("turn_left");
-        mMovementCommands[InputManager::getSingleton().getScanCode("E")] = getMovement("turn_right");
-        mMovementCommands[InputManager::getSingleton().getScanCode("W")] = getMovement("forward");
-        mMovementCommands[InputManager::getSingleton().getScanCode("S")] = getMovement("backward");
-        mMovementCommands[InputManager::getSingleton().getScanCode("A")] = getMovement("left");
-        mMovementCommands[InputManager::getSingleton().getScanCode("D")] = getMovement("right");
-        mMovementCommands[InputManager::getSingleton().getScanCode("Leertaste")] = getMovement("jump");
-
-        mKeyCommandsGlobal[getKeyCode("Ctrl+X")] = CeGuiString("quitgame");
+        /*
         mKeyCommandsGlobal[getKeyCode("F10")] = CeGuiString("toggleingameglobalmenu");
         mKeyCommandsGlobal[getKeyCode("I")] = CeGuiString("toggleinventorywindow");
         mKeyCommandsGlobal[getKeyCode("J")] = CeGuiString("showjournalwindow");
         mKeyCommandsGlobal[getKeyCode("C")] = CeGuiString("showcharactersheet");
         mKeyCommandsGlobal[getKeyCode("O")] = CeGuiString("togglecharacterstatewindow");
+        */
 
-        /*
-        for (ConfigFile::SettingsIterator it = cfgfile->getSettingsIterator("Movement");
-            it.hasMoreElements();)
+        std::vector<Ogre::String> keys;
+
+        // Extract global actions and movement actions from the list
+        for (Ogre::NameValuePairList::const_iterator it = keylist.begin(); it != keylist.end(); it++)
         {
-            String key = it.peekNextKey();
-            String setting = it.getNext();
+            // Split the path at the ',' character
+            keys = Ogre::StringUtil::split(it->second, ",");
 
-            mMovementCommands[InputManager::getSingleton().getScanCode(key)] = getMovement(setting);
-            LOG_MESSAGE(Logger::UI,
-                Ogre::String("Key ") + key    + " ("
-                + StringConverter::toString(InputManager::getSingleton().getScanCode(key))
-                + ") is assigned to movement "    + setting+" ("
-                + StringConverter::toString(getMovement(setting))+")");
+            // We got a movement action
+            if (it->first.find("mov_") != std::string::npos)
+            {
+                for (int i = 0; i < keys.size(); i++)
+                {
+                    mMovementCommands[InputManager::getSingleton().getScanCode(keys[i])] = getMovement(it->first);
+                    LOG_MESSAGE(Logger::UI,
+                        Ogre::String("Key ") + keys[i] + " ("
+                        + StringConverter::toString(InputManager::getSingleton().getScanCode(keys[i]))
+                        + ") is assigned to movement " + it->first +" ("
+                        + StringConverter::toString(getMovement(it->first))+")");
+                }
+            }
+
+            // We got a global action
+            if (it->first.find("act_") != std::string::npos)
+            {
+                for (int i = 0; i < keys.size(); i++)
+                {
+                    mKeyCommandsGlobal[getKeyCode(keys[i])] = CeGuiString(it->first);
+                    LOG_MESSAGE(Logger::UI,
+                        Ogre::String("Key ") + keys[i] + " (" + StringConverter::toString(getKeyCode(keys[i]))
+                        + ") is assigned to command " + it->first +" globally");
+                }
+            }
         }
 
+        /*
+
         for (ConfigFile::SettingsIterator it = cfgfile->getSettingsIterator("Global keys");
             it.hasMoreElements();)
         {
@@ -271,43 +286,43 @@
 
     MovementState CommandMapper::getMovement(const Ogre::String &movementDescription)
     {
-        if (movementDescription == "left")
+        if (movementDescription == "mov_move_left")
         {
             return MOVE_LEFT;
         }
-        else if (movementDescription == "right")
+        else if (movementDescription == "mov_move_right")
         {
             return MOVE_RIGHT;
         }
-        else if (movementDescription == "forward")
+        else if (movementDescription == "mov_move_forward")
         {
             return MOVE_FORWARD;
         }
-        else if (movementDescription == "backward")
+        else if (movementDescription == "mov_move_backward")
         {
             return MOVE_BACKWARD;
         }
-        else if (movementDescription == "turn_left")
+        else if (movementDescription == "mov_turn_left")
         {
             return TURN_LEFT;
         }
-        else if (movementDescription == "turn_right")
+        else if (movementDescription == "mov_turn_right")
         {
             return TURN_RIGHT;
         }
-        else if (movementDescription == "run")
+        else if (movementDescription == "mov_run")
         {
             return MOVE_RUN;
         }
-        else if (movementDescription == "sneak")
+        else if (movementDescription == "mov_sneak")
         {
             return MOVE_SNEAK;
         }
-        else if (movementDescription == "jump")
+        else if (movementDescription == "mov_jump")
         {
             return MOVE_JUMP;
         }
-        else if (movementDescription == "run_lock")
+        else if (movementDescription == "mov_run_lock")
         {
             return MOVE_RUN_LOCK;
         }



From chrber at mail.berlios.de  Wed Feb 14 17:41:02 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Wed, 14 Feb 2007 17:41:02 +0100
Subject: [Dsa-hl-svn] r3048 - modules/common/scripts
Message-ID: <200702141641.l1EGf2Uf009381@sheep.berlios.de>

Author: chrber
Date: 2007-02-14 17:40:51 +0100 (Wed, 14 Feb 2007)
New Revision: 3048

Modified:
   modules/common/scripts/global-actions.rb
Log:
Added act_ to actions

Modified: modules/common/scripts/global-actions.rb
===================================================================
--- modules/common/scripts/global-actions.rb	2007-02-14 16:38:10 UTC (rev 3047)
+++ modules/common/scripts/global-actions.rb	2007-02-14 16:40:51 UTC (rev 3048)
@@ -2,7 +2,7 @@
 
 class ShowActionMenuAction < Action
   def initialize
-    super("showactions", "Aktionen anzeigen")
+    super("act_showactions", "Aktionen anzeigen")
   end
 
   def doAction(object, actor, target)
@@ -12,7 +12,7 @@
 
 class QuitGameAction < Action
   def initialize
-    super("quitgame", "Das Spiel beenden")
+    super("act_quitgame", "Das Spiel beenden")
   end
 
   def doAction(object, actor, target)
@@ -22,7 +22,7 @@
 
 class ToggleConsoleAction < Action
   def initialize
-    super("toggleconsole", "Konsole zeigen/verstecken")
+    super("act_toggleconsole", "Konsole zeigen/verstecken")
   end
   
   def doAction(object, actor, target)
@@ -32,7 +32,7 @@
 
 class ToggleDebugWindowAction < Action
   def initialize
-    super("toggledebugwindow", "DebugWindow zeigen/verstecken")
+    super("act_toggledebugwindow", "DebugWindow zeigen/verstecken")
   end
 
   def doAction(object, actor, target)
@@ -42,7 +42,7 @@
 
 class ToggleGameLogWindowAction < Action
     def initialize
-        super("togglegamelogwindow", "Game Log zeigen/verstecken")
+        super("act_togglegamelogwindow", "Game Log zeigen/verstecken")
     end
 
     def doAction(object, actor, target)
@@ -52,7 +52,7 @@
 
 class ToggleViewModeAction < Action
   def initialize
-    super("toggleviewmode", "First/ThirdPerson umschalten")
+    super("act_toggleviewmode", "First/ThirdPerson umschalten")
   end
 
   def doAction(object, actor, target)
@@ -63,7 +63,7 @@
 
 class ToggleInGameGlobalMenuAction < Action
   def initialize
-    super("toggleingameglobalmenu", "Spielmen? anzeigen")
+    super("act_toggleingameglobalmenu", "Spielmen? anzeigen")
   end
 
   def doAction(object, actor, target)
@@ -73,7 +73,7 @@
 
 class ToggleInventoryAction < Action
 	def initialize
-		super("toggleinventorywindow", "Das Inventar des aktiven Helden anzeigen")
+		super("act_toggleinventorywindow", "Das Inventar des aktiven Helden anzeigen")
 	end
 	
 	def doAction(object, actor, target)
@@ -83,7 +83,7 @@
 
 class ResetCameraAction < Action
   def initialize
-    super("resetcamera", "Kamera zur?cksetzen")
+    super("act_resetcamera", "Kamera zur?cksetzen")
   end
 
   def doAction(object, actor, target)
@@ -94,7 +94,7 @@
 
 class MakeScreenshotAction < Action
   def initialize
-    super("makescreenshot", "Screenshot erstellen")
+    super("act_makescreenshot", "Screenshot erstellen")
   end
   
   def doAction(object, actor, target)
@@ -104,7 +104,7 @@
 
 class ToggleCollisionDebugAction < Action
   def initialize
-    super("togglecollisiondebug", "Kollisionsk?rper anzeigen")
+    super("act_togglecollisiondebug", "Kollisionsk?rper anzeigen")
   end
   
   def doAction(object, actor, target)
@@ -114,7 +114,7 @@
 
 class ToggleDebugVisualisationAction < Action
   def initialize
-    super("toggledebugvisualisation", "Debug-Helfer anzeigen")
+    super("act_toggledebugvisualisation", "Debug-Helfer anzeigen")
     @isShown = false
   end
   
@@ -130,7 +130,7 @@
 
 class ToggleCharacterStateWindowAction < Action
     def initialize
-        super("togglecharacterstatewindow", "Charakterstatus zeigen/verstecken")
+        super("act_togglecharacterstatewindow", "Charakterstatus zeigen/verstecken")
     end
 
     def doAction(object, actor, target)
@@ -140,7 +140,7 @@
 
 class ShowCharacterSheetAction < Action
   def initialize
-    super("showcharactersheet", "Charakterblatt des aktiven Helden anzeigen")
+    super("act_showcharactersheet", "Charakterblatt des aktiven Helden anzeigen")
   end
 
   def doAction(object, actor, target)
@@ -150,7 +150,7 @@
 
 class ShowTargetWindowAction < Action
   def initialize
-    super("showtargetwindow", "Zielauswahl")
+    super("act_showtargetwindow", "Zielauswahl")
   end
 
   def doAction(object, actor, target)
@@ -160,7 +160,7 @@
 
 class ShowJournalWindowAction < Action
   def initialize
-    super("showjournalwindow", "Tagebuch")
+    super("act_showjournalwindow", "Tagebuch")
   end
 
   def doAction(object, actor, target)
@@ -180,7 +180,7 @@
 
 class ShowAboutWindowAction < Action
   def initialize
-    super("showaboutwindow", "?ber")
+    super("act_showaboutwindow", "?ber")
   end
   
   def doAction(object, actor, target)
@@ -190,7 +190,7 @@
 
 class ShowSoundConfigAction < Action
   def initialize
-    super("showsoundconfig", "Soundeinstellungen")
+    super("act_showsoundconfig", "Soundeinstellungen")
   end
 
   def doAction(object, actor, target)
@@ -200,7 +200,7 @@
 
 class ShowLogfilesAction < Action
   def initialize
-    super("showlogfiles", "Logfiles anzeigen")
+    super("act_showlogfiles", "Logfiles anzeigen")
   end
 
   def doAction(object, actor, target)
@@ -210,7 +210,7 @@
 
 class ShowNextDebugWindowPageAction < Action
   def initialize
-    super("shownextdebugwindowpage", "Zur n?chsten Info-Seite wechseln")
+    super("act_shownextdebugwindowpage", "Zur n?chsten Info-Seite wechseln")
   end
 
   def doAction(object, actor, target)
@@ -220,7 +220,7 @@
 
 class CloseCurrentWindowAction < Action
   def initialize
-    super("closecurrentwindow", "Oberstes Fenster schliessen")
+    super("act_closecurrentwindow", "Oberstes Fenster schliessen")
   end
   
   def doAction(object, actor, target)
@@ -230,7 +230,7 @@
 
 class ToggleCharacterControllerAction < Action
   def initialize
-    super("togglecharactercontroller",
+    super("act_togglecharactercontroller",
         "Freeflight- / Movement-Controller umschalten")
   end
 



From pnyx at mail.berlios.de  Thu Feb 15 15:24:46 2007
From: pnyx at mail.berlios.de (pnyx at mail.berlios.de)
Date: Thu, 15 Feb 2007 15:24:46 +0100
Subject: [Dsa-hl-svn] r3049 - in modules/ruchin: maps materials/textures
	models
Message-ID: <200702151424.l1FEOkpl022283@sheep.berlios.de>

Author: pnyx
Date: 2007-02-15 15:24:00 +0100 (Thu, 15 Feb 2007)
New Revision: 3049

Added:
   modules/ruchin/materials/textures/metal.jpg
   modules/ruchin/models/Ruchin_Stadtwache.material
   modules/ruchin/models/Ruchin_Stadtwache.mesh
Modified:
   modules/ruchin/maps/ruchin.scene
   modules/ruchin/models/Ruchin_map.mesh
Log:
Stadtwache WIP

Modified: modules/ruchin/maps/ruchin.scene
===================================================================
--- modules/ruchin/maps/ruchin.scene	2007-02-14 16:40:51 UTC (rev 3048)
+++ modules/ruchin/maps/ruchin.scene	2007-02-15 14:24:00 UTC (rev 3049)
@@ -210,5 +210,21 @@
   
 
 		</node>
+		
+		<node name="Ruchin_Stadtwache" id="28" >
+			<position x="107.681" y="4.66676" z="47.1081" />
+			<rotation qx="0.0" qy="0.0" qz="0.0" qw="1.0" />
+			<scale x="1.0" y="1.0" z="1.0" />
+			<entity
+				name="Ruchin_Stadtwache"
+				id="2"
+				meshFile ="Ruchin_Stadtwache.mesh"
+				materialFile="Stadtwache.material"
+				castsShadow="false"
+			/>
+
+  
+
+		</node>
 	</nodes>
 </scene>
\ No newline at end of file

Added: modules/ruchin/materials/textures/metal.jpg
===================================================================
(Binary files differ)


Property changes on: modules/ruchin/materials/textures/metal.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: modules/ruchin/models/Ruchin_Stadtwache.material
===================================================================
--- modules/ruchin/models/Ruchin_Stadtwache.material	2007-02-14 16:40:51 UTC (rev 3048)
+++ modules/ruchin/models/Ruchin_Stadtwache.material	2007-02-15 14:24:00 UTC (rev 3049)
@@ -0,0 +1,80 @@
+
+material Ruchin_Stadtwache/Stein
+{
+	technique
+	{
+		pass
+		{
+			ambient 0.341176 0.341176 0.341176 1
+			specular 0 0 0 1 10
+
+			texture_unit
+			{
+				texture_alias 0
+				texture Ruchin_stadtmauer.png
+			}
+		}
+
+	}
+
+}
+
+material Ruchin_Stadtwache/Metall
+{
+	technique
+	{
+		pass
+		{
+			ambient 0 0 0 1
+			specular 0 0 0 1 10
+
+			texture_unit
+			{
+				texture_alias 0
+				texture metal.jpg
+			}
+		}
+
+	}
+
+}
+
+material Ruchin_Stadtwache/Holz
+{
+	technique
+	{
+		pass
+		{
+			ambient 0 0 0 1
+			specular 0 0 0 1 10
+
+			texture_unit
+			{
+				texture_alias 0
+				texture ruchin_atlasmap.dds
+			}
+		}
+
+	}
+
+}
+
+material Ruchin_Stadtwache/Schiefer
+{
+	technique
+	{
+		pass
+		{
+			ambient 0.623529 0.623529 0.623529 1
+			specular 0 0 0 1 10
+
+			texture_unit
+			{
+				texture_alias 0
+				texture arc_schieferdach.png
+			}
+		}
+
+	}
+
+}

Added: modules/ruchin/models/Ruchin_Stadtwache.mesh
===================================================================
(Binary files differ)


Property changes on: modules/ruchin/models/Ruchin_Stadtwache.mesh
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: modules/ruchin/models/Ruchin_map.mesh
===================================================================
(Binary files differ)



From pnyx at mail.berlios.de  Thu Feb 15 15:27:20 2007
From: pnyx at mail.berlios.de (pnyx at mail.berlios.de)
Date: Thu, 15 Feb 2007 15:27:20 +0100
Subject: [Dsa-hl-svn] r3050 - modules/ruchin/models
Message-ID: <200702151427.l1FERKOT022535@sheep.berlios.de>

Author: pnyx
Date: 2007-02-15 15:27:17 +0100 (Thu, 15 Feb 2007)
New Revision: 3050

Modified:
   modules/ruchin/models/Ruchin_map.mesh
Log:
Ground fixed

Modified: modules/ruchin/models/Ruchin_map.mesh
===================================================================
(Binary files differ)



From chrber at mail.berlios.de  Thu Feb 15 19:25:07 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Thu, 15 Feb 2007 19:25:07 +0100
Subject: [Dsa-hl-svn] r3051 - in rl/trunk/engine: core/include core/src
	ui/src
Message-ID: <200702151825.l1FIP7qS003242@sheep.berlios.de>

Author: chrber
Date: 2007-02-15 19:25:06 +0100 (Thu, 15 Feb 2007)
New Revision: 3051

Modified:
   rl/trunk/engine/core/include/ConfigurationManager.h
   rl/trunk/engine/core/include/CoreSubsystem.h
   rl/trunk/engine/core/src/ConfigurationManager.cpp
   rl/trunk/engine/core/src/CoreSubsystem.cpp
   rl/trunk/engine/ui/src/AboutWindow.cpp
   rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp
Log:
Moved the getEngine* functions to CoreSubsystem, because they make more sense there


Modified: rl/trunk/engine/core/include/ConfigurationManager.h
===================================================================
--- rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-15 14:27:17 UTC (rev 3050)
+++ rl/trunk/engine/core/include/ConfigurationManager.h	2007-02-15 18:25:06 UTC (rev 3051)
@@ -16,7 +16,8 @@
 
 /**
  * \file ConfigurationManager.h
- * Definiert die abstrakte Basisklasse f?r das Konfigurationsmanagement.
+ *
+ * Declaration of the ConfigurationManager subsystem
  */
 
 #ifndef __RL_CONFIGURATIONMANAGER_H__
@@ -33,6 +34,13 @@
 
 namespace rl
 {
+    /**
+     * The ConfigurationManager subsystem class
+     *
+     * It provides a convenient way for other subsystems to access values read from the
+     * configuration files. If no configuration file is available, sane default values are
+     * provided so that Rastullah will work properly on most systems.
+     */
     class _RlCoreExport ConfigurationManager : protected Ogre::Singleton<ConfigurationManager>
     {
         public:
@@ -214,18 +222,7 @@
              */
             Logger::LogLevel getLogLevel() const;
 
-            Ogre::String getEngineVersionString() const;
-            Ogre::String getEngineVersionName() const;
-            long         getEngineBuildNumber() const;
-
             /**
-             * Returns the text displayed in the "About Application" window
-             *
-             * @return text displayed in "About Application" window
-             */
-            const rl::CeGuiString& getAboutText() const;
-
-            /**
              * Loads configuration files from the configuration directories
              *
              * Loads up to four configuration files (systemwide, user, current

Modified: rl/trunk/engine/core/include/CoreSubsystem.h
===================================================================
--- rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-15 14:27:17 UTC (rev 3050)
+++ rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-15 18:25:06 UTC (rev 3051)
@@ -43,7 +43,6 @@
 class ActorManager;
 class GameEventManager;
 class XmlResourceManager;
-class ConfigurationManager;
 class SoundManager;
 class DebugVisualsManager;
 class JobScheduler;
@@ -100,6 +99,10 @@
 
     bool isInitialized() const;
 
+    Ogre::String getEngineVersionString() const;
+    Ogre::String getEngineVersionName() const;
+    long         getEngineBuildNumber() const;
+
     /**
      * Retrieves a pointer to the current render window.
      *
@@ -131,7 +134,6 @@
     AnimationManager* mAnimationManager;
     ActorManager* mActorManager;
     GameEventManager* mGameEventManager;
-    ConfigurationManager* mConfigurationManager;
     SoundManager* mSoundManager;
     DebugVisualsManager* mDebugVisualsManager;
     JobScheduler* mJobScheduler;

Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-15 14:27:17 UTC (rev 3050)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-15 18:25:06 UTC (rev 3051)
@@ -14,6 +14,12 @@
  *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
  */
 
+/**
+ * \file ConfigurationManager.h
+ *
+ * Implementation of the ConfigurationManager subsystem
+ */
+
 #include "ConfigurationManager.h"
 #include "CoreSubsystem.h"
 
@@ -385,18 +391,6 @@
             "Log Level"));
     }
 
-    Ogre::String ConfigurationManager::getEngineVersionString() const
-    {
-        static Ogre::String version = "0.2.0";
-        return version;
-    }
-
-    Ogre::String ConfigurationManager::getEngineVersionName() const
-    {
-        static Ogre::String version = "Internal Build";
-        return version;
-    }
-
     Ogre::String ConfigurationManager::getStringSetting(const ConfigurationSection& section,
         const Ogre::String& key) const
     {
@@ -504,43 +498,6 @@
         }
     }
 
-    static const Ogre::String sMonths[] =
-            {"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug",
-             "Sep", "Oct", "Nov", "Dec"};
-
-    /// __DATE__ sieht ca. so aus : Nov 08 2005
-    long parseDate(char* date)
-    {
-        Ogre::String dateStr = Ogre::String(date);
-        Ogre::String monthStr = dateStr.substr(0,3);
-        int day = Ogre::StringConverter::parseInt( dateStr.substr(4,2) );
-        int year = Ogre::StringConverter::parseInt( dateStr.substr(7,4) );
-        int month = 0;
-
-        while( month < 12 && monthStr.compare(sMonths[month]) != 0 )
-            month++;
-
-        return /* Jahr */          year * 100000 +
-               /* Monat */     (month+1) * 1000 +
-               /* Tag */           day * 10 +
-               /* Sub-Version */     0;
-    }
-
-    long ConfigurationManager::getEngineBuildNumber() const
-    {
-        static long buildNumber = parseDate(__DATE__);
-        return buildNumber;
-    }
-
-
-    const CeGuiString& ConfigurationManager::getAboutText() const
-    {
-        static CeGuiString aboutText =
-            "Rastullahs Lockenpracht\n\nCopyright 2003-2006 Team Pantheon\
-\n\nBenutzte Bibliotheken: Ogre, fmod, Newton, boost, ...";
-        return aboutText;
-    }
-
     Ogre::String ConfigurationManager::getKeymap() const
     {
         return Ogre::String("config/keymap-german.xml");

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-15 14:27:17 UTC (rev 3050)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-15 18:25:06 UTC (rev 3051)
@@ -47,8 +47,8 @@
 
 template<> rl::CoreSubsystem* Singleton<rl::CoreSubsystem>::ms_Singleton = 0;
 
-namespace rl {
-
+namespace rl
+{
     CoreSubsystem::CoreSubsystem()
         : Singleton<CoreSubsystem>(),
         mWorld(NULL),
@@ -69,7 +69,6 @@
         mAnimationManager(NULL),
         mActorManager(NULL),
         mGameEventManager(NULL),
-        mConfigurationManager(NULL),
         mSoundManager(NULL),
         mDebugVisualsManager(NULL),
         mJobScheduler(NULL),
@@ -92,7 +91,7 @@
         delete mPhysicsManager;
         delete mXmlResourceManager;
         delete mScriptWrapper;
-        delete mConfigurationManager;
+        delete ConfigurationManager::getSingletonPtr();
         delete mSoundManager;
         delete mOgreRoot;
         delete mRubyInterpreter;
@@ -150,7 +149,6 @@
 
     bool CoreSubsystem::initializeCoreSubsystem()
     {
-        mConfigurationManager = ConfigurationManager::getSingletonPtr();
         // By not specifying the first two parameters, OGRE will not try
         // to load plugins.cfg and ogre.cfg
         mOgreRoot = new Root("", "", ConfigurationManager::getSingleton().getOgreLogFile());
@@ -199,9 +197,9 @@
 
         std::stringstream name;
         name << "Rastullahs Lockenpracht - ";
-        name << ConfigurationManager::getSingleton().getEngineVersionString() << " ";
-        name << ConfigurationManager::getSingleton().getEngineVersionName() << " [";
-        name << ConfigurationManager::getSingleton().getEngineBuildNumber() << "]";
+        name << getEngineVersionString() << " ";
+        name << getEngineVersionName() << " [";
+        name << getEngineBuildNumber() << "]";
 
         // Get width and height of the RenderWindow from the "Video Mode" setting
         Ogre::String VideoMode = ConfigurationManager::getSingleton().getStringSetting(
@@ -399,8 +397,7 @@
 
     void CoreSubsystem::loadModule(ContentModule* module)
     {
-        if (module->getMinimumEngineVersion()
-            > ConfigurationManager::getSingleton().getEngineBuildNumber())
+        if (module->getMinimumEngineVersion() > getEngineBuildNumber())
         {
             Throw(
                 rl::RuntimeException,
@@ -409,7 +406,7 @@
                 + " needs engine >="
                 + StringConverter::toString(module->getMinimumEngineVersion())
                 + " but engine is "
-                + StringConverter::toString(ConfigurationManager::getSingleton().getEngineBuildNumber()));
+                + StringConverter::toString(getEngineBuildNumber()));
         }
 
         StringVector deps = module->getDependencies();
@@ -468,7 +465,39 @@
         return mWorld;
     }
 
+    Ogre::String CoreSubsystem::getEngineVersionString() const
+    {
+        static Ogre::String version = "0.3.0";
+        return version;
+    }
 
+    Ogre::String CoreSubsystem::getEngineVersionName() const
+    {
+        static Ogre::String version = "Internal Build";
+        return version;
+    }
+
+    long CoreSubsystem::getEngineBuildNumber() const
+    {
+        static const Ogre::String sMonths[] =
+        {"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug",
+         "Sep", "Oct", "Nov", "Dec"};
+
+        Ogre::String dateStr = Ogre::String(__DATE__);
+        Ogre::String monthStr = dateStr.substr(0,3);
+        int day = Ogre::StringConverter::parseInt(dateStr.substr(4,2));
+        int year = Ogre::StringConverter::parseInt(dateStr.substr(7,4));
+        int month = 0;
+
+        while( month < 12 && monthStr.compare(sMonths[month]) != 0 )
+            month++;
+
+        return /* Jahr */          year * 100000 +
+               /* Monat */     (month+1) * 1000 +
+               /* Tag */           day * 10 +
+               /* Sub-Version */     0;
+    }
+
     RubyInterpreter* CoreSubsystem::getRubyInterpreter()
     {
         return mRubyInterpreter;

Modified: rl/trunk/engine/ui/src/AboutWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/AboutWindow.cpp	2007-02-15 14:27:17 UTC (rev 3050)
+++ rl/trunk/engine/ui/src/AboutWindow.cpp	2007-02-15 18:25:06 UTC (rev 3051)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -14,7 +14,6 @@
  *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
  */
 #include "AboutWindow.h"
-#include "ConfigurationManager.h"
 #include "CoreSubsystem.h"
 #include "ContentModule.h"
 
@@ -23,26 +22,25 @@
 namespace rl {
 
 AboutWindow::AboutWindow() :
-	CeGuiWindow("AboutWindow.xml", WND_MOUSE_INPUT)
+    CeGuiWindow("AboutWindow.xml", WND_MOUSE_INPUT)
 {
-	const ConfigurationManager& confMan = ConfigurationManager::getSingleton();
+    getWindow("AboutWindow/Text")->setText("Rastullahs Lockenpracht\n\nCopyright 2003-2006 Team Pantheon\
+\n\nBenutzte Bibliotheken: Ogre, fmod, Newton, boost, ...");
+    getWindow("AboutWindow/EngineText")->setText(
+        CoreSubsystem::getSingleton().getEngineVersionString()
+        + "("
+        + CoreSubsystem::getSingleton().getEngineVersionName()
+        + "), Build "
+        + Ogre::StringConverter::toString(
+                CoreSubsystem::getSingleton().getEngineBuildNumber()));
 
-	getWindow("AboutWindow/Text")->setText(confMan.getAboutText());
-	getWindow("AboutWindow/EngineText")->setText(
-		confMan.getEngineVersionString()
-		+ "("
-		+ confMan.getEngineVersionName()
-		+ "), Build "
-		+ Ogre::StringConverter::toString(
-				confMan.getEngineBuildNumber()));
+    getWindow("AboutWindow/ModuleText")->setText(
+        CoreSubsystem::getSingleton().getActiveAdventureModule()->getName());
 
-	getWindow("AboutWindow/ModuleText")->setText(
-		CoreSubsystem::getSingleton().getActiveAdventureModule()->getName());
+    bindCloseToCloseButton();
+    bindClickToCloseWindow(getWindow("AboutWindow/CloseButton"));
 
-	bindCloseToCloseButton();
-	bindClickToCloseWindow(getWindow("AboutWindow/CloseButton"));
-
-	centerWindow();
+    centerWindow();
 }
 
 }

Modified: rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp	2007-02-15 14:27:17 UTC (rev 3050)
+++ rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp	2007-02-15 18:25:06 UTC (rev 3051)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -17,7 +17,7 @@
 
 #include "UiPrerequisites.h"
 
-#include "ConfigurationManager.h"
+#include "CoreSubsystem.h"
 #include "MainMenuEngineWindow.h"
 
 using namespace CEGUI;
@@ -25,14 +25,14 @@
 
 namespace rl {
 
-	MainMenuEngineWindow::MainMenuEngineWindow() :
-		CeGuiWindow("mainmenuenginewindow.xml", WND_SHOW, false)
-	{
-		getWindow("MainMenu/EngineVersion")->setText(
-			ConfigurationManager::getSingleton().getEngineVersionString()+
-			" ("+StringConverter::toString(ConfigurationManager::getSingleton().getEngineBuildNumber())+")");
+    MainMenuEngineWindow::MainMenuEngineWindow() :
+        CeGuiWindow("mainmenuenginewindow.xml", WND_SHOW, false)
+    {
+        getWindow("MainMenu/EngineVersion")->setText(
+            CoreSubsystem::getSingleton().getEngineVersionString()+
+            " ("+StringConverter::toString(CoreSubsystem::getSingleton().getEngineBuildNumber())+")");
         mWindow->setAlwaysOnTop(false);
         mWindow->setModalState(false);
         mWindow->moveToBack();
-	}
+    }
 }



From tanis at mail.berlios.de  Fri Feb 16 22:36:06 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Fri, 16 Feb 2007 22:36:06 +0100
Subject: [Dsa-hl-svn] r3052 - in rl/trunk: engine/core/include
	engine/core/src plugins/fmod4driver/src
Message-ID: <200702162136.l1GLa674014292@sheep.berlios.de>

Author: tanis
Date: 2007-02-16 22:35:47 +0100 (Fri, 16 Feb 2007)
New Revision: 3052

Modified:
   rl/trunk/engine/core/include/SoundDriver.h
   rl/trunk/engine/core/src/ActorManager.cpp
   rl/trunk/engine/core/src/SoundDriver.cpp
   rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp
Log:
SoundDriver now has overloaded createXXX functions, that load the resources themselves.
Made comments in Sound classes MSVC compatible.

Modified: rl/trunk/engine/core/include/SoundDriver.h
===================================================================
--- rl/trunk/engine/core/include/SoundDriver.h	2007-02-15 18:25:06 UTC (rev 3051)
+++ rl/trunk/engine/core/include/SoundDriver.h	2007-02-16 21:35:47 UTC (rev 3052)
@@ -24,12 +24,7 @@
 {
     class ListenerMovable;
 
-    /**
-     * Diese Klasse dient zur Definition einer Schnittstelle
-     * zu den m???glichen Soundbibliotheken. Sie geben Preis, ob
-     * ein Treiber vorhanden ist oder nicht. Der Nulltreiber
-     * existiert dabei immer.
-     */
+    /// Abstract super class of all API specific sound drivers.
     class _RlCoreExport SoundDriver
     {
     public:
@@ -37,7 +32,8 @@
         SoundDriver(Ogre::ResourceManager* soundResourceManager);
         /// Der Destruktor
         virtual ~SoundDriver();
-        /// Zeigt an, ob der Treiber funktionsf???hig ist.
+
+        /// returns true, if the driver can work on the current system. False else.
         virtual bool isDriverAvailable() = 0;
 
         /** Initialize driver
@@ -53,9 +49,12 @@
         virtual void update() = 0;
         /// Einen Sound-Stream mit Resource erzeugen
         virtual Sound* createStream(const SoundResourcePtr &res);
+        virtual Sound* createStream(const Ogre::String& name);
         /// Einen Sound-Sample mit Resource erzeugen
         virtual Sound* createSample(const SoundResourcePtr &res);
+        virtual Sound* createSample(const Ogre::String& name);
 
+
         /// Destroy a sound created by this driver. Do not call the Sound destructor yourself!
         virtual void destroySound(Sound*);
 
@@ -63,20 +62,18 @@
         virtual ListenerMovable *createListener(const Ogre::String &name) = 0;
 
 
-        /// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
+        /// Set attenuation of the volume with distance. f influences
+        /// volume like this: relative volume = 1/(f*distance)
         virtual void setRolloffFactor(const Ogre::Real& f) = 0;
         virtual const Ogre::Real getRolloffFactor() = 0;
-        /// Die Standardlautst???rke f???r Musik einstellen
+
         void setDefaultMusicVolume(const Ogre::Real& vol);
-        /// Die Standardlautst???rke f???r Musik zur???ckgeben.
         const Ogre::Real getDefaultMusicVolume() const;
-        /// Die Standardlautst???rke f???r Musik einstellen
+
         void setDefaultSoundVolume(const Ogre::Real& vol);
-        /// Die Standardlautst???rke f???r Musik zur???ckgeben.
         const Ogre::Real getDefaultSoundVolume() const;
-        /// Die Lautst???rke aller Sounds
+
         virtual void setMasterVolume(const Ogre::Real& vol);
-        /// Die Standardlautst???rke f???r Musik zur???ckgeben.
         const Ogre::Real getMasterVolume() const;
 
         /**
@@ -95,7 +92,7 @@
         virtual void applySettings(const Ogre::NameValuePairList& settings);
 
     protected:
-        static Ogre::ResourceManager* sSoundResourceManager;
+        Ogre::ResourceManager* mSoundResourceManager;
 
         SoundSet mStreamSet;
         SoundSet mSampleSet;

Modified: rl/trunk/engine/core/src/ActorManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ActorManager.cpp	2007-02-15 18:25:06 UTC (rev 3051)
+++ rl/trunk/engine/core/src/ActorManager.cpp	2007-02-16 21:35:47 UTC (rev 3052)
@@ -192,9 +192,7 @@
         Actor* actor = 0;
         try
         {
-            Sound* sm = SoundManager::getSingleton().
-				getActiveDriver()->createSample(SoundManager::getSingleton().load(soundfile,
-                    ResourceGroupManager::AUTODETECT_RESOURCE_GROUP_NAME));
+            Sound* sm = SoundManager::getSingleton().getActiveDriver()->createSample(soundfile);
             SoundObject* so = new SoundObject(sm, soundfile);
             actor = new Actor(uniquename, so);
             mActors.insert(ActorPtrPair(uniquename,actor));  
@@ -222,9 +220,7 @@
         Actor* actor = 0;
         try
         {
-            Sound* sm = SoundManager::getSingleton().
-                getActiveDriver()->createStream(SoundManager::getSingleton().load(soundfile,
-                    ResourceGroupManager::AUTODETECT_RESOURCE_GROUP_NAME));
+            Sound* sm = SoundManager::getSingleton().getActiveDriver()->createStream(soundfile);
             SoundObject* so = new SoundObject(sm, soundfile);
 
             actor = new Actor(uniquename, so);

Modified: rl/trunk/engine/core/src/SoundDriver.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundDriver.cpp	2007-02-15 18:25:06 UTC (rev 3051)
+++ rl/trunk/engine/core/src/SoundDriver.cpp	2007-02-16 21:35:47 UTC (rev 3052)
@@ -1,176 +1,197 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-#include "SoundDriver.h"
-#include "ConfigFile.h"
-#include <OgreStringConverter.h>
-
-using namespace Ogre;
-
-namespace rl
-{
-
-Ogre::ResourceManager* SoundDriver::sSoundResourceManager = NULL;
-
-SoundDriver::SoundDriver(ResourceManager* soundResourceManager)
- :  mStreamSet(),
-    mSampleSet(),
-    mDefaultMusicVolume(40),
-    mDefaultSoundVolume(100),
-    mMasterVolume(100)
-{
-    sSoundResourceManager = soundResourceManager;
-}
-
-SoundDriver::~SoundDriver()
-{
-    SoundSet sounds;
-    sounds.insert(mSampleSet.begin(), mSampleSet.end());
-    sounds.insert(mSampleSet.begin(), mSampleSet.end());
-    for (SoundSet::iterator it = sounds.begin(); it != sounds.end(); ++it)
-    {
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+#include "SoundDriver.h"
+#include "ConfigFile.h"
+
+#include <OgreStringConverter.h>
+
+using namespace Ogre;
+
+namespace rl
+{
+
+SoundDriver::SoundDriver(ResourceManager* soundResourceManager)
+ :  mSoundResourceManager(soundResourceManager),
+    mStreamSet(),
+    mSampleSet(),
+    mDefaultMusicVolume(40),
+    mDefaultSoundVolume(100),
+    mMasterVolume(100)
+{
+}
+
+SoundDriver::~SoundDriver()
+{
+    SoundSet sounds;
+    sounds.insert(mSampleSet.begin(), mSampleSet.end());
+    sounds.insert(mSampleSet.begin(), mSampleSet.end());
+    for (SoundSet::iterator it = sounds.begin(); it != sounds.end(); ++it)
+    {
         if ((*it)->isPlaying())
         {
             (*it)->stop();
-        }
-        delete *it;
-    }
-}
-
-/// Die Standardlautst?rke f?r Musik einstellen
-void SoundDriver::setDefaultMusicVolume(const Ogre::Real& vol)
-{
-    mDefaultMusicVolume = vol;
-    SoundSet::iterator it;
-    for(it = mStreamSet.begin(); it != mStreamSet.end(); it++)
-    {
-        (*it)->setVolume(vol);
-    }
-}
-
-/// Die Standardlautst?rke f?r Musik zur?ckgeben.
-const Ogre::Real SoundDriver::getDefaultMusicVolume() const
-{
-    return mDefaultMusicVolume;
-}
-
-/// Die Standardlautst?rke f?r Musik einstellen
-void SoundDriver::setDefaultSoundVolume(const Ogre::Real& vol)
-{
-    mDefaultSoundVolume = vol;
-    SoundSet::iterator it;
-    for(it = mSampleSet.begin(); it != mSampleSet.end(); it++)
-    {
-        (*it)->setVolume(vol);
-    }
-}
-
-/// Die Standardlautst?rke f?r Musik zur?ckgeben.
-const Ogre::Real SoundDriver::getDefaultSoundVolume() const
-{
-    return mDefaultSoundVolume;
-}
-
-void SoundDriver::setMasterVolume(const Ogre::Real& vol)
-{
-    mMasterVolume = vol;
-}
-
-const Ogre::Real SoundDriver::getMasterVolume() const
-{
-    return mMasterVolume;
-}
-
-    Ogre::NameValuePairList SoundDriver::getSettings() const
-    {
-        Ogre::NameValuePairList SoundSettings;
-
-        // Append the settings to the list
-        SoundSettings.insert(make_pair("MasterVolume", Ogre::StringConverter::toString(mMasterVolume)));
-        SoundSettings.insert(make_pair("DefaultMusicVolume", Ogre::StringConverter::toString(mDefaultMusicVolume)));
-        SoundSettings.insert(make_pair("DefaultSoundVolume", Ogre::StringConverter::toString(mDefaultSoundVolume)));
-
-        return SoundSettings;
-    }
-
-    void SoundDriver::applySettings(const Ogre::NameValuePairList& settings)
-    {
-        Ogre::NameValuePairList::const_iterator it;
-
-        // Set the Master volume
-        if ((it = settings.find("MasterVolume")) == settings.end())
-        {
-            // Set a sane default value
-            setMasterVolume(Real(1.0));
-        }
-        else
-        {
-            setMasterVolume(Ogre::StringConverter::parseReal(it->second));
-        }
-
-        // Set the Default Music Volume
-        if ((it = settings.find("DefaultMusicVolume")) == settings.end())
-        {
-            // Set a sane default value
-            setDefaultMusicVolume(Real(0.3));
-        }
-        else
-        {
-            setDefaultMusicVolume(Ogre::StringConverter::parseReal(it->second));
-        }
-
-        // Set the Default Sound Volume
-        if ((it = settings.find("DefaultSoundVolume")) == settings.end())
-        {
-            // Set a sane default value
-            setDefaultSoundVolume(Real(1.0));
-        }
-        else
-        {
-            setDefaultSoundVolume(Ogre::StringConverter::parseReal(it->second));
-        }
-    }
-
-    Sound* SoundDriver::createStream(const SoundResourcePtr &res)
-    {
-        Sound* sound = createStreamImpl(res);
-        if (sound != NULL)
-        {
-            mStreamSet.insert(sound);
-        }
-        return sound;
-    }
-
-    Sound* SoundDriver::createSample(const SoundResourcePtr &res)
-    {
-        Sound* sound = createSampleImpl(res);
-        if (sound != NULL)
-        {
-            mSampleSet.insert(sound);
-        }
-        return sound;
-    }
-
-    void SoundDriver::destroySound(Sound* sound)
-    {
+        }
+        delete *it;
+    }
+}
+
+/// Die Standardlautst?rke f?r Musik einstellen
+void SoundDriver::setDefaultMusicVolume(const Ogre::Real& vol)
+{
+    mDefaultMusicVolume = vol;
+    SoundSet::iterator it;
+    for(it = mStreamSet.begin(); it != mStreamSet.end(); it++)
+    {
+        (*it)->setVolume(vol);
+    }
+}
+
+/// Die Standardlautst?rke f?r Musik zur?ckgeben.
+const Ogre::Real SoundDriver::getDefaultMusicVolume() const
+{
+    return mDefaultMusicVolume;
+}
+
+/// Die Standardlautst?rke f?r Musik einstellen
+void SoundDriver::setDefaultSoundVolume(const Ogre::Real& vol)
+{
+    mDefaultSoundVolume = vol;
+    SoundSet::iterator it;
+    for(it = mSampleSet.begin(); it != mSampleSet.end(); it++)
+    {
+        (*it)->setVolume(vol);
+    }
+}
+
+/// Die Standardlautst?rke f?r Musik zur?ckgeben.
+const Ogre::Real SoundDriver::getDefaultSoundVolume() const
+{
+    return mDefaultSoundVolume;
+}
+
+void SoundDriver::setMasterVolume(const Ogre::Real& vol)
+{
+    mMasterVolume = vol;
+}
+
+const Ogre::Real SoundDriver::getMasterVolume() const
+{
+    return mMasterVolume;
+}
+
+    Ogre::NameValuePairList SoundDriver::getSettings() const
+    {
+        Ogre::NameValuePairList SoundSettings;
+
+        // Append the settings to the list
+        SoundSettings.insert(make_pair("MasterVolume", Ogre::StringConverter::toString(mMasterVolume)));
+        SoundSettings.insert(make_pair("DefaultMusicVolume", Ogre::StringConverter::toString(mDefaultMusicVolume)));
+        SoundSettings.insert(make_pair("DefaultSoundVolume", Ogre::StringConverter::toString(mDefaultSoundVolume)));
+
+        return SoundSettings;
+    }
+
+    void SoundDriver::applySettings(const Ogre::NameValuePairList& settings)
+    {
+        Ogre::NameValuePairList::const_iterator it;
+
+        // Set the Master volume
+        if ((it = settings.find("MasterVolume")) == settings.end())
+        {
+            // Set a sane default value
+            setMasterVolume(Real(1.0));
+        }
+        else
+        {
+            setMasterVolume(Ogre::StringConverter::parseReal(it->second));
+        }
+
+        // Set the Default Music Volume
+        if ((it = settings.find("DefaultMusicVolume")) == settings.end())
+        {
+            // Set a sane default value
+            setDefaultMusicVolume(Real(0.3));
+        }
+        else
+        {
+            setDefaultMusicVolume(Ogre::StringConverter::parseReal(it->second));
+        }
+
+        // Set the Default Sound Volume
+        if ((it = settings.find("DefaultSoundVolume")) == settings.end())
+        {
+            // Set a sane default value
+            setDefaultSoundVolume(Real(1.0));
+        }
+        else
+        {
+            setDefaultSoundVolume(Ogre::StringConverter::parseReal(it->second));
+        }
+    }
+
+    Sound* SoundDriver::createStream(const Ogre::String& name)
+    {
+        SoundResourcePtr ptr = mSoundResourceManager->load(name,
+            ResourceGroupManager::AUTODETECT_RESOURCE_GROUP_NAME);
+        if (ptr.isNull())
+        {
+            Throw(IllegalArgumentException, "Sound " + name + "nicht gefunden");
+        }
+        return createStream(ptr);
+    }
+
+    Sound* SoundDriver::createStream(const SoundResourcePtr &res)
+    {
+        Sound* sound = createStreamImpl(res);
+        if (sound != NULL)
+        {
+            mStreamSet.insert(sound);
+        }
+        return sound;
+    }
+
+    Sound* SoundDriver::createSample(const Ogre::String& name)
+    {
+        SoundResourcePtr ptr = mSoundResourceManager->load(name,
+            ResourceGroupManager::AUTODETECT_RESOURCE_GROUP_NAME);
+        if (ptr.isNull())
+        {
+            Throw(IllegalArgumentException, "Sound " + name + "nicht gefunden");
+        }
+        return createSample(ptr);
+    }
+
+    Sound* SoundDriver::createSample(const SoundResourcePtr &res)
+    {
+        Sound* sound = createSampleImpl(res);
+        if (sound != NULL)
+        {
+            mSampleSet.insert(sound);
+        }
+        return sound;
+    }
+
+    void SoundDriver::destroySound(Sound* sound)
+    {
         if (sound->isPlaying())
         {
             sound->stop();
         }
-        mStreamSet.erase(sound);
-        mSampleSet.erase(sound);
-        delete sound;
-    }
-}
+        mStreamSet.erase(sound);
+        mSampleSet.erase(sound);
+        delete sound;
+    }
+}

Modified: rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp	2007-02-15 18:25:06 UTC (rev 3051)
+++ rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp	2007-02-16 21:35:47 UTC (rev 3052)
@@ -24,12 +24,16 @@
 
 namespace rl
 {
+    // Used by FMOD-Callbacks, which are not C++-functions, but C-functions.
+    Ogre::ResourceManager* gSoundResourceManager = NULL;
+
     String Fmod4Driver::NAME = "RlFmod4Driver";
 
     Fmod4Driver::Fmod4Driver(Ogre::ResourceManager *soundResourceManager)
         : SoundDriver(soundResourceManager),
         mMasterChannelGroup(NULL)
     {
+        gSoundResourceManager = soundResourceManager;
     }
 
     Fmod4Driver::~Fmod4Driver()
@@ -258,7 +262,7 @@
         void **  handle,
         void **  userdata)
     {
-        SoundResourcePtr* res = new SoundResourcePtr(sSoundResourceManager->getByName(name));
+        SoundResourcePtr* res = new SoundResourcePtr(gSoundResourceManager->getByName(name));
         LOG_DEBUG(Logger::MULTIMEDIA,
             "Opened stream " + (*res)->getName());
         (*res)->load();
@@ -340,10 +344,8 @@
     void Fmod4Driver::setMasterVolume(const Ogre::Real& vol)
     {
         SoundDriver::setMasterVolume(vol);
-        /**@todo: Lautst???rke setzen, geht m???glicherweise nur ???ber channelgroups*/
     }
 
-    /// Setzt den Faktor f, mit der die Lautst???rke nach der Formel 1/(f*Entfernung) abnimmt
     void Fmod4Driver::setRolloffFactor(const Ogre::Real& factor)
     {
         float dopplerScale;



From josch at mail.berlios.de  Sun Feb 18 13:25:50 2007
From: josch at mail.berlios.de (josch at mail.berlios.de)
Date: Sun, 18 Feb 2007 13:25:50 +0100
Subject: [Dsa-hl-svn] r3053 - rl/trunk
Message-ID: <200702181225.l1ICPo4O018994@sheep.berlios.de>

Author: josch
Date: 2007-02-18 13:25:45 +0100 (Sun, 18 Feb 2007)
New Revision: 3053

Modified:
   rl/trunk/configure.in
Log:
--enable-debug/profile change reverted

Modified: rl/trunk/configure.in
===================================================================
--- rl/trunk/configure.in	2007-02-16 21:35:47 UTC (rev 3052)
+++ rl/trunk/configure.in	2007-02-18 12:25:45 UTC (rev 3053)
@@ -15,13 +15,18 @@
 AM_PROG_LIBTOOL
 
 # ***** DEBUGGING
-AC_ARG_ENABLE([debug], AS_HELP_STRING([--enable-debug], [enable debugging @<:@default=no@:>@],
-              AC_SUBST([CXXFLAGS], ["$CXXFLAGS -g -O0"], AC_SUBST([CXXFLAGS], ["$CXXFLAGS -O2"]))))
-
+AC_ARG_ENABLE(debug,AS_HELP_STRING([--enable-debug],[enable debugging @<:@default=no@:>@]))
+if test "$enable_debug" = "yes"; then
+    CXXFLAGS="$CXXFLAGS -g -O0"
+else
+    CXXFLAGS="$CXXFLAGS -O2"
+fi
 # ***** PROFILING
-AC_ARG_ENABLE([profiling], AS_HELP_STRING([--enable-profiling], [enable profiling @<:@default=no@:>@],
-              AC_SUBST([CXXFLAGS], "$CXXFLAGS -pg -g")
-              AC_SUBST([LDFLAGS], "$LDFLAGS -pg -g")))
+AC_ARG_ENABLE([profiling], AS_HELP_STRING([--enable-profiling], [enable profiling @<:@default=no@:>@]))
+if test "$enable_profiling" = "yes"; then
+    CXXFLAGS="$CXXFLAGS -pg -g"
+    LDFLAGS="$LDFLAGS -pg -g"
+fi
 
 # Pthreads
 CXXFLAGS="$CXXFLAGS -pthread"



From chrber at mail.berlios.de  Sun Feb 18 14:03:24 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Sun, 18 Feb 2007 14:03:24 +0100
Subject: [Dsa-hl-svn] r3054 - rl/trunk/engine/core/src
Message-ID: <200702181303.l1ID3Ohw022029@sheep.berlios.de>

Author: chrber
Date: 2007-02-18 14:03:24 +0100 (Sun, 18 Feb 2007)
New Revision: 3054

Modified:
   rl/trunk/engine/core/src/ConfigurationManager.cpp
Log:
Corrected two errors in the action names


Modified: rl/trunk/engine/core/src/ConfigurationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-18 12:25:45 UTC (rev 3053)
+++ rl/trunk/engine/core/src/ConfigurationManager.cpp	2007-02-18 13:03:24 UTC (rev 3054)
@@ -104,12 +104,12 @@
         mInputSettings.insert(make_pair("act_togglevanitymode", "V"));
         mInputSettings.insert(make_pair("act_usecurrentobjectdefaultaction", "R"));
         mInputSettings.insert(make_pair("act_toggleinventorywindow", "I"));
-        mInputSettings.insert(make_pair("act_showjournalwindow ", "J"));
+        mInputSettings.insert(make_pair("act_showjournalwindow", "J"));
         mInputSettings.insert(make_pair("act_showcharactersheet", "C"));
         mInputSettings.insert(make_pair("act_togglecharacterstatewindow", "O"));
         mInputSettings.insert(make_pair("act_toggleingameglobalmenu", "F10"));
         mInputSettings.insert(make_pair("act_togglecharactercontroller", "M"));
-        mInputSettings.insert(make_pair("act_shownextdebugwindowpage ", "Ctrl+M"));
+        mInputSettings.insert(make_pair("act_shownextdebugwindowpage", "Ctrl+M"));
         mInputSettings.insert(make_pair("act_showobjectactions", "U"));
 
         setRastullahCfgPath();



From tanis at mail.berlios.de  Wed Feb 21 16:59:38 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Wed, 21 Feb 2007 16:59:38 +0100
Subject: [Dsa-hl-svn] r3055 - in rl/trunk: engine/core/include
	engine/core/include/nulldriver engine/core/src
	engine/core/src/nulldriver engine/script/swig engine/ui/src
	plugins/fmod4driver/include plugins/fmod4driver/src
	plugins/openaldriver/include plugins/openaldriver/src
Message-ID: <200702211559.l1LFxcJX005675@sheep.berlios.de>

Author: tanis
Date: 2007-02-21 16:58:09 +0100 (Wed, 21 Feb 2007)
New Revision: 3055

Modified:
   rl/trunk/engine/core/include/CoreSubsystem.h
   rl/trunk/engine/core/include/PlaySoundJob.h
   rl/trunk/engine/core/include/Sound.h
   rl/trunk/engine/core/include/SoundDriver.h
   rl/trunk/engine/core/include/nulldriver/NullDriver.h
   rl/trunk/engine/core/include/nulldriver/NullSound.h
   rl/trunk/engine/core/src/ActorManager.cpp
   rl/trunk/engine/core/src/CoreSubsystem.cpp
   rl/trunk/engine/core/src/PlaySoundJob.cpp
   rl/trunk/engine/core/src/Sound.cpp
   rl/trunk/engine/core/src/SoundDriver.cpp
   rl/trunk/engine/core/src/nulldriver/NullDriver.cpp
   rl/trunk/engine/core/src/nulldriver/NullSound.cpp
   rl/trunk/engine/script/swig/RlCore.head.inc
   rl/trunk/engine/script/swig/RlCore.inc
   rl/trunk/engine/ui/src/DialogCharacterController.cpp
   rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h
   rl/trunk/plugins/fmod4driver/include/Fmod4Sound.h
   rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp
   rl/trunk/plugins/fmod4driver/src/Fmod4Sound.cpp
   rl/trunk/plugins/openaldriver/include/OpenALDriver.h
   rl/trunk/plugins/openaldriver/include/OpenALSound.h
   rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp
   rl/trunk/plugins/openaldriver/src/OpenALSound.cpp
Log:
Sound driver-API changes: Only one createSound function, whether stream or sample is determined by the SoundType argument.
Added functions to handle automatic Sound removal after done playing. This is implemented in NullDriver and Fmod4Driver, but not yet OpenAL.

2d/3d sound play jobs work now and are eported to Ruby, along with teh JobScheduler.

Modified: rl/trunk/engine/core/include/CoreSubsystem.h
===================================================================
--- rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-21 15:58:09 UTC (rev 3055)
@@ -86,6 +86,9 @@
     void setDeveloperMode(bool developerMode);
     bool getDeveloperMode() const;
 
+    /// Returns time since game started in Milliseconds.
+    /// Uses GameLoop::getClock internally, function is here to allow access from ruby.
+    unsigned long getClock();
 
     /** Saves a timestamped jpg Screenshot
         @param sName The filename (extended with the timestamp)

Modified: rl/trunk/engine/core/include/PlaySoundJob.h
===================================================================
--- rl/trunk/engine/core/include/PlaySoundJob.h	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/include/PlaySoundJob.h	2007-02-21 15:58:09 UTC (rev 3055)
@@ -28,8 +28,7 @@
     {
     public:
 
-        PlaySound2dJob(const Ogre::String& sound, Ogre::Real volume=1.0f,
-            bool looping=false, bool isDiscardable=false);
+        PlaySound2dJob(const Ogre::String& sound, Ogre::Real volume=1.0f);
         virtual ~PlaySound2dJob();
 
         /// Play the sound.
@@ -39,12 +38,29 @@
         ///       playing.
         virtual bool execute(Ogre::Real time);
 
-        /// Do nothing, since the sound can be either played or not.
-        /// Once started, it is not aborted.
-        virtual void discard();
     private:
         Sound* mSound;
+        bool mExecuted;
     };
+
+    class _RlCoreExport PlaySound3dJob : public Job
+    {
+    public:
+
+        PlaySound3dJob(const Ogre::String& sound, const Ogre::Vector3& pos, Ogre::Real volume=1.0f);
+        virtual ~PlaySound3dJob();
+
+        /// Play the sound.
+        /// @return true, when the sound is done playing, false else.
+        /// @todo this return-behaviour is actually a hack to prevent a memory leak.
+        ///       We have to find a way to get rid of the sound automatically, when it is done
+        ///       playing.
+        virtual bool execute(Ogre::Real time);
+
+    private:
+        Sound* mSound;
+        bool mExecuted;
+    };
 }
 
 #endif

Modified: rl/trunk/engine/core/include/Sound.h
===================================================================
--- rl/trunk/engine/core/include/Sound.h	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/include/Sound.h	2007-02-21 15:58:09 UTC (rev 3055)
@@ -43,7 +43,7 @@
     {
     public:
         /// Konstruktor
-        Sound(const SoundResourcePtr &soundres);
+        Sound(const SoundResourcePtr& soundres, SoundDriver* creator);
         /// Destruktor
         virtual ~Sound();
           
@@ -53,7 +53,7 @@
         virtual void unload() throw (RuntimeException) = 0;
 
         // SoundResource zurueckgeben.
-        const SoundResourcePtr &getSoundResource() const;
+        const SoundResourcePtr& getSoundResource() const;
         // Wollen wir 3D?
         bool is3d() const;
         // Setzen des 3D-Flags.
@@ -100,7 +100,7 @@
 	    virtual const Ogre::Real getRolloffEndDistance() const;
 
         /// Spielt den Sound ab.
-        virtual void play() = 0;
+        virtual void play(bool destroyWhenDone=false) = 0;
         /// Pausiert den Sound.
         virtual void pause(bool pausing) = 0;
         /// Ist der Sound pausiert?
@@ -113,6 +113,8 @@
         virtual const bool isPlaying() const = 0;
 
     protected:
+        SoundDriver* mCreator;
+
         /// Die Lautstaerke
 	    Ogre::Real mVolume;
         /// Die Position

Modified: rl/trunk/engine/core/include/SoundDriver.h
===================================================================
--- rl/trunk/engine/core/include/SoundDriver.h	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/include/SoundDriver.h	2007-02-21 15:58:09 UTC (rev 3055)
@@ -1,109 +1,114 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-#ifndef SOUNDDRIVER_H_
-#define SOUNDDRIVER_H_
-
-#include "CorePrerequisites.h"
-#include <OgreResourceManager.h>
-#include "Sound.h"
-
-namespace rl
-{
-    class ListenerMovable;
-
-    /// Abstract super class of all API specific sound drivers.
-    class _RlCoreExport SoundDriver
-    {
-    public:
-        /// Der Konstruktor
-        SoundDriver(Ogre::ResourceManager* soundResourceManager);
-        /// Der Destruktor
-        virtual ~SoundDriver();
-
-        /// returns true, if the driver can work on the current system. False else.
-        virtual bool isDriverAvailable() = 0;
-
-        /** Initialize driver
-         *  @return <code>true</code> if successful, <code>false</code> otherwise
-         */
-        virtual bool initialize() = 0;
-
-        /// Beende den Treiber
-        virtual void shutdown() = 0;
-        /// Der Name des Treibers
-        virtual Ogre::String getName() const = 0;
-        /// Update-Aufgaben erledigen
-        virtual void update() = 0;
-        /// Einen Sound-Stream mit Resource erzeugen
-        virtual Sound* createStream(const SoundResourcePtr &res);
-        virtual Sound* createStream(const Ogre::String& name);
-        /// Einen Sound-Sample mit Resource erzeugen
-        virtual Sound* createSample(const SoundResourcePtr &res);
-        virtual Sound* createSample(const Ogre::String& name);
-
-
-        /// Destroy a sound created by this driver. Do not call the Sound destructor yourself!
-        virtual void destroySound(Sound*);
-
-        /// Einen Soundlistener erzeugen
-        virtual ListenerMovable *createListener(const Ogre::String &name) = 0;
-
-
-        /// Set attenuation of the volume with distance. f influences
-        /// volume like this: relative volume = 1/(f*distance)
-        virtual void setRolloffFactor(const Ogre::Real& f) = 0;
-        virtual const Ogre::Real getRolloffFactor() = 0;
-
-        void setDefaultMusicVolume(const Ogre::Real& vol);
-        const Ogre::Real getDefaultMusicVolume() const;
-
-        void setDefaultSoundVolume(const Ogre::Real& vol);
-        const Ogre::Real getDefaultSoundVolume() const;
-
-        virtual void setMasterVolume(const Ogre::Real& vol);
-        const Ogre::Real getMasterVolume() const;
-
-        /**
-         * Returns the current sound driver settings as a key-value list
-         *
-         * @return key-value list of sound options
-         */
-        virtual Ogre::NameValuePairList getSettings() const;
-
-        /**
-         * Sets certain options for the sound driver, like volume settings for
-         * sound effects and music.
-         *
-         * @param settings key-value list of settings
-         */
-        virtual void applySettings(const Ogre::NameValuePairList& settings);
-
-    protected:
-        Ogre::ResourceManager* mSoundResourceManager;
-
-        SoundSet mStreamSet;
-        SoundSet mSampleSet;
-
-        Ogre::Real mDefaultMusicVolume;  ///!< Music volume
-        Ogre::Real mDefaultSoundVolume;  ///!< Sound effect volume
-        Ogre::Real mMasterVolume;        ///!< Master volume
-
-        virtual Sound* createStreamImpl(const SoundResourcePtr &res) = 0;
-        virtual Sound* createSampleImpl(const SoundResourcePtr &res) = 0;
-    };
-}
-
-#endif /*SOUNDDRIVER_H_*/
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+#ifndef SOUNDDRIVER_H_
+#define SOUNDDRIVER_H_
+
+#include "CorePrerequisites.h"
+#include <OgreResourceManager.h>
+#include "Sound.h"
+
+namespace rl
+{
+    class ListenerMovable;
+
+    typedef enum {ST_SAMPLE, ST_STREAM} SoundType;
+
+    /// Abstract super class of all API specific sound drivers.
+    class _RlCoreExport SoundDriver
+    {
+    public:
+        /// Der Konstruktor
+        SoundDriver(Ogre::ResourceManager* soundResourceManager);
+        /// Der Destruktor
+        virtual ~SoundDriver();
+
+        /// returns true, if the driver can work on the current system. False else.
+        virtual bool isDriverAvailable() = 0;
+
+        /** Initialize driver
+         *  @return <code>true</code> if successful, <code>false</code> otherwise
+         */
+        virtual bool initialize() = 0;
+
+        /// Beende den Treiber
+        virtual void shutdown() = 0;
+        /// Der Name des Treibers
+        virtual Ogre::String getName() const = 0;
+        /// Update-Aufgaben erledigen
+        virtual void update() = 0;
+
+        /**
+         *  Create a Sound object.
+         *  Sounds created with this functions have to be destroyed using
+         *  SoundDriver#destroySound, unless destroyWhenDone is set to true.
+         *  @param res the resource from which to create the sound.
+         *  @param type whether to create the sound as sample or stream.
+         */
+        virtual Sound* createSound(SoundResourcePtr res, SoundType type=ST_SAMPLE);
+
+        /// @overload
+        virtual Sound* createSound(const Ogre::String& res, SoundType type=ST_SAMPLE);
+
+        /// Destroy a sound created by this driver. Do not call the Sound destructor yourself!
+        virtual void destroySound(Sound*);
+
+        /// Einen Soundlistener erzeugen
+        virtual ListenerMovable *createListener(const Ogre::String &name) = 0;
+
+        /// Set attenuation of the volume with distance. f influences
+        /// volume like this: relative volume = 1/(f*distance)
+        virtual void setRolloffFactor(const Ogre::Real& f) = 0;
+        virtual const Ogre::Real getRolloffFactor() = 0;
+
+        void setDefaultMusicVolume(const Ogre::Real& vol);
+        const Ogre::Real getDefaultMusicVolume() const;
+
+        void setDefaultSoundVolume(const Ogre::Real& vol);
+        const Ogre::Real getDefaultSoundVolume() const;
+
+        virtual void setMasterVolume(const Ogre::Real& vol);
+        const Ogre::Real getMasterVolume() const;
+
+        /**
+         * Returns the current sound driver settings as a key-value list
+         *
+         * @return key-value list of sound options
+         */
+        virtual Ogre::NameValuePairList getSettings() const;
+
+        /**
+         * Sets certain options for the sound driver, like volume settings for
+         * sound effects and music.
+         *
+         * @param settings key-value list of settings
+         */
+        virtual void applySettings(const Ogre::NameValuePairList& settings);
+
+    protected:
+        Ogre::ResourceManager* mSoundResourceManager;
+
+        SoundSet mStreamSet;
+        SoundSet mSampleSet;
+
+        Ogre::Real mDefaultMusicVolume;  ///!< Music volume
+        Ogre::Real mDefaultSoundVolume;  ///!< Sound effect volume
+        Ogre::Real mMasterVolume;        ///!< Master volume
+
+        virtual Sound* createSoundImpl(SoundResourcePtr res, SoundType type) = 0;
+    };
+}
+
+#endif /*SOUNDDRIVER_H_*/

Modified: rl/trunk/engine/core/include/nulldriver/NullDriver.h
===================================================================
--- rl/trunk/engine/core/include/nulldriver/NullDriver.h	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/include/nulldriver/NullDriver.h	2007-02-21 15:58:09 UTC (rev 3055)
@@ -51,8 +51,7 @@
     virtual const Ogre::Real getRolloffFactor();
 
 protected:
-    virtual Sound *createStreamImpl(const SoundResourcePtr &res);
-    virtual Sound *createSampleImpl(const SoundResourcePtr &res);
+    virtual Sound* createSoundImpl(SoundResourcePtr res, SoundType type);
 };
 
 }

Modified: rl/trunk/engine/core/include/nulldriver/NullSound.h
===================================================================
--- rl/trunk/engine/core/include/nulldriver/NullSound.h	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/include/nulldriver/NullSound.h	2007-02-21 15:58:09 UTC (rev 3055)
@@ -32,7 +32,7 @@
     {
     public:
         /// Konstruktor
-        NullSound(const SoundResourcePtr &soundres);
+        NullSound(const SoundResourcePtr &soundres, SoundDriver* creator);
         /// Destruktor
         virtual ~NullSound();
 
@@ -64,8 +64,8 @@
         /// Setzt die Geschwindigkeit der Soundquelle.
          void setVelocity(const Ogre::Vector3&);
 
-        /// Spielt den Sound ab.
-         void play();
+         /// Spielt den Sound ab.
+         void play(bool destroyWhenDone=false);
         /// Pausiert den Sound.
          void pause(bool pausing);
         /// Ist der Sound pausiert?
@@ -76,9 +76,11 @@
     //         void rewind() throw (RuntimeException);
         /// Laeuft der Sound noch
          const bool isPlaying() const;
+
     protected:
         // Sind wir gueltig?
         virtual bool isValid() const throw (RuntimeException);
+
     private:
         // Shared class-level name for Movable type
         static Ogre::String msMovableType;

Modified: rl/trunk/engine/core/src/ActorManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ActorManager.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/src/ActorManager.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -192,7 +192,8 @@
         Actor* actor = 0;
         try
         {
-            Sound* sm = SoundManager::getSingleton().getActiveDriver()->createSample(soundfile);
+            Sound* sm = SoundManager::getSingleton().getActiveDriver()->
+                createSound(soundfile, ST_SAMPLE);
             SoundObject* so = new SoundObject(sm, soundfile);
             actor = new Actor(uniquename, so);
             mActors.insert(ActorPtrPair(uniquename,actor));  
@@ -220,7 +221,8 @@
         Actor* actor = 0;
         try
         {
-            Sound* sm = SoundManager::getSingleton().getActiveDriver()->createStream(soundfile);
+            Sound* sm = SoundManager::getSingleton().getActiveDriver()->
+                createSound(soundfile, ST_STREAM);
             SoundObject* so = new SoundObject(sm, soundfile);
 
             actor = new Actor(uniquename, so);

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -231,6 +231,7 @@
         LOG_MESSAGE(Logger::CORE,"Aktormanager erzeugt");
 
         mSoundManager = new SoundManager();
+        GameLoop::getSingleton().addTask(mSoundManager, GameLoop::TG_SOUND);
         LOG_MESSAGE(Logger::CORE,"SoundManager erzeugt");
 
         initializeResources();
@@ -249,18 +250,23 @@
 
         mPhysicsManager = new PhysicsManager();
         GameLoop::getSingleton().addTask(mPhysicsManager, GameLoop::TG_PHYSICS);
+        LOG_MESSAGE(Logger::CORE,"PhysicsManager erzeugt");
 
         mAnimationManager = new AnimationManager();
         GameLoop::getSingleton().addTask(mAnimationManager, GameLoop::TG_GRAPHICS);
+        LOG_MESSAGE(Logger::CORE,"AnimationManager erzeugt");
 
         mGameEventManager = new GameEventManager();
         GameLoop::getSingleton().addTask(mGameEventManager, GameLoop::TG_LOGIC);
+        LOG_MESSAGE(Logger::CORE,"GameEventManager erzeugt");
 
         mDebugVisualsManager = new DebugVisualsManager();
         GameLoop::getSingleton().addTask(mDebugVisualsManager, GameLoop::TG_GRAPHICS);
+        LOG_MESSAGE(Logger::CORE,"DebugVisualsManager erzeugt");
 
         mJobScheduler = new JobScheduler();
         GameLoop::getSingleton().addTask(mJobScheduler, GameLoop::TG_GRAPHICS);
+        LOG_MESSAGE(Logger::CORE,"JobScheduler erzeugt");
 
         return true;
     }
@@ -465,6 +471,11 @@
         return mWorld;
     }
 
+    unsigned long CoreSubsystem::getClock()
+    {
+        return mGameLoop->getClock();
+    }
+
     Ogre::String CoreSubsystem::getEngineVersionString() const
     {
         static Ogre::String version = "0.3.0";

Modified: rl/trunk/engine/core/src/PlaySoundJob.cpp
===================================================================
--- rl/trunk/engine/core/src/PlaySoundJob.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/src/PlaySoundJob.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -24,28 +24,56 @@
 namespace rl
 {
 
-    PlaySound2dJob::PlaySound2dJob(const String& sound, Real volume,
-        bool looping, bool isDiscardable) : Job(isDiscardable, true), mSound()
+    PlaySound2dJob::PlaySound2dJob(const String& sound, Real volume)
+        : Job(false, true), mSound(NULL), mExecuted(false)
     {
-        mSound = SoundManager::getSingleton().getActiveDriver()->
-            createStream(SoundManager::getSingleton().getByName(sound));
+        mSound = SoundManager::getSingleton().getActiveDriver()->createSound(sound, ST_SAMPLE);
         mSound->set3d(false);
         mSound->setVolume(volume);
-        mSound->setLooping(looping);
+        mSound->setLooping(false);
     }
 
     PlaySound2dJob::~PlaySound2dJob()
     {
-        delete mSound;
+        // Only destroy sound, if not played,
+        // because else the sound gets destroyed automatically.
+        if(!mExecuted)
+        {
+            SoundManager::getSingleton().getActiveDriver()->destroySound(mSound);
+        }
     }
 
     bool PlaySound2dJob::execute(Ogre::Real time)
     {
-        if (mSound) mSound->play();
+        if (mSound) mSound->play(true);
+        mExecuted = true;
         return true;
     }
 
-    void PlaySound2dJob::discard()
+    PlaySound3dJob::PlaySound3dJob(const String& sound, const Ogre::Vector3& pos, Real volume)
+        : Job(false, true), mSound(NULL), mExecuted(false)
     {
+        mSound = SoundManager::getSingleton().getActiveDriver()->createSound(sound, ST_SAMPLE);
+        mSound->set3d(true);
+        mSound->setPosition(pos);
+        mSound->setVolume(volume);
+        mSound->setLooping(false);
     }
+
+    PlaySound3dJob::~PlaySound3dJob()
+    {
+        // Only destroy sound, if not played,
+        // because else the sound gets destroyed automatically.
+        if(!mExecuted)
+        {
+            SoundManager::getSingleton().getActiveDriver()->destroySound(mSound);
+        }
+    }
+
+    bool PlaySound3dJob::execute(Ogre::Real time)
+    {
+        if (mSound) mSound->play(true);
+        mExecuted = true;
+        return true;
+    }
 }

Modified: rl/trunk/engine/core/src/Sound.cpp
===================================================================
--- rl/trunk/engine/core/src/Sound.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/src/Sound.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -14,6 +14,7 @@
 *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
 */
 #include "Sound.h"
+#include "SoundDriver.h"
 
 using namespace Ogre; 
 
@@ -22,10 +23,11 @@
 
 AxisAlignedBox Sound::msAABox = Ogre::AxisAlignedBox(0.0, 0.0, 0.0, 0.0, 0.0, 0.0);
 
-Sound::Sound(const SoundResourcePtr &soundres)
+Sound::Sound(const SoundResourcePtr &soundres, SoundDriver* creator)
 : MovableObject(soundres->getName()),
    EventSource(),
    EventCaster<SoundEvent>(),
+   mCreator(creator),
    mVolume(1.0),
    mSoundResource(soundres),
    mIsLooping(false),
@@ -135,5 +137,4 @@
 	return mRolloffEndDistance;
 }
 
-
 };

Modified: rl/trunk/engine/core/src/SoundDriver.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundDriver.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/src/SoundDriver.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -97,9 +97,12 @@
         Ogre::NameValuePairList SoundSettings;
 
         // Append the settings to the list
-        SoundSettings.insert(make_pair("MasterVolume", Ogre::StringConverter::toString(mMasterVolume)));
-        SoundSettings.insert(make_pair("DefaultMusicVolume", Ogre::StringConverter::toString(mDefaultMusicVolume)));
-        SoundSettings.insert(make_pair("DefaultSoundVolume", Ogre::StringConverter::toString(mDefaultSoundVolume)));
+        SoundSettings.insert(make_pair("MasterVolume",
+            Ogre::StringConverter::toString(mMasterVolume)));
+        SoundSettings.insert(make_pair("DefaultMusicVolume",
+            Ogre::StringConverter::toString(mDefaultMusicVolume)));
+        SoundSettings.insert(make_pair("DefaultSoundVolume",
+            Ogre::StringConverter::toString(mDefaultSoundVolume)));
 
         return SoundSettings;
     }
@@ -142,7 +145,7 @@
         }
     }
 
-    Sound* SoundDriver::createStream(const Ogre::String& name)
+    Sound* SoundDriver::createSound(const String& name, SoundType type)
     {
         SoundResourcePtr ptr = mSoundResourceManager->load(name,
             ResourceGroupManager::AUTODETECT_RESOURCE_GROUP_NAME);
@@ -150,40 +153,26 @@
         {
             Throw(IllegalArgumentException, "Sound " + name + "nicht gefunden");
         }
-        return createStream(ptr);
+        return createSound(ptr, type);
     }
 
-    Sound* SoundDriver::createStream(const SoundResourcePtr &res)
+    Sound* SoundDriver::createSound(SoundResourcePtr res, SoundType type)
     {
-        Sound* sound = createStreamImpl(res);
+        Sound* sound = createSoundImpl(res, type);
         if (sound != NULL)
         {
-            mStreamSet.insert(sound);
+            if (type == ST_SAMPLE)
+            {
+                mSampleSet.insert(sound);
+            }
+            else
+            {
+                mStreamSet.insert(sound);
+            }
         }
         return sound;
     }
 
-    Sound* SoundDriver::createSample(const Ogre::String& name)
-    {
-        SoundResourcePtr ptr = mSoundResourceManager->load(name,
-            ResourceGroupManager::AUTODETECT_RESOURCE_GROUP_NAME);
-        if (ptr.isNull())
-        {
-            Throw(IllegalArgumentException, "Sound " + name + "nicht gefunden");
-        }
-        return createSample(ptr);
-    }
-
-    Sound* SoundDriver::createSample(const SoundResourcePtr &res)
-    {
-        Sound* sound = createSampleImpl(res);
-        if (sound != NULL)
-        {
-            mSampleSet.insert(sound);
-        }
-        return sound;
-    }
-
     void SoundDriver::destroySound(Sound* sound)
     {
         if (sound->isPlaying())

Modified: rl/trunk/engine/core/src/nulldriver/NullDriver.cpp
===================================================================
--- rl/trunk/engine/core/src/nulldriver/NullDriver.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/src/nulldriver/NullDriver.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -92,33 +92,13 @@
      // Erstmal nichts zu tun.
  }
 
- /**
-  * Einen Sound-Stream mit Resource erzeugen
-  * @return Der erzeugte Stream
-  * @param res Die Resource zur Erzeugung des Sounds
-  * @author JoSch
-  * @date 03-06-2006
-  */
-Sound *NullDriver::createStreamImpl(const SoundResourcePtr &res)
+Sound *NullDriver::createSoundImpl(SoundResourcePtr res, SoundType type)
 {
-     Sound *sound = new NullSound(res);
+     Sound* sound = new NullSound(res, this);
      return sound;
 }
 
 /**
- * Einen Sound-Sample mit Resource erzeugen
- * @return Das erzeugte Sample
- * @param res Die Resource zur Erzeugung des Sounds
- * @author JoSch
- * @date 03-06-2006
- */
-Sound *NullDriver::createSampleImpl(const SoundResourcePtr &res)
-{
-     Sound *sound = new NullSound(res);
-     return sound;
-}
-
-/**
  * Einen Soundlistener erzeugen
  * @return Der erzeugte Listener
  * @param name Der Name des Channels.
@@ -127,7 +107,7 @@
  */
 ListenerMovable *NullDriver::createListener(const Ogre::String &name)
 {
-    ListenerMovable *listener = new NullListener(name);
+    ListenerMovable* listener = new NullListener(name);
     return listener;
 }
 

Modified: rl/trunk/engine/core/src/nulldriver/NullSound.cpp
===================================================================
--- rl/trunk/engine/core/src/nulldriver/NullSound.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/core/src/nulldriver/NullSound.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -14,6 +14,8 @@
 *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
 */
 #include "NullSound.h"
+#include "NullDriver.h"
+
 #include "SoundManager.h"
 #include "SoundResource.h"
 
@@ -29,8 +31,8 @@
  * @author JoSch
  * @date 07-04-2005
  */
-NullSound::NullSound(const SoundResourcePtr &soundres):
-    Sound(soundres)
+NullSound::NullSound(const SoundResourcePtr &soundres, SoundDriver* creator):
+    Sound(soundres, creator)
 {
 }
 
@@ -89,8 +91,13 @@
  * @author JoSch
  * @date 07-23-2005
  */
-void NullSound::play()
+void NullSound::play(bool destroyWhenDone)
 {
+    if (destroyWhenDone)
+    {
+        // We're not going to play anything, so we can self-destroy right away...
+        mCreator->destroySound(this);
+    }
 }
 
 /**

Modified: rl/trunk/engine/script/swig/RlCore.head.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCore.head.inc	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/script/swig/RlCore.head.inc	2007-02-21 15:58:09 UTC (rev 3055)
@@ -50,6 +50,10 @@
 #include "ListenerObject.h"
 #include "Sound.h"
 #include "SoundEvents.h"
+#include "JobScheduler.h"
+#include "Job.h"
+#include "JobListener.h"
+#include "PlaySoundJob.h"
 #undef message
 #undef send
 %}

Modified: rl/trunk/engine/script/swig/RlCore.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCore.inc	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/script/swig/RlCore.inc	2007-02-21 15:58:09 UTC (rev 3055)
@@ -655,6 +655,7 @@
 		const Ogre::String& resourceGroup, const Ogre::String& startupScript = "");
 	void registerModule(ContentModule* module);
     World* getWorld();
+    unsigned long getClock();
     void makeScreenshot(const Ogre::String& sName);
     bool isInitialized() const;
     void setScheme(const Ogre::String& schemeName);
@@ -713,4 +714,34 @@
     bool isValid() const;
 };
 
+// define as empty at this time. Must not yet be used from within ruby.
+class Job
+{
+private:
+	Job();
+};
+
+class PlaySound2dJob : public rl::Job
+{
+public:
+
+    PlaySound2dJob(const Ogre::String& sound, Ogre::Real volume=1.0f);
+    virtual ~PlaySound2dJob();
+};
+
+class PlaySound3dJob : public rl::Job
+{
+public:
+
+    PlaySound3dJob(const Ogre::String& sound, const Ogre::Vector3& pos, Ogre::Real volume=1.0f);
+    virtual ~PlaySound3dJob();
+};
+
+class JobScheduler
+{
+public:
+	static JobScheduler& getSingleton(void);
+    unsigned long addJob(rl::Job* job);
+};
+
 }

Modified: rl/trunk/engine/ui/src/DialogCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/DialogCharacterController.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/engine/ui/src/DialogCharacterController.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -237,12 +237,8 @@
                     mSoundObject->getMovableObject() );
 
             delete mSoundObject;
-            mSoundObject =
-                new SoundObject(
-                    SoundManager::getSingleton().getActiveDriver()->
-                        createSample(
-                            SoundManager::getSingleton().getByName(soundFile)),
-                    soundFile);
+            mSoundObject = new SoundObject(SoundManager::getSingleton().getActiveDriver()->
+                    createSound(soundFile, ST_SAMPLE), soundFile);
 
             // An Sprecher h?ngen
             actor->_getSceneNode()->attachObject( mSoundObject->getMovableObject() );

Modified: rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h
===================================================================
--- rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/plugins/fmod4driver/include/Fmod4Driver.h	2007-02-21 15:58:09 UTC (rev 3055)
@@ -45,6 +45,8 @@
         }\
     }
 
+    class Fmod4Sound;
+
     /** Diese Klasse ist der Treiber, der OpenAL zur
      * Ausgabe benutzt.
      */
@@ -95,20 +97,14 @@
         const DriverMap& getDriverData() const;
 
         FMOD::System* _getFmodSystem();
+        void _registerForAutoDestruction(Fmod4Sound* sound, FMOD::Channel* channel);
 
     protected:
-        virtual Sound* createStreamImpl(const SoundResourcePtr &res);
-        virtual Sound* createSampleImpl(const SoundResourcePtr &res);
+        virtual Sound* createSoundImpl(SoundResourcePtr res, SoundType type);
 
     private:
-        /// Informationen ???ber den Treiber ausgeben
-        virtual void printData() const;
-        void printDriverInfo(int driver) const;
 
-        // Wir merken uns die Konfiguration von Fmod4
-        DriverMap mDriverData;
-        FMOD::System* mFmod4System;
-        FMOD::ChannelGroup* mMasterChannelGroup;
+        typedef std::map<FMOD::Channel*, Fmod4Sound*> ChannelSoundMap;
 
         static FMOD_RESULT F_CALLBACK open(
             const char *  name,
@@ -137,8 +133,26 @@
             void *  userdata
         );
 
+        static FMOD_RESULT F_CALLBACK channelCallback(
+            FMOD_CHANNEL* channel,
+            FMOD_CHANNEL_CALLBACKTYPE type,
+            int command,
+            unsigned int commanddata1,
+            unsigned int commanddata2
+        );
+
+        /// Log driver config data
+        virtual void printData() const;
+        void printDriverInfo(int driver) const;
+
+        // Wir merken uns die Konfiguration von Fmod4
+        DriverMap mDriverData;
+        /// Stores sounds that are automatically destroyed after having been played.
+        ChannelSoundMap mChannelSoundMap;
+        FMOD::System* mFmod4System;
+        FMOD::ChannelGroup* mMasterChannelGroup;
+
     };
-
 }
 
 #endif /*FMODDRIVER_H_*/

Modified: rl/trunk/plugins/fmod4driver/include/Fmod4Sound.h
===================================================================
--- rl/trunk/plugins/fmod4driver/include/Fmod4Sound.h	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/plugins/fmod4driver/include/Fmod4Sound.h	2007-02-21 15:58:09 UTC (rev 3055)
@@ -19,6 +19,7 @@
 #include "Fmod4DriverPrerequisites.h"
 
 #include "Sound.h"
+#include "SoundDriver.h"
 
 #if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
     #include <fmod.hpp>
@@ -33,20 +34,14 @@
     class _RlFmod4DriverExport Fmod4Sound : public Sound
     {
     public:
-        enum SoundType 
-        {
-            SAMPLE,
-            STREAM
-        };
-
         /// Konstruktor
-        Fmod4Sound(Fmod4Driver* driver, const SoundResourcePtr &soundres, SoundType type = SAMPLE);
+        Fmod4Sound(Fmod4Driver* driver, SoundResourcePtr soundres, SoundType type = ST_SAMPLE);
 
         /// Laedt den Sound.
         virtual void load() throw (RuntimeException);
         /// Entlaedt den Sound.
         virtual void unload() throw (RuntimeException);
-         // Wir geben zur???ck, wie lange der Sound ist.
+        // Running length in seconds
 	    virtual float getLength() const;
 
 		// Sind wir gueltig
@@ -71,8 +66,7 @@
 		/// Setzt die Geschwindigkeit der Soundquelle.
 		virtual void setVelocity(const Ogre::Vector3&);
 
-		/// Spielt den Sound ab.
-		virtual void play();
+        virtual void play(bool destroyWhenDone=false);
 		/// Pausiert den Sound.
 		virtual void pause(bool pausing);
 		/// Ist der Sound pausiert?
@@ -81,7 +75,7 @@
 		virtual void stop();
 		/// Laeuft der Sound noch
 		virtual const bool isPlaying() const;
-	    
+
     private:
 		/// Shared class-level name for Movable type
 		static Ogre::String msMovableType;

Modified: rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/plugins/fmod4driver/src/Fmod4Driver.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -26,6 +26,7 @@
 {
     // Used by FMOD-Callbacks, which are not C++-functions, but C-functions.
     Ogre::ResourceManager* gSoundResourceManager = NULL;
+    Fmod4Driver* gDriver = NULL;
 
     String Fmod4Driver::NAME = "RlFmod4Driver";
 
@@ -34,6 +35,7 @@
         mMasterChannelGroup(NULL)
     {
         gSoundResourceManager = soundResourceManager;
+        gDriver = this;
     }
 
     Fmod4Driver::~Fmod4Driver()
@@ -63,7 +65,7 @@
         mFmod4System->setDriver(-1);
         //CHECK_FMOD4_ERRORS(mFmod4System->setOutput(FMOD_OUTPUTTYPE_ESD));
 
-        FMOD_RESULT result = mFmod4System->init(MAX_VIRTUAL_CHANNELS, FMOD_INIT_NORMAL, NULL); //Alternative: ,Output)
+        FMOD_RESULT result = mFmod4System->init(MAX_VIRTUAL_CHANNELS, FMOD_INIT_NORMAL, NULL);
         if (result != FMOD_OK)
         {
             LOG_ERROR(Logger::CORE,
@@ -103,30 +105,12 @@
         mFmod4System->update();
     }
 
-    /**
-      * Einen Sound-Stream mit Resource erzeugen
-      * @return Der erzeugte Stream
-      * @author JoSch
-      * @date 03-06-2006
-      */
-    Sound *Fmod4Driver::createStreamImpl(const SoundResourcePtr &res)
+    Sound* Fmod4Driver::createSoundImpl(SoundResourcePtr res, SoundType type)
     {
-         Sound *sound = new Fmod4Sound(this, res, Fmod4Sound::STREAM);
-         return sound;
+        Sound* sound = new Fmod4Sound(this, res, type);
+        return sound;
     }
 
-    /**
-     * Einen Sound-Sample mit Resource erzeugen
-     * @return Das erzeugte Sample
-     * @author JoSch
-     * @date 03-06-2006
-     */
-    Sound *Fmod4Driver::createSampleImpl(const SoundResourcePtr &res)
-    {
-        Sound *sound = new Fmod4Sound(this, res, Fmod4Sound::SAMPLE);
-         return sound;
-    }
-
     ListenerMovable *Fmod4Driver::createListener(const Ogre::String &name)
     {
         return new Fmod4Listener(name, mFmod4System);
@@ -284,11 +268,11 @@
     }
 
     FMOD_RESULT F_CALLBACK Fmod4Driver::read(
-        void *  handle,
-        void *  buffer,
+        void*  handle,
+        void*  buffer,
         unsigned int  sizebytes,
-        unsigned int *  bytesread,
-        void *  userdata)
+        unsigned int* bytesread,
+        void*  userdata)
     {
         if (handle == NULL)
         {
@@ -341,6 +325,23 @@
         return FMOD_ERR_INVALID_PARAM;
     }
 
+    FMOD_RESULT F_CALLBACK Fmod4Driver::channelCallback(
+        FMOD_CHANNEL* channel,
+        FMOD_CHANNEL_CALLBACKTYPE type,
+        int command,
+        unsigned int commanddata1,
+        unsigned int commanddata2)
+    {
+        // Look up sound for this channel
+        ChannelSoundMap::iterator it = gDriver->mChannelSoundMap.find((FMOD::Channel*)channel);
+        if (it != gDriver->mChannelSoundMap.end())
+        {
+            gDriver->destroySound(it->second);
+            gDriver->mChannelSoundMap.erase(it);
+        }
+        return FMOD_OK;
+    }
+
     void Fmod4Driver::setMasterVolume(const Ogre::Real& vol)
     {
         SoundDriver::setMasterVolume(vol);
@@ -359,4 +360,11 @@
         mFmod4System->get3DSettings(NULL, NULL, &factor);
         return factor;
     }
+
+    void Fmod4Driver::_registerForAutoDestruction(Fmod4Sound* sound, FMOD::Channel* channel)
+    {
+        FMOD_RESULT res = channel->setCallback(FMOD_CHANNEL_CALLBACKTYPE_END, channelCallback, 0);
+        CHECK_FMOD4_ERRORS(res);
+        mChannelSoundMap.insert(std::make_pair(channel, sound));
+    }
 }

Modified: rl/trunk/plugins/fmod4driver/src/Fmod4Sound.cpp
===================================================================
--- rl/trunk/plugins/fmod4driver/src/Fmod4Sound.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/plugins/fmod4driver/src/Fmod4Sound.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -26,8 +26,8 @@
 
 String Fmod4Sound::msMovableType = "Fmod4Sound";
  
-Fmod4Sound::Fmod4Sound(Fmod4Driver* driver, const rl::SoundResourcePtr &soundres, SoundType type)
-  : Sound(soundres),
+Fmod4Sound::Fmod4Sound(Fmod4Driver* driver, SoundResourcePtr soundres, SoundType type)
+  : Sound(soundres, driver),
     mType(type),
     mSound(NULL),
     mDriver(driver),
@@ -69,7 +69,7 @@
         mode |= FMOD_LOOP_OFF;
     }
 
-    if (mType == Fmod4Sound::SAMPLE)
+    if (mType == ST_SAMPLE)
     {
         FMOD_RESULT res = mDriver->_getFmodSystem()->createSound(
             getSoundResource()->getName().c_str(), 
@@ -79,7 +79,7 @@
 
         CHECK_FMOD4_ERRORS(res);
     }
-    else if (mType == Fmod4Sound::STREAM)
+    else if (mType == ST_STREAM)
     {
         FMOD_RESULT res = mDriver->_getFmodSystem()->createStream(
             getSoundResource()->getName().c_str(), 
@@ -89,6 +89,10 @@
 
         CHECK_FMOD4_ERRORS(res);
     }
+    else
+    {
+        RlFail("Unsupported SoundType.");
+    }
 }
 
 void Fmod4Sound::unload() throw (RuntimeException)
@@ -111,7 +115,7 @@
     return msMovableType;
 }
 
-void Fmod4Sound::play()
+void Fmod4Sound::play(bool destroyWhenDone)
 {
     if (!isValid())
     {
@@ -127,6 +131,10 @@
     CHECK_FMOD4_ERRORS(res);
 
     RlAssert1(mChannel != NULL);
+    if (destroyWhenDone)
+    {
+        mDriver->_registerForAutoDestruction(this, mChannel);
+    }
 
     float vol;
 	if (is3d())
@@ -142,7 +150,6 @@
     setPosition(mPosition);
     setDirection(mDirection);
 	setVelocity(mVelocity); 
-    //getSound()->_getFmodSound()->FSOUND_3D_SetMinMaxDistance(mChannel, mRolloffStartDistance, mRolloffEndDistance);
     pause(false);
     SoundPlayEvent event = SoundPlayEvent(this, SoundPlayEvent::STARTEVENT);
     dispatchEvent(&event);

Modified: rl/trunk/plugins/openaldriver/include/OpenALDriver.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALDriver.h	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/plugins/openaldriver/include/OpenALDriver.h	2007-02-21 15:58:09 UTC (rev 3055)
@@ -52,8 +52,7 @@
         virtual const Ogre::Real getRolloffFactor();
 
     protected:
-        virtual Sound* createStreamImpl(const SoundResourcePtr &res);
-        virtual Sound* createSampleImpl(const SoundResourcePtr &res);
+        virtual Sound* createSoundImpl(SoundResourcePtr res, SoundType type);
 
     private:
         /// Informationen ?ber den Treiber ausgeben

Modified: rl/trunk/plugins/openaldriver/include/OpenALSound.h
===================================================================
--- rl/trunk/plugins/openaldriver/include/OpenALSound.h	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/plugins/openaldriver/include/OpenALSound.h	2007-02-21 15:58:09 UTC (rev 3055)
@@ -54,8 +54,7 @@
     /// Setzt die Geschwindigkeit der Soundquelle.
     virtual void setVelocity(const Ogre::Vector3&);
 
-    /// Spielt den Sound ab.
-    virtual void play();
+    virtual void play(bool destroyWhenDone=false);
     /// Pausiert den Sound.
     virtual void pause(bool pausing);
     /// Ist der Sound pausiert?

Modified: rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/plugins/openaldriver/src/OpenALDriver.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -1,192 +1,191 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-#include "OpenALDriver.h"
-
-#if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
-    // OpenAL 1.1 unter Windows
-//    extern "C" {
-//        #include "al.h"
-//        #include "alc.h"
-//    }
-//#else
-//    // OpenAL 1.0 unter Linux
-//    extern "C" {
-//        #include "AL/al.h"
-//        #include "AL/alc.h"
-//    }
-#endif
-
-#include "OpenALSoundSample.h"
-#include "OpenALSoundStream.h"
-#include "OpenALListener.h"
-
-namespace rl
-{
-    Ogre::String rl::OpenALDriver::NAME = "RlOpenALDriver";
-
-    /**
-     * Konstruktor
-     * @author JoSch
-     * @date 12-23-2005
-     */
-    OpenALDriver::OpenALDriver(Ogre::ResourceManager* soundResourceManager)
-    : SoundDriver(soundResourceManager)
-    {
-    }
-
-    /**
-     * Destruktor
-     * @author JoSch
-     * @date 12-23-2005
-     */
-    OpenALDriver::~OpenALDriver()
-    {
-    }
-
-    /**
-     * Zeigt an, ob der Treiber funktionsf?hig ist.
-     * @return Immer TRUE.
-     * @author JoSch
-     * @date 12-23-2005
-     */
-    bool OpenALDriver::isDriverAvailable()
-    {
-        //try {
-        //    // Clear error code
-        //    alGetError();
-        //    ALCdevice *device = alcOpenDevice(0);
-        //
-        //    if (device == 0)
-        //    {
-        //        return false;
-        //    }
-        //
-        //    //Create context(s)
-        //    ALCcontext *context = alcCreateContext(device, 0);
-        //    //Set active context
-        //    alcMakeContextCurrent(context);
-        //    // Get Error Code
-        //    ALenum success = alGetError();
-        //    //Disable context
-        //    alcMakeContextCurrent(0);
-        //    //Release context(s)
-        //    alcDestroyContext(context);
-        //    //Close device
-        //    alcCloseDevice(device);
-        //
-        //    return (success == AL_NO_ERROR);
-        //} catch (...)
-        //{
-            return false;
-        //}
-    }
-
-    /**
-     * Starte den Treiber und mache alle Initialisierung.
-     * @author JoSch
-     * @date 12-23-2005
-     */
-    bool OpenALDriver::initialize()
-    {
-        return true;
-    }
-
-    /**
-     * Beeende den Treiber und gib alle Resourcen frei.
-     * @author JoSch
-     * @date 12-23-2005
-     */
-    void OpenALDriver::shutdown()
-    {
-    }
-
-    /**
-     * Gibt den Anzeigename des Treiber zur?ck.
-     * @return Anzeigename
-     * @author JoSch
-     * @date 12-23-2005
-     */
-    Ogre::String OpenALDriver::getName() const
-    {
-        return NAME;
-    }
-
-    /**
-     * Update-Aufgaben erledigen
-     * @author JoSch
-     * @date 03-06-2006
-     */
-     void OpenALDriver::update()
-     {
-         // Erstmal nichts zu tun.
-     }
-
-     /**
-      * Einen Sound-Stream mit Resource erzeugen
-      * @return Der erzeugte Stream
-      * @author JoSch
-      * @date 03-06-2006
-      */
-    Sound* OpenALDriver::createStreamImpl(const SoundResourcePtr &res)
-    {
-         Sound *sound = new OpenALSoundStream(this, res);
-         return sound;
-    }
-
-    /**
-     * Einen Sound-Sample mit Resource erzeugen
-     * @return Das erzeugte Sample
-     * @author JoSch
-     * @date 03-06-2006
-     */
-    Sound* OpenALDriver::createSampleImpl(const SoundResourcePtr &res)
-    {
-         Sound *sound = new OpenALSoundSample(this, res);
-         return sound;
-    }
-
-    /**
-     * Einen Soundlistener erzeugen
-     * @return Der erzeugte Listener
-     * @param name Der Name des Channels.
-     * @author JoSch
-     * @date 04-04-2006
-     */
-    ListenerMovable *OpenALDriver::createListener(const Ogre::String &name)
-    {
-        ListenerMovable *listener = new OpenALListener(name);
-        return listener;
-    }
-
-    /**
-     * Ausdruck einiger Werte des Soundsystems.
-     * @author JoSch
-     * @date 01-20-2006
-     */
-    void OpenALDriver::printData() const
-    {
-    }
-
-    void OpenALDriver::setRolloffFactor(const Ogre::Real& f)
-    {
-    }
-
-    const Ogre::Real OpenALDriver::getRolloffFactor()
-    {
-        return 1.0;
-    }
-
-}
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+#include "OpenALDriver.h"
+
+#if OGRE_PLATFORM == OGRE_PLATFORM_WIN32
+    // OpenAL 1.1 unter Windows
+//    extern "C" {
+//        #include "al.h"
+//        #include "alc.h"
+//    }
+//#else
+//    // OpenAL 1.0 unter Linux
+//    extern "C" {
+//        #include "AL/al.h"
+//        #include "AL/alc.h"
+//    }
+#endif
+
+#include "OpenALSoundSample.h"
+#include "OpenALSoundStream.h"
+#include "OpenALListener.h"
+
+namespace rl
+{
+    Ogre::String rl::OpenALDriver::NAME = "RlOpenALDriver";
+
+    /**
+     * Konstruktor
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    OpenALDriver::OpenALDriver(Ogre::ResourceManager* soundResourceManager)
+    : SoundDriver(soundResourceManager)
+    {
+    }
+
+    /**
+     * Destruktor
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    OpenALDriver::~OpenALDriver()
+    {
+    }
+
+    /**
+     * Zeigt an, ob der Treiber funktionsf?hig ist.
+     * @return Immer TRUE.
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    bool OpenALDriver::isDriverAvailable()
+    {
+        //try {
+        //    // Clear error code
+        //    alGetError();
+        //    ALCdevice *device = alcOpenDevice(0);
+        //
+        //    if (device == 0)
+        //    {
+        //        return false;
+        //    }
+        //
+        //    //Create context(s)
+        //    ALCcontext *context = alcCreateContext(device, 0);
+        //    //Set active context
+        //    alcMakeContextCurrent(context);
+        //    // Get Error Code
+        //    ALenum success = alGetError();
+        //    //Disable context
+        //    alcMakeContextCurrent(0);
+        //    //Release context(s)
+        //    alcDestroyContext(context);
+        //    //Close device
+        //    alcCloseDevice(device);
+        //
+        //    return (success == AL_NO_ERROR);
+        //} catch (...)
+        //{
+            return false;
+        //}
+    }
+
+    /**
+     * Starte den Treiber und mache alle Initialisierung.
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    bool OpenALDriver::initialize()
+    {
+        return true;
+    }
+
+    /**
+     * Beeende den Treiber und gib alle Resourcen frei.
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    void OpenALDriver::shutdown()
+    {
+    }
+
+    /**
+     * Gibt den Anzeigename des Treiber zur?ck.
+     * @return Anzeigename
+     * @author JoSch
+     * @date 12-23-2005
+     */
+    Ogre::String OpenALDriver::getName() const
+    {
+        return NAME;
+    }
+
+    /**
+     * Update-Aufgaben erledigen
+     * @author JoSch
+     * @date 03-06-2006
+     */
+     void OpenALDriver::update()
+     {
+         // Erstmal nichts zu tun.
+     }
+
+     /**
+      * Einen Sound-Stream mit Resource erzeugen
+      * @return Der erzeugte Stream
+      * @author JoSch
+      * @date 03-06-2006
+      */
+    Sound* OpenALDriver::createSoundImpl(SoundResourcePtr res, SoundType type)
+    {
+         Sound* sound = NULL;
+         if (type == ST_STREAM)
+         {
+             sound = new OpenALSoundStream(this, res);
+         }
+         else if (type == ST_SAMPLE)
+         {
+             sound = new OpenALSoundSample(this, res);
+         }
+         else
+         {
+             RlFail("Unsupported SoundType.");
+         }
+         return sound;
+    }
+
+    /**
+     * Einen Soundlistener erzeugen
+     * @return Der erzeugte Listener
+     * @param name Der Name des Channels.
+     * @author JoSch
+     * @date 04-04-2006
+     */
+    ListenerMovable *OpenALDriver::createListener(const Ogre::String &name)
+    {
+        ListenerMovable *listener = new OpenALListener(name);
+        return listener;
+    }
+
+    /**
+     * Ausdruck einiger Werte des Soundsystems.
+     * @author JoSch
+     * @date 01-20-2006
+     */
+    void OpenALDriver::printData() const
+    {
+    }
+
+    void OpenALDriver::setRolloffFactor(const Ogre::Real& f)
+    {
+    }
+
+    const Ogre::Real OpenALDriver::getRolloffFactor()
+    {
+        return 1.0;
+    }
+}

Modified: rl/trunk/plugins/openaldriver/src/OpenALSound.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALSound.cpp	2007-02-18 13:03:24 UTC (rev 3054)
+++ rl/trunk/plugins/openaldriver/src/OpenALSound.cpp	2007-02-21 15:58:09 UTC (rev 3055)
@@ -16,6 +16,7 @@
 #include "OpenALSound.h"
 
 #include "OpenALDriver.h"
+#include "Logger.h"
 
 Ogre::String rl::OpenALSound::msMovableType = "OpenALSound";
 
@@ -25,7 +26,7 @@
 {
 
 OpenALSound::OpenALSound(OpenALDriver* driver, const SoundResourcePtr& res)
- : Sound(res),
+ : Sound(res, driver),
    mDriver(driver),
    mChannel(NO_CHANNEL)
 {   
@@ -39,7 +40,7 @@
  * @author JoSch
  * @date 07-23-2005
  */
-void OpenALSound::play()
+void OpenALSound::play(bool destroyWhenDone)
 {
     if (!isValid())
     {
@@ -51,6 +52,13 @@
     setDirection(mDirection);
     setVelocity(mVelocity); 
     pause(false);
+
+    // OpenAL Driver doesn't handle destroyWhenDone yet, so warn about it
+    if (destroyWhenDone)
+    {
+        LOG_WARNING(Logger::MULTIMEDIA, "Sound zum automatischen l?schen regisitert, aber\
+ OpenAL-Treiber unterst?tzt diese Option nicht. Memory-Leak.");
+    }
 }
 
 float OpenALSound::getLength() const



From tanis at mail.berlios.de  Wed Feb 21 17:03:03 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Wed, 21 Feb 2007 17:03:03 +0100
Subject: [Dsa-hl-svn] r3056 - in modules/common/scripts: . jobs
Message-ID: <200702211603.l1LG33Kk005862@sheep.berlios.de>

Author: tanis
Date: 2007-02-21 17:02:54 +0100 (Wed, 21 Feb 2007)
New Revision: 3056

Added:
   modules/common/scripts/jobs/
   modules/common/scripts/jobs/soundjobs.rb
Modified:
   modules/common/scripts/door.rb
   modules/common/scripts/globals.rb
   modules/common/scripts/questsound.rb
Log:
Added functions that wrap Sound job creation and registering, to ease the in-game use.
   PlaySound2d(soundname)
   PlaySound3d(soundname, position)
Door and Questsound now use these new function.
Simplified QuestsoundListener implementation.

Modified: modules/common/scripts/door.rb
===================================================================
--- modules/common/scripts/door.rb	2007-02-21 15:58:09 UTC (rev 3055)
+++ modules/common/scripts/door.rb	2007-02-21 16:02:54 UTC (rev 3056)
@@ -1,5 +1,6 @@
 load "embed.rb"
 #require 'actorupdateanimationlistener.rb'
+require 'jobs/soundjobs.rb'
 
 class OpenDoorAction < Action
   def initialize
@@ -18,9 +19,7 @@
     doorActor.getPhysicalThing().fitToPose("zu");
 
     doorActor.getControlledObject().replaceAnimation("zu", "auf", 1.0, 1);
-
-    knarzActor = door.getSoundActor();
-    knarzActor.getControlledObject().play();
+    PlaySound3d("doorcreak.ogg", doorActor.getPosition());
     door.setOpen(true);
   end
 end
@@ -42,10 +41,7 @@
     doorActor.getPhysicalThing().fitToPose("auf");
 
     doorActor.getControlledObject.replaceAnimation("auf", "zu", 1.0, 1); 
-
-    knarzActor = door.getSoundActor();
-    knarzActor.getControlledObject().play();
-
+    PlaySound3d("doorcreak.ogg", doorActor.getPosition());
     door.setOpen(false);
   end
 end
@@ -70,8 +66,6 @@
 
   def placeIntoScene()
     super()
-    @mSoundActor = $AM.createSoundSampleActor("door_" + getId().to_s + "_knarzen", @mSound);
-    getActor().attach(@mSoundActor);
     addActions();
   end
 
@@ -109,10 +103,5 @@
        end
      end
   end
-
-  def getSoundActor()
-     return @mSoundActor
-  end
-
 end
 

Modified: modules/common/scripts/globals.rb
===================================================================
--- modules/common/scripts/globals.rb	2007-02-21 15:58:09 UTC (rev 3055)
+++ modules/common/scripts/globals.rb	2007-02-21 16:02:54 UTC (rev 3056)
@@ -8,6 +8,7 @@
 GC.disable
 
 $CORE = CoreSubsystem.getSingleton();
+$JS = JobScheduler.getSingleton();
 $AM = ActorManager.getSingleton();
 $PM = PhysicsManager.getSingleton();
 $UI = UiSubsystem.getSingleton();
@@ -49,4 +50,4 @@
 rgof = RubyGameObjectFactory.new();
 $GOM.setGameObjectFactory(rgof);
 
-require( "questsound.rb" );
\ No newline at end of file
+require( "questsound.rb" );

Added: modules/common/scripts/jobs/soundjobs.rb
===================================================================
--- modules/common/scripts/jobs/soundjobs.rb	2007-02-21 15:58:09 UTC (rev 3055)
+++ modules/common/scripts/jobs/soundjobs.rb	2007-02-21 16:02:54 UTC (rev 3056)
@@ -0,0 +1,14 @@
+require 'globals.rb'
+
+# Play a 2d sound
+def PlaySound2d(sound, volume=1.0)
+    job = PlaySound2dJob.new(sound, volume)
+    $JS.addJob(job)
+end
+
+# Play a 3d sound at position pos
+def PlaySound3d(sound, pos, volume=1.0)
+    job = PlaySound3dJob.new(sound, pos, volume)
+    $JS.addJob(job)
+end
+

Modified: modules/common/scripts/questsound.rb
===================================================================
--- modules/common/scripts/questsound.rb	2007-02-21 15:58:09 UTC (rev 3055)
+++ modules/common/scripts/questsound.rb	2007-02-21 16:02:54 UTC (rev 3056)
@@ -1,74 +1,39 @@
-load "embed.rb"
+require 'jobs/soundjobs.rb'
 
-class QuestSoundTimer < TimerListener
-    def initialize(questSoundPlayer)
-        super()
-        @mQuestSoundPlayer = questSoundPlayer
-    end
-
-    def timerFired(event)
-	    @mQuestSoundPlayer.playSound() 
-    end
-end
-
 class QuestSoundPlayer < QuestListener 
 	def initialize()
 		super()
-		@mHasSound = false;
-		@mSound = nil;
-		@mSoundTimer = TimerEventSource.new(0, 1000)
-        @mTimerListener = QuestSoundTimer.new(self)
-		@mSoundTimer.addTimerListener( @mTimerListener )
+        @lastPlayed = 0
 	end
 
 	def questStateChanged( anEvent )
-		#p "State ver?ndert"
-		@mHasSound = true
+        playSound()
 	end
 
 	def questPartsDoneChanged( anEvent )
-		#p "Teile ver?ndert"
-		@mHasSound = true
+        playSound()
 	end
 
 	def questKnownChanged( anEvent )
-		#p "Sichtbarkeit ver?ndert"
-		@mHasSound = true;
+        playSound()
 	end
 
 	def questSubquestAdded( anEvent )
-		#p "Subquest hinzugef?gt"
-		@mHasSound = true
+        playSound()
 	end
 
 	def journalEntryAdded( anEvent )
-		# Journaleintrag hinzugef?gt
-		@mHasSound = true
+        playSound()
 	end
     
 	def playSound()
-        begin 
-            if( @mHasSound )
-                if( @mSound.nil? )
-                    @mSound = $AM.createSoundSampleActor( "QuestAenderung", "quest_aenderung_gekritzel_01.ogg" )
-                    
-                    @mSound.getControlledObject().set3d(false)
-                    @mSound.getControlledObject().load()
-                end
-
-                @mSound.getControlledObject().play()
-                @mHasSound = false
-		    end
-        rescue 
-            @mSoundTimer.removeTimerListener( @mTimerListener )
-            @mHasSound = false
-            p "Questsound ist kaputt gegangen"
-            p @mSound
-            p "@mSound.nil? " + (@mSound.nil?).to_s
-            p "@mSound == nil " + (@mSound == nil).to_s
-            p "@mSound.is_a? Actor " + (@mSound.is_a? Actor).to_s
+        now = $CORE.getClock()
+        # only play sound, if we didn't play it in the last two seconds
+        if (now - @lastPlayed) > 2.0
+            PlaySound2d("quest_aenderung_gekritzel_01.ogg")
+            @lastPlayed = now
         end
-	end
+ 	end
 end
 
-RulesSubsystem.getSingleton().getQuestBook().addQuestListener(  QuestSoundPlayer.new()  )
+RulesSubsystem.getSingleton().getQuestBook().addQuestListener(QuestSoundPlayer.new())



From tanis at mail.berlios.de  Wed Feb 21 17:04:05 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Wed, 21 Feb 2007 17:04:05 +0100
Subject: [Dsa-hl-svn] r3057 - modules/common/materials
Message-ID: <200702211604.l1LG45e4005944@sheep.berlios.de>

Author: tanis
Date: 2007-02-21 17:03:59 +0100 (Wed, 21 Feb 2007)
New Revision: 3057

Modified:
   modules/common/materials/debug_helpers.material
Log:
small changes in debug materials, reenabled backface culling.

Modified: modules/common/materials/debug_helpers.material
===================================================================
--- modules/common/materials/debug_helpers.material	2007-02-21 16:02:54 UTC (rev 3056)
+++ modules/common/materials/debug_helpers.material	2007-02-21 16:03:59 UTC (rev 3057)
@@ -21,9 +21,6 @@
 
          lighting off
 
-         //cull_software none
-         //cull_hardware none
-
          texture_unit
          {
             colour_op_ex source1 src_manual src_current 1.0 0.5 1.0
@@ -42,9 +39,6 @@
          depth_write off
          scene_blend alpha_blend
 
-         cull_software none
-         cull_hardware none
-
          texture_unit
          {
             colour_op_ex source1 src_manual src_current 1.0 0.5 1.0
@@ -63,9 +57,6 @@
          depth_write off
          scene_blend alpha_blend
 
-         cull_software none
-         cull_hardware none
-
          texture_unit
          {
             colour_op_ex source1 src_manual src_current 1.0 0.5 0.5
@@ -84,9 +75,6 @@
          depth_write off
          scene_blend alpha_blend
 
-         cull_software none
-         cull_hardware none
-
          texture_unit
          {
             colour_op_ex source1 src_manual src_current 0.5 1.0 0.5
@@ -105,9 +93,6 @@
          depth_write off
          scene_blend alpha_blend
 
-         cull_software none
-         cull_hardware none
-
          texture_unit
          {
             colour_op_ex source1 src_manual src_current 0.5 0.5 1.0
@@ -126,9 +111,6 @@
          depth_write off
          scene_blend alpha_blend
 
-         cull_software none
-         cull_hardware none
-
          texture_unit
          {
             colour_op_ex source1 src_manual src_current 1.0 1.0 0.5
@@ -147,9 +129,6 @@
          depth_write off
          scene_blend alpha_blend
 
-         cull_software none
-         cull_hardware none
-
          texture_unit
          {
             colour_op_ex source1 src_manual src_current 1.0 0.5 0.0



From tanis at mail.berlios.de  Wed Feb 21 22:07:42 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Wed, 21 Feb 2007 22:07:42 +0100
Subject: [Dsa-hl-svn] r3058 - modules/common/scripts
Message-ID: <200702212107.l1LL7gR3028911@sheep.berlios.de>

Author: tanis
Date: 2007-02-21 22:07:38 +0100 (Wed, 21 Feb 2007)
New Revision: 3058

Modified:
   modules/common/scripts/questsound.rb
Log:
getClock gives time in milliseconds, so fix the comparison.

Modified: modules/common/scripts/questsound.rb
===================================================================
--- modules/common/scripts/questsound.rb	2007-02-21 16:03:59 UTC (rev 3057)
+++ modules/common/scripts/questsound.rb	2007-02-21 21:07:38 UTC (rev 3058)
@@ -29,7 +29,7 @@
 	def playSound()
         now = $CORE.getClock()
         # only play sound, if we didn't play it in the last two seconds
-        if (now - @lastPlayed) > 2.0
+        if (now - @lastPlayed) > 2000
             PlaySound2d("quest_aenderung_gekritzel_01.ogg")
             @lastPlayed = now
         end



From tanis at mail.berlios.de  Wed Feb 21 22:35:34 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Wed, 21 Feb 2007 22:35:34 +0100
Subject: [Dsa-hl-svn] r3059 - dependencies/aiml/dependencies/XmlMapper
Message-ID: <200702212135.l1LLZYYb000600@sheep.berlios.de>

Author: tanis
Date: 2007-02-21 22:35:21 +0100 (Wed, 21 Feb 2007)
New Revision: 3059

Modified:
   dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
   dependencies/aiml/dependencies/XmlMapper/XmlNodeProcessor.h
Log:
Maybe(?) fixed the compile problem some have with the xml interpeter.

Modified: dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
===================================================================
--- dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-21 21:07:38 UTC (rev 3058)
+++ dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-21 21:35:21 UTC (rev 3059)
@@ -51,7 +51,15 @@
 
 		XmlInterpreter(const S& pName) : 
 		  XmlProcessor<R, T, S, hasPolymorphicReturnType>(pName) {}
-		virtual ~XmlInterpreter();
+		virtual ~XmlInterpreter()
+        {
+		    ProcessorMap::iterator itr = mProcessors.begin();
+		    for(; itr != mProcessors.end(); ++itr)
+		    {
+			    delete itr->second;
+		    }
+		    mProcessors.clear();
+        }
 
 		void addProcessor(XmlProcessorPtr pProcessor);
 		XmlProcessorPtr getProcessor(const S& pName);
@@ -60,7 +68,7 @@
 		// virtual const S& getName() { return mName; }
 		virtual typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType getCurrentReturnValue() { return mReturnValue; }
 		virtual typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType interpret(XmlDocument<S>* pDocument, T<S>* pProcessHelper = NULL)
-        {
+	    {
 		    if(pDocument != NULL)
 		    {
 			    XmlNode<S>* root = pDocument->getRootNode();
@@ -71,7 +79,7 @@
 			    }
 		    }
 		    return mReturnValue;
-        }
+	    }
 		
 		void setParent(XmlProcessorPtr pProcessor) {}
 
@@ -85,17 +93,6 @@
 	};
 
 	template<template <class> class R, template <class> class T, class S, bool hasPolymorphicReturnType> 
-	XmlInterpreter<R, T, S, hasPolymorphicReturnType>::~XmlInterpreter()
-	{
-		typename XmlInterpreter<R, T, S, hasPolymorphicReturnType>::ProcessorMap::iterator itr = mProcessors.begin();
-		for(; itr != mProcessors.end(); ++itr)
-		{
-			delete itr->second;
-		}
-		mProcessors.clear();
-	}
-
-	template<template <class> class R, template <class> class T, class S, bool hasPolymorphicReturnType> 
 	void XmlInterpreter<R, T, S, hasPolymorphicReturnType>::addProcessor(XmlProcessor<R, T, S, hasPolymorphicReturnType>* pProcessor)
 	{
 		mProcessors.insert(std::pair<S,XmlProcessor<R, T, S, hasPolymorphicReturnType>*>(pProcessor->getName(), pProcessor));

Modified: dependencies/aiml/dependencies/XmlMapper/XmlNodeProcessor.h
===================================================================
--- dependencies/aiml/dependencies/XmlMapper/XmlNodeProcessor.h	2007-02-21 21:07:38 UTC (rev 3058)
+++ dependencies/aiml/dependencies/XmlMapper/XmlNodeProcessor.h	2007-02-21 21:35:21 UTC (rev 3059)
@@ -64,8 +64,7 @@
 		XmlProcessorPtr getProcessor(const S& pName);
 		
 		virtual typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType process(XmlNodePtr pNode, T<S>* pProcessHelper = NULL)
-        {
-//		    mCurrentReturnValue = NULL;
+	    {
 		    mCurrentHelper = pProcessHelper;
 		    mCurrentNode = pNode;
 		    createAttributeMapping();
@@ -81,7 +80,7 @@
 		    postprocessStep();
 		    mCurrentNode = NULL;
 		    return mCurrentReturnValue;
-        }
+	    }
 		void setParent(XmlProcessorPtr pProcessor) { mInterpreter = pProcessor; }
 
 	private:
@@ -176,7 +175,6 @@
 		}
 		return true;
 	}
-
 }
 
 #endif



From tanis at mail.berlios.de  Thu Feb 22 10:17:12 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Thu, 22 Feb 2007 10:17:12 +0100
Subject: [Dsa-hl-svn] r3060 - dependencies/aiml/dependencies/XmlMapper
Message-ID: <200702220917.l1M9HC5m003614@sheep.berlios.de>

Author: tanis
Date: 2007-02-22 10:17:05 +0100 (Thu, 22 Feb 2007)
New Revision: 3060

Modified:
   dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
Log:
Fix for the fix. Should now work with gcc too.

Modified: dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
===================================================================
--- dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-21 21:35:21 UTC (rev 3059)
+++ dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-22 09:17:05 UTC (rev 3060)
@@ -48,6 +48,7 @@
 	//	typedefs are needed for gcc 3.5.5, reason unknown
 		typedef XmlProcessor<R, T, S,hasPolymorphicReturnType>* XmlProcessorPtr;
 		typedef XmlNode<S>* XmlNodePtr;
+		typedef std::map<S, XmlProcessorPtr> ProcessorMap;
 
 		XmlInterpreter(const S& pName) : 
 		  XmlProcessor<R, T, S, hasPolymorphicReturnType>(pName) {}
@@ -87,7 +88,6 @@
 		virtual void initialize()=0;
 		bool isProcessable(XmlNodePtr pNode);
 
-		typedef std::map<S, XmlProcessorPtr> ProcessorMap;
 		typename XmlInterpreter<R, T, S, hasPolymorphicReturnType>::ProcessorMap mProcessors;
 		typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType mReturnValue;
 	};



From tanis at mail.berlios.de  Thu Feb 22 10:29:11 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Thu, 22 Feb 2007 10:29:11 +0100
Subject: [Dsa-hl-svn] r3061 - dependencies/aiml/dependencies/XmlMapper
Message-ID: <200702220929.l1M9TBP2005885@sheep.berlios.de>

Author: tanis
Date: 2007-02-22 10:28:55 +0100 (Thu, 22 Feb 2007)
New Revision: 3061

Modified:
   dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
Log:
Fix for the fix. Should now work with gcc too.

Modified: dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
===================================================================
--- dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-22 09:17:05 UTC (rev 3060)
+++ dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-22 09:28:55 UTC (rev 3061)
@@ -44,11 +44,17 @@
 				bool hasPolymorphicReturnType=true> 
 	class XmlInterpreter : public XmlProcessor<R, T, S, hasPolymorphicReturnType>
 	{
+	protected:
+		virtual void initialize()=0;
+		bool isProcessable(XmlNodePtr pNode);
+		typedef std::map<S, XmlProcessorPtr> ProcessorMap;
+
+		typename XmlInterpreter<R, T, S, hasPolymorphicReturnType>::ProcessorMap mProcessors;
+		typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType mReturnValue;
 	public:
 	//	typedefs are needed for gcc 3.5.5, reason unknown
 		typedef XmlProcessor<R, T, S,hasPolymorphicReturnType>* XmlProcessorPtr;
 		typedef XmlNode<S>* XmlNodePtr;
-		typedef std::map<S, XmlProcessorPtr> ProcessorMap;
 
 		XmlInterpreter(const S& pName) : 
 		  XmlProcessor<R, T, S, hasPolymorphicReturnType>(pName) {}
@@ -84,12 +90,6 @@
 		
 		void setParent(XmlProcessorPtr pProcessor) {}
 
-	protected:
-		virtual void initialize()=0;
-		bool isProcessable(XmlNodePtr pNode);
-
-		typename XmlInterpreter<R, T, S, hasPolymorphicReturnType>::ProcessorMap mProcessors;
-		typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType mReturnValue;
 	};
 
 	template<template <class> class R, template <class> class T, class S, bool hasPolymorphicReturnType> 



From tanis at mail.berlios.de  Thu Feb 22 10:36:33 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Thu, 22 Feb 2007 10:36:33 +0100
Subject: [Dsa-hl-svn] r3062 - dependencies/aiml/dependencies/XmlMapper
Message-ID: <200702220936.l1M9aXka007070@sheep.berlios.de>

Author: tanis
Date: 2007-02-22 10:36:27 +0100 (Thu, 22 Feb 2007)
New Revision: 3062

Modified:
   dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
Log:
Fix for the fix. Should now work with gcc too.

Modified: dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
===================================================================
--- dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-22 09:28:55 UTC (rev 3061)
+++ dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-22 09:36:27 UTC (rev 3062)
@@ -44,6 +44,10 @@
 				bool hasPolymorphicReturnType=true> 
 	class XmlInterpreter : public XmlProcessor<R, T, S, hasPolymorphicReturnType>
 	{
+	public:
+	//	typedefs are needed for gcc 3.5.5, reason unknown
+		typedef XmlProcessor<R, T, S,hasPolymorphicReturnType>* XmlProcessorPtr;
+		typedef XmlNode<S>* XmlNodePtr;
 	protected:
 		virtual void initialize()=0;
 		bool isProcessable(XmlNodePtr pNode);
@@ -52,9 +56,6 @@
 		typename XmlInterpreter<R, T, S, hasPolymorphicReturnType>::ProcessorMap mProcessors;
 		typename XmlProcessor<R, T, S, hasPolymorphicReturnType>::ReturnType mReturnValue;
 	public:
-	//	typedefs are needed for gcc 3.5.5, reason unknown
-		typedef XmlProcessor<R, T, S,hasPolymorphicReturnType>* XmlProcessorPtr;
-		typedef XmlNode<S>* XmlNodePtr;
 
 		XmlInterpreter(const S& pName) : 
 		  XmlProcessor<R, T, S, hasPolymorphicReturnType>(pName) {}



From blakharaz at mail.berlios.de  Thu Feb 22 11:26:36 2007
From: blakharaz at mail.berlios.de (blakharaz at mail.berlios.de)
Date: Thu, 22 Feb 2007 11:26:36 +0100
Subject: [Dsa-hl-svn] r3063 - dependencies/aiml/dependencies/XmlMapper
Message-ID: <200702221026.l1MAQa4s014410@sheep.berlios.de>

Author: blakharaz
Date: 2007-02-22 11:26:34 +0100 (Thu, 22 Feb 2007)
New Revision: 3063

Modified:
   dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
Log:
GCC needs typename in variable definitions with template types


Modified: dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h
===================================================================
--- dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-22 09:36:27 UTC (rev 3062)
+++ dependencies/aiml/dependencies/XmlMapper/XmlInterpreter.h	2007-02-22 10:26:34 UTC (rev 3063)
@@ -61,7 +61,7 @@
 		  XmlProcessor<R, T, S, hasPolymorphicReturnType>(pName) {}
 		virtual ~XmlInterpreter()
         {
-		    ProcessorMap::iterator itr = mProcessors.begin();
+		    typename ProcessorMap::iterator itr = mProcessors.begin();
 		    for(; itr != mProcessors.end(); ++itr)
 		    {
 			    delete itr->second;



From chrber at mail.berlios.de  Thu Feb 22 12:20:08 2007
From: chrber at mail.berlios.de (chrber at BerliOS)
Date: Thu, 22 Feb 2007 12:20:08 +0100
Subject: [Dsa-hl-svn] r3064 - in rl/trunk/engine/core: include src
Message-ID: <200702221120.l1MBK8sB022824@sheep.berlios.de>

Author: chrber
Date: 2007-02-22 12:20:08 +0100 (Thu, 22 Feb 2007)
New Revision: 3064

Modified:
   rl/trunk/engine/core/include/Makefile.am
   rl/trunk/engine/core/src/Makefile.am
Log:
Added PlaySound.{cpp,h} to Makefiles


Modified: rl/trunk/engine/core/include/Makefile.am
===================================================================
--- rl/trunk/engine/core/include/Makefile.am	2007-02-22 10:26:34 UTC (rev 3063)
+++ rl/trunk/engine/core/include/Makefile.am	2007-02-22 11:20:08 UTC (rev 3064)
@@ -41,6 +41,7 @@
 	PhysicsController.h \
 	PhysicsManager.h \
 	PhysicsMaterialRaycast.h \
+	PlaySoundJob.h \
 	PrimitiveObject.h \
 	RubyInterpreter.h \
 	SceneQuery.h \

Modified: rl/trunk/engine/core/src/Makefile.am
===================================================================
--- rl/trunk/engine/core/src/Makefile.am	2007-02-22 10:26:34 UTC (rev 3063)
+++ rl/trunk/engine/core/src/Makefile.am	2007-02-22 11:20:08 UTC (rev 3064)
@@ -44,6 +44,7 @@
 	PhysicsGenericContactCallback.cpp \
 	PhysicsManager.cpp \
 	PhysicsMaterialRaycast.cpp \
+	PlaySoundJob.cpp \
 	PrimitiveObject.cpp \
 	RubyInterpreter.cpp \
 	SceneQuery.cpp \



From tanis at mail.berlios.de  Thu Feb 22 12:35:42 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Thu, 22 Feb 2007 12:35:42 +0100
Subject: [Dsa-hl-svn] r3065 - in rl/trunk/engine: core core/include core/src
	script/swig
Message-ID: <200702221135.l1MBZgUS003712@sheep.berlios.de>

Author: tanis
Date: 2007-02-22 12:35:07 +0100 (Thu, 22 Feb 2007)
New Revision: 3065

Added:
   rl/trunk/engine/core/include/PlayAnimationJob.h
   rl/trunk/engine/core/src/PlayAnimationJob.cpp
Modified:
   rl/trunk/engine/core/RlCore2005.vcproj
   rl/trunk/engine/script/swig/RlCore.head.inc
   rl/trunk/engine/script/swig/RlCore.inc
Log:
Animations can be played as a job too now.

Modified: rl/trunk/engine/core/RlCore2005.vcproj
===================================================================
--- rl/trunk/engine/core/RlCore2005.vcproj	2007-02-22 11:20:08 UTC (rev 3064)
+++ rl/trunk/engine/core/RlCore2005.vcproj	2007-02-22 11:35:07 UTC (rev 3065)
@@ -513,6 +513,10 @@
 				>
 			</File>
 			<File
+				RelativePath=".\include\PlayAnimationJob.h"
+				>
+			</File>
+			<File
 				RelativePath=".\include\PlaySoundJob.h"
 				>
 			</File>
@@ -734,6 +738,10 @@
 				>
 			</File>
 			<File
+				RelativePath=".\src\PlayAnimationJob.cpp"
+				>
+			</File>
+			<File
 				RelativePath=".\src\PlaySoundJob.cpp"
 				>
 			</File>

Added: rl/trunk/engine/core/include/PlayAnimationJob.h
===================================================================
--- rl/trunk/engine/core/include/PlayAnimationJob.h	2007-02-22 11:20:08 UTC (rev 3064)
+++ rl/trunk/engine/core/include/PlayAnimationJob.h	2007-02-22 11:35:07 UTC (rev 3065)
@@ -0,0 +1,55 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#ifndef __RL_PLAY_ANIMATION_JOB_H__
+#define __RL_PLAY_ANIMATION_JOB_H__
+
+#include "CorePrerequisites.h"
+#include "Actor.h"
+#include "Job.h"
+
+namespace rl
+{
+    /// A rl#Job to play an animation.
+    class _RlCoreExport PlayAnimationJob : public Job
+    {
+    public:
+
+        /**
+        * Job for playing an animation on an actor.
+        * @param actor  the actor to invoke the animation from. Animation will be played only, if
+        *               the actor has a rl#MeshObject attached.
+        * @param anim   the name of the animation to be played.
+        * @param doLoop <code>true</code> if animation should be played as a loop,
+        *               <code>false</code> else.
+        * @param replaceAllAnims <code>true</code> if all other animations should be stopped,
+        *                        when this animation is started, <code>false</code> else.
+        */
+        PlayAnimationJob(Actor* actor, const Ogre::String& anim, bool doLoop=false,
+            bool replaceAllAnims=true);
+        virtual ~PlayAnimationJob();
+
+        virtual bool execute(Ogre::Real time);
+
+    private:
+        Actor* mActor;
+        Ogre::String mAnimName;
+        bool mLoop;
+        bool mReplaceAllAnims;
+    };
+}
+
+#endif

Added: rl/trunk/engine/core/src/PlayAnimationJob.cpp
===================================================================
--- rl/trunk/engine/core/src/PlayAnimationJob.cpp	2007-02-22 11:20:08 UTC (rev 3064)
+++ rl/trunk/engine/core/src/PlayAnimationJob.cpp	2007-02-22 11:35:07 UTC (rev 3065)
@@ -0,0 +1,52 @@
+/* This source file is part of Rastullahs Lockenpracht.
+* Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+* 
+*  This program is free software; you can redistribute it and/or modify
+*  it under the terms of the Clarified Artistic License.
+*
+*  This program is distributed in the hope that it will be useful,
+*  but WITHOUT ANY WARRANTY; without even the implied warranty of
+*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+*  Clarified Artistic License for more details.
+*
+*  You should have received a copy of the Clarified Artistic License
+*  along with this program; if not you can get it here
+*  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+*/
+
+#include "PlayAnimationJob.h"
+#include "MeshObject.h"
+
+using namespace Ogre;
+
+namespace rl
+{
+
+    PlayAnimationJob::PlayAnimationJob(Actor* actor, const String& anim, bool doLoop,
+        bool replaceAllAnims)
+        : Job(false, true),
+          mActor(actor),
+          mAnimName(anim),
+          mLoop(doLoop),
+          mReplaceAllAnims(replaceAllAnims)
+    {
+    }
+
+    PlayAnimationJob::~PlayAnimationJob()
+    {
+    }
+
+    bool PlayAnimationJob::execute(Ogre::Real time)
+    {
+        if (mActor != NULL)
+        {
+            MeshObject* mo = dynamic_cast<MeshObject*>(mActor->getControlledObject());
+            if (mReplaceAllAnims)
+            {
+                mo->stopAllAnimations();
+            }
+            mo->startAnimation(mAnimName, 1.0f, mLoop ? 0 : 1);
+        }
+        return true;
+    }
+}

Modified: rl/trunk/engine/script/swig/RlCore.head.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCore.head.inc	2007-02-22 11:20:08 UTC (rev 3064)
+++ rl/trunk/engine/script/swig/RlCore.head.inc	2007-02-22 11:35:07 UTC (rev 3065)
@@ -54,6 +54,7 @@
 #include "Job.h"
 #include "JobListener.h"
 #include "PlaySoundJob.h"
+#include "PlayAnimationJob.h"
 #undef message
 #undef send
 %}

Modified: rl/trunk/engine/script/swig/RlCore.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCore.inc	2007-02-22 11:20:08 UTC (rev 3064)
+++ rl/trunk/engine/script/swig/RlCore.inc	2007-02-22 11:35:07 UTC (rev 3065)
@@ -737,6 +737,15 @@
     virtual ~PlaySound3dJob();
 };
 
+class PlayAnimationJob : public Job
+{
+public:
+
+    PlayAnimationJob(Actor* actor, const Ogre::String& anim, bool doLoop=false,
+		bool replaceAllAnims=true);
+    virtual ~PlayAnimationJob();
+};
+
 class JobScheduler
 {
 public:



From tanis at mail.berlios.de  Thu Feb 22 12:36:41 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Thu, 22 Feb 2007 12:36:41 +0100
Subject: [Dsa-hl-svn] r3066 - in modules/common/scripts: . jobs
Message-ID: <200702221136.l1MBaf7t006548@sheep.berlios.de>

Author: tanis
Date: 2007-02-22 12:36:33 +0100 (Thu, 22 Feb 2007)
New Revision: 3066

Added:
   modules/common/scripts/jobs/animationjobs.rb
Modified:
   modules/common/scripts/door.rb
Log:
Use the new animation job.

Modified: modules/common/scripts/door.rb
===================================================================
--- modules/common/scripts/door.rb	2007-02-22 11:35:07 UTC (rev 3065)
+++ modules/common/scripts/door.rb	2007-02-22 11:36:33 UTC (rev 3066)
@@ -1,6 +1,7 @@
 load "embed.rb"
 #require 'actorupdateanimationlistener.rb'
 require 'jobs/soundjobs.rb'
+require 'jobs/animationjobs.rb'
 
 class OpenDoorAction < Action
   def initialize
@@ -18,7 +19,7 @@
     #p "call fitToPose for zu"
     doorActor.getPhysicalThing().fitToPose("zu");
 
-    doorActor.getControlledObject().replaceAnimation("zu", "auf", 1.0, 1);
+    PlayAnimation(doorActor, "auf");
     PlaySound3d("doorcreak.ogg", doorActor.getPosition());
     door.setOpen(true);
   end
@@ -40,7 +41,7 @@
     #p "call fitToPose for auf"
     doorActor.getPhysicalThing().fitToPose("auf");
 
-    doorActor.getControlledObject.replaceAnimation("auf", "zu", 1.0, 1); 
+    PlayAnimation(doorActor, "zu");
     PlaySound3d("doorcreak.ogg", doorActor.getPosition());
     door.setOpen(false);
   end

Added: modules/common/scripts/jobs/animationjobs.rb
===================================================================
--- modules/common/scripts/jobs/animationjobs.rb	2007-02-22 11:35:07 UTC (rev 3065)
+++ modules/common/scripts/jobs/animationjobs.rb	2007-02-22 11:36:33 UTC (rev 3066)
@@ -0,0 +1,7 @@
+require 'globals.rb'
+
+def PlayAnimation(actor, anim, doloop=false, replace=true)
+    job = PlayAnimationJob.new(actor, anim, doloop, replace)
+    $JS.addJob(job)
+end
+



From tanis at mail.berlios.de  Thu Feb 22 14:29:15 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Thu, 22 Feb 2007 14:29:15 +0100
Subject: [Dsa-hl-svn] r3067 - modules/common/dsa
Message-ID: <200702221329.l1MDTF2g017844@sheep.berlios.de>

Author: tanis
Date: 2007-02-22 14:29:12 +0100 (Thu, 22 Feb 2007)
New Revision: 3067

Modified:
   modules/common/dsa/gameobjectdefinitions.gof
Log:
Doors have convex hull as geom type, not sphere.

Modified: modules/common/dsa/gameobjectdefinitions.gof
===================================================================
--- modules/common/dsa/gameobjectdefinitions.gof	2007-02-22 11:36:33 UTC (rev 3066)
+++ modules/common/dsa/gameobjectdefinitions.gof	2007-02-22 13:29:12 UTC (rev 3067)
@@ -5,7 +5,7 @@
 		<property name="classid" type="STRING" data="door"/>
 		<property name="baseclass" type="STRING" data="Door"/>
 		<property name="description" type="STRING" data="Eine T?r"/>
-		<property name="geometrytype" type="INT" data="1"/>
+		<property name="geometrytype" type="INT" data="5"/>
 		<property name="meshfile" type="STRING" data="arc_tuer_01.mesh"/>
 		<property name="sound" type="STRING" data="doorcreak.ogg"/>
 		<property name="open" type="BOOL" data="false"/>
@@ -19,4 +19,4 @@
 		<property name="mass" type="REAL" data="75"/>
 	</gameobjectclass>
 
-</GameObjectDefinitions>
\ No newline at end of file
+</GameObjectDefinitions>



From zero-gravity at mail.berlios.de  Thu Feb 22 17:31:17 2007
From: zero-gravity at mail.berlios.de (zero-gravity at mail.berlios.de)
Date: Thu, 22 Feb 2007 17:31:17 +0100
Subject: [Dsa-hl-svn] r3068 - in modules/regressiontest: dsa scripts
	scripts/maps
Message-ID: <200702221631.l1MGVHgk013419@sheep.berlios.de>

Author: zero-gravity
Date: 2007-02-22 17:31:08 +0100 (Thu, 22 Feb 2007)
New Revision: 3068

Added:
   modules/regressiontest/scripts/ErrorHandlingTest.rb
Modified:
   modules/regressiontest/dsa/gameobjectdefinitions.gof
   modules/regressiontest/scripts/maps/regressiontest.rb
Log:
Added ErrorHandling TestCase

Modified: modules/regressiontest/dsa/gameobjectdefinitions.gof
===================================================================
--- modules/regressiontest/dsa/gameobjectdefinitions.gof	2007-02-22 13:29:12 UTC (rev 3067)
+++ modules/regressiontest/dsa/gameobjectdefinitions.gof	2007-02-22 16:31:08 UTC (rev 3068)
@@ -54,4 +54,11 @@
         <property name="meshfile" type="STRING" data="ins_rucksack.mesh"/>
     </gameobjectclass>
 
+    <gameobjectclass>
+        <property name="classid" type="STRING" data="ErrorHandling"/>
+        <property name="baseclass" type="STRING" data="GameObject" />
+        <property name="description" type="STRING" data="The ErrorHandling TestCase"/>
+        <property name="meshfile" type="STRING" data="arc_hebel_01.mesh"/>
+    </gameobjectclass>
+
 </GameObjectDefinitions>

Added: modules/regressiontest/scripts/ErrorHandlingTest.rb
===================================================================
--- modules/regressiontest/scripts/ErrorHandlingTest.rb	2007-02-22 13:29:12 UTC (rev 3067)
+++ modules/regressiontest/scripts/ErrorHandlingTest.rb	2007-02-22 16:31:08 UTC (rev 3068)
@@ -0,0 +1,38 @@
+require 'util/vector_util.rb'
+require 'testcase.rb'
+require 'globals.rb'
+
+class DirectorErrorAction < Action
+  def initialize
+    super("DirectorErrorAction", "Raises an Exception.");
+  end
+  
+  def canDo(go, user)
+    true
+  end
+  
+  def doAction(go, user, target)
+    raise "This is an Error. Go handle it!";
+  end
+end
+
+class ErrorHandlingTest < TestCase
+    def initialize(center)
+        super(center)
+
+        # Define a base box to place everything else on.
+        height = 0.3
+        min_base = [-2.0, 0.05, -2.0]
+        max_base = [2.0, height, 2.0]
+        base = $AM.createBoxPrimitiveActor("ErrorHandling", min_base, max_base,
+                                          "alpha_orange")
+        base.placeIntoScene(center);
+
+        eh = $GOM.createGameObjectProxy("ErrorHandling").getGameObject();
+        eh.addAction(DirectorErrorAction.new());
+        eh.placeIntoScene();
+        eh.setPosition(rel_pos([0.0, height, 0.0]));
+
+        $SCRIPT.log("TimeTest initialisiert");
+    end
+end
\ No newline at end of file

Modified: modules/regressiontest/scripts/maps/regressiontest.rb
===================================================================
--- modules/regressiontest/scripts/maps/regressiontest.rb	2007-02-22 13:29:12 UTC (rev 3067)
+++ modules/regressiontest/scripts/maps/regressiontest.rb	2007-02-22 16:31:08 UTC (rev 3068)
@@ -8,6 +8,7 @@
 require 'NpcTest.rb'
 require 'TimeTest.rb'
 require 'InventoryTest.rb'
+require 'ErrorHandlingTest.rb'
 
 # Physik aktivieren
 $PM.setEnabled(true)
@@ -35,6 +36,7 @@
 #GameObjectStatesTest.new([0, 0, 5])
 NpcTest.new([-5, 0, 5])
 TimeTest.new([-5, 0, -5])
+ErrorHandlingTest.new([-10, 0, 5])
 InventoryTest.new([0, 0, 10])
 
 $SCRIPT.log("tests initialisiert.");



From josch at mail.berlios.de  Thu Feb 22 23:44:02 2007
From: josch at mail.berlios.de (josch at mail.berlios.de)
Date: Thu, 22 Feb 2007 23:44:02 +0100
Subject: [Dsa-hl-svn] r3069 - in rl/trunk/engine/core: include src
Message-ID: <200702222244.l1MMi2TW009077@sheep.berlios.de>

Author: josch
Date: 2007-02-22 23:43:58 +0100 (Thu, 22 Feb 2007)
New Revision: 3069

Modified:
   rl/trunk/engine/core/include/Makefile.am
   rl/trunk/engine/core/src/Makefile.am
Log:
PlayAnimation.h/cpp forgotten in Makefile.ams

Modified: rl/trunk/engine/core/include/Makefile.am
===================================================================
--- rl/trunk/engine/core/include/Makefile.am	2007-02-22 16:31:08 UTC (rev 3068)
+++ rl/trunk/engine/core/include/Makefile.am	2007-02-22 22:43:58 UTC (rev 3069)
@@ -41,6 +41,7 @@
 	PhysicsController.h \
 	PhysicsManager.h \
 	PhysicsMaterialRaycast.h \
+	PlayAnimationJob.h \
 	PlaySoundJob.h \
 	PrimitiveObject.h \
 	RubyInterpreter.h \

Modified: rl/trunk/engine/core/src/Makefile.am
===================================================================
--- rl/trunk/engine/core/src/Makefile.am	2007-02-22 16:31:08 UTC (rev 3068)
+++ rl/trunk/engine/core/src/Makefile.am	2007-02-22 22:43:58 UTC (rev 3069)
@@ -44,6 +44,7 @@
 	PhysicsGenericContactCallback.cpp \
 	PhysicsManager.cpp \
 	PhysicsMaterialRaycast.cpp \
+	PlayAnimationJob.cpp \
 	PlaySoundJob.cpp \
 	PrimitiveObject.cpp \
 	RubyInterpreter.cpp \



From tanis at mail.berlios.de  Fri Feb 23 22:07:18 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Fri, 23 Feb 2007 22:07:18 +0100
Subject: [Dsa-hl-svn] r3070 - in rl/trunk/engine: core/src script/swig
Message-ID: <200702232107.l1NL7IGs024221@sheep.berlios.de>

Author: tanis
Date: 2007-02-23 22:07:07 +0100 (Fri, 23 Feb 2007)
New Revision: 3070

Modified:
   rl/trunk/engine/core/src/JobScheduler.cpp
   rl/trunk/engine/script/swig/RlCore.inc
Log:
Fix bug in Scheduler that caused delayed jobs not to run.
Export PlayAnimationJob to ruby.

Modified: rl/trunk/engine/core/src/JobScheduler.cpp
===================================================================
--- rl/trunk/engine/core/src/JobScheduler.cpp	2007-02-22 22:43:58 UTC (rev 3069)
+++ rl/trunk/engine/core/src/JobScheduler.cpp	2007-02-23 21:07:07 UTC (rev 3070)
@@ -122,7 +122,7 @@
                     notDone.push_back(entry);
                 }
             }
-            else if (!(clock < entry.end))
+            else if (clock < entry.end)
             {
                 // Start time not yet reached. Queue again.
                 notDone.push_back(entry);

Modified: rl/trunk/engine/script/swig/RlCore.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCore.inc	2007-02-22 22:43:58 UTC (rev 3069)
+++ rl/trunk/engine/script/swig/RlCore.inc	2007-02-23 21:07:07 UTC (rev 3070)
@@ -749,8 +749,11 @@
 class JobScheduler
 {
 public:
+    typedef enum {JP_LOW = 10, JP_NORMAL = 20, JP_HIGH = 30} JobPriority;
 	static JobScheduler& getSingleton(void);
-    unsigned long addJob(rl::Job* job);
+    unsigned long addJob(rl::Job* job,
+		rl::JobScheduler::JobPriority priority = JobScheduler::JP_NORMAL,
+		Ogre::Real delay=0.0f);
 };
 
 }



From tanis at mail.berlios.de  Fri Feb 23 22:11:40 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Fri, 23 Feb 2007 22:11:40 +0100
Subject: [Dsa-hl-svn] r3071 - in modules: common/scripts/jobs
	regressiontest/dsa regressiontest/scripts
	regressiontest/scripts/maps
Message-ID: <200702232111.l1NLBeT0024495@sheep.berlios.de>

Author: tanis
Date: 2007-02-23 22:11:02 +0100 (Fri, 23 Feb 2007)
New Revision: 3071

Added:
   modules/common/scripts/jobs/jobsequence.rb
   modules/regressiontest/scripts/JobSequenceTest.rb
Modified:
   modules/common/scripts/jobs/animationjobs.rb
   modules/common/scripts/jobs/soundjobs.rb
   modules/regressiontest/dsa/gameobjectdefinitions.gof
   modules/regressiontest/scripts/maps/regressiontest.rb
Log:
Added job sequence and test for it.

Modified: modules/common/scripts/jobs/animationjobs.rb
===================================================================
--- modules/common/scripts/jobs/animationjobs.rb	2007-02-23 21:07:07 UTC (rev 3070)
+++ modules/common/scripts/jobs/animationjobs.rb	2007-02-23 21:11:02 UTC (rev 3071)
@@ -5,3 +5,7 @@
     $JS.addJob(job)
 end
 
+def _PlayAnimation(actor, anim, doloop=false, replace=true)
+    PlayAnimationJob.new(actor, anim, doloop, replace)
+end
+

Added: modules/common/scripts/jobs/jobsequence.rb
===================================================================
--- modules/common/scripts/jobs/jobsequence.rb	2007-02-23 21:07:07 UTC (rev 3070)
+++ modules/common/scripts/jobs/jobsequence.rb	2007-02-23 21:11:02 UTC (rev 3071)
@@ -0,0 +1,21 @@
+require 'globals.rb'
+
+# Schedule a sequence of jobs.
+# jobs is an array of Jobs and Numerics. Numerics are accumulated pauses
+# till the next job starts.
+def jobSequence (jobs)
+    start = 0
+    p "start"
+    jobs.each { |x|
+        if x.is_a? Numeric:
+            # This is a time, we add it to the start time, of jobs
+            # later in the queue
+            start += x
+            p "starttime #start"
+        else
+            $JS.addJob(x, 20, start)
+            p "job added"
+        end
+    }
+end
+

Modified: modules/common/scripts/jobs/soundjobs.rb
===================================================================
--- modules/common/scripts/jobs/soundjobs.rb	2007-02-23 21:07:07 UTC (rev 3070)
+++ modules/common/scripts/jobs/soundjobs.rb	2007-02-23 21:11:02 UTC (rev 3071)
@@ -12,3 +12,12 @@
     $JS.addJob(job)
 end
 
+def _PlaySound2d(sound, volume=1.0)
+    PlaySound2dJob.new(sound, volume)
+end
+
+# Play a 3d sound at position pos
+def _PlaySound3d(sound, pos, volume=1.0)
+    PlaySound3dJob.new(sound, pos, volume)
+end
+

Modified: modules/regressiontest/dsa/gameobjectdefinitions.gof
===================================================================
--- modules/regressiontest/dsa/gameobjectdefinitions.gof	2007-02-23 21:07:07 UTC (rev 3070)
+++ modules/regressiontest/dsa/gameobjectdefinitions.gof	2007-02-23 21:11:02 UTC (rev 3071)
@@ -61,4 +61,13 @@
         <property name="meshfile" type="STRING" data="arc_hebel_01.mesh"/>
     </gameobjectclass>
 
+    <!-- JobSequenceTest -->
+    <gameobjectclass>
+        <property name="classid" type="STRING" data="JobSequenceTestChest"/>
+        <property name="baseclass" type="STRING" data="GameObject" />
+        <property name="description" type="STRING" data="Eine Truhe zum Test der JobSequence"/>
+        <property name="meshfile" type="STRING" data="ver_truhe_gross01.mesh"/>
+        <property name="geometrytype" type="INT" data="0"/> <!-- GT_BOX -->
+    </gameobjectclass>
+
 </GameObjectDefinitions>

Added: modules/regressiontest/scripts/JobSequenceTest.rb
===================================================================
--- modules/regressiontest/scripts/JobSequenceTest.rb	2007-02-23 21:07:07 UTC (rev 3070)
+++ modules/regressiontest/scripts/JobSequenceTest.rb	2007-02-23 21:11:02 UTC (rev 3071)
@@ -0,0 +1,50 @@
+require 'jobs/jobsequence.rb'
+require 'jobs/soundjobs.rb'
+require 'jobs/animationjobs.rb'
+
+class JobSequenceTestAction < Action
+  def initialize
+    super("checktime", "Zeit ansagen lassen.");
+  end
+  
+  def canDo(go, user)
+    true
+  end
+  
+  def doAction(go, user, target)
+    jobSequence(
+            [
+                _PlayAnimation(go.getActor(), "auf"),
+                _PlaySound3d("doorcreak.ogg", go.getPosition()),
+                2,
+                _PlaySound3d("lachen.ogg", go.getPosition()),
+                2,
+                _PlayAnimation(go.getActor(), "zu"),
+                _PlaySound3d("doorcreak.ogg", go.getPosition())
+            ]
+    );
+  end
+end
+
+class JobSequenceTest < TestCase
+    def initialize(center)
+        super(center)
+
+        # Define a base box to place everything else on.
+        height = 0.3
+        min_base = [-2.0, 0.05, -2.0]
+        max_base = [2.0, height, 2.0]
+        base = $AM.createBoxPrimitiveActor("JobSequenceTestBase",
+                                           min_base, max_base, "alpha_green")
+        base.placeIntoScene(center);
+
+        chest = $GOM.createGameObjectProxy(
+            "JobSequenceTestChest").getGameObject();
+        chest.addAction(JobSequenceTestAction.new());
+        chest.placeIntoScene();
+        chest.setPosition(rel_pos([0.0, height, 0.0]));
+
+        $SCRIPT.log("JobSequenceTest initialisiert");
+    end
+end
+

Modified: modules/regressiontest/scripts/maps/regressiontest.rb
===================================================================
--- modules/regressiontest/scripts/maps/regressiontest.rb	2007-02-23 21:07:07 UTC (rev 3070)
+++ modules/regressiontest/scripts/maps/regressiontest.rb	2007-02-23 21:11:02 UTC (rev 3071)
@@ -9,6 +9,7 @@
 require 'TimeTest.rb'
 require 'InventoryTest.rb'
 require 'ErrorHandlingTest.rb'
+require 'JobSequenceTest.rb'
 
 # Physik aktivieren
 $PM.setEnabled(true)
@@ -38,5 +39,5 @@
 TimeTest.new([-5, 0, -5])
 ErrorHandlingTest.new([-10, 0, 5])
 InventoryTest.new([0, 0, 10])
-
+JobSequenceTest.new([5, 0, -5])
 $SCRIPT.log("tests initialisiert.");



From natoka at mail.berlios.de  Sat Feb 24 16:55:32 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Sat, 24 Feb 2007 16:55:32 +0100
Subject: [Dsa-hl-svn] r3072 - in rl/trunk/engine/core: include src
Message-ID: <200702241555.l1OFtWTC028152@sheep.berlios.de>

Author: natoka
Date: 2007-02-24 16:55:13 +0100 (Sat, 24 Feb 2007)
New Revision: 3072

Modified:
   rl/trunk/engine/core/include/MeshObject.h
   rl/trunk/engine/core/include/PhysicalThing.h
   rl/trunk/engine/core/src/MeshObject.cpp
   rl/trunk/engine/core/src/PhysicalThing.cpp
Log:
Bugfix of the CONVEXHULL collision primitiv bug

PhysicalThing now properly offsets the CONVEXHULL primitiv and calculates it from the specified animation pose instead of calculating from the default mesh.

MeshObject contains most of the changes to avoid code duplication. functions were renamed to better reflect their nature. An additional function was added for creating a MeshObject copy which is locked into an animation pose.

Modified: rl/trunk/engine/core/include/MeshObject.h
===================================================================
--- rl/trunk/engine/core/include/MeshObject.h	2007-02-23 21:11:02 UTC (rev 3071)
+++ rl/trunk/engine/core/include/MeshObject.h	2007-02-24 15:55:13 UTC (rev 3072)
@@ -81,6 +81,10 @@
         void setCastShadows (bool enabled);
         bool getCastShadows (void) const;
 
+		/** creates a mesh animated to the specified pose.
+		 * @param animName name of the animation to be posed at.
+		 */
+		MeshObject *createPosedCopy(const Ogre::String& animName);
 
 		const Ogre::String &getMeshName();
 
@@ -99,8 +103,15 @@
         typedef std::map<Ogre::String, Ogre::AxisAlignedBox> PoseMap;
 		PoseMap mPoseSizes;
 
+		/** calculates the default size stored in mSize.
+		 * This is the size of the mesh in it's default position.
+		 */
+		Ogre::AxisAlignedBox calculateDefaultSize(void);
+		/** calculates the size from vertices of the mesh.
+		 * This takes animation into account and therefore calculates
+		 * a size Box for the currently active animation.
+		 */
 		Ogre::AxisAlignedBox calculateSize();
-        Ogre::AxisAlignedBox calculateSizeFromPose(const Ogre::String& animationName);
 		Ogre::AxisAlignedBox getAabbFromVertexData(Ogre::VertexData*);
     };
 }

Modified: rl/trunk/engine/core/include/PhysicalThing.h
===================================================================
--- rl/trunk/engine/core/include/PhysicalThing.h	2007-02-23 21:11:02 UTC (rev 3071)
+++ rl/trunk/engine/core/include/PhysicalThing.h	2007-02-24 15:55:13 UTC (rev 3072)
@@ -124,7 +124,8 @@
 		void setBody(OgreNewt::Body* body);
 		OgreNewt::CollisionPtr createCollision(
 			const AxisAlignedBox& aabb, Vector3* offset = NULL, 
-			Quaternion* orientation = NULL, Vector3* inertiaCoefficients = NULL) const;
+			Quaternion* orientation = NULL, Vector3* inertiaCoefficients = NULL, 
+			const String animName = "") const;
 	};
 }
 

Modified: rl/trunk/engine/core/src/MeshObject.cpp
===================================================================
--- rl/trunk/engine/core/src/MeshObject.cpp	2007-02-23 21:11:02 UTC (rev 3071)
+++ rl/trunk/engine/core/src/MeshObject.cpp	2007-02-24 15:55:13 UTC (rev 3072)
@@ -48,7 +48,7 @@
                 }
             }
             mMovableObject = entity;
-            mSize = calculateSize();
+            mSize = calculateDefaultSize();
         }
     }
 
@@ -75,12 +75,14 @@
 		if (it == mPoseSizes.end())
 		{
 			// Not yet calculated. Do so now and save.
-            // Duplicating the MeshObject, the restrictions of the 
-            // calculateSizeFromPose-method don't matter any more!
-            MeshObject tempMesh("tempMesh_getPoseSize", getEntity()->getMesh()->getName());
-            AxisAlignedBox rval = tempMesh.calculateSizeFromPose(animationName);
+            // Duplicating the MeshObject, the restrictions of
+            // calculateSize (animation not possible) don't matter any more
+            MeshObject* tempMesh = createPosedCopy(animationName);
+            AxisAlignedBox rval = tempMesh->calculateSize();
 			mPoseSizes.insert(make_pair(animationName, rval));
-            // Does the tempMesh need to be removed explicitly?
+
+			delete tempMesh;
+
 			return rval;
 		}
 		else
@@ -202,7 +204,7 @@
         }
     }
 
-    AxisAlignedBox MeshObject::calculateSize()
+    AxisAlignedBox MeshObject::calculateDefaultSize()
     {
         const AxisAlignedBox& aabb = getEntity()->getBoundingBox();
         Vector3 x = aabb.getMaximum();
@@ -212,27 +214,30 @@
         return rval;
     }
 
-    AxisAlignedBox MeshObject::calculateSizeFromPose(const String& animationName)
+	MeshObject *MeshObject::createPosedCopy(const String& animName)
 	{
 		Entity* entity = getEntity();
+		MeshObject *newMesh = NULL;
 		AnimationStateSet* ass = entity->getAllAnimationStates();
 
 		// Test if wanted anim is available for the entity
-		if (!ass->hasAnimationState(animationName))
+		if (!ass->hasAnimationState(animName))
 		{
-			Throw(IllegalArgumentException, String("No animation " + animationName +
+			Throw(IllegalArgumentException, String("No animation " + animName +
 				" for entity " + entity->getName()));
 		}
 
-		// Save current animation state set. We don't want to interfere with the visible anim.
-		AnimationStateSet* saveAss = new AnimationStateSet(*ass);
+		// Duplicating the MeshObject, so that the restrictions of animations don't apply
+        newMesh = new MeshObject("tempMesh_getPoseSize", getEntity()->getMesh()->getName());
+		entity = newMesh->getEntity();
+		ass = entity->getAllAnimationStates();
 
 		// Deactivate all anims, save the wanted one.
 		AnimationStateIterator it = ass->getAnimationStateIterator();
 		while (it.hasMoreElements())
 		{
 			AnimationState* as = it.peekNextValue();
-            if (as->getAnimationName() == animationName)
+            if (as->getAnimationName() == animName)
             {
 			    as->setEnabled(true);
                 as->setTimePosition(0.0f);
@@ -252,7 +257,14 @@
 		entity->addSoftwareAnimationRequest(false);
 		entity->_updateAnimation();
 
-        AxisAlignedBox aabb;
+		return newMesh;
+	}
+
+	AxisAlignedBox MeshObject::calculateSize()
+	{
+		Entity* entity = getEntity();
+		AxisAlignedBox aabb;
+
         if (entity->getMesh()->sharedVertexData)
         {
 		    aabb.merge(getAabbFromVertexData(entity->_getSkelAnimVertexData()));
@@ -266,11 +278,6 @@
             }
 		}
 
-		entity->removeSoftwareAnimationRequest(false);
-        // Restore animation states
-        saveAss->copyMatchingState(ass);
-		entity->_updateAnimation();
-        delete saveAss;
 		return aabb;
 	}
 

Modified: rl/trunk/engine/core/src/PhysicalThing.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicalThing.cpp	2007-02-23 21:11:02 UTC (rev 3071)
+++ rl/trunk/engine/core/src/PhysicalThing.cpp	2007-02-24 15:55:13 UTC (rev 3072)
@@ -335,15 +335,19 @@
             if (it == mPoseCollisions.end())
             {
                 // No, so create it and put it into the map
-                coll = createCollision(size, &offset, &orientationBias);
+                coll = createCollision(size, &offset, &orientationBias, NULL, name);
                 mPoseCollisions.insert(make_pair(name, coll));
             }
             else
             {
                 // Yes
                 coll = it->second;
-                offset = size.getCenter();
-                orientationBias = Quaternion::IDENTITY;
+				// natoka: i know this is ugly ... but CONVEXHULL has got a zero offset (see createCollision)
+				if (mGeometryType == PhysicsManager::GT_CONVEXHULL)
+					offset = Vector3::ZERO;
+				else
+					offset = size.getCenter();
+				orientationBias = Quaternion::IDENTITY;
             }
             setOffset(offset);
             mBody->setCollision(coll);
@@ -361,7 +365,7 @@
 
 	OgreNewt::CollisionPtr PhysicalThing::createCollision(
 		const AxisAlignedBox& aabb, Vector3* offset, 
-		Quaternion* orientation, Vector3* inertiaCoefficients) const
+		Quaternion* orientation, Vector3* inertiaCoefficients, const String animName) const
     {
 		const Vector3 size = aabb.getMaximum() - aabb.getMinimum();
 
@@ -448,7 +452,8 @@
             if (mPhysicalObject->isMeshObject())
             {
 				Entity* entity = dynamic_cast<MeshObject*>(mPhysicalObject)->getEntity();
-
+				MeshObject *tempMesh = NULL;
+				
 				if( size.x < PhysicsManager::NEWTON_GRID_WIDTH ||
 					size.y < PhysicsManager::NEWTON_GRID_WIDTH ||
 					size.z < PhysicsManager::NEWTON_GRID_WIDTH )
@@ -467,10 +472,28 @@
 				}
 				else
 				{
-					
+					// the problem fixed and it's source:
+					// entity is a MeshObject containing the basic state of the Mesh, but
+					// this function should create the physical bounding convex hull for one of the
+					// animated states. Therefore the convex hull must be created from a mesh
+					// representing the animated state and not from a mesh containing the basic state
+
+					// check if this is a 'animated' state we have to create the convex hull for ...
+
+					if (animName != "") {
+						// Duplicating the MeshObject and animate it into the animName pose
+						tempMesh = dynamic_cast<MeshObject*>(mPhysicalObject)->createPosedCopy(animName);
+
+						entity = tempMesh->getEntity();
+					}
+
+					// calculate the convex hull of the animated mesh
 					rval = CollisionPtr(new OgreNewt::CollisionPrimitives::ConvexHull(physWorld,
 						entity, true));
 
+					// cleanup the temporary mesh
+					delete tempMesh;
+										
 					if (offset != NULL)
 					{
 						*offset = Vector3::ZERO;



From natoka at mail.berlios.de  Sun Feb 25 20:51:02 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Sun, 25 Feb 2007 20:51:02 +0100
Subject: [Dsa-hl-svn] r3073 - in rl/trunk/engine: common/include
	core/include core/src rules/src
Message-ID: <200702251951.l1PJp2vk005144@sheep.berlios.de>

Author: natoka
Date: 2007-02-25 20:50:32 +0100 (Sun, 25 Feb 2007)
New Revision: 3073

Modified:
   rl/trunk/engine/common/include/FixRubyHeaders.h
   rl/trunk/engine/core/include/PhysicsManager.h
   rl/trunk/engine/core/src/PhysicsManager.cpp
   rl/trunk/engine/rules/src/GameObject.cpp
Log:
changing property geometrytype from int to string in order to make .gof files easier to understand and write.
adding a function for converting strings to GeometryType in Physicsmanager

Modified: rl/trunk/engine/common/include/FixRubyHeaders.h
===================================================================
--- rl/trunk/engine/common/include/FixRubyHeaders.h	2007-02-24 15:55:13 UTC (rev 3072)
+++ rl/trunk/engine/common/include/FixRubyHeaders.h	2007-02-25 19:50:32 UTC (rev 3073)
@@ -30,9 +30,10 @@
 #undef sleep
 #undef strcasecmp
 #undef rename
-#ifdef HAVE_CONFIG_H
-    #undef PACKAGE_VERSION
-    #undef PACKAGE_STRING
-    #undef PACKAGE_NAME
-    #undef PACKAGE_TARNAME
-#endif
+#undef write
+#ifdef HAVE_CONFIG_H
+    #undef PACKAGE_VERSION
+    #undef PACKAGE_STRING
+    #undef PACKAGE_NAME
+    #undef PACKAGE_TARNAME
+#endif

Modified: rl/trunk/engine/core/include/PhysicsManager.h
===================================================================
--- rl/trunk/engine/core/include/PhysicsManager.h	2007-02-24 15:55:13 UTC (rev 3072)
+++ rl/trunk/engine/core/include/PhysicsManager.h	2007-02-25 19:50:32 UTC (rev 3073)
@@ -170,6 +170,8 @@
         {
             return mMaxTimestep;
         }
+		static GeometryType convertStringToGeometryType(const Ogre::String& geomTypeString);
+
     private:
         typedef std::map<PhysicalThing*, PhysicsController*> ControllerMap;
 

Modified: rl/trunk/engine/core/src/PhysicsManager.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicsManager.cpp	2007-02-24 15:55:13 UTC (rev 3072)
+++ rl/trunk/engine/core/src/PhysicsManager.cpp	2007-02-25 19:50:32 UTC (rev 3073)
@@ -365,4 +365,21 @@
 
         return NAME;
     }
+
+	PhysicsManager::GeometryType PhysicsManager::convertStringToGeometryType(const Ogre::String& geomTypeString)
+	{
+		if (geomTypeString == "box")
+			return GT_BOX;
+		if (geomTypeString == "sphere")
+			return GT_SPHERE;
+		if (geomTypeString == "capsule")
+			return GT_CAPSULE;
+		if (geomTypeString == "mesh")
+			return GT_MESH;
+		if (geomTypeString == "ellipsoid")
+			return GT_ELLIPSOID;
+		if (geomTypeString == "convexhull")
+			return GT_CONVEXHULL;
+		return GT_NONE;
+	}
 }

Modified: rl/trunk/engine/rules/src/GameObject.cpp
===================================================================
--- rl/trunk/engine/rules/src/GameObject.cpp	2007-02-24 15:55:13 UTC (rev 3072)
+++ rl/trunk/engine/rules/src/GameObject.cpp	2007-02-25 19:50:32 UTC (rev 3073)
@@ -420,7 +420,7 @@
             }
             else if (key == PROPERTY_GEOMETRY_TYPE)
             {
-                setGeometryType(static_cast<PhysicsManager::GeometryType>(value.toInt()));
+				setGeometryType(PhysicsManager::convertStringToGeometryType(value.toString().c_str()));			
             }
             else if (key == PROPERTY_MASS)
             {



From natoka at mail.berlios.de  Sun Feb 25 20:53:55 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Sun, 25 Feb 2007 20:53:55 +0100
Subject: [Dsa-hl-svn] r3074 - in modules: common/dsa regressiontest/dsa
	techdemo2/dsa
Message-ID: <200702251953.l1PJrtal005517@sheep.berlios.de>

Author: natoka
Date: 2007-02-25 20:53:42 +0100 (Sun, 25 Feb 2007)
New Revision: 3074

Modified:
   modules/common/dsa/gameobjectdefinitions.gof
   modules/regressiontest/dsa/gameobjectdefinitions.gof
   modules/techdemo2/dsa/td2objects.gof
Log:
changing geometrytype from int to string

Modified: modules/common/dsa/gameobjectdefinitions.gof
===================================================================
--- modules/common/dsa/gameobjectdefinitions.gof	2007-02-25 19:50:32 UTC (rev 3073)
+++ modules/common/dsa/gameobjectdefinitions.gof	2007-02-25 19:53:42 UTC (rev 3074)
@@ -5,7 +5,7 @@
 		<property name="classid" type="STRING" data="door"/>
 		<property name="baseclass" type="STRING" data="Door"/>
 		<property name="description" type="STRING" data="Eine T?r"/>
-		<property name="geometrytype" type="INT" data="5"/>
+		<property name="geometrytype" type="STRING" data="convexhull"/>
 		<property name="meshfile" type="STRING" data="arc_tuer_01.mesh"/>
 		<property name="sound" type="STRING" data="doorcreak.ogg"/>
 		<property name="open" type="BOOL" data="false"/>
@@ -15,7 +15,7 @@
 	<gameobjectclass classid="hero" baseclass="Hero">
 		<property name="classid" type="STRING" data="hero" />
 		<property name="baseclass" type="STRING" data="Hero" />
-		<property name="geometrytype" type="INT" data="4" />
+		<property name="geometrytype" type="STRING" data="ellipsoid" />
 		<property name="mass" type="REAL" data="75"/>
 	</gameobjectclass>
 

Modified: modules/regressiontest/dsa/gameobjectdefinitions.gof
===================================================================
--- modules/regressiontest/dsa/gameobjectdefinitions.gof	2007-02-25 19:50:32 UTC (rev 3073)
+++ modules/regressiontest/dsa/gameobjectdefinitions.gof	2007-02-25 19:53:42 UTC (rev 3074)
@@ -13,7 +13,7 @@
         <property name="baseclass" type="STRING" data="GameObject" />
         <property name="description" type="STRING" data="Ein Apfel?"/>
         <property name="meshfile" type="STRING" data="sphere.1m.mesh"/>
-        <property name="geometrytype" type="INT" data="4"/>
+        <property name="geometrytype" type="STRING" data="ellipsoid"/>
         <property name="mass" type="REAL" data="65"/>
     </gameobjectclass>
 
@@ -22,7 +22,7 @@
         <property name="baseclass" type="STRING" data="NPC"/>
         <property name="name" type="STRING" data="TestPerson"/>
         <property name="description" type="STRING" data="Wenn man mal jemanden zum Reden braucht..."/>
-        <property name="geometrytype" type="INT" data="4"/>
+        <property name="geometrytype" type="STRING" data="ellipsoid"/>
         <property name="meshfile" type="STRING" data="men_alrike.mesh"/>
         <property name="mass" type="REAL" data="65"/>
         <property name="dialogfile" type="STRING" data="testperson.xml"/>
@@ -37,7 +37,7 @@
         <property name="baseclass" type="STRING" data="Switch3Way"/>
         <property name="description" type="STRING" data="Ein Hebel"/>
         <property name="meshfile" type="STRING" data="arc_hebel_01.mesh"/>
-        <property name="geometrytype" type="INT" data="1"/>
+        <property name="geometrytype" type="STRING" data="sphere"/>
     </gameobjectclass>
 
     <gameobjectclass>
@@ -67,7 +67,7 @@
         <property name="baseclass" type="STRING" data="GameObject" />
         <property name="description" type="STRING" data="Eine Truhe zum Test der JobSequence"/>
         <property name="meshfile" type="STRING" data="ver_truhe_gross01.mesh"/>
-        <property name="geometrytype" type="INT" data="0"/> <!-- GT_BOX -->
+        <property name="geometrytype" type="STRING" data="box"/>
     </gameobjectclass>
 
 </GameObjectDefinitions>

Modified: modules/techdemo2/dsa/td2objects.gof
===================================================================
--- modules/techdemo2/dsa/td2objects.gof	2007-02-25 19:50:32 UTC (rev 3073)
+++ modules/techdemo2/dsa/td2objects.gof	2007-02-25 19:53:42 UTC (rev 3074)
@@ -11,7 +11,7 @@
     <property name="description" type="STRING" data="Wolfram"/>
     <property name="meshfile" type="STRING" data="men_grim.mesh"/>
     <property name="mass" type="REAL" data="75"/>
-    <property name="geometrytype" type="INT" data="4"/>
+    <property name="geometrytype" type="STRING" data="ellipsoid"/>
     <property name="position" type="VECTOR3" data="-20.99, -6.5, 1.55"/>
     <property name="orientation" type="QUATERNION" data="0.0, 180.0, 0.0"/>
     <property name="dialogfile" type="STRING" data="wolfram.xml"/>
@@ -28,7 +28,7 @@
     <property name="description" type="STRING" data="Sonja"/>
     <property name="meshfile" type="STRING" data="men_sonja.mesh"/>
     <property name="mass" type="REAL" data="75"/>
-    <property name="geometrytype" type="INT" data="4"/>
+    <property name="geometrytype" type="STRING" data="ellipsoid"/>
     <property name="position" type="VECTOR3" data="-32.40, -6.46, 4.03"/>
     <property name="orientation" type="QUATERNION" data="0.0, 120.94, 0.0"/>
     <property name="dialogfile" type="STRING" data="sonja.xml"/>
@@ -45,7 +45,7 @@
     <property name="description" type="STRING" data="Sonja"/>
     <property name="meshfile" type="STRING" data="men_sonja.mesh"/>
     <property name="mass" type="REAL" data="0"/>
-    <property name="geometrytype" type="INT" data="1"/>
+    <property name="geometrytype" type="STRING" data="sphere"/>
     <property name="position" type="VECTOR3" data="2.70, -37.79, -23.48"/>
     <property name="orientation" type="QUATERNION" data="0.0, 120.94, 0.0"/>
     <property name="dialogfile" type="STRING" data="sonja2.xml"/>
@@ -62,7 +62,7 @@
     <property name="description" type="STRING" data="Jarn"/>
     <property name="meshfile" type="STRING" data="men_gennisch2.mesh"/>
     <property name="mass" type="REAL" data="75"/>
-    <property name="geometrytype" type="INT" data="4"/>
+    <property name="geometrytype" type="STRING" data="ellipsoid"/>
     <property name="position" type="VECTOR3" data="-36.16, -6.25, 18.12"/>
     <property name="orientation" type="QUATERNION" data="0.0, -23.40, 0.0"/>
     <property name="dialogfile" type="STRING" data="jarn.xml"/>
@@ -79,7 +79,7 @@
     <property name="description" type="STRING" data="Tsafried"/>
     <property name="meshfile" type="STRING" data="men_gennisch2.mesh"/>
     <property name="mass" type="REAL" data="75"/>
-    <property name="geometrytype" type="INT" data="1"/>
+    <property name="geometrytype" type="STRING" data="sphere"/>
     <property name="position" type="VECTOR3" data="11.46, -8.88, 39.43"/>
     <property name="orientation" type="QUATERNION" data="0.0, 50.0, 0.0"/>
     <property name="dialogfile" type="STRING" data="wolfram.xml"/>
@@ -96,7 +96,7 @@
     <property name="description" type="STRING" data="Forrest"/>
     <property name="meshfile" type="STRING" data="men_Gennisch.mesh"/>
     <property name="mass" type="REAL" data="75"/>
-    <property name="geometrytype" type="INT" data="1"/>
+    <property name="geometrytype" type="STRING" data="sphere"/>
     <property name="position" type="VECTOR3" data="-20.83, -6.70, 19.46"/>
     <property name="dialogfile" type="STRING" data="forrest.xml"/>
     <property name="behaviours" type="ARRAY">
@@ -113,7 +113,7 @@
     <property name="description" type="STRING" data="Alter Mann"/>
     <property name="meshfile" type="STRING" data="men_druide.mesh"/>
     <property name="mass" type="REAL" data="0"/>
-    <property name="geometrytype" type="INT" data="1"/>
+    <property name="geometrytype" type="STRING" data="sphere"/>
     <property name="position" type="VECTOR3" data="21.78, -35.28, -264.45"/>
     <property name="orientation" type="QUATERNION" data="0.0, 90.0, 0.0"/>
     <property name="dialogfile" type="STRING" data="druide51.xml"/>
@@ -126,7 +126,7 @@
     <property name="description" type="STRING" data="Alter Mann"/>
     <property name="meshfile" type="STRING" data="men_druide.mesh"/>
     <property name="mass" type="REAL" data="0"/>
-    <property name="geometrytype" type="INT" data="1"/>
+    <property name="geometrytype" type="STRING" data="sphere"/>
     <property name="position" type="VECTOR3" data="24.53, -47.45, -260.33"/>
     <property name="orientation" type="QUATERNION" data="90.0, 0.0, 0.0"/>
     <property name="dialogfile" type="STRING" data="druide52.xml"/>
@@ -140,7 +140,7 @@
     <property name="description_dead" type="STRING" data="Ein sehr toter Wolf"/>
     <property name="meshfile" type="STRING" data="tie_wolf_01.mesh"/>
     <property name="mass" type="REAL" data="0"/>
-    <property name="geometrytype" type="INT" data="1"/>
+    <property name="geometrytype" type="STRING" data="sphere"/>
     <property name="behaviours" type="ARRAY">
     	<property type="STRING" data="default_idle_behaviour"/>
     	<property type="STRING" data="avoid_obstacles_behaviour"/>
@@ -154,7 +154,7 @@
     <property name="description" type="STRING" data="Wolframs T?r"/>
     <property name="meshfile" type="STRING" data="arc_door_02.mesh"/>
     <property name="mass" type="REAL" data="0"/>
-    <property name="geometrytype" type="INT" data="1"/>
+    <property name="geometrytype" type="STRING" data="sphere"/>
     <property name="position" type="VECTOR3" data="-20.8134, -6.61745, 1.91752"/>
     <property name="orientation" type="QUATERNION" data="0, 13, 0"/>
   </gameobjectclass>
@@ -166,7 +166,7 @@
     <property name="description" type="STRING" data="Ein Bauer. Er ist im Gespr?ch vertieft und l?sst sich nicht st?ren."/>
     <property name="meshfile" type="STRING" data="men_Gennisch.mesh"/>
     <property name="mass" type="REAL" data="0"/>
-    <property name="geometrytype" type="INT" data="4"/>
+    <property name="geometrytype" type="STRING" data="ellipsoid"/>
     <property name="position" type="VECTOR3" data="-27.10, -6.5, -0.32"/>
   </gameobjectclass>
   



From natoka at mail.berlios.de  Sun Feb 25 23:26:49 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Sun, 25 Feb 2007 23:26:49 +0100
Subject: [Dsa-hl-svn] r3075 - rl/trunk/engine/script/swig
Message-ID: <200702252226.l1PMQnqB019115@sheep.berlios.de>

Author: natoka
Date: 2007-02-25 23:26:38 +0100 (Sun, 25 Feb 2007)
New Revision: 3075

Modified:
   rl/trunk/engine/script/swig/TypeOgreQuaternion.inc
Log:
Bugfix for wrong conversion of arrays to Ogre::Quaternion


Modified: rl/trunk/engine/script/swig/TypeOgreQuaternion.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreQuaternion.inc	2007-02-25 19:53:42 UTC (rev 3074)
+++ rl/trunk/engine/script/swig/TypeOgreQuaternion.inc	2007-02-25 22:26:38 UTC (rev 3075)
@@ -84,13 +84,13 @@
    {
 	   Quaternion rotX, rotY, rotZ;
         rotX.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry(argv[1], 0))), 
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 0))), 
 			Ogre::Vector3::UNIT_X);
         rotY.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry(argv[1], 1))), 
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 1))), 
 			Ogre::Vector3::UNIT_Y);
         rotZ.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry(argv[1], 2))), 
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 2))), 
 			Ogre::Vector3::UNIT_Z);
 	   
 	   quat = rotX * rotY * rotZ;
@@ -126,13 +126,13 @@
    {
 	   Quaternion rotX, rotY, rotZ;
         rotX.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry(argv[1], 0))), 
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 0))), 
 			Ogre::Vector3::UNIT_X);
         rotY.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry(argv[1], 1))), 
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 1))), 
 			Ogre::Vector3::UNIT_Y);
         rotZ.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry(argv[1], 2))), 
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 2))), 
 			Ogre::Vector3::UNIT_Z);
 	   
 	   *quat = rotX * rotY * rotZ;



From natoka at mail.berlios.de  Mon Feb 26 00:14:29 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Mon, 26 Feb 2007 00:14:29 +0100
Subject: [Dsa-hl-svn] r3076 - rl/trunk/engine/core/src
Message-ID: <200702252314.l1PNETYr022712@sheep.berlios.de>

Author: natoka
Date: 2007-02-26 00:14:24 +0100 (Mon, 26 Feb 2007)
New Revision: 3076

Modified:
   rl/trunk/engine/core/src/PhysicalThing.cpp
Log:
corrected bogus comment


Modified: rl/trunk/engine/core/src/PhysicalThing.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicalThing.cpp	2007-02-25 22:26:38 UTC (rev 3075)
+++ rl/trunk/engine/core/src/PhysicalThing.cpp	2007-02-25 23:14:24 UTC (rev 3076)
@@ -342,7 +342,7 @@
             {
                 // Yes
                 coll = it->second;
-				// natoka: i know this is ugly ... but CONVEXHULL has got a zero offset (see createCollision)
+				// CONVEXHULL has got a zero offset (see createCollision)
 				if (mGeometryType == PhysicsManager::GT_CONVEXHULL)
 					offset = Vector3::ZERO;
 				else



From tanis at mail.berlios.de  Mon Feb 26 21:53:08 2007
From: tanis at mail.berlios.de (tanis at mail.berlios.de)
Date: Mon, 26 Feb 2007 21:53:08 +0100
Subject: [Dsa-hl-svn] r3077 - rl/trunk/engine/rules
Message-ID: <200702262053.l1QKr8Eq024245@sheep.berlios.de>

Author: tanis
Date: 2007-02-26 21:53:01 +0100 (Mon, 26 Feb 2007)
New Revision: 3077

Modified:
   rl/trunk/engine/rules/RlRules2005.vcproj
Log:
Header has been removed for ages, now gone from project file too...

Modified: rl/trunk/engine/rules/RlRules2005.vcproj
===================================================================
--- rl/trunk/engine/rules/RlRules2005.vcproj	2007-02-25 23:14:24 UTC (rev 3076)
+++ rl/trunk/engine/rules/RlRules2005.vcproj	2007-02-26 20:53:01 UTC (rev 3077)
@@ -475,10 +475,6 @@
 				>
 			</File>
 			<File
-				RelativePath=".\include\CombatManager.h"
-				>
-			</File>
-			<File
 				RelativePath=".\include\CompositeEffect.h"
 				>
 			</File>



From chrber at mail.berlios.de  Tue Feb 27 10:56:17 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Tue, 27 Feb 2007 10:56:17 +0100
Subject: [Dsa-hl-svn] r3078 - modules/common/gui/windows
Message-ID: <200702270956.l1R9uHkP028667@sheep.berlios.de>

Author: chrber
Date: 2007-02-27 10:56:15 +0100 (Tue, 27 Feb 2007)
New Revision: 3078

Modified:
   modules/common/gui/windows/aboutwindow.xml
   modules/common/gui/windows/playlistwindow.xml
Log:
Ported two layout files to CEGUI 0.5


Modified: modules/common/gui/windows/aboutwindow.xml
===================================================================
--- modules/common/gui/windows/aboutwindow.xml	2007-02-26 20:53:01 UTC (rev 3077)
+++ modules/common/gui/windows/aboutwindow.xml	2007-02-27 09:56:15 UTC (rev 3078)
@@ -1,60 +1,47 @@
 <GUILayout xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="GUILayout.xsd">
     <Window Type="RastullahLook/FrameWindow" Name="AboutWindow">
-        <Property Name="Position" Value="x:0.0 y:0.0"/>
-        <Property Name="AbsoluteWidth" Value="400"/>
-        <Property Name="AbsoluteHeight" Value="300"/>
+        <Property Name="UnifiedPosition" Value="{{0,0},{0,0}}"/>
+        <Property Name="UnifiedSize" Value="{{0,400},{0,300}}"/>
 		<Property Name="Text" Value="?ber Rastullahs Lockenpracht"/>
 
 		<Window Type="RastullahLook/StaticText" Name="AboutWindow/Text">
-			<Property Name="AbsoluteXPosition" Value="15"/>
-			<Property Name="AbsoluteWidth" Value="290"/>
-			<Property Name="AbsoluteYPosition" Value="26"/>
-			<Property Name="AbsoluteHeight" Value="200"/>
+		    <Property Name="UnifiedPosition" Value="{{0,15},{0,26}}"/>
+		    <Property Name="UnifiedSize" Value="{{0,290},{0,200}}"/>
 			<Property Name="FrameEnabled" Value="False"/>
 		</Window>
 
 		<Window Type="RastullahLook/StaticText" Name="AboutWindow/EngineLabel">
-			<Property Name="AbsoluteXPosition" Value="15"/>
-			<Property Name="AbsoluteWidth" Value="70"/>
-			<Property Name="AbsoluteYPosition" Value="215"/>
-			<Property Name="AbsoluteHeight" Value="20"/>
+		    <Property Name="UnifiedPosition" Value="{{0,15},{0,215}}"/>
+		    <Property Name="UnifiedSize" Value="{{0,70},{0,20}}"/>
 			<Property Name="Text" Value="Engine:"/>
 			<Property Name="FrameEnabled" Value="False"/>
 		</Window>
 
 		<Window Type="RastullahLook/StaticText" Name="AboutWindow/EngineText">
-			<Property Name="AbsoluteXPosition" Value="90"/>
-			<Property Name="AbsoluteWidth" Value="150"/>
-			<Property Name="AbsoluteYPosition" Value="215"/>
-			<Property Name="AbsoluteHeight" Value="20"/>
+		    <Property Name="UnifiedPosition" Value="{{0,90},{0,215}}"/>
+		    <Property Name="UnifiedSize" Value="{{0,150},{0,20}}"/>
 			<Property Name="FrameEnabled" Value="False"/>
 		</Window>
 
 		<Window Type="RastullahLook/StaticText" Name="AboutWindow/ModuleLabel">
-			<Property Name="AbsoluteXPosition" Value="15"/>
-			<Property Name="AbsoluteWidth" Value="70"/>
-			<Property Name="AbsoluteYPosition" Value="235"/>
-			<Property Name="AbsoluteHeight" Value="20"/>
+		    <Property Name="UnifiedPosition" Value="{{0,15},{0,235}}"/>
+		    <Property Name="UnifiedSize" Value="{{0,70},{0,20}}"/>
 			<Property Name="Text" Value="Modul:"/>
 			<Property Name="FrameEnabled" Value="False"/>
 		</Window>
 
 		<Window Type="RastullahLook/StaticText" Name="AboutWindow/ModuleText">
-			<Property Name="AbsoluteXPosition" Value="90"/>
-			<Property Name="AbsoluteWidth" Value="150"/>
-			<Property Name="AbsoluteYPosition" Value="235"/>
-			<Property Name="AbsoluteHeight" Value="20"/>
+		    <Property Name="UnifiedPosition" Value="{{0,90},{0,235}}"/>
+		    <Property Name="UnifiedSize" Value="{{0,150},{0,20}}"/>
 			<Property Name="FrameEnabled" Value="False"/>
 		</Window>
 
 		<Window Type="RastullahLook/Button" Name="AboutWindow/CloseButton">
-			<Property Name="AbsoluteXPosition" Value="140"/>
-			<Property Name="AbsoluteYPosition" Value="265"/>
-			<Property Name="AbsoluteWidth" Value="120"/>
-			<Property Name="AbsoluteHeight" Value="28"/>
+		    <Property Name="UnifiedPosition" Value="{{0,140},{0,265}}"/>
+		    <Property Name="UnifiedSize" Value="{{0,120},{0,28}}"/>
 			<Property Name="Font" Value="Vera Serif-10"/>
 			<Property Name="Text" Value="Schlie?en"/>
 			<Property Name="Tooltip" Value="Das Fenster schlie?en"/>
 		</Window>
     </Window>
-</GUILayout>
\ No newline at end of file
+</GUILayout>

Modified: modules/common/gui/windows/playlistwindow.xml
===================================================================
--- modules/common/gui/windows/playlistwindow.xml	2007-02-26 20:53:01 UTC (rev 3077)
+++ modules/common/gui/windows/playlistwindow.xml	2007-02-27 09:56:15 UTC (rev 3078)
@@ -1,46 +1,37 @@
 <GUILayout xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="GUILayout.xsd">
   	<Window Type="RastullahLook/FrameWindow" Name="PlaylistSheet">
-		<Property Name="MetricsMode" Value="Absolute"/>
-		<Property Name="Position" Value="x:0.0 y:0.0"/>
-		<Property Name="Width" Value="600"/>
-		<Property Name="Height" Value="450"/>
+  	    <Property Name="UnifiedPosition" Value="{{0,0},{0,0}}"/>
+  	    <Property Name="UnifiedSize" Value="{{0,600},{0,450}}"/>
 		<Property Name="SizingEnabled" Value="true"/>
 
 		<Window Type="DefaultGUISheet" Name="PlaylistSheet/ButtonSheet">
-			<Property Name="RelativePosition" Value="x:0.0 y:0.0"/>
-			<Property Name="RelativeWidth" Value="1.0"/>
-			<Property Name="RelativeHeight" Value="0.5"/>
+			<Property Name="UnifiedPosition" Value="{{0,0},{0,0}}"/>
+	        <Property Name="UnifiedSize" Value="{{1,0},{0.5,0}}"/>
 			<Property Name="Text" Value="Buttons"/>
-			
+
 			<Window Type="RastullahLook/Button" Name="PlaylistSheet/ButtonSheet/Play">
+			    <Property Name="UnifiedPosition" Value="{{0.01,0},{0,17}}"/>
+	            <Property Name="UnifiedSize" Value="{{0.1,0},{0,25}}"/>
 				<Property Name="Text" Value="Play"/>
-            	<Property Name="RelativeXPosition" Value="0.01"/>
-            	<Property Name="AbsoluteYPosition" Value="17"/>
-            	<Property Name="RelativeWidth" Value="0.1"/>
-            	<Property Name="AbsoluteHeight" Value="25"/>
             	<Property Name="Font" Value="Vera Serif-14"/>
 			</Window>
 
 			<Window Type="RastullahLook/Button" Name="PlaylistSheet/ButtonSheet/Quit">
-				<Property Name="Text" Value="Play"/>
-            	<Property Name="RelativeXPosition" Value="0.9"/>
-            	<Property Name="AbsoluteYPosition" Value="17"/>
-            	<Property Name="RelativeWidth" Value="0.1"/>
-            	<Property Name="AbsoluteHeight" Value="25"/>
+			    <Property Name="UnifiedPosition" Value="{{0.09,0},{0,17}}"/>
+	            <Property Name="UnifiedSize" Value="{{0.1,0},{0,25}}"/>
+				<Property Name="Text" Value="Quit"/>
             	<Property Name="Font" Value="Vera Serif-14"/>
 			</Window>
 		</Window>
 
     	<Window Type="DefaultGUISheet" Name="PlaylistSheet/PlaylistSheet">
-      		<Property Name="RelativePosition" Value="x:0.0 y:0.0"/>
-      		<Property Name="RelativeWidth" Value="1.0"/>
-      		<Property Name="RelativeHeight" Value="1.0"/>
+			<Property Name="UnifiedPosition" Value="{{0,0},{0,0}}"/>
+	        <Property Name="UnifiedSize" Value="{{1.0,0},{1.0,0}}"/>
 			<Property Name="Text" Value="List" />
 
 			<Window Type="RastullahLook/MultiColumnList" Name="PlaylistSheet/PlaylistSheet/Table">
-				<Property Name="RelativePosition" Value="x:0.0 y:0.0"/>
-				<Property Name="RelativeWidth" Value="1.0"/>
-				<Property Name="RelativeHeight" Value="1.0"/>
+				<Property Name="UnifiedPosition" Value="{{0,0},{0,0}}"/>
+	            <Property Name="UnifiedSize" Value="{{1.0,0},{1.0,0}}"/>
 			</Window>
 		</Window>
 	</Window>



From chrber at mail.berlios.de  Tue Feb 27 10:57:14 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Tue, 27 Feb 2007 10:57:14 +0100
Subject: [Dsa-hl-svn] r3079 - rl/trunk/engine/ui/src
Message-ID: <200702270957.l1R9vEvl028690@sheep.berlios.de>

Author: chrber
Date: 2007-02-27 10:57:11 +0100 (Tue, 27 Feb 2007)
New Revision: 3079

Modified:
   rl/trunk/engine/ui/src/AboutWindow.cpp
Log:
Fixed wrong filename


Modified: rl/trunk/engine/ui/src/AboutWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/AboutWindow.cpp	2007-02-27 09:56:15 UTC (rev 3078)
+++ rl/trunk/engine/ui/src/AboutWindow.cpp	2007-02-27 09:57:11 UTC (rev 3079)
@@ -22,7 +22,7 @@
 namespace rl {
 
 AboutWindow::AboutWindow() :
-    CeGuiWindow("AboutWindow.xml", WND_MOUSE_INPUT)
+    CeGuiWindow("aboutwindow.xml", WND_MOUSE_INPUT)
 {
     getWindow("AboutWindow/Text")->setText("Rastullahs Lockenpracht\n\nCopyright 2003-2006 Team Pantheon\
 \n\nBenutzte Bibliotheken: Ogre, fmod, Newton, boost, ...");



From blakharaz at mail.berlios.de  Tue Feb 27 12:04:46 2007
From: blakharaz at mail.berlios.de (blakharaz at mail.berlios.de)
Date: Tue, 27 Feb 2007 12:04:46 +0100
Subject: [Dsa-hl-svn] r3080 - in rl/trunk: docs/src engine/script
	engine/script/swig
Message-ID: <200702271104.l1RB4ktC002299@sheep.berlios.de>

Author: blakharaz
Date: 2007-02-27 12:04:17 +0100 (Tue, 27 Feb 2007)
New Revision: 3080

Added:
   rl/trunk/docs/src/ruby_html.cfg
   rl/trunk/engine/script/swig/RlAi.head.swig
   rl/trunk/engine/script/swig/RlAi.swig
   rl/trunk/engine/script/swig/RlCommon.head.swig
   rl/trunk/engine/script/swig/RlCommon.swig
   rl/trunk/engine/script/swig/RlCore.head.swig
   rl/trunk/engine/script/swig/RlCore.swig
   rl/trunk/engine/script/swig/RlDialog.head.swig
   rl/trunk/engine/script/swig/RlDialog.swig
   rl/trunk/engine/script/swig/RlRules.head.swig
   rl/trunk/engine/script/swig/RlRules.swig
   rl/trunk/engine/script/swig/RlScript.head.swig
   rl/trunk/engine/script/swig/RlScript.swig
   rl/trunk/engine/script/swig/RlUi.head.swig
   rl/trunk/engine/script/swig/RlUi.swig
   rl/trunk/engine/script/swig/TypeOgreColourValue.swig
   rl/trunk/engine/script/swig/TypeOgreQuaternion.swig
   rl/trunk/engine/script/swig/TypeOgreRadian.swig
   rl/trunk/engine/script/swig/TypeOgreReal.swig
   rl/trunk/engine/script/swig/TypeOgreString.swig
   rl/trunk/engine/script/swig/TypeOgreStringVector.swig
   rl/trunk/engine/script/swig/TypeOgreVector3.swig
   rl/trunk/engine/script/swig/TypeRlCeGuiString.swig
   rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig
   rl/trunk/engine/script/swig/TypeRlProperty.swig
   rl/trunk/engine/script/swig/TypeRlTripelInt.swig
   rl/trunk/engine/script/swig/TypeStdPairIntInt.swig
Removed:
   rl/trunk/engine/script/swig/RlAi.head.inc
   rl/trunk/engine/script/swig/RlAi.inc
   rl/trunk/engine/script/swig/RlCommon.head.inc
   rl/trunk/engine/script/swig/RlCommon.inc
   rl/trunk/engine/script/swig/RlCore.head.inc
   rl/trunk/engine/script/swig/RlCore.inc
   rl/trunk/engine/script/swig/RlDialog.head.inc
   rl/trunk/engine/script/swig/RlDialog.inc
   rl/trunk/engine/script/swig/RlRules.head.inc
   rl/trunk/engine/script/swig/RlRules.inc
   rl/trunk/engine/script/swig/RlScript.head.inc
   rl/trunk/engine/script/swig/RlScript.inc
   rl/trunk/engine/script/swig/RlUi.head.inc
   rl/trunk/engine/script/swig/RlUi.inc
   rl/trunk/engine/script/swig/TypeOgreColourValue.inc
   rl/trunk/engine/script/swig/TypeOgreQuaternion.inc
   rl/trunk/engine/script/swig/TypeOgreRadian.inc
   rl/trunk/engine/script/swig/TypeOgreReal.inc
   rl/trunk/engine/script/swig/TypeOgreString.inc
   rl/trunk/engine/script/swig/TypeOgreStringVector.inc
   rl/trunk/engine/script/swig/TypeOgreVector3.inc
   rl/trunk/engine/script/swig/TypeRlCeGuiString.inc
   rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.inc
   rl/trunk/engine/script/swig/TypeRlProperty.inc
   rl/trunk/engine/script/swig/TypeRlTripelInt.inc
   rl/trunk/engine/script/swig/TypeStdPairIntInt.inc
Modified:
   rl/trunk/engine/script/RlScript2005.vcproj
   rl/trunk/engine/script/swig/Makefile.am
Log:
Doxygen documentation of RL's ruby interface
* renamed all .inc to .swig since .inc is PHP for doxygen, .swig is 
parsed as C++ since it is unknown
* added doxyfile for generating documentation from all .swig files

Now just add the missing doxygen comments ;)


Added: rl/trunk/docs/src/ruby_html.cfg
===================================================================
--- rl/trunk/docs/src/ruby_html.cfg	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/docs/src/ruby_html.cfg	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,222 @@
+# Doxyfile 1.4.3
+
+#---------------------------------------------------------------------------
+# Project related configuration options
+#---------------------------------------------------------------------------
+PROJECT_NAME           = "Rastullahs Lockenpracht"
+PROJECT_NUMBER         = 
+OUTPUT_DIRECTORY       = ../ruby-api
+CREATE_SUBDIRS         = NO
+OUTPUT_LANGUAGE        = 
+USE_WINDOWS_ENCODING   = NO
+BRIEF_MEMBER_DESC      = YES
+REPEAT_BRIEF           = YES
+ABBREVIATE_BRIEF       = 
+ALWAYS_DETAILED_SEC    = NO
+INLINE_INHERITED_MEMB  = NO
+FULL_PATH_NAMES        = NO
+STRIP_FROM_PATH        = 
+STRIP_FROM_INC_PATH    = 
+SHORT_NAMES            = NO
+JAVADOC_AUTOBRIEF      = YES
+MULTILINE_CPP_IS_BRIEF = NO
+DETAILS_AT_TOP         = YES
+INHERIT_DOCS           = YES
+DISTRIBUTE_GROUP_DOC   = NO
+SEPARATE_MEMBER_PAGES  = NO
+TAB_SIZE               = 4
+ALIASES                = 
+OPTIMIZE_OUTPUT_FOR_C  = NO
+OPTIMIZE_OUTPUT_JAVA   = NO
+SUBGROUPING            = YES
+#---------------------------------------------------------------------------
+# Build related configuration options
+#---------------------------------------------------------------------------
+EXTRACT_ALL            = YES
+EXTRACT_PRIVATE        = YES
+EXTRACT_STATIC         = YES
+EXTRACT_LOCAL_CLASSES  = YES
+EXTRACT_LOCAL_METHODS  = NO
+HIDE_UNDOC_MEMBERS     = NO
+HIDE_UNDOC_CLASSES     = NO
+HIDE_FRIEND_COMPOUNDS  = NO
+HIDE_IN_BODY_DOCS      = NO
+INTERNAL_DOCS          = NO
+CASE_SENSE_NAMES       = YES
+HIDE_SCOPE_NAMES       = NO
+SHOW_INCLUDE_FILES     = YES
+INLINE_INFO            = YES
+SORT_MEMBER_DOCS       = YES
+SORT_BRIEF_DOCS        = YES
+SORT_BY_SCOPE_NAME     = NO
+GENERATE_TODOLIST      = YES
+GENERATE_TESTLIST      = YES
+GENERATE_BUGLIST       = YES
+GENERATE_DEPRECATEDLIST= YES
+ENABLED_SECTIONS       = 
+MAX_INITIALIZER_LINES  = 30
+SHOW_USED_FILES        = NO
+SHOW_DIRECTORIES       = YES
+FILE_VERSION_FILTER    = 
+#---------------------------------------------------------------------------
+# configuration options related to warning and progress messages
+#---------------------------------------------------------------------------
+QUIET                  = NO
+WARNINGS               = YES
+WARN_IF_UNDOCUMENTED   = YES
+WARN_IF_DOC_ERROR      = YES
+WARN_NO_PARAMDOC       = NO
+WARN_FORMAT            = "$file:$line: $text"
+WARN_LOGFILE           = doxygen_warnings.log
+#---------------------------------------------------------------------------
+# configuration options related to the input files
+#---------------------------------------------------------------------------
+INPUT                  = ../../engine/script
+FILE_PATTERNS          = Rl*.swig
+RECURSIVE              = YES
+EXCLUDE                = 
+EXCLUDE_SYMLINKS       = NO
+EXCLUDE_PATTERNS       = 
+EXAMPLE_PATH           = 
+EXAMPLE_PATTERNS       = 
+EXAMPLE_RECURSIVE      = NO
+IMAGE_PATH             = 
+INPUT_FILTER           = 
+FILTER_PATTERNS        = 
+FILTER_SOURCE_FILES    = NO
+#---------------------------------------------------------------------------
+# configuration options related to source browsing
+#---------------------------------------------------------------------------
+SOURCE_BROWSER         = NO
+INLINE_SOURCES         = NO
+STRIP_CODE_COMMENTS    = YES
+REFERENCED_BY_RELATION = NO
+REFERENCES_RELATION    = NO
+USE_HTAGS              = NO
+VERBATIM_HEADERS       = NO
+#---------------------------------------------------------------------------
+# configuration options related to the alphabetical class index
+#---------------------------------------------------------------------------
+ALPHABETICAL_INDEX     = YES
+COLS_IN_ALPHA_INDEX    = 3
+IGNORE_PREFIX          = 
+#---------------------------------------------------------------------------
+# configuration options related to the HTML output
+#---------------------------------------------------------------------------
+GENERATE_HTML          = YES
+HTML_OUTPUT            = html
+HTML_FILE_EXTENSION    = .html
+HTML_HEADER            = 
+HTML_FOOTER            =
+HTML_STYLESHEET        =
+HTML_ALIGN_MEMBERS     = YES
+GENERATE_HTMLHELP      = NO
+CHM_FILE               = 
+HHC_LOCATION           = 
+GENERATE_CHI           = NO
+BINARY_TOC             = NO
+TOC_EXPAND             = NO
+DISABLE_INDEX          = NO
+ENUM_VALUES_PER_LINE   = 4
+GENERATE_TREEVIEW      = NO
+TREEVIEW_WIDTH         = 250
+#---------------------------------------------------------------------------
+# configuration options related to the LaTeX output
+#---------------------------------------------------------------------------
+GENERATE_LATEX         = NO
+LATEX_OUTPUT           = latex
+LATEX_CMD_NAME         = latex
+MAKEINDEX_CMD_NAME     = makeindex
+COMPACT_LATEX          = NO
+PAPER_TYPE             = a4wide
+EXTRA_PACKAGES         = 
+LATEX_HEADER           = 
+PDF_HYPERLINKS         = NO
+USE_PDFLATEX           = NO
+LATEX_BATCHMODE        = NO
+LATEX_HIDE_INDICES     = NO
+#---------------------------------------------------------------------------
+# configuration options related to the RTF output
+#---------------------------------------------------------------------------
+GENERATE_RTF           = NO
+RTF_OUTPUT             = rtf
+COMPACT_RTF            = NO
+RTF_HYPERLINKS         = NO
+RTF_STYLESHEET_FILE    = 
+RTF_EXTENSIONS_FILE    = 
+#---------------------------------------------------------------------------
+# configuration options related to the man page output
+#---------------------------------------------------------------------------
+GENERATE_MAN           = NO
+MAN_OUTPUT             = man
+MAN_EXTENSION          = .3
+MAN_LINKS              = NO
+#---------------------------------------------------------------------------
+# configuration options related to the XML output
+#---------------------------------------------------------------------------
+GENERATE_XML           = NO
+XML_OUTPUT             = xml
+XML_SCHEMA             = 
+XML_DTD                = 
+XML_PROGRAMLISTING     = YES
+#---------------------------------------------------------------------------
+# configuration options for the AutoGen Definitions output
+#---------------------------------------------------------------------------
+GENERATE_AUTOGEN_DEF   = NO
+#---------------------------------------------------------------------------
+# configuration options related to the Perl module output
+#---------------------------------------------------------------------------
+GENERATE_PERLMOD       = NO
+PERLMOD_LATEX          = NO
+PERLMOD_PRETTY         = YES
+PERLMOD_MAKEVAR_PREFIX = 
+#---------------------------------------------------------------------------
+# Configuration options related to the preprocessor   
+#---------------------------------------------------------------------------
+ENABLE_PREPROCESSING   = YES
+MACRO_EXPANSION        = NO
+EXPAND_ONLY_PREDEF     = NO
+SEARCH_INCLUDES        = YES
+INCLUDE_PATH           = 
+INCLUDE_FILE_PATTERNS  = 
+PREDEFINED             = 
+EXPAND_AS_DEFINED      = 
+SKIP_FUNCTION_MACROS   = YES
+#---------------------------------------------------------------------------
+# Configuration::additions related to external references   
+#---------------------------------------------------------------------------
+TAGFILES               = 
+GENERATE_TAGFILE       = 
+ALLEXTERNALS           = NO
+EXTERNAL_GROUPS        = YES
+PERL_PATH              = perl
+#---------------------------------------------------------------------------
+# Configuration options related to the dot tool   
+#---------------------------------------------------------------------------
+CLASS_DIAGRAMS         = YES
+HIDE_UNDOC_RELATIONS   = YES
+HAVE_DOT               = NO
+CLASS_GRAPH            = YES
+COLLABORATION_GRAPH    = YES
+GROUP_GRAPHS           = YES
+UML_LOOK               = NO
+TEMPLATE_RELATIONS     = NO
+INCLUDE_GRAPH          = YES
+INCLUDED_BY_GRAPH      = YES
+CALL_GRAPH             = NO
+GRAPHICAL_HIERARCHY    = YES
+DIRECTORY_GRAPH        = YES
+DOT_IMAGE_FORMAT       = png
+DOT_PATH               = 
+DOTFILE_DIRS           = 
+MAX_DOT_GRAPH_WIDTH    = 800
+MAX_DOT_GRAPH_HEIGHT   = 600
+MAX_DOT_GRAPH_DEPTH    = 0
+DOT_TRANSPARENT        = NO
+DOT_MULTI_TARGETS      = NO
+GENERATE_LEGEND        = YES
+DOT_CLEANUP            = YES
+#---------------------------------------------------------------------------
+# Configuration::additions related to the search engine   
+#---------------------------------------------------------------------------
+SEARCHENGINE           = NO


Property changes on: rl/trunk/docs/src/ruby_html.cfg
___________________________________________________________________
Name: svn:executable
   + *

Modified: rl/trunk/engine/script/RlScript2005.vcproj
===================================================================
--- rl/trunk/engine/script/RlScript2005.vcproj	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/RlScript2005.vcproj	2007-02-27 11:04:17 UTC (rev 3080)
@@ -317,7 +317,7 @@
 						Name="VCCustomBuildTool"
 						Description="[SWIG] RubyWrapper erzeugen."
 						CommandLine="cd &quot;$(InputDir)&quot;&#x0D;&#x0A;&quot;$(ProjectDir)..\..\dependencies\swig\swig.exe&quot; -o &quot;$(InputDir)$(InputName)_wrap.cxx&quot; -c++ -ruby -minherit -v -Wall  &quot;$(InputPath)&quot;&#x0D;&#x0A;"
-						AdditionalDependencies="&quot;$(InputDir)TypeMaps.i&quot;;&quot;$(InputDir)RlCore.inc&quot;;&quot;$(InputDir)RlDialog.inc&quot;;&quot;$(InputDir)RlCommon.inc&quot;;&quot;$(InputDir)RlRules.inc&quot;;&quot;$(InputDir)RlScript.inc&quot;;&quot;$(InputDir)RlSound.inc&quot;;&quot;$(InputDir)RlUi.inc&quot;;&quot;$(InputDir)RlAi.inc&quot;"
+						AdditionalDependencies="&quot;$(InputDir)TypeMaps.i&quot;;&quot;$(InputDir)RlCore.swig&quot;;&quot;$(InputDir)RlDialog.swig&quot;;&quot;$(InputDir)RlCommon.swig&quot;;&quot;$(InputDir)RlRules.swig&quot;;&quot;$(InputDir)RlScript.swig&quot;;&quot;$(InputDir)RlSound.swig&quot;;&quot;$(InputDir)RlUi.swig&quot;;&quot;$(InputDir)RlAi.swig&quot;"
 						Outputs="&quot;$(InputDir)$(InputName)_wrap.cxx&quot;"
 					/>
 				</FileConfiguration>
@@ -328,7 +328,7 @@
 						Name="VCCustomBuildTool"
 						Description="[SWIG] RubyWrapper erzeugen."
 						CommandLine="cd &quot;$(InputDir)&quot;&#x0D;&#x0A;&quot;$(ProjectDir)..\..\dependencies\swig\swig.exe&quot; -o &quot;$(InputDir)$(InputName)_wrap.cxx&quot; -c++ -ruby -minherit -v -Wall  &quot;$(InputPath)&quot;&#x0D;&#x0A;"
-						AdditionalDependencies="&quot;$(InputDir)TypeMaps.i&quot;;&quot;$(InputDir)RlCore.inc&quot;;&quot;$(InputDir)RlDialog.inc&quot;;&quot;$(InputDir)RlCommon.inc&quot;;&quot;$(InputDir)RlRules.inc&quot;;&quot;$(InputDir)RlScript.inc&quot;;&quot;$(InputDir)RlSound.inc&quot;;&quot;$(InputDir)RlUi.inc&quot;;&quot;$(InputDir)RlAi.inc&quot;"
+						AdditionalDependencies="&quot;$(InputDir)TypeMaps.i&quot;;&quot;$(InputDir)RlCore.swig&quot;;&quot;$(InputDir)RlDialog.swig&quot;;&quot;$(InputDir)RlCommon.swig&quot;;&quot;$(InputDir)RlRules.swig&quot;;&quot;$(InputDir)RlScript.swig&quot;;&quot;$(InputDir)RlSound.swig&quot;;&quot;$(InputDir)RlUi.swig&quot;;&quot;$(InputDir)RlAi.swig&quot;"
 						Outputs="&quot;$(InputDir)$(InputName)_wrap.cxx&quot;"
 					/>
 				</FileConfiguration>
@@ -339,7 +339,7 @@
 						Name="VCCustomBuildTool"
 						Description="[SWIG] RubyWrapper erzeugen."
 						CommandLine="cd &quot;$(InputDir)&quot;&#x0D;&#x0A;&quot;$(ProjectDir)..\..\dependencies\swig\swig.exe&quot; -o &quot;$(InputDir)$(InputName)_wrap.cxx&quot; -c++ -ruby -minherit -v -Wall  &quot;$(InputPath)&quot;&#x0D;&#x0A;"
-						AdditionalDependencies="&quot;$(InputDir)TypeMaps.i&quot;;&quot;$(InputDir)RlCore.inc&quot;;&quot;$(InputDir)RlDialog.inc&quot;;&quot;$(InputDir)RlCommon.inc&quot;;&quot;$(InputDir)RlRules.inc&quot;;&quot;$(InputDir)RlScript.inc&quot;;&quot;$(InputDir)RlSound.inc&quot;;&quot;$(InputDir)RlUi.inc&quot;;&quot;$(InputDir)RlAi.inc&quot;"
+						AdditionalDependencies="&quot;$(InputDir)TypeMaps.i&quot;;&quot;$(InputDir)RlCore.swig&quot;;&quot;$(InputDir)RlDialog.swig&quot;;&quot;$(InputDir)RlCommon.swig&quot;;&quot;$(InputDir)RlRules.swig&quot;;&quot;$(InputDir)RlScript.swig&quot;;&quot;$(InputDir)RlSound.swig&quot;;&quot;$(InputDir)RlUi.swig&quot;;&quot;$(InputDir)RlAi.swig&quot;"
 						Outputs="&quot;$(InputDir)$(InputName)_wrap.cxx&quot;"
 					/>
 				</FileConfiguration>
@@ -360,31 +360,31 @@
 				Name="include"
 				>
 				<File
-					RelativePath=".\swig\RlAi.head.inc"
+					RelativePath=".\swig\RlAi.head.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlCommon.head.inc"
+					RelativePath=".\swig\RlCommon.head.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlCore.head.inc"
+					RelativePath=".\swig\RlCore.head.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlDialog.head.inc"
+					RelativePath=".\swig\RlDialog.head.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlRules.head.inc"
+					RelativePath=".\swig\RlRules.head.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlScript.head.inc"
+					RelativePath=".\swig\RlScript.head.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlUi.head.inc"
+					RelativePath=".\swig\RlUi.head.swig"
 					>
 				</File>
 			</Filter>
@@ -392,31 +392,31 @@
 				Name="src"
 				>
 				<File
-					RelativePath=".\swig\RlAi.inc"
+					RelativePath=".\swig\RlAi.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlCommon.inc"
+					RelativePath=".\swig\RlCommon.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlCore.inc"
+					RelativePath=".\swig\RlCore.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlDialog.inc"
+					RelativePath=".\swig\RlDialog.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlRules.inc"
+					RelativePath=".\swig\RlRules.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlScript.inc"
+					RelativePath=".\swig\RlScript.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\RlUi.inc"
+					RelativePath=".\swig\RlUi.swig"
 					>
 				</File>
 			</Filter>
@@ -424,51 +424,51 @@
 				Name="types"
 				>
 				<File
-					RelativePath=".\swig\TypeOgreColourValue.inc"
+					RelativePath=".\swig\TypeOgreColourValue.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeOgreQuaternion.inc"
+					RelativePath=".\swig\TypeOgreQuaternion.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeOgreRadian.inc"
+					RelativePath=".\swig\TypeOgreRadian.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeOgreReal.inc"
+					RelativePath=".\swig\TypeOgreReal.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeOgreString.inc"
+					RelativePath=".\swig\TypeOgreString.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeOgreStringVector.inc"
+					RelativePath=".\swig\TypeOgreStringVector.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeOgreVector3.inc"
+					RelativePath=".\swig\TypeOgreVector3.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeRlCeGuiString.inc"
+					RelativePath=".\swig\TypeRlCeGuiString.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeRlCeGuiStringVector.inc"
+					RelativePath=".\swig\TypeRlCeGuiStringVector.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeRlProperty.inc"
+					RelativePath=".\swig\TypeRlProperty.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeRlTripelInt.inc"
+					RelativePath=".\swig\TypeRlTripelInt.swig"
 					>
 				</File>
 				<File
-					RelativePath=".\swig\TypeStdPairIntInt.inc"
+					RelativePath=".\swig\TypeStdPairIntInt.swig"
 					>
 				</File>
 			</Filter>

Modified: rl/trunk/engine/script/swig/Makefile.am
===================================================================
--- rl/trunk/engine/script/swig/Makefile.am	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/Makefile.am	2007-02-27 11:04:17 UTC (rev 3080)
@@ -2,10 +2,10 @@
 
 all: RlExports.cxx
 
-RlExports.cxx: RlCore.head.inc RlCore.inc RlRules.head.inc \
- RlRules.inc RlUi.head.inc RlUi.inc RlAi.head.inc RlAi.inc \
- RlScript.head.inc RlScript.inc RlCommon.head.inc RlCommon.inc \
- RlDialog.head.inc RlDialog.inc RlExports.i TypeMaps.i
+RlExports.cxx: RlCore.head.swig RlCore.swig RlRules.head.swig \
+ RlRules.swig RlUi.head.swig RlUi.swig RlAi.head.swig RlAi.swig \
+ RlScript.head.swig RlScript.swig RlCommon.head.swig RlCommon.swig \
+ RlDialog.head.swig RlDialog.swig RlExports.i TypeMaps.i
  
 .i.cxx:
-	$(SWIG) $(SWIG_RUBY_OPT) -o $@ $<
\ No newline at end of file
+	$(SWIG) $(SWIG_RUBY_OPT) -o $@ $<

Deleted: rl/trunk/engine/script/swig/RlAi.head.inc
===================================================================
--- rl/trunk/engine/script/swig/RlAi.head.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlAi.head.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,27 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%{
-//----------- Includes - Ai -----------
-#include "FixRubyHeaders.h"
-#include "AiPrerequisites.h"
-#include "SteeringMachine.h"
-#include "SteeringVehicle.h"
-#include "AiSubsystem.h"
-#include "AgentManager.h"
-#include "Agent.h"
-#include "PhysicalObstacle.h"
-%}
\ No newline at end of file

Added: rl/trunk/engine/script/swig/RlAi.head.swig
===================================================================
--- rl/trunk/engine/script/swig/RlAi.head.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlAi.head.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,27 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%{
+//----------- Includes - Ai -----------
+#include "FixRubyHeaders.h"
+#include "AiPrerequisites.h"
+#include "SteeringMachine.h"
+#include "SteeringVehicle.h"
+#include "AiSubsystem.h"
+#include "AgentManager.h"
+#include "Agent.h"
+#include "PhysicalObstacle.h"
+%}
\ No newline at end of file


Property changes on: rl/trunk/engine/script/swig/RlAi.head.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlAi.inc
===================================================================
--- rl/trunk/engine/script/swig/RlAi.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlAi.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,117 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-namespace rl 
-{
-	class SteeringVehicle
-	{
-	public:
-		SteeringVehicle(rl::Agent* agent, rl::Actor* character);
-		
-		void addForce(const Ogre::Vector3& force);
-
-		Ogre::Vector3 calcWander(const float elapsedTime);
-
-		Ogre::Vector3 calcSeek(const Ogre::Vector3& target);
-
-		Ogre::Vector3 calcFlee(const Ogre::Vector3& target);
-		
-		Ogre::Vector3 calcPursuit(rl::Agent* agent);
-
-		Ogre::Vector3 calcAvoidObstacles(const float minTimeToCollision);
-
-		Ogre::Vector3 calcAvoidNeighbors(const float minTimeToCollision);
-		
-		Ogre::Vector3 calcSteerTargetSpeed(const float targetSpeed);
-		
-		bool isDialogActive();
-		
-		float calcDistance(const Ogre::Vector3& vec1, const Ogre::Vector3& vec2);
-		
-		Ogre::Vector3 getPosition();
-		
-		bool isAhead(rl::Agent* agent, const float threshold);
-		
-		bool needAvoidance(const float minTimeToCollision);
-		
-		void setAnimation(rl::CeGuiString& name);
-	};
-	
-	%feature("director") SteeringBehaviour;
-	class SteeringBehaviour
-	{
-	public:
-		SteeringBehaviour();
-		virtual ~SteeringBehaviour();
-		virtual rl::CeGuiString getType()=0;
-		virtual void init()=0;
-		virtual void activate()=0;
-		virtual void deactivate()=0;
-		virtual void update(const float elapsedTime)=0;
-
-		virtual float calculateActivation()=0;
-		
-		float getActivationLevel();
-		void setActivationLevel(float activationLevel);
-
-		rl::SteeringBehaviour* getParent();
-		rl::SteeringVehicle* getController();
-	};
-	
-	class Agent
-	{
-	public:
-		Agent(rl::Creature* character);
-		virtual ~Agent();
-		void addSteeringBehaviour(rl::SteeringBehaviour* behaviour);
-		void clearSteeringBehaviours();
-		bool isDialogActive();
-	};
-	class AiSubsystem 
-	{
-	public:
-		static AiSubsystem& getSingleton(void);
-	};
-	
-	class AgentManager
-	{
-	public:
-		enum AgentType
-		{
-			AGENT_NONE = -1,
-			AGENT_PLAYER = 0,
-			AGENT_STD_NPC = 1,
-			AGENT_FLOCKING = 2
-		};
-		
-		static AgentManager& getSingleton(void);
-		rl::Agent* createAgent(rl::AgentManager::AgentType type, rl::Creature* character);
-		rl::Agent* createAgent(rl::DialogCharacter* character);
-	};
-	
-    class PhysicalObstacle {
-        
-        public:
-            PhysicalObstacle(rl::PhysicalThing *thing);
-            virtual ~PhysicalObstacle();
-            
-            OpenSteer::Obstacle *getObstacle() const;
-            
-            rl::PhysicalThing *getPhysicalThing() const;
-            void setPhysicalThing(rl::PhysicalThing *thing);
-    };
-	
-}

Added: rl/trunk/engine/script/swig/RlAi.swig
===================================================================
--- rl/trunk/engine/script/swig/RlAi.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlAi.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,117 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+namespace rl 
+{
+	class SteeringVehicle
+	{
+	public:
+		SteeringVehicle(rl::Agent* agent, rl::Actor* character);
+		
+		void addForce(const Ogre::Vector3& force);
+
+		Ogre::Vector3 calcWander(const float elapsedTime);
+
+		Ogre::Vector3 calcSeek(const Ogre::Vector3& target);
+
+		Ogre::Vector3 calcFlee(const Ogre::Vector3& target);
+		
+		Ogre::Vector3 calcPursuit(rl::Agent* agent);
+
+		Ogre::Vector3 calcAvoidObstacles(const float minTimeToCollision);
+
+		Ogre::Vector3 calcAvoidNeighbors(const float minTimeToCollision);
+		
+		Ogre::Vector3 calcSteerTargetSpeed(const float targetSpeed);
+		
+		bool isDialogActive();
+		
+		float calcDistance(const Ogre::Vector3& vec1, const Ogre::Vector3& vec2);
+		
+		Ogre::Vector3 getPosition();
+		
+		bool isAhead(rl::Agent* agent, const float threshold);
+		
+		bool needAvoidance(const float minTimeToCollision);
+		
+		void setAnimation(rl::CeGuiString& name);
+	};
+	
+	%feature("director") SteeringBehaviour;
+	class SteeringBehaviour
+	{
+	public:
+		SteeringBehaviour();
+		virtual ~SteeringBehaviour();
+		virtual rl::CeGuiString getType()=0;
+		virtual void init()=0;
+		virtual void activate()=0;
+		virtual void deactivate()=0;
+		virtual void update(const float elapsedTime)=0;
+
+		virtual float calculateActivation()=0;
+		
+		float getActivationLevel();
+		void setActivationLevel(float activationLevel);
+
+		rl::SteeringBehaviour* getParent();
+		rl::SteeringVehicle* getController();
+	};
+	
+	class Agent
+	{
+	public:
+		Agent(rl::Creature* character);
+		virtual ~Agent();
+		void addSteeringBehaviour(rl::SteeringBehaviour* behaviour);
+		void clearSteeringBehaviours();
+		bool isDialogActive();
+	};
+	class AiSubsystem 
+	{
+	public:
+		static AiSubsystem& getSingleton(void);
+	};
+	
+	class AgentManager
+	{
+	public:
+		enum AgentType
+		{
+			AGENT_NONE = -1,
+			AGENT_PLAYER = 0,
+			AGENT_STD_NPC = 1,
+			AGENT_FLOCKING = 2
+		};
+		
+		static AgentManager& getSingleton(void);
+		rl::Agent* createAgent(rl::AgentManager::AgentType type, rl::Creature* character);
+		rl::Agent* createAgent(rl::DialogCharacter* character);
+	};
+	
+    class PhysicalObstacle {
+        
+        public:
+            PhysicalObstacle(rl::PhysicalThing *thing);
+            virtual ~PhysicalObstacle();
+            
+            OpenSteer::Obstacle *getObstacle() const;
+            
+            rl::PhysicalThing *getPhysicalThing() const;
+            void setPhysicalThing(rl::PhysicalThing *thing);
+    };
+	
+}


Property changes on: rl/trunk/engine/script/swig/RlAi.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlCommon.head.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCommon.head.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlCommon.head.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,32 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%{
-//----------- Includes - Common -----------
-#include "FixRubyHeaders.h"
-#include "CommonPrerequisites.h"
-#include "GameTask.h"
-#include <set>
-#include "EventListener.h"
-#include "EventObject.h"
-#include "EventCaster.h"
-#include "PlaylistObject.h"
-#include "Playlist.h"
-#include "PlaylistEvent.h"
-#include "Property.h"
-#include "SimplePlaylist.h"
-#include "LinkedPlaylist.h"
-%}

Added: rl/trunk/engine/script/swig/RlCommon.head.swig
===================================================================
--- rl/trunk/engine/script/swig/RlCommon.head.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlCommon.head.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,32 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%{
+//----------- Includes - Common -----------
+#include "FixRubyHeaders.h"
+#include "CommonPrerequisites.h"
+#include "GameTask.h"
+#include <set>
+#include "EventListener.h"
+#include "EventObject.h"
+#include "EventCaster.h"
+#include "PlaylistObject.h"
+#include "Playlist.h"
+#include "PlaylistEvent.h"
+#include "Property.h"
+#include "SimplePlaylist.h"
+#include "LinkedPlaylist.h"
+%}


Property changes on: rl/trunk/engine/script/swig/RlCommon.head.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlCommon.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCommon.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlCommon.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,175 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Perl Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Perl Artistic License for more details.
- *
- *  You should have received a copy of the Perl Artistic License
- *  along with this program; if not you can get it here
- *  http://www.perldoc.com/perl5.6/Artistic.html.
- */
-
-namespace Ogre {
-
-template<class T> class SharedPtr {
- public:
-    SharedPtr();
-    SharedPtr(T* rep);
-    SharedPtr(const SharedPtr& r);
-    virtual ~SharedPtr(); 
-    T* get() const;
-};
-
-}
-
-namespace rl {
-
-class GameTask
-{
-    public:
-        GameTask();
-        virtual ~GameTask( ) {};
-        bool isPaused() const;
-        void setPaused( bool isPaused );
-		virtual void run(float) = 0;
-};
-
-
-template <typename Event> class EventListener {
-public:
-    /// Der Konstruktor.
-	EventListener();
-    /// Der Destruktor.
-	virtual ~EventListener();
-    /* Hier wird das Objekt benachrichtigt.
-	 *
-	 * @return bool consumed Wurde der Event aufgebracht (defunct)
-	 */
-    virtual bool eventRaised(Event *anEvent) = 0;
-};
-
-template <typename Event> class EventCaster {
-public:
-    typedef rl::EventListener<Event> ListenerToEvent;
-    typedef std::set<rl::ListenerToEvent*> EventSet;
-    typedef typename EventSet::iterator EventSetIterator;
-
-    /// Der Konstruktor
-	EventCaster();
-    /// Der Destruktor
-    virtual ~EventCaster();
-    /// Fuege einen EventListener hinzu.
-    void addEventListener(rl::EventListener<Event> *newListener);
-    /// Loesche einen EventListener.
-    void removeEventListener(rl::EventListener<Event> *aListener);
-    /// Loescht alle EventListener.
-    void removeEventListeners();
-    /// Gibt es diesen Listener bereits?
-    bool containsListener(rl::EventListener<Event> *aListener) const;
-    /// Sind Listener vorhanden?
-    bool hasEventListeners() const;
-    /// Ein Ereignis verteilen.
-    void dispatchEvent(Event *anEvent);
-    /// EventSet
-    EventSet getEventSet() const;
-
-};
-
-class EventObject {
-public:
-    /// Der Konstruktor.
-	EventObject(rl::EventSource *source);
-	/// Der Konstruktor.
-	EventObject(rl::EventSource *source, const unsigned int reason );
-    /// Der Destruktor.
-	virtual ~EventObject();
-   
-   /// Die Ereignisquelle zurueckgeben
-   rl::EventSource *getSource() const;
-   /// Die ID des Grundes f?r den Event.
-   const unsigned int getReason() const;
-   /// Die ID setzen
-   void setReason(const unsigned int reason);
-};
-
-%template(EventObjectEventCaster) EventCaster<rl::EventObject>;
-class PlaylistObject : public rl::EventCaster<rl::EventObject>
-{
-public:
-	/// Konstruktor
-	PlaylistObject();
-	/// Destruktor
-	~PlaylistObject();
-	/// Objekt laden, einrichten etc.
-	virtual void load() = 0;
-	/// Objekt entladen, abbauen etc.
-	virtual void unload() = 0;
-	/// Objektaktion starten
-	virtual void start() = 0;
-	/// Objectaktion stoppen
-	virtual void stop() = 0;
-	/// Objektaktion pausieren
-	virtual void pause() = 0;
-};
-
-class PlaylistEvent : public rl::EventObject
-{
-};
-
-%template(EventObjectEventListener) EventListener<rl::PlaylistEvent>;
-class Playlist : public rl::EventListener<rl::PlaylistEvent>
-{
-public:
-	Playlist();
-	virtual ~Playlist();
-    virtual void start() = 0;
-    virtual void stop() = 0;
-};
-
-class SimplePlaylist : public rl::Playlist
-{
-public:
-	SimplePlaylist();
-	virtual ~SimplePlaylist();
-    virtual void add(rl::PlaylistObject *object);
-    virtual void remove(rl::PlaylistObject *object);
-    virtual void start();
-    virtual void stop();
-    void setLooping(bool looping);
-    bool isLooping() const;
-    virtual bool eventRaised(rl::PlaylistEvent *eventRaised);
-};
-
-class rl::LinkItem;
-typedef std::list<rl::LinkItem*> LinkedList;
-class LinkItem {
-public:
-	LinkItem(rl::PlaylistObject *item);
-	virtual ~LinkItem();
-	rl::PlaylistObject* getItem() const;
-	void start();
-	void stop();
-	void add(rl::PlaylistObject *child);
-	void remove(rl::PlaylistObject *child);
-};
-
-
-class LinkedPlaylist : public rl::Playlist
-{
-public:
-	LinkedPlaylist();
-	virtual ~LinkedPlaylist();
-    void add(rl::PlaylistObject *object, LinkItem *parent);
-	void remove(rl::PlaylistObject *object, LinkItem *parent);
-    virtual void stop();
-	virtual void start();
-	LinkItem* getList() const;
-};
-
-}
-

Added: rl/trunk/engine/script/swig/RlCommon.swig
===================================================================
--- rl/trunk/engine/script/swig/RlCommon.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlCommon.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,175 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Perl Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Perl Artistic License for more details.
+ *
+ *  You should have received a copy of the Perl Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.perldoc.com/perl5.6/Artistic.html.
+ */
+
+namespace Ogre {
+
+template<class T> class SharedPtr {
+ public:
+    SharedPtr();
+    SharedPtr(T* rep);
+    SharedPtr(const SharedPtr& r);
+    virtual ~SharedPtr(); 
+    T* get() const;
+};
+
+}
+
+namespace rl {
+
+class GameTask
+{
+    public:
+        GameTask();
+        virtual ~GameTask( ) {};
+        bool isPaused() const;
+        void setPaused( bool isPaused );
+		virtual void run(float) = 0;
+};
+
+
+template <typename Event> class EventListener {
+public:
+    /// Der Konstruktor.
+	EventListener();
+    /// Der Destruktor.
+	virtual ~EventListener();
+    /* Hier wird das Objekt benachrichtigt.
+	 *
+	 * @return bool consumed Wurde der Event aufgebracht (defunct)
+	 */
+    virtual bool eventRaised(Event *anEvent) = 0;
+};
+
+template <typename Event> class EventCaster {
+public:
+    typedef rl::EventListener<Event> ListenerToEvent;
+    typedef std::set<rl::ListenerToEvent*> EventSet;
+    typedef typename EventSet::iterator EventSetIterator;
+
+    /// Der Konstruktor
+	EventCaster();
+    /// Der Destruktor
+    virtual ~EventCaster();
+    /// Fuege einen EventListener hinzu.
+    void addEventListener(rl::EventListener<Event> *newListener);
+    /// Loesche einen EventListener.
+    void removeEventListener(rl::EventListener<Event> *aListener);
+    /// Loescht alle EventListener.
+    void removeEventListeners();
+    /// Gibt es diesen Listener bereits?
+    bool containsListener(rl::EventListener<Event> *aListener) const;
+    /// Sind Listener vorhanden?
+    bool hasEventListeners() const;
+    /// Ein Ereignis verteilen.
+    void dispatchEvent(Event *anEvent);
+    /// EventSet
+    EventSet getEventSet() const;
+
+};
+
+class EventObject {
+public:
+    /// Der Konstruktor.
+	EventObject(rl::EventSource *source);
+	/// Der Konstruktor.
+	EventObject(rl::EventSource *source, const unsigned int reason );
+    /// Der Destruktor.
+	virtual ~EventObject();
+   
+   /// Die Ereignisquelle zurueckgeben
+   rl::EventSource *getSource() const;
+   /// Die ID des Grundes f?r den Event.
+   const unsigned int getReason() const;
+   /// Die ID setzen
+   void setReason(const unsigned int reason);
+};
+
+%template(EventObjectEventCaster) EventCaster<rl::EventObject>;
+class PlaylistObject : public rl::EventCaster<rl::EventObject>
+{
+public:
+	/// Konstruktor
+	PlaylistObject();
+	/// Destruktor
+	~PlaylistObject();
+	/// Objekt laden, einrichten etc.
+	virtual void load() = 0;
+	/// Objekt entladen, abbauen etc.
+	virtual void unload() = 0;
+	/// Objektaktion starten
+	virtual void start() = 0;
+	/// Objectaktion stoppen
+	virtual void stop() = 0;
+	/// Objektaktion pausieren
+	virtual void pause() = 0;
+};
+
+class PlaylistEvent : public rl::EventObject
+{
+};
+
+%template(EventObjectEventListener) EventListener<rl::PlaylistEvent>;
+class Playlist : public rl::EventListener<rl::PlaylistEvent>
+{
+public:
+	Playlist();
+	virtual ~Playlist();
+    virtual void start() = 0;
+    virtual void stop() = 0;
+};
+
+class SimplePlaylist : public rl::Playlist
+{
+public:
+	SimplePlaylist();
+	virtual ~SimplePlaylist();
+    virtual void add(rl::PlaylistObject *object);
+    virtual void remove(rl::PlaylistObject *object);
+    virtual void start();
+    virtual void stop();
+    void setLooping(bool looping);
+    bool isLooping() const;
+    virtual bool eventRaised(rl::PlaylistEvent *eventRaised);
+};
+
+class rl::LinkItem;
+typedef std::list<rl::LinkItem*> LinkedList;
+class LinkItem {
+public:
+	LinkItem(rl::PlaylistObject *item);
+	virtual ~LinkItem();
+	rl::PlaylistObject* getItem() const;
+	void start();
+	void stop();
+	void add(rl::PlaylistObject *child);
+	void remove(rl::PlaylistObject *child);
+};
+
+
+class LinkedPlaylist : public rl::Playlist
+{
+public:
+	LinkedPlaylist();
+	virtual ~LinkedPlaylist();
+    void add(rl::PlaylistObject *object, LinkItem *parent);
+	void remove(rl::PlaylistObject *object, LinkItem *parent);
+    virtual void stop();
+	virtual void start();
+	LinkItem* getList() const;
+};
+
+}
+


Property changes on: rl/trunk/engine/script/swig/RlCommon.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlCore.head.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCore.head.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlCore.head.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,61 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%{
-//----------- Includes - Core -----------
-#include "FixRubyHeaders.h"
-#include "CorePrerequisites.h"
-#include "ActorManager.h"
-#include "Actor.h"
-#include "MeshObject.h"
-#include "SoundObject.h"
-#include "SoundManager.h"
-#include "ListenerObject.h"
-#include "ListenerMovable.h"
-#include "CameraObject.h"
-#include "LightObject.h"
-#include "ParticleSystemObject.h"
-#include "CoreSubsystem.h"
-#include "PhysicalThing.h"
-#include "PhysicsManager.h"
-#include "PhysicsContactListener.h"
-#include "DebugVisualsManager.h"
-#include "GameEventManager.h"
-#include "GameAreaEventSource.h"
-#include "GameAreaListener.h"
-#include "GameAreaEvent.h"
-#include "GameAreaTypes.h"
-#include "AnimationManager.h"
-#include "AnimationListener.h"
-#include "BaseAnimation.h"
-#include "MeshAnimation.h"
-#include "FadeAnimation.h"
-#include "TrackAnimation.h"
-#include "GameLoop.h"
-#include "World.h"
-#include "ContentModule.h"
-#include "ListenerObject.h"
-#include "Sound.h"
-#include "SoundEvents.h"
-#include "JobScheduler.h"
-#include "Job.h"
-#include "JobListener.h"
-#include "PlaySoundJob.h"
-#include "PlayAnimationJob.h"
-#undef message
-#undef send
-%}
-

Added: rl/trunk/engine/script/swig/RlCore.head.swig
===================================================================
--- rl/trunk/engine/script/swig/RlCore.head.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlCore.head.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,61 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%{
+//----------- Includes - Core -----------
+#include "FixRubyHeaders.h"
+#include "CorePrerequisites.h"
+#include "ActorManager.h"
+#include "Actor.h"
+#include "MeshObject.h"
+#include "SoundObject.h"
+#include "SoundManager.h"
+#include "ListenerObject.h"
+#include "ListenerMovable.h"
+#include "CameraObject.h"
+#include "LightObject.h"
+#include "ParticleSystemObject.h"
+#include "CoreSubsystem.h"
+#include "PhysicalThing.h"
+#include "PhysicsManager.h"
+#include "PhysicsContactListener.h"
+#include "DebugVisualsManager.h"
+#include "GameEventManager.h"
+#include "GameAreaEventSource.h"
+#include "GameAreaListener.h"
+#include "GameAreaEvent.h"
+#include "GameAreaTypes.h"
+#include "AnimationManager.h"
+#include "AnimationListener.h"
+#include "BaseAnimation.h"
+#include "MeshAnimation.h"
+#include "FadeAnimation.h"
+#include "TrackAnimation.h"
+#include "GameLoop.h"
+#include "World.h"
+#include "ContentModule.h"
+#include "ListenerObject.h"
+#include "Sound.h"
+#include "SoundEvents.h"
+#include "JobScheduler.h"
+#include "Job.h"
+#include "JobListener.h"
+#include "PlaySoundJob.h"
+#include "PlayAnimationJob.h"
+#undef message
+#undef send
+%}
+


Property changes on: rl/trunk/engine/script/swig/RlCore.head.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlCore.inc
===================================================================
--- rl/trunk/engine/script/swig/RlCore.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlCore.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,759 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-namespace rl {
-%{
-static swig_type_info *GameAreaType_dynamic_cast(void **ptr) {
-    rl::GameAreaType **ppGameAreaType = reinterpret_cast<rl::GameAreaType **>(ptr);
-    
-    rl::GameSphereAreaType *pGameSphereAreaType = dynamic_cast<rl::GameSphereAreaType*>(*ppGameAreaType);
-    if(pGameSphereAreaType){
-      *ptr=reinterpret_cast<void*>(pGameSphereAreaType);
-      return SWIGTYPE_p_rl__GameSphereAreaType;
-    }    
-    
-    return 0;
-}
-%}
-DYNAMIC_CAST(SWIGTYPE_p_rl__GameAreaType, GameAreaType_dynamic_cast);
-
-
-
-%{
-static swig_type_info *BaseAnimation_dynamic_cast(void **ptr) {
-    rl::BaseAnimation **ppBaseAnimation = reinterpret_cast<rl::BaseAnimation **>(ptr);
-    
-    rl::FadeAnimation *pFadeAnimation = dynamic_cast<rl::FadeAnimation*>(*ppBaseAnimation);
-    if(pFadeAnimation){
-      *ptr=reinterpret_cast<void*>(pFadeAnimation);
-      return SWIGTYPE_p_rl__FadeAnimation;
-    }    
-    rl::MeshAnimation *pMeshAnimation = dynamic_cast<rl::MeshAnimation*>(*ppBaseAnimation);
-    if(pMeshAnimation){
-      *ptr=reinterpret_cast<void*>(pMeshAnimation);
-      return SWIGTYPE_p_rl__MeshAnimation;
-    }    
-    rl::TrackAnimation *pTrackAnimation = dynamic_cast<rl::TrackAnimation*>(*ppBaseAnimation);
-    if(pTrackAnimation){
-      *ptr=reinterpret_cast<void*>(pTrackAnimation);
-      return SWIGTYPE_p_rl__TrackAnimation;
-    }  
-    
-    return 0;
-}
-%}
-DYNAMIC_CAST(SWIGTYPE_p_rl__BaseAnimation, BaseAnimation_dynamic_cast);
-
-
-%{
-static swig_type_info *ActorControlledObject_dynamic_cast(void **ptr)
-{
-    rl::ActorControlledObject **ppActorControlledObject =
-        reinterpret_cast<rl::ActorControlledObject**>(ptr);
-
-    rl::MeshObject *pMeshObject=dynamic_cast<rl::MeshObject*>(*ppActorControlledObject);
-    if (pMeshObject) {
-        *ptr=reinterpret_cast<void*>(pMeshObject);
-        return SWIGTYPE_p_rl__MeshObject;
-    }
-    rl::CameraObject *pCameraObject=dynamic_cast<rl::CameraObject*>(*ppActorControlledObject);
-    if (pCameraObject) {
-        *ptr=reinterpret_cast<void*>(pCameraObject);
-        return SWIGTYPE_p_rl__CameraObject;
-    }
-    rl::LightObject *pLightObject=dynamic_cast<rl::LightObject*>(*ppActorControlledObject);
-    if (pLightObject) {
-        *ptr=reinterpret_cast<void*>(pLightObject);
-        return SWIGTYPE_p_rl__LightObject;
-    }
-    rl::ParticleSystemObject *pParticleSystemObject=dynamic_cast<rl::ParticleSystemObject*>(*ppActorControlledObject);
-    if (pParticleSystemObject) {
-        *ptr=reinterpret_cast<void*>(pParticleSystemObject);
-        return SWIGTYPE_p_rl__ParticleSystemObject;
-    }
-    rl::SoundObject *pSoundObject=dynamic_cast<rl::SoundObject*>(*ppActorControlledObject);
-    if (pSoundObject) {
-        *ptr=reinterpret_cast<void*>(pSoundObject);
-        return SWIGTYPE_p_rl__SoundObject;
-    }
-    return 0;
-}
-%}
-DYNAMIC_CAST(SWIGTYPE_p_rl__ActorControlledObject, ActorControlledObject_dynamic_cast);
-
-
-class ActorManager {
-private:
-	ActorManager();
-public:
-	static ActorManager& getSingleton(void);
-
-	rl::Actor* createParticleSystemActor(const Ogre::String& name, const Ogre::String& soundfile);
-    rl::Actor* createSoundStreamActor(const Ogre::String& name, const Ogre::String& soundfile);
-    rl::Actor* createSoundSampleActor(const Ogre::String& name, const Ogre::String& soundfile);
-    rl::Actor* createEmptyActor(const Ogre::String& name);
-    rl::Actor* createLightActor(const Ogre::String& name, rl::LightObject::LightTypes type );
-	rl::Actor* createMeshActor(const Ogre::String& name, const Ogre::String& meshname,
-		    rl::PhysicsManager::GeometryType geom = rl::PhysicsManager::GT_NONE,
-		    Ogre::Real density=1.0);
-	rl::Actor* createBoxPrimitiveActor(const Ogre::String& name,
-            const Ogre::Vector3& minCorner, const Ogre::Vector3& maxCorner,
-            const Ogre::String& materialName = "", Ogre::Real mass = 0.0);
-		    
-	//void createDebugActors();
-	    
-	rl::Actor* getActor(const Ogre::String& name);
-	void destroyActor(rl::Actor* actor);
-    void destroyAllActors();
-};
-
-class World {
-public:	
-	enum FogMode { FOG_NONE, FOG_EXP, FOG_EXP2, FOG_LINEAR  };
-
-	void loadScene(const Ogre::String& levelName, const Ogre::String& resourceGroup ) = 0;
-
-    virtual void setSkyBox (bool enable, const Ogre::String& materialName, Ogre::Real distance=2500, bool drawFirst=true );
-    virtual void setSkyDome (bool enable, const Ogre::String& materialName, Ogre::Real curvature=10, Ogre::Real tiling=8, Ogre::Real distance=4000, bool drawFirst=true );
-    virtual void setFog ( FogMode mode=FOG_NONE, const Ogre::ColourValue &colour=Ogre::ColourValue::White, Ogre::Real expDensity=0.001, Ogre::Real linearStart=0.0, Ogre::Real linearEnd=1.0);
-    virtual FogMode getFogMode (void) const;
-    virtual const Ogre::ColourValue & getFogColour (void) const;
-    virtual Ogre::Real getFogStart (void) const;
-    virtual Ogre::Real getFogEnd (void) const;	
-    virtual void setAmbientLight(Ogre::Real r, Ogre::Real g, Ogre::Real b);
-    virtual Ogre::Vector3 getStartPoint() const;
-    virtual void setCastShadows(bool);
-
-    void setShowBoundingBoxes( bool dis );
-};
-
-/// Alles was mit AreaKrams zu tun hat
-%apply SWIGTYPE *DYNAMIC { GameAreaType * };
-
-%feature("director") GameAreaListener; 
-class GameAreaListener
-{
-public:
-	virtual ~GameAreaListener();
-    virtual void areaLeft(rl::GameAreaEvent *anEvent) const = 0;
-    virtual void areaEntered(rl::GameAreaEvent *anEvent) const = 0;
-};
-
-class GameAreaType
-{
-private:
-	GameAreaType();
-public:
-	unsigned long getQueryMask() const;
-    void setQueryMask( unsigned long mask );
-    void addQueryFlag( unsigned long flag  );
-    void removeQueryFlag( unsigned long flag );
-    const Ogre::Vector3& getQueryPosition() const;
-};
-
-class GameSphereAreaType : public GameAreaType
-{
-private:
-	GameSphereAreaType( Ogre::Vector3, Ogre::Real, unsigned long mask = 0xFFFFFFFF );
-public:
-};
-
-class GameAreaEventSource
-{
-private: 
-	GameAreaEventSource( rl::GameAreaType* areaType, rl::Actor* act );
-public:   
-    void addAreaListener( rl::GameAreaListener*  list );
-    void removeAreaListener( rl::GameAreaListener* list );
-    bool hasListeners( ) const;
-
-    rl::GameAreaType* getGameAreaType() const;
-    // const ActorMap& getInsideAreaList() const;
-    rl::Actor* getActor() const;
-};
-
-class GameAreaEvent
-{
-private:
-	GameAreaEvent( rl::GameAreaEventSource* src, const unsigned int reason );
-public:
-    rl::Actor* getProvokingActor() const;
-    rl::GameAreaEventSource* getSource() const;
-};
-
-class GameEventManager
-{
-private:
-    GameEventManager( );
-public:
-    void addSphereAreaListener( rl::Actor* actor, Ogre::Real radius, 
-		rl::GameAreaListener* list, unsigned long queryMask = 0xFFFFFFFF );
-    void removeAreaListener( rl::GameAreaListener* list );
-    void removeAllAreas( rl::Actor* actor );
-
-    static rl::GameEventManager & getSingleton(void);
-};
-
-/// Alles was mit Animationen zu tun hat
-%apply SWIGTYPE *DYNAMIC { BaseAnimation * };
-
-%feature("director") AnimationListener; 
-class AnimationListener
-{
-public:
-	virtual ~AnimationListener();
-
-	virtual void animationFinished(rl::AnimationEvent *anEvent) const = 0;
-	virtual void animationPaused(rl::AnimationEvent *anEvent) const = 0;
-	virtual void animationUnpaused(rl::AnimationEvent *anEvent) const = 0;
-};
-
-%feature("director") AnimationFrameListener; 
-class AnimationFrameListener
-{
-public:
-	virtual ~AnimationFrameListener();
-
-	virtual void animationFrameReached( rl::AnimationFrameEvent *anEvent ) const = 0;
-};
-
-class AnimationEvent
-{
-public:
-	rl::BaseAnimation* getAnimation() const;
-private:
-	AnimationEvent( rl::BaseAnimation* anim,  const unsigned int reason );
-};
-
-class AnimationFrameEvent
-{
-public:
-	rl::BaseAnimation* getAnimation() const;
-	Ogre::Real getFrameNumber() const;
-private:
-	AnimationFrameEvent( rl::BaseAnimation* anim,  const unsigned int reason, Ogre::Real frameNumber );
-};
-
-
-class BaseAnimation {
-public:
-	bool isPaused() const;
-    void setPaused( bool isPaused );
-
-	bool isIgnoringGlobalSpeed() const;
-	void setIgnoringGlobalSpeed( bool isIgnoringGlobalSpeed );
-
-	Ogre::Real getSpeed() const;
-	void setSpeed( Ogre::Real speed );
-	void reverseAnimation();
-
-	void setTimesToPlay(unsigned int timesToPlay);
-	unsigned int getTimesPlayed() const;
-	void resetTimesPlayed();
-	unsigned int getTimesToPlay() const;
-	unsigned int getTimesToPlayLeft() const;
-	Ogre::Real getTimePlayed() const;
-
-	Ogre::Real getDelay(void) const;
-    void setDelay(Ogre::Real delay);
-    
-    void addAnimationListener( rl::AnimationListener *listener);
-	void removeAnimationListener( rl::AnimationListener *listener);
-	
-	void addAnimationFrameListener( rl::AnimationFrameListener *listener, 
-									float frameNumber );
-	void removeAnimationFrameListener( rl::AnimationFrameListener *listener );
-	void removeAnimationFrameListener( rl::AnimationFrameListener *listener, Ogre::Real frameNumber );
-private:
-	BaseAnimation(  );
-};
-
-class FadeAnimation : public BaseAnimation {
-private:
-	FadeAnimation(  ); 
-public:
-	bool isDeleteOnFinish() const;
-	void setDeleteOnFinish( bool deleteOnFinish );
-};
-
-class MeshAnimation : public BaseAnimation {
-public:
-    rl::MeshObject* getMeshObject( );
-    
-	Ogre::Real getWeight(void) const;
-    void setWeight(Ogre::Real weight);
-private:
-	MeshAnimation(  ); 
-};
-
-class TrackAnimation : public BaseAnimation {
-public:
-	void addKeyFrame( Ogre::Real timePos );
-    void setKeyFrameTranslation( Ogre::Real timePos, Ogre::Real xPos, Ogre::Real yPos, Ogre::Real zPos );
-    void setKeyFrameRotation( Ogre::Real timePos, Ogre::Real xRotAxis, Ogre::Real yRotAxis, Ogre::Real zRotAxis, Ogre::Real angleUnits );
-    void setKeyFrameRotationQuaternion( Ogre::Real timePos, Ogre::Real w, Ogre::Real x, Ogre::Real y, Ogre::Real z );
-    void setKeyFrameScale( Ogre::Real timePos, Ogre::Real xScale, Ogre::Real yScale, Ogre::Real zScale );
-
-	void setInterpolationMode( rl::AnimationManager::InterpolationMode im );
-	rl::AnimationManager::InterpolationMode getInterpolationMode() const;
-
-	void setRotationInterpolationMode( rl::AnimationManager::RotationInterpolationMode im );
-	rl::AnimationManager::RotationInterpolationMode getRotationInterpolationMode() const;
-
-	void setUseShortestRotationPath ( bool useShortestPath );
-	bool getUseShortestRotationPath () const;
-private:
-	TrackAnimation(  ); 
-};
-
-class AnimationManager {
-private:
-	AnimationManager();
-public:
-	static AnimationManager& getSingleton(void);
-	
-	enum InterpolationMode { IM_LINEAR, IM_SPLINE };
-	enum RotationInterpolationMode { RIM_LINEAR, RIM_SPHERICAL };
-	
-	rl::TrackAnimation* createTrackAnimation(rl::Actor* actor, const Ogre::String& name, Ogre::Real length );
-	void removeAnimation( rl::MeshAnimation* anim );
-    void removeAnimation( rl::TrackAnimation* anim );
-    void removeAnimation( rl::FadeAnimation* anim );
-	void removeTrackAnimation( rl::Actor* act, const Ogre::String& name );
-	void removeAllTrackAnimations( rl::Actor* act );
-	
-	void setGlobalAnimationSpeed( Ogre::Real speed );
-	Ogre::Real getGlobalAnimationSpeed( ) const;
-
-    rl::FadeAnimation* fadeAnimation( rl::MeshAnimation* from, rl::MeshAnimation* to, Ogre::Real time );
-    rl::FadeAnimation* fadeAnimation( rl::MeshAnimation* fromLoop, rl::MeshAnimation* blendAnim, 
-        rl::MeshAnimation* toLoop, Ogre::Real loopDuration = 0.0);
-	
-	void setDefaultInterpolationMode( rl::AnimationManager::InterpolationMode im );
-	rl::AnimationManager::InterpolationMode getDefaultInterpolationMode() const;
-
-	void setDefaultRotationInterpolationMode( rl::AnimationManager::RotationInterpolationMode rim );
-	rl::AnimationManager::RotationInterpolationMode getDefaultRotationInterpolationMode() const;
-};
-
-%apply SWIGTYPE *DYNAMIC { ActorControlledObject * };
-class ActorControlledObject {
-private:
-    ActorControlledObject();
-public:
-    rl::Actor* getActor();
-};
-
-class PhysicalObject : public ActorControlledObject
-{
-};
-
-class MeshObject : public PhysicalObject
-{
-private:
-    MeshObject(const Ogre::String& name, const Ogre::String& meshname);
-public:
-    
-    /// Groesse der Boundingbox
-    Ogre::AxisAlignedBox getDefaultSize() const;
-        
-	rl::BaseAnimation* getAnimation(const Ogre::String& animName);
-	rl::BaseAnimation* replaceAnimation(const Ogre::String& oldAnimName, 
-	    const Ogre::String& newAnimName, float speed=1.0, unsigned int timesToPlay=0);
-	rl::BaseAnimation* startAnimation(const Ogre::String& animName, 
-		float speed=1.0, unsigned int timesToPlay=0);
-    void stopAnimation(const Ogre::String&);
-    void stopAllAnimations();
-    
-    void setCastShadows (bool enabled);
-    bool getCastShadows (void) const;    
-};
-
-class LightObject : public ActorControlledObject
-{
-private:
-    LightObject(const Ogre::String& name, rl::LightObject::LightTypes type);
-public:
-	enum LightTypes { LT_POINT, LT_DIRECTIONAL, LT_SPOTLIGHT };
-
-    void setAttenuation(float range, float constant,
-        float linear, float quadric);
-    void setDiffuseColour(float red, float green, float blue);
-    void setDirection(float x, float y, float z);
-    void setSpecularColour(float red, float green, float blue);
-    void setSpotlightRange(float innerangle, float outerangle,
-        float falloff);
-    void setCastShadows( bool cast );
-};
-
-
-class SoundObject : public ActorControlledObject
-{
-public:
-	void play( );
-
-	void load();
-	void unload();
-	bool is3d() const;
-	void set3d( bool is3d );
-
-    /// Gibt zur?ck ob der Sound geloopt werden soll 
-    bool isLooping() const;
-    /// Setzt ob der Sound geloopt werden soll 
-    void setLooping( bool looping );
-    /// Pausiert den Sound.
-    void pause(bool pausing);
-    /// Ist der Sound pausiert?
-    bool isPaused();
-    /// Stoppt den Sound.
-    void stop();
-	/// Setzt die Lautstaerke (1.0 = volle Lautst?rke)
-	void setVolume(float volume = 1.0);
-	
-	rl::Sound* getSound();
-};
-
-class ParticleSystemObject : public ActorControlledObject
-{
-public:
-     void setActive(bool active);
-private:
-	 ParticleSystemObject(const Ogre::String& name, const Ogre::String& partSys );
-};
-
-class CameraObject : public PhysicalObject
-{
-private:
-    CameraObject(const Ogre::String& name);
-public:
-};
-
-class Actor {
-private:
-	Actor(const Ogre::String& name);
-public:	
-	static const Ogre::String DEFAULT_SLOT_NAME;
-
-    enum QueryGroupFlags
-    {
-        QGF_NONE = 0,
-        QGF_DEFAULT = 1,
-        QGF_PLAYER = 2,
-        QGF_ALL = 0xFFFFFFFF
-    };
-
-	const const Ogre::String& getName() const;
-	const Ogre::Vector3& getPosition(void);
-	const Ogre::Quaternion& getOrientation(void);
-	const Ogre::Vector3& getWorldPosition(void);
-	const Ogre::Quaternion& getWorldOrientation(void);
-
-    void setPosition(Ogre::Real x, Ogre::Real y, Ogre::Real z);
-    void setPosition( const Ogre::Vector3& );
-    void setOrientation( const Ogre::Quaternion& );
-    
-    rl::ActorControlledObject* getControlledObject();
-    Ogre::UserDefinedObject* getGameObject() const;
-    rl::PhysicalThing* getPhysicalThing() const;
-
-    void setScale( Ogre::Real sx, Ogre::Real sy, Ogre::Real sz );
-    void placeIntoScene(
-            const Ogre::Vector3& position = Ogre::Vector3::ZERO,
-            const Ogre::Quaternion& orientation = Ogre::Quaternion::IDENTITY,
-            const Ogre::String& physicsBone = "");  
-    void placeIntoScene(
-        Ogre::Real px, Ogre::Real py, Ogre::Real pz,
-        Ogre::Real ow, Ogre::Real ox, Ogre::Real oy, Ogre::Real oz, 
-        const Ogre::String& physicsBone = "");
-    void removeFromScene();
-           
-    void attach( 
-            Actor* actor,
-            const Ogre::String& childSlot = "SLOT_DEFAULT",
-            const Ogre::Vector3& offsetPosition=Ogre::Vector3::ZERO,
-            const Ogre::Quaternion& offsetOrientation=Ogre::Quaternion::IDENTITY
-            );
-   	void attachAxisRot( 
-            rl::Actor* actor,
-            const Ogre::String& childSlot = "SLOT_DEFAULT",            
-            const Ogre::Vector3& offsetPosition=Ogre::Vector3::ZERO,
-            const Ogre::Vector3& offsetAxis=Ogre::Vector3::UNIT_X,
-            const Ogre::Radian& offsetRotation=Ogre::Radian(0) );
-    void attachToSlot( 
-            Actor* actor,
-            const Ogre::String& slot,
-            const Ogre::String& childSlot = "SLOT_DEFAULT",
-            const Ogre::Vector3& offsetPosition=Ogre::Vector3::ZERO,
-			const Ogre::Quaternion& offsetOrientation=Ogre::Quaternion::IDENTITY
-			);
-    void attachToSlotAxisRot( 
-            rl::Actor* actor,
-            const Ogre::String& slot,
-            const Ogre::String& childSlot = "SLOT_DEFAULT",            
-			const Ogre::Vector3& offsetPosition=Ogre::Vector3::ZERO,
-            const Ogre::Vector3& offsetAxis=Ogre::Vector3::UNIT_X,
-            const Ogre::Radian& offsetRotation=Ogre::Radian(0) );
-                    
-    void detach(rl::Actor* actor);
-    
-    rl::Actor* getChildByName(const Ogre::String& name ) const;
-    
-    void setVisible( bool vis, bool cascade = true );
-	bool isVisible() const;
-       
-	void roll(Ogre::Real angleunits);
-	void pitch(Ogre::Real angleunits);
-	void yaw(Ogre::Real angleunits);
-	
-	unsigned long getQueryMask() const;
-    void setQueryMask( unsigned long mask = 0xFFFFFFFF );
-    void addQueryFlag( unsigned long flag  );
-    void removeQueryFlag( unsigned long flag );
-    void setListenerOf (Ogre::SceneNode *node);
-    Ogre::Bone *_getBone() const;
-    Ogre::SceneNode* _getSceneNode() const;
-    
-};
-
-%feature("director") PhysicsContactListener; 
-class PhysicsContactListener
-{
-public:
-    PhysicsContactListener();
-    virtual ~PhysicsContactListener();
-    
-    virtual void contactOccured(rl::Actor* actor1, rl::Actor* actor2) = 0;
-};
-
-class PhysicalThing
-{
-public:
-    PhysicalThing(
-			rl::PhysicsManager::GeometryType geomType,
-			rl::PhysicalObject* po, 
-			Ogre::Real mass, 
-			bool hullModifier = false);
-
-    void setPosition(Ogre::Real x, Ogre::Real y, Ogre::Real z);
-    void setOrientation(Ogre::Real w, Ogre::Real x, Ogre::Real y, Ogre::Real z);
-    
-    void setVelocity(const Ogre::Vector3& vel);
-
-    // Sets the vector, that will always point up.
-    void setUpConstraint(const Ogre::Vector3& upVector = Ogre::Vector3::UNIT_Y);
-    Ogre::Vector3 getUpConstraint() const;
-    void clearUpConstraint();
-
-    rl::Actor* getActor() const;
-
-    void addForce(const Ogre::Vector3& force);
-
-    void freeze();
-    void unfreeze();
-        
-    void setGravityOverride(bool override,
-        Ogre::Real x = 0.0f, Ogre::Real y = 0.0f, Ogre::Real z = 0.0f);
-        
-    Ogre::Real getMass() const;
-    void setMass(Ogre::Real mass);
-    
-    void updateCollisionHull();
-
-    void setContactListener(rl::PhysicsContactListener* listener);
-    rl::PhysicsContactListener* getContactListener() const;
-
-    void fitToPose(const Ogre::String& name);
-
-};
-
-class PhysicsManager
-{
-public:
-
-    enum GeometryType {
-        GT_NONE = -1,
-        GT_BOX = 0,
-        GT_SPHERE = 1,
-        GT_CAPSULE = 2,
-        GT_MESH = 3,
-        GT_ELLIPSOID = 4,
-        GT_CONVEXHULL = 5
-    };
-    
-    PhysicsManager();
-	static PhysicsManager& getSingleton(void);
-    
-    rl::PhysicalThing* createPhysicalThing(rl::PhysicsManager::GeometryType geomType, rl::PhysicalObject* po,
-		Ogre::Real mass);
-
-    void removeAndDestroyPhysicalThing(PhysicalThing* thing);
-
-    // Global Settings
-    void setGravity(Ogre::Real x, Ogre::Real y, Ogre::Real z);
-    Ogre::Vector3 getGravity() const;
-
-    bool isEnabled() const;
-    void setEnabled(bool enabled);
-	
-	void toggleDebugMode();
-    bool isDebugMode() const;
-};
-
-class DebugVisualsManager
-{
-public:
-    DebugVisualsManager();
-    static DebugVisualsManager& getSingleton(void);
-
-    void show(unsigned long flags);
-    void hide(unsigned long flags);
-    void showAll();
-    void hideAll();
-    void toggleAll();
-};
-    
-%feature("director") ContentModule; 
-class ContentModule
-{
-public:
-	ContentModule(
-		const Ogre::String& id, 
-		const rl::CeGuiString& name, 
-		bool common, 
-		long minimumEngineVersion);
-		
-	virtual ~ContentModule();
-		
-	virtual const Ogre::StringVector& getDependencies() const = 0;
-	virtual const Ogre::StringVector& getTextureLocations() const = 0;
-	virtual const Ogre::StringVector& getSoundLocations() const = 0;
-	virtual const Ogre::StringVector& getModelLocations() const = 0;
-
-	virtual void start() = 0;
-};
-
-class CoreSubsystem {
-private:
-	CoreSubsystem();
-public:
-    static CoreSubsystem& getSingleton(void);
-    
-    void loadMap(const Ogre::String& type, const Ogre::String& filename,
-		const Ogre::String& resourceGroup, const Ogre::String& startupScript = "");
-	void registerModule(ContentModule* module);
-    World* getWorld();
-    unsigned long getClock();
-    void makeScreenshot(const Ogre::String& sName);
-    bool isInitialized() const;
-    void setScheme(const Ogre::String& schemeName);
-};
-
-class Sound 
-{
-private:
-	Sound(const SoundResourcePtr& res);
-public:
-	virtual ~Sound();
-    
-    /// Name zur?ckgeben
-    const Ogre::String& getName() const;
-
-    /// Gibt die eingestellte Position der Soundquelle zurueck
-    const Ogre::Vector3 getPosition() const;
-    /// Setzt die Position der Soundquelle.
-    void setPosition(const Ogre::Vector3& direction);
-    /// Gibt die eingestellte relative Lautstaerke der Soundquelle zurueck
-    const Ogre::Real getVolume() const; 
-    /// Setzt die relative Lautstaerke der Soundquelle.
-    void setVolume(const Ogre::Real gain);
-    /// Gibt die Richtung der Soundquelle zurueck.
-    const Ogre::Quaternion getDirection() const;
-    /// Gibt die Geschwindigkeit der Soundquelle zurueck.
-    const Ogre::Vector3 getVelocity() const;
-    /// Setzt die Richtung der Soundquelle.
-    void setDirection(const Ogre::Quaternion&);
-    /// Setzt die Geschwindigkeit der Soundquelle.
-    void setVelocity(const Ogre::Vector3&);
-    /// Setzt die Entfernung, ab der ein 3D-Sound leiser wird
-	void setRolloffStartDistance(const Ogre::Real dist);
-	const Ogre::Real getRolloffStartDistance() const;
-	/// Setzt die Entfernung, ab der ein 3D-Sound nicht mehr leiser wird
-	void setRolloffEndDistance(const Ogre::Real dist);
-	const Ogre::Real getRolloffEndDistance() const;
-
-    /// Spielt den Sound ab.
-    void play() ;
-    /// Pausiert den Sound.
-    void pause(bool pausing) ;
-    /// Ist der Sound pausiert?
-    bool isPaused() ;
-    /// Stoppt den Sound.
-    void stop() ;
-    /// Laeuft der Sound noch
-    const bool isPlaying() const ;
-
-    /// Gibt zur?ck ob der Sound geloopt werden soll 
-    bool isLooping() const;
-    /// Setzt ob der Sound geloopt werden soll 
-    void setLooping( bool looping );
-    
-    // Sind wir gueltig
-    bool isValid() const;
-};
-
-// define as empty at this time. Must not yet be used from within ruby.
-class Job
-{
-private:
-	Job();
-};
-
-class PlaySound2dJob : public rl::Job
-{
-public:
-
-    PlaySound2dJob(const Ogre::String& sound, Ogre::Real volume=1.0f);
-    virtual ~PlaySound2dJob();
-};
-
-class PlaySound3dJob : public rl::Job
-{
-public:
-
-    PlaySound3dJob(const Ogre::String& sound, const Ogre::Vector3& pos, Ogre::Real volume=1.0f);
-    virtual ~PlaySound3dJob();
-};
-
-class PlayAnimationJob : public Job
-{
-public:
-
-    PlayAnimationJob(Actor* actor, const Ogre::String& anim, bool doLoop=false,
-		bool replaceAllAnims=true);
-    virtual ~PlayAnimationJob();
-};
-
-class JobScheduler
-{
-public:
-    typedef enum {JP_LOW = 10, JP_NORMAL = 20, JP_HIGH = 30} JobPriority;
-	static JobScheduler& getSingleton(void);
-    unsigned long addJob(rl::Job* job,
-		rl::JobScheduler::JobPriority priority = JobScheduler::JP_NORMAL,
-		Ogre::Real delay=0.0f);
-};
-
-}

Added: rl/trunk/engine/script/swig/RlCore.swig
===================================================================
--- rl/trunk/engine/script/swig/RlCore.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlCore.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,759 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+namespace rl {
+%{
+static swig_type_info *GameAreaType_dynamic_cast(void **ptr) {
+    rl::GameAreaType **ppGameAreaType = reinterpret_cast<rl::GameAreaType **>(ptr);
+    
+    rl::GameSphereAreaType *pGameSphereAreaType = dynamic_cast<rl::GameSphereAreaType*>(*ppGameAreaType);
+    if(pGameSphereAreaType){
+      *ptr=reinterpret_cast<void*>(pGameSphereAreaType);
+      return SWIGTYPE_p_rl__GameSphereAreaType;
+    }    
+    
+    return 0;
+}
+%}
+DYNAMIC_CAST(SWIGTYPE_p_rl__GameAreaType, GameAreaType_dynamic_cast);
+
+
+
+%{
+static swig_type_info *BaseAnimation_dynamic_cast(void **ptr) {
+    rl::BaseAnimation **ppBaseAnimation = reinterpret_cast<rl::BaseAnimation **>(ptr);
+    
+    rl::FadeAnimation *pFadeAnimation = dynamic_cast<rl::FadeAnimation*>(*ppBaseAnimation);
+    if(pFadeAnimation){
+      *ptr=reinterpret_cast<void*>(pFadeAnimation);
+      return SWIGTYPE_p_rl__FadeAnimation;
+    }    
+    rl::MeshAnimation *pMeshAnimation = dynamic_cast<rl::MeshAnimation*>(*ppBaseAnimation);
+    if(pMeshAnimation){
+      *ptr=reinterpret_cast<void*>(pMeshAnimation);
+      return SWIGTYPE_p_rl__MeshAnimation;
+    }    
+    rl::TrackAnimation *pTrackAnimation = dynamic_cast<rl::TrackAnimation*>(*ppBaseAnimation);
+    if(pTrackAnimation){
+      *ptr=reinterpret_cast<void*>(pTrackAnimation);
+      return SWIGTYPE_p_rl__TrackAnimation;
+    }  
+    
+    return 0;
+}
+%}
+DYNAMIC_CAST(SWIGTYPE_p_rl__BaseAnimation, BaseAnimation_dynamic_cast);
+
+
+%{
+static swig_type_info *ActorControlledObject_dynamic_cast(void **ptr)
+{
+    rl::ActorControlledObject **ppActorControlledObject =
+        reinterpret_cast<rl::ActorControlledObject**>(ptr);
+
+    rl::MeshObject *pMeshObject=dynamic_cast<rl::MeshObject*>(*ppActorControlledObject);
+    if (pMeshObject) {
+        *ptr=reinterpret_cast<void*>(pMeshObject);
+        return SWIGTYPE_p_rl__MeshObject;
+    }
+    rl::CameraObject *pCameraObject=dynamic_cast<rl::CameraObject*>(*ppActorControlledObject);
+    if (pCameraObject) {
+        *ptr=reinterpret_cast<void*>(pCameraObject);
+        return SWIGTYPE_p_rl__CameraObject;
+    }
+    rl::LightObject *pLightObject=dynamic_cast<rl::LightObject*>(*ppActorControlledObject);
+    if (pLightObject) {
+        *ptr=reinterpret_cast<void*>(pLightObject);
+        return SWIGTYPE_p_rl__LightObject;
+    }
+    rl::ParticleSystemObject *pParticleSystemObject=dynamic_cast<rl::ParticleSystemObject*>(*ppActorControlledObject);
+    if (pParticleSystemObject) {
+        *ptr=reinterpret_cast<void*>(pParticleSystemObject);
+        return SWIGTYPE_p_rl__ParticleSystemObject;
+    }
+    rl::SoundObject *pSoundObject=dynamic_cast<rl::SoundObject*>(*ppActorControlledObject);
+    if (pSoundObject) {
+        *ptr=reinterpret_cast<void*>(pSoundObject);
+        return SWIGTYPE_p_rl__SoundObject;
+    }
+    return 0;
+}
+%}
+DYNAMIC_CAST(SWIGTYPE_p_rl__ActorControlledObject, ActorControlledObject_dynamic_cast);
+
+
+class ActorManager {
+private:
+	ActorManager();
+public:
+	static ActorManager& getSingleton(void);
+
+	rl::Actor* createParticleSystemActor(const Ogre::String& name, const Ogre::String& soundfile);
+    rl::Actor* createSoundStreamActor(const Ogre::String& name, const Ogre::String& soundfile);
+    rl::Actor* createSoundSampleActor(const Ogre::String& name, const Ogre::String& soundfile);
+    rl::Actor* createEmptyActor(const Ogre::String& name);
+    rl::Actor* createLightActor(const Ogre::String& name, rl::LightObject::LightTypes type );
+	rl::Actor* createMeshActor(const Ogre::String& name, const Ogre::String& meshname,
+		    rl::PhysicsManager::GeometryType geom = rl::PhysicsManager::GT_NONE,
+		    Ogre::Real density=1.0);
+	rl::Actor* createBoxPrimitiveActor(const Ogre::String& name,
+            const Ogre::Vector3& minCorner, const Ogre::Vector3& maxCorner,
+            const Ogre::String& materialName = "", Ogre::Real mass = 0.0);
+		    
+	//void createDebugActors();
+	    
+	rl::Actor* getActor(const Ogre::String& name);
+	void destroyActor(rl::Actor* actor);
+    void destroyAllActors();
+};
+
+class World {
+public:	
+	enum FogMode { FOG_NONE, FOG_EXP, FOG_EXP2, FOG_LINEAR  };
+
+	void loadScene(const Ogre::String& levelName, const Ogre::String& resourceGroup ) = 0;
+
+    virtual void setSkyBox (bool enable, const Ogre::String& materialName, Ogre::Real distance=2500, bool drawFirst=true );
+    virtual void setSkyDome (bool enable, const Ogre::String& materialName, Ogre::Real curvature=10, Ogre::Real tiling=8, Ogre::Real distance=4000, bool drawFirst=true );
+    virtual void setFog ( FogMode mode=FOG_NONE, const Ogre::ColourValue &colour=Ogre::ColourValue::White, Ogre::Real expDensity=0.001, Ogre::Real linearStart=0.0, Ogre::Real linearEnd=1.0);
+    virtual FogMode getFogMode (void) const;
+    virtual const Ogre::ColourValue & getFogColour (void) const;
+    virtual Ogre::Real getFogStart (void) const;
+    virtual Ogre::Real getFogEnd (void) const;	
+    virtual void setAmbientLight(Ogre::Real r, Ogre::Real g, Ogre::Real b);
+    virtual Ogre::Vector3 getStartPoint() const;
+    virtual void setCastShadows(bool);
+
+    void setShowBoundingBoxes( bool dis );
+};
+
+/// Alles was mit AreaKrams zu tun hat
+%apply SWIGTYPE *DYNAMIC { GameAreaType * };
+
+%feature("director") GameAreaListener; 
+class GameAreaListener
+{
+public:
+	virtual ~GameAreaListener();
+    virtual void areaLeft(rl::GameAreaEvent *anEvent) const = 0;
+    virtual void areaEntered(rl::GameAreaEvent *anEvent) const = 0;
+};
+
+class GameAreaType
+{
+private:
+	GameAreaType();
+public:
+	unsigned long getQueryMask() const;
+    void setQueryMask( unsigned long mask );
+    void addQueryFlag( unsigned long flag  );
+    void removeQueryFlag( unsigned long flag );
+    const Ogre::Vector3& getQueryPosition() const;
+};
+
+class GameSphereAreaType : public GameAreaType
+{
+private:
+	GameSphereAreaType( Ogre::Vector3, Ogre::Real, unsigned long mask = 0xFFFFFFFF );
+public:
+};
+
+class GameAreaEventSource
+{
+private: 
+	GameAreaEventSource( rl::GameAreaType* areaType, rl::Actor* act );
+public:   
+    void addAreaListener( rl::GameAreaListener*  list );
+    void removeAreaListener( rl::GameAreaListener* list );
+    bool hasListeners( ) const;
+
+    rl::GameAreaType* getGameAreaType() const;
+    // const ActorMap& getInsideAreaList() const;
+    rl::Actor* getActor() const;
+};
+
+class GameAreaEvent
+{
+private:
+	GameAreaEvent( rl::GameAreaEventSource* src, const unsigned int reason );
+public:
+    rl::Actor* getProvokingActor() const;
+    rl::GameAreaEventSource* getSource() const;
+};
+
+class GameEventManager
+{
+private:
+    GameEventManager( );
+public:
+    void addSphereAreaListener( rl::Actor* actor, Ogre::Real radius, 
+		rl::GameAreaListener* list, unsigned long queryMask = 0xFFFFFFFF );
+    void removeAreaListener( rl::GameAreaListener* list );
+    void removeAllAreas( rl::Actor* actor );
+
+    static rl::GameEventManager & getSingleton(void);
+};
+
+/// Alles was mit Animationen zu tun hat
+%apply SWIGTYPE *DYNAMIC { BaseAnimation * };
+
+%feature("director") AnimationListener; 
+class AnimationListener
+{
+public:
+	virtual ~AnimationListener();
+
+	virtual void animationFinished(rl::AnimationEvent *anEvent) const = 0;
+	virtual void animationPaused(rl::AnimationEvent *anEvent) const = 0;
+	virtual void animationUnpaused(rl::AnimationEvent *anEvent) const = 0;
+};
+
+%feature("director") AnimationFrameListener; 
+class AnimationFrameListener
+{
+public:
+	virtual ~AnimationFrameListener();
+
+	virtual void animationFrameReached( rl::AnimationFrameEvent *anEvent ) const = 0;
+};
+
+class AnimationEvent
+{
+public:
+	rl::BaseAnimation* getAnimation() const;
+private:
+	AnimationEvent( rl::BaseAnimation* anim,  const unsigned int reason );
+};
+
+class AnimationFrameEvent
+{
+public:
+	rl::BaseAnimation* getAnimation() const;
+	Ogre::Real getFrameNumber() const;
+private:
+	AnimationFrameEvent( rl::BaseAnimation* anim,  const unsigned int reason, Ogre::Real frameNumber );
+};
+
+
+class BaseAnimation {
+public:
+	bool isPaused() const;
+    void setPaused( bool isPaused );
+
+	bool isIgnoringGlobalSpeed() const;
+	void setIgnoringGlobalSpeed( bool isIgnoringGlobalSpeed );
+
+	Ogre::Real getSpeed() const;
+	void setSpeed( Ogre::Real speed );
+	void reverseAnimation();
+
+	void setTimesToPlay(unsigned int timesToPlay);
+	unsigned int getTimesPlayed() const;
+	void resetTimesPlayed();
+	unsigned int getTimesToPlay() const;
+	unsigned int getTimesToPlayLeft() const;
+	Ogre::Real getTimePlayed() const;
+
+	Ogre::Real getDelay(void) const;
+    void setDelay(Ogre::Real delay);
+    
+    void addAnimationListener( rl::AnimationListener *listener);
+	void removeAnimationListener( rl::AnimationListener *listener);
+	
+	void addAnimationFrameListener( rl::AnimationFrameListener *listener, 
+									float frameNumber );
+	void removeAnimationFrameListener( rl::AnimationFrameListener *listener );
+	void removeAnimationFrameListener( rl::AnimationFrameListener *listener, Ogre::Real frameNumber );
+private:
+	BaseAnimation(  );
+};
+
+class FadeAnimation : public BaseAnimation {
+private:
+	FadeAnimation(  ); 
+public:
+	bool isDeleteOnFinish() const;
+	void setDeleteOnFinish( bool deleteOnFinish );
+};
+
+class MeshAnimation : public BaseAnimation {
+public:
+    rl::MeshObject* getMeshObject( );
+    
+	Ogre::Real getWeight(void) const;
+    void setWeight(Ogre::Real weight);
+private:
+	MeshAnimation(  ); 
+};
+
+class TrackAnimation : public BaseAnimation {
+public:
+	void addKeyFrame( Ogre::Real timePos );
+    void setKeyFrameTranslation( Ogre::Real timePos, Ogre::Real xPos, Ogre::Real yPos, Ogre::Real zPos );
+    void setKeyFrameRotation( Ogre::Real timePos, Ogre::Real xRotAxis, Ogre::Real yRotAxis, Ogre::Real zRotAxis, Ogre::Real angleUnits );
+    void setKeyFrameRotationQuaternion( Ogre::Real timePos, Ogre::Real w, Ogre::Real x, Ogre::Real y, Ogre::Real z );
+    void setKeyFrameScale( Ogre::Real timePos, Ogre::Real xScale, Ogre::Real yScale, Ogre::Real zScale );
+
+	void setInterpolationMode( rl::AnimationManager::InterpolationMode im );
+	rl::AnimationManager::InterpolationMode getInterpolationMode() const;
+
+	void setRotationInterpolationMode( rl::AnimationManager::RotationInterpolationMode im );
+	rl::AnimationManager::RotationInterpolationMode getRotationInterpolationMode() const;
+
+	void setUseShortestRotationPath ( bool useShortestPath );
+	bool getUseShortestRotationPath () const;
+private:
+	TrackAnimation(  ); 
+};
+
+class AnimationManager {
+private:
+	AnimationManager();
+public:
+	static AnimationManager& getSingleton(void);
+	
+	enum InterpolationMode { IM_LINEAR, IM_SPLINE };
+	enum RotationInterpolationMode { RIM_LINEAR, RIM_SPHERICAL };
+	
+	rl::TrackAnimation* createTrackAnimation(rl::Actor* actor, const Ogre::String& name, Ogre::Real length );
+	void removeAnimation( rl::MeshAnimation* anim );
+    void removeAnimation( rl::TrackAnimation* anim );
+    void removeAnimation( rl::FadeAnimation* anim );
+	void removeTrackAnimation( rl::Actor* act, const Ogre::String& name );
+	void removeAllTrackAnimations( rl::Actor* act );
+	
+	void setGlobalAnimationSpeed( Ogre::Real speed );
+	Ogre::Real getGlobalAnimationSpeed( ) const;
+
+    rl::FadeAnimation* fadeAnimation( rl::MeshAnimation* from, rl::MeshAnimation* to, Ogre::Real time );
+    rl::FadeAnimation* fadeAnimation( rl::MeshAnimation* fromLoop, rl::MeshAnimation* blendAnim, 
+        rl::MeshAnimation* toLoop, Ogre::Real loopDuration = 0.0);
+	
+	void setDefaultInterpolationMode( rl::AnimationManager::InterpolationMode im );
+	rl::AnimationManager::InterpolationMode getDefaultInterpolationMode() const;
+
+	void setDefaultRotationInterpolationMode( rl::AnimationManager::RotationInterpolationMode rim );
+	rl::AnimationManager::RotationInterpolationMode getDefaultRotationInterpolationMode() const;
+};
+
+%apply SWIGTYPE *DYNAMIC { ActorControlledObject * };
+class ActorControlledObject {
+private:
+    ActorControlledObject();
+public:
+    rl::Actor* getActor();
+};
+
+class PhysicalObject : public ActorControlledObject
+{
+};
+
+class MeshObject : public PhysicalObject
+{
+private:
+    MeshObject(const Ogre::String& name, const Ogre::String& meshname);
+public:
+    
+    /// Groesse der Boundingbox
+    Ogre::AxisAlignedBox getDefaultSize() const;
+        
+	rl::BaseAnimation* getAnimation(const Ogre::String& animName);
+	rl::BaseAnimation* replaceAnimation(const Ogre::String& oldAnimName, 
+	    const Ogre::String& newAnimName, float speed=1.0, unsigned int timesToPlay=0);
+	rl::BaseAnimation* startAnimation(const Ogre::String& animName, 
+		float speed=1.0, unsigned int timesToPlay=0);
+    void stopAnimation(const Ogre::String&);
+    void stopAllAnimations();
+    
+    void setCastShadows (bool enabled);
+    bool getCastShadows (void) const;    
+};
+
+class LightObject : public ActorControlledObject
+{
+private:
+    LightObject(const Ogre::String& name, rl::LightObject::LightTypes type);
+public:
+	enum LightTypes { LT_POINT, LT_DIRECTIONAL, LT_SPOTLIGHT };
+
+    void setAttenuation(float range, float constant,
+        float linear, float quadric);
+    void setDiffuseColour(float red, float green, float blue);
+    void setDirection(float x, float y, float z);
+    void setSpecularColour(float red, float green, float blue);
+    void setSpotlightRange(float innerangle, float outerangle,
+        float falloff);
+    void setCastShadows( bool cast );
+};
+
+
+class SoundObject : public ActorControlledObject
+{
+public:
+	void play( );
+
+	void load();
+	void unload();
+	bool is3d() const;
+	void set3d( bool is3d );
+
+    /// Gibt zur?ck ob der Sound geloopt werden soll 
+    bool isLooping() const;
+    /// Setzt ob der Sound geloopt werden soll 
+    void setLooping( bool looping );
+    /// Pausiert den Sound.
+    void pause(bool pausing);
+    /// Ist der Sound pausiert?
+    bool isPaused();
+    /// Stoppt den Sound.
+    void stop();
+	/// Setzt die Lautstaerke (1.0 = volle Lautst?rke)
+	void setVolume(float volume = 1.0);
+	
+	rl::Sound* getSound();
+};
+
+class ParticleSystemObject : public ActorControlledObject
+{
+public:
+     void setActive(bool active);
+private:
+	 ParticleSystemObject(const Ogre::String& name, const Ogre::String& partSys );
+};
+
+class CameraObject : public PhysicalObject
+{
+private:
+    CameraObject(const Ogre::String& name);
+public:
+};
+
+class Actor {
+private:
+	Actor(const Ogre::String& name);
+public:	
+	static const Ogre::String DEFAULT_SLOT_NAME;
+
+    enum QueryGroupFlags
+    {
+        QGF_NONE = 0,
+        QGF_DEFAULT = 1,
+        QGF_PLAYER = 2,
+        QGF_ALL = 0xFFFFFFFF
+    };
+
+	const const Ogre::String& getName() const;
+	const Ogre::Vector3& getPosition(void);
+	const Ogre::Quaternion& getOrientation(void);
+	const Ogre::Vector3& getWorldPosition(void);
+	const Ogre::Quaternion& getWorldOrientation(void);
+
+    void setPosition(Ogre::Real x, Ogre::Real y, Ogre::Real z);
+    void setPosition( const Ogre::Vector3& );
+    void setOrientation( const Ogre::Quaternion& );
+    
+    rl::ActorControlledObject* getControlledObject();
+    Ogre::UserDefinedObject* getGameObject() const;
+    rl::PhysicalThing* getPhysicalThing() const;
+
+    void setScale( Ogre::Real sx, Ogre::Real sy, Ogre::Real sz );
+    void placeIntoScene(
+            const Ogre::Vector3& position = Ogre::Vector3::ZERO,
+            const Ogre::Quaternion& orientation = Ogre::Quaternion::IDENTITY,
+            const Ogre::String& physicsBone = "");  
+    void placeIntoScene(
+        Ogre::Real px, Ogre::Real py, Ogre::Real pz,
+        Ogre::Real ow, Ogre::Real ox, Ogre::Real oy, Ogre::Real oz, 
+        const Ogre::String& physicsBone = "");
+    void removeFromScene();
+           
+    void attach( 
+            Actor* actor,
+            const Ogre::String& childSlot = "SLOT_DEFAULT",
+            const Ogre::Vector3& offsetPosition=Ogre::Vector3::ZERO,
+            const Ogre::Quaternion& offsetOrientation=Ogre::Quaternion::IDENTITY
+            );
+   	void attachAxisRot( 
+            rl::Actor* actor,
+            const Ogre::String& childSlot = "SLOT_DEFAULT",            
+            const Ogre::Vector3& offsetPosition=Ogre::Vector3::ZERO,
+            const Ogre::Vector3& offsetAxis=Ogre::Vector3::UNIT_X,
+            const Ogre::Radian& offsetRotation=Ogre::Radian(0) );
+    void attachToSlot( 
+            Actor* actor,
+            const Ogre::String& slot,
+            const Ogre::String& childSlot = "SLOT_DEFAULT",
+            const Ogre::Vector3& offsetPosition=Ogre::Vector3::ZERO,
+			const Ogre::Quaternion& offsetOrientation=Ogre::Quaternion::IDENTITY
+			);
+    void attachToSlotAxisRot( 
+            rl::Actor* actor,
+            const Ogre::String& slot,
+            const Ogre::String& childSlot = "SLOT_DEFAULT",            
+			const Ogre::Vector3& offsetPosition=Ogre::Vector3::ZERO,
+            const Ogre::Vector3& offsetAxis=Ogre::Vector3::UNIT_X,
+            const Ogre::Radian& offsetRotation=Ogre::Radian(0) );
+                    
+    void detach(rl::Actor* actor);
+    
+    rl::Actor* getChildByName(const Ogre::String& name ) const;
+    
+    void setVisible( bool vis, bool cascade = true );
+	bool isVisible() const;
+       
+	void roll(Ogre::Real angleunits);
+	void pitch(Ogre::Real angleunits);
+	void yaw(Ogre::Real angleunits);
+	
+	unsigned long getQueryMask() const;
+    void setQueryMask( unsigned long mask = 0xFFFFFFFF );
+    void addQueryFlag( unsigned long flag  );
+    void removeQueryFlag( unsigned long flag );
+    void setListenerOf (Ogre::SceneNode *node);
+    Ogre::Bone *_getBone() const;
+    Ogre::SceneNode* _getSceneNode() const;
+    
+};
+
+%feature("director") PhysicsContactListener; 
+class PhysicsContactListener
+{
+public:
+    PhysicsContactListener();
+    virtual ~PhysicsContactListener();
+    
+    virtual void contactOccured(rl::Actor* actor1, rl::Actor* actor2) = 0;
+};
+
+class PhysicalThing
+{
+public:
+    PhysicalThing(
+			rl::PhysicsManager::GeometryType geomType,
+			rl::PhysicalObject* po, 
+			Ogre::Real mass, 
+			bool hullModifier = false);
+
+    void setPosition(Ogre::Real x, Ogre::Real y, Ogre::Real z);
+    void setOrientation(Ogre::Real w, Ogre::Real x, Ogre::Real y, Ogre::Real z);
+    
+    void setVelocity(const Ogre::Vector3& vel);
+
+    // Sets the vector, that will always point up.
+    void setUpConstraint(const Ogre::Vector3& upVector = Ogre::Vector3::UNIT_Y);
+    Ogre::Vector3 getUpConstraint() const;
+    void clearUpConstraint();
+
+    rl::Actor* getActor() const;
+
+    void addForce(const Ogre::Vector3& force);
+
+    void freeze();
+    void unfreeze();
+        
+    void setGravityOverride(bool override,
+        Ogre::Real x = 0.0f, Ogre::Real y = 0.0f, Ogre::Real z = 0.0f);
+        
+    Ogre::Real getMass() const;
+    void setMass(Ogre::Real mass);
+    
+    void updateCollisionHull();
+
+    void setContactListener(rl::PhysicsContactListener* listener);
+    rl::PhysicsContactListener* getContactListener() const;
+
+    void fitToPose(const Ogre::String& name);
+
+};
+
+class PhysicsManager
+{
+public:
+
+    enum GeometryType {
+        GT_NONE = -1,
+        GT_BOX = 0,
+        GT_SPHERE = 1,
+        GT_CAPSULE = 2,
+        GT_MESH = 3,
+        GT_ELLIPSOID = 4,
+        GT_CONVEXHULL = 5
+    };
+    
+    PhysicsManager();
+	static PhysicsManager& getSingleton(void);
+    
+    rl::PhysicalThing* createPhysicalThing(rl::PhysicsManager::GeometryType geomType, rl::PhysicalObject* po,
+		Ogre::Real mass);
+
+    void removeAndDestroyPhysicalThing(PhysicalThing* thing);
+
+    // Global Settings
+    void setGravity(Ogre::Real x, Ogre::Real y, Ogre::Real z);
+    Ogre::Vector3 getGravity() const;
+
+    bool isEnabled() const;
+    void setEnabled(bool enabled);
+	
+	void toggleDebugMode();
+    bool isDebugMode() const;
+};
+
+class DebugVisualsManager
+{
+public:
+    DebugVisualsManager();
+    static DebugVisualsManager& getSingleton(void);
+
+    void show(unsigned long flags);
+    void hide(unsigned long flags);
+    void showAll();
+    void hideAll();
+    void toggleAll();
+};
+    
+%feature("director") ContentModule; 
+class ContentModule
+{
+public:
+	ContentModule(
+		const Ogre::String& id, 
+		const rl::CeGuiString& name, 
+		bool common, 
+		long minimumEngineVersion);
+		
+	virtual ~ContentModule();
+		
+	virtual const Ogre::StringVector& getDependencies() const = 0;
+	virtual const Ogre::StringVector& getTextureLocations() const = 0;
+	virtual const Ogre::StringVector& getSoundLocations() const = 0;
+	virtual const Ogre::StringVector& getModelLocations() const = 0;
+
+	virtual void start() = 0;
+};
+
+class CoreSubsystem {
+private:
+	CoreSubsystem();
+public:
+    static CoreSubsystem& getSingleton(void);
+    
+    void loadMap(const Ogre::String& type, const Ogre::String& filename,
+		const Ogre::String& resourceGroup, const Ogre::String& startupScript = "");
+	void registerModule(ContentModule* module);
+    World* getWorld();
+    unsigned long getClock();
+    void makeScreenshot(const Ogre::String& sName);
+    bool isInitialized() const;
+    void setScheme(const Ogre::String& schemeName);
+};
+
+class Sound 
+{
+private:
+	Sound(const SoundResourcePtr& res);
+public:
+	virtual ~Sound();
+    
+    /// Name zur?ckgeben
+    const Ogre::String& getName() const;
+
+    /// Gibt die eingestellte Position der Soundquelle zurueck
+    const Ogre::Vector3 getPosition() const;
+    /// Setzt die Position der Soundquelle.
+    void setPosition(const Ogre::Vector3& direction);
+    /// Gibt die eingestellte relative Lautstaerke der Soundquelle zurueck
+    const Ogre::Real getVolume() const; 
+    /// Setzt die relative Lautstaerke der Soundquelle.
+    void setVolume(const Ogre::Real gain);
+    /// Gibt die Richtung der Soundquelle zurueck.
+    const Ogre::Quaternion getDirection() const;
+    /// Gibt die Geschwindigkeit der Soundquelle zurueck.
+    const Ogre::Vector3 getVelocity() const;
+    /// Setzt die Richtung der Soundquelle.
+    void setDirection(const Ogre::Quaternion&);
+    /// Setzt die Geschwindigkeit der Soundquelle.
+    void setVelocity(const Ogre::Vector3&);
+    /// Setzt die Entfernung, ab der ein 3D-Sound leiser wird
+	void setRolloffStartDistance(const Ogre::Real dist);
+	const Ogre::Real getRolloffStartDistance() const;
+	/// Setzt die Entfernung, ab der ein 3D-Sound nicht mehr leiser wird
+	void setRolloffEndDistance(const Ogre::Real dist);
+	const Ogre::Real getRolloffEndDistance() const;
+
+    /// Spielt den Sound ab.
+    void play() ;
+    /// Pausiert den Sound.
+    void pause(bool pausing) ;
+    /// Ist der Sound pausiert?
+    bool isPaused() ;
+    /// Stoppt den Sound.
+    void stop() ;
+    /// Laeuft der Sound noch
+    const bool isPlaying() const ;
+
+    /// Gibt zur?ck ob der Sound geloopt werden soll 
+    bool isLooping() const;
+    /// Setzt ob der Sound geloopt werden soll 
+    void setLooping( bool looping );
+    
+    // Sind wir gueltig
+    bool isValid() const;
+};
+
+// define as empty at this time. Must not yet be used from within ruby.
+class Job
+{
+private:
+	Job();
+};
+
+class PlaySound2dJob : public rl::Job
+{
+public:
+
+    PlaySound2dJob(const Ogre::String& sound, Ogre::Real volume=1.0f);
+    virtual ~PlaySound2dJob();
+};
+
+class PlaySound3dJob : public rl::Job
+{
+public:
+
+    PlaySound3dJob(const Ogre::String& sound, const Ogre::Vector3& pos, Ogre::Real volume=1.0f);
+    virtual ~PlaySound3dJob();
+};
+
+class PlayAnimationJob : public Job
+{
+public:
+
+    PlayAnimationJob(Actor* actor, const Ogre::String& anim, bool doLoop=false,
+		bool replaceAllAnims=true);
+    virtual ~PlayAnimationJob();
+};
+
+class JobScheduler
+{
+public:
+    typedef enum {JP_LOW = 10, JP_NORMAL = 20, JP_HIGH = 30} JobPriority;
+	static JobScheduler& getSingleton(void);
+    unsigned long addJob(rl::Job* job,
+		rl::JobScheduler::JobPriority priority = JobScheduler::JP_NORMAL,
+		Ogre::Real delay=0.0f);
+};
+
+}


Property changes on: rl/trunk/engine/script/swig/RlCore.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlDialog.head.inc
===================================================================
--- rl/trunk/engine/script/swig/RlDialog.head.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlDialog.head.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,23 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%{
-//----------- Includes - Dialog -----------
-#include "FixRubyHeaders.h"
-#include "DialogPrerequisites.h"
-#include "DialogSubsystem.h"
-#include "DialogCharacter.h"
-%}
\ No newline at end of file

Added: rl/trunk/engine/script/swig/RlDialog.head.swig
===================================================================
--- rl/trunk/engine/script/swig/RlDialog.head.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlDialog.head.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,23 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%{
+//----------- Includes - Dialog -----------
+#include "FixRubyHeaders.h"
+#include "DialogPrerequisites.h"
+#include "DialogSubsystem.h"
+#include "DialogCharacter.h"
+%}
\ No newline at end of file


Property changes on: rl/trunk/engine/script/swig/RlDialog.head.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlDialog.inc
===================================================================
--- rl/trunk/engine/script/swig/RlDialog.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlDialog.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,51 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-namespace rl 
-{
-	%feature("director") DialogCharacter;
-	class DialogCharacter
-	{
-	public:
-		DialogCharacter();
-		virtual ~DialogCharacter();
-
-		const rl::CeGuiString getName() const;
-		rl::Creature* getDialogCharacter() const;
-		void setDialogCharacter(rl::Creature* dialogCharacter);
-		rl::Creature* getDialogPartner() const;
-		void setDialogPartner(rl::Creature* dialogPartner);
-		
-		rl::Creature* getNonPlayerCharacter()const;
-		void setNonPlayerCharacter(rl::Creature* npc);
-		
-		rl::Creature* getPlayerCharacter()const;
-		void setPlayerCharacter(rl::Creature* pc);
-		
-		virtual int calcOptionValue(const rl::CeGuiString& optionName)=0;	
-		virtual int calcResponseValue(const rl::CeGuiString& responseName)=0;
-		virtual int calcSelectionValue(const rl::CeGuiString& selectionName)=0;
-	};
-
-	class DialogSubsystem 
-	{
-	public:
-		static DialogSubsystem& getSingleton(void);
-		rl::DialogCharacter* getBot(const rl::CeGuiString& botName);
-		rl::DialogCharacter* loadBot(const rl::CeGuiString& fileName, const rl::CeGuiString& botName = "");
-		void setCurrentDialogCharacter(rl::DialogCharacter* bot);
-	};
-}

Added: rl/trunk/engine/script/swig/RlDialog.swig
===================================================================
--- rl/trunk/engine/script/swig/RlDialog.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlDialog.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,51 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+namespace rl 
+{
+	%feature("director") DialogCharacter;
+	class DialogCharacter
+	{
+	public:
+		DialogCharacter();
+		virtual ~DialogCharacter();
+
+		const rl::CeGuiString getName() const;
+		rl::Creature* getDialogCharacter() const;
+		void setDialogCharacter(rl::Creature* dialogCharacter);
+		rl::Creature* getDialogPartner() const;
+		void setDialogPartner(rl::Creature* dialogPartner);
+		
+		rl::Creature* getNonPlayerCharacter()const;
+		void setNonPlayerCharacter(rl::Creature* npc);
+		
+		rl::Creature* getPlayerCharacter()const;
+		void setPlayerCharacter(rl::Creature* pc);
+		
+		virtual int calcOptionValue(const rl::CeGuiString& optionName)=0;	
+		virtual int calcResponseValue(const rl::CeGuiString& responseName)=0;
+		virtual int calcSelectionValue(const rl::CeGuiString& selectionName)=0;
+	};
+
+	class DialogSubsystem 
+	{
+	public:
+		static DialogSubsystem& getSingleton(void);
+		rl::DialogCharacter* getBot(const rl::CeGuiString& botName);
+		rl::DialogCharacter* loadBot(const rl::CeGuiString& fileName, const rl::CeGuiString& botName = "");
+		void setCurrentDialogCharacter(rl::DialogCharacter* bot);
+	};
+}


Property changes on: rl/trunk/engine/script/swig/RlDialog.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlRules.head.inc
===================================================================
--- rl/trunk/engine/script/swig/RlRules.head.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlRules.head.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,55 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%{
-//----------- Includes - Rules -----------
-#include "FixRubyHeaders.h"
-#include "RulesPrerequisites.h"
-
-#include "Action.h"
-#include "ActionManager.h"
-#include "Armor.h"
-#include "CompositeEffect.h"
-#include "Container.h"
-#include "Creature.h"
-#include "Date.h"
-#include "DsaManager.h"
-#include "Effect.h"
-#include "EigenschaftenStateSet.h"
-#include "GameObject.h"
-#include "GameObjectManager.h"
-#include "GameObjectProxy.h"
-#include "Inventory.h"
-#include "Item.h"
-#include "ObjectStateChangeEventSource.h"
-#include "ObjectStateChangeEvent.h"
-#include "ObjectStateChangeListener.h"
-#include "Person.h"
-#include "Quest.h"
-#include "QuestBook.h"
-#include "QuestEvent.h"
-#include "QuestListener.h"
-#include "RulesSubsystem.h"
-#include "SonderfertigkeitenStateSet.h"
-#include "StateSet.h"
-#include "Talent.h"
-#include "TalentStateSet.h"
-#include "TimerEventSource.h"
-#include "TimerEvent.h"
-#include "TimerListener.h"
-#include "Tripel.h"
-#include "Weapon.h"
-%}

Added: rl/trunk/engine/script/swig/RlRules.head.swig
===================================================================
--- rl/trunk/engine/script/swig/RlRules.head.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlRules.head.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,55 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%{
+//----------- Includes - Rules -----------
+#include "FixRubyHeaders.h"
+#include "RulesPrerequisites.h"
+
+#include "Action.h"
+#include "ActionManager.h"
+#include "Armor.h"
+#include "CompositeEffect.h"
+#include "Container.h"
+#include "Creature.h"
+#include "Date.h"
+#include "DsaManager.h"
+#include "Effect.h"
+#include "EigenschaftenStateSet.h"
+#include "GameObject.h"
+#include "GameObjectManager.h"
+#include "GameObjectProxy.h"
+#include "Inventory.h"
+#include "Item.h"
+#include "ObjectStateChangeEventSource.h"
+#include "ObjectStateChangeEvent.h"
+#include "ObjectStateChangeListener.h"
+#include "Person.h"
+#include "Quest.h"
+#include "QuestBook.h"
+#include "QuestEvent.h"
+#include "QuestListener.h"
+#include "RulesSubsystem.h"
+#include "SonderfertigkeitenStateSet.h"
+#include "StateSet.h"
+#include "Talent.h"
+#include "TalentStateSet.h"
+#include "TimerEventSource.h"
+#include "TimerEvent.h"
+#include "TimerListener.h"
+#include "Tripel.h"
+#include "Weapon.h"
+%}


Property changes on: rl/trunk/engine/script/swig/RlRules.head.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlRules.inc
===================================================================
--- rl/trunk/engine/script/swig/RlRules.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlRules.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,783 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-namespace rl {
-
-	// Before first use of GameObject or subclasses!
-	%apply SWIGTYPE *DYNAMIC { rl::GameObject * };
-					
-   template<typename T>
-   class Tripel {
-   public:
-      T first;
-      T second;
-      T third;
-
-      Tripel();      
-      Tripel(const T& t1, const T& t2, const T& t3);
-      Tripel(const Tripel& rhs);
-
-      //Tripel& operator=(const Tripel& rhs);
-      bool operator==(const Tripel& rhs);
-      bool operator<(const Tripel& rhs);     
-   };
-	
-		class Date {
-    public:
-        static const RL_LONGLONG ONE_SECOND = 1000ULL;
-        static const RL_LONGLONG ONE_MINUTE = 60000ULL;
-        static const RL_LONGLONG ONE_HOUR = 3600000ULL;
-        static const RL_LONGLONG ONE_DAY = 86400000ULL;
-        static const RL_LONGLONG ONE_WEEK = 604800000ULL;
-        static const RL_LONGLONG ONE_MONTH = 2592000000ULL;
-        static const RL_LONGLONG ONE_YEAR = 31536000000ULL;
-        static const RL_LONGLONG ONE_KAMPFRUNDE = 2 * ONE_SECOND;
-        static const RL_LONGLONG ONE_SPIELRUNDE = 5 * ONE_MINUTE;
-
-        Date();
-        Date(RL_LONGLONG timestamp);
-        Date(const Date& rhs);
-      
-        bool operator==(const Date& rhs);
-        bool operator<(const Date& rhs);
-        bool operator<=(const Date& rhs);
-        bool operator>=(const Date& rhs);
-        bool operator>(const Date& rhs);
-
-        Date operator+(const RL_LONGLONG& rhs);
-        Date operator-(const RL_LONGLONG& rhs);
-        RL_LONGLONG operator-(const Date& rhs);
-      
-        RL_LONGLONG getTimestamp();
-
-        int getTimeFraction();
-        int getYear();
-        int getMonth();
-        rl::CeGuiString getMonthName();
-        int getDayOfYear();
-        int getDayOfMonth();
-        int getDayOfWeek();
-        rl::CeGuiString getDayOfWeekName();
-        int getHour();
-        int getMinute();
-        int getSecond();
-        int getMilliSecond();
-      
-        rl::CeGuiString toString();
-    };
-   
-    Date operator+(const RL_LONGLONG&, const Date&);
-    Date operator-(const RL_LONGLONG&, const Date&);
-
-	class RulesSubsystem 
-    {
-		public:
- 			static rl::RulesSubsystem& getSingleton();
- 			rl::QuestBook* getQuestBook();
- 			void resetQuestBook();
-    };
-  
-    class DsaManager {
-    public:
-        RL_LONGLONG getTimestamp();
-        Date getCurrentDate();
-		void setTimestamp(const RL_LONGLONG time);
-		void setCurrentDate(const Date& date);
-		
-        int rollD20();
-        Tripel<int> roll3D20();
-        int rollD6();
-        int roll(int d6, int d20);
-      
-	    static DsaManager& getSingleton();
-	    rl::Talent* getTalent(const rl::CeGuiString name) const;
-	    rl::Person* getPerson(const int id) const;
-    };
-    
-    class GameObjectProxy
-    {
-    private:
-        GameObjectProxy(const Ogre::String& classid, unsigned int id);
-        
-    public:       
-        rl::GameObject* getGameObject();
-
-        unsigned int getId() const;
-        const Ogre::String& getClassId() const;
-        
-        void load();
-        void unload();
-    };
-    
-    %feature("director") GameObjectFactory; 
-    class GameObjectFactory
-    {
-    public:
-        virtual rl::GameObject* createRubyGameObject(const Ogre::String& classname, unsigned int id) = 0;
-        GameObjectFactory();
-        virtual ~GameObjectFactory();
-    };
-
-    class GameObjectManager
-    {
-    public:
-        static rl::GameObjectManager& getSingleton();
-        rl::GameObjectProxy& createGameObjectProxy(const Ogre::String& classId, unsigned int id = 0);
-        rl::GameObjectProxy* getGameObjectProxy(unsigned int id) const;
-        void setGameObjectFactory(rl::GameObjectFactory* gof);
-
-    private:
-        GameObjectManager();
-    };
-
-
-	%feature("director") QuestListener; 
-	class QuestListener
-	{
-	public:
-		virtual ~QuestListener();
-		
-		virtual void questStateChanged(rl::QuestEvent* anEvent) = 0;
-		virtual void questPartsDoneChanged(rl::QuestEvent* anEvent) = 0;
-		virtual void questKnownChanged(rl::QuestEvent* anEvent) = 0;
-		virtual void questSubquestAdded(rl::QuestEvent* anEvent) = 0;
-		virtual void journalEntryAdded(rl::JournalEvent* anEvent) = 0;
-	};
-
-    class JournalEntry
-    {
-    public:
-        JournalEntry(const rl::CeGuiString caption, const rl::CeGuiString text);
-        virtual ~JournalEntry();
-
-        rl::CeGuiString getCaption() const;
-
-        rl::CeGuiString getText() const;
-    };
-    
-	class Quest
-	{
-	public:
-		enum State
-		{
-			OPEN = 0,
-			ASSIGNED,
-			FAILED,
-			SUCCEEDED,
-			COMPLETED
-		};
-
-		Quest(const rl::CeGuiString id, const rl::CeGuiString name, const rl::CeGuiString description);
-		virtual ~Quest();
-
-		const rl::CeGuiString getId();
-		const rl::CeGuiString getName();
-		const rl::CeGuiString getDescription();
-		int getPartsToDo();
-		void setPartsToDo(int partsToDo);
-		int getPartsDone();
-		void setPartsDone(int partsDone);
-		void increasePartsDone(int parts = 1);
-		void decreasePartsDone(int parts = 1);
-
-		rl::Quest::State getState();
-		void setState(rl::Quest::State state);
-		bool isKnown();
-		void setKnown(bool known);
-
-		// QuestVector getSubquests();
-		void addSubquest(rl::Quest* quest); 
-	};   
-	
-	class QuestEvent
-	{
-	public:
-		rl::Quest* getQuest();
-	private:
-		QuestEvent( rl::QuestBook* src, int reason );
-	};
-	
-	class QuestBook
-	{
-	public:
-		rl::Quest* getQuest(const rl::CeGuiString id);
-		void addQuest(rl::Quest* quest);
-		
-		void addJournalEntry(rl::JournalEntry* entry);
-		void addJournalEntry(rl::CeGuiString caption, rl::CeGuiString text);
-		
-		void addQuestListener(rl::QuestListener* listener);
-		void removeQuestListener(rl::QuestListener* listener);
-	};
-	
-    class Talent
-    {
-    public:
-        Talent(const rl::CeGuiString name,
-               const rl::CeGuiString description,
-               const Tripel<rl::CeGuiString>& eigenschaften,
-               int ebe,
-			   int gruppe,
-			   const rl::CeGuiString art);
-
-        bool operator==(const Talent& rhs) const;
-        bool operator<(const Talent& rhs) const;
-        rl::CeGuiString getName() const;
-        rl::CeGuiString getDescription() const;
-		int getEbe() const;
-
-        /// Berechnet effektive Behinderung bei gegebener Behinderung;
-        int calculateEbe(int be) const;
-        Tripel<rl::CeGuiString> getEigenschaften() const;
-    };
-
-    class ActionGroup
-	{
-	public:
-		ActionGroup(rl::CeGuiString name, ActionGroup* parent = NULL);
-		~ActionGroup();
-	
-		const rl::CeGuiString getName() const;
-	};
-	
-	%feature("director") Action;   
-    class Action
-    {
-    public:
-    	static const int ACT_NORMAL = 1<<0;
-		static const int ACT_INVIS_DESC = 1<<1;
-		static const int ACT_DISABLED = 1<<2;
-		static const int ACT_NEEDS_TALENT = 1<<8;
-
-		static const int TC_NO_TARGET = 0;
-		static const int TC_GAMEOBJECT = 1;
-		static const int TC_CREATURE = 2;
-		static const int TC_ITEM = 3;
-		static const int TC_POINT = 4;
-		static const int TC_RADIUS = 5;
-		static const int TC_POINT_AND_RADIUS = 6;
-    
-        Action(const rl::CeGuiString name, const rl::CeGuiString description);
-        virtual ~Action();
-
-        virtual const rl::CeGuiString getName() const;
-        //virtual const rl::CeGuiString getClassName() const;
-        virtual const rl::CeGuiString getDescription() const;
-        virtual int getTargetClass() const;
-        virtual void doAction(rl::GameObject *object, rl::Creature *actor,
-            rl::GameObject *target);
-        virtual bool canDo(rl::GameObject* object, rl::Creature* actor) const;
-            
-        void setGroup(rl::ActionGroup* group);
-		rl::ActionGroup* getGroup() const;
-    };
-    
-	%feature("director") ObjectStateChangeListener; 	 
-	class ObjectStateChangeListener 	 
-	{ 	 
-	public: 	 
-		virtual ~ObjectStateChangeListener(); 	 
-		  	 
-		virtual void objectStateChanged(rl::ObjectStateChangeEvent *anEvent) = 0; 	 
-	};
-		 	 
-		  	 
-	class ObjectStateChangeEventSource 	 
-	{ 	 
-	public: 	 
-		ObjectStateChangeEventSource( ); 	 
-		  	 
-		void addObjectStateChangeListener( rl::ObjectStateChangeListener*  list ); 	 
-		void removeObjectStateChangeListener( rl::ObjectStateChangeListener* list ); 	 
-		bool hasListeners( ) const; 	 
-		rl::GameObject* getObject() const;
-		void fireObjectStateChangeEvent(); 	 
-	}; 	 
-		  	 
-	class ObjectStateChangeEvent 	 
-	{ 	 
-	public: 	 
-		ObjectStateChangeEvent( rl::ObjectStateChangeEventSource* src ); 	 
-		rl::GameObject* getProvokingObject() const; 	 
-		rl::ObjectStateChangeEventSource* getSource() const; 	 
-	};
-		    
-	enum GameObjectState
-    {
-        GOS_UNDEFINED = 0,
-        GOS_UNLOADED,
-        GOS_LOADED,
-        GOS_IN_POSSESSION,
-        GOS_IN_SCENE,
-        GOS_HELD,
-        GOS_READY
-    };
-    
-    %feature("director") GameObject;
-    class GameObject: public ObjectStateChangeEventSource
-    {
-    public:
-        GameObject(unsigned int id);
-        virtual ~GameObject();
-
-        virtual unsigned int getId();
-
-        virtual const rl::CeGuiString getName() const;
-        virtual void setName(rl::CeGuiString name);
-
-        const rl::CeGuiString getDescription() const;
-        virtual void setDescription(rl::CeGuiString description);   
-        
-        void setActor(rl::Actor* actor);
-		rl::Actor* getActor();
-
-        void addAction(rl::Action *action, int option = ACT_NORMAL);
-        void addActionInGroup(Action* action, ActionGroup* group, int option = ACT_NORMAL);
-        void removeAction(rl::Action *action);
-
-        const std::vector<Action*> getValidActions(rl::Creature *actor) const;        
-        void setPosition(const Ogre::Vector3& position);
-        void setOrientation(const Ogre::Quaternion& orientation);
-	    const Ogre::Quaternion& getOrientation() const;
-        const Ogre::Vector3& getPosition() const;
-        
-        void setMeshfile(rl::CeGuiString meshfile);
-        
-        virtual Action* getDefaultAction(rl::Creature* actor) const;
-        
-        void doAction(
-			const rl::CeGuiString actionName, 
-			rl::Creature* actor,
-            rl::GameObject* target);
-        void doAction(
-			const rl::CeGuiString actionName);
-        void doAction(rl::Action* action, rl::Creature* actor,
-            rl::GameObject* target);
-            
-        void doDefaultAction(rl::Creature* actor, rl::GameObject* target);
-            
-		static const rl::CeGuiString DEFAULT_VIEW_OBJECT_ACTION;
-		
-		bool isHighlightingEnabled();
-        void setHighlightingEnabled( bool highlightenabled );
-        
-        virtual const rl::Property getProperty(const Ogre::String& key) const;
-        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
-        
-        void placeIntoScene();
-        void removeFromScene();
-        
-        rl::GameObjectState getState() const;
-        virtual void setState(rl::GameObjectState state);
-    };
-    
-    %feature("director") Item;
-    class Item : public rl::GameObject {
-    public:
-        enum ItemType{
-			ITEMTYPE_WEAPON     = 1 << 0,
-			ITEMTYPE_SHIELD     = 1 << 1,
-			ITEMTYPE_RING       = 1 << 2,
-			ITEMTYPE_GLOVES     = 1 << 3,
-			ITEMTYPE_BRACELET   = 1 << 4,
-			ITEMTYPE_ARMOR      = 1 << 5,
-			ITEMTYPE_CAPE       = 1 << 6,
-			ITEMTYPE_BRACERS    = 1 << 7,
-			ITEMTYPE_BACKPACK   = 1 << 8,
-			ITEMTYPE_BELT       = 1 << 9,
-			ITEMTYPE_NECKLACE   = 1 << 10,
-			ITEMTYPE_HELMET     = 1 << 11,
-			ITEMTYPE_TROUSERS   = 1 << 12,
-			ITEMTYPE_SHINBONE   = 1 << 13,
-			ITEMTYPE_BOOTS      = 1 << 14,
-			ITEMTYPE_OTHER      = 1 << 15,
-            ITEMTYPE_ALL_ITEMS  = ~(0)
-		};
-    
-        Item(unsigned int id);
-        virtual ~Item();
-        
-        void setItemType(rl::Item::ItemType itemType);
-        rl::Item::ItemType getItemType() const;
-        virtual void setState(rl::GameObjectState state);
-
-        virtual const rl::Property getProperty(const Ogre::String& key) const;
-        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
-    };
-    
-    %feature("director") Weapon;
-    class Weapon : public rl::Item 
-    {
-    public:
-		enum Distanzklasse { DK_H=0, DK_N, DK_S, DK_P };
-
-        Weapon(unsigned int id);
-        virtual ~Weapon();
-                
-		void setTp(int d6, int d20, int mod);
-		const Tripel<int>& getTp() const;
-		void setTpKk(int base, int step);
-		const pair<int, int>& getTpKk() const;
-		void setBf(int newBf);
-		int getBf();
-		void setIni(int newIni);
-		int getIni();
-		void setWm(pair<int, int>& newWm);
-		const pair<int,int>& getWm() const;
-		void setDk(Weapon::Distanzklasse newDk);
-		Weapon::Distanzklasse getDk();
-		void setKampftechnik(const rl::CeGuiString newKampftechnik);
-		const rl::CeGuiString getKampftechnik() const;
-
-        virtual const rl::Property getProperty(const Ogre::String& key) const;
-        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
-    };
-    
-    %feature("director") Armor;
-    class Armor : public Item
-    {
-    public:
-        Armor(unsigned int id);
-        virtual ~Armor();
-
-        virtual const rl::Property getProperty(const Ogre::String& key) const;
-        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
-    };
-    
-    %feature("director") Container;
-    class Container : public Item
-    {
-    public:
-        Container(unsigned int id);
-        virtual ~Container();
-
-        Ogre::Real getCapacity() const;
-        void setCapacity(Ogre::Real capacity);
-        void setVolume(unsigned int x, unsigned int y);
-        Ogre::Real getContentWeight() const;
-        void addItem(rl::Item* item);
-        void removeItem(rl::Item* item);
-        rl::ItemSet getItems() const;
-        int getItemCount() const;
-        rl::Item* getItemAt(unsigned int x, unsigned int y);
-
-        virtual const rl::Property getProperty(const Ogre::String& key) const;
-        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
-	};
-	
-	class StateSet
-	{
-	public:
-		StateSet();
-		virtual ~StateSet();
-
-		virtual int getValue(bool getUnmodfiedValue = false) const;
-		virtual int getOriginalValue() const;
-		virtual void setOriginalValue(int newValue);
-		virtual int getModifier() const;
-		virtual void setModifier(int newModifier);
-		virtual void modifyModifier(int modifier);
-		virtual int getProbenModifier() const;
-		virtual void setProbenModifier(int newProbenModifier);
-		virtual void modifyProbenModifier(int modifier);
-		virtual int getMultiplier() const;
-		virtual void setMultiplier(int newMultiplier);
-	};
-
-	class EigenschaftenStateSet : public StateSet
-	{
-	public:
-		EigenschaftenStateSet();
-		~EigenschaftenStateSet();
-
-		int getStartValue();
-		void setStartValue( int newStartValue );
-		int getPermanentModifier();
-		void setPermanentModifier( int newPermanentModifier );
-		int getModifierWithoutRecalculation();
-		void setModifierWithoutRecalculation( int newModifierWithoutRecalculation );
-
-		int getValue( bool getUnmodifiedValue = false );
-		int getValueForBasiswertCalculation();
-	};
-	
-	class SonderfertigkeitenStateSet : public StateSet
-	{
-	public:
-		SonderfertigkeitenStateSet();
-		~SonderfertigkeitenStateSet();
-
-		void setModifier( int newModifier );
-		int getLehrmeisterZeiteinheiten();
-		void setLehrmeisterZeiteinheiten( int newLehrmeisterZeiteinheiten );
-	};
-	
-	class TalentStateSet : public StateSet
-	{
-	public:
-		TalentStateSet();
-		~TalentStateSet();
-
-		bool getSe();
-		void setSe(bool newSe);
-		int getLehrmeisterZeiteinheiten();
-		void setLehrmeisterZeiteinheiten( int newLehrmeisterZeiteinheiten );
-		int getSelbststudiumZeiteinheiten();
-		void setSelbststudiumZeiteinheiten( int newSelbststudiumZeiteinheiten );
-	};
-	
-	%feature("director") Effect;
-	class Effect
-	{
-	public:
-        enum Quantifier
-        {
-            QUANTIFIER_MULTIPLE,
-            QUANTIFIER_UNIQUE,
-            QUANTIFIER_UNIQUE_BUT_PROLONGABLE,
-            QUANTIFIER_UNIQUE_BUT_CUMULATIVE
-        };
-
-        enum EffectTag
-        {
-            EFFECTTAG_NONE,
-            EFFECTTAG_KRANKHEIT
-        };
-
-		Effect(int stufe = 1);
-		virtual ~Effect();
-
-        const rl::CeGuiString getName() const;
-        void setName(rl::CeGuiString name);
-        const rl::CeGuiString getDescription() const;
-        void setDescription(rl::CeGuiString description);
-		rl::Creature* getOwner() const;
-		void setOwner(rl::Creature* owner);
-		virtual int getDuration();
-		virtual void setDuration(int newDuration);
-		Quantifier getQuantifier();
-		void setQuantifier(Quantifier quantifier);
-		virtual void addTag(EffectTag tagId);
-		virtual void removeTag(EffectTag tagId);
-		virtual bool queryTag(EffectTag tagId);
-		virtual const int getStufe();
-		virtual void increaseStufe();
-		virtual void decreaseStufe();
-		virtual void enable();
-		virtual void disable();
-		virtual void check() = 0;
-
-	protected:
-		virtual void apply() = 0;
-		virtual void remove() = 0;
-		virtual RL_LONGLONG getTimePassed();
-	};
-	
-	class Inventory 
-	{
-    private:
-        Inventory(rl::Creature* owner);
-	public:
-	    void addSlot(const rl::CeGuiString& name, const Ogre::String& bone, int itemMask);
-	    rl::Item* getItem(const rl::CeGuiString& slotName);
-        void hold(rl::Item* item, const rl::CeGuiString& slot);
-	};
-
-    %feature("director") Creature;
-    class Creature : public GameObject {
-    public:
-
-        enum Wert
-        {
-            WERT_MOD_AE = 1, // Astralenergie
-            WERT_MOD_LE, // Lebensenergie
-            WERT_MOD_AT, // Attacke
-            WERT_MOD_PA, // Parade
-            WERT_MOD_FK, // Fernkampf
-            WERT_MOD_AU, // Ausdauer
-            WERT_MOD_MR, // Magieresistenz
-            WERT_MOD_INI, // Initiative
-            WERT_MOD_REGENERATION_LE, // Naechtliche Regeneration. modifier modifiziert den W6, ProbenModifier modifiziert die KO-Probe.
-            WERT_MOD_REGENERATION_AE, // Astrale Regeneration. modifier modifiziert den W6, ProbenModifier modifiziert die IN-Probe.
-            WERT_MOD_ERSCHOEPFUNGSSCHWELLE, // Die Modifkitoren von KO bezueglich der Erschoepfungsschwelle.
-            WERT_MOD_ALL_EIGENSCHAFTSPROBEN, // Modifiziert alle Proben, die mit 1W20 gewuerfelt werden.
-            WERT_MOD_ALL_TALENTPROBEN, // Modifiziert alle Proben, die mit 3W20 gewuerfelt werden.
-            WERT_GS, // Geschwindigkeit
-            WERT_SOZIALSTATUS, // Sozialstatus
-            WERT_BE // Behinderung
-        };
-
-        Creature(unsigned int id);
-        virtual ~Creature();
-
-        virtual int getLe();
-        virtual void modifyLe(int mod, bool ignoreMax);
-        virtual void modifyAe(int mod);
-        virtual void modifyAu(int mod);
-        void setWert(Wert wertId, int value);
-        virtual StateSet* getWertStateSet(Wert wertId);
-        
-        virtual int getEigenschaft(const rl::CeGuiString eigenschaftName);
-        virtual void setEigenschaft(const rl::CeGuiString eigenschaftName, int value);
-        virtual void modifyEigenschaft(const rl::CeGuiString eigenschaftName, int mod);
-		virtual EigenschaftenStateSet* getEigenschaftenStateSet(const rl::CeGuiString eigenschaftName);
-		
-        void addTalent(const rl::CeGuiString talentName, int value=0);
-        virtual int getTalent(const rl::CeGuiString talentName);
-        virtual void setTalent(const rl::CeGuiString talentName, int value);
-        virtual void modifyTalent(const rl::CeGuiString talentName, int mod);
-		virtual void addSe(const rl::CeGuiString talentName);
-		virtual TalentStateSet* getTalentStateSet(const rl::CeGuiString talentName);
-		
-		void addVorteil(const rl::CeGuiString vorteilName, int value = 0);
-		void addNachteil(const rl::CeGuiString nachteilName, int value = 0);		
-		
-        void addKampftechnik(const rl::CeGuiString kampftechnikName, std::pair<int,int> value = make_pair(0,0));
-        
-		virtual SonderfertigkeitenStateSet* getSonderfertigkeitenStateSet(const rl::CeGuiString sfName);
-
-        virtual int doTalentprobe(const rl::CeGuiString talentName, int modifier);
-        virtual int doEigenschaftsprobe(const rl::CeGuiString eigenschaftName, int modifier);
-        
-        rl::Inventory* getInventory();
-        
-		void addEffect(Effect* effect);
-		void damageLe(int tp, int damageType = LEDAMAGE_NORMAL);
-        static const int LEDAMAGE_NORMAL = 0;
-        static const int LEDAMAGE_FIRE = 1;
-        static const int LEDAMAGE_WATER = 2;
-        static const int LEDAMAGE_DEMONIC = 4;
-        void damageAu(int aup, int damageType = AUDAMAGE_NORMAL);
-        static const int AUDAMAGE_NORMAL = 0;
-        static const int AUDAMAGE_HEAT = 1;
-        static const int AUDAMAGE_COLD = 2;
-        static const int AUDAMAGE_CHOKE = 4;
-        static const int AUDAMAGE_DROWN = 8;
-
-        virtual const rl::Property getProperty(const Ogre::String& key) const;
-        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
-   };
-   
-   %feature("director") Person;
-   class Person : public Creature
-   {
-   public:
-	    Person(unsigned int id);
-
-        virtual const rl::Property getProperty(const Ogre::String& key) const;
-        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
-	};
-		
-	%feature("director") CompositeEffect;	
-	class CompositeEffect : public Effect
-	{
-	public:
-		CompositeEffect();
-		virtual ~CompositeEffect();
-
-		void addEffect(Effect* effect);
-		virtual void check();
-	protected:
-		void apply();
-		void remove();
-	};
-
-	%feature("director") ActionMananger;
-    class ActionManager
-    {
-    public:
-        void registerAction(rl::Action* action);
-        void unregisterAction(const rl::CeGuiString actionName);
-		rl::Action* getAction(const rl::CeGuiString actionName) const;
-
-		void registerInGameGlobalAction(rl::Action* action, rl::ActionGroup* group);
-	
-        static rl::ActionManager& getSingleton();
-	};
-	
-	%feature("director") TimerListener;
-	class TimerListener
-	{
-	public:
-		virtual ~TimerLister();
-	  
-  		virtual void timerFired(rl::TimerEvent* anEvent) = 0;
-	};
-	
-	class TimerEventSource
-	{
-	public:
-		static const RL_LONGLONG NO_REPEAT;
-
-		TimerEventSource( const RL_LONGLONG gameTime, const RL_LONGLONG interval = rl::TimerEventSource::NO_REPEAT );
-		TimerEventSource( const rl::Date dsaTime, const rl::Date interval = rl::TimerEventSource::NO_REPEAT );
-	
-		void addTimerListener( rl::TimerListener* ist );
-        void removeTimerListener( rl::TimerListener* ist );
-	};
-	
-	class TimerEvent
-	{
-	public:
-		TimerEvent( rl::TimerEventSource* src );
-	
-		Ogre::Real getTime();
-		rl::Date getGameTime();
-
-		rl::TimerEventSource* getSource() const;
-	};
-} // Namespace
-
-%{
-static swig_type_info *GameObject_dynamic_cast(void **ptr)
-{
-    rl::GameObject **ppGameObject = reinterpret_cast<rl::GameObject**>(ptr);
-
-    rl::Person *pPerson=dynamic_cast<rl::Person*>(*ppGameObject);
-    if (pPerson) {
-        *ptr=reinterpret_cast<void*>(pPerson);
-        return SWIGTYPE_p_rl__Person;
-    }
-    rl::Creature *pCreature=dynamic_cast<rl::Creature*>(*ppGameObject);
-    if (pCreature) {
-        *ptr=reinterpret_cast<void*>(pCreature);
-        return SWIGTYPE_p_rl__Creature;
-    }
-    rl::Weapon *pWeapon=dynamic_cast<rl::Weapon*>(*ppGameObject);
-    if (pWeapon) {
-        *ptr=reinterpret_cast<void*>(pWeapon);
-        return SWIGTYPE_p_rl__Weapon;
-    }
-    rl::Armor *pArmor=dynamic_cast<rl::Armor*>(*ppGameObject);
-    if (pArmor) {
-        *ptr=reinterpret_cast<void*>(pArmor);
-        return SWIGTYPE_p_rl__Armor;
-    }
-    rl::Container *pContainer=dynamic_cast<rl::Container*>(*ppGameObject);
-    if (pContainer) {
-        *ptr=reinterpret_cast<void*>(pContainer);
-        return SWIGTYPE_p_rl__Container;
-    }
-    rl::Item *pItem=dynamic_cast<rl::Item*>(*ppGameObject);
-    if (pItem) {
-        *ptr=reinterpret_cast<void*>(pItem);
-        return SWIGTYPE_p_rl__Item;
-    }
-    return 0;
-}
-%}
-DYNAMIC_CAST(SWIGTYPE_p_rl__GameObject, GameObject_dynamic_cast);
-

Added: rl/trunk/engine/script/swig/RlRules.swig
===================================================================
--- rl/trunk/engine/script/swig/RlRules.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlRules.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,783 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+namespace rl {
+
+	// Before first use of GameObject or subclasses!
+	%apply SWIGTYPE *DYNAMIC { rl::GameObject * };
+					
+   template<typename T>
+   class Tripel {
+   public:
+      T first;
+      T second;
+      T third;
+
+      Tripel();      
+      Tripel(const T& t1, const T& t2, const T& t3);
+      Tripel(const Tripel& rhs);
+
+      //Tripel& operator=(const Tripel& rhs);
+      bool operator==(const Tripel& rhs);
+      bool operator<(const Tripel& rhs);     
+   };
+	
+		class Date {
+    public:
+        static const RL_LONGLONG ONE_SECOND = 1000ULL;
+        static const RL_LONGLONG ONE_MINUTE = 60000ULL;
+        static const RL_LONGLONG ONE_HOUR = 3600000ULL;
+        static const RL_LONGLONG ONE_DAY = 86400000ULL;
+        static const RL_LONGLONG ONE_WEEK = 604800000ULL;
+        static const RL_LONGLONG ONE_MONTH = 2592000000ULL;
+        static const RL_LONGLONG ONE_YEAR = 31536000000ULL;
+        static const RL_LONGLONG ONE_KAMPFRUNDE = 2 * ONE_SECOND;
+        static const RL_LONGLONG ONE_SPIELRUNDE = 5 * ONE_MINUTE;
+
+        Date();
+        Date(RL_LONGLONG timestamp);
+        Date(const Date& rhs);
+      
+        bool operator==(const Date& rhs);
+        bool operator<(const Date& rhs);
+        bool operator<=(const Date& rhs);
+        bool operator>=(const Date& rhs);
+        bool operator>(const Date& rhs);
+
+        Date operator+(const RL_LONGLONG& rhs);
+        Date operator-(const RL_LONGLONG& rhs);
+        RL_LONGLONG operator-(const Date& rhs);
+      
+        RL_LONGLONG getTimestamp();
+
+        int getTimeFraction();
+        int getYear();
+        int getMonth();
+        rl::CeGuiString getMonthName();
+        int getDayOfYear();
+        int getDayOfMonth();
+        int getDayOfWeek();
+        rl::CeGuiString getDayOfWeekName();
+        int getHour();
+        int getMinute();
+        int getSecond();
+        int getMilliSecond();
+      
+        rl::CeGuiString toString();
+    };
+   
+    Date operator+(const RL_LONGLONG&, const Date&);
+    Date operator-(const RL_LONGLONG&, const Date&);
+
+	class RulesSubsystem 
+    {
+		public:
+ 			static rl::RulesSubsystem& getSingleton();
+ 			rl::QuestBook* getQuestBook();
+ 			void resetQuestBook();
+    };
+  
+    class DsaManager {
+    public:
+        RL_LONGLONG getTimestamp();
+        Date getCurrentDate();
+		void setTimestamp(const RL_LONGLONG time);
+		void setCurrentDate(const Date& date);
+		
+        int rollD20();
+        Tripel<int> roll3D20();
+        int rollD6();
+        int roll(int d6, int d20);
+      
+	    static DsaManager& getSingleton();
+	    rl::Talent* getTalent(const rl::CeGuiString name) const;
+	    rl::Person* getPerson(const int id) const;
+    };
+    
+    class GameObjectProxy
+    {
+    private:
+        GameObjectProxy(const Ogre::String& classid, unsigned int id);
+        
+    public:       
+        rl::GameObject* getGameObject();
+
+        unsigned int getId() const;
+        const Ogre::String& getClassId() const;
+        
+        void load();
+        void unload();
+    };
+    
+    %feature("director") GameObjectFactory; 
+    class GameObjectFactory
+    {
+    public:
+        virtual rl::GameObject* createRubyGameObject(const Ogre::String& classname, unsigned int id) = 0;
+        GameObjectFactory();
+        virtual ~GameObjectFactory();
+    };
+
+    class GameObjectManager
+    {
+    public:
+        static rl::GameObjectManager& getSingleton();
+        rl::GameObjectProxy& createGameObjectProxy(const Ogre::String& classId, unsigned int id = 0);
+        rl::GameObjectProxy* getGameObjectProxy(unsigned int id) const;
+        void setGameObjectFactory(rl::GameObjectFactory* gof);
+
+    private:
+        GameObjectManager();
+    };
+
+
+	%feature("director") QuestListener; 
+	class QuestListener
+	{
+	public:
+		virtual ~QuestListener();
+		
+		virtual void questStateChanged(rl::QuestEvent* anEvent) = 0;
+		virtual void questPartsDoneChanged(rl::QuestEvent* anEvent) = 0;
+		virtual void questKnownChanged(rl::QuestEvent* anEvent) = 0;
+		virtual void questSubquestAdded(rl::QuestEvent* anEvent) = 0;
+		virtual void journalEntryAdded(rl::JournalEvent* anEvent) = 0;
+	};
+
+    class JournalEntry
+    {
+    public:
+        JournalEntry(const rl::CeGuiString caption, const rl::CeGuiString text);
+        virtual ~JournalEntry();
+
+        rl::CeGuiString getCaption() const;
+
+        rl::CeGuiString getText() const;
+    };
+    
+	class Quest
+	{
+	public:
+		enum State
+		{
+			OPEN = 0,
+			ASSIGNED,
+			FAILED,
+			SUCCEEDED,
+			COMPLETED
+		};
+
+		Quest(const rl::CeGuiString id, const rl::CeGuiString name, const rl::CeGuiString description);
+		virtual ~Quest();
+
+		const rl::CeGuiString getId();
+		const rl::CeGuiString getName();
+		const rl::CeGuiString getDescription();
+		int getPartsToDo();
+		void setPartsToDo(int partsToDo);
+		int getPartsDone();
+		void setPartsDone(int partsDone);
+		void increasePartsDone(int parts = 1);
+		void decreasePartsDone(int parts = 1);
+
+		rl::Quest::State getState();
+		void setState(rl::Quest::State state);
+		bool isKnown();
+		void setKnown(bool known);
+
+		// QuestVector getSubquests();
+		void addSubquest(rl::Quest* quest); 
+	};   
+	
+	class QuestEvent
+	{
+	public:
+		rl::Quest* getQuest();
+	private:
+		QuestEvent( rl::QuestBook* src, int reason );
+	};
+	
+	class QuestBook
+	{
+	public:
+		rl::Quest* getQuest(const rl::CeGuiString id);
+		void addQuest(rl::Quest* quest);
+		
+		void addJournalEntry(rl::JournalEntry* entry);
+		void addJournalEntry(rl::CeGuiString caption, rl::CeGuiString text);
+		
+		void addQuestListener(rl::QuestListener* listener);
+		void removeQuestListener(rl::QuestListener* listener);
+	};
+	
+    class Talent
+    {
+    public:
+        Talent(const rl::CeGuiString name,
+               const rl::CeGuiString description,
+               const Tripel<rl::CeGuiString>& eigenschaften,
+               int ebe,
+			   int gruppe,
+			   const rl::CeGuiString art);
+
+        bool operator==(const Talent& rhs) const;
+        bool operator<(const Talent& rhs) const;
+        rl::CeGuiString getName() const;
+        rl::CeGuiString getDescription() const;
+		int getEbe() const;
+
+        /// Berechnet effektive Behinderung bei gegebener Behinderung;
+        int calculateEbe(int be) const;
+        Tripel<rl::CeGuiString> getEigenschaften() const;
+    };
+
+    class ActionGroup
+	{
+	public:
+		ActionGroup(rl::CeGuiString name, ActionGroup* parent = NULL);
+		~ActionGroup();
+	
+		const rl::CeGuiString getName() const;
+	};
+	
+	%feature("director") Action;   
+    class Action
+    {
+    public:
+    	static const int ACT_NORMAL = 1<<0;
+		static const int ACT_INVIS_DESC = 1<<1;
+		static const int ACT_DISABLED = 1<<2;
+		static const int ACT_NEEDS_TALENT = 1<<8;
+
+		static const int TC_NO_TARGET = 0;
+		static const int TC_GAMEOBJECT = 1;
+		static const int TC_CREATURE = 2;
+		static const int TC_ITEM = 3;
+		static const int TC_POINT = 4;
+		static const int TC_RADIUS = 5;
+		static const int TC_POINT_AND_RADIUS = 6;
+    
+        Action(const rl::CeGuiString name, const rl::CeGuiString description);
+        virtual ~Action();
+
+        virtual const rl::CeGuiString getName() const;
+        //virtual const rl::CeGuiString getClassName() const;
+        virtual const rl::CeGuiString getDescription() const;
+        virtual int getTargetClass() const;
+        virtual void doAction(rl::GameObject *object, rl::Creature *actor,
+            rl::GameObject *target);
+        virtual bool canDo(rl::GameObject* object, rl::Creature* actor) const;
+            
+        void setGroup(rl::ActionGroup* group);
+		rl::ActionGroup* getGroup() const;
+    };
+    
+	%feature("director") ObjectStateChangeListener; 	 
+	class ObjectStateChangeListener 	 
+	{ 	 
+	public: 	 
+		virtual ~ObjectStateChangeListener(); 	 
+		  	 
+		virtual void objectStateChanged(rl::ObjectStateChangeEvent *anEvent) = 0; 	 
+	};
+		 	 
+		  	 
+	class ObjectStateChangeEventSource 	 
+	{ 	 
+	public: 	 
+		ObjectStateChangeEventSource( ); 	 
+		  	 
+		void addObjectStateChangeListener( rl::ObjectStateChangeListener*  list ); 	 
+		void removeObjectStateChangeListener( rl::ObjectStateChangeListener* list ); 	 
+		bool hasListeners( ) const; 	 
+		rl::GameObject* getObject() const;
+		void fireObjectStateChangeEvent(); 	 
+	}; 	 
+		  	 
+	class ObjectStateChangeEvent 	 
+	{ 	 
+	public: 	 
+		ObjectStateChangeEvent( rl::ObjectStateChangeEventSource* src ); 	 
+		rl::GameObject* getProvokingObject() const; 	 
+		rl::ObjectStateChangeEventSource* getSource() const; 	 
+	};
+		    
+	enum GameObjectState
+    {
+        GOS_UNDEFINED = 0,
+        GOS_UNLOADED,
+        GOS_LOADED,
+        GOS_IN_POSSESSION,
+        GOS_IN_SCENE,
+        GOS_HELD,
+        GOS_READY
+    };
+    
+    %feature("director") GameObject;
+    class GameObject: public ObjectStateChangeEventSource
+    {
+    public:
+        GameObject(unsigned int id);
+        virtual ~GameObject();
+
+        virtual unsigned int getId();
+
+        virtual const rl::CeGuiString getName() const;
+        virtual void setName(rl::CeGuiString name);
+
+        const rl::CeGuiString getDescription() const;
+        virtual void setDescription(rl::CeGuiString description);   
+        
+        void setActor(rl::Actor* actor);
+		rl::Actor* getActor();
+
+        void addAction(rl::Action *action, int option = ACT_NORMAL);
+        void addActionInGroup(Action* action, ActionGroup* group, int option = ACT_NORMAL);
+        void removeAction(rl::Action *action);
+
+        const std::vector<Action*> getValidActions(rl::Creature *actor) const;        
+        void setPosition(const Ogre::Vector3& position);
+        void setOrientation(const Ogre::Quaternion& orientation);
+	    const Ogre::Quaternion& getOrientation() const;
+        const Ogre::Vector3& getPosition() const;
+        
+        void setMeshfile(rl::CeGuiString meshfile);
+        
+        virtual Action* getDefaultAction(rl::Creature* actor) const;
+        
+        void doAction(
+			const rl::CeGuiString actionName, 
+			rl::Creature* actor,
+            rl::GameObject* target);
+        void doAction(
+			const rl::CeGuiString actionName);
+        void doAction(rl::Action* action, rl::Creature* actor,
+            rl::GameObject* target);
+            
+        void doDefaultAction(rl::Creature* actor, rl::GameObject* target);
+            
+		static const rl::CeGuiString DEFAULT_VIEW_OBJECT_ACTION;
+		
+		bool isHighlightingEnabled();
+        void setHighlightingEnabled( bool highlightenabled );
+        
+        virtual const rl::Property getProperty(const Ogre::String& key) const;
+        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
+        
+        void placeIntoScene();
+        void removeFromScene();
+        
+        rl::GameObjectState getState() const;
+        virtual void setState(rl::GameObjectState state);
+    };
+    
+    %feature("director") Item;
+    class Item : public rl::GameObject {
+    public:
+        enum ItemType{
+			ITEMTYPE_WEAPON     = 1 << 0,
+			ITEMTYPE_SHIELD     = 1 << 1,
+			ITEMTYPE_RING       = 1 << 2,
+			ITEMTYPE_GLOVES     = 1 << 3,
+			ITEMTYPE_BRACELET   = 1 << 4,
+			ITEMTYPE_ARMOR      = 1 << 5,
+			ITEMTYPE_CAPE       = 1 << 6,
+			ITEMTYPE_BRACERS    = 1 << 7,
+			ITEMTYPE_BACKPACK   = 1 << 8,
+			ITEMTYPE_BELT       = 1 << 9,
+			ITEMTYPE_NECKLACE   = 1 << 10,
+			ITEMTYPE_HELMET     = 1 << 11,
+			ITEMTYPE_TROUSERS   = 1 << 12,
+			ITEMTYPE_SHINBONE   = 1 << 13,
+			ITEMTYPE_BOOTS      = 1 << 14,
+			ITEMTYPE_OTHER      = 1 << 15,
+            ITEMTYPE_ALL_ITEMS  = ~(0)
+		};
+    
+        Item(unsigned int id);
+        virtual ~Item();
+        
+        void setItemType(rl::Item::ItemType itemType);
+        rl::Item::ItemType getItemType() const;
+        virtual void setState(rl::GameObjectState state);
+
+        virtual const rl::Property getProperty(const Ogre::String& key) const;
+        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
+    };
+    
+    %feature("director") Weapon;
+    class Weapon : public rl::Item 
+    {
+    public:
+		enum Distanzklasse { DK_H=0, DK_N, DK_S, DK_P };
+
+        Weapon(unsigned int id);
+        virtual ~Weapon();
+                
+		void setTp(int d6, int d20, int mod);
+		const Tripel<int>& getTp() const;
+		void setTpKk(int base, int step);
+		const pair<int, int>& getTpKk() const;
+		void setBf(int newBf);
+		int getBf();
+		void setIni(int newIni);
+		int getIni();
+		void setWm(pair<int, int>& newWm);
+		const pair<int,int>& getWm() const;
+		void setDk(Weapon::Distanzklasse newDk);
+		Weapon::Distanzklasse getDk();
+		void setKampftechnik(const rl::CeGuiString newKampftechnik);
+		const rl::CeGuiString getKampftechnik() const;
+
+        virtual const rl::Property getProperty(const Ogre::String& key) const;
+        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
+    };
+    
+    %feature("director") Armor;
+    class Armor : public Item
+    {
+    public:
+        Armor(unsigned int id);
+        virtual ~Armor();
+
+        virtual const rl::Property getProperty(const Ogre::String& key) const;
+        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
+    };
+    
+    %feature("director") Container;
+    class Container : public Item
+    {
+    public:
+        Container(unsigned int id);
+        virtual ~Container();
+
+        Ogre::Real getCapacity() const;
+        void setCapacity(Ogre::Real capacity);
+        void setVolume(unsigned int x, unsigned int y);
+        Ogre::Real getContentWeight() const;
+        void addItem(rl::Item* item);
+        void removeItem(rl::Item* item);
+        rl::ItemSet getItems() const;
+        int getItemCount() const;
+        rl::Item* getItemAt(unsigned int x, unsigned int y);
+
+        virtual const rl::Property getProperty(const Ogre::String& key) const;
+        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
+	};
+	
+	class StateSet
+	{
+	public:
+		StateSet();
+		virtual ~StateSet();
+
+		virtual int getValue(bool getUnmodfiedValue = false) const;
+		virtual int getOriginalValue() const;
+		virtual void setOriginalValue(int newValue);
+		virtual int getModifier() const;
+		virtual void setModifier(int newModifier);
+		virtual void modifyModifier(int modifier);
+		virtual int getProbenModifier() const;
+		virtual void setProbenModifier(int newProbenModifier);
+		virtual void modifyProbenModifier(int modifier);
+		virtual int getMultiplier() const;
+		virtual void setMultiplier(int newMultiplier);
+	};
+
+	class EigenschaftenStateSet : public StateSet
+	{
+	public:
+		EigenschaftenStateSet();
+		~EigenschaftenStateSet();
+
+		int getStartValue();
+		void setStartValue( int newStartValue );
+		int getPermanentModifier();
+		void setPermanentModifier( int newPermanentModifier );
+		int getModifierWithoutRecalculation();
+		void setModifierWithoutRecalculation( int newModifierWithoutRecalculation );
+
+		int getValue( bool getUnmodifiedValue = false );
+		int getValueForBasiswertCalculation();
+	};
+	
+	class SonderfertigkeitenStateSet : public StateSet
+	{
+	public:
+		SonderfertigkeitenStateSet();
+		~SonderfertigkeitenStateSet();
+
+		void setModifier( int newModifier );
+		int getLehrmeisterZeiteinheiten();
+		void setLehrmeisterZeiteinheiten( int newLehrmeisterZeiteinheiten );
+	};
+	
+	class TalentStateSet : public StateSet
+	{
+	public:
+		TalentStateSet();
+		~TalentStateSet();
+
+		bool getSe();
+		void setSe(bool newSe);
+		int getLehrmeisterZeiteinheiten();
+		void setLehrmeisterZeiteinheiten( int newLehrmeisterZeiteinheiten );
+		int getSelbststudiumZeiteinheiten();
+		void setSelbststudiumZeiteinheiten( int newSelbststudiumZeiteinheiten );
+	};
+	
+	%feature("director") Effect;
+	class Effect
+	{
+	public:
+        enum Quantifier
+        {
+            QUANTIFIER_MULTIPLE,
+            QUANTIFIER_UNIQUE,
+            QUANTIFIER_UNIQUE_BUT_PROLONGABLE,
+            QUANTIFIER_UNIQUE_BUT_CUMULATIVE
+        };
+
+        enum EffectTag
+        {
+            EFFECTTAG_NONE,
+            EFFECTTAG_KRANKHEIT
+        };
+
+		Effect(int stufe = 1);
+		virtual ~Effect();
+
+        const rl::CeGuiString getName() const;
+        void setName(rl::CeGuiString name);
+        const rl::CeGuiString getDescription() const;
+        void setDescription(rl::CeGuiString description);
+		rl::Creature* getOwner() const;
+		void setOwner(rl::Creature* owner);
+		virtual int getDuration();
+		virtual void setDuration(int newDuration);
+		Quantifier getQuantifier();
+		void setQuantifier(Quantifier quantifier);
+		virtual void addTag(EffectTag tagId);
+		virtual void removeTag(EffectTag tagId);
+		virtual bool queryTag(EffectTag tagId);
+		virtual const int getStufe();
+		virtual void increaseStufe();
+		virtual void decreaseStufe();
+		virtual void enable();
+		virtual void disable();
+		virtual void check() = 0;
+
+	protected:
+		virtual void apply() = 0;
+		virtual void remove() = 0;
+		virtual RL_LONGLONG getTimePassed();
+	};
+	
+	class Inventory 
+	{
+    private:
+        Inventory(rl::Creature* owner);
+	public:
+	    void addSlot(const rl::CeGuiString& name, const Ogre::String& bone, int itemMask);
+	    rl::Item* getItem(const rl::CeGuiString& slotName);
+        void hold(rl::Item* item, const rl::CeGuiString& slot);
+	};
+
+    %feature("director") Creature;
+    class Creature : public GameObject {
+    public:
+
+        enum Wert
+        {
+            WERT_MOD_AE = 1, // Astralenergie
+            WERT_MOD_LE, // Lebensenergie
+            WERT_MOD_AT, // Attacke
+            WERT_MOD_PA, // Parade
+            WERT_MOD_FK, // Fernkampf
+            WERT_MOD_AU, // Ausdauer
+            WERT_MOD_MR, // Magieresistenz
+            WERT_MOD_INI, // Initiative
+            WERT_MOD_REGENERATION_LE, // Naechtliche Regeneration. modifier modifiziert den W6, ProbenModifier modifiziert die KO-Probe.
+            WERT_MOD_REGENERATION_AE, // Astrale Regeneration. modifier modifiziert den W6, ProbenModifier modifiziert die IN-Probe.
+            WERT_MOD_ERSCHOEPFUNGSSCHWELLE, // Die Modifkitoren von KO bezueglich der Erschoepfungsschwelle.
+            WERT_MOD_ALL_EIGENSCHAFTSPROBEN, // Modifiziert alle Proben, die mit 1W20 gewuerfelt werden.
+            WERT_MOD_ALL_TALENTPROBEN, // Modifiziert alle Proben, die mit 3W20 gewuerfelt werden.
+            WERT_GS, // Geschwindigkeit
+            WERT_SOZIALSTATUS, // Sozialstatus
+            WERT_BE // Behinderung
+        };
+
+        Creature(unsigned int id);
+        virtual ~Creature();
+
+        virtual int getLe();
+        virtual void modifyLe(int mod, bool ignoreMax);
+        virtual void modifyAe(int mod);
+        virtual void modifyAu(int mod);
+        void setWert(Wert wertId, int value);
+        virtual StateSet* getWertStateSet(Wert wertId);
+        
+        virtual int getEigenschaft(const rl::CeGuiString eigenschaftName);
+        virtual void setEigenschaft(const rl::CeGuiString eigenschaftName, int value);
+        virtual void modifyEigenschaft(const rl::CeGuiString eigenschaftName, int mod);
+		virtual EigenschaftenStateSet* getEigenschaftenStateSet(const rl::CeGuiString eigenschaftName);
+		
+        void addTalent(const rl::CeGuiString talentName, int value=0);
+        virtual int getTalent(const rl::CeGuiString talentName);
+        virtual void setTalent(const rl::CeGuiString talentName, int value);
+        virtual void modifyTalent(const rl::CeGuiString talentName, int mod);
+		virtual void addSe(const rl::CeGuiString talentName);
+		virtual TalentStateSet* getTalentStateSet(const rl::CeGuiString talentName);
+		
+		void addVorteil(const rl::CeGuiString vorteilName, int value = 0);
+		void addNachteil(const rl::CeGuiString nachteilName, int value = 0);		
+		
+        void addKampftechnik(const rl::CeGuiString kampftechnikName, std::pair<int,int> value = make_pair(0,0));
+        
+		virtual SonderfertigkeitenStateSet* getSonderfertigkeitenStateSet(const rl::CeGuiString sfName);
+
+        virtual int doTalentprobe(const rl::CeGuiString talentName, int modifier);
+        virtual int doEigenschaftsprobe(const rl::CeGuiString eigenschaftName, int modifier);
+        
+        rl::Inventory* getInventory();
+        
+		void addEffect(Effect* effect);
+		void damageLe(int tp, int damageType = LEDAMAGE_NORMAL);
+        static const int LEDAMAGE_NORMAL = 0;
+        static const int LEDAMAGE_FIRE = 1;
+        static const int LEDAMAGE_WATER = 2;
+        static const int LEDAMAGE_DEMONIC = 4;
+        void damageAu(int aup, int damageType = AUDAMAGE_NORMAL);
+        static const int AUDAMAGE_NORMAL = 0;
+        static const int AUDAMAGE_HEAT = 1;
+        static const int AUDAMAGE_COLD = 2;
+        static const int AUDAMAGE_CHOKE = 4;
+        static const int AUDAMAGE_DROWN = 8;
+
+        virtual const rl::Property getProperty(const Ogre::String& key) const;
+        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
+   };
+   
+   %feature("director") Person;
+   class Person : public Creature
+   {
+   public:
+	    Person(unsigned int id);
+
+        virtual const rl::Property getProperty(const Ogre::String& key) const;
+        virtual void setProperty(const Ogre::String& key, const rl::Property& value);
+	};
+		
+	%feature("director") CompositeEffect;	
+	class CompositeEffect : public Effect
+	{
+	public:
+		CompositeEffect();
+		virtual ~CompositeEffect();
+
+		void addEffect(Effect* effect);
+		virtual void check();
+	protected:
+		void apply();
+		void remove();
+	};
+
+	%feature("director") ActionMananger;
+    class ActionManager
+    {
+    public:
+        void registerAction(rl::Action* action);
+        void unregisterAction(const rl::CeGuiString actionName);
+		rl::Action* getAction(const rl::CeGuiString actionName) const;
+
+		void registerInGameGlobalAction(rl::Action* action, rl::ActionGroup* group);
+	
+        static rl::ActionManager& getSingleton();
+	};
+	
+	%feature("director") TimerListener;
+	class TimerListener
+	{
+	public:
+		virtual ~TimerLister();
+	  
+  		virtual void timerFired(rl::TimerEvent* anEvent) = 0;
+	};
+	
+	class TimerEventSource
+	{
+	public:
+		static const RL_LONGLONG NO_REPEAT;
+
+		TimerEventSource( const RL_LONGLONG gameTime, const RL_LONGLONG interval = rl::TimerEventSource::NO_REPEAT );
+		TimerEventSource( const rl::Date dsaTime, const rl::Date interval = rl::TimerEventSource::NO_REPEAT );
+	
+		void addTimerListener( rl::TimerListener* ist );
+        void removeTimerListener( rl::TimerListener* ist );
+	};
+	
+	class TimerEvent
+	{
+	public:
+		TimerEvent( rl::TimerEventSource* src );
+	
+		Ogre::Real getTime();
+		rl::Date getGameTime();
+
+		rl::TimerEventSource* getSource() const;
+	};
+} // Namespace
+
+%{
+static swig_type_info *GameObject_dynamic_cast(void **ptr)
+{
+    rl::GameObject **ppGameObject = reinterpret_cast<rl::GameObject**>(ptr);
+
+    rl::Person *pPerson=dynamic_cast<rl::Person*>(*ppGameObject);
+    if (pPerson) {
+        *ptr=reinterpret_cast<void*>(pPerson);
+        return SWIGTYPE_p_rl__Person;
+    }
+    rl::Creature *pCreature=dynamic_cast<rl::Creature*>(*ppGameObject);
+    if (pCreature) {
+        *ptr=reinterpret_cast<void*>(pCreature);
+        return SWIGTYPE_p_rl__Creature;
+    }
+    rl::Weapon *pWeapon=dynamic_cast<rl::Weapon*>(*ppGameObject);
+    if (pWeapon) {
+        *ptr=reinterpret_cast<void*>(pWeapon);
+        return SWIGTYPE_p_rl__Weapon;
+    }
+    rl::Armor *pArmor=dynamic_cast<rl::Armor*>(*ppGameObject);
+    if (pArmor) {
+        *ptr=reinterpret_cast<void*>(pArmor);
+        return SWIGTYPE_p_rl__Armor;
+    }
+    rl::Container *pContainer=dynamic_cast<rl::Container*>(*ppGameObject);
+    if (pContainer) {
+        *ptr=reinterpret_cast<void*>(pContainer);
+        return SWIGTYPE_p_rl__Container;
+    }
+    rl::Item *pItem=dynamic_cast<rl::Item*>(*ppGameObject);
+    if (pItem) {
+        *ptr=reinterpret_cast<void*>(pItem);
+        return SWIGTYPE_p_rl__Item;
+    }
+    return 0;
+}
+%}
+DYNAMIC_CAST(SWIGTYPE_p_rl__GameObject, GameObject_dynamic_cast);
+


Property changes on: rl/trunk/engine/script/swig/RlRules.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlScript.head.inc
===================================================================
--- rl/trunk/engine/script/swig/RlScript.head.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlScript.head.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,20 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%{
-//----------- Includes - Script -----------
-#include "ScriptSubsystem.h"
-%}
\ No newline at end of file

Added: rl/trunk/engine/script/swig/RlScript.head.swig
===================================================================
--- rl/trunk/engine/script/swig/RlScript.head.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlScript.head.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,20 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%{
+//----------- Includes - Script -----------
+#include "ScriptSubsystem.h"
+%}
\ No newline at end of file


Property changes on: rl/trunk/engine/script/swig/RlScript.head.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlScript.inc
===================================================================
--- rl/trunk/engine/script/swig/RlScript.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlScript.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,25 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-namespace rl {
-	class ScriptSubsystem
-	{
-	public:
-		static rl::ScriptSubsystem& getSingleton();
-
-		void log(const rl::CeGuiString& message);
-	};
-}
\ No newline at end of file

Added: rl/trunk/engine/script/swig/RlScript.swig
===================================================================
--- rl/trunk/engine/script/swig/RlScript.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlScript.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,25 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+namespace rl {
+	class ScriptSubsystem
+	{
+	public:
+		static rl::ScriptSubsystem& getSingleton();
+
+		void log(const rl::CeGuiString& message);
+	};
+}
\ No newline at end of file


Property changes on: rl/trunk/engine/script/swig/RlScript.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlUi.head.inc
===================================================================
--- rl/trunk/engine/script/swig/RlUi.head.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlUi.head.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,29 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%{
-//----------- Includes - UI -----------
-#include "FixRubyHeaders.h"
-
-#include "CharacterController.h"
-#include "CommandMapper.h"
-#include "CutsceneCharacterController.h"
-#include "GameLoggerWindow.h"
-#include "UiPrerequisites.h"
-#include "UiSubsystem.h"
-#include "WindowFactory.h"
-#include "WindowManager.h"
-%}
\ No newline at end of file

Added: rl/trunk/engine/script/swig/RlUi.head.swig
===================================================================
--- rl/trunk/engine/script/swig/RlUi.head.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlUi.head.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,29 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%{
+//----------- Includes - UI -----------
+#include "FixRubyHeaders.h"
+
+#include "CharacterController.h"
+#include "CommandMapper.h"
+#include "CutsceneCharacterController.h"
+#include "GameLoggerWindow.h"
+#include "UiPrerequisites.h"
+#include "UiSubsystem.h"
+#include "WindowFactory.h"
+#include "WindowManager.h"
+%}
\ No newline at end of file


Property changes on: rl/trunk/engine/script/swig/RlUi.head.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/RlUi.inc
===================================================================
--- rl/trunk/engine/script/swig/RlUi.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlUi.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,158 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-namespace rl {
-
-%apply SWIGTYPE *DYNAMIC { rl::CharacterController * };
-
-%feature("director") CharacterController;
-class CharacterController
-{
-private:
-	CharacterController(rl::Actor* camera, rl::Actor* character);
-public:
-	enum ControllerType 
-	{
-		CTRL_NONE = 1,
-		CTRL_FREEFLIGHT,
-		CTRL_MOVEMENT,
-		CTRL_DIALOG,
-		CTRL_CUTSCENE,
-        CTRL_VANITY_MODE,
-		CTRL_COMBAT,
-	};
-	
-	rl::CharacterController::ControllerType getType();
-
-     /**
-       *  @throw NullPointerException if camera or character is NULL.
-       *  @throw InvalidArgumentException if character is not placed in the scene.
-       */
-    void toggleViewMode();
-    void resetCamera();
-        
-};
-
-class CutsceneCharacterController : public CharacterController
-{
-private:
-   	CutsceneCharacterController(rl::Actor* camera);
-
-public:
-	virtual ~CutsceneCharacterController();
-
-	ControllerType getType() const;
-
-	void toggleViewMode();
-    void resetCamera();
-
-    void setCameraPosition(const Ogre::Vector3& pos);
-    void setCameraOrientation(const Ogre::Quaternion& orient);
-    void lookAt(const Ogre::Vector3& point);
-};
-
-class UiSubsystem 
-{
-public:
-    static UiSubsystem& getSingleton(void);
-	void initializeSubsystem();
-	    
-	rl::Person* getActiveCharacter();
-	void setActiveCharacter(rl::Person* chara);
-
-	rl::CharacterController* getCharacterController() const;
-	rl::CharacterController::ControllerType getCharacterControllerType() const;
-	void setCharacterController(rl::CharacterController::ControllerType type);
-	void linkKeyToRubyCommand(const rl::CeGuiString &key, const rl::CeGuiString &command);
-};
-
-class GameLoggerWindow
-{
-public:
-	void logDialogEvent(const rl::CeGuiString& speaker, const rl::CeGuiString& text);
-	void logFightEvent(const rl::CeGuiString& text);
-	void logCharacterEvent(const rl::CeGuiString& text);
-	void logMiscEvent(const rl::CeGuiString& text);
-};
-
-class WindowFactory
-{
-public:
-	enum PopupType
-	{
-		ICON_ERROR = 1,
-		ICON_QUEST
-	};
-
-	static rl::WindowFactory& getSingleton();
-
-	void update();
-
-	void showAboutWindow();
-	void showActionChoice(rl::GameObject* obj);
-	void showCharacterActionChoice();
-	void showCharacterSheet();
-	void showCharacterSheet(rl::Person* chara);
-	void showContainerContent(rl::Container* container);
-	void showDescriptionWindow(rl::GameObject* obj);
-	void showDialog(rl::DialogCharacter* bot);
-	void showExitConfirmation();
-	void showJournalWindow();
-	void showLogfiles();
-	void showMainMenu();
-	void showMessageWindow(const rl::CeGuiString& message);
-    void showPlaylist();
-	void showPopupMessage(int popupTypes);
-    void showSoundConfig();
-
-	void toggleConsole();
-	void toggleDebugWindow();
-	void toggleGameLogWindow();
-	void toggleCharacterStateWindow();
-	void toggleInGameGlobalMenu();
-	void toggleInventoryWindow();	
-
-	void checkForErrors();
-	rl::GameLoggerWindow* getGameLogger();
-	
-    void showNextDebugWindowPage();
-};
-
-class WindowManager
-{
-public:
-	static rl::WindowManager& getSingleton();
-	void closeTopWindow();
-};
-
-} //namespace rl
-
-%{
-static swig_type_info *CharacterController_dynamic_cast(void **ptr)
-{
-    rl::CharacterController **ppCharacterController = 
-        reinterpret_cast<rl::CharacterController**>(ptr);
-
-    rl::CutsceneCharacterController *pCutSceneCC = 
-        dynamic_cast<rl::CutsceneCharacterController*>(*ppCharacterController);
-    if (pCutSceneCC != NULL) {
-        *ptr=reinterpret_cast<void*>(pCutSceneCC);
-        return SWIGTYPE_p_rl__CutsceneCharacterController;
-    }
-    return 0;
-}
-%}
-DYNAMIC_CAST(SWIGTYPE_p_rl__CharacterController, CharacterController_dynamic_cast);

Added: rl/trunk/engine/script/swig/RlUi.swig
===================================================================
--- rl/trunk/engine/script/swig/RlUi.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/RlUi.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,158 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+namespace rl {
+
+%apply SWIGTYPE *DYNAMIC { rl::CharacterController * };
+
+%feature("director") CharacterController;
+class CharacterController
+{
+private:
+	CharacterController(rl::Actor* camera, rl::Actor* character);
+public:
+	enum ControllerType 
+	{
+		CTRL_NONE = 1,
+		CTRL_FREEFLIGHT,
+		CTRL_MOVEMENT,
+		CTRL_DIALOG,
+		CTRL_CUTSCENE,
+        CTRL_VANITY_MODE,
+		CTRL_COMBAT,
+	};
+	
+	rl::CharacterController::ControllerType getType();
+
+     /**
+       *  @throw NullPointerException if camera or character is NULL.
+       *  @throw InvalidArgumentException if character is not placed in the scene.
+       */
+    void toggleViewMode();
+    void resetCamera();
+        
+};
+
+class CutsceneCharacterController : public CharacterController
+{
+private:
+   	CutsceneCharacterController(rl::Actor* camera);
+
+public:
+	virtual ~CutsceneCharacterController();
+
+	ControllerType getType() const;
+
+	void toggleViewMode();
+    void resetCamera();
+
+    void setCameraPosition(const Ogre::Vector3& pos);
+    void setCameraOrientation(const Ogre::Quaternion& orient);
+    void lookAt(const Ogre::Vector3& point);
+};
+
+class UiSubsystem 
+{
+public:
+    static UiSubsystem& getSingleton(void);
+	void initializeSubsystem();
+	    
+	rl::Person* getActiveCharacter();
+	void setActiveCharacter(rl::Person* chara);
+
+	rl::CharacterController* getCharacterController() const;
+	rl::CharacterController::ControllerType getCharacterControllerType() const;
+	void setCharacterController(rl::CharacterController::ControllerType type);
+	void linkKeyToRubyCommand(const rl::CeGuiString &key, const rl::CeGuiString &command);
+};
+
+class GameLoggerWindow
+{
+public:
+	void logDialogEvent(const rl::CeGuiString& speaker, const rl::CeGuiString& text);
+	void logFightEvent(const rl::CeGuiString& text);
+	void logCharacterEvent(const rl::CeGuiString& text);
+	void logMiscEvent(const rl::CeGuiString& text);
+};
+
+class WindowFactory
+{
+public:
+	enum PopupType
+	{
+		ICON_ERROR = 1,
+		ICON_QUEST
+	};
+
+	static rl::WindowFactory& getSingleton();
+
+	void update();
+
+	void showAboutWindow();
+	void showActionChoice(rl::GameObject* obj);
+	void showCharacterActionChoice();
+	void showCharacterSheet();
+	void showCharacterSheet(rl::Person* chara);
+	void showContainerContent(rl::Container* container);
+	void showDescriptionWindow(rl::GameObject* obj);
+	void showDialog(rl::DialogCharacter* bot);
+	void showExitConfirmation();
+	void showJournalWindow();
+	void showLogfiles();
+	void showMainMenu();
+	void showMessageWindow(const rl::CeGuiString& message);
+    void showPlaylist();
+	void showPopupMessage(int popupTypes);
+    void showSoundConfig();
+
+	void toggleConsole();
+	void toggleDebugWindow();
+	void toggleGameLogWindow();
+	void toggleCharacterStateWindow();
+	void toggleInGameGlobalMenu();
+	void toggleInventoryWindow();	
+
+	void checkForErrors();
+	rl::GameLoggerWindow* getGameLogger();
+	
+    void showNextDebugWindowPage();
+};
+
+class WindowManager
+{
+public:
+	static rl::WindowManager& getSingleton();
+	void closeTopWindow();
+};
+
+} //namespace rl
+
+%{
+static swig_type_info *CharacterController_dynamic_cast(void **ptr)
+{
+    rl::CharacterController **ppCharacterController = 
+        reinterpret_cast<rl::CharacterController**>(ptr);
+
+    rl::CutsceneCharacterController *pCutSceneCC = 
+        dynamic_cast<rl::CutsceneCharacterController*>(*ppCharacterController);
+    if (pCutSceneCC != NULL) {
+        *ptr=reinterpret_cast<void*>(pCutSceneCC);
+        return SWIGTYPE_p_rl__CutsceneCharacterController;
+    }
+    return 0;
+}
+%}
+DYNAMIC_CAST(SWIGTYPE_p_rl__CharacterController, CharacterController_dynamic_cast);


Property changes on: rl/trunk/engine/script/swig/RlUi.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeOgreColourValue.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreColourValue.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreColourValue.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,102 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-/* Typemaps fuer ColourValue.
- * Ein ColourValue wird einfach auf ein dreielementiges Array abgebildet.
- * 
- */
-
-%typecheck(SWIG_TYPECHECK_DOUBLE_ARRAY) Ogre::ColourValue, const Ogre::ColourValue, Ogre::ColourValue*, Ogre::ColourValue&,
-   const Ogre::ColourValue*, const Ogre::ColourValue&
-{
-   $1 = TYPE($input) == T_ARRAY && RARRAY($input)->len == 4 ? 1 : 0;
-}
- 
-%typemap(in) Ogre::ColourValue, const Ogre::ColourValue
-{
-   Ogre::ColourValue vec(0.0, 0.0, 0.0);
-   int length = RARRAY($input)->len;
-   VALUE* it = RARRAY($input)->ptr;
-   if (length > 0) {
-      Check_Type(*it, T_FLOAT);
-      vec.r = RFLOAT(*it)->value;
-      it++;
-   }
-   if (length > 1) {
-      Check_Type(*it, T_FLOAT);
-      vec.g = RFLOAT(*it)->value;
-      it++;
-   }
-   if (length > 2) {
-      Check_Type(*it, T_FLOAT);
-      vec.b = RFLOAT(*it)->value;
-   }
-   if (length > 3) {
-      Check_Type(*it, T_FLOAT);
-      vec.a = RFLOAT(*it)->value;
-   }
-   $1 = vec;
-}
-
-%typemap(in) Ogre::ColourValue*, Ogre::ColourValue&,
-   const Ogre::ColourValue*, const Ogre::ColourValue&
-{
-   Ogre::ColourValue* vec = new Ogre::ColourValue(0.0, 0.0, 0.0);
-   int length = RARRAY($input)->len;
-   VALUE* it = RARRAY($input)->ptr;
-   if (length > 0) {
-      vec->r = NUM2DBL(*it);
-      it++;
-   }
-   if (length > 1) {
-      vec->g = NUM2DBL(*it);
-      it++;
-   }
-   if (length > 2) {
-      vec->b = NUM2DBL(*it);
-      it++;
-   }
-   if (length > 3) {
-      vec->a = NUM2DBL(*it);
-   }
-   $1 = vec;
-}
-%typemap(freearg) Ogre::ColourValue*, Ogre::ColourValue&,
-   const Ogre::ColourValue*, const Ogre::ColourValue&  
-"   delete $1;"
-
-%typemap(out) Ogre::ColourValue, const Ogre::ColourValue {
-   VALUE array = rb_ary_new();
-   rb_ary_push(array, rb_float_new($1.r));
-   rb_ary_push(array, rb_float_new($1.g));
-   rb_ary_push(array, rb_float_new($1.b));
-   rb_ary_push(array, rb_float_new($1.a));
-   $result = array;
-}
-
-%typemap(out) Ogre::ColourValue*, const Ogre::ColourValue*, const Ogre::ColourValue&, Ogre::Vector& {
-   VALUE array = rb_ary_new();
-   rb_ary_push(array, rb_float_new($1->r));
-   rb_ary_push(array, rb_float_new($1->g));
-   rb_ary_push(array, rb_float_new($1->b));
-   rb_ary_push(array, rb_float_new($1->a));
-   $result = array;
-} 
-
-%typemap(freearg) Ogre::ColourValue*, Ogre::ColourValue&,
-   const Ogre::ColourValue*, const Ogre::ColourValue&  
-"   delete $1;"
-

Added: rl/trunk/engine/script/swig/TypeOgreColourValue.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreColourValue.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreColourValue.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,102 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+/* Typemaps fuer ColourValue.
+ * Ein ColourValue wird einfach auf ein dreielementiges Array abgebildet.
+ * 
+ */
+
+%typecheck(SWIG_TYPECHECK_DOUBLE_ARRAY) Ogre::ColourValue, const Ogre::ColourValue, Ogre::ColourValue*, Ogre::ColourValue&,
+   const Ogre::ColourValue*, const Ogre::ColourValue&
+{
+   $1 = TYPE($input) == T_ARRAY && RARRAY($input)->len == 4 ? 1 : 0;
+}
+ 
+%typemap(in) Ogre::ColourValue, const Ogre::ColourValue
+{
+   Ogre::ColourValue vec(0.0, 0.0, 0.0);
+   int length = RARRAY($input)->len;
+   VALUE* it = RARRAY($input)->ptr;
+   if (length > 0) {
+      Check_Type(*it, T_FLOAT);
+      vec.r = RFLOAT(*it)->value;
+      it++;
+   }
+   if (length > 1) {
+      Check_Type(*it, T_FLOAT);
+      vec.g = RFLOAT(*it)->value;
+      it++;
+   }
+   if (length > 2) {
+      Check_Type(*it, T_FLOAT);
+      vec.b = RFLOAT(*it)->value;
+   }
+   if (length > 3) {
+      Check_Type(*it, T_FLOAT);
+      vec.a = RFLOAT(*it)->value;
+   }
+   $1 = vec;
+}
+
+%typemap(in) Ogre::ColourValue*, Ogre::ColourValue&,
+   const Ogre::ColourValue*, const Ogre::ColourValue&
+{
+   Ogre::ColourValue* vec = new Ogre::ColourValue(0.0, 0.0, 0.0);
+   int length = RARRAY($input)->len;
+   VALUE* it = RARRAY($input)->ptr;
+   if (length > 0) {
+      vec->r = NUM2DBL(*it);
+      it++;
+   }
+   if (length > 1) {
+      vec->g = NUM2DBL(*it);
+      it++;
+   }
+   if (length > 2) {
+      vec->b = NUM2DBL(*it);
+      it++;
+   }
+   if (length > 3) {
+      vec->a = NUM2DBL(*it);
+   }
+   $1 = vec;
+}
+%typemap(freearg) Ogre::ColourValue*, Ogre::ColourValue&,
+   const Ogre::ColourValue*, const Ogre::ColourValue&  
+"   delete $1;"
+
+%typemap(out) Ogre::ColourValue, const Ogre::ColourValue {
+   VALUE array = rb_ary_new();
+   rb_ary_push(array, rb_float_new($1.r));
+   rb_ary_push(array, rb_float_new($1.g));
+   rb_ary_push(array, rb_float_new($1.b));
+   rb_ary_push(array, rb_float_new($1.a));
+   $result = array;
+}
+
+%typemap(out) Ogre::ColourValue*, const Ogre::ColourValue*, const Ogre::ColourValue&, Ogre::Vector& {
+   VALUE array = rb_ary_new();
+   rb_ary_push(array, rb_float_new($1->r));
+   rb_ary_push(array, rb_float_new($1->g));
+   rb_ary_push(array, rb_float_new($1->b));
+   rb_ary_push(array, rb_float_new($1->a));
+   $result = array;
+} 
+
+%typemap(freearg) Ogre::ColourValue*, Ogre::ColourValue&,
+   const Ogre::ColourValue*, const Ogre::ColourValue&  
+"   delete $1;"
+


Property changes on: rl/trunk/engine/script/swig/TypeOgreColourValue.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeOgreQuaternion.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreQuaternion.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreQuaternion.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,191 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-/* Typemaps fuer Quaternion.
- * Ein Quaternion wird auf ein Array aus einem 3-elementigen Array 
- * f?r die Rotationsachse und einem Wert f?r den Winkel abgebildet
- * 
- */
-
-%typemap(typecheck) Ogre::Quaternion, const Ogre::Quaternion& {
-		if (TYPE($input) == T_ARRAY)
-		{
-			int length = RARRAY($input)->len;
-			if (length == 2)
-			{
-				VALUE entry0 = rb_ary_entry($input, 0);
-				VALUE entry1 = rb_ary_entry($input, 1);
-				if ((TYPE(entry1) == T_FLOAT || TYPE(entry1) == T_FIXNUM)
-					&& TYPE(entry0) == T_ARRAY 
-					&& RARRAY(entry0)->len == 3)
-				{
-					$1 = 1;
-				}
-				else
-				{
-					$1 = 0;
-				}
-			}
-			else if (length == 3 || length == 4)
-			{
-				$1 = 1;
-				
-				for (int i = 0; i < length; i++)
-				{
-					if (TYPE(rb_ary_entry($input, i)) != T_FLOAT 
-					    && TYPE(rb_ary_entry($input, i)) != T_FIXNUM)
-					{
-						$1 = 0;
-						break;
-					}
-				}
-			}
-			else
-			{
-				$1 = 0;
-			}
-		}
-		else
-		{
-			$1 = 0;
-		}
-}
-
-%typemap(in) Ogre::Quaternion, const Ogre::Quaternion
-{
-   Ogre::Quaternion quat;
-   
-   if (RARRAY($input)->len == 2)
-   {
-	   VALUE axisVal = rb_ary_entry($input, 0);
-	   Ogre::Vector3 axis(
-				NUM2DBL(rb_ary_entry(axisVal, 0)), 
-				NUM2DBL(rb_ary_entry(axisVal, 1)),
-				NUM2DBL(rb_ary_entry(axisVal, 2)));
-
-	   double angle = NUM2DBL(rb_ary_entry($input, 1));
-	      
-	   quat.FromAngleAxis(Ogre::Degree(angle), axis);
-   }
-   else if (RARRAY($input)->len == 3)
-   {
-	   Quaternion rotX, rotY, rotZ;
-        rotX.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 0))), 
-			Ogre::Vector3::UNIT_X);
-        rotY.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 1))), 
-			Ogre::Vector3::UNIT_Y);
-        rotZ.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 2))), 
-			Ogre::Vector3::UNIT_Z);
-	   
-	   quat = rotX * rotY * rotZ;
-	   quat.normalise();
-   }
-   else if (RARRAY($input)->len == 4)
-   {
-	   quat.w = NUM2DBL(rb_ary_entry($input, 0));
-	   quat.x = NUM2DBL(rb_ary_entry($input, 1));
-	   quat.y = NUM2DBL(rb_ary_entry($input, 2));
-	   quat.z = NUM2DBL(rb_ary_entry($input, 3));
-   }
-   $1 = quat;
-}
-
-%typemap(in) Ogre::Quaternion*, Ogre::Quaternion&,
-   const Ogre::Quaternion*, const Ogre::Quaternion&
-{
-   Ogre::Quaternion* quat = new Ogre::Quaternion();
-   if (RARRAY($input)->len == 2)
-   {
-	   VALUE axisVal = rb_ary_entry($input, 0);
-	   Ogre::Vector3 axis(
-				NUM2DBL(rb_ary_entry(axisVal, 0)), 
-				NUM2DBL(rb_ary_entry(axisVal, 1)),
-				NUM2DBL(rb_ary_entry(axisVal, 2)));
-
-	   double angle = NUM2DBL(rb_ary_entry($input, 1));
-	      
-	   quat->FromAngleAxis(Ogre::Degree(angle), axis);
-   }
-   else if (RARRAY($input)->len == 3)
-   {
-	   Quaternion rotX, rotY, rotZ;
-        rotX.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 0))), 
-			Ogre::Vector3::UNIT_X);
-        rotY.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 1))), 
-			Ogre::Vector3::UNIT_Y);
-        rotZ.FromAngleAxis(
-			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 2))), 
-			Ogre::Vector3::UNIT_Z);
-	   
-	   *quat = rotX * rotY * rotZ;
-	   quat->normalise();
-   }
-   else if (RARRAY($input)->len == 4)
-   {
-	   quat->w = NUM2DBL(rb_ary_entry($input, 0));
-	   quat->x = NUM2DBL(rb_ary_entry($input, 1));
-	   quat->y = NUM2DBL(rb_ary_entry($input, 2));
-	   quat->z = NUM2DBL(rb_ary_entry($input, 3));
-   }   
-   $1 = quat;
-}
-%typemap(freearg)  Ogre::Quaternion*, Ogre::Quaternion&,
-   const Ogre::Quaternion*, const Ogre::Quaternion& 
-"   delete $1;"
-
-
-
-
-%typemap(out) Ogre::Quaternion, const Ogre::Quaternion {
-   Degree angle;
-   Vector3 axis;
-   
-   $1.ToAngleAxis(angle, axis);
-   
-   VALUE arrAxis = rb_ary_new();
-   rb_ary_push(arrAxis, rb_float_new(axis.x));
-   rb_ary_push(arrAxis, rb_float_new(axis.y));
-   rb_ary_push(arrAxis, rb_float_new(axis.z));
-   VALUE rval = rb_ary_new();
-   rb_ary_push(rval, arrAxis);
-   rb_ary_push(rval, rb_float_new(angle.valueDegrees()));
-   
-   $result = rval;
-}
-
-%typemap(out) Ogre::Quaternion*, const Ogre::Quaternion*, const Ogre::Quaternion&, Ogre::Quaternion& {
-   Degree angle;
-   Vector3 axis;
-   
-   $1->ToAngleAxis(angle, axis);
-   
-   VALUE arrAxis = rb_ary_new();
-   rb_ary_push(arrAxis, rb_float_new(axis.x));
-   rb_ary_push(arrAxis, rb_float_new(axis.y));
-   rb_ary_push(arrAxis, rb_float_new(axis.z));
-   VALUE rval = rb_ary_new();
-   rb_ary_push(rval, arrAxis);
-   rb_ary_push(rval, rb_float_new(angle.valueDegrees()));
-   
-   $result = rval;
-} 
-
-

Added: rl/trunk/engine/script/swig/TypeOgreQuaternion.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreQuaternion.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreQuaternion.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,191 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+/* Typemaps fuer Quaternion.
+ * Ein Quaternion wird auf ein Array aus einem 3-elementigen Array 
+ * f?r die Rotationsachse und einem Wert f?r den Winkel abgebildet
+ * 
+ */
+
+%typemap(typecheck) Ogre::Quaternion, const Ogre::Quaternion& {
+		if (TYPE($input) == T_ARRAY)
+		{
+			int length = RARRAY($input)->len;
+			if (length == 2)
+			{
+				VALUE entry0 = rb_ary_entry($input, 0);
+				VALUE entry1 = rb_ary_entry($input, 1);
+				if ((TYPE(entry1) == T_FLOAT || TYPE(entry1) == T_FIXNUM)
+					&& TYPE(entry0) == T_ARRAY 
+					&& RARRAY(entry0)->len == 3)
+				{
+					$1 = 1;
+				}
+				else
+				{
+					$1 = 0;
+				}
+			}
+			else if (length == 3 || length == 4)
+			{
+				$1 = 1;
+				
+				for (int i = 0; i < length; i++)
+				{
+					if (TYPE(rb_ary_entry($input, i)) != T_FLOAT 
+					    && TYPE(rb_ary_entry($input, i)) != T_FIXNUM)
+					{
+						$1 = 0;
+						break;
+					}
+				}
+			}
+			else
+			{
+				$1 = 0;
+			}
+		}
+		else
+		{
+			$1 = 0;
+		}
+}
+
+%typemap(in) Ogre::Quaternion, const Ogre::Quaternion
+{
+   Ogre::Quaternion quat;
+   
+   if (RARRAY($input)->len == 2)
+   {
+	   VALUE axisVal = rb_ary_entry($input, 0);
+	   Ogre::Vector3 axis(
+				NUM2DBL(rb_ary_entry(axisVal, 0)), 
+				NUM2DBL(rb_ary_entry(axisVal, 1)),
+				NUM2DBL(rb_ary_entry(axisVal, 2)));
+
+	   double angle = NUM2DBL(rb_ary_entry($input, 1));
+	      
+	   quat.FromAngleAxis(Ogre::Degree(angle), axis);
+   }
+   else if (RARRAY($input)->len == 3)
+   {
+	   Quaternion rotX, rotY, rotZ;
+        rotX.FromAngleAxis(
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 0))), 
+			Ogre::Vector3::UNIT_X);
+        rotY.FromAngleAxis(
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 1))), 
+			Ogre::Vector3::UNIT_Y);
+        rotZ.FromAngleAxis(
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 2))), 
+			Ogre::Vector3::UNIT_Z);
+	   
+	   quat = rotX * rotY * rotZ;
+	   quat.normalise();
+   }
+   else if (RARRAY($input)->len == 4)
+   {
+	   quat.w = NUM2DBL(rb_ary_entry($input, 0));
+	   quat.x = NUM2DBL(rb_ary_entry($input, 1));
+	   quat.y = NUM2DBL(rb_ary_entry($input, 2));
+	   quat.z = NUM2DBL(rb_ary_entry($input, 3));
+   }
+   $1 = quat;
+}
+
+%typemap(in) Ogre::Quaternion*, Ogre::Quaternion&,
+   const Ogre::Quaternion*, const Ogre::Quaternion&
+{
+   Ogre::Quaternion* quat = new Ogre::Quaternion();
+   if (RARRAY($input)->len == 2)
+   {
+	   VALUE axisVal = rb_ary_entry($input, 0);
+	   Ogre::Vector3 axis(
+				NUM2DBL(rb_ary_entry(axisVal, 0)), 
+				NUM2DBL(rb_ary_entry(axisVal, 1)),
+				NUM2DBL(rb_ary_entry(axisVal, 2)));
+
+	   double angle = NUM2DBL(rb_ary_entry($input, 1));
+	      
+	   quat->FromAngleAxis(Ogre::Degree(angle), axis);
+   }
+   else if (RARRAY($input)->len == 3)
+   {
+	   Quaternion rotX, rotY, rotZ;
+        rotX.FromAngleAxis(
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 0))), 
+			Ogre::Vector3::UNIT_X);
+        rotY.FromAngleAxis(
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 1))), 
+			Ogre::Vector3::UNIT_Y);
+        rotZ.FromAngleAxis(
+			Ogre::Degree(NUM2DBL(rb_ary_entry($input, 2))), 
+			Ogre::Vector3::UNIT_Z);
+	   
+	   *quat = rotX * rotY * rotZ;
+	   quat->normalise();
+   }
+   else if (RARRAY($input)->len == 4)
+   {
+	   quat->w = NUM2DBL(rb_ary_entry($input, 0));
+	   quat->x = NUM2DBL(rb_ary_entry($input, 1));
+	   quat->y = NUM2DBL(rb_ary_entry($input, 2));
+	   quat->z = NUM2DBL(rb_ary_entry($input, 3));
+   }   
+   $1 = quat;
+}
+%typemap(freearg)  Ogre::Quaternion*, Ogre::Quaternion&,
+   const Ogre::Quaternion*, const Ogre::Quaternion& 
+"   delete $1;"
+
+
+
+
+%typemap(out) Ogre::Quaternion, const Ogre::Quaternion {
+   Degree angle;
+   Vector3 axis;
+   
+   $1.ToAngleAxis(angle, axis);
+   
+   VALUE arrAxis = rb_ary_new();
+   rb_ary_push(arrAxis, rb_float_new(axis.x));
+   rb_ary_push(arrAxis, rb_float_new(axis.y));
+   rb_ary_push(arrAxis, rb_float_new(axis.z));
+   VALUE rval = rb_ary_new();
+   rb_ary_push(rval, arrAxis);
+   rb_ary_push(rval, rb_float_new(angle.valueDegrees()));
+   
+   $result = rval;
+}
+
+%typemap(out) Ogre::Quaternion*, const Ogre::Quaternion*, const Ogre::Quaternion&, Ogre::Quaternion& {
+   Degree angle;
+   Vector3 axis;
+   
+   $1->ToAngleAxis(angle, axis);
+   
+   VALUE arrAxis = rb_ary_new();
+   rb_ary_push(arrAxis, rb_float_new(axis.x));
+   rb_ary_push(arrAxis, rb_float_new(axis.y));
+   rb_ary_push(arrAxis, rb_float_new(axis.z));
+   VALUE rval = rb_ary_new();
+   rb_ary_push(rval, arrAxis);
+   rb_ary_push(rval, rb_float_new(angle.valueDegrees()));
+   
+   $result = rval;
+} 
+
+


Property changes on: rl/trunk/engine/script/swig/TypeOgreQuaternion.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeOgreRadian.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreRadian.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreRadian.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,49 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-/* Radian / Degree all Ruby Values are interpreted as DEGREE! */
-%typemap(typecheck) Ogre::Radian, const Ogre::Radian& = double;
-
-%typemap(in) Ogre::Radian, const Ogre::Radian, Ogre::Radian&, const Ogre::Radian& {
-    if (TYPE($input) == T_FLOAT) {
-		$1 = Ogre::Degree(RFLOAT($input)->value);
-    } else if (TYPE($input) == T_FIXNUM) {
-		$1 = Ogre::Degree(FIX2INT($input));
-    } else {
-        throw Swig::DirectorTypeMismatchException("float or fixnum expected");
-    }
-}
-%typemap(in) Ogre::Radian*, const Ogre::Radian*, Ogre::Radian&, const Ogre::Radian& {
-    if (TYPE($input) == T_FLOAT) {
-		$1 = new Ogre::Radian(Ogre::Degree(RFLOAT($input)->value));
-    } else if (TYPE($input) == T_FIXNUM) {
-		$1 = new Ogre::Radian(Ogre::Degree(FIX2INT($input)));
-    } else {
-        throw Swig::DirectorTypeMismatchException("float or fixnum expected");
-    }
-}
-
-%typemap(freearg) Ogre::Radian*, const Ogre::Radian*, Ogre::Radian&, const Ogre::Radian& 
-"   delete $1;"
-
-%typemap(out) Ogre::Radian, const Ogre::Radian {
-     $result = rb_float_new($1.valueDegrees());
-}
-%typemap(out) Ogre::Radian&, const Ogre::Radian& {
-     $result = rb_float_new($1->valueDegrees());
-}
-
-

Added: rl/trunk/engine/script/swig/TypeOgreRadian.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreRadian.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreRadian.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,49 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+/* Radian / Degree all Ruby Values are interpreted as DEGREE! */
+%typemap(typecheck) Ogre::Radian, const Ogre::Radian& = double;
+
+%typemap(in) Ogre::Radian, const Ogre::Radian, Ogre::Radian&, const Ogre::Radian& {
+    if (TYPE($input) == T_FLOAT) {
+		$1 = Ogre::Degree(RFLOAT($input)->value);
+    } else if (TYPE($input) == T_FIXNUM) {
+		$1 = Ogre::Degree(FIX2INT($input));
+    } else {
+        throw Swig::DirectorTypeMismatchException("float or fixnum expected");
+    }
+}
+%typemap(in) Ogre::Radian*, const Ogre::Radian*, Ogre::Radian&, const Ogre::Radian& {
+    if (TYPE($input) == T_FLOAT) {
+		$1 = new Ogre::Radian(Ogre::Degree(RFLOAT($input)->value));
+    } else if (TYPE($input) == T_FIXNUM) {
+		$1 = new Ogre::Radian(Ogre::Degree(FIX2INT($input)));
+    } else {
+        throw Swig::DirectorTypeMismatchException("float or fixnum expected");
+    }
+}
+
+%typemap(freearg) Ogre::Radian*, const Ogre::Radian*, Ogre::Radian&, const Ogre::Radian& 
+"   delete $1;"
+
+%typemap(out) Ogre::Radian, const Ogre::Radian {
+     $result = rb_float_new($1.valueDegrees());
+}
+%typemap(out) Ogre::Radian&, const Ogre::Radian& {
+     $result = rb_float_new($1->valueDegrees());
+}
+
+


Property changes on: rl/trunk/engine/script/swig/TypeOgreRadian.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeOgreReal.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreReal.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreReal.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,37 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-/* Wrapping Real to ruby and back 
- for Real, const Real, Real&, Real*, const Real*, const Real&
-*/
-%typemap(typecheck) Ogre::Real, const Ogre::Real& = double;
-    
-%typemap(in) Ogre::Real, const Ogre::Real 
-"   $1 = NUM2DBL($input);"
-
-%typemap(out) Ogre::Real, const Ogre::Real
-"   $result = rb_float_new($1);"
-
-%typemap(in) Ogre::Real*, Ogre::Real&, const Ogre::Real*, const Ogre::Real&
-"   $1 = NUM2DBL($input);"
-
-%typemap(out) Ogre::Real*, Ogre::Real&,  const Ogre::Real*, const Ogre::Real&
-"   $result = rb_float_new(*$1);"
-
-%typemap(freearg) Ogre::Real*, Ogre::Real&,  const Ogre::Real*, const Ogre::Real&
-"   delete $1;"
-
-

Added: rl/trunk/engine/script/swig/TypeOgreReal.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreReal.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreReal.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,37 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+/* Wrapping Real to ruby and back 
+ for Real, const Real, Real&, Real*, const Real*, const Real&
+*/
+%typemap(typecheck) Ogre::Real, const Ogre::Real& = double;
+    
+%typemap(in) Ogre::Real, const Ogre::Real 
+"   $1 = NUM2DBL($input);"
+
+%typemap(out) Ogre::Real, const Ogre::Real
+"   $result = rb_float_new($1);"
+
+%typemap(in) Ogre::Real*, Ogre::Real&, const Ogre::Real*, const Ogre::Real&
+"   $1 = NUM2DBL($input);"
+
+%typemap(out) Ogre::Real*, Ogre::Real&,  const Ogre::Real*, const Ogre::Real&
+"   $result = rb_float_new(*$1);"
+
+%typemap(freearg) Ogre::Real*, Ogre::Real&,  const Ogre::Real*, const Ogre::Real&
+"   delete $1;"
+
+


Property changes on: rl/trunk/engine/script/swig/TypeOgreReal.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeOgreString.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreString.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreString.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,52 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-/* Wrapping Strings to ruby and back 
- for String, const String, String&, String*, const String*, const String&
-*/
-%typemap(typecheck) Ogre::String, const Ogre::String & = char *;
-
-%typemap(in) Ogre::String, const Ogre::String
-"
-    Check_Type($input, T_STRING);
-    $1 = Ogre::String(StringValuePtr($input));
-"
-%typemap(out) Ogre::String, const Ogre::String
-"
-     $result = rb_str_buf_new2($1.c_str());
-"
-%typemap(in) Ogre::String*, Ogre::String&, const Ogre::String*, const Ogre::String&
-"
-    Check_Type($input, T_STRING);
-    $1 = new Ogre::String(StringValuePtr($input));
-"
-%typemap(freearg) Ogre::String*, Ogre::String&, const Ogre::String*, const Ogre::String&
-"   delete $1;"
-
-%typemap(out) Ogre::String*, Ogre::String&, const Ogre::String*, const Ogre::String&
-"    $result = rb_str_buf_new2($1->c_str());"
-
-%typemap(varout) Ogre::String, const Ogre::String
-"    $result = rb_str_buf_new2($1.c_str());"
-
-%typemap(directorin) Ogre::String*, const Ogre::String*
-"    $input = rb_str_buf_new2($1->c_str());"
-
-%typemap(directorin) Ogre::String, Ogre::String&, const Ogre::String, const Ogre::String&
-"    $input = rb_str_buf_new2($1.c_str());"
-
-%typemap(directorout) Ogre::String*, Ogre::String&, const Ogre::String*, const Ogre::String&
-"    $result = new Ogre::String(StringValuePtr($1));"

Added: rl/trunk/engine/script/swig/TypeOgreString.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreString.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreString.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,52 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+/* Wrapping Strings to ruby and back 
+ for String, const String, String&, String*, const String*, const String&
+*/
+%typemap(typecheck) Ogre::String, const Ogre::String & = char *;
+
+%typemap(in) Ogre::String, const Ogre::String
+"
+    Check_Type($input, T_STRING);
+    $1 = Ogre::String(StringValuePtr($input));
+"
+%typemap(out) Ogre::String, const Ogre::String
+"
+     $result = rb_str_buf_new2($1.c_str());
+"
+%typemap(in) Ogre::String*, Ogre::String&, const Ogre::String*, const Ogre::String&
+"
+    Check_Type($input, T_STRING);
+    $1 = new Ogre::String(StringValuePtr($input));
+"
+%typemap(freearg) Ogre::String*, Ogre::String&, const Ogre::String*, const Ogre::String&
+"   delete $1;"
+
+%typemap(out) Ogre::String*, Ogre::String&, const Ogre::String*, const Ogre::String&
+"    $result = rb_str_buf_new2($1->c_str());"
+
+%typemap(varout) Ogre::String, const Ogre::String
+"    $result = rb_str_buf_new2($1.c_str());"
+
+%typemap(directorin) Ogre::String*, const Ogre::String*
+"    $input = rb_str_buf_new2($1->c_str());"
+
+%typemap(directorin) Ogre::String, Ogre::String&, const Ogre::String, const Ogre::String&
+"    $input = rb_str_buf_new2($1.c_str());"
+
+%typemap(directorout) Ogre::String*, Ogre::String&, const Ogre::String*, const Ogre::String&
+"    $result = new Ogre::String(StringValuePtr($1));"


Property changes on: rl/trunk/engine/script/swig/TypeOgreString.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeOgreStringVector.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreStringVector.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreStringVector.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,56 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%typemap(freearg) Ogre::StringVector &, const Ogre::StringVector & {
-  delete $1;
-}
-
-%typemap(directorin) Ogre::StringVector &, const Ogre::StringVector & {
-  VALUE arr = rb_ary_new2($1->size()); 
-  StringVector::iterator i = $1->begin(), iend = $1->end();
-  for ( ; i!=iend; i++ )
-    rb_ary_push(arr, rb_str_new2(&(*i)));
-  $result = arr;
-}
-%typemap(directorin) Ogre::StringVector, const Ogre::StringVector {
-  VALUE arr = rb_ary_new2($1.size()); 
-  StringVector::iterator i = $1.begin(), iend = $1.end();
-  for ( ; i!=iend; i++ )
-    rb_ary_push(arr, rb_str_new2(*i));
-  $result = arr;
-}
-
-%typemap(directorout) Ogre::StringVector , const Ogre::StringVector {
-  Check_Type($input, T_ARRAY);
-  Ogre::StringVector vec;
-  int len = RARRAY($input)->len;
-  for (int i=0; i!=len; i++) {
-    VALUE inst = rb_ary_entry($input, i);
-    vec.push_back(Ogre::String(StringValuePtr(inst)));
-  }
-  $result = vec;
-}
-
-%typemap(directorout) Ogre::StringVector *, const Ogre::StringVector* , Ogre::StringVector &, const Ogre::StringVector& {
-  Check_Type($input, T_ARRAY);
-  Ogre::StringVector *vec = new Ogre::StringVector;
-  int len = RARRAY($input)->len;
-  for (int i=0; i!=len; i++) {
-    VALUE inst = rb_ary_entry($input, i);
-    vec->push_back(Ogre::String(StringValuePtr(inst)));
-  }
-  $result = vec;
-}

Added: rl/trunk/engine/script/swig/TypeOgreStringVector.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreStringVector.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreStringVector.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,56 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%typemap(freearg) Ogre::StringVector &, const Ogre::StringVector & {
+  delete $1;
+}
+
+%typemap(directorin) Ogre::StringVector &, const Ogre::StringVector & {
+  VALUE arr = rb_ary_new2($1->size()); 
+  StringVector::iterator i = $1->begin(), iend = $1->end();
+  for ( ; i!=iend; i++ )
+    rb_ary_push(arr, rb_str_new2(&(*i)));
+  $result = arr;
+}
+%typemap(directorin) Ogre::StringVector, const Ogre::StringVector {
+  VALUE arr = rb_ary_new2($1.size()); 
+  StringVector::iterator i = $1.begin(), iend = $1.end();
+  for ( ; i!=iend; i++ )
+    rb_ary_push(arr, rb_str_new2(*i));
+  $result = arr;
+}
+
+%typemap(directorout) Ogre::StringVector , const Ogre::StringVector {
+  Check_Type($input, T_ARRAY);
+  Ogre::StringVector vec;
+  int len = RARRAY($input)->len;
+  for (int i=0; i!=len; i++) {
+    VALUE inst = rb_ary_entry($input, i);
+    vec.push_back(Ogre::String(StringValuePtr(inst)));
+  }
+  $result = vec;
+}
+
+%typemap(directorout) Ogre::StringVector *, const Ogre::StringVector* , Ogre::StringVector &, const Ogre::StringVector& {
+  Check_Type($input, T_ARRAY);
+  Ogre::StringVector *vec = new Ogre::StringVector;
+  int len = RARRAY($input)->len;
+  for (int i=0; i!=len; i++) {
+    VALUE inst = rb_ary_entry($input, i);
+    vec->push_back(Ogre::String(StringValuePtr(inst)));
+  }
+  $result = vec;
+}


Property changes on: rl/trunk/engine/script/swig/TypeOgreStringVector.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeOgreVector3.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreVector3.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreVector3.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,87 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-/* Typemaps fuer Vector3.
- * Ein Vector3 wird einfach auf ein dreielementiges Array abgebildet.
- * 
- */
-
-%typecheck(SWIG_TYPECHECK_DOUBLE_ARRAY) Ogre::Vector3, const Ogre::Vector3, Ogre::Vector3*, Ogre::Vector3&,
-   const Ogre::Vector3*, const Ogre::Vector3&
-{
-   $1 = TYPE($input) == T_ARRAY && RARRAY($input)->len == 3 ? 1 : 0;
-}
- 
-%typemap(in) Ogre::Vector3, const Ogre::Vector3
-{
-   Ogre::Vector3 vec(0.0, 0.0, 0.0);
-   int length = RARRAY($input)->len;
-   VALUE* it = RARRAY($input)->ptr;
-   if (length > 0) {
-      vec.x = NUM2DBL(*it);
-      it++;
-   }
-   if (length > 1) {
-      vec.y = NUM2DBL(*it);
-      it++;
-   }
-   if (length > 2) {
-      vec.z = NUM2DBL(*it);
-   }
-   $1 = vec;
-}
-
-%typemap(in) Ogre::Vector3*, Ogre::Vector3&,
-   const Ogre::Vector3*, const Ogre::Vector3&
-{
-   Ogre::Vector3* vec = new Ogre::Vector3(0.0, 0.0, 0.0);
-   int length = RARRAY($input)->len;
-   VALUE* it = RARRAY($input)->ptr;
-   if (length > 0) {
-      vec->x = NUM2DBL(*it);
-      it++;
-   }
-   if (length > 1) {
-      vec->y = NUM2DBL(*it);
-      it++;
-   }
-   if (length > 2) {
-      vec->z = NUM2DBL(*it);
-   }
-   $1 = vec;
-}
-%typemap(freearg) Ogre::Vector3*, Ogre::Vector3&,
-   const Ogre::Vector3*, const Ogre::Vector3& {
-   delete $1;
-}
-
-%typemap(out) Ogre::Vector3, const Ogre::Vector3 {
-   VALUE rval = rb_ary_new();
-   rb_ary_push(rval, rb_float_new($1.x));
-   rb_ary_push(rval, rb_float_new($1.y));
-   rb_ary_push(rval, rb_float_new($1.z));
-   $result = rval;
-}
-
-%typemap(out) Ogre::Vector3*, const Ogre::Vector3*, const Ogre::Vector3&, Ogre::Vector& {
-   VALUE rval = rb_ary_new();
-   rb_ary_push(rval, rb_float_new($1->x));
-   rb_ary_push(rval, rb_float_new($1->y));
-   rb_ary_push(rval, rb_float_new($1->z));
-   $result = rval;
-} 
-
-

Added: rl/trunk/engine/script/swig/TypeOgreVector3.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeOgreVector3.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeOgreVector3.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,87 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+/* Typemaps fuer Vector3.
+ * Ein Vector3 wird einfach auf ein dreielementiges Array abgebildet.
+ * 
+ */
+
+%typecheck(SWIG_TYPECHECK_DOUBLE_ARRAY) Ogre::Vector3, const Ogre::Vector3, Ogre::Vector3*, Ogre::Vector3&,
+   const Ogre::Vector3*, const Ogre::Vector3&
+{
+   $1 = TYPE($input) == T_ARRAY && RARRAY($input)->len == 3 ? 1 : 0;
+}
+ 
+%typemap(in) Ogre::Vector3, const Ogre::Vector3
+{
+   Ogre::Vector3 vec(0.0, 0.0, 0.0);
+   int length = RARRAY($input)->len;
+   VALUE* it = RARRAY($input)->ptr;
+   if (length > 0) {
+      vec.x = NUM2DBL(*it);
+      it++;
+   }
+   if (length > 1) {
+      vec.y = NUM2DBL(*it);
+      it++;
+   }
+   if (length > 2) {
+      vec.z = NUM2DBL(*it);
+   }
+   $1 = vec;
+}
+
+%typemap(in) Ogre::Vector3*, Ogre::Vector3&,
+   const Ogre::Vector3*, const Ogre::Vector3&
+{
+   Ogre::Vector3* vec = new Ogre::Vector3(0.0, 0.0, 0.0);
+   int length = RARRAY($input)->len;
+   VALUE* it = RARRAY($input)->ptr;
+   if (length > 0) {
+      vec->x = NUM2DBL(*it);
+      it++;
+   }
+   if (length > 1) {
+      vec->y = NUM2DBL(*it);
+      it++;
+   }
+   if (length > 2) {
+      vec->z = NUM2DBL(*it);
+   }
+   $1 = vec;
+}
+%typemap(freearg) Ogre::Vector3*, Ogre::Vector3&,
+   const Ogre::Vector3*, const Ogre::Vector3& {
+   delete $1;
+}
+
+%typemap(out) Ogre::Vector3, const Ogre::Vector3 {
+   VALUE rval = rb_ary_new();
+   rb_ary_push(rval, rb_float_new($1.x));
+   rb_ary_push(rval, rb_float_new($1.y));
+   rb_ary_push(rval, rb_float_new($1.z));
+   $result = rval;
+}
+
+%typemap(out) Ogre::Vector3*, const Ogre::Vector3*, const Ogre::Vector3&, Ogre::Vector& {
+   VALUE rval = rb_ary_new();
+   rb_ary_push(rval, rb_float_new($1->x));
+   rb_ary_push(rval, rb_float_new($1->y));
+   rb_ary_push(rval, rb_float_new($1->z));
+   $result = rval;
+} 
+
+


Property changes on: rl/trunk/engine/script/swig/TypeOgreVector3.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeRlCeGuiString.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeRlCeGuiString.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeRlCeGuiString.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,58 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-/* Wrapping rl::CeGuiStrings to ruby and back 
- for CeGuiString
-*/
-%typemap(typecheck) rl::CeGuiString, const rl::CeGuiString, rl::CeGuiString*, rl::CeGuiString&, const rl::CeGuiString*, const rl::CeGuiString& = char *;
-
-%typemap(in) rl::CeGuiString, const rl::CeGuiString 
-	"Check_Type($input, T_STRING);
-    $1 = rl::CeGuiString(
-		reinterpret_cast<CEGUI::utf8*>(StringValuePtr($input)));"
-
-%typemap(out) rl::CeGuiString, const rl::CeGuiString 
-     "$result = rb_str_buf_new2($1.c_str());"
-
-
-%typemap(in) rl::CeGuiString*, rl::CeGuiString&, const rl::CeGuiString*, const rl::CeGuiString& 
-    "Check_Type($input, T_STRING);
-    $1 = new rl::CeGuiString(
-		reinterpret_cast<CEGUI::utf8*>(StringValuePtr($input)));"
-%typemap(freearg) rl::CeGuiString*, rl::CeGuiString&, const rl::CeGuiString*, const rl::CeGuiString&  {
-   delete $1;
-}
-%typemap(out) rl::CeGuiString*, rl::CeGuiString&,  const rl::CeGuiString*, const rl::CeGuiString& 
-     "$result = rb_str_buf_new2($1->c_str());"
-
-%typemap(varout) rl::CeGuiString, const rl::CeGuiString 
-     "$result = rb_str_buf_new2($1.c_str());"
-
-%typemap(directorin) rl::CeGuiString, const rl::CeGuiString &, rl::CeGuiString & 
-	"$input = rb_str_buf_new2($1.c_str());"
-
-%typemap(directorin) rl::CeGuiString *, const rl::CeGuiString * 
-	"$input = rb_str_buf_new2($1->c_str());"
-
-%typemap(directorout) rl::CeGuiString, const rl::CeGuiString 
-    "$result = rl::CeGuiString(
-		reinterpret_cast<CEGUI::utf8*>(StringValuePtr($input)));"
-
-%typemap(directorout) const rl::CeGuiString &, rl::CeGuiString&  
-    "$result = new rl::CeGuiString();
-     $result->append( 
-		reinterpret_cast<CEGUI::utf8*>(StringValuePtr($input)) );"
-

Added: rl/trunk/engine/script/swig/TypeRlCeGuiString.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeRlCeGuiString.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeRlCeGuiString.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,58 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+/* Wrapping rl::CeGuiStrings to ruby and back 
+ for CeGuiString
+*/
+%typemap(typecheck) rl::CeGuiString, const rl::CeGuiString, rl::CeGuiString*, rl::CeGuiString&, const rl::CeGuiString*, const rl::CeGuiString& = char *;
+
+%typemap(in) rl::CeGuiString, const rl::CeGuiString 
+	"Check_Type($input, T_STRING);
+    $1 = rl::CeGuiString(
+		reinterpret_cast<CEGUI::utf8*>(StringValuePtr($input)));"
+
+%typemap(out) rl::CeGuiString, const rl::CeGuiString 
+     "$result = rb_str_buf_new2($1.c_str());"
+
+
+%typemap(in) rl::CeGuiString*, rl::CeGuiString&, const rl::CeGuiString*, const rl::CeGuiString& 
+    "Check_Type($input, T_STRING);
+    $1 = new rl::CeGuiString(
+		reinterpret_cast<CEGUI::utf8*>(StringValuePtr($input)));"
+%typemap(freearg) rl::CeGuiString*, rl::CeGuiString&, const rl::CeGuiString*, const rl::CeGuiString&  {
+   delete $1;
+}
+%typemap(out) rl::CeGuiString*, rl::CeGuiString&,  const rl::CeGuiString*, const rl::CeGuiString& 
+     "$result = rb_str_buf_new2($1->c_str());"
+
+%typemap(varout) rl::CeGuiString, const rl::CeGuiString 
+     "$result = rb_str_buf_new2($1.c_str());"
+
+%typemap(directorin) rl::CeGuiString, const rl::CeGuiString &, rl::CeGuiString & 
+	"$input = rb_str_buf_new2($1.c_str());"
+
+%typemap(directorin) rl::CeGuiString *, const rl::CeGuiString * 
+	"$input = rb_str_buf_new2($1->c_str());"
+
+%typemap(directorout) rl::CeGuiString, const rl::CeGuiString 
+    "$result = rl::CeGuiString(
+		reinterpret_cast<CEGUI::utf8*>(StringValuePtr($input)));"
+
+%typemap(directorout) const rl::CeGuiString &, rl::CeGuiString&  
+    "$result = new rl::CeGuiString();
+     $result->append( 
+		reinterpret_cast<CEGUI::utf8*>(StringValuePtr($input)) );"
+


Property changes on: rl/trunk/engine/script/swig/TypeRlCeGuiString.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,57 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%typemap(freearg) rl::CeGuiStringVector &, const rl::CeGuiStringVector & 
-"  delete $1;"
-
-
-%typemap(directorin) rl::CeGuiStringVector &, const rl::CeGuiStringVector & {
-  VALUE arr = rb_ary_new2($1->size()); 
-  CeGuiStringVector::iterator i = $1->begin(), iend = $1->end();
-  for ( ; i!=iend; i++ )
-    rb_ary_push(arr, rb_str_new2(&(*i)));
-  $result = arr;
-}
-
-%typemap(directorin) rl::CeGuiStringVector, const rl::CeGuiStringVector {
-  VALUE arr = rb_ary_new2($1.size()); 
-  CeGuiStringVector::iterator i = $1.begin(), iend = $1.end();
-  for ( ; i!=iend; i++ )
-    rb_ary_push(arr, rb_str_new2(*i));
-  $result = arr;
-}
-
-%typemap(directorout) rl::CeGuiStringVector , const rl::CeGuiStringVector {
-  Check_Type($input, T_ARRAY);
-  rl::CeGuiStringVector vec;
-  int len = RARRAY($input)->len;
-  for (int i=0; i!=len; i++) {
-    VALUE inst = rb_ary_entry($input, i);
-    vec.push_back(rl::CeGuiString(StringValuePtr(inst)));
-  }
-  $result = vec;
-}
-
-%typemap(directorout) rl::CeGuiStringVector &, const rl::CeGuiStringVector& {
-  Check_Type($input, T_ARRAY);
-  rl::CeGuiStringVector *vec = new rl::CeGuiStringVector;
-  int len = RARRAY($input)->len;
-  for (int i=0; i!=len; i++) {
-    VALUE inst = rb_ary_entry($input, i);
-    vec->push_back(rl::CeGuiString(StringValuePtr(inst)));
-  }
-  $result = vec;
-}

Added: rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,57 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%typemap(freearg) rl::CeGuiStringVector &, const rl::CeGuiStringVector & 
+"  delete $1;"
+
+
+%typemap(directorin) rl::CeGuiStringVector &, const rl::CeGuiStringVector & {
+  VALUE arr = rb_ary_new2($1->size()); 
+  CeGuiStringVector::iterator i = $1->begin(), iend = $1->end();
+  for ( ; i!=iend; i++ )
+    rb_ary_push(arr, rb_str_new2(&(*i)));
+  $result = arr;
+}
+
+%typemap(directorin) rl::CeGuiStringVector, const rl::CeGuiStringVector {
+  VALUE arr = rb_ary_new2($1.size()); 
+  CeGuiStringVector::iterator i = $1.begin(), iend = $1.end();
+  for ( ; i!=iend; i++ )
+    rb_ary_push(arr, rb_str_new2(*i));
+  $result = arr;
+}
+
+%typemap(directorout) rl::CeGuiStringVector , const rl::CeGuiStringVector {
+  Check_Type($input, T_ARRAY);
+  rl::CeGuiStringVector vec;
+  int len = RARRAY($input)->len;
+  for (int i=0; i!=len; i++) {
+    VALUE inst = rb_ary_entry($input, i);
+    vec.push_back(rl::CeGuiString(StringValuePtr(inst)));
+  }
+  $result = vec;
+}
+
+%typemap(directorout) rl::CeGuiStringVector &, const rl::CeGuiStringVector& {
+  Check_Type($input, T_ARRAY);
+  rl::CeGuiStringVector *vec = new rl::CeGuiStringVector;
+  int len = RARRAY($input)->len;
+  for (int i=0; i!=len; i++) {
+    VALUE inst = rb_ary_entry($input, i);
+    vec->push_back(rl::CeGuiString(StringValuePtr(inst)));
+  }
+  $result = vec;
+}


Property changes on: rl/trunk/engine/script/swig/TypeRlCeGuiStringVector.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeRlProperty.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeRlProperty.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeRlProperty.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,204 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%{
-namespace rl {
-
-Property convertValueToProperty(VALUE input)
-{
-	Property rval;
-	if (TYPE(input) == T_FLOAT)
-    {
-	    rval.setValue(Ogre::Real(NUM2DBL(input)));
-    }
-    else if (TYPE(input) == T_FIXNUM)
-    {
-        rval.setValue(FIX2INT(input));
-    }
-    else if (TYPE(input) == T_FIXNUM)
-    {
-        rval.setValue(FIX2INT(input));
-    }
-    else if (TYPE(input) == T_TRUE)
-    {
-        rval.setValue(true);
-    }
-    else if (TYPE(input) == T_FALSE)
-    {
-        rval.setValue(false);
-    }
-    else if (TYPE(input) == T_STRING) 
-    {
-        rval.setValue(rl::CeGuiString(StringValuePtr(input)));
-    }
-    else if (TYPE(input) == T_ARRAY)
-    {
-		int length = RARRAY(input)->len;
-		if (length > 0)
-		{
-			VALUE firstVal = rb_ary_entry(input, 0);
-			if (length == 3 
-				&& (TYPE(firstVal) == T_FLOAT || TYPE(firstVal) == T_FIXNUM))
-			{
-				Ogre::Vector3 vec;
-				vec.x = NUM2DBL(rb_ary_entry(input, 0));
-				vec.y = NUM2DBL(rb_ary_entry(input, 1));
-				vec.z = NUM2DBL(rb_ary_entry(input, 2));
-				rval.setValue(vec);
-			}
-			else if (length == 4 
-				&& (TYPE(firstVal) == T_FLOAT || TYPE(firstVal) == T_FIXNUM))
-			{
-				Ogre::Quaternion quat;
-				quat.w = NUM2DBL(rb_ary_entry(input, 0));
-				quat.x = NUM2DBL(rb_ary_entry(input, 1));
-				quat.y = NUM2DBL(rb_ary_entry(input, 2));
-				quat.z = NUM2DBL(rb_ary_entry(input, 3));
-				rval.setValue(quat);
-			}
-			else // Array of Properties
-			{
-				std::vector<Property> vec;
-				for (int idx = 0; idx < length; idx++)
-				{
-					vec.push_back(rl::convertValueToProperty(rb_ary_entry(input, 0)));
-				}
-				rval.setValue(vec);
-			}
-        }
-    }
-    
-    return rval;
-}
-
-VALUE convertPropertyToValue(Property input)
-{
-	if (input.isString())
-    {
-        return rb_str_buf_new2(input.toString().c_str());
-    }
-    else if (input.isInt())
-    {
-        return rb_int_new(input.toInt());
-    }
-    else if (input.isReal())
-    {
-	    return rb_float_new(input.toReal());
-    }
-    else if (input.isBool())
-    {
-        bool boolValue = input.toBool();
-        if (boolValue)
-        {
-            return Qtrue;
-        }
-        else
-        {
-            return Qfalse;
-        }
-    }
-    else if (input.isVector3())
-    {
-        Ogre::Vector3 vec = input.toVector3();
-        VALUE rval = rb_ary_new();
-        rb_ary_push(rval, rb_float_new(vec.x));
-        rb_ary_push(rval, rb_float_new(vec.y));
-        rb_ary_push(rval, rb_float_new(vec.z));
-        return rval;
-    }
-    else if (input.isQuaternion())
-    {
-        Ogre::Quaternion vec = input.toQuaternion();
-        VALUE rval = rb_ary_new();
-        rb_ary_push(rval, rb_float_new(vec.w));
-        rb_ary_push(rval, rb_float_new(vec.x));
-        rb_ary_push(rval, rb_float_new(vec.y));
-        rb_ary_push(rval, rb_float_new(vec.z));
-        return rval;
-    }
-    else if (input.isArray())
-    {
-		std::vector<Property> vec = input.toArray();
-		VALUE rval = rb_ary_new();
-		for (std::vector<Property>::const_iterator it = vec.begin();
-			it != vec.end(); it++)
-		{
-			rb_ary_push(rval, rl::convertPropertyToValue(*it));
-		}
-		return rval;
-    }
-
-    return Qnil;
-}
-
-}
-%}
-
-
-%typemap(typecheck) rl::Property, const rl::Property, rl::Property&, const rl::Property&, rl::Property*, const rl::Property* 
-{
-    if (TYPE($input) == T_FLOAT 
-        || TYPE($input) == T_FIXNUM 
-	    || TYPE($input) == T_STRING
-	    || TYPE($input) == T_TRUE 
-	    || TYPE($input) == T_FALSE
-	    || TYPE($input == T_ARRAY) 
-    {
-        return 1;
-    }
-    
-    return 0;
-}
-
-%typemap(in) rl::Property, const rl::Property
-"   
-	$1 = rl::convertValueToProperty($input);
-"
-
-%typemap(in) rl::Property&, const rl::Property&, rl::Property*, const rl::Property*
-"   
-	$1 = new rl::Property(rl::convertValueToProperty($input));
-"
-
-
-%typemap(out) rl::Property, const rl::Property
-"   
-	$result = rl::convertPropertyToValue($1);
-"
-
-
-%typemap(freearg) rl::Property*, rl::Property&, const rl::Property*, const rl::Property&
-"   delete $1;"
-
-%typemap(directorout) rl::Property, const rl::Property, rl::Property&, const rl::Property&
-"   
-	$result = rl::convertValueToProperty($1);
-"
-
-%typemap(directorout) rl::Property*, const rl::Property*
-"   
-	$result = new rl::Property(rl::convertValueToProperty($1));
-"
-
-%typemap(directorin) rl::Property, const rl::Property, rl::Property&, const rl::Property&
-"   
-	$input = rl::convertPropertyToValue($1);
-"
-
-%typemap(directorin) rl::Property*, const rl::Property*
-"   	
-	$input = rl::convertPropertyToValue(*$1);
-"
\ No newline at end of file

Added: rl/trunk/engine/script/swig/TypeRlProperty.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeRlProperty.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeRlProperty.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,204 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%{
+namespace rl {
+
+Property convertValueToProperty(VALUE input)
+{
+	Property rval;
+	if (TYPE(input) == T_FLOAT)
+    {
+	    rval.setValue(Ogre::Real(NUM2DBL(input)));
+    }
+    else if (TYPE(input) == T_FIXNUM)
+    {
+        rval.setValue(FIX2INT(input));
+    }
+    else if (TYPE(input) == T_FIXNUM)
+    {
+        rval.setValue(FIX2INT(input));
+    }
+    else if (TYPE(input) == T_TRUE)
+    {
+        rval.setValue(true);
+    }
+    else if (TYPE(input) == T_FALSE)
+    {
+        rval.setValue(false);
+    }
+    else if (TYPE(input) == T_STRING) 
+    {
+        rval.setValue(rl::CeGuiString(StringValuePtr(input)));
+    }
+    else if (TYPE(input) == T_ARRAY)
+    {
+		int length = RARRAY(input)->len;
+		if (length > 0)
+		{
+			VALUE firstVal = rb_ary_entry(input, 0);
+			if (length == 3 
+				&& (TYPE(firstVal) == T_FLOAT || TYPE(firstVal) == T_FIXNUM))
+			{
+				Ogre::Vector3 vec;
+				vec.x = NUM2DBL(rb_ary_entry(input, 0));
+				vec.y = NUM2DBL(rb_ary_entry(input, 1));
+				vec.z = NUM2DBL(rb_ary_entry(input, 2));
+				rval.setValue(vec);
+			}
+			else if (length == 4 
+				&& (TYPE(firstVal) == T_FLOAT || TYPE(firstVal) == T_FIXNUM))
+			{
+				Ogre::Quaternion quat;
+				quat.w = NUM2DBL(rb_ary_entry(input, 0));
+				quat.x = NUM2DBL(rb_ary_entry(input, 1));
+				quat.y = NUM2DBL(rb_ary_entry(input, 2));
+				quat.z = NUM2DBL(rb_ary_entry(input, 3));
+				rval.setValue(quat);
+			}
+			else // Array of Properties
+			{
+				std::vector<Property> vec;
+				for (int idx = 0; idx < length; idx++)
+				{
+					vec.push_back(rl::convertValueToProperty(rb_ary_entry(input, 0)));
+				}
+				rval.setValue(vec);
+			}
+        }
+    }
+    
+    return rval;
+}
+
+VALUE convertPropertyToValue(Property input)
+{
+	if (input.isString())
+    {
+        return rb_str_buf_new2(input.toString().c_str());
+    }
+    else if (input.isInt())
+    {
+        return rb_int_new(input.toInt());
+    }
+    else if (input.isReal())
+    {
+	    return rb_float_new(input.toReal());
+    }
+    else if (input.isBool())
+    {
+        bool boolValue = input.toBool();
+        if (boolValue)
+        {
+            return Qtrue;
+        }
+        else
+        {
+            return Qfalse;
+        }
+    }
+    else if (input.isVector3())
+    {
+        Ogre::Vector3 vec = input.toVector3();
+        VALUE rval = rb_ary_new();
+        rb_ary_push(rval, rb_float_new(vec.x));
+        rb_ary_push(rval, rb_float_new(vec.y));
+        rb_ary_push(rval, rb_float_new(vec.z));
+        return rval;
+    }
+    else if (input.isQuaternion())
+    {
+        Ogre::Quaternion vec = input.toQuaternion();
+        VALUE rval = rb_ary_new();
+        rb_ary_push(rval, rb_float_new(vec.w));
+        rb_ary_push(rval, rb_float_new(vec.x));
+        rb_ary_push(rval, rb_float_new(vec.y));
+        rb_ary_push(rval, rb_float_new(vec.z));
+        return rval;
+    }
+    else if (input.isArray())
+    {
+		std::vector<Property> vec = input.toArray();
+		VALUE rval = rb_ary_new();
+		for (std::vector<Property>::const_iterator it = vec.begin();
+			it != vec.end(); it++)
+		{
+			rb_ary_push(rval, rl::convertPropertyToValue(*it));
+		}
+		return rval;
+    }
+
+    return Qnil;
+}
+
+}
+%}
+
+
+%typemap(typecheck) rl::Property, const rl::Property, rl::Property&, const rl::Property&, rl::Property*, const rl::Property* 
+{
+    if (TYPE($input) == T_FLOAT 
+        || TYPE($input) == T_FIXNUM 
+	    || TYPE($input) == T_STRING
+	    || TYPE($input) == T_TRUE 
+	    || TYPE($input) == T_FALSE
+	    || TYPE($input == T_ARRAY) 
+    {
+        return 1;
+    }
+    
+    return 0;
+}
+
+%typemap(in) rl::Property, const rl::Property
+"   
+	$1 = rl::convertValueToProperty($input);
+"
+
+%typemap(in) rl::Property&, const rl::Property&, rl::Property*, const rl::Property*
+"   
+	$1 = new rl::Property(rl::convertValueToProperty($input));
+"
+
+
+%typemap(out) rl::Property, const rl::Property
+"   
+	$result = rl::convertPropertyToValue($1);
+"
+
+
+%typemap(freearg) rl::Property*, rl::Property&, const rl::Property*, const rl::Property&
+"   delete $1;"
+
+%typemap(directorout) rl::Property, const rl::Property, rl::Property&, const rl::Property&
+"   
+	$result = rl::convertValueToProperty($1);
+"
+
+%typemap(directorout) rl::Property*, const rl::Property*
+"   
+	$result = new rl::Property(rl::convertValueToProperty($1));
+"
+
+%typemap(directorin) rl::Property, const rl::Property, rl::Property&, const rl::Property&
+"   
+	$input = rl::convertPropertyToValue($1);
+"
+
+%typemap(directorin) rl::Property*, const rl::Property*
+"   	
+	$input = rl::convertPropertyToValue(*$1);
+"
\ No newline at end of file


Property changes on: rl/trunk/engine/script/swig/TypeRlProperty.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeRlTripelInt.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeRlTripelInt.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeRlTripelInt.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,80 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-/* IN Typemaps fuer Tripel<int>.
- * Ein Tripel wird einfach auf ein dreielementiges Array abgebildet.
- * 
- * Eine Laengenueberpruefung findet nicht statt.
- * Nil wird zu 0. Indizes >= 3 werden ignoriert.
- * TODO eben das aendern
- */
-%typemap(in) Tripel<int>
-{
-   Check_Type($input, T_ARRAY);
-   Tripel<int> tripel(0, 0, 0);
-   int length = RARRAY($input)->len;
-   VALUE* it = RARRAY($input)->ptr;
-   if (length > 0) {
-      tripel.first = FIX2INT(*it);
-      it++;
-   }
-   if (length > 1) {
-      tripel.second = FIX2INT(*it);
-      it++;
-   }
-   if (length > 2) {
-      tripel.third = FIX2INT(*it);
-   }
-   $1 = tripel;
-}
-
-%typemap(in) Tripel<int>*, Tripel<int>&,
-   const Tripel<int>*, const Tripel<int>&
-{
-   Check_Type($input, T_ARRAY);
-   Tripel<int>* tripel = new Tripel<int>(0, 0, 0);
-   int length = RARRAY($input)->len;
-   VALUE* it = RARRAY($input)->ptr;
-   if (length > 0) {
-      tripel->first = FIX2INT(*it);
-      it++;
-   }
-   if (length > 1) {
-      tripel->second = FIX2INT(*it);
-      it++;
-   }
-   if (length > 2) {
-      tripel->third = FIX2INT(*it);
-   }
-   $1 = tripel;
-}
-
-%typemap(freearg) Tripel<int>*, Tripel<int>&, 
-const Tripel<int>*, const Tripel<int>&
-"   delete $1;"
-
-/* OUT Typemaps fuer Tripel<int>.
- * Ein Tripel wird einfach auf ein dreielementiges Array abgebildet.
- * 
- */
-%typemap(out) Tripel<int> {
-   VALUE array = rb_ary_new();
-   rb_ary_push(array, INT2FIX($1.first));
-   rb_ary_push(array, INT2FIX($1.second));
-   rb_ary_push(array, INT2FIX($1.third));
-   $result = array;
-}
-

Added: rl/trunk/engine/script/swig/TypeRlTripelInt.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeRlTripelInt.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeRlTripelInt.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,80 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+/* IN Typemaps fuer Tripel<int>.
+ * Ein Tripel wird einfach auf ein dreielementiges Array abgebildet.
+ * 
+ * Eine Laengenueberpruefung findet nicht statt.
+ * Nil wird zu 0. Indizes >= 3 werden ignoriert.
+ * TODO eben das aendern
+ */
+%typemap(in) Tripel<int>
+{
+   Check_Type($input, T_ARRAY);
+   Tripel<int> tripel(0, 0, 0);
+   int length = RARRAY($input)->len;
+   VALUE* it = RARRAY($input)->ptr;
+   if (length > 0) {
+      tripel.first = FIX2INT(*it);
+      it++;
+   }
+   if (length > 1) {
+      tripel.second = FIX2INT(*it);
+      it++;
+   }
+   if (length > 2) {
+      tripel.third = FIX2INT(*it);
+   }
+   $1 = tripel;
+}
+
+%typemap(in) Tripel<int>*, Tripel<int>&,
+   const Tripel<int>*, const Tripel<int>&
+{
+   Check_Type($input, T_ARRAY);
+   Tripel<int>* tripel = new Tripel<int>(0, 0, 0);
+   int length = RARRAY($input)->len;
+   VALUE* it = RARRAY($input)->ptr;
+   if (length > 0) {
+      tripel->first = FIX2INT(*it);
+      it++;
+   }
+   if (length > 1) {
+      tripel->second = FIX2INT(*it);
+      it++;
+   }
+   if (length > 2) {
+      tripel->third = FIX2INT(*it);
+   }
+   $1 = tripel;
+}
+
+%typemap(freearg) Tripel<int>*, Tripel<int>&, 
+const Tripel<int>*, const Tripel<int>&
+"   delete $1;"
+
+/* OUT Typemaps fuer Tripel<int>.
+ * Ein Tripel wird einfach auf ein dreielementiges Array abgebildet.
+ * 
+ */
+%typemap(out) Tripel<int> {
+   VALUE array = rb_ary_new();
+   rb_ary_push(array, INT2FIX($1.first));
+   rb_ary_push(array, INT2FIX($1.second));
+   rb_ary_push(array, INT2FIX($1.third));
+   $result = array;
+}
+


Property changes on: rl/trunk/engine/script/swig/TypeRlTripelInt.swig
___________________________________________________________________
Name: svn:executable
   + *

Deleted: rl/trunk/engine/script/swig/TypeStdPairIntInt.inc
===================================================================
--- rl/trunk/engine/script/swig/TypeStdPairIntInt.inc	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeStdPairIntInt.inc	2007-02-27 11:04:17 UTC (rev 3080)
@@ -1,63 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
- */
-
-%typecheck(SWIG_TYPECHECK_INT32_ARRAY) 
-	std::pair<int,int>*, std::pair<int,int>&, 
-	const std::pair<int,int>*, const std::pair<int,int>&, 
-	std::pair<int,int>, const std::pair<int,int>
-{
-   $1 = TYPE($input) == T_ARRAY && RARRAY($input)->len == 2 ? 1 : 0;
-}
-
-
-%typemap(in) std::pair<int,int>*, std::pair<int,int>&,
-   const std::pair<int,int>*, const std::pair<int,int>&
-{
-	std::pair<int, int>* val = new std::pair<int, int>();
-	val->first = NUM2INT(rb_ary_entry($input, 0)), 
-	val->second = NUM2INT(rb_ary_entry($input, 1));
-	
-	$1 = val;
-}
-%typemap(freearg) std::pair<int,int>*, std::pair<int,int>&, 
-const std::pair<int,int>*, const std::pair<int,int>&  {
-   delete $1;
-}
-
-%typemap(in) std::pair<int,int>, const std::pair<int,int>
-{
-	$1.first = NUM2INT(rb_ary_entry($input, 0)), 
-	$1.second = NUM2INT(rb_ary_entry($input, 1));
-}
-
-%typemap(out) std::pair<int,int>, const std::pair<int,int>
-{
-	VALUE array = rb_ary_new();
-	rb_ary_push(array, rb_int_new($1.first));
-	rb_ary_push(array, rb_int_new($1.second));
-	$result = array;
-}
-
-%typemap(out) std::pair<int,int>*, std::pair<int,int>&,
-   const std::pair<int,int>*, const std::pair<int,int>&
-{
-	VALUE array = rb_ary_new();
-	rb_ary_push(array, rb_int_new($1->first));
-	rb_ary_push(array, rb_int_new($1->second));
-	$result = array;
-}
-
-

Added: rl/trunk/engine/script/swig/TypeStdPairIntInt.swig
===================================================================
--- rl/trunk/engine/script/swig/TypeStdPairIntInt.swig	2007-02-27 09:57:11 UTC (rev 3079)
+++ rl/trunk/engine/script/swig/TypeStdPairIntInt.swig	2007-02-27 11:04:17 UTC (rev 3080)
@@ -0,0 +1,63 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+%typecheck(SWIG_TYPECHECK_INT32_ARRAY) 
+	std::pair<int,int>*, std::pair<int,int>&, 
+	const std::pair<int,int>*, const std::pair<int,int>&, 
+	std::pair<int,int>, const std::pair<int,int>
+{
+   $1 = TYPE($input) == T_ARRAY && RARRAY($input)->len == 2 ? 1 : 0;
+}
+
+
+%typemap(in) std::pair<int,int>*, std::pair<int,int>&,
+   const std::pair<int,int>*, const std::pair<int,int>&
+{
+	std::pair<int, int>* val = new std::pair<int, int>();
+	val->first = NUM2INT(rb_ary_entry($input, 0)), 
+	val->second = NUM2INT(rb_ary_entry($input, 1));
+	
+	$1 = val;
+}
+%typemap(freearg) std::pair<int,int>*, std::pair<int,int>&, 
+const std::pair<int,int>*, const std::pair<int,int>&  {
+   delete $1;
+}
+
+%typemap(in) std::pair<int,int>, const std::pair<int,int>
+{
+	$1.first = NUM2INT(rb_ary_entry($input, 0)), 
+	$1.second = NUM2INT(rb_ary_entry($input, 1));
+}
+
+%typemap(out) std::pair<int,int>, const std::pair<int,int>
+{
+	VALUE array = rb_ary_new();
+	rb_ary_push(array, rb_int_new($1.first));
+	rb_ary_push(array, rb_int_new($1.second));
+	$result = array;
+}
+
+%typemap(out) std::pair<int,int>*, std::pair<int,int>&,
+   const std::pair<int,int>*, const std::pair<int,int>&
+{
+	VALUE array = rb_ary_new();
+	rb_ary_push(array, rb_int_new($1->first));
+	rb_ary_push(array, rb_int_new($1->second));
+	$result = array;
+}
+
+


Property changes on: rl/trunk/engine/script/swig/TypeStdPairIntInt.swig
___________________________________________________________________
Name: svn:executable
   + *



From blakharaz at mail.berlios.de  Tue Feb 27 14:41:57 2007
From: blakharaz at mail.berlios.de (blakharaz at mail.berlios.de)
Date: Tue, 27 Feb 2007 14:41:57 +0100
Subject: [Dsa-hl-svn] r3081 - rl/trunk/docs/src
Message-ID: <200702271341.l1RDfv9M001995@sheep.berlios.de>

Author: blakharaz
Date: 2007-02-27 14:41:55 +0100 (Tue, 27 Feb 2007)
New Revision: 3081

Modified:
   rl/trunk/docs/src/ruby_html.cfg
Log:
Different title for the Ruby API documentation


Modified: rl/trunk/docs/src/ruby_html.cfg
===================================================================
--- rl/trunk/docs/src/ruby_html.cfg	2007-02-27 11:04:17 UTC (rev 3080)
+++ rl/trunk/docs/src/ruby_html.cfg	2007-02-27 13:41:55 UTC (rev 3081)
@@ -3,7 +3,7 @@
 #---------------------------------------------------------------------------
 # Project related configuration options
 #---------------------------------------------------------------------------
-PROJECT_NAME           = "Rastullahs Lockenpracht"
+PROJECT_NAME           = "Rastullahs Lockenpracht Ruby API"
 PROJECT_NUMBER         = 
 OUTPUT_DIRECTORY       = ../ruby-api
 CREATE_SUBDIRS         = NO



From natoka at mail.berlios.de  Tue Feb 27 16:02:23 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Tue, 27 Feb 2007 16:02:23 +0100
Subject: [Dsa-hl-svn] r3082 - in rl/trunk/engine/ui: include src
Message-ID: <200702271502.l1RF2NZJ013716@sheep.berlios.de>

Author: natoka
Date: 2007-02-27 16:01:53 +0100 (Tue, 27 Feb 2007)
New Revision: 3082

Modified:
   rl/trunk/engine/ui/include/CutsceneCharacterController.h
   rl/trunk/engine/ui/src/InputManager.cpp
   rl/trunk/engine/ui/src/UiSubsystem.cpp
   rl/trunk/engine/ui/src/VanityModeCharacterController.cpp
   rl/trunk/engine/ui/src/WindowFactory.cpp
Log:
'using namespace Ogre' in header files is evil
because OgreNewt is doing that at the moment a few bugs in that direction (missing Ogre::) have been summing up.
This commit removes them (to prepare the way for a better OgreNewt)


Modified: rl/trunk/engine/ui/include/CutsceneCharacterController.h
===================================================================
--- rl/trunk/engine/ui/include/CutsceneCharacterController.h	2007-02-27 13:41:55 UTC (rev 3081)
+++ rl/trunk/engine/ui/include/CutsceneCharacterController.h	2007-02-27 15:01:53 UTC (rev 3082)
@@ -38,7 +38,7 @@
 
 		virtual ControllerType getType() const;
 
-		void run(Real elapsedTime);
+		void run(Ogre::Real elapsedTime);
 
 		void toggleViewMode();
         void resetCamera();

Modified: rl/trunk/engine/ui/src/InputManager.cpp
===================================================================
--- rl/trunk/engine/ui/src/InputManager.cpp	2007-02-27 13:41:55 UTC (rev 3081)
+++ rl/trunk/engine/ui/src/InputManager.cpp	2007-02-27 15:01:53 UTC (rev 3082)
@@ -45,6 +45,7 @@
 #include "UiSubsystem.h"
 #include "WindowFactory.h"
 
+using namespace Ogre;
 
 template<> rl::InputManager* Singleton<rl::InputManager>::ms_Singleton = 0;
 using namespace OIS;

Modified: rl/trunk/engine/ui/src/UiSubsystem.cpp
===================================================================
--- rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-02-27 13:41:55 UTC (rev 3081)
+++ rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-02-27 15:01:53 UTC (rev 3082)
@@ -48,6 +48,7 @@
 #include <OgreCEGUIResourceProvider.h>
 
 template<> rl::UiSubsystem* Singleton<rl::UiSubsystem>::ms_Singleton = 0;
+using namespace Ogre;
 
 namespace rl {
     const char* UiSubsystem::CEGUI_ROOT = "RootWindow";

Modified: rl/trunk/engine/ui/src/VanityModeCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/VanityModeCharacterController.cpp	2007-02-27 13:41:55 UTC (rev 3081)
+++ rl/trunk/engine/ui/src/VanityModeCharacterController.cpp	2007-02-27 15:01:53 UTC (rev 3082)
@@ -20,6 +20,7 @@
 #include "CameraObject.h"
 #include "CommandMapper.h"
 
+using namespace Ogre;
 
 namespace rl {
 

Modified: rl/trunk/engine/ui/src/WindowFactory.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowFactory.cpp	2007-02-27 13:41:55 UTC (rev 3081)
+++ rl/trunk/engine/ui/src/WindowFactory.cpp	2007-02-27 15:01:53 UTC (rev 3082)
@@ -59,6 +59,7 @@
 template<> rl::WindowFactory* Ogre::Singleton<rl::WindowFactory>::ms_Singleton = 0;
 
 using namespace CEGUI;
+using namespace Ogre;
 
 namespace rl {
 



From natoka at mail.berlios.de  Tue Feb 27 16:07:33 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Tue, 27 Feb 2007 16:07:33 +0100
Subject: [Dsa-hl-svn] r3083 - in rl/trunk/engine: ai/src core/include
	core/src
Message-ID: <200702271507.l1RF7Xjn014248@sheep.berlios.de>

Author: natoka
Date: 2007-02-27 16:06:56 +0100 (Tue, 27 Feb 2007)
New Revision: 3083

Modified:
   rl/trunk/engine/ai/src/PhysicalObstacle.cpp
   rl/trunk/engine/core/include/PhysicalThing.h
   rl/trunk/engine/core/src/ActorManager.cpp
   rl/trunk/engine/core/src/PhysicalThing.cpp
Log:
'using namespace Ogre' in header files is evil
because OgreNewt is doing that at the moment a few bugs in that direction (missing Ogre::) have been summing up.
This commit removes them (to prepare the way for a better OgreNewt)

Modified: rl/trunk/engine/ai/src/PhysicalObstacle.cpp
===================================================================
--- rl/trunk/engine/ai/src/PhysicalObstacle.cpp	2007-02-27 15:01:53 UTC (rev 3082)
+++ rl/trunk/engine/ai/src/PhysicalObstacle.cpp	2007-02-27 15:06:56 UTC (rev 3083)
@@ -21,6 +21,8 @@
  #include <OgreNewt_Body.h>
  #include <OgreNewt_Collision.h>
  
+using namespace Ogre;
+
 namespace rl {
     PhysicalObstacle::PhysicalObstacle(PhysicalThing *thing)
     {

Modified: rl/trunk/engine/core/include/PhysicalThing.h
===================================================================
--- rl/trunk/engine/core/include/PhysicalThing.h	2007-02-27 15:01:53 UTC (rev 3082)
+++ rl/trunk/engine/core/include/PhysicalThing.h	2007-02-27 15:06:56 UTC (rev 3083)
@@ -34,7 +34,7 @@
 		PhysicalThing(
 			PhysicsManager::GeometryType geomType,
 			PhysicalObject* po, 
-			Real mass, 
+			Ogre::Real mass, 
 			bool hullModifier = false);
 
         /// Klasse Polymorph machen, damit SWIG gl?cklich ist.
@@ -79,7 +79,7 @@
         Ogre::Real getMass() const;
         void setMass(Ogre::Real mass);
 
-		void createPhysicsProxy(SceneNode* node);
+		void createPhysicsProxy(Ogre::SceneNode* node);
 
         /** Called to update the collision of the physical thing, in order to adapt
          *  to a new animation state.
@@ -122,10 +122,13 @@
 		void setOrientationBias(const Ogre::Quaternion& orientation);
 		PhysicsManager::GeometryType getGeometryType() const;
 		void setBody(OgreNewt::Body* body);
+
+		/** creates a collision primitive for OgreNewt
+		*/
 		OgreNewt::CollisionPtr createCollision(
-			const AxisAlignedBox& aabb, Vector3* offset = NULL, 
-			Quaternion* orientation = NULL, Vector3* inertiaCoefficients = NULL, 
-			const String animName = "") const;
+			const Ogre::AxisAlignedBox& aabb, Ogre::Vector3* offset = NULL, 
+			Ogre::Quaternion* orientation = NULL, Ogre::Vector3* inertiaCoefficients = NULL, 
+			const Ogre::String animName = "") const;
 	};
 }
 

Modified: rl/trunk/engine/core/src/ActorManager.cpp
===================================================================
--- rl/trunk/engine/core/src/ActorManager.cpp	2007-02-27 15:01:53 UTC (rev 3082)
+++ rl/trunk/engine/core/src/ActorManager.cpp	2007-02-27 15:06:56 UTC (rev 3083)
@@ -34,6 +34,8 @@
 #include "SoundObject.h"
 #include "World.h"
 
+using namespace Ogre;
+
 template<> rl::ActorManager* Singleton<rl::ActorManager>::ms_Singleton = 0;
 
 namespace rl {

Modified: rl/trunk/engine/core/src/PhysicalThing.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicalThing.cpp	2007-02-27 15:01:53 UTC (rev 3082)
+++ rl/trunk/engine/core/src/PhysicalThing.cpp	2007-02-27 15:06:56 UTC (rev 3083)
@@ -22,6 +22,7 @@
 #include "PhysicalObject.h"
 #include "MathUtil.h"
 
+using namespace Ogre;
 using namespace OgreNewt;
 using namespace OgreNewt::CollisionPrimitives;
 
@@ -342,12 +343,20 @@
             {
                 // Yes
                 coll = it->second;
+
+				orientationBias = Quaternion::IDENTITY;
+
 				// CONVEXHULL has got a zero offset (see createCollision)
 				if (mGeometryType == PhysicsManager::GT_CONVEXHULL)
 					offset = Vector3::ZERO;
-				else
+				else if (mGeometryType == PhysicsManager::GT_CAPSULE) {
+					const Vector3 diff = size.getMaximum() - size.getMinimum();
+					offset = Vector3(-diff.y/2,0,0); //(-diff.y/2, 0, 0);
+					offset = Vector3::ZERO;
+					//orientationBias.FromAngleAxis(Degree(90), Vector3::UNIT_Y);
+				} else
 					offset = size.getCenter();
-				orientationBias = Quaternion::IDENTITY;
+				
             }
             setOffset(offset);
             mBody->setCollision(coll);
@@ -419,9 +428,11 @@
 			double height = size.y;
 			
 			Quaternion orientCaps;
-			orientCaps.FromAngleAxis(Degree(90), Vector3::UNIT_Z);
+			orientCaps.FromAngleAxis(Degree(90), Vector3::UNIT_Y);
 
-			Vector3 offsetCaps(-size.y/2, 0, 0);
+			//Vector3 offsetCaps (-size.y/2, 0, 0);
+			//Vector3 offsetCaps (-size.y/2, 0, 0);
+			Vector3 offsetCaps (0, 0, 0);
 
 			rval = CollisionPtr(new OgreNewt::CollisionPrimitives::Capsule(
 						physWorld, 
@@ -433,7 +444,7 @@
 			//coll = CollisionPtr(new CollisionPrimitives::Capsule(mWorld, radius, size.y));
 			if (offset != NULL)
 			{
-				*offset = offsetCaps;
+				*offset = aabb.getCenter(); //offsetCaps;
 			}
 
 			if (orientation != NULL)



From natoka at mail.berlios.de  Tue Feb 27 16:18:44 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Tue, 27 Feb 2007 16:18:44 +0100
Subject: [Dsa-hl-svn] r3084 - rl/trunk/engine/script/swig
Message-ID: <200702271518.l1RFIi8o016186@sheep.berlios.de>

Author: natoka
Date: 2007-02-27 16:18:25 +0100 (Tue, 27 Feb 2007)
New Revision: 3084

Modified:
   rl/trunk/engine/script/swig/RlExports.i
   rl/trunk/engine/script/swig/TypeMaps.i
Log:
includes renamed from .inc to .swig


Modified: rl/trunk/engine/script/swig/RlExports.i
===================================================================
--- rl/trunk/engine/script/swig/RlExports.i	2007-02-27 15:06:56 UTC (rev 3083)
+++ rl/trunk/engine/script/swig/RlExports.i	2007-02-27 15:18:25 UTC (rev 3084)
@@ -42,13 +42,13 @@
 %}
 
 
-%include "RlCommon.head.inc"
-%include "RlUi.head.inc"
-%include "RlCore.head.inc"
-%include "RlRules.head.inc"
-%include "RlDialog.head.inc"
-%include "RlAi.head.inc"
-%include "RlScript.head.inc"
+%include "RlCommon.head.swig"
+%include "RlUi.head.swig"
+%include "RlCore.head.swig"
+%include "RlRules.head.swig"
+%include "RlDialog.head.swig"
+%include "RlAi.head.swig"
+%include "RlScript.head.swig"
 
 
 
@@ -215,11 +215,11 @@
 	}
 } 
 
-%include "RlCommon.inc"
-%include "RlCore.inc"
-%include "RlRules.inc"
-%include "RlDialog.inc"
-%include "RlUi.inc"
-%include "RlAi.inc"
-%include "RlScript.inc"
+%include "RlCommon.swig"
+%include "RlCore.swig"
+%include "RlRules.swig"
+%include "RlDialog.swig"
+%include "RlUi.swig"
+%include "RlAi.swig"
+%include "RlScript.swig"
 

Modified: rl/trunk/engine/script/swig/TypeMaps.i
===================================================================
--- rl/trunk/engine/script/swig/TypeMaps.i	2007-02-27 15:06:56 UTC (rev 3083)
+++ rl/trunk/engine/script/swig/TypeMaps.i	2007-02-27 15:18:25 UTC (rev 3084)
@@ -17,17 +17,17 @@
 #ifndef __RL_DYNAMICCAST_I__
 #define __RL_DYNAMICCAST_I__
 
-%include "TypeOgreColourValue.inc"
-%include "TypeOgreQuaternion.inc"
-%include "TypeOgreRadian.inc"
-%include "TypeOgreReal.inc"
-%include "TypeOgreString.inc"
-%include "TypeOgreStringVector.inc"
-%include "TypeOgreVector3.inc"
-%include "TypeRlCeGuiString.inc"
-%include "TypeRlCeGuiStringVector.inc"
-%include "TypeRlProperty.inc"
-%include "TypeRlTripelInt.inc"
-%include "TypeStdPairIntInt.inc"
+%include "TypeOgreColourValue.swig"
+%include "TypeOgreQuaternion.swig"
+%include "TypeOgreRadian.swig"
+%include "TypeOgreReal.swig"
+%include "TypeOgreString.swig"
+%include "TypeOgreStringVector.swig"
+%include "TypeOgreVector3.swig"
+%include "TypeRlCeGuiString.swig"
+%include "TypeRlCeGuiStringVector.swig"
+%include "TypeRlProperty.swig"
+%include "TypeRlTripelInt.swig"
+%include "TypeStdPairIntInt.swig"
 
 #endif



From natoka at mail.berlios.de  Wed Feb 28 04:00:34 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Wed, 28 Feb 2007 04:00:34 +0100
Subject: [Dsa-hl-svn] r3085 - in rl/trunk/engine: core/include core/src
	ui/src
Message-ID: <200702280300.l1S30Yr7015768@sheep.berlios.de>

Author: natoka
Date: 2007-02-28 04:00:28 +0100 (Wed, 28 Feb 2007)
New Revision: 3085

Modified:
   rl/trunk/engine/core/include/PhysicalThing.h
   rl/trunk/engine/core/src/PhysicalThing.cpp
   rl/trunk/engine/ui/src/MovementCharacterController.cpp
Log:
ui/src/MovementCharacterController.cpp bugfix because using CharacterHeight for offseting collision detection is not a good idea (This offset is removed)

The rest of the changes fixes the offset/orientationbias problem of all the collision primitives.


Modified: rl/trunk/engine/core/include/PhysicalThing.h
===================================================================
--- rl/trunk/engine/core/include/PhysicalThing.h	2007-02-27 15:18:25 UTC (rev 3084)
+++ rl/trunk/engine/core/include/PhysicalThing.h	2007-02-28 03:00:28 UTC (rev 3085)
@@ -118,12 +118,23 @@
 		PhysicalObject* mPhysicalObject;
 		bool mHullModifier;
 
-		void setOffset(const Ogre::Vector3& offset);
-		void setOrientationBias(const Ogre::Quaternion& orientation);
+		//void setOffset(const Ogre::Vector3& offset);
+		//void setOrientationBias(const Ogre::Quaternion& orientation);
 		PhysicsManager::GeometryType getGeometryType() const;
 		void setBody(OgreNewt::Body* body);
 
-		/** creates a collision primitive for OgreNewt
+		/** creates a collision primitive for OgreNewt.
+		 * Currently this is Work In Progress - so it's changing 
+		 *    and the offset/orientation is not working accordling at the moment ...
+		 * The collision primitive created has got a basic orientation which can be influenced by
+		 * offset and orientation parameters. Additionally an initial inertiaCoefficents vector is
+		 * calculated according to the size and type of collision primitiv.
+		 * @param aabb AxisAlignedBox that contains the extents of mesh whose coll. primitiv is to be created
+		 * @param offset Vector3 gives the offset of the coordinate system of the coll. primitiv
+		 * @param orientation Quaternion gives an euler rotation for the coordinate system of the coll. primitiv
+		 * @param inertiaCoefficients Vector3 returns the inertia coefficients for the created coll. primitiv
+		 * @param animName String specifies the name of the animation of the mesh whose coll. primitiv should be created,
+		 *        when "", then the basic mesh is used as a basis.
 		*/
 		OgreNewt::CollisionPtr createCollision(
 			const Ogre::AxisAlignedBox& aabb, Ogre::Vector3* offset = NULL, 

Modified: rl/trunk/engine/core/src/PhysicalThing.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicalThing.cpp	2007-02-27 15:18:25 UTC (rev 3084)
+++ rl/trunk/engine/core/src/PhysicalThing.cpp	2007-02-28 03:00:28 UTC (rev 3085)
@@ -102,11 +102,12 @@
         mBody->setVelocity(vel);
     }
 
-	void PhysicalThing::setOffset(const Vector3& offset)
+/*	void PhysicalThing::setOffset(const Vector3& offset)
 	{
 		mOffset = offset;
-        mBody->setOffset(offset);
+        //mBody->setOffset(offset);
 	}
+	*/
 
     Actor *PhysicalThing::getActor(void) const
     {
@@ -127,7 +128,7 @@
     void PhysicalThing::_update()
     {
         mBody->setPositionOrientation(
-            mActor->_getSceneNode()->getWorldPosition() + mBody->getOffset(),
+            mActor->_getSceneNode()->getWorldPosition(), // + mBody->getOffset(),
             mOrientationBias.Inverse() * mActor->_getSceneNode()->getWorldOrientation());
 		mActor->_update(Actor::UF_ALL & ~Actor::UF_PHYSICAL_THING);
     }
@@ -141,7 +142,7 @@
 
     void PhysicalThing::_attachToSceneNode(Ogre::SceneNode* node)
     {
-        mBody->attachToNode(node, mOffset, mOrientationBias);
+        mBody->attachToNode(node); //, mOffset, mOrientationBias);
     }
 
     void PhysicalThing::_attachToBone(MeshObject* object, const std::string& boneName )
@@ -322,8 +323,8 @@
 
     void PhysicalThing::fitToPose(const Ogre::String& name)
     {
-		Vector3 offset;
-		Quaternion orientationBias;
+		Vector3 offset = Vector3::ZERO;
+		Quaternion orientationBias = Quaternion::IDENTITY;;
 		CollisionPtr coll;
         
         if (mPhysicalObject->isMeshObject())
@@ -341,24 +342,10 @@
             }
             else
             {
-                // Yes
+                // collision primitiv is cached, retrieve it
                 coll = it->second;
-
-				orientationBias = Quaternion::IDENTITY;
-
-				// CONVEXHULL has got a zero offset (see createCollision)
-				if (mGeometryType == PhysicsManager::GT_CONVEXHULL)
-					offset = Vector3::ZERO;
-				else if (mGeometryType == PhysicsManager::GT_CAPSULE) {
-					const Vector3 diff = size.getMaximum() - size.getMinimum();
-					offset = Vector3(-diff.y/2,0,0); //(-diff.y/2, 0, 0);
-					offset = Vector3::ZERO;
-					//orientationBias.FromAngleAxis(Degree(90), Vector3::UNIT_Y);
-				} else
-					offset = size.getCenter();
-				
             }
-            setOffset(offset);
+            //setOffset(offset);
             mBody->setCollision(coll);
             mOrientationBias = orientationBias;
 
@@ -378,18 +365,30 @@
     {
 		const Vector3 size = aabb.getMaximum() - aabb.getMinimum();
 
-		if (offset != NULL)
-		{
-			*offset = aabb.getCenter();
-		}
-
 		OgreNewt::World* physWorld = PhysicsManager::getSingleton()._getNewtonWorld();
 
         CollisionPtr rval;
 
+		/* inertiaCoefficients could be calculated like OgreNewt::MomentOfInertia 
+			or even better is to use it ? */
+
+		/* differentiate between the different collision primitives, because they all
+		   need different offset and probably different orientation values.
+		   Newton SDK is really nifty and helps here, because we can shift the origin
+		   of the coordinate system of the primitiv we create into any position we
+		   desire. Actually this is the bottom middle of our mesh - as the meshes are
+		   always constructed like that.
+	    */
 		if (mGeometryType == PhysicsManager::GT_BOX)
         {
-            rval = CollisionPtr(new CollisionPrimitives::Box(physWorld, size));
+			// a box collision primitiv has got it's coordinate system at it's center, so we need to shift it
+			rval = CollisionPtr(new CollisionPrimitives::Box(
+				physWorld,
+				size,
+				Ogre::Quaternion::IDENTITY,
+				aabb.getCenter())
+				);
+
 			if (inertiaCoefficients != NULL)
 			{
                 *inertiaCoefficients = Vector3(
@@ -400,9 +399,14 @@
         }
         else if (mGeometryType == PhysicsManager::GT_SPHERE)
         {
-            double radius = std::max(size.x, std::max(size.y, size.z)) / 2.0;
-            rval = CollisionPtr(new OgreNewt::CollisionPrimitives::Ellipsoid(physWorld,
-                Vector3(radius, radius, radius)));
+			double radius = std::max(size.x, std::max(size.y, size.z)) / 2.0;
+			// a sphere primitiv has got its coordinate system at its center, so shift it with radius
+            rval = CollisionPtr(new OgreNewt::CollisionPrimitives::Ellipsoid(
+				physWorld,
+				Vector3(radius, radius, radius),
+				Ogre::Quaternion::IDENTITY,
+				Vector3(0,radius,0))
+				);
             
 			if (inertiaCoefficients != NULL)
 			{
@@ -415,8 +419,14 @@
             Vector3 s(size/2.0);
             s.x = std::max(s.x, s.z);
             s.z = s.x;
-            rval = CollisionPtr(new OgreNewt::CollisionPrimitives::Ellipsoid(physWorld, s));
 
+			// an ellipsoid primitiv has got its coordinate system at its center, so shift it with radius
+            rval = CollisionPtr(new OgreNewt::CollisionPrimitives::Ellipsoid(
+				physWorld, 
+				s,
+				Ogre::Quaternion::IDENTITY,
+				Vector3(0,s.y,0)));
+
             if (inertiaCoefficients != NULL)
 			{
 				*inertiaCoefficients = Vector3(s.x*s.x, s.y*s.y, s.z*s.z);
@@ -428,30 +438,19 @@
 			double height = size.y;
 			
 			Quaternion orientCaps;
-			orientCaps.FromAngleAxis(Degree(90), Vector3::UNIT_Y);
+			orientCaps.FromAngleAxis(Degree(90), Vector3::UNIT_Z);
 
-			//Vector3 offsetCaps (-size.y/2, 0, 0);
-			//Vector3 offsetCaps (-size.y/2, 0, 0);
-			Vector3 offsetCaps (0, 0, 0);
+			Vector3 offsetCaps (0, size.y/2, 0);
 
+			// an capsule primitiv has got its coordinate system at its center, so shift it with radius
+			// additionally it is x axis aligned, so rotate it 90 degrees around z axis
 			rval = CollisionPtr(new OgreNewt::CollisionPrimitives::Capsule(
 						physWorld, 
 						radius, 
 						height,
 						orientCaps,
 						offsetCaps));
-			//Alte Variante
-			//coll = CollisionPtr(new CollisionPrimitives::Capsule(mWorld, radius, size.y));
-			if (offset != NULL)
-			{
-				*offset = aabb.getCenter(); //offsetCaps;
-			}
-
-			if (orientation != NULL)
-			{
-				*orientation = orientCaps;
-			}
-
+			
 			if (inertiaCoefficients != NULL)
 			{
 				double sradius = radius*radius;
@@ -472,14 +471,6 @@
 					// Objekt zu klein!
 					LOG_MESSAGE(Logger::CORE, " PhyiscalThing too small to create a convexhull, using 'box' instead! ");
 					rval = CollisionPtr(new CollisionPrimitives::Box(physWorld, size));
-					
-					if (inertiaCoefficients != NULL)
-					{
-						*inertiaCoefficients = Vector3(
-						size.x*size.x/6.0f,
-						size.y*size.y/6.0f,
-						size.z*size.z/6.0f);
-					}
 				}
 				else
 				{
@@ -504,12 +495,14 @@
 
 					// cleanup the temporary mesh
 					delete tempMesh;
-										
-					if (offset != NULL)
-					{
-						*offset = Vector3::ZERO;
-					}
 				}
+				if (inertiaCoefficients != NULL)
+				{
+					*inertiaCoefficients = Vector3(
+					size.x*size.x/6.0f,
+					size.y*size.y/6.0f,
+					size.z*size.z/6.0f);
+				}
             }
             else
             {
@@ -523,11 +516,6 @@
                 Entity* entity = dynamic_cast<MeshObject*>(mPhysicalObject)->getEntity();
                 rval = CollisionPtr(new OgreNewt::CollisionPrimitives::TreeCollision(physWorld,
                     entity, false, true));
-
-                if (offset != NULL)
-                {
-                    *offset = Vector3::ZERO;
-                }
             }
             else
             {
@@ -572,7 +560,7 @@
 			body->setCustomForceAndTorqueCallback(PhysicsManager::genericForceCallback);
 
             setBody(body);
-            setOffset(offset);
+            //setOffset(offset);
 			mOrientationBias = orientationBias;
         }
 	}

Modified: rl/trunk/engine/ui/src/MovementCharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/MovementCharacterController.cpp	2007-02-27 15:18:25 UTC (rev 3084)
+++ rl/trunk/engine/ui/src/MovementCharacterController.cpp	2007-02-28 03:00:28 UTC (rev 3085)
@@ -552,7 +552,7 @@
             //if( charPos.y > point.y && angle < Degree(50.0f)  )
             AxisAlignedBox CharAab = mCharBody->getCollision()->getAABB();
             Real CharHeight = CharAab.getMaximum().y - CharAab.getMinimum().y;
-            Real stepHeight = point.y - charPos.y + CharHeight / 2.0f;
+            Real stepHeight = point.y - charPos.y; //+ CharHeight / 2.0f;
             if( stepHeight < 0.4f && mCharacterState.mHasFloorContact ||
                 stepHeight < 0.1f )
                 isFloorCollision = true;



From natoka at mail.berlios.de  Wed Feb 28 04:28:13 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Wed, 28 Feb 2007 04:28:13 +0100
Subject: [Dsa-hl-svn] r3086 - in dependencies/OgreNewt: . include/OgreNewt
	src
Message-ID: <200702280328.l1S3SDlj017227@sheep.berlios.de>

Author: natoka
Date: 2007-02-28 04:27:47 +0100 (Wed, 28 Feb 2007)
New Revision: 3086

Added:
   dependencies/OgreNewt/DifferencesToOgreCVS.txt
Modified:
   dependencies/OgreNewt/include/OgreNewt/OgreNewt.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_BasicJoints.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_Body.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_BodyIterator.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_CollisionPrimitives.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_ContactCallback.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_Debugger.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_Joint.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_MaterialID.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_MaterialPair.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_Prerequisites.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_RayCast.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_Tools.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_TreeCollisionSerializer.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_Vehicle.h
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_World.h
   dependencies/OgreNewt/src/OgreNewt_BasicJoints.cpp
   dependencies/OgreNewt/src/OgreNewt_Body.cpp
   dependencies/OgreNewt/src/OgreNewt_CollisionPrimitives.cpp
   dependencies/OgreNewt/src/OgreNewt_Debugger.cpp
   dependencies/OgreNewt/src/OgreNewt_MaterialID.cpp
   dependencies/OgreNewt/src/OgreNewt_MaterialPair.cpp
   dependencies/OgreNewt/src/OgreNewt_RayCast.cpp
   dependencies/OgreNewt/src/OgreNewt_Tools.cpp
   dependencies/OgreNewt/src/OgreNewt_TreeCollisionSerializer.cpp
   dependencies/OgreNewt/src/OgreNewt_World.cpp
Log:
backportbackported OgreNewt cvs

documented differences between cvs and svn (most, but most likely not all)

Added: dependencies/OgreNewt/DifferencesToOgreCVS.txt
===================================================================
--- dependencies/OgreNewt/DifferencesToOgreCVS.txt	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/DifferencesToOgreCVS.txt	2007-02-28 03:27:47 UTC (rev 3086)
@@ -0,0 +1,194 @@
+This file partionally documents the differences between this svn repository and
+the Ogre addons cvs repository. Some pieces might be outdated, because they 
+have been merged, other pieces might not be mentioned. Therefore this is 
+essentially an overview and by no means complete.
+
+if you don't understand some parts, feel free to contact me
+
+So enjoy reading it,
+Natoka
+
+P.s. most of the #include Prerequisites have been removed in favour of a
+better approach (which means less files to parse for the compiler).
+
+OgreNewt.h:
+	comment changes
+	rl - #include Framelisterner ...
+
+OgreNewt_BasicJoints.h:
+	rl:
+	currently: missing a _OgreNewtExport for CustomRigidJoint
+	cvs: no include of prerequisites
+OgreNewt_BasicJoints.cpp:
+	rl:
+	cvs:
+	#include <Newton.h>
+	m_Accel bug (not initialized)
+
+OgreNewt_Body.h:
+	rl:
+	#include Prerequisites
+	fastdelegates
+	uses CollisionPtr
+	getOgreNode returns an Ogre::SceneNode
+						[fixed] natoka
+		returns an Ogre::Node now ...
+	getOffset()
+	setOffset()
+	getOrientation()
+	setOrientation()
+
+	cvs:
+	boost::function
+	getOgreNode returns an Ogre::Node (this is more generic)
+	autoactiveCallback();
+		auto activate / deactivate callback
+						[takeover] natoka
+						(uses fastdelegates in rl)
+OgreNewt_Body.cpp:
+	rl:
+
+	Callbacks have a if (m_callback != callback) m_callback = callback
+		reason - unknown ...
+	modified setPositionOrientation (to utilize offset/orientationbias)
+
+	cvs:
+	look above
+
+OgreNewt_BodyIterator.h:
+	rl:
+	cvs:
+	newline at end of file
+
+OgreNewt_Collision.h:
+	rl:
+	typedef of CollisionPtr
+	utilization of CollisionPtr to pass Collision objects
+OgreNewt_Collision.cpp:
+	rl:
+	uses CollisionPtr
+
+OgreNewt_CollisionPrimitives.h:
+	rl:
+	#include Prerequisites
+	indentation difference
+	ConvexHull constructor utilizes Ogre::Entity
+	
+	uses CollisionPtr
+	non virtual ~treecollision	[fixed] natoka
+	missing TreecollisionSceneParser [fixed] natoka
+	added better comments
+
+	cvs:
+	ConvexHull constructor utilizes Ogre::SceneNode
+	virtual ~treecollision
+OgreNewt_CollisionPrimitives.cpp:
+	rl:
+	
+	cvs:
+	start()			[takeover] (should be inlined)
+	addVertex()		[takeover] (should be inlined)
+	finalize()		[takeover] (should be inlined)
+	unsigned int in loops	[takeover] natoka
+	TreecollisionSceneParser[takeover] natoka
+
+OgreNewt_ContactCallback.h:
+	rl:
+	#include Prerequisites
+
+	cvs:
+	material and contact get functions for newton mat & contanct
+
+OgreNewt_Debugger.h:
+	rl:
+	destructor defined with code
+
+	cvs:
+	additional	deinit();
+OgreNewt_Debugger.h:
+	rl:
+
+	cvs:
+	indent				[takeover] natoka
+	destructor			[takeover] natoka
+	additional	deinit();	[takeover] natoka
+	uses detachAllObjects		[takeover] natoka
+		in showLines() and
+		hideLines()
+
+OgreNewt_Joint.h:
+	rl:
+	#include Prerequisites
+
+OgreNewt_MaterialID.h:
+	rl:
+	#include Prerequisites
+OgreNewt_MaterialID.cpp:
+	rl:
+	missing newline			[fixed] natoka
+
+OgreNewt_MaterialPair.h:
+	rl:
+	#include Prerequisites
+OgreNewt_MaterialPair.cpp:
+	newline at end
+
+OgreNewt_Prerequisites.h:
+	rl:
+	include <stddef.h>
+
+OgreNewt_RayCast.h:
+	rl:
+	BasicRaycastInfo() constructor in the header [fixed] natoka
+	BasicRaycastInfo() operator < in the header  [!!!!!]
+	virtual ~BasicRaycast()
+
+	cvs:
+	indent, newlines (empty)		[takeover] natoka
+	userPrefilteredCallback()		[takeover] natoka
+		user callback pre-filter function
+	newtonRaycastPrefilter()		[takeover] natoka
+	nonvirtual ~BasicRaycast()
+
+OgreNewt_Tools.h:
+	rl:
+	uses 'using namespace Ogre' 	(args)	[fixed]	natoka
+	utilizes CollisionPtr
+	CalcSphereHollor() renamed to CalcSphereHollow()	[fixed] natoka
+
+	cvs:
+OgreNewt_Tools.cpp:
+	rl:
+	CollisionPointDistance()
+		doesn't missuse globalpt parameter
+
+	cvs:
+	uses 'using namespace Ogre' within source (cleaner) [takeover] natoka
+	CollisionPointDistance()
+		globalpt parameter misused for calculation
+
+
+OgreNewt_TreeCollisionSerializer.h
+	rl:
+	#include Prerequisites
+OgreNewt_TreeCollisionSerializer.cpp
+	rl:
+	uses 'using namespae Ogre'
+
+	cvs:
+	explicitly uses Ogre:: everywere 	[takeover] natoka
+
+
+OgreNewt_Vehicle.h:
+	rl:
+	#include Prerequisites
+
+OgreNewt_World.h:
+	rl:
+	uses fastdelegates
+
+	cvs:
+	uses boost::function
+OgreNewt_World.cpp:
+	newline at file end
+	

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -8,11 +8,11 @@
 
 	main header file.
 
-	current version:  0.06
+	current version:  0.10
 
-		Newton version: 1.5
+		Newton version: 1.53
 
-		Ogre version: Dagon branch
+		Ogre version: Eihort (1.4.x)
 
 */
 
@@ -38,8 +38,9 @@
 #include "OgreNewt_BodyIterator.h"
 #include "OgreNewt_Debugger.h"
 
-/*! \mainpage OgreNewt Library version 0.07
 
+/*! \mainpage OgreNewt Library version 0.10
+
 	\section into_sec Introduction
 
 	OgreNewt is an OOP wrapper for integrating the Newton Dynamics Physics SDK with OGRE.
@@ -47,12 +48,21 @@
 	\section new New in this Version
 
 	New in this version!
+		- OgreNewt and it's demos are now fully compatible with Ogre 1.4.x (Eihort).
 		- moved callback system to much more OOP-friendly "fastdelegate" system.  callbacks can now be instance-specific member functions!
+		- Addition of script files for compiling under linux (Scons)
+		- slight modification to the ContactCallback class to allow access to Newton structures from the outside.
+
+	previous changes...
+		- some cosmetic changes to make the wrapper compile more easily under Linux and other non-windows platforms.
+		- updated to work with the release version of Ogre dagon (1.2)
+		- updated to work with version 1.53 of Newton
+		- raycast now has an optional pre-filter to ignore specific bodies from the raycast.
+		- various other clean-up!
+		- moved callback system to much more OOP-friendly "boost::function" system.  callbacks can now be instance-specific member functions!
 		- several other small fixes to project files, etc.
 		- automatic convex hull generation system added to supplementary ragdoll class (see demo08).
 		- documentation updated.
-
-	previous changes...
 		- updated to Newton version 1.5
 		- added this documentation!
 		- added buoyancy functionality.
@@ -82,11 +92,11 @@
 	- c:/programming/Ogre/ogrenew						<- ogre installation
 	- c:/programming/Ogre/ogreaddons/OgreNewt			<- OgreNewt main directory.
 	- c:/programming/NewtonSDK							<- Newton SDK.
-	- c:/programming/tinyxml							<- tinyxml library (for ragdoll demo only)
+	- c:/programming/tinyxml							<- tinyxml library (needed for ragdoll demo only)
 
 	\section compiling Compiling
 
-	OgreNewt compiles be default to a static library for linking to your project.  However you can also compile OgreNewt into a dynamic DLL on the 
+	OgreNewt compiles by default to a static library for linking to your project.  However you can also compile OgreNewt into a dynamic DLL on the 
 	Windows platform by using the Debug_DLL and Release_DLL solution build configurations in the MSVC solutions.
 
 	note that if you compile OgreNewt as a dynamic DLL and the default debugger, you will need to manually link to the Line3D.obj file by
@@ -105,3 +115,4 @@
 */
 
 #endif
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_BasicJoints.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_BasicJoints.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_BasicJoints.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -1,557 +1,556 @@
-/* 
-	OgreNewt Library
-
-	Ogre implementation of Newton Game Dynamics SDK
-
-	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
-
-		by Walaber
-
-*/
-#ifndef _INCLUDE_OGRENEWT_BASICJOINTS
-#define _INCLUDE_OGRENEWT_BASICJOINTS
-
-#include "OgreNewt_Prerequisites.h"
-#include <Newton.h>
-#include "OgreNewt_World.h"
-#include "OgreNewt_Body.h"
-#include "OgreNewt_Joint.h"
-
-// OgreNewt namespace.  all functions and classes use this namespace.
-namespace OgreNewt
-{
-
-
-//! Namespace for ready-made joints
-namespace BasicJoints
-{
-
-//! Ball and Socket joint.
-/*!
-	simple ball and socket joint, with limits.
-*/
-class _OgreNewtExport BallAndSocket : public Joint
-{
- 
-public:
-
-	//! constructor
-	/*!
-		\param world pointer to the OgreNewt::World
-		\param child pointer to the child rigid body.
-		\param parent pointer to the parent rigid body. pass NULL to make the world itself the parent (aka a rigid joint)
-		\param pos position of the joint in global space
-	*/
-	BallAndSocket( const World* world, const OgreNewt::Body* child, const OgreNewt::Body* parent, const Ogre::Vector3& pos );
-	
-	//! destructor.
-	~BallAndSocket();					
-
-	//! retrieve the current joint angle
-	Ogre::Vector3 getJointAngle() const;
-
-	//! retrieve the current joint omega
-	Ogre::Vector3 getJointOmega() const;
-
-	//! retrieve the current joint force.
-	/*!
-		This can be used to find the "stress" on the joint.  you can do special effects like break the joint if the force exceedes some value, etc.
-	*/
-	Ogre::Vector3 getJointForce() const;
-
-	//! set limits for the joints rotation
-	/*!
-		\param pin pin direction in global space
-		\param maxCone max angle for "swing" (in radians)
-		\param maxTwist max angle for "twist"  (in radians)
-	*/
-	void setLimits( const Ogre::Vector3& pin, Ogre::Radian maxCone, Ogre::Radian maxTwist ) const { NewtonBallSetConeLimits( m_joint, &pin.x, (float)maxCone.valueRadians(), (float)maxTwist.valueRadians() ); }
-
-
-};
-
-
-//! hinge joint.
-/*!
-	simple hinge joint.  implement motors/limits through a callback.
-*/
-class _OgreNewtExport Hinge : public Joint
-{
- 
-public:
-
-	//! custom hinge callback function.
-	/*!
-		 use the setCallback() function to assign your custom function to the joint.
-	 */
-	typedef void(*HingeCallback)( Hinge* me );
-
-	//! constructor
-	/*!
-		\param world pointer to the OgreNewt::World
-		\param child pointer to the child rigid body.
-		\param parent pointer to the parent rigid body. pass NULL to make the world itself the parent (aka a rigid joint)
-		\param pin direction of the joint pin in global space
-	*/
-	Hinge( const World* world, const OgreNewt::Body* child, const OgreNewt::Body* parent, const Ogre::Vector3& pos, const Ogre::Vector3& pin );
-
-	//! destructor
-	~Hinge();	
-
-	//! retrieve the angle around the pin.
-	Ogre::Radian getJointAngle() const { return Ogre::Radian(NewtonHingeGetJointAngle( m_joint )); }
-
-	//! retrieve the rotational velocity around the pin.
-	Ogre::Real getJointOmega() const { return (Ogre::Real)NewtonHingeGetJointOmega( m_joint ); }
-
-	//! get the force on the joint.
-	Ogre::Vector3 getJointForce() const;
-
-	//! set a custom callback for controlling this joint.
-	/*!
-		Joint callbacks allow you to make complex joint behavior such as limits or motors.  just make a custom static function that
-		accepts a pointer to a OgreNewt::BasicJoints::Hinge as the single parameter.  this function will be called automatically every
-		time you upate the World.
-	*/
-	void setCallback( HingeCallback callback ) { m_callback = callback; }
-
-
-	////////// CALLBACK COMMANDS ///////////
-	// the following commands are only valid from inside a hinge callback function
-
-	//! set acceleration around the joint pin
-	/*!
-		This command is only valid when used inside a custom Hinge callback.
-	*/
-	void setCallbackAccel( Ogre::Real accel );
-
-	//! set minimum joint friction.
-	/*!
-		This command is only valid when used inside a custom Hinge callback.
-	*/
-	void setCallbackFrictionMin( Ogre::Real min );
-
-	//! set maximum joint friction
-	/*!
-		This command is only valid when used inside a custom Hinge callback.
-	*/
-	void setCallbackFrictionMax( Ogre::Real max );
-
-	//! get the current physics timestep.
-	/*!
-		This command is only valid when used inside a custom Hinge callback.
-	*/
-	Ogre::Real getCallbackTimestep() const;
-
-	//! calculate the acceleration neccesary to stop the joint at the specified angle.
-	/*!
-		For implementing joint limits.
-		This command is only valid when used inside a custom Hinge callback.
-	*/
-	Ogre::Real calculateStopAlpha( Ogre::Radian angle ) const;
-
-protected:
-
-	//! newton callback, used internally.
-	static unsigned _CDECL newtonCallback( const NewtonJoint* hinge, NewtonHingeSliderUpdateDesc* desc );
-
-	HingeCallback m_callback;
-	NewtonHingeSliderUpdateDesc* m_desc;
-
-	unsigned m_retval;
-
-
-};
-
-
-//! slider joint.
-/*!
-	simple slider joint.  implement motors/limits through a callback.
-*/
-class _OgreNewtExport Slider : public Joint
-{
- 
-public:
-
-	//! custom slider callback function.
-	/*!
-		 use the setCallback() function to assign your custom function to the joint.
-	 */
-	typedef void(*SliderCallback)( Slider* me );
-
-	//! constructor
-	/*!
-		\param world pointer to the OgreNewt::World
-		\param child pointer to the child rigid body.
-		\param parent pointer to the parent rigid body. pass NULL to make the world itself the parent (aka a rigid joint)
-		\param pin direction of the joint pin in global space
-	*/
-	Slider( const World* world, const OgreNewt::Body* child, const OgreNewt::Body* parent, const Ogre::Vector3& pos, const Ogre::Vector3& pin );
-
-	//! destructor.
-	~Slider();
-
-	//! get position of child along the pin
-	Ogre::Real getJointPosit() const { return (Ogre::Real)NewtonSliderGetJointPosit( m_joint ); }
-
-	//! get rotational velocity along the pin
-	Ogre::Real getJointVeloc() const { return (Ogre::Real)NewtonSliderGetJointVeloc( m_joint ); }
-
-	//! get force on the joint.
-	Ogre::Vector3 getJointForce() const;
-
-	//! set a custom callback for controlling this joint.
-	/*!
-		Joint callbacks allow you to make complex joint behavior such as limits or motors.  just make a custom static function that
-		accepts a pointer to a OgreNewt::BasicJoints::Slider as the single parameter.  this function will be called automatically every
-		time you upate the World.
-	*/
-	void setCallback( SliderCallback callback ) { m_callback = callback; }
-
-	////////// CALLBACK COMMANDS ///////////
-	// the following commands are only valid from inside a hinge callback function
-
-	//! set the acceleration along the pin.
-	/*!
-		This command is only valid when used inside a custom Slider callback.
-	*/
-	void setCallbackAccel( Ogre::Real accel );
-
-	//! set minimum friction for the joint
-	/*!
-		This command is only valid when used inside a custom Slider callback.
-	*/
-	void setCallbackFrictionMin( Ogre::Real min );
-
-	//! set maximum friction for the joint.
-	/*!
-		This command is only valid when used inside a custom Slider callback.
-	*/
-	void setCallbackFrictionMax( Ogre::Real max );
-
-	//! get current physics timestep.
-	/*!
-		This command is only valid when used inside a custom Slider callback.
-	*/
-	Ogre::Real getCallbackTimestep() const;
-
-	//! calculate the acceleration neccesary to stop the joint at the specified distance.
-	/*!
-		For implementing joint limits.
-		This command is only valid when used inside a custom Slider callback.
-	*/
-	Ogre::Real calculateStopAccel( Ogre::Real dist ) const;
-
-protected:
-
-	//! newton callback.  used internally.
-	static unsigned _CDECL newtonCallback( const NewtonJoint* slider, NewtonHingeSliderUpdateDesc* desc );
-
-	SliderCallback m_callback;
-	NewtonHingeSliderUpdateDesc* m_desc;
-
-	unsigned m_retval;
-
-};
-
-
-
-//!	this class represents a Universal joint.
-/*!
-	simple universal joint.  implement motors/limits through a callback.
-*/
-class _OgreNewtExport Universal : public Joint
-{
- 
-public:
-	
-	//! custom universal callback function.
-	/*!
-		 use the setCallback() function to assign your custom function to the joint.
-	 */
-	typedef void(*UniversalCallback)( Universal* me );
-
-	//! constructor
-	/*!
-		\param world pointer to the OgreNewt::World
-		\param child pointer to the child rigid body.
-		\param parent pointer to the parent rigid body. pass NULL to make the world itself the parent (aka a rigid joint)
-		\param pos position of the joint in global space
-		\param pin0 direction of the first axis of rotation in global space
-		\param pin1 direction of the second axis of rotation in global space
-	*/
-	Universal( const World* world, const OgreNewt::Body* child, const OgreNewt::Body* parent, const Ogre::Vector3& pos, const Ogre::Vector3& pin0, const Ogre::Vector3& pin1 );
-
-	//! destructor
-	~Universal();
-
-	//! get the angle around pin0.
-	Ogre::Radian getJointAngle0() const { return Ogre::Radian(NewtonUniversalGetJointAngle0( m_joint )); }
-
-	//! get the angle around pin1.
-	Ogre::Radian getJointAngle1() const { return Ogre::Radian(NewtonUniversalGetJointAngle1( m_joint )); }
-
-	//! get the rotational velocity around pin0.
-	Ogre::Real getJointOmega0() const { return (Ogre::Real)NewtonUniversalGetJointOmega0( m_joint ); }
-
-	//! get the rotational velocity around pin1.
-	Ogre::Real getJointOmega1() const { return (Ogre::Real)NewtonUniversalGetJointOmega1( m_joint ); }
-
-	//! get the force on the joint.
-	Ogre::Vector3 getJointForce() const;
-
-	//! set a custom callback for controlling this joint.
-	/*!
-		Joint callbacks allow you to make complex joint behavior such as limits or motors.  just make a custom static function that
-		accepts a pointer to a OgreNewt::BasicJoints::Universal as the single parameter.  this function will be called automatically every
-		time you upate the World.
-	*/
-	void setCallback( UniversalCallback callback ) { m_callback = callback; }
-
-	////////// CALLBACK COMMANDS ///////////
-	// the following commands are only valid from inside a hinge callback function
-
-	//! set the acceleration around a particular pin.
-	/*
-		this function can only be called from within a custom callback.
-		\param accel desired acceleration
-		\param axis which pin to use (0 or 1)
-	*/
-	void setCallbackAccel( Ogre::Real accel, unsigned axis );
-
-	//! set the minimum friction around a particular pin
-	/*
-		this function can only be called from within a custom callback.
-		\param min minimum friction
-		\param axis which pin to use (0 or 1)
-	*/
-	void setCallbackFrictionMin( Ogre::Real min, unsigned axis );
-
-	//! set the maximum friction around a particular pin.
-	/*
-		this function can only be called from within a custom callback.
-		\param max maximum friction
-		\param axis which pin to use (0 or 1)
-	*/
-	void setCallbackFrictionMax( Ogre::Real max, unsigned axis );
-
-	//! get the current phsics timestep.
-	/*
-		this function can only be called from within a custom callback.
-	*/
-	Ogre::Real getCallbackTimestep() const;
-
-	//! calculate the acceleration neccesary to stop the joint at the specified angle on pin 0.
-	/*!
-		For implementing joint limits.
-		This command is only valid when used inside a custom  callback.
-	*/
-	Ogre::Real calculateStopAlpha0( Ogre::Real angle ) const;
-
-	//! calculate the acceleration neccesary to stop the joint at the specified angle on pin 1.
-	/*!
-		For implementing joint limits.
-		This command is only valid when used inside a custom  callback.
-	*/
-	Ogre::Real calculateStopAlpha1( Ogre::Real angle ) const;
-
-protected:
-	
-	//! newton callback.  used internally.
-	static unsigned _CDECL newtonCallback( const NewtonJoint* universal, NewtonHingeSliderUpdateDesc* desc );
-
-	UniversalCallback m_callback;
-	NewtonHingeSliderUpdateDesc* m_desc;
-
-	unsigned m_retval;
-
-
-
-};
-
-
-
-//! UpVector joint.
-/*!
-	simple upvector joint.  upvectors remove all rotation except for a single pin.  useful for character controllers, etc.
-*/
-class _OgreNewtExport UpVector : public Joint
-{
- 
-public:
-	//! constructor
-	/*
-		\param world pointer to the OgreNewt::World.
-		\param body pointer to the body to apply the upvector to.
-		\param pin direction of the upvector in global space.
-	*/
-	UpVector( const World* world, const Body* body, const Ogre::Vector3& pin );
-
-	//! destructor
-	~UpVector();
-
-	//! set the pin direction.
-	/*
-		by calling this function in realtime, you can effectively "animate" the pin.
-	*/
-	void setPin( const Ogre::Vector3& pin ) const { NewtonUpVectorSetPin( m_joint, &pin.x ); }
-
-	//! get the current pin direction.
-	Ogre::Vector3 getPin() const;
-
-
-};
-
-
-}	// end NAMESPACE BasicJoints
-
-
-//! namespace for pre-built custom joints
-namespace PrebuiltCustomJoints
-{
-
-	//! Custom2DJoint class
-	/*!
-		This class represents a joint that limits movement to a plane, and rotation only around the normal of that
-		plane.  This can be used to create simple 2D simulations.  it also supports limits and acceleration for spinning.
-		This joint has been used in a few projects, but is not 100% fully-tested.
-	*/
-	class _OgreNewtExport Custom2DJoint : public OgreNewt::CustomJoint
-	{
-	public:
-		//! constructor
-		Custom2DJoint( const OgreNewt::Body* body, const Ogre::Vector3& pin );
-
-		//! destructor
-		~Custom2DJoint() {}
-
-		//! overloaded function that applies the actual constraint.
-		void submitConstraint();
-
-		//! get the current angle of the joint.
-		Ogre::Radian getAngle() const { return mAngle; }
-
-		//! set rotational limits for the joint.
-		void setLimits( Ogre::Degree min, Ogre::Degree max ) { mMin = min, mMax = max; }
-		
-		//! sets whether to enable limits or not for the joint.
-		void setLimitsOn( bool onoff ) { mLimitsOn = onoff; }
-
-		//! returns whether limits are turned on or off for the joint.
-		bool getLimitsOn() const { return mLimitsOn; }
-
-		//! adds rotational acceleration to the joint (like a motor)
-		void addAccel( Ogre::Real accel ) { mAccel = accel; }
-
-		//! resets the joint angle to 0.  this simply sets the internal variable to zero.
-		//! you might want to call this for example after resetting a body.
-		void resetAngle() { mAngle = Ogre::Radian(0.0f); }
-
-		//! get the pin.
-		Ogre::Vector3 getPin() { return mPin; }
-
-	private:
-		Ogre::Vector3 mPin;
-		Ogre::Quaternion mLocalOrient0, mLocalOrient1;
-		Ogre::Vector3 mLocalPos0, mLocalPos1;
-
-		Ogre::Radian mAngle;
-
-		Ogre::Radian mMin;
-		Ogre::Radian mMax;
-
-		bool mLimitsOn;
-
-		Ogre::Real mAccel;
-	};
-
-	//! CustomFixedJoint
-	/*!
-		This joint implements a fully fixed joint, which removes all DOF, creating a completely fixed connection between bodies.
-		This is probably the most expensive kind of joint, and should only be used when really needed.
-	*/
-	class CustomRigidJoint : public OgreNewt::CustomJoint
-	{
-	public:
-		CustomRigidJoint( OgreNewt::Body* child, OgreNewt::Body* parent, Ogre::Vector3 dir, Ogre::Vector3 pos);
-		~CustomRigidJoint();
-
-		void submitConstraint();
-
-	private:
-		Ogre::Vector3 mLocalPos0;
-		Ogre::Vector3 mLocalPos1;
-
-		Ogre::Quaternion mLocalOrient0;
-		Ogre::Quaternion mLocalOrient1;
-	};
-
-
-	//! CutomPulleyJoint
-	/*!
-		This joint implements a pulley system.  note that this joint only works with 2 bodies attached!
-	*/
-	class _OgreNewtExport CustomPulleyJoint : public OgreNewt::CustomJoint
-	{
-	public:
-		//! constructor
-		/*!
-			\param gearRatio float value representing the ratio of movement between parent and child.
-			\param parent pointer to OgreNewt::Body to be the parent body.
-			\param child pointer to the OgreNewt::Body to be the child body.
-			\param parentPin direction vector for movement of parent.
-			\param childPin direction vector for movement of child.
-		*/
-		CustomPulleyJoint( Ogre::Real gearRatio, const Body* parent, const Body* child, const Ogre::Vector3& parentPin, const Ogre::Vector3& childPin );
-		~CustomPulleyJoint() {}
-
-		//! overloaded function to submit the constraint.
-		void submitConstraint();
-
-	private:
-		Ogre::Real			mGearRatio;
-
-		Ogre::Vector3		mLocalPos0, mLocalPos1;
-		Ogre::Quaternion	mLocalOrient0, mLocalOrient1;
-	};
-
-
-	//! CustomGearJoint
-	/*!
-		This class works like 2 gears that mesh, retaining a specific ration between the rotational velocity of the bodies.
-		The gears don't have to rotate around the same axis, that is why 2 pins are supplied.
-	*/
-	class _OgreNewtExport CustomGearJoint : public OgreNewt::CustomJoint
-	{
-	public:
-		/*!
-			\param gearRatio float value representing the ratio of movement between parent and child.
-			\param parent pointer to OgreNewt::Body to be the parent body.
-			\param child pointer to the OgreNewt::Body to be the child body.
-			\param parentPin pin around which the parent's rotation should be tracked.
-			\param childPin pin around which the child's rotation should be tracked.
-		*/
-		CustomGearJoint( Ogre::Real gearRatio, const Body* parent, const Body* child, const Ogre::Vector3& parentPin, const Ogre::Vector3& childPin );
-		~CustomGearJoint() {}
-
-		//! overloaded function to submit the constraint.
-		void submitConstraint();
-
-	private:
-		Ogre::Real			mGearRatio;
-
-		Ogre::Vector3		mLocalPos0, mLocalPos1;
-		Ogre::Quaternion	mLocalOrient0, mLocalOrient1;
-	};
-
-
-
-
-}	// end NAMESPACE PrebuiltCustomJoints
-
-
-}	// end NAMESPACE OgreNewt
-
-#endif
-// _INCLUDE_OGRENEWT_BASICJOINTS
-
+/* 
+	OgreNewt Library
+
+	Ogre implementation of Newton Game Dynamics SDK
+
+	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
+
+		by Walaber
+
+*/
+#ifndef _INCLUDE_OGRENEWT_BASICJOINTS
+#define _INCLUDE_OGRENEWT_BASICJOINTS
+
+#include <Newton.h>
+#include "OgreNewt_World.h"
+#include "OgreNewt_Body.h"
+#include "OgreNewt_Joint.h"
+
+// OgreNewt namespace.  all functions and classes use this namespace.
+namespace OgreNewt
+{
+
+
+//! Namespace for ready-made joints
+namespace BasicJoints
+{
+
+//! Ball and Socket joint.
+/*!
+	simple ball and socket joint, with limits.
+*/
+class _OgreNewtExport BallAndSocket : public Joint
+{
+ 
+public:
+
+	//! constructor
+	/*!
+		\param world pointer to the OgreNewt::World
+		\param child pointer to the child rigid body.
+		\param parent pointer to the parent rigid body. pass NULL to make the world itself the parent (aka a rigid joint)
+		\param pos position of the joint in global space
+	*/
+	BallAndSocket( const World* world, const OgreNewt::Body* child, const OgreNewt::Body* parent, const Ogre::Vector3& pos );
+	
+	//! destructor.
+	~BallAndSocket();					
+
+	//! retrieve the current joint angle
+	Ogre::Vector3 getJointAngle() const;
+
+	//! retrieve the current joint omega
+	Ogre::Vector3 getJointOmega() const;
+
+	//! retrieve the current joint force.
+	/*!
+		This can be used to find the "stress" on the joint.  you can do special effects like break the joint if the force exceedes some value, etc.
+	*/
+	Ogre::Vector3 getJointForce() const;
+
+	//! set limits for the joints rotation
+	/*!
+		\param pin pin direction in global space
+		\param maxCone max angle for "swing" (in radians)
+		\param maxTwist max angle for "twist"  (in radians)
+	*/
+	void setLimits( const Ogre::Vector3& pin, Ogre::Radian maxCone, Ogre::Radian maxTwist ) const { NewtonBallSetConeLimits( m_joint, &pin.x, (float)maxCone.valueRadians(), (float)maxTwist.valueRadians() ); }
+
+
+};
+
+
+//! hinge joint.
+/*!
+	simple hinge joint.  implement motors/limits through a callback.
+*/
+class _OgreNewtExport Hinge : public Joint
+{
+ 
+public:
+
+	//! custom hinge callback function.
+	/*!
+		 use the setCallback() function to assign your custom function to the joint.
+	 */
+	typedef void(*HingeCallback)( Hinge* me );
+
+	//! constructor
+	/*!
+		\param world pointer to the OgreNewt::World
+		\param child pointer to the child rigid body.
+		\param parent pointer to the parent rigid body. pass NULL to make the world itself the parent (aka a rigid joint)
+		\param pin direction of the joint pin in global space
+	*/
+	Hinge( const World* world, const OgreNewt::Body* child, const OgreNewt::Body* parent, const Ogre::Vector3& pos, const Ogre::Vector3& pin );
+
+	//! destructor
+	~Hinge();	
+
+	//! retrieve the angle around the pin.
+	Ogre::Radian getJointAngle() const { return Ogre::Radian(NewtonHingeGetJointAngle( m_joint )); }
+
+	//! retrieve the rotational velocity around the pin.
+	Ogre::Real getJointOmega() const { return (Ogre::Real)NewtonHingeGetJointOmega( m_joint ); }
+
+	//! get the force on the joint.
+	Ogre::Vector3 getJointForce() const;
+
+	//! set a custom callback for controlling this joint.
+	/*!
+		Joint callbacks allow you to make complex joint behavior such as limits or motors.  just make a custom static function that
+		accepts a pointer to a OgreNewt::BasicJoints::Hinge as the single parameter.  this function will be called automatically every
+		time you upate the World.
+	*/
+	void setCallback( HingeCallback callback ) { m_callback = callback; }
+
+
+	////////// CALLBACK COMMANDS ///////////
+	// the following commands are only valid from inside a hinge callback function
+
+	//! set acceleration around the joint pin
+	/*!
+		This command is only valid when used inside a custom Hinge callback.
+	*/
+	void setCallbackAccel( Ogre::Real accel );
+
+	//! set minimum joint friction.
+	/*!
+		This command is only valid when used inside a custom Hinge callback.
+	*/
+	void setCallbackFrictionMin( Ogre::Real min );
+
+	//! set maximum joint friction
+	/*!
+		This command is only valid when used inside a custom Hinge callback.
+	*/
+	void setCallbackFrictionMax( Ogre::Real max );
+
+	//! get the current physics timestep.
+	/*!
+		This command is only valid when used inside a custom Hinge callback.
+	*/
+	Ogre::Real getCallbackTimestep() const;
+
+	//! calculate the acceleration neccesary to stop the joint at the specified angle.
+	/*!
+		For implementing joint limits.
+		This command is only valid when used inside a custom Hinge callback.
+	*/
+	Ogre::Real calculateStopAlpha( Ogre::Radian angle ) const;
+
+protected:
+
+	//! newton callback, used internally.
+	static unsigned _CDECL newtonCallback( const NewtonJoint* hinge, NewtonHingeSliderUpdateDesc* desc );
+
+	HingeCallback m_callback;
+	NewtonHingeSliderUpdateDesc* m_desc;
+
+	unsigned m_retval;
+
+
+};
+
+
+//! slider joint.
+/*!
+	simple slider joint.  implement motors/limits through a callback.
+*/
+class _OgreNewtExport Slider : public Joint
+{
+ 
+public:
+
+	//! custom slider callback function.
+	/*!
+		 use the setCallback() function to assign your custom function to the joint.
+	 */
+	typedef void(*SliderCallback)( Slider* me );
+
+	//! constructor
+	/*!
+		\param world pointer to the OgreNewt::World
+		\param child pointer to the child rigid body.
+		\param parent pointer to the parent rigid body. pass NULL to make the world itself the parent (aka a rigid joint)
+		\param pin direction of the joint pin in global space
+	*/
+	Slider( const World* world, const OgreNewt::Body* child, const OgreNewt::Body* parent, const Ogre::Vector3& pos, const Ogre::Vector3& pin );
+
+	//! destructor.
+	~Slider();
+
+	//! get position of child along the pin
+	Ogre::Real getJointPosit() const { return (Ogre::Real)NewtonSliderGetJointPosit( m_joint ); }
+
+	//! get rotational velocity along the pin
+	Ogre::Real getJointVeloc() const { return (Ogre::Real)NewtonSliderGetJointVeloc( m_joint ); }
+
+	//! get force on the joint.
+	Ogre::Vector3 getJointForce() const;
+
+	//! set a custom callback for controlling this joint.
+	/*!
+		Joint callbacks allow you to make complex joint behavior such as limits or motors.  just make a custom static function that
+		accepts a pointer to a OgreNewt::BasicJoints::Slider as the single parameter.  this function will be called automatically every
+		time you upate the World.
+	*/
+	void setCallback( SliderCallback callback ) { m_callback = callback; }
+
+	////////// CALLBACK COMMANDS ///////////
+	// the following commands are only valid from inside a hinge callback function
+
+	//! set the acceleration along the pin.
+	/*!
+		This command is only valid when used inside a custom Slider callback.
+	*/
+	void setCallbackAccel( Ogre::Real accel );
+
+	//! set minimum friction for the joint
+	/*!
+		This command is only valid when used inside a custom Slider callback.
+	*/
+	void setCallbackFrictionMin( Ogre::Real min );
+
+	//! set maximum friction for the joint.
+	/*!
+		This command is only valid when used inside a custom Slider callback.
+	*/
+	void setCallbackFrictionMax( Ogre::Real max );
+
+	//! get current physics timestep.
+	/*!
+		This command is only valid when used inside a custom Slider callback.
+	*/
+	Ogre::Real getCallbackTimestep() const;
+
+	//! calculate the acceleration neccesary to stop the joint at the specified distance.
+	/*!
+		For implementing joint limits.
+		This command is only valid when used inside a custom Slider callback.
+	*/
+	Ogre::Real calculateStopAccel( Ogre::Real dist ) const;
+
+protected:
+
+	//! newton callback.  used internally.
+	static unsigned _CDECL newtonCallback( const NewtonJoint* slider, NewtonHingeSliderUpdateDesc* desc );
+
+	SliderCallback m_callback;
+	NewtonHingeSliderUpdateDesc* m_desc;
+
+	unsigned m_retval;
+
+};
+
+
+
+//!	this class represents a Universal joint.
+/*!
+	simple universal joint.  implement motors/limits through a callback.
+*/
+class _OgreNewtExport Universal : public Joint
+{
+ 
+public:
+	
+	//! custom universal callback function.
+	/*!
+		 use the setCallback() function to assign your custom function to the joint.
+	 */
+	typedef void(*UniversalCallback)( Universal* me );
+
+	//! constructor
+	/*!
+		\param world pointer to the OgreNewt::World
+		\param child pointer to the child rigid body.
+		\param parent pointer to the parent rigid body. pass NULL to make the world itself the parent (aka a rigid joint)
+		\param pos position of the joint in global space
+		\param pin0 direction of the first axis of rotation in global space
+		\param pin1 direction of the second axis of rotation in global space
+	*/
+	Universal( const World* world, const OgreNewt::Body* child, const OgreNewt::Body* parent, const Ogre::Vector3& pos, const Ogre::Vector3& pin0, const Ogre::Vector3& pin1 );
+
+	//! destructor
+	~Universal();
+
+	//! get the angle around pin0.
+	Ogre::Radian getJointAngle0() const { return Ogre::Radian(NewtonUniversalGetJointAngle0( m_joint )); }
+
+	//! get the angle around pin1.
+	Ogre::Radian getJointAngle1() const { return Ogre::Radian(NewtonUniversalGetJointAngle1( m_joint )); }
+
+	//! get the rotational velocity around pin0.
+	Ogre::Real getJointOmega0() const { return (Ogre::Real)NewtonUniversalGetJointOmega0( m_joint ); }
+
+	//! get the rotational velocity around pin1.
+	Ogre::Real getJointOmega1() const { return (Ogre::Real)NewtonUniversalGetJointOmega1( m_joint ); }
+
+	//! get the force on the joint.
+	Ogre::Vector3 getJointForce() const;
+
+	//! set a custom callback for controlling this joint.
+	/*!
+		Joint callbacks allow you to make complex joint behavior such as limits or motors.  just make a custom static function that
+		accepts a pointer to a OgreNewt::BasicJoints::Universal as the single parameter.  this function will be called automatically every
+		time you upate the World.
+	*/
+	void setCallback( UniversalCallback callback ) { m_callback = callback; }
+
+	////////// CALLBACK COMMANDS ///////////
+	// the following commands are only valid from inside a hinge callback function
+
+	//! set the acceleration around a particular pin.
+	/*
+		this function can only be called from within a custom callback.
+		\param accel desired acceleration
+		\param axis which pin to use (0 or 1)
+	*/
+	void setCallbackAccel( Ogre::Real accel, unsigned axis );
+
+	//! set the minimum friction around a particular pin
+	/*
+		this function can only be called from within a custom callback.
+		\param min minimum friction
+		\param axis which pin to use (0 or 1)
+	*/
+	void setCallbackFrictionMin( Ogre::Real min, unsigned axis );
+
+	//! set the maximum friction around a particular pin.
+	/*
+		this function can only be called from within a custom callback.
+		\param max maximum friction
+		\param axis which pin to use (0 or 1)
+	*/
+	void setCallbackFrictionMax( Ogre::Real max, unsigned axis );
+
+	//! get the current phsics timestep.
+	/*
+		this function can only be called from within a custom callback.
+	*/
+	Ogre::Real getCallbackTimestep() const;
+
+	//! calculate the acceleration neccesary to stop the joint at the specified angle on pin 0.
+	/*!
+		For implementing joint limits.
+		This command is only valid when used inside a custom  callback.
+	*/
+	Ogre::Real calculateStopAlpha0( Ogre::Real angle ) const;
+
+	//! calculate the acceleration neccesary to stop the joint at the specified angle on pin 1.
+	/*!
+		For implementing joint limits.
+		This command is only valid when used inside a custom  callback.
+	*/
+	Ogre::Real calculateStopAlpha1( Ogre::Real angle ) const;
+
+protected:
+	
+	//! newton callback.  used internally.
+	static unsigned _CDECL newtonCallback( const NewtonJoint* universal, NewtonHingeSliderUpdateDesc* desc );
+
+	UniversalCallback m_callback;
+	NewtonHingeSliderUpdateDesc* m_desc;
+
+	unsigned m_retval;
+
+
+
+};
+
+
+
+//! UpVector joint.
+/*!
+	simple upvector joint.  upvectors remove all rotation except for a single pin.  useful for character controllers, etc.
+*/
+class _OgreNewtExport UpVector : public Joint
+{
+ 
+public:
+	//! constructor
+	/*
+		\param world pointer to the OgreNewt::World.
+		\param body pointer to the body to apply the upvector to.
+		\param pin direction of the upvector in global space.
+	*/
+	UpVector( const World* world, const Body* body, const Ogre::Vector3& pin );
+
+	//! destructor
+	~UpVector();
+
+	//! set the pin direction.
+	/*
+		by calling this function in realtime, you can effectively "animate" the pin.
+	*/
+	void setPin( const Ogre::Vector3& pin ) const { NewtonUpVectorSetPin( m_joint, &pin.x ); }
+
+	//! get the current pin direction.
+	Ogre::Vector3 getPin() const;
+
+
+};
+
+
+}	// end NAMESPACE BasicJoints
+
+
+//! namespace for pre-built custom joints
+namespace PrebuiltCustomJoints
+{
+
+	//! Custom2DJoint class
+	/*!
+		This class represents a joint that limits movement to a plane, and rotation only around the normal of that
+		plane.  This can be used to create simple 2D simulations.  it also supports limits and acceleration for spinning.
+		This joint has been used in a few projects, but is not 100% fully-tested.
+	*/
+	class _OgreNewtExport Custom2DJoint : public OgreNewt::CustomJoint
+	{
+	public:
+		//! constructor
+		Custom2DJoint( const OgreNewt::Body* body, const Ogre::Vector3& pin );
+
+		//! destructor
+		~Custom2DJoint() {}
+
+		//! overloaded function that applies the actual constraint.
+		void submitConstraint();
+
+		//! get the current angle of the joint.
+		Ogre::Radian getAngle() const { return mAngle; }
+
+		//! set rotational limits for the joint.
+		void setLimits( Ogre::Degree min, Ogre::Degree max ) { mMin = min, mMax = max; }
+		
+		//! sets whether to enable limits or not for the joint.
+		void setLimitsOn( bool onoff ) { mLimitsOn = onoff; }
+
+		//! returns whether limits are turned on or off for the joint.
+		bool getLimitsOn() const { return mLimitsOn; }
+
+		//! adds rotational acceleration to the joint (like a motor)
+		void addAccel( Ogre::Real accel ) { mAccel = accel; }
+
+		//! resets the joint angle to 0.  this simply sets the internal variable to zero.
+		//! you might want to call this for example after resetting a body.
+		void resetAngle() { mAngle = Ogre::Radian(0.0f); }
+
+		//! get the pin.
+		Ogre::Vector3 getPin() { return mPin; }
+
+	private:
+		Ogre::Vector3 mPin;
+		Ogre::Quaternion mLocalOrient0, mLocalOrient1;
+		Ogre::Vector3 mLocalPos0, mLocalPos1;
+
+		Ogre::Radian mAngle;
+
+		Ogre::Radian mMin;
+		Ogre::Radian mMax;
+
+		bool mLimitsOn;
+
+		Ogre::Real mAccel;
+	};
+
+	//! CustomFixedJoint
+	/*!
+		This joint implements a fully fixed joint, which removes all DOF, creating a completely fixed connection between bodies.
+		This is probably the most expensive kind of joint, and should only be used when really needed.
+	*/
+	class _OgreNewtExport CustomRigidJoint : public OgreNewt::CustomJoint
+	{
+	public:
+		CustomRigidJoint( OgreNewt::Body* child, OgreNewt::Body* parent, Ogre::Vector3 dir, Ogre::Vector3 pos);
+		~CustomRigidJoint();
+
+		void submitConstraint();
+
+	private:
+		Ogre::Vector3 mLocalPos0;
+		Ogre::Vector3 mLocalPos1;
+
+		Ogre::Quaternion mLocalOrient0;
+		Ogre::Quaternion mLocalOrient1;
+	};
+
+
+	//! CutomPulleyJoint
+	/*!
+		This joint implements a pulley system.  note that this joint only works with 2 bodies attached!
+	*/
+	class _OgreNewtExport CustomPulleyJoint : public OgreNewt::CustomJoint
+	{
+	public:
+		//! constructor
+		/*!
+			\param gearRatio float value representing the ratio of movement between parent and child.
+			\param parent pointer to OgreNewt::Body to be the parent body.
+			\param child pointer to the OgreNewt::Body to be the child body.
+			\param parentPin direction vector for movement of parent.
+			\param childPin direction vector for movement of child.
+		*/
+		CustomPulleyJoint( Ogre::Real gearRatio, const Body* parent, const Body* child, const Ogre::Vector3& parentPin, const Ogre::Vector3& childPin );
+		~CustomPulleyJoint() {}
+
+		//! overloaded function to submit the constraint.
+		void submitConstraint();
+
+	private:
+		Ogre::Real			mGearRatio;
+
+		Ogre::Vector3		mLocalPos0, mLocalPos1;
+		Ogre::Quaternion	mLocalOrient0, mLocalOrient1;
+	};
+
+
+	//! CustomGearJoint
+	/*!
+		This class works like 2 gears that mesh, retaining a specific ration between the rotational velocity of the bodies.
+		The gears don't have to rotate around the same axis, that is why 2 pins are supplied.
+	*/
+	class _OgreNewtExport CustomGearJoint : public OgreNewt::CustomJoint
+	{
+	public:
+		/*!
+			\param gearRatio float value representing the ratio of movement between parent and child.
+			\param parent pointer to OgreNewt::Body to be the parent body.
+			\param child pointer to the OgreNewt::Body to be the child body.
+			\param parentPin pin around which the parent's rotation should be tracked.
+			\param childPin pin around which the child's rotation should be tracked.
+		*/
+		CustomGearJoint( Ogre::Real gearRatio, const Body* parent, const Body* child, const Ogre::Vector3& parentPin, const Ogre::Vector3& childPin );
+		~CustomGearJoint() {}
+
+		//! overloaded function to submit the constraint.
+		void submitConstraint();
+
+	private:
+		Ogre::Real			mGearRatio;
+
+		Ogre::Vector3		mLocalPos0, mLocalPos1;
+		Ogre::Quaternion	mLocalOrient0, mLocalOrient1;
+	};
+
+
+
+
+}	// end NAMESPACE PrebuiltCustomJoints
+
+
+}	// end NAMESPACE OgreNewt
+
+#endif
+// _INCLUDE_OGRENEWT_BASICJOINTS
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_Body.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_Body.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_Body.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -17,7 +17,6 @@
 #define _INCLUDE_OGRENEWT_BODY
 
 
-#include "OgreNewt_Prerequisites.h"
 #include <Ogre.h>
 #include <Newton.h>
 #include "OgreNewt_World.h"
@@ -75,6 +74,13 @@
 	typedef fastdelegate::FastDelegate5< int, OgreNewt::Body*, const Ogre::Quaternion&, const Ogre::Vector3&, Ogre::Plane&, bool > buoyancyPlaneCallback;
 
 
+	//! auto activate / deactivate callback
+    /*!
+		This function is called whenever Newton automatically activates or deactivates an object.  the unsigned int passed is to
+		inform you if the object is about to "fall asleep", or "wake up".
+	*/
+	typedef fastdelegate::FastDelegate2<OgreNewt::Body*, unsigned int> autoactiveCallback;
+
 	//! constructor.
 	/*!
 		creates a Rigid Body in an OgreNewt::World, based on a specific collision shape.
@@ -103,11 +109,11 @@
 	*/
 	NewtonBody* getNewtonBody() const { return m_body; }
 
-	//! get a pointer to the attached SceneNode.
+	//! get a pointer to the attached Node.
 	/*!
-		if you have "attached" this body to an Ogre::SceneNode, this retrieves the node.
+		if you have "attached" this body to an Ogre::Node, this retrieves the node.
 	*/
-	Ogre::SceneNode* getOgreNode() const { return m_node; }
+	Ogre::Node* getOgreNode() const { return m_node; }
 
 	//! get a pointer to the OgreNewt::World this body belongs to.
 	const OgreNewt::World* getWorld() const { return m_world; }
@@ -122,16 +128,11 @@
 	//! get the type set for this body.
 	int getType() const { return m_type; }
 
-	//! attach this body to an Ogre::SceneNode*
+	//! attach this body to an Ogre::Node*
 	/*!
-		This is an easy way to connect a Rigid Body with an Ogre::SceneNode.
-		This automatically sets up a standard Transform callback when you call this.
-		After calling this, the Ogre::SceneNode will have its position orientation updated
-		to that of the Rigid Body each time you call World::update(),
-		and the body has moved during the update.
+		This is an easy way to connect a Rigid Body with an Ogre::Node.  this automatically sets up a standard Transform callback when you call this.  after calling this, the Ogre::Node will have its position orientation updated to that of the Rigid Body each time you call World::update(), and the body has moved during the update.
 	*/
-	void attachToNode(Ogre::SceneNode* node, const Ogre::Vector3& offset = Ogre::Vector3::ZERO,
-		const Ogre::Quaternion& orientationBias = Ogre::Quaternion::IDENTITY);
+	void attachToNode( Ogre::Node* node );
 
 	//! set a standard gravity callback for this body to use.
 	/*!
@@ -156,13 +157,22 @@
 
 	//! set a custom transform callback.
 	/*
-		sets a custom transform callback for the rigid body. see the docs on setCustomForceAndTorqueCallback for a description of how to use this funciton.
+		sets a custom transform callback for the rigid body. see the docs on setCustomForceAndTorqueCallback for a description of how to use this function.
 	*/
 	void setCustomTransformCallback( TransformCallback callback );
 
 	//! remove any transform callbacks.
 	void removeTransformCallback() { m_transformcallback = NULL; }
 
+	//! set a custom autoactivate callback for this body to use.
+    /*
+		This will be called whenever Newton automatically activates or deactivates an object.
+    */
+	void setAutoactiveCallback ( autoactiveCallback callback );
+
+    //! remove any autoactivate callbacks.
+    void removeAutoactiveCallback() { NewtonBodySetAutoactiveCallback( m_body, NULL );   m_autoactivecallback = NULL; }
+
 	//! position and orient the body arbitrarily.
 	/*!
 		generally in a physics engine you shouldn't directly set the location/rotation of a Body, because this defies physics laws.  this command exists to set up bodies initially.
@@ -375,11 +385,7 @@
 	*/
 	void addLocalForce( const Ogre::Vector3& force, const Ogre::Vector3& pos );
 
-    Ogre::Vector3 getOffset() const;
-    void setOffset(const Ogre::Vector3& offset);
 
-	Ogre::Quaternion getOrientationBias() const;
-	void setOrientationBias(const Ogre::Quaternion& orientationbias);
 
  protected:
 
@@ -392,13 +398,12 @@
 	void*				m_userdata;
 	
 	int					m_type;
-	Ogre::SceneNode*	m_node;
-	Ogre::Vector3       m_offset;
-	Ogre::Quaternion    m_orientationBias;
+	Ogre::Node*			m_node;
 
 	ForceCallback			m_forcecallback;
 	TransformCallback		m_transformcallback;
 	buoyancyPlaneCallback	m_buoyancycallback;
+	autoactiveCallback		m_autoactivecallback;
 
 private:
 
@@ -409,6 +414,8 @@
 
 	static int _CDECL newtonBuoyancyCallback( const int collisionID, void* context, const float* globalSpaceMatrix, float* globalSpacePlane );
 
+	static void _CDECL newtonAutoactiveCallback(const NewtonBody* body, unsigned state);
+
 	// standard gravity force callback.
 	static void standardForceCallback( Body* me );
 

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_BodyIterator.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_BodyIterator.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_BodyIterator.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -93,3 +93,4 @@
 }	// end NAMESPACE OgreNewt
 
 #endif	// _INCLUDE_OGRENEWT_BODYITERATOR
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_CollisionPrimitives.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_CollisionPrimitives.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_CollisionPrimitives.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -11,7 +11,6 @@
 #ifndef _INCLUDE_OGRENEWT_COLLISIONPRIMITIVES
 #define _INCLUDE_OGRENEWT_COLLISIONPRIMITIVES
 
-#include <OgreNewt_Prerequisites.h>
 #include <Newton.h>
 #include "OgreNewt_World.h"
 #include "OgreNewt_Collision.h"
@@ -20,6 +19,7 @@
 // OgreNewt namespace.  all functions and classes use this namespace.
 namespace OgreNewt
 {
+
 	//! set of basic collision shapes
 	namespace CollisionPrimitives
 	{
@@ -170,8 +170,7 @@
 		public:
 			//! constructor
 			/*!
-				Overloaded constructor.  pass a SceneNode*, 
-                and it will use the vertex data from the first attached object.
+				Overloaded constructor.  pass an Ogre::Entity*, and it will use its vertex data.
 				\param world pointer to the OgreNewt::World
 				\param entity pointer to an Ogre::Entity, if this is attached to an node, then
 				              the node's scale is applied
@@ -215,21 +214,24 @@
 		class _OgreNewtExport TreeCollision : public OgreNewt::Collision
 		{
 		public:
-      //! constructor
-      /*!
-        Create a 'blank' tree collision object to be used with
-        TreeCollisionSerializer::importTreeCollision
-        \param world pointer to the OgreNewt::World
-      */
-      TreeCollision( const World* world);
+			//! constructor
+			/*!
+				Create a 'blank' tree collision object.
+				Can be used for manual TreeCollision creation,
+				or to be used with
+			       	TreeCollisionSerializer::importTreeCollision
+				\param world pointer to the OgreNewt::World
+			*/
+			TreeCollision( const World* world);
 
 			//! constructor
 			/*!
 				Create a tree collision object.
 				\param world pointer to the OgreNewt::World
-				\param entity pointer to an entity, if it is attached to a scenenode, then
-                              the node's scale is applied.
-                \param useTempBuffer determines whether to use the temporary blend buffer instead
+				\param entity pointer to an entity, if it is
+			       		      attached to a scenenode, then
+					      the node's scale is applied.
+				\param useTempBuffer determines whether to use the temporary blend buffer instead
                                      of the mesh's vertex data. This is useful when you want
                                      to create a collision from an intermediate animation state.
 				\param optimize bool whether you want to optimize the collision or not.
@@ -267,13 +269,66 @@
                 Ogre::IndexData* indexData, bool optimize);
 
 			//! destructor
-			~TreeCollision() {}
+			virtual ~TreeCollision() {}
 
-      friend void TreeCollisionSerializer::exportTreeCollision(const TreeCollision* collision, const Ogre::String& filename);
-      friend void TreeCollisionSerializer::importTreeCollision(Ogre::DataStreamPtr& stream, TreeCollision* pDest);
+			//! start a tree collision creation
+			void start();
+
+			//! add a poly to the tree collision
+			/*!
+				Add a single poly to the tree collision.
+				\param polys pointer to an array of 3 Vector3D objects representing the global position of each poly.
+				\param ID and identifier to assign to this poly, that can be retrieved later upon collision detection.
+			*/
+			void addPoly( Ogre::Vector3* polys, unsigned int ID );
+
+			//! finish the tree collision
+			void finish( bool optimize = true );
+
+
+			friend void TreeCollisionSerializer::exportTreeCollision(const TreeCollision* collision, const Ogre::String& filename);
+			friend void TreeCollisionSerializer::importTreeCollision(Ogre::DataStreamPtr& stream, TreeCollision* pDest);
 		};
 
 		////////////////////////////////////////////////////////
+		//! TreeCollision created by parsing a tree of SceneNodes, adding collision data of all meshes.
+		/*!
+			Users can inherit this class, and inherit the "getID" function to perform their own filtering on the
+			IDs to pass to Newton.  IDs are useful during collision callbacks to determine which part of the world
+			is being hit.
+
+			By default, the ID is set to an incrementing integer.
+		*/
+		class _OgreNewtExport TreeCollisionSceneParser : public TreeCollision
+		{
+		public:
+			TreeCollisionSceneParser( OgreNewt::World* world );
+
+			~TreeCollisionSceneParser() {}
+
+			//! parse the scene.
+			void parseScene( Ogre::SceneNode* startNode, bool optimize = false );
+
+		protected:
+
+			//! this is a user-inherited function that lets you filter which Entities will be added to the treeCollision.
+			/*!
+				return true to add this entity, return false to ignore it.
+			*/
+			virtual bool entityFilter( const Ogre::SceneNode* currentNode, const Ogre::Entity* currentEntity ) { return true; }
+
+			//! user inherit-able function, allows customization of the ID to be assigned to this group of polygons.
+			virtual unsigned int getID( const Ogre::SceneNode* currentNode, const Ogre::Entity* currentEntity, unsigned int currentSubMesh ) { return count++; }
+
+		private:
+			//! recursive function to parse a single scene node.
+			void _parseNode( Ogre::SceneNode* node, const Ogre::Quaternion& curOrient, const Ogre::Vector3& curPos );
+
+
+			static int count;
+		};
+
+		////////////////////////////////////////////////////////
 		//	COMPOUND COLLISION!
 
 		//! create a compound from several collision pieces.
@@ -320,17 +375,23 @@
 			~Pyramid() {}
 		};
 
-		//! Wraps another collision to let the user modify the hull via a world space scale matrix
+		//! Wraps a collision in order to make it scaleable.
+		/*!
+			It lets the user to modify the hull via a world space scale
+			matrix without changing the initial collision
+		*/
 		class _OgreNewtExport HullModifier: public OgreNewt::Collision
 		{
 		public:
-			HullModifier( World* world, CollisionPtr wrappedCollision );	// constructor
+			//! constructor
+			HullModifier( World* world, CollisionPtr wrappedCollision );
+			//! destructor
 			~HullModifier() {};
 
-			//! scale matrix in world space
+			//! Sets the scale matrix in world space (of Ogre)
 			void setMatrix(const Ogre::Matrix4& matrix);
 
-			//! scale matrix in world space
+			//! scale matrix in world space (of Ogre)
 			Ogre::Matrix4 getMatrix() const;
 		};	
 
@@ -339,3 +400,4 @@
 }// end namespace OgreNewt
 
 #endif	// _INCLUDE_OGRENEWT_COLLISIONPRIMITIVES
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_ContactCallback.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_ContactCallback.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_ContactCallback.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -1,148 +1,153 @@
-/* 
-	OgreNewt Library
-
-	Ogre implementation of Newton Game Dynamics SDK
-
-	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
-
-		by Walaber
-
-*/
-#ifndef _INCLUDE_OGRENEWT_CONTACTCALLBACK
-#define _INCLUDE_OGRENEWT_CONTACTCALLBACK
-
-#include <OgreNewt_Prerequisites.h>
-#include <Newton.h>
-#include "OgreNewt_Body.h"
-
-// OgreNewt namespace.  all functions and classes use this namespace.
-namespace OgreNewt
-{
-
-
-//! custom contact behavior
-/*!
-	this class is for creating custom behavior between material GroupIDs.
-	this class must be inherited, and the user functions created, and then
-	added to a MaterialPair class.
-*/
-class _OgreNewtExport ContactCallback
-{
-public:
-
-	//! constructor
-	ContactCallback();
-
-	//! destructor
-	virtual ~ContactCallback();
-
-	// basic contact control commands...
-
-	//! disable the current contact.
-	void disableContact() const { NewtonMaterialDisableContact( m_material ); }
-
-	//! get the current physics timestep
-	Ogre::Real getCurrentTimestep() const { return (Ogre::Real)NewtonMaterialGetCurrentTimestep( m_material ); }
-
-	//! get the face ID of a TreeCollision object
-	unsigned getContactFaceAttribute() const { return NewtonMaterialGetContactFaceAttribute( m_material ); }
-
-	//! get the Collision ID of a body currently colliding
-	unsigned getBodyCollisionID( OgreNewt::Body* body ) const { return NewtonMaterialGetBodyCollisionID( m_material, body->getNewtonBody() ); }
-
-	//! speed of the collision
-	Ogre::Real getContactNormalSpeed() const { return (Ogre::Real)NewtonMaterialGetContactNormalSpeed( m_material, m_contact ); }
-
-	//! force of the collision
-	/*!
-		only valid for objects in a stable state (sitting on top of each other, etc)
-	*/
-	Ogre::Vector3 getContactForce() const;
-
-	//! get positoin and normal of the collision
-	void getContactPositionAndNormal( Ogre::Vector3& pos, Ogre::Vector3& norm ) const;
-
-	//! get the tangent vectors of the collision
-	void getContactTangentDirections( Ogre::Vector3& dir0, Ogre::Vector3& dir1 ) const;
-
-	//! get tangent speed of the collision
-	Ogre::Real getContactTangentSpeed( int index ) const { return (Ogre::Real)NewtonMaterialGetContactTangentSpeed( m_material, m_contact, index ); }
-
-	//! set softness of the current contact
-	void setContactSoftness( Ogre::Real softness ) const { NewtonMaterialSetContactSoftness( m_material, (float)softness ); }
-
-	//! set elasticity of the current contact
-	void setContactElasticity( Ogre::Real elasticity ) const { NewtonMaterialSetContactElasticity( m_material, (float)elasticity ); }
-
-	//! set friction state of current contact
-	void setContactFrictionState( int state, int index ) const { NewtonMaterialSetContactFrictionState( m_material, state, index ); }
-
-	//! set static friction for current contact
-	void setContactStaticFrictionCoef( Ogre::Real coef, int index ) const { NewtonMaterialSetContactStaticFrictionCoef( m_material, (float)coef, index ); }
-
-	//! set kinetic friction for current contact
-	void setContactKineticFrictionCoef( Ogre::Real coef, int index ) const { NewtonMaterialSetContactKineticFrictionCoef( m_material, (float)coef, index ); }
-
-	//! set tangent acceleration for contact
-	void setContactTangentAcceleration( Ogre::Real accel, int index ) const { NewtonMaterialSetContactTangentAcceleration( m_material, (float)accel, index ); }
-
-	//! align tangent vectors with a user supplied direction
-	void rotateTangentDirections( const Ogre::Vector3& dir ) const { NewtonMaterialContactRotateTangentDirections( m_material, &dir.x ); }
-
-	//! manually set the normal for the collision.
-	void setContactNormalDirection( const Ogre::Vector3& dir ) const { NewtonMaterialSetContactNormalDirection( m_material, &dir.x ); }
-
-	//! manually set the acceleration along the collision normal.
-	void setContactNormalAcceleration( Ogre::Real accel ) const { NewtonMaterialSetContactNormalAcceleration( m_material, accel ); }
-
-
-
-	// user-defined callback function.
-	
-	//! user defined Begin function
-	/*!
-		this function is called when 2 bodies AABB overlap.  they have not yet collided, but *may* do so this loop.
-		at this point, m_body0 and m_body1 are defined, but the contact isn't yet valid, so none of the member functions
-		can be called yet.  they must be called from the userProcess() function.
-		return 0 to ignore the collision, 1 to allow it.
-	*/
-	virtual int userBegin() { return 1; }
-
-	//! user-defined Process function
-	/*!
-		user process function.  is called for each contact between the 2 bodies.  all member functions are valid from
-		within this function, and will affect the current contact.  return 0 to ignore the collision, 1 to allow it.
-	 */
-	virtual int userProcess() { return 1; }
-
-	//! user-defined End function
-	/*!
-		called after all contacts between the 2 bodies have been processed. no member functions should be called from within this
-		function either, as all contacts have been processed at this point.
-	*/
-	virtual void userEnd() {  }
-
-
-	//! internal function.
-	static int _CDECL contactBegin( const NewtonMaterial* material, const NewtonBody* body0, const NewtonBody* body1 );
-	//! internal function.
-	static int _CDECL contactProcess( const NewtonMaterial* material, const NewtonContact* contact );
-	//! internal function.
-	static void _CDECL contactEnd( const NewtonMaterial* material );
-
-
-protected:
-
-	NewtonMaterial* m_material;
-	NewtonContact* m_contact;
-
-	OgreNewt::Body* m_body0;
-	OgreNewt::Body* m_body1;
-};
-
-
-}	// end NAMESPACE OgreNewt
-
-#endif
-// _INCLUDE_OGRENEWT_CONTACTCALLBACK
-
+/* 
+	OgreNewt Library
+
+	Ogre implementation of Newton Game Dynamics SDK
+
+	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
+
+		by Walaber
+
+*/
+#ifndef _INCLUDE_OGRENEWT_CONTACTCALLBACK
+#define _INCLUDE_OGRENEWT_CONTACTCALLBACK
+
+#include <Newton.h>
+#include "OgreNewt_Body.h"
+
+// OgreNewt namespace.  all functions and classes use this namespace.
+namespace OgreNewt
+{
+
+
+//! custom contact behavior
+/*!
+	this class is for creating custom behavior between material GroupIDs.
+	this class must be inherited, and the user functions created, and then
+	added to a MaterialPair class.
+*/
+class _OgreNewtExport ContactCallback
+{
+public:
+
+	//! constructor
+	ContactCallback();
+
+	//! destructor
+	virtual ~ContactCallback();
+
+	// basic contact control commands...
+
+	//! disable the current contact.
+	void disableContact() const { NewtonMaterialDisableContact( m_material ); }
+
+	//! get the current physics timestep
+	Ogre::Real getCurrentTimestep() const { return (Ogre::Real)NewtonMaterialGetCurrentTimestep( m_material ); }
+
+	//! get the face ID of a TreeCollision object
+	unsigned getContactFaceAttribute() const { return NewtonMaterialGetContactFaceAttribute( m_material ); }
+
+	//! get the Collision ID of a body currently colliding
+	unsigned getBodyCollisionID( OgreNewt::Body* body ) const { return NewtonMaterialGetBodyCollisionID( m_material, body->getNewtonBody() ); }
+
+	//! speed of the collision
+	Ogre::Real getContactNormalSpeed() const { return (Ogre::Real)NewtonMaterialGetContactNormalSpeed( m_material, m_contact ); }
+
+	//! force of the collision
+	/*!
+		only valid for objects in a stable state (sitting on top of each other, etc)
+	*/
+	Ogre::Vector3 getContactForce() const;
+
+	//! get positoin and normal of the collision
+	void getContactPositionAndNormal( Ogre::Vector3& pos, Ogre::Vector3& norm ) const;
+
+	//! get the tangent vectors of the collision
+	void getContactTangentDirections( Ogre::Vector3& dir0, Ogre::Vector3& dir1 ) const;
+
+	//! get tangent speed of the collision
+	Ogre::Real getContactTangentSpeed( int index ) const { return (Ogre::Real)NewtonMaterialGetContactTangentSpeed( m_material, m_contact, index ); }
+
+	//! set softness of the current contact
+	void setContactSoftness( Ogre::Real softness ) const { NewtonMaterialSetContactSoftness( m_material, (float)softness ); }
+
+	//! set elasticity of the current contact
+	void setContactElasticity( Ogre::Real elasticity ) const { NewtonMaterialSetContactElasticity( m_material, (float)elasticity ); }
+
+	//! set friction state of current contact
+	void setContactFrictionState( int state, int index ) const { NewtonMaterialSetContactFrictionState( m_material, state, index ); }
+
+	//! set static friction for current contact
+	void setContactStaticFrictionCoef( Ogre::Real coef, int index ) const { NewtonMaterialSetContactStaticFrictionCoef( m_material, (float)coef, index ); }
+
+	//! set kinetic friction for current contact
+	void setContactKineticFrictionCoef( Ogre::Real coef, int index ) const { NewtonMaterialSetContactKineticFrictionCoef( m_material, (float)coef, index ); }
+
+	//! set tangent acceleration for contact
+	void setContactTangentAcceleration( Ogre::Real accel, int index ) const { NewtonMaterialSetContactTangentAcceleration( m_material, (float)accel, index ); }
+
+	//! align tangent vectors with a user supplied direction
+	void rotateTangentDirections( const Ogre::Vector3& dir ) const { NewtonMaterialContactRotateTangentDirections( m_material, &dir.x ); }
+
+	//! manually set the normal for the collision.
+	void setContactNormalDirection( const Ogre::Vector3& dir ) const { NewtonMaterialSetContactNormalDirection( m_material, &dir.x ); }
+
+	//! manually set the acceleration along the collision normal.
+	void setContactNormalAcceleration( Ogre::Real accel ) const { NewtonMaterialSetContactNormalAcceleration( m_material, accel ); }
+
+
+
+	// user-defined callback function.
+	
+	//! user defined Begin function
+	/*!
+		this function is called when 2 bodies AABB overlap.  they have not yet collided, but *may* do so this loop.
+		at this point, m_body0 and m_body1 are defined, but the contact isn't yet valid, so none of the member functions
+		can be called yet.  they must be called from the userProcess() function.
+		return 0 to ignore the collision, 1 to allow it.
+	*/
+	virtual int userBegin() { return 1; }
+
+	//! user-defined Process function
+	/*!
+		user process function.  is called for each contact between the 2 bodies.  all member functions are valid from
+		within this function, and will affect the current contact.  return 0 to ignore the collision, 1 to allow it.
+	 */
+	virtual int userProcess() { return 1; }
+
+	//! user-defined End function
+	/*!
+		called after all contacts between the 2 bodies have been processed. no member functions should be called from within this
+		function either, as all contacts have been processed at this point.
+	*/
+	virtual void userEnd() {  }
+
+	//! get the NewtonMaterial from this callback.
+	NewtonMaterial* _getNewtonMaterial() { return m_material; }
+
+	//! get the NewtonContact from this callback.
+	NewtonContact* _getNewtonContact() { return m_contact; }
+
+
+	//! internal function.
+	static int _CDECL contactBegin( const NewtonMaterial* material, const NewtonBody* body0, const NewtonBody* body1 );
+	//! internal function.
+	static int _CDECL contactProcess( const NewtonMaterial* material, const NewtonContact* contact );
+	//! internal function.
+	static void _CDECL contactEnd( const NewtonMaterial* material );
+
+
+protected:
+
+	NewtonMaterial* m_material;
+	NewtonContact* m_contact;
+
+	OgreNewt::Body* m_body0;
+	OgreNewt::Body* m_body1;
+};
+
+
+}	// end NAMESPACE OgreNewt
+
+#endif
+// _INCLUDE_OGRENEWT_CONTACTCALLBACK
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_Debugger.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_Debugger.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_Debugger.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -33,7 +33,7 @@
 	{
 	
 	public:
-		~Debugger() {}
+		~Debugger();
 
 		//! get the singleton reference
 		static Debugger& getSingleton();
@@ -44,6 +44,9 @@
 		*/
 		void init( Ogre::SceneManager* smgr );
 
+		//! de-init the debugger (cleantup)
+		void deInit();
+
 		//! show the newton world
 		/*!
 			Draws the Newton world as 3D lines.
@@ -69,3 +72,4 @@
 
 
 #endif	// _INCLUDE_OGRENEWT_DEBUGGER
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_Joint.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_Joint.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_Joint.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -1,173 +1,172 @@
-/* 
-	OgreNewt Library
-
-	Ogre implementation of Newton Game Dynamics SDK
-
-	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
-
-		by Walaber
-
-*/
-#ifndef _INCLUDE_OGRENEWT_JOINT
-#define _INCLUDE_OGRENEWT_JOINT
-
-#include "OgreNewt_Prerequisites.h"
-#include <Newton.h>
-#include "OgreNewt_World.h"
-#include "OgreNewt_Body.h"
-
-// OgreNewt namespace.  all functions and classes use this namespace.
-namespace OgreNewt
-{
-
-//! base class for all joints.
-/*!
-	this class is inherited by all other specific joint types.
-*/
-class _OgreNewtExport Joint
-{
-public:
-
-	//! constructor
-	Joint();
-
-	//! destructor
-	virtual ~Joint();
-
-	//! returns collision state
-	/*!
-		The collision state determines whether collision should be calculated between the parent and child bodies of the joint.
-		\return integer value. 1 = collision on, 0 = collision off.
-	*/
-	int getCollisionState() const { return NewtonJointGetCollisionState( m_joint ); }
-
-	//! sets the collision state
-	/*!
-		The collision state determines whether collision should be calculated between the parent and child bodies of the joint.
-		\param state integer value. 1 = collision on, 0 = collision off.
-	*/		
-	void setCollisionState( int state ) const { NewtonJointSetCollisionState( m_joint, state ); }
-
-
-	//! get joint stiffness
-	/*!
-		Joint stiffness adjusts how much "play" the joint can have.  high stiffness = very small play, but more likely to become unstable.
-		\return float representing joint stiffness in range [0,1]
-	*/
-	Ogre::Real getStiffness() const { return (Ogre::Real)NewtonJointGetStiffness( m_joint ); }
-
-	//! set joint stiffness
-	/*!
-		Joint stiffness adjusts how much "play" the joint can have.  high stiffness = very small play, but more likely to become unstable.
-		\param stiffness float representing joint stiffness in range [0,1]
-	*/
-	void setStiffness( Ogre::Real stiffness ) const { NewtonJointSetStiffness( m_joint, stiffness ); }
-
-
-	//! set user data for this joint
-	/*!
-		user data can be used to connect this class to other user classes through the use of this general pointer.
-	*/
-	void setUserData( void* ptr ) { m_userdata = ptr; }
-
-	//! get user data for this joint
-	/*!
-		user data can be used to connect this class to other user classes through the use of this general pointer.
-	*/
-	void* getUserData() const { return m_userdata; }
-
-		
-protected:
-
-	NewtonJoint* m_joint;
-	const OgreNewt::World* m_world;
-
-	void* m_userdata;
-
-	static void _CDECL destructor( const NewtonJoint* me );
-
-};
-
-
-
-
-
-
-//! CustomJoint 
-/*!
-	this class represents a basic class for creating user-defined joints.  this class must be inherited to create discreet joints.
-*/
-class _OgreNewtExport CustomJoint : public Joint
-{
- 
-public:
-
-	//! constructor
-	CustomJoint( unsigned int maxDOF, const Body* body0, const Body* body1 );
-
-	//! destructor
-	virtual ~CustomJoint();
-
-	//! must be over-written for a functioning joint.
-	virtual void submitConstraint() = 0;
-
-
-	//! find the local orientation and position of the joint with regards to the 2 bodies in the joint.
-	void pinAndDirToLocal( const Ogre::Vector3& pinpt, const Ogre::Vector3& pindir, Ogre::Quaternion& localOrient0, Ogre::Vector3& localPos0, Ogre::Quaternion& localOrient1, Ogre::Vector3& localPos1 ) const;
-
-	//! find the global orientation and position of the joint with regards to the a body in the joint.
-	void localToGlobal( const Ogre::Quaternion& localOrient, const Ogre::Vector3& localPos, Ogre::Quaternion& globalOrient, Ogre::Vector3& globalPos, int bodyIndex = 0 ) const;
-
-	//! add a linear row to the constraint.
-	void addLinearRow( const Ogre::Vector3& pt0, const Ogre::Vector3& pt1, const Ogre::Vector3& dir ) const;
-
-	//! add an angular row to the constraint.
-	void addAngularRow( Ogre::Radian relativeAngleError, const Ogre::Vector3& dir ) const;
-
-	//! set the general jacobian rows directly.
-	void addGeneralRow( const Ogre::Vector3& linear0, const Ogre::Vector3& angular0, const Ogre::Vector3& linear1, const Ogre::Vector3& angular1 ) const;
-
-	//! set row minimum friction
-	void setRowMinimumFriction( Ogre::Real friction ) const;
-
-	//! set row maximum friction
-	void setRowMaximumFriction( Ogre::Real friction ) const;
-
-	//! set row acceleration
-	void setRowAcceleration( Ogre::Real accel ) const;
-
-	//! set row stiffness
-	void setRowStiffness( Ogre::Real stiffness ) const;
-
-	//! apply a spring to this row, allowing for joints with spring behaviour in 1 or more DoF's
-	/*!
-		\param springK float spring constant.
-		\param springD float natural rest state distance of the spring.
-	*/		
-	void setRowSpringDamper( Ogre::Real springK, Ogre::Real springD ) const;
-
-	//! retrieve the force acting on the current row.
-	Ogre::Real getRowForce( int row ) const { return NewtonUserJointGetRowForce( m_joint, row ); }
-
-	//! pin vector to arbitrary quaternion utility function.
-	Ogre::Quaternion grammSchmidt( const Ogre::Vector3& pin ) const;
-
-protected:
-
-	unsigned int m_maxDOF;
-
-	const OgreNewt::Body* m_body0;
-	const OgreNewt::Body* m_body1;
-
-	//! newton callback.  used internally.
-	static void _CDECL newtonSubmitConstraint( const NewtonJoint* me );
-
-};
-
-
-
-}	// end NAMESPACE OgreNewt
-
-#endif
-// _INCLUDE_OGRENEWT_JOINT
-
+/* 
+	OgreNewt Library
+
+	Ogre implementation of Newton Game Dynamics SDK
+
+	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
+
+		by Walaber
+
+*/
+#ifndef _INCLUDE_OGRENEWT_JOINT
+#define _INCLUDE_OGRENEWT_JOINT
+
+#include <Newton.h>
+#include "OgreNewt_World.h"
+#include "OgreNewt_Body.h"
+
+// OgreNewt namespace.  all functions and classes use this namespace.
+namespace OgreNewt
+{
+
+//! base class for all joints.
+/*!
+	this class is inherited by all other specific joint types.
+*/
+class _OgreNewtExport Joint
+{
+public:
+
+	//! constructor
+	Joint();
+
+	//! destructor
+	virtual ~Joint();
+
+	//! returns collision state
+	/*!
+		The collision state determines whether collision should be calculated between the parent and child bodies of the joint.
+		\return integer value. 1 = collision on, 0 = collision off.
+	*/
+	int getCollisionState() const { return NewtonJointGetCollisionState( m_joint ); }
+
+	//! sets the collision state
+	/*!
+		The collision state determines whether collision should be calculated between the parent and child bodies of the joint.
+		\param state integer value. 1 = collision on, 0 = collision off.
+	*/		
+	void setCollisionState( int state ) const { NewtonJointSetCollisionState( m_joint, state ); }
+
+
+	//! get joint stiffness
+	/*!
+		Joint stiffness adjusts how much "play" the joint can have.  high stiffness = very small play, but more likely to become unstable.
+		\return float representing joint stiffness in range [0,1]
+	*/
+	Ogre::Real getStiffness() const { return (Ogre::Real)NewtonJointGetStiffness( m_joint ); }
+
+	//! set joint stiffness
+	/*!
+		Joint stiffness adjusts how much "play" the joint can have.  high stiffness = very small play, but more likely to become unstable.
+		\param stiffness float representing joint stiffness in range [0,1]
+	*/
+	void setStiffness( Ogre::Real stiffness ) const { NewtonJointSetStiffness( m_joint, stiffness ); }
+
+
+	//! set user data for this joint
+	/*!
+		user data can be used to connect this class to other user classes through the use of this general pointer.
+	*/
+	void setUserData( void* ptr ) { m_userdata = ptr; }
+
+	//! get user data for this joint
+	/*!
+		user data can be used to connect this class to other user classes through the use of this general pointer.
+	*/
+	void* getUserData() const { return m_userdata; }
+
+		
+protected:
+
+	NewtonJoint* m_joint;
+	const OgreNewt::World* m_world;
+
+	void* m_userdata;
+
+	static void _CDECL destructor( const NewtonJoint* me );
+
+};
+
+
+
+
+
+
+//! CustomJoint 
+/*!
+	this class represents a basic class for creating user-defined joints.  this class must be inherited to create discreet joints.
+*/
+class _OgreNewtExport CustomJoint : public Joint
+{
+ 
+public:
+
+	//! constructor
+	CustomJoint( unsigned int maxDOF, const Body* body0, const Body* body1 );
+
+	//! destructor
+	virtual ~CustomJoint();
+
+	//! must be over-written for a functioning joint.
+	virtual void submitConstraint() = 0;
+
+
+	//! find the local orientation and position of the joint with regards to the 2 bodies in the joint.
+	void pinAndDirToLocal( const Ogre::Vector3& pinpt, const Ogre::Vector3& pindir, Ogre::Quaternion& localOrient0, Ogre::Vector3& localPos0, Ogre::Quaternion& localOrient1, Ogre::Vector3& localPos1 ) const;
+
+	//! find the global orientation and position of the joint with regards to the a body in the joint.
+	void localToGlobal( const Ogre::Quaternion& localOrient, const Ogre::Vector3& localPos, Ogre::Quaternion& globalOrient, Ogre::Vector3& globalPos, int bodyIndex = 0 ) const;
+
+	//! add a linear row to the constraint.
+	void addLinearRow( const Ogre::Vector3& pt0, const Ogre::Vector3& pt1, const Ogre::Vector3& dir ) const;
+
+	//! add an angular row to the constraint.
+	void addAngularRow( Ogre::Radian relativeAngleError, const Ogre::Vector3& dir ) const;
+
+	//! set the general jacobian rows directly.
+	void addGeneralRow( const Ogre::Vector3& linear0, const Ogre::Vector3& angular0, const Ogre::Vector3& linear1, const Ogre::Vector3& angular1 ) const;
+
+	//! set row minimum friction
+	void setRowMinimumFriction( Ogre::Real friction ) const;
+
+	//! set row maximum friction
+	void setRowMaximumFriction( Ogre::Real friction ) const;
+
+	//! set row acceleration
+	void setRowAcceleration( Ogre::Real accel ) const;
+
+	//! set row stiffness
+	void setRowStiffness( Ogre::Real stiffness ) const;
+
+	//! apply a spring to this row, allowing for joints with spring behaviour in 1 or more DoF's
+	/*!
+		\param springK float spring constant.
+		\param springD float natural rest state distance of the spring.
+	*/		
+	void setRowSpringDamper( Ogre::Real springK, Ogre::Real springD ) const;
+
+	//! retrieve the force acting on the current row.
+	Ogre::Real getRowForce( int row ) const { return NewtonUserJointGetRowForce( m_joint, row ); }
+
+	//! pin vector to arbitrary quaternion utility function.
+	Ogre::Quaternion grammSchmidt( const Ogre::Vector3& pin ) const;
+
+protected:
+
+	unsigned int m_maxDOF;
+
+	const OgreNewt::Body* m_body0;
+	const OgreNewt::Body* m_body1;
+
+	//! newton callback.  used internally.
+	static void _CDECL newtonSubmitConstraint( const NewtonJoint* me );
+
+};
+
+
+
+}	// end NAMESPACE OgreNewt
+
+#endif
+// _INCLUDE_OGRENEWT_JOINT
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_MaterialID.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_MaterialID.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_MaterialID.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -1,59 +1,58 @@
-/* 
-	OgreNewt Library
-
-	Ogre implementation of Newton Game Dynamics SDK
-
-	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
-
-		by Walaber
-
-*/
-#ifndef _INCLUDE_OGRENEWT_MATERIALID
-#define _INCLUDE_OGRENEWT_MATERIALID
-
-#include "OgreNewt_Prerequisites.h"
-#include <Newton.h>
-#include "OgreNewt_World.h"
-
-// OgreNewt namespace.  all functions and classes use this namespace.
-namespace OgreNewt
-{
-
-	class World;
-
-//! represents a material
-class _OgreNewtExport MaterialID
-{
-public:
-
-	//! constructor
-	/*!
-		\param world pointer to the OgreNewt;;World
-	*/
-	MaterialID( const World* world );
-
-	/*!
-		Overloaded constructor, sets the internal ID manually.  should not be used by the end-user.
-	*/
-	MaterialID( const World* world, int ID );
-
-	//! destructor
-	~MaterialID();
-
-	//! get Newton-assigned material ID.
-	int getID() const { return id; }
-
-protected:
-
-	int id;
-	const OgreNewt::World* m_world;
-
-};
-
-
-
-}	// end NAMESPACE OgreNewt
-
-#endif
-// _INCLUDE_OGRENEWT_MATERIALID
-
+/* 
+	OgreNewt Library
+
+	Ogre implementation of Newton Game Dynamics SDK
+
+	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
+
+		by Walaber
+
+*/
+#ifndef _INCLUDE_OGRENEWT_MATERIALID
+#define _INCLUDE_OGRENEWT_MATERIALID
+
+#include <Newton.h>
+#include "OgreNewt_World.h"
+
+// OgreNewt namespace.  all functions and classes use this namespace.
+namespace OgreNewt
+{
+
+	class World;
+
+//! represents a material
+class _OgreNewtExport MaterialID
+{
+public:
+
+	//! constructor
+	/*!
+		\param world pointer to the OgreNewt;;World
+	*/
+	MaterialID( const World* world );
+
+	/*!
+		Overloaded constructor, sets the internal ID manually.  should not be used by the end-user.
+	*/
+	MaterialID( const World* world, int ID );
+
+	//! destructor
+	~MaterialID();
+
+	//! get Newton-assigned material ID.
+	int getID() const { return id; }
+
+protected:
+
+	int id;
+	const OgreNewt::World* m_world;
+
+};
+
+
+
+}	// end NAMESPACE OgreNewt
+
+#endif
+// _INCLUDE_OGRENEWT_MATERIALID
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_MaterialPair.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_MaterialPair.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_MaterialPair.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -1,91 +1,90 @@
-/* 
-	OgreNewt Library
-
-	Ogre implementation of Newton Game Dynamics SDK
-
-	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
-
-		by Walaber
-
-*/
-#ifndef _INCLUDE_OGRENEWT_MATERIALPAIR
-#define _INCLUDE_OGRENEWT_MATERIALPAIR
-
-#include "OgreNewt_Prerequisites.h"
-#include <Newton.h>
-#include "OgreNewt_World.h"
-#include "OgreNewt_ContactCallback.h"
-#include "OgreNewt_MaterialID.h"
-
-// OgreNewt namespace.  all functions and classes use this namespace.
-namespace OgreNewt
-{
-
-
-//! define interaction between materials
-/*!
-	this class represents a pair of Newton MaterialGroupIDs, which is 
-	used to define interaction bewteen materials.
-*/
-class _OgreNewtExport MaterialPair
-{
-public:
-
-	//! constructor
-	/*!
-		creates an object representing a pair of materials, and defining how they will interact.
-		\param world pointer to the OgreNewt::World
-		\param mat1 pointer to first materialID
-		\param mat2 pointer to second materialID
-	*/
-	MaterialPair( const World* world, const MaterialID* mat1, const MaterialID* mat2 );
-
-	//! destructor
-	~MaterialPair();
-
-
-	// set the default behavior for this material pair.
-
-	//! set default softness for the material pair.
-	void setDefaultSoftness( Ogre::Real softness ) const { NewtonMaterialSetDefaultSoftness( m_world->getNewtonWorld(), id0->getID(), id1->getID(), (float)softness ); }
-
-	//! set default elasticity for the material pair.
-	void setDefaultElasticity( Ogre::Real elasticity ) const { NewtonMaterialSetDefaultElasticity( m_world->getNewtonWorld(), id0->getID(), id1->getID(), (float)elasticity ); }
-
-	//! set default collision for the material pair.
-	void setDefaultCollidable( int state ) const { NewtonMaterialSetDefaultCollidable( m_world->getNewtonWorld(), id0->getID(), id1->getID(), state ); }
-
-	//! set default friction for the material pair.
-	void setDefaultFriction( Ogre::Real stat, Ogre::Real kinetic ) const { NewtonMaterialSetDefaultFriction( m_world->getNewtonWorld(), id0->getID(), id1->getID(), (float)stat, (float)kinetic ); }
-
-	//! set continuos collision on/off for this material pair
-	/*!
-		continuous collision mode is an advanced system used to prevent "tunelling", or objects passing through one an other when traveling at high velocities.  
-		there is a performance hit involved, so this sould only be used when it is deemed necessary.
-	*/
-	void setContinuousCollisionMode( int state ) const { NewtonMaterialSetContinuousCollisionMode( m_world->getNewtonWorld(), id0->getID(), id1->getID(), state ); }
-
-
-	//! assign a custom collision callback.
-	/*!
-		ContactCallbacks allow for custom interaction between bodies of specific materials.
-		\param callback pointer to a user-created ContactCallback object
-	*/
-	void setContactCallback( OgreNewt::ContactCallback* callback );
-
-
-
-protected:
-
-	const MaterialID*	id0;
-	const MaterialID*	id1;
-	const World*		m_world;
-
-};
-
-
-}	// end NAMESPACE OgreNewt
-
-#endif
-// _INCLUDE_OGRENEWT_MATERIALPAIR
-
+/* 
+	OgreNewt Library
+
+	Ogre implementation of Newton Game Dynamics SDK
+
+	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
+
+		by Walaber
+
+*/
+#ifndef _INCLUDE_OGRENEWT_MATERIALPAIR
+#define _INCLUDE_OGRENEWT_MATERIALPAIR
+
+#include <Newton.h>
+#include "OgreNewt_World.h"
+#include "OgreNewt_ContactCallback.h"
+#include "OgreNewt_MaterialID.h"
+
+// OgreNewt namespace.  all functions and classes use this namespace.
+namespace OgreNewt
+{
+
+
+//! define interaction between materials
+/*!
+	this class represents a pair of Newton MaterialGroupIDs, which is 
+	used to define interaction bewteen materials.
+*/
+class _OgreNewtExport MaterialPair
+{
+public:
+
+	//! constructor
+	/*!
+		creates an object representing a pair of materials, and defining how they will interact.
+		\param world pointer to the OgreNewt::World
+		\param mat1 pointer to first materialID
+		\param mat2 pointer to second materialID
+	*/
+	MaterialPair( const World* world, const MaterialID* mat1, const MaterialID* mat2 );
+
+	//! destructor
+	~MaterialPair();
+
+
+	// set the default behavior for this material pair.
+
+	//! set default softness for the material pair.
+	void setDefaultSoftness( Ogre::Real softness ) const { NewtonMaterialSetDefaultSoftness( m_world->getNewtonWorld(), id0->getID(), id1->getID(), (float)softness ); }
+
+	//! set default elasticity for the material pair.
+	void setDefaultElasticity( Ogre::Real elasticity ) const { NewtonMaterialSetDefaultElasticity( m_world->getNewtonWorld(), id0->getID(), id1->getID(), (float)elasticity ); }
+
+	//! set default collision for the material pair.
+	void setDefaultCollidable( int state ) const { NewtonMaterialSetDefaultCollidable( m_world->getNewtonWorld(), id0->getID(), id1->getID(), state ); }
+
+	//! set default friction for the material pair.
+	void setDefaultFriction( Ogre::Real stat, Ogre::Real kinetic ) const { NewtonMaterialSetDefaultFriction( m_world->getNewtonWorld(), id0->getID(), id1->getID(), (float)stat, (float)kinetic ); }
+
+	//! set continuos collision on/off for this material pair
+	/*!
+		continuous collision mode is an advanced system used to prevent "tunelling", or objects passing through one an other when traveling at high velocities.  
+		there is a performance hit involved, so this sould only be used when it is deemed necessary.
+	*/
+	void setContinuousCollisionMode( int state ) const { NewtonMaterialSetContinuousCollisionMode( m_world->getNewtonWorld(), id0->getID(), id1->getID(), state ); }
+
+
+	//! assign a custom collision callback.
+	/*!
+		ContactCallbacks allow for custom interaction between bodies of specific materials.
+		\param callback pointer to a user-created ContactCallback object
+	*/
+	void setContactCallback( OgreNewt::ContactCallback* callback );
+
+
+
+protected:
+
+	const MaterialID*	id0;
+	const MaterialID*	id1;
+	const World*		m_world;
+
+};
+
+
+}	// end NAMESPACE OgreNewt
+
+#endif
+// _INCLUDE_OGRENEWT_MATERIALPAIR
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_Prerequisites.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_Prerequisites.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_Prerequisites.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -25,9 +25,9 @@
 #       define _OgreNewtExport
 #   endif
 #else // Linux / Mac OSX etc
-#   include <stddef.h>
 #   define _OgreNewtExport
 #   define _CDECL
 #endif
 
 #endif 
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_RayCast.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_RayCast.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_RayCast.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -1,21 +1,28 @@
 /* 
 	OgreNewt Library
+
 	Ogre implementation of Newton Game Dynamics SDK
+
 	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
+
 		by Walaber
+
 */
 
 #ifndef _INCLUDE_OGRENEWT_RAYCAST
 #define _INCLUDE_OGRENEWT_RAYCAST
 
+
 #include <Ogre.h>
 #include <Newton.h>
 #include "OgreNewt_World.h"
 #include "OgreNewt_Body.h"
 
+
 // OgreNewt namespace.  all functions and classes use this namespace.
 namespace OgreNewt
 {
+
 //! general raycast
 /*!
 	General class representing a raycast query in the Newton world.  this class should be inherited to create specific raycast behavior.
@@ -39,6 +46,13 @@
 	*/
 	void go( const OgreNewt::World* world, const Ogre::Vector3& startpt, const Ogre::Vector3& endpt );
 
+	//! user callback pre-filter function.
+	/*!
+		This function is an optional pre-filter to completely ignore specific bodies during the raycast.
+		return false from this function to ignore this body, return true (default) to accept it.
+	*/
+	virtual bool userPreFilterCallback( OgreNewt::Body* body ) { return true; }
+
 	//! user callback filter function
 	/*! user callback function.  
 		This function must be implemented by the user.
@@ -49,12 +63,19 @@
 	*/
 	virtual bool userCallback( OgreNewt::Body* body, Ogre::Real distance, const Ogre::Vector3& normal, int collisionID ) = 0;
 
+
 private:
 
 	//! callback used for running the raycast itself... used internally
 	static float _CDECL newtonRaycastFilter(const NewtonBody* body, const float* hitNormal, int collisionID, void* userData, float intersetParam);
+
+	//! callback used for running the raycast prefilder... used internally
+	static unsigned _CDECL newtonRaycastPreFilter( const NewtonBody* body, const NewtonCollision* collision, void* userData );
 };
 
+
+
+
 //! Basic implementation of the raycast
 /*!
 	This class is provided for general raycast use.  it returns information about all bodies hit by the ray.
@@ -66,14 +87,13 @@
 	class _OgreNewtExport BasicRaycastInfo
 	{
 	public:
-		Ogre::Real		mDistance;	  //!< dist from point1 of the raycast, in range [0,1].
-		OgreNewt::Body*	mBody;	      //!< pointer to body intersected with
-		int				mCollisionID; //!< collision ID of the primitive hit by the ray
-		Ogre::Vector3	mNormal;	  //!< normal of intersection.
+		Ogre::Real					mDistance;	//!< dist from point1 of the raycast, in range [0,1].
+		OgreNewt::Body*				mBody;	//!< pointer to body intersected with
+		int							mCollisionID;		//!< collision ID of the primitive hit by the ray (for compound collision bodies)
+		Ogre::Vector3				mNormal;	//!< normal of intersection.
 
-        BasicRaycastInfo()
-            : mDistance(-1.0f), mBody(NULL), mCollisionID(0), mNormal(Ogre::Vector3::ZERO) {}
-
+		BasicRaycastInfo();
+		~BasicRaycastInfo();
         bool operator<(const BasicRaycastInfo& rhs) const
         {
             return mDistance < rhs.mDistance;
@@ -105,19 +125,29 @@
 	int getHitCount() const;
 
 	//! retrieve the raycast info for a specific hit.
-	BasicRaycastInfo getInfoAt( int hitnum ) const;
+	BasicRaycastInfo getInfoAt( unsigned int hitnum ) const;
 
 	//! get the closest body hit by the ray.
 	BasicRaycastInfo getFirstHit() const;
 
+
 private:
 
+
 	// container for results.
 	typedef std::vector<BasicRaycastInfo> RaycastInfoList;
 
 	RaycastInfoList mRayList;
+
 };
 
+
+
 }	// end NAMESPACE OgreNewt
+	
 
+
+
+
 #endif	// _INCLUDE_OGRENEWT_RAYCAST
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_Tools.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_Tools.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_Tools.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -16,7 +16,6 @@
 #include <Newton.h>
 #include "OgreNewt_World.h"
 #include "OgreNewt_Collision.h"
-using namespace Ogre;
 
 namespace OgreNewt
 {
@@ -30,7 +29,7 @@
 			\param quat returned quaternion
 			\param pos returned position vector
 		*/
-		_OgreNewtExport void MatrixToQuatPos( const float* matrix, Quaternion& quat, Vector3 &pos );
+		_OgreNewtExport void MatrixToQuatPos( const float* matrix, Ogre::Quaternion& quat, Ogre::Vector3 &pos );
 	
 
 		//! Take a Quaternion and Position Matrix and create a Newton-happy float matrix!
@@ -39,7 +38,7 @@
 			\param pos input position vector
 			\param matrix returned matrix (float[16])
 		*/
-		_OgreNewtExport void QuatPosToMatrix( const Quaternion& quat, const Vector3 &pos, float* matrix );
+		_OgreNewtExport void QuatPosToMatrix( const Ogre::Quaternion& quat, const Ogre::Vector3 &pos, float* matrix );
 
 		//! Take a Newton matrix and make it into an Ogre::Matrix4.
 		/*!
@@ -180,7 +179,7 @@
 		_OgreNewtExport Ogre::Vector3 CalcSphereSolid( Ogre::Real mass, Ogre::Real radius );
 
 		//! calculate moment of inertia for a hollow sphere
-		_OgreNewtExport Ogre::Vector3 CalcSphereHollor(Ogre::Real mass, Ogre::Real radius );
+		_OgreNewtExport Ogre::Vector3 CalcSphereHollow(Ogre::Real mass, Ogre::Real radius );
 		
 		//! calculate moment of inertia for a solid box
 		_OgreNewtExport Ogre::Vector3 CalcBoxSolid(Ogre::Real mass, const Ogre::Vector3& size );
@@ -193,3 +192,4 @@
 }	// end NAMESPACE OgreNewt
 
 #endif
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_TreeCollisionSerializer.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_TreeCollisionSerializer.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_TreeCollisionSerializer.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -1,70 +1,69 @@
-/* 
-OgreNewt Library
-
-Ogre implementation of Newton Game Dynamics SDK
-
-OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
-
-by Walaber
-
-*/
-#ifndef _INCLUDE_OGRENEWT_TREECOLLISIONSERIALIZER
-#define _INCLUDE_OGRENEWT_TREECOLLISIONSERIALIZER
-
-#include "OgreNewt_Prerequisites.h"
-#include <Newton.h>
-#include "OgreNewt_World.h"
-#include "OgreSerializer.h"
-#include "OgreString.h"
-
-// OgreNewt namespace.  all functions and classes use this namespace.
-namespace OgreNewt
-{
-  namespace CollisionPrimitives
-  {
-    class TreeCollision;
-  }
-
-  /*!
-  This class can be used to (de)serialize a TreeCollision. Pre-building a TreeCollision and serializing from a tool,
-  then deserializing it at runtime may be more efficient than building the TreeCollision on the fly, especially for complex objects.
-  */
-  class _OgreNewtExport TreeCollisionSerializer : public Ogre::Serializer
-  {
-  public:
-
-    //! constructor
-    TreeCollisionSerializer();
-
-    //! destructor
-    virtual ~TreeCollisionSerializer();
-
-    /*!
-    Serialize the TreeCollision to a file with the given name.
-    */
-    void exportTreeCollision(const CollisionPrimitives::TreeCollision* collision, const Ogre::String& filename);
-
-    /*!
-    Deserialize the TreeCollision from a DataStream.
-    */
-    void importTreeCollision(Ogre::DataStreamPtr& stream, CollisionPrimitives::TreeCollision* pDest);
-
-    /*!
-    Callback function for Newton. It should never be called directly, but will be called by Newton to save the TreeCollision to a stream.
-    (Newton calls this function several times for each serialization, once for each chunk of its file format apparently)
-    */
-    static void _CDECL _newtonSerializeCallback(void* serializeHandle, const void* buffer, size_t size);
-
-    /*!
-    Callback function for Newton. It should never be called directly, but will be called by Newton to load the TreeCollision from a stream.
-    (Newton calls this function several times for each deserialization, once for each chunk of its file format apparently)
-    */
-    static void _CDECL _newtonDeserializeCallback(void* deserializeHandle, void* buffer, size_t size);
-  };
-
-
-}	// end NAMESPACE OgreNewt
-
-#endif
-// _INCLUDE_OGRENEWT_TREECOLLISIONSERIALIZER
-
+/* 
+OgreNewt Library
+
+Ogre implementation of Newton Game Dynamics SDK
+
+OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
+
+by Walaber
+
+*/
+#ifndef _INCLUDE_OGRENEWT_TREECOLLISIONSERIALIZER
+#define _INCLUDE_OGRENEWT_TREECOLLISIONSERIALIZER
+
+#include <Newton.h>
+#include "OgreNewt_World.h"
+#include "OgreSerializer.h"
+#include "OgreString.h"
+
+// OgreNewt namespace.  all functions and classes use this namespace.
+namespace OgreNewt
+{
+  namespace CollisionPrimitives
+  {
+    class TreeCollision;
+  }
+
+  /*!
+  This class can be used to (de)serialize a TreeCollision. Pre-building a TreeCollision and serializing from a tool,
+  then deserializing it at runtime may be more efficient than building the TreeCollision on the fly, especially for complex objects.
+  */
+  class _OgreNewtExport TreeCollisionSerializer : public Ogre::Serializer
+  {
+  public:
+
+    //! constructor
+    TreeCollisionSerializer();
+
+    //! destructor
+    virtual ~TreeCollisionSerializer();
+
+    /*!
+    Serialize the TreeCollision to a file with the given name.
+    */
+    void exportTreeCollision(const CollisionPrimitives::TreeCollision* collision, const Ogre::String& filename);
+
+    /*!
+    Deserialize the TreeCollision from a DataStream.
+    */
+    void importTreeCollision(Ogre::DataStreamPtr& stream, CollisionPrimitives::TreeCollision* pDest);
+
+    /*!
+    Callback function for Newton. It should never be called directly, but will be called by Newton to save the TreeCollision to a stream.
+    (Newton calls this function several times for each serialization, once for each chunk of its file format apparently)
+    */
+    static void _CDECL _newtonSerializeCallback(void* serializeHandle, const void* buffer, size_t size);
+
+    /*!
+    Callback function for Newton. It should never be called directly, but will be called by Newton to load the TreeCollision from a stream.
+    (Newton calls this function several times for each deserialization, once for each chunk of its file format apparently)
+    */
+    static void _CDECL _newtonDeserializeCallback(void* deserializeHandle, void* buffer, size_t size);
+  };
+
+
+}	// end NAMESPACE OgreNewt
+
+#endif
+// _INCLUDE_OGRENEWT_TREECOLLISIONSERIALIZER
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_Vehicle.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_Vehicle.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_Vehicle.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -1,217 +1,217 @@
-/* 
-	OgreNewt Library
-
-	Ogre implementation of Newton Game Dynamics SDK
-
-	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
-
-		by Walaber
-
-*/
-#ifndef _INCLUDE_OGRENEWT_VEHICLE
-#define _INCLUDE_OGRENEWT_VEHICLE
-
-#include "OgreNewt_Prerequisites.h"
-#include <Newton.h>
-#include "OgreNewt_Body.h"
-#include "OgreNewt_Joint.h"
-#include "OgreNewt_World.h"
-
-namespace OgreNewt
-{
-
-//! Represents a wheeled vehicle
-/*!
-	this class represents a basic vehicle, meant to be inherited by the user, with functionality added.
-*/
-	class _OgreNewtExport Vehicle
-	{
-	public:
-
-		//! basic vehicle tire.
-		/*!
-			secondary class: Tire.  this represents a basic tire.  you add tires by simply creating new tire objects, they are attached to the vehicle object you pass to the constructor.
-		*/
-		class _OgreNewtExport Tire
-		{
-		public:
-			//! overloaded constructor.
-			/*
-				this is the all-important constructor.
-				\param vehicle the parent vehicle to which you want to add this tire.
-				\param localorient local orientation of the tire (in the space of the chassis rigid body)
-				\param localpos local orientation of the tire (in the space of the chassis rigid body)
-				\param pin direction of the pin (axle) in the space of the tire
-				\param mass mass of the tire
-				\param width width of the tire
-				\param radius radis of the tire
-				\param susShock spring damper coefficient
-				\param susSpring spring strength
-				\param susLength spring length
-				\param colID collision ID used to determine collision in material callbacks.
-			*/
-			Tire( OgreNewt::Vehicle* vehicle, Ogre::Quaternion localorient, Ogre::Vector3 localpos, Ogre::Vector3 pin,
-				Ogre::Real mass, Ogre::Real width, Ogre::Real radius, Ogre::Real susShock, Ogre::Real susSpring, Ogre::Real susLength, int colID = 0);
-
-			//! destructor.
-			virtual ~Tire();
-
-			//! attach a scenenode to the tire!
-			void attachToNode( Ogre::SceneNode* node ) { m_node = node; }
-
-			//! update the position of the tire.  this must be called to update the attached scene node to the position of the tire!
-			void updateNode();
-
-			//! get the Newton ID for this tire.
-			const void* getNewtonID() const { return m_tireid; }
-
-			//! get the parent vehicle.
-			OgreNewt::Vehicle* getVehicle() const { return m_vehicle; }
-
-			//! get Ogre::SceneNode.
-			Ogre::SceneNode* getOgreNode() const { return m_node; }
-
-			//////////////////////////////////////////////////////////////////////
-			// Newton functions
-			
-			//! is the tire airborne?
-			int isAirBorne() const { return NewtonVehicleTireIsAirBorne( m_vehicle->getNewtonVehicle(), m_tireid ); }
-
-			//! has the tire lost side grip?
-			int lostSideGrip() const { return NewtonVehicleTireLostSideGrip( m_vehicle->getNewtonVehicle(), m_tireid ); }
-
-			//! has the tire lost traction?
-			int lostTraction() const { return NewtonVehicleTireLostTraction( m_vehicle->getNewtonVehicle(), m_tireid ); }
-
-			//! get the rotational velocity of the tire
-			Ogre::Real getOmega() const { return (Ogre::Real)NewtonVehicleGetTireOmega( m_vehicle->getNewtonVehicle(), m_tireid ); }
-
-			//! get the load on the tire (along the suspension normal )
-			Ogre::Real getNormalLoad() const { return (Ogre::Real)NewtonVehicleGetTireNormalLoad( m_vehicle->getNewtonVehicle(), m_tireid ); }
-
-			//! get the current steering angle for this tire
-			Ogre::Radian getSteeringAngle() const { return Ogre::Radian( NewtonVehicleGetTireSteerAngle( m_vehicle->getNewtonVehicle(), m_tireid ) ); }
-
-			//! get the lateral speed of the tire (sideways)
-			Ogre::Real getLateralSpeed() const { return NewtonVehicleGetTireLateralSpeed( m_vehicle->getNewtonVehicle(), m_tireid ); }
-
-			//! get the longitudinal speed of the tire (forward/backward)
-			Ogre::Real getLongitudinalSpeed() const { return NewtonVehicleGetTireLongitudinalSpeed( m_vehicle->getNewtonVehicle(), m_tireid ); }
-
-			//! get the location and orientation of the tire (in global space).
-			void getPositionOrientation( Ogre::Quaternion& orient, Ogre::Vector3& pos );
-
-			//! set the torque for this tire.  this must be called in the tire callback!
-			void setTorque( Ogre::Real torque ) const { NewtonVehicleSetTireTorque( m_vehicle->getNewtonVehicle(), m_tireid, torque ); }
-
-			//! set the steering angle for the tire.  this must be called in the tire callback.
-			void setSteeringAngle( Ogre::Radian angle ) const { NewtonVehicleSetTireSteerAngle( m_vehicle->getNewtonVehicle(), m_tireid, angle.valueRadians() ); }
-
-			//! calculate the max brake acceleration to stop the tires.
-			Ogre::Real calculateMaxBrakeAcceleration() const { return (Ogre::Real)NewtonVehicleTireCalculateMaxBrakeAcceleration( m_vehicle->getNewtonVehicle(), m_tireid ); }
-
-			//! set the brake acceleration
-			void setBrakeAcceleration( Ogre::Real accel, Ogre::Real limit ) const { NewtonVehicleTireSetBrakeAcceleration( m_vehicle->getNewtonVehicle(), m_tireid, (float)accel, (float)limit ); }
-
-			//! max side slip speed
-			void setMaxSideSlipSpeed( Ogre::Real speed ) const { NewtonVehicleSetTireMaxSideSleepSpeed( m_vehicle->getNewtonVehicle(), m_tireid, (float)speed ); }
-
-			//! set side slip coefficient
-			void setSideSlipCoefficient( Ogre::Real coefficient ) const { NewtonVehicleSetTireSideSleepCoeficient( m_vehicle->getNewtonVehicle(), m_tireid, (float)coefficient ); }
-
-			//! max longitudinal slip speed
-			void setMaxLongitudinalSlipSpeed( Ogre::Real speed ) const { NewtonVehicleSetTireMaxLongitudinalSlideSpeed( m_vehicle->getNewtonVehicle(), m_tireid, (float)speed ); }
-
-			//! set longitudinal slip coefficient
-			void setLongitudinalSlipCoefficient( Ogre::Real coefficient ) const { NewtonVehicleSetTireLongitudinalSlideCoeficient( m_vehicle->getNewtonVehicle(), m_tireid, (float)coefficient ); }
-
-
-
-
-		protected:
-			OgreNewt::Vehicle* m_vehicle;
-			void* m_tireid;
-
-			Ogre::SceneNode* m_node;
-
-		};
-
-
-		//! constructor
-		Vehicle() { m_vehicle = NULL; }
-
-		//! destructor
-		virtual ~Vehicle();
-
-		//! initialize the vehicle
-		/*!
-			this function should be called to initialize the vehicle, assigning it's main chassis rigid body.  the function
-			also calls the virtual function "setup" which the user should implement to add tires to the vehicle.
-			\param chassis pointer to the OgreNewt::Body to use as the chassis.
-			\param updir unit vector signifying which direction is "up" in your world.  used for suspension.
-		*/
-		void init( OgreNewt::Body* chassis, const Ogre::Vector3& updir );
-
-		//! destroy the vehicle, including chassis Body.
-		void destroy();	
-
-		//! setup the tires.
-		/*!
-			this is a virtual function that must be implemented by the user.  you should add and balance all tires in this function.
-		*/
-		virtual void setup() = 0;
-
-		//! user callback for controlling the vehicle
-		/*!
-			callback called each frame.  inside this callback you can add torque and steering to the tires to control the vehicle.
-		*/
-		virtual void userCallback() {}
-
-		//! get the chassis body.
-		OgreNewt::Body* getChassisBody() const { return m_chassis; }
-
-		//! get the NewtonJoint for the vehicle.
-		NewtonJoint* getNewtonVehicle()  const { return m_vehicle; }
-
-		//////////////////////////////////////////////////////////////
-		// Newton Vehicle functions.
-
-		//! reset the vehicle (stop all tires)
-		void reset() const { NewtonVehicleReset( m_vehicle ); }
-
-		//! get a pointer to the first tire
-		/*!
-			This can be used with the getNextTire function to iterate through all tires in the vehicle.  see examples for more info.
-			should only be called from inside the userCallback() function.
-		*/
-		const OgreNewt::Vehicle::Tire* getFirstTire() const;
-
-		//! get a pointer to the next tire in the vehicle.
-		/*!
-			This can be used with the getFirstTire function to iterate through all tires in the vehicle.  see examples for more info.
-			should only be called from inside the userCallback() function.
-		*/
-		const OgreNewt::Vehicle::Tire* getNextTire( OgreNewt::Vehicle::Tire* current_tire ) const;
-
-
-	protected:
-
-		OgreNewt::Body* m_chassis;
-
-	private:
-		//! callback for newton... it calls the userCallback() function for you.
-		static void _CDECL newtonCallback( const NewtonJoint* me );
-
-		static void _CDECL newtonDestructor( const NewtonJoint* me );
-
-		NewtonJoint* m_vehicle;
-		
-
-	};
-
-
-
-}	// end NAMESPACE OgreNewt
-
-
-#endif	// _INCLUDE_OGRENEWT_VEHICLE
+/* 
+	OgreNewt Library
+
+	Ogre implementation of Newton Game Dynamics SDK
+
+	OgreNewt basically has no license, you may use any or all of the library however you desire... I hope it can help you in any way.
+
+		by Walaber
+
+*/
+#ifndef _INCLUDE_OGRENEWT_VEHICLE
+#define _INCLUDE_OGRENEWT_VEHICLE
+
+#include <Newton.h>
+#include "OgreNewt_Body.h"
+#include "OgreNewt_Joint.h"
+#include "OgreNewt_World.h"
+
+namespace OgreNewt
+{
+
+//! Represents a wheeled vehicle
+/*!
+	this class represents a basic vehicle, meant to be inherited by the user, with functionality added.
+*/
+	class _OgreNewtExport Vehicle
+	{
+	public:
+
+		//! basic vehicle tire.
+		/*!
+			secondary class: Tire.  this represents a basic tire.  you add tires by simply creating new tire objects, they are attached to the vehicle object you pass to the constructor.
+		*/
+		class _OgreNewtExport Tire
+		{
+		public:
+			//! overloaded constructor.
+			/*
+				this is the all-important constructor.
+				\param vehicle the parent vehicle to which you want to add this tire.
+				\param localorient local orientation of the tire (in the space of the chassis rigid body)
+				\param localpos local orientation of the tire (in the space of the chassis rigid body)
+				\param pin direction of the pin (axle) in the space of the tire
+				\param mass mass of the tire
+				\param width width of the tire
+				\param radius radis of the tire
+				\param susShock spring damper coefficient
+				\param susSpring spring strength
+				\param susLength spring length
+				\param colID collision ID used to determine collision in material callbacks.
+			*/
+			Tire( OgreNewt::Vehicle* vehicle, Ogre::Quaternion localorient, Ogre::Vector3 localpos, Ogre::Vector3 pin,
+				Ogre::Real mass, Ogre::Real width, Ogre::Real radius, Ogre::Real susShock, Ogre::Real susSpring, Ogre::Real susLength, int colID = 0);
+
+			//! destructor.
+			virtual ~Tire();
+
+			//! attach a scenenode to the tire!
+			void attachToNode( Ogre::SceneNode* node ) { m_node = node; }
+
+			//! update the position of the tire.  this must be called to update the attached scene node to the position of the tire!
+			void updateNode();
+
+			//! get the Newton ID for this tire.
+			const void* getNewtonID() const { return m_tireid; }
+
+			//! get the parent vehicle.
+			OgreNewt::Vehicle* getVehicle() const { return m_vehicle; }
+
+			//! get Ogre::SceneNode.
+			Ogre::SceneNode* getOgreNode() const { return m_node; }
+
+			//////////////////////////////////////////////////////////////////////
+			// Newton functions
+			
+			//! is the tire airborne?
+			int isAirBorne() const { return NewtonVehicleTireIsAirBorne( m_vehicle->getNewtonVehicle(), m_tireid ); }
+
+			//! has the tire lost side grip?
+			int lostSideGrip() const { return NewtonVehicleTireLostSideGrip( m_vehicle->getNewtonVehicle(), m_tireid ); }
+
+			//! has the tire lost traction?
+			int lostTraction() const { return NewtonVehicleTireLostTraction( m_vehicle->getNewtonVehicle(), m_tireid ); }
+
+			//! get the rotational velocity of the tire
+			Ogre::Real getOmega() const { return (Ogre::Real)NewtonVehicleGetTireOmega( m_vehicle->getNewtonVehicle(), m_tireid ); }
+
+			//! get the load on the tire (along the suspension normal )
+			Ogre::Real getNormalLoad() const { return (Ogre::Real)NewtonVehicleGetTireNormalLoad( m_vehicle->getNewtonVehicle(), m_tireid ); }
+
+			//! get the current steering angle for this tire
+			Ogre::Radian getSteeringAngle() const { return Ogre::Radian( NewtonVehicleGetTireSteerAngle( m_vehicle->getNewtonVehicle(), m_tireid ) ); }
+
+			//! get the lateral speed of the tire (sideways)
+			Ogre::Real getLateralSpeed() const { return NewtonVehicleGetTireLateralSpeed( m_vehicle->getNewtonVehicle(), m_tireid ); }
+
+			//! get the longitudinal speed of the tire (forward/backward)
+			Ogre::Real getLongitudinalSpeed() const { return NewtonVehicleGetTireLongitudinalSpeed( m_vehicle->getNewtonVehicle(), m_tireid ); }
+
+			//! get the location and orientation of the tire (in global space).
+			void getPositionOrientation( Ogre::Quaternion& orient, Ogre::Vector3& pos );
+
+			//! set the torque for this tire.  this must be called in the tire callback!
+			void setTorque( Ogre::Real torque ) const { NewtonVehicleSetTireTorque( m_vehicle->getNewtonVehicle(), m_tireid, torque ); }
+
+			//! set the steering angle for the tire.  this must be called in the tire callback.
+			void setSteeringAngle( Ogre::Radian angle ) const { NewtonVehicleSetTireSteerAngle( m_vehicle->getNewtonVehicle(), m_tireid, angle.valueRadians() ); }
+
+			//! calculate the max brake acceleration to stop the tires.
+			Ogre::Real calculateMaxBrakeAcceleration() const { return (Ogre::Real)NewtonVehicleTireCalculateMaxBrakeAcceleration( m_vehicle->getNewtonVehicle(), m_tireid ); }
+
+			//! set the brake acceleration
+			void setBrakeAcceleration( Ogre::Real accel, Ogre::Real limit ) const { NewtonVehicleTireSetBrakeAcceleration( m_vehicle->getNewtonVehicle(), m_tireid, (float)accel, (float)limit ); }
+
+			//! max side slip speed
+			void setMaxSideSlipSpeed( Ogre::Real speed ) const { NewtonVehicleSetTireMaxSideSleepSpeed( m_vehicle->getNewtonVehicle(), m_tireid, (float)speed ); }
+
+			//! set side slip coefficient
+			void setSideSlipCoefficient( Ogre::Real coefficient ) const { NewtonVehicleSetTireSideSleepCoeficient( m_vehicle->getNewtonVehicle(), m_tireid, (float)coefficient ); }
+
+			//! max longitudinal slip speed
+			void setMaxLongitudinalSlipSpeed( Ogre::Real speed ) const { NewtonVehicleSetTireMaxLongitudinalSlideSpeed( m_vehicle->getNewtonVehicle(), m_tireid, (float)speed ); }
+
+			//! set longitudinal slip coefficient
+			void setLongitudinalSlipCoefficient( Ogre::Real coefficient ) const { NewtonVehicleSetTireLongitudinalSlideCoeficient( m_vehicle->getNewtonVehicle(), m_tireid, (float)coefficient ); }
+
+
+
+
+		protected:
+			OgreNewt::Vehicle* m_vehicle;
+			void* m_tireid;
+
+			Ogre::SceneNode* m_node;
+
+		};
+
+
+		//! constructor
+		Vehicle() { m_vehicle = NULL; }
+
+		//! destructor
+		virtual ~Vehicle();
+
+		//! initialize the vehicle
+		/*!
+			this function should be called to initialize the vehicle, assigning it's main chassis rigid body.  the function
+			also calls the virtual function "setup" which the user should implement to add tires to the vehicle.
+			\param chassis pointer to the OgreNewt::Body to use as the chassis.
+			\param updir unit vector signifying which direction is "up" in your world.  used for suspension.
+		*/
+		void init( OgreNewt::Body* chassis, const Ogre::Vector3& updir );
+
+		//! destroy the vehicle, including chassis Body.
+		void destroy();	
+
+		//! setup the tires.
+		/*!
+			this is a virtual function that must be implemented by the user.  you should add and balance all tires in this function.
+		*/
+		virtual void setup() = 0;
+
+		//! user callback for controlling the vehicle
+		/*!
+			callback called each frame.  inside this callback you can add torque and steering to the tires to control the vehicle.
+		*/
+		virtual void userCallback() {}
+
+		//! get the chassis body.
+		OgreNewt::Body* getChassisBody() const { return m_chassis; }
+
+		//! get the NewtonJoint for the vehicle.
+		NewtonJoint* getNewtonVehicle()  const { return m_vehicle; }
+
+		//////////////////////////////////////////////////////////////
+		// Newton Vehicle functions.
+
+		//! reset the vehicle (stop all tires)
+		void reset() const { NewtonVehicleReset( m_vehicle ); }
+
+		//! get a pointer to the first tire
+		/*!
+			This can be used with the getNextTire function to iterate through all tires in the vehicle.  see examples for more info.
+			should only be called from inside the userCallback() function.
+		*/
+		const OgreNewt::Vehicle::Tire* getFirstTire() const;
+
+		//! get a pointer to the next tire in the vehicle.
+		/*!
+			This can be used with the getFirstTire function to iterate through all tires in the vehicle.  see examples for more info.
+			should only be called from inside the userCallback() function.
+		*/
+		const OgreNewt::Vehicle::Tire* getNextTire( OgreNewt::Vehicle::Tire* current_tire ) const;
+
+
+	protected:
+
+		OgreNewt::Body* m_chassis;
+
+	private:
+		//! callback for newton... it calls the userCallback() function for you.
+		static void _CDECL newtonCallback( const NewtonJoint* me );
+
+		static void _CDECL newtonDestructor( const NewtonJoint* me );
+
+		NewtonJoint* m_vehicle;
+		
+
+	};
+
+
+
+}	// end NAMESPACE OgreNewt
+
+
+#endif	// _INCLUDE_OGRENEWT_VEHICLE
+

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_World.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_World.h	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_World.h	2007-02-28 03:27:47 UTC (rev 3086)
@@ -10,9 +10,9 @@
 #ifndef _INCLUDE_OGRENEWT_WORLD
 #define _INCLUDE_OGRENEWT_WORLD
 
-#include "OgreNewt_Prerequisites.h"
 #include <Newton.h>
 #include <Ogre.h>
+#include "OgreNewt_Prerequisites.h"
 #include "OgreNewt_MaterialID.h"
 #include "FastDelegate.h"
 

Modified: dependencies/OgreNewt/src/OgreNewt_BasicJoints.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_BasicJoints.cpp	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/src/OgreNewt_BasicJoints.cpp	2007-02-28 03:27:47 UTC (rev 3086)
@@ -1,3 +1,4 @@
+#include <Newton.h>
 #include <OgreNewt_BasicJoints.h>
 #include <OgreNewt_World.h>
 #include <OgreNewt_Body.h>
@@ -441,6 +442,7 @@
 	// initialize variables
 	mMin = mMax = Ogre::Degree(0);
 	mLimitsOn = false;
+	mAccel = 0.0f;
 
 }
 

Modified: dependencies/OgreNewt/src/OgreNewt_Body.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_Body.cpp	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/src/OgreNewt_Body.cpp	2007-02-28 03:27:47 UTC (rev 3086)
@@ -16,9 +16,6 @@
 	
 	m_userdata = NULL;
 
-	m_offset = Vector3::ZERO;
-	m_orientationBias = Quaternion::IDENTITY;
-
 	m_forcecallback = NULL;
 	m_transformcallback = NULL;
 	m_buoyancycallback = NULL;
@@ -83,6 +80,14 @@
 		me->m_forcecallback( me );
 }
 
+void _CDECL Body::newtonAutoactiveCallback(const NewtonBody* body, unsigned state)
+{
+	OgreNewt::Body* me = (OgreNewt::Body*)NewtonBodyGetUserData( body );
+
+	if (me->m_autoactivecallback)
+		me->m_autoactivecallback( me, state );
+}
+
 void Body::standardForceCallback( OgreNewt::Body* me )
 {
 	//apply a simple gravity force.
@@ -100,8 +105,8 @@
 
 void Body::standardTransformCallback( OgreNewt::Body* me, const Ogre::Quaternion& orient, const Ogre::Vector3& pos )
 {
-	me->m_node->setOrientation( me->m_orientationBias * orient);
-	me->m_node->setPosition( pos - orient*me->m_offset);
+	me->m_node->setOrientation( orient );
+	me->m_node->setPosition( pos );
 }
 
 
@@ -135,12 +140,9 @@
 
 
 // attachToNode
-void Body::attachToNode(Ogre::SceneNode* node, const Vector3& offset,
-						const Quaternion& orientationBias)
+void Body::attachToNode( Ogre::Node* node )
 {
 	m_node = node;
-	m_offset = offset;
-	m_orientationBias = orientationBias;
 	if (m_body)
 	{
 		setCustomTransformCallback( &Body::standardTransformCallback );
@@ -158,8 +160,8 @@
 
 		if (m_node)
 		{
-			m_node->setOrientation(m_orientationBias * orient);
-			m_node->setPosition(pos - orient*m_offset);
+			m_node->setOrientation( orient );
+			m_node->setPosition( pos );
 		}
 	}
 }
@@ -175,8 +177,8 @@
 {
 	if (m_body)
     {
-        Vector3 center = Vector3::ZERO;
-        Vector3 inertia = Vector3::ZERO;
+		Ogre::Vector3 center = Ogre::Vector3::ZERO;
+        Ogre::Vector3 inertia = Ogre::Vector3::ZERO;
         NewtonConvexCollisionCalculateInertialMatrix(m_collision->getNewtonCollision(),
             &inertia.x, &center.x);
         NewtonBodySetMassMatrix(m_body, (float)mass,
@@ -222,10 +224,26 @@
 
 }
 
+// set callback for auto activate / deactivate
+void Body::setAutoactiveCallback ( autoactiveCallback callback ) 
+{
+	if (!m_autoactivecallback)
+	{
+		m_autoactivecallback = callback; 
+		NewtonBodySetAutoactiveCallback( m_body, newtonAutoactiveCallback );
+	}
+	else
+	{
+//		if (m_autoactivecallback != callback) // no need for this, setting it is quick and will not be called often, plus it keeps me from needing to include another file. :)
+			m_autoactivecallback = callback;
+	}
+}
+
 //set collision
 void Body::setCollision(CollisionPtr col)
 {
 	NewtonBodySetCollision( m_body, col->getNewtonCollision() );
+
 	m_collision = col;
 }
 
@@ -332,26 +350,7 @@
 	addGlobalForce( globalforce, globalpoint );
 }
 
-Ogre::Vector3 Body::getOffset() const
-{
-    return m_offset;
-}
 
-void Body::setOffset(const Ogre::Vector3& offset)
-{
-    m_offset = offset;
-}
-
-Ogre::Quaternion Body::getOrientationBias() const
-{
-	return m_orientationBias;
-}
-
-void Body::setOrientationBias(const Ogre::Quaternion& orientationbias)
-{
-	m_orientationBias = orientationbias;
-}
-
 // --------------------------------------------------------------------------------------
 
 

Modified: dependencies/OgreNewt/src/OgreNewt_CollisionPrimitives.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_CollisionPrimitives.cpp	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/src/OgreNewt_CollisionPrimitives.cpp	2007-02-28 03:27:47 UTC (rev 3086)
@@ -90,14 +90,14 @@
 		// OgreNewt::CollisionPrimitives::ConvexHull
 		ConvexHull::ConvexHull( const World* world, Ogre::Entity* entity, bool useTempBuffers, const Ogre::Quaternion& orient, const Ogre::Vector3& pos ) : ConvexCollision( world )
 		{
-			Ogre::Vector3 scale = Vector3::UNIT_SCALE;
+			Ogre::Vector3 scale = Ogre::Vector3::UNIT_SCALE;
 
 
 			// get the mesh!
 			Ogre::MeshPtr mesh = entity->getMesh();
 
 			// get scale, if attached to node
-			Node * node = entity->getParentNode();
+			Ogre::Node * node = entity->getParentNode();
 			if (node) scale = node->getScale();
 
 			//find number of submeshes
@@ -199,7 +199,9 @@
 
 					//unlock buffer
 					v_sptr->unlock();
-				}		
+				}
+
+		
 			}
 
 			float matrix[16];
@@ -210,8 +212,10 @@
 			m_col = NewtonCreateConvexHull( m_world->getNewtonWorld(), (int)total_verts, (float*)&vertices[0].x, sizeof(Ogre::Vector3), &matrix[0] );
 
 			delete []vertices;
+
 		}
 
+
 		// OgreNewt::CollisionPrimitives::ConvexHull
 		ConvexHull::ConvexHull( const World* world, const Ogre::Vector3* verts, int vertcount, const Ogre::Quaternion& orient, const Ogre::Vector3& pos ) : ConvexCollision( world )
 		{
@@ -223,22 +227,24 @@
 
 		}
 
+
+
+
 		TreeCollision::TreeCollision( const World* world) : Collision(world)
 		{
 		}
 
 		TreeCollision::TreeCollision( const World* world, Ogre::Entity* entity, bool optimize, bool useTempBuffers ) : Collision( world )
 		{
-			Ogre::Vector3 scale = Vector3::UNIT_SCALE;
+			Ogre::Vector3 scale = Ogre::Vector3::UNIT_SCALE;
 
-			m_col = NewtonCreateTreeCollision( m_world->getNewtonWorld(), NULL );
-			NewtonTreeCollisionBeginBuild( m_col );
+			start();
 
 			//now get the mesh!
 			Ogre::MeshPtr mesh = entity->getMesh();
 
 			//get scale
-			Node* node = entity->getParentNode();
+			Ogre::Node* node = entity->getParentNode();
 			if (node) scale = node->getScale();
 
 			//find number of sub-meshes
@@ -339,7 +345,7 @@
 						}
 					}
 
-					NewtonTreeCollisionAddFace( m_col, 3, (float*)&poly_verts[0].x, sizeof(Ogre::Vector3), cs );
+					addPoly( poly_verts, cs );
 					i_offset += 3;
 				}
 
@@ -349,15 +355,14 @@
 
 			}
 			//done!
-			NewtonTreeCollisionEndBuild( m_col, optimize );
+			finish( optimize );
 		}
 
 
 		TreeCollision::TreeCollision(const OgreNewt::World *world, int numVertices, int numIndices, const float *vertices, const int *indices, bool optimize) : OgreNewt::Collision( world )
 		{
-			m_col = NewtonCreateTreeCollision( world->getNewtonWorld(), NULL );
-			NewtonTreeCollisionBeginBuild( m_col );
-
+			start();
+ 
 			int numPolys = numIndices / 3;
 
 			Ogre::Vector3 *vecVertices = new Ogre::Vector3[numVertices];
@@ -377,31 +382,30 @@
 				poly_verts[1] = vecVertices[indices[1 + poly * 3]];
 				poly_verts[2] = vecVertices[indices[2 + poly * 3]];
 
-				NewtonTreeCollisionAddFace( m_col, 3, (float*)&poly_verts[0].x, sizeof(Ogre::Vector3), NULL );
+				addPoly( poly_verts, 0 );
 			}
 
 			delete [] vecVertices;
 
-			NewtonTreeCollisionEndBuild( m_col, true ); 
+		     finish( optimize );
 		}
 
 
 		TreeCollision::TreeCollision( const World* world, int numVertices, Ogre::Vector3* vertices, Ogre::IndexData* indexData, bool optimize) : Collision( world )
 		{
-			m_col = NewtonCreateTreeCollision( world->getNewtonWorld(), NULL );
-			NewtonTreeCollisionBeginBuild( m_col );
+			start();
 
-			int numPolys = indexData->indexCount / 3;
+			unsigned int numPolys = indexData->indexCount / 3;
 			Ogre::HardwareIndexBufferSharedPtr hwIndexBuffer=indexData->indexBuffer;
 			size_t indexSize=hwIndexBuffer->getIndexSize();
-			void* indices=hwIndexBuffer->lock(HardwareBuffer::HBL_READ_ONLY);
+			void* indices=hwIndexBuffer->lock(Ogre::HardwareBuffer::HBL_READ_ONLY);
 
 			assert((indexSize==2) || (indexSize==4));
 
 			if (indexSize==2)
 			{
 				unsigned short* curIndex=(unsigned short*)indices;
-				for ( int poly = 0; poly < numPolys; poly++ )
+				for ( unsigned int poly = 0; poly < numPolys; poly++ )
 				{
 					Ogre::Vector3 poly_verts[3];
 
@@ -410,13 +414,13 @@
 					poly_verts[2] = vertices[*curIndex]; curIndex++;
 					poly_verts[1] = vertices[*curIndex]; curIndex++;
 
-					NewtonTreeCollisionAddFace( m_col, 3, (float*)&poly_verts[0].x, sizeof(Ogre::Vector3), NULL );
+					addPoly( poly_verts, 0 );
 				}
 			}
 			else
 			{
 				unsigned int* curIndex=(unsigned int*)indices;
-				for ( int poly = 0; poly < numPolys; poly++ )
+				for ( unsigned int poly = 0; poly < numPolys; poly++ )
 				{
 					Ogre::Vector3 poly_verts[3];
 
@@ -424,25 +428,205 @@
 					poly_verts[2] = vertices[*curIndex]; curIndex++;
 					poly_verts[1] = vertices[*curIndex]; curIndex++;
 
-					NewtonTreeCollisionAddFace( m_col, 3, (float*)&poly_verts[0].x, sizeof(Ogre::Vector3), NULL );
+					addPoly( poly_verts, 0 );
 				}
 			}
-
+      
 			hwIndexBuffer->unlock();
-			NewtonTreeCollisionEndBuild( m_col, optimize );
+			finish( optimize );
 		} 
 
 
+		void TreeCollision::start()
+		{
+			m_col = NewtonCreateTreeCollision( m_world->getNewtonWorld(), NULL );
+			NewtonTreeCollisionBeginBuild( m_col );
+		}
+
+		void TreeCollision::addPoly( Ogre::Vector3* polys, unsigned int ID )
+		{
+			NewtonTreeCollisionAddFace( m_col, 3, (float*)&polys[0].x, sizeof(Ogre::Vector3), ID );
+		}
+
+		void TreeCollision::finish( bool optimize)
+		{
+			NewtonTreeCollisionEndBuild( m_col, optimize );
+		}
+
+
+		int TreeCollisionSceneParser::count = 0;
+		
+		
+		TreeCollisionSceneParser::TreeCollisionSceneParser( OgreNewt::World* world ) : TreeCollision( world )
+		{
+		}
+		
+		void TreeCollisionSceneParser::parseScene( Ogre::SceneNode *startNode, bool optimize)
+		{
+			count = 0;
+
+			start();
+
+			// parse the individual nodes.
+			Ogre::Quaternion rootOrient = Ogre::Quaternion::IDENTITY;
+			Ogre::Vector3 rootPos = Ogre::Vector3::ZERO;
+
+			_parseNode( startNode, rootOrient, rootPos );
+
+			finish( optimize );
+		}
+
+		void TreeCollisionSceneParser::_parseNode(Ogre::SceneNode *node, const Ogre::Quaternion &curOrient, const Ogre::Vector3 &curPos)
+		{
+			// parse this scene node.
+			// do children first.
+			Ogre::Quaternion thisOrient = curOrient * node->getOrientation();
+			Ogre::Vector3 thisPos = curPos + (curOrient * node->getPosition() * node->getScale());
+			Ogre::Vector3 thisScale = node->getScale();
+
+			Ogre::SceneNode::ChildNodeIterator child_it = node->getChildIterator();
+
+			while (child_it.hasMoreElements())
+			{
+				_parseNode( (Ogre::SceneNode*)child_it.getNext(), thisOrient, thisPos );
+			}
+
+
+			// now add the polys from this node.
+			//now get the mesh!
+			unsigned int num_obj = node->numAttachedObjects();
+			for (unsigned int co=0; co<num_obj; co++)
+			{
+				Ogre::MovableObject* obj = node->getAttachedObject(co);
+				if (obj->getMovableType() != "Entity")
+					continue;
+			
+				Ogre::Entity* ent = (Ogre::Entity*)obj;
+
+				if (!entityFilter(node, ent))
+					continue;
+
+				Ogre::MeshPtr mesh = ent->getMesh();
+
+				//find number of sub-meshes
+				unsigned short sub = mesh->getNumSubMeshes();
+
+				for (unsigned short cs=0;cs<sub;cs++)
+				{
+					Ogre::SubMesh* sub_mesh = mesh->getSubMesh(cs);
+
+					//vertex data!
+					Ogre::VertexData* v_data;
+
+					if (sub_mesh->useSharedVertices)
+					{	
+						v_data = mesh->sharedVertexData;
+					}
+					else
+					{
+						v_data = sub_mesh->vertexData;
+					}
+		
+					//let's find more information about the Vertices...
+					Ogre::VertexDeclaration* v_decl = v_data->vertexDeclaration;
+					const Ogre::VertexElement* p_elem = v_decl->findElementBySemantic( Ogre::VES_POSITION );
+		
+					// get pointer!
+					Ogre::HardwareVertexBufferSharedPtr v_sptr = v_data->vertexBufferBinding->getBuffer( p_elem->getSource() );
+					unsigned char* v_ptr = static_cast<unsigned char*>(v_sptr->lock( Ogre::HardwareBuffer::HBL_READ_ONLY ));
+		
+					//now find more about the index!!
+					Ogre::IndexData* i_data = sub_mesh->indexData;
+					size_t index_count = i_data->indexCount;
+					size_t poly_count = index_count / 3;
+		
+					// get pointer!
+					Ogre::HardwareIndexBufferSharedPtr i_sptr = i_data->indexBuffer;
+		
+					// 16 or 32 bit indices?
+					bool uses32bit = ( i_sptr->getType() == Ogre::HardwareIndexBuffer::IT_32BIT );
+					unsigned long* i_Longptr;
+					unsigned short* i_Shortptr;
+		
+					if ( uses32bit)
+					{
+						i_Longptr = static_cast<unsigned long*>(i_sptr->lock( Ogre::HardwareBuffer::HBL_READ_ONLY ));
+					}
+					else
+					{
+						i_Shortptr = static_cast<unsigned short*>(i_sptr->lock( Ogre::HardwareBuffer::HBL_READ_ONLY ));
+					}
+
+					//now loop through the indices, getting polygon info!
+					int i_offset = 0;
+
+					for (size_t i=0; i<poly_count; i++)
+					{
+						Ogre::Vector3 poly_verts[3];
+						unsigned char* v_offset;
+						float* v_Posptr;
+						int idx;
+
+						if (uses32bit)
+						{
+							for (int j=0;j<3;j++)
+							{
+								idx = i_Longptr[i_offset+j];		// index to first vertex!
+								v_offset = v_ptr + (idx * v_sptr->getVertexSize());
+								p_elem->baseVertexPointerToElement( v_offset, &v_Posptr );
+								//now get vertex position from v_Posptr!
+								poly_verts[j].x = *v_Posptr; v_Posptr++;
+								poly_verts[j].y = *v_Posptr; v_Posptr++;
+								poly_verts[j].z = *v_Posptr; v_Posptr++;
+	
+								poly_verts[j] = thisPos + (thisOrient * (poly_verts[j] * thisScale));
+							}
+						}
+						else
+						{
+							for (int j=0;j<3;j++)
+							{
+								idx = i_Shortptr[i_offset+j];		// index to first vertex!
+								v_offset = v_ptr + (idx * v_sptr->getVertexSize());
+								p_elem->baseVertexPointerToElement( v_offset, &v_Posptr );
+								//now get vertex position from v_Posptr!
+
+								// switch poly winding.
+								poly_verts[j].x = *v_Posptr; v_Posptr++;
+								poly_verts[j].y = *v_Posptr; v_Posptr++;
+								poly_verts[j].z = *v_Posptr; v_Posptr++;
+							
+								poly_verts[j] = thisPos + (thisOrient * (poly_verts[j] * thisScale));
+							}
+						}
+					
+						addPoly( poly_verts, getID(node, ent, cs) );
+						i_offset += 3;
+					}
+
+					//unlock the buffers!
+					v_sptr->unlock();
+					i_sptr->unlock();
+
+				}
+			}
+
+		}
+
+
+
+
+
 		// OgreNewt::CollisionPrimitives::CompoundCollision
 		CompoundCollision::CompoundCollision( const World* world, std::vector<CollisionPtr> col_array ) : Collision( world )
 		{
 			//get the number of elements.
-			int num = col_array.size();
+			unsigned int num = col_array.size();
 
 			// create simple array.
 			NewtonCollision** array = new NewtonCollision*[num];
 
-			for (int i=0;i<num;i++)
+			for (unsigned int i=0;i<num;i++)
 			{
 				array[i] = (NewtonCollision*)col_array[i]->getNewtonCollision();
 			}

Modified: dependencies/OgreNewt/src/OgreNewt_Debugger.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_Debugger.cpp	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/src/OgreNewt_Debugger.cpp	2007-02-28 03:27:47 UTC (rev 3086)
@@ -12,6 +12,12 @@
 	m_debugnode = NULL;
 }
 
+Debugger::~Debugger()
+{
+	// natoka: I don't know but this creates an Access violation in deInit 
+	// at line 39
+	//Debugger::getSingleton().deInit();
+}
 
 Debugger& Debugger::getSingleton()
 {
@@ -21,29 +27,45 @@
 		
 void Debugger::init( Ogre::SceneManager* smgr )
 {
-    m_debugnode = smgr->getRootSceneNode()->createChildSceneNode("__OgreNewt__Debugger__");
-    m_debuglines = new Ogre::ManualObject("__OgreNewt__Debugger__");
-    m_debugnode->attachObject(m_debuglines); 
+	m_debugnode = smgr->getRootSceneNode()->createChildSceneNode("__OgreNewt__Debugger__");
+	m_debuglines = NULL;
+	m_debuglines = new Ogre::ManualObject("__OgreNewt__Debugger__");
 }
 
+void Debugger::deInit()
+{
+	if (m_debugnode)
+	{
+		m_debugnode->detachAllObjects();
+		if (m_debuglines) { delete m_debuglines; m_debuglines = NULL; }
+		m_debugnode->getParentSceneNode()->removeAndDestroyChild( m_debugnode->getName() );
+		m_debugnode = NULL;
+	}
+}
 
+
 void Debugger::showLines( OgreNewt::World* world )
 {
+	m_debugnode->detachAllObjects();
 	m_debuglines->clear();
 	m_debuglines->begin("BaseWhiteNoLighting", Ogre::RenderOperation::OT_LINE_LIST );
 
-	// make the new lines.
+    // make the new lines.
     NewtonWorldForEachBodyDo(world->getNewtonWorld(), newtonPerBody);
 
-    m_debuglines->end();	
+    m_debuglines->end();
+	m_debugnode->attachObject(m_debuglines); 
+	
 }
 
 void Debugger::hideLines()
 {
 	// erase any existing lines!
+	m_debugnode->detachAllObjects();
 	m_debuglines->clear(); 
 }
 
+
 void _CDECL Debugger::newtonPerBody( const NewtonBody* body )
 {
 	NewtonBodyForEachPolygonDo( body, newtonPerPoly );
@@ -59,10 +81,15 @@
 	for (i=0;i<vertexCount;i++)
 	{
 		p1 = Ogre::Vector3( faceVertec[(i*3) + 0], faceVertec[(i*3) + 1], faceVertec[(i*3) + 2] );
+
 		Debugger::getSingleton().m_debuglines->position( p0 );
 		Debugger::getSingleton().m_debuglines->position( p1 );
+
 		p0 = p1;
 	}
 }
 
+
+
+
 }	// end namespace OgreNewt

Modified: dependencies/OgreNewt/src/OgreNewt_MaterialID.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_MaterialID.cpp	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/src/OgreNewt_MaterialID.cpp	2007-02-28 03:27:47 UTC (rev 3086)
@@ -25,3 +25,4 @@
 
 
 }
+

Modified: dependencies/OgreNewt/src/OgreNewt_MaterialPair.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_MaterialPair.cpp	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/src/OgreNewt_MaterialPair.cpp	2007-02-28 03:27:47 UTC (rev 3086)
@@ -30,3 +30,4 @@
 
 
 }
+

Modified: dependencies/OgreNewt/src/OgreNewt_RayCast.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_RayCast.cpp	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/src/OgreNewt_RayCast.cpp	2007-02-28 03:27:47 UTC (rev 3086)
@@ -2,97 +2,125 @@
 
 namespace OgreNewt
 {
-    Raycast::Raycast()	{}
-    Raycast::~Raycast()	{}
 
-    void Raycast::go(const OgreNewt::World* world, const Ogre::Vector3& startpt,
-        const Ogre::Vector3& endpt )
-    {
-        // perform the raycast!
-        NewtonWorldRayCast( world->getNewtonWorld(), (float*)&startpt,
-            (float*)&endpt, OgreNewt::Raycast::newtonRaycastFilter, this, NULL);
-    }
 
-    float _CDECL Raycast::newtonRaycastFilter(const NewtonBody* body,
-        const float* hitNormal, int collisionID, void* userData, float intersectParam)
-    {
-        // get our object!
-        Raycast* me = (Raycast*)userData;
+	Raycast::Raycast()	{}
+	Raycast::~Raycast()	{}
 
-        Body* bod = (Body*)NewtonBodyGetUserData( body );
-        Ogre::Vector3 normal = Ogre::Vector3( hitNormal[0], hitNormal[1], hitNormal[2] );
 
-        if (me->userCallback( bod, intersectParam, normal, collisionID ))
-        {
-            return intersectParam;
-        }
-        else
-        {
-            return 1.1;
-        }
-    }
+	void Raycast::go(const OgreNewt::World* world, const Ogre::Vector3& startpt, const Ogre::Vector3& endpt )
+	{
+		// perform the raycast!
+		NewtonWorldRayCast( world->getNewtonWorld(), (float*)&startpt, (float*)&endpt, OgreNewt::Raycast::newtonRaycastFilter, this, OgreNewt::Raycast::newtonRaycastPreFilter );
+	}
 
-    BasicRaycast::BasicRaycast(const OgreNewt::World* world,
-        const Ogre::Vector3& startpt, const Ogre::Vector3& endpt, bool sorted ) : Raycast() 
-    {
-        go(world, startpt, endpt);
-        if (sorted)
-        {
-            std::sort(mRayList.begin(), mRayList.end());
-        }
-    }
+	float _CDECL Raycast::newtonRaycastFilter(const NewtonBody* body, const float* hitNormal, int collisionID, void* userData, float intersectParam)
+	{
+		// get our object!
+		Raycast* me = (Raycast*)userData;
 
-    BasicRaycast::~BasicRaycast()	{}
+		Body* bod = (Body*)NewtonBodyGetUserData( body );
+		Ogre::Vector3 normal = Ogre::Vector3( hitNormal[0], hitNormal[1], hitNormal[2] );
 
-    int BasicRaycast::getHitCount() const { return (int)mRayList.size(); }
+		if (me->userCallback( bod, intersectParam, normal, collisionID ))
+			return intersectParam;
+		else
+			return 1.1;
 
-    BasicRaycast::BasicRaycastInfo BasicRaycast::getFirstHit() const
-    {
-        //return the closest hit...
-        BasicRaycast::BasicRaycastInfo ret;
+	}
 
-        Ogre::Real dist = 10000.0;
+	unsigned _CDECL Raycast::newtonRaycastPreFilter(const NewtonBody *body, const NewtonCollision *collision, void* userData)
+	{
+		// get our object!
+		Raycast* me = (Raycast*)userData;
 
-        RaycastInfoList::const_iterator it;
-        for (it = mRayList.begin(); it != mRayList.end(); it++)
-        {
-            if (it->mDistance < dist)
-            {
-                dist = it->mDistance;
-                ret = (*it);
-            }
-        }
+		Body* bod = (Body*)NewtonBodyGetUserData( body );
 
-        return ret;
-    }
+		if (me->userPreFilterCallback( bod ))
+			return 1;
+		else
+			return 0;
+	}
 
-    BasicRaycast::BasicRaycastInfo BasicRaycast::getInfoAt( int hitnum ) const
-    {
-        BasicRaycast::BasicRaycastInfo ret;
 
-        if ((hitnum < 0) || (hitnum > mRayList.size()))
-        {
-            return ret;
-        }
 
-        ret = mRayList.at(hitnum);
+	//--------------------------------
+	BasicRaycast::BasicRaycastInfo::BasicRaycastInfo()
+	{
+		mBody = NULL;
+		mDistance = -1.0;
+		mNormal = Ogre::Vector3::ZERO;
+	}
 
-        return ret;
-    }
+	BasicRaycast::BasicRaycastInfo::~BasicRaycastInfo() {}
 
-    bool BasicRaycast::userCallback(OgreNewt::Body* body, Ogre::Real distance,
-        const Ogre::Vector3& normal, int collisionID)
-    {
-        // create a new infor object.
-        BasicRaycast::BasicRaycastInfo newinfo;
 
-        newinfo.mBody = body;
-        newinfo.mDistance = distance;
-        newinfo.mNormal = normal;
-        newinfo.mCollisionID = collisionID;
+	BasicRaycast::BasicRaycast(const OgreNewt::World* world, const Ogre::Vector3& startpt,
+		const Ogre::Vector3& endpt, bool sorted ) : Raycast() 
+	{
+		go( world, startpt, endpt );
+		if (sorted)
+		{
+			std::sort(mRayList.begin(), mRayList.end());
+		}
+	}
 
-        mRayList.push_back(newinfo);
+	BasicRaycast::~BasicRaycast()	{}
 
-        return false;
-    }
+
+	int BasicRaycast::getHitCount() const { return (int)mRayList.size(); }
+
+
+	BasicRaycast::BasicRaycastInfo BasicRaycast::getFirstHit() const
+	{
+		//return the closest hit...
+		BasicRaycast::BasicRaycastInfo ret;
+
+		Ogre::Real dist = 10000.0;
+
+		RaycastInfoList::const_iterator it;
+		for (it = mRayList.begin(); it != mRayList.end(); it++)
+		{
+			if (it->mDistance < dist)
+			{
+				dist = it->mDistance;
+				ret = (*it);
+			}
+		}
+
+
+		return ret;
+	}
+
+
+	BasicRaycast::BasicRaycastInfo BasicRaycast::getInfoAt( unsigned int hitnum ) const
+	{
+		BasicRaycast::BasicRaycastInfo ret;
+
+		if ((hitnum < 0) || (hitnum > mRayList.size()))
+			return ret;
+
+		ret = mRayList.at(hitnum);
+
+		return ret;
+	}
+
+	bool BasicRaycast::userCallback( OgreNewt::Body* body, Ogre::Real distance, const Ogre::Vector3& normal, int collisionID )
+	{
+		// create a new infor object.
+		BasicRaycast::BasicRaycastInfo newinfo;
+
+		newinfo.mBody = body;
+		newinfo.mDistance = distance;
+		newinfo.mNormal = normal;
+		newinfo.mCollisionID = collisionID;
+
+		mRayList.push_back( newinfo );
+
+		return false;
+	}
+
+
+
 }	// end NAMESPACE OgreNewt
+

Modified: dependencies/OgreNewt/src/OgreNewt_Tools.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_Tools.cpp	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/src/OgreNewt_Tools.cpp	2007-02-28 03:27:47 UTC (rev 3086)
@@ -11,6 +11,7 @@
 	{
 		// this takes a matrix returned by Newton, and creates a Quaternion
 		// and position Vector3, which is more meaningful for Ogre.
+		using namespace Ogre;
 		quat = Quaternion( Matrix3(	matrix[0], matrix[4], matrix[8],
 						matrix[1], matrix[5], matrix[9],
 						matrix[2], matrix[6], matrix[10] ) );
@@ -23,6 +24,7 @@
 	{
 		// this takes a Quaternion and a Vector3 and creates a float array
 		// which is more meaningful to Newton.
+		using namespace Ogre;
 		Matrix3 rot;
 		Vector3 xcol, ycol, zcol;
 		
@@ -243,3 +245,4 @@
 
 
 }
+

Modified: dependencies/OgreNewt/src/OgreNewt_TreeCollisionSerializer.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_TreeCollisionSerializer.cpp	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/src/OgreNewt_TreeCollisionSerializer.cpp	2007-02-28 03:27:47 UTC (rev 3086)
@@ -2,7 +2,7 @@
 #include <OgreNewt_CollisionPrimitives.h>
 
 #include "Ogre.h"
-using namespace Ogre;
+
 namespace OgreNewt
 {
   TreeCollisionSerializer::TreeCollisionSerializer()
@@ -20,8 +20,7 @@
     mpfFile=fopen(filename.c_str(),"wb");
     if (!mpfFile)
     {
-      OGRE_EXCEPT(Exception::ERR_INVALIDPARAMS, "Unable to open file " + filename + " for writing",
-		  "TreeCollisionSerializer::exportTreeCollision");
+      OGRE_EXCEPT(Ogre::Exception::ERR_INVALIDPARAMS, "Unable to open file " + filename + " for writing","TreeCollisionSerializer::exportTreeCollision");
     }
     NewtonTreeCollisionSerialize(collision->m_col,&TreeCollisionSerializer::_newtonSerializeCallback,this);
   }

Modified: dependencies/OgreNewt/src/OgreNewt_World.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_World.cpp	2007-02-28 03:00:28 UTC (rev 3085)
+++ dependencies/OgreNewt/src/OgreNewt_World.cpp	2007-02-28 03:27:47 UTC (rev 3086)
@@ -97,3 +97,4 @@
 
 
 }
+



From natoka at mail.berlios.de  Wed Feb 28 04:31:50 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Wed, 28 Feb 2007 04:31:50 +0100
Subject: [Dsa-hl-svn] r3087 - rl/trunk/engine/core/src
Message-ID: <200702280331.l1S3VoD2017406@sheep.berlios.de>

Author: natoka
Date: 2007-02-28 04:31:48 +0100 (Wed, 28 Feb 2007)
New Revision: 3087

Modified:
   rl/trunk/engine/core/src/DotSceneLoader.cpp
Log:
indentation fix

Modified: rl/trunk/engine/core/src/DotSceneLoader.cpp
===================================================================
--- rl/trunk/engine/core/src/DotSceneLoader.cpp	2007-02-28 03:27:47 UTC (rev 3086)
+++ rl/trunk/engine/core/src/DotSceneLoader.cpp	2007-02-28 03:31:48 UTC (rev 3087)
@@ -922,9 +922,9 @@
                                     false));
                     //orientation, pos));
                     LOG_DEBUG(Logger::CORE, " physical_body 'convexhull' f?r Entity '"+entName+"' erstellt. ");
-                    }
-                    else if (physical_body.compare("mesh") == 0 || physical_body.compare("auto"))
-                    {
+                }
+                else if (physical_body.compare("mesh") == 0 || physical_body.compare("auto"))
+                {
                     collision = OgreNewt::CollisionPtr(new OgreNewt::CollisionPrimitives::TreeCollision(
                                     thisWorld, newEnt, false));
                     LOG_DEBUG(Logger::CORE, " physical_body 'mesh' f?r Entity '"+entName+"' erstellt. ");



From chrber at mail.berlios.de  Wed Feb 28 13:25:07 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Wed, 28 Feb 2007 13:25:07 +0100
Subject: [Dsa-hl-svn] r3088 - in rl/trunk: engine/script/swig
	engine/ui/include engine/ui/src plugins/openaldriver/src
Message-ID: <200702281225.l1SCP7nL012391@sheep.berlios.de>

Author: chrber
Date: 2007-02-28 13:25:00 +0100 (Wed, 28 Feb 2007)
New Revision: 3088

Modified:
   rl/trunk/engine/script/swig/RlUi.swig
   rl/trunk/engine/ui/include/MainMenuWindow.h
   rl/trunk/engine/ui/include/Makefile.am
   rl/trunk/engine/ui/include/SoundDriverConfigComponent.h
   rl/trunk/engine/ui/include/WindowFactory.h
   rl/trunk/engine/ui/src/AboutWindow.cpp
   rl/trunk/engine/ui/src/MainMenuWindow.cpp
   rl/trunk/engine/ui/src/Makefile.am
   rl/trunk/engine/ui/src/SoundDriverConfigComponent.cpp
   rl/trunk/engine/ui/src/WindowFactory.cpp
   rl/trunk/plugins/openaldriver/src/OpenALDriverDllMain.cpp
Log:
First step of integreating the GUI part of the ConfigurationManager; at the moment, you get a nice window and that's all
Fixed the copyright date in the AboutWindow


Modified: rl/trunk/engine/script/swig/RlUi.swig
===================================================================
--- rl/trunk/engine/script/swig/RlUi.swig	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/engine/script/swig/RlUi.swig	2007-02-28 12:25:00 UTC (rev 3088)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2006 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -24,7 +24,7 @@
 private:
 	CharacterController(rl::Actor* camera, rl::Actor* character);
 public:
-	enum ControllerType 
+	enum ControllerType
 	{
 		CTRL_NONE = 1,
 		CTRL_FREEFLIGHT,
@@ -34,7 +34,7 @@
         CTRL_VANITY_MODE,
 		CTRL_COMBAT,
 	};
-	
+
 	rl::CharacterController::ControllerType getType();
 
      /**
@@ -43,7 +43,7 @@
        */
     void toggleViewMode();
     void resetCamera();
-        
+
 };
 
 class CutsceneCharacterController : public CharacterController
@@ -64,12 +64,12 @@
     void lookAt(const Ogre::Vector3& point);
 };
 
-class UiSubsystem 
+class UiSubsystem
 {
 public:
     static UiSubsystem& getSingleton(void);
 	void initializeSubsystem();
-	    
+
 	rl::Person* getActiveCharacter();
 	void setActiveCharacter(rl::Person* chara);
 
@@ -116,18 +116,18 @@
 	void showMessageWindow(const rl::CeGuiString& message);
     void showPlaylist();
 	void showPopupMessage(int popupTypes);
-    void showSoundConfig();
+	void showGameSettings();
 
 	void toggleConsole();
 	void toggleDebugWindow();
 	void toggleGameLogWindow();
 	void toggleCharacterStateWindow();
 	void toggleInGameGlobalMenu();
-	void toggleInventoryWindow();	
+	void toggleInventoryWindow();
 
 	void checkForErrors();
 	rl::GameLoggerWindow* getGameLogger();
-	
+
     void showNextDebugWindowPage();
 };
 
@@ -143,10 +143,10 @@
 %{
 static swig_type_info *CharacterController_dynamic_cast(void **ptr)
 {
-    rl::CharacterController **ppCharacterController = 
+    rl::CharacterController **ppCharacterController =
         reinterpret_cast<rl::CharacterController**>(ptr);
 
-    rl::CutsceneCharacterController *pCutSceneCC = 
+    rl::CutsceneCharacterController *pCutSceneCC =
         dynamic_cast<rl::CutsceneCharacterController*>(*ppCharacterController);
     if (pCutSceneCC != NULL) {
         *ptr=reinterpret_cast<void*>(pCutSceneCC);

Modified: rl/trunk/engine/ui/include/MainMenuWindow.h
===================================================================
--- rl/trunk/engine/ui/include/MainMenuWindow.h	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/engine/ui/include/MainMenuWindow.h	2007-02-28 12:25:00 UTC (rev 3088)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -21,7 +21,7 @@
 #include <elements/CEGUIMenuItem.h>
 
 namespace rl {
-	
+
 	class ContentModule;
 	class MainMenuEngineWindow;
 
@@ -36,14 +36,13 @@
 
 	private:
 		bool handleChooseModule(CEGUI::MenuItem* it, ContentModule* module);
-		bool handleGraphicOptions();
-		bool handleSoundOptions();
 		bool handleStart();
 		bool handleQuit();
-		
+		bool handleSettings();
+
 		bool handleKey(const CEGUI::EventArgs& evt);
 		void fillModules();
-		
+
 		ContentModule* mActiveModule;
 		MainMenuEngineWindow* mEngineWindow;
 	};

Modified: rl/trunk/engine/ui/include/Makefile.am
===================================================================
--- rl/trunk/engine/ui/include/Makefile.am	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/engine/ui/include/Makefile.am	2007-02-28 12:25:00 UTC (rev 3088)
@@ -9,6 +9,7 @@
 	CommandExecutor.h \
 	CommandMapper.h \
 	CommandMapperWindow.h \
+	ConfigComponent.h \
 	Console.h \
 	CutsceneCharacterController.h \
 	DataLoadingProgressWindow.h \
@@ -17,6 +18,7 @@
 	DialogCharacterController.h \
 	FreeFlightCharacterController.h \
 	GameLoggerWindow.h \
+	GameSettings.h \
 	InfoPopup.h \
 	InGameMenuWindow.h \
 	InputManager.h \
@@ -30,8 +32,8 @@
 	LogWindow.h \
 	ObjectDescriptionWindow.h \
 	PlaylistWindow.h \
+	RenderSystemConfigComponent.h \
 	Selector.h \
-	SoundConfig.h \
 	SoundDriverConfigComponent.h \
 	SubtitleWindow.h \
 	UiPrerequisites.h \

Modified: rl/trunk/engine/ui/include/SoundDriverConfigComponent.h
===================================================================
--- rl/trunk/engine/ui/include/SoundDriverConfigComponent.h	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/engine/ui/include/SoundDriverConfigComponent.h	2007-02-28 12:25:00 UTC (rev 3088)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -18,33 +18,26 @@
 #define _SoundDriverConfigComponent_H_
 
 #include "UiPrerequisites.h"
+#include "ConfigComponent.h"
 
-#include <CEGUIWindow.h>
-
 namespace rl {
 
 	class SoundDriver;
 
-	class _RlUiExport SoundDriverConfigComponent
+	class _RlUiExport SoundDriverConfigComponent : public ConfigComponent
 	{
 	public:
-		SoundDriverConfigComponent(const CeGuiString& xmlfile);
+		SoundDriverConfigComponent(const CEGUI::String& xmlfile);
 		virtual ~SoundDriverConfigComponent();
 
-		const CeGuiString getDriverName() const;
-        void addTo(CEGUI::Window* parent);
-        void setVisible(bool visible);
         virtual void apply() = 0;
         virtual void resetToDefaults() = 0;
         virtual void readDriverData() = 0;
+		const CEGUI::String getDriverName() const;
 
 	protected:
 		virtual SoundDriver* getDriver() const = 0;
         virtual void initialize() = 0;
-
-    private:
-        CeGuiString mXmlFile;
-        CEGUI::Window* mWindow;
 	};
 }
 

Modified: rl/trunk/engine/ui/include/WindowFactory.h
===================================================================
--- rl/trunk/engine/ui/include/WindowFactory.h	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/engine/ui/include/WindowFactory.h	2007-02-28 12:25:00 UTC (rev 3088)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -50,11 +50,10 @@
 	class LogWindow;
 	class ObjectDescriptionWindow;
 	class Person;
-	class SoundConfig;
-	class SoundDriverConfigComponent;
 	class WindowUpdater;
     class MainMenuWindow;
     class CloseConfirmationWindow;
+    class GameSettings;
 
 	class _RlUiExport WindowFactory : public Ogre::Singleton<WindowFactory>
 	{
@@ -93,7 +92,10 @@
 		void showObjectName(GameObject* object);
 		void showPlaylist();
 		void showPopupMessage(int popupTypes);
-		void showSoundConfig();
+		/**
+		 * Creates a GameSettings object and displays its layout file on screen
+		 */
+		void showGameSettings();
 
 		void toggleConsole();
 		void toggleDebugWindow();
@@ -101,9 +103,9 @@
 		void toggleCharacterStateWindow();
 		void toggleInGameGlobalMenu();
 		void toggleInventoryWindow();
-		
+
 		InventoryWindow* getInventoryWindow();
-		
+
 		void checkForErrors();
 		GameLoggerWindow* getGameLogger();
 
@@ -116,8 +118,6 @@
         /// Change shown DebugWindow page
         void showNextDebugWindowPage();
 
-		void registerSoundConfigComponent(SoundDriverConfigComponent* wnd);
-
 	private:
         void logAllWindows();
 
@@ -135,11 +135,9 @@
 		GameObject* mShownObject;
 		ObjectDescriptionWindow* mObjectDescriptionWindow;
         DataLoadingProgressWindow* mDataLoadingProgressWindow;
-		SoundConfig* mSoundConfig;
         MainMenuWindow* mMainMenuWindow;
         CloseConfirmationWindow* mCloseConfirmationWindow;
-
-        std::vector<SoundDriverConfigComponent*> mSoundConfigComponents;
+        GameSettings* mGameSettings;
     };
 }
 

Modified: rl/trunk/engine/ui/src/AboutWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/AboutWindow.cpp	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/engine/ui/src/AboutWindow.cpp	2007-02-28 12:25:00 UTC (rev 3088)
@@ -24,7 +24,7 @@
 AboutWindow::AboutWindow() :
     CeGuiWindow("aboutwindow.xml", WND_MOUSE_INPUT)
 {
-    getWindow("AboutWindow/Text")->setText("Rastullahs Lockenpracht\n\nCopyright 2003-2006 Team Pantheon\
+    getWindow("AboutWindow/Text")->setText("Rastullahs Lockenpracht\n\nCopyright 2003-2007 Team Pantheon\
 \n\nBenutzte Bibliotheken: Ogre, fmod, Newton, boost, ...");
     getWindow("AboutWindow/EngineText")->setText(
         CoreSubsystem::getSingleton().getEngineVersionString()

Modified: rl/trunk/engine/ui/src/MainMenuWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/MainMenuWindow.cpp	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/engine/ui/src/MainMenuWindow.cpp	2007-02-28 12:25:00 UTC (rev 3088)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -37,17 +37,17 @@
 		mEngineWindow(enginewindow)
 	{
 		getWindow("MainMenu/Game/Start")->subscribeEvent(
-			MenuItem::EventClicked, 
+			MenuItem::EventClicked,
 			boost::bind(&MainMenuWindow::handleStart, this));
 
 		getWindow("MainMenu/Game/Quit")->subscribeEvent(
-			MenuItem::EventClicked, 
+			MenuItem::EventClicked,
 			boost::bind(&MainMenuWindow::handleQuit, this));
-            
-        getWindow("MainMenu/Options/Sound")->subscribeEvent(
-            MenuItem::EventClicked,
-            boost::bind(&MainMenuWindow::handleSoundOptions, this));
-		
+
+		getWindow("MainMenu/Options")->subscribeEvent(
+			MenuItem::EventClicked,
+			boost::bind(&MainMenuWindow::handleSettings, this));
+
 		fillModules();
 
         mWindow->moveToBack();
@@ -65,7 +65,7 @@
 		ModuleMap modules = CoreSubsystem::getSingleton().getAllModules();
 		mActiveModule = CoreSubsystem::getSingleton().getActiveAdventureModule();
 
-		for(ModuleMap::iterator modIt = modules.begin();	
+		for(ModuleMap::iterator modIt = modules.begin();
 			modIt != modules.end(); modIt++)
 		{
 			ContentModule* mod = (*modIt).second;
@@ -76,15 +76,15 @@
 					mActiveModule = mod;
 
 				MenuItem* it = static_cast<MenuItem*>(
-					CEGUI::WindowManager::getSingleton().createWindow("RastullahLook/MenuItem", 
+					CEGUI::WindowManager::getSingleton().createWindow("RastullahLook/MenuItem",
 					getNamePrefix()+"MainMenu/Modules/" + mod->getId()));
-				
+
 				if (mod == mActiveModule)
 					it->setText(mod->getName() + " *");
 				else
 					it->setText(mod->getName());
 				modulesMenu->addItem(it);
-				
+
 				it->subscribeEvent(
 					MenuItem::EventClicked,
 					boost::bind(&MainMenuWindow::handleChooseModule, this, it, mod));
@@ -95,7 +95,7 @@
 	bool MainMenuWindow::handleChooseModule(MenuItem* it, ContentModule* module)
 	{
 		MenuBase* modulesMenu = getMenu("MainMenu/Modules/Menu");
-		
+
 		ItemEntry* itOld = NULL;
 		for (size_t i=0; i<modulesMenu->getItemCount(); i++)
 		{
@@ -109,7 +109,7 @@
 		itOld->setText(mActiveModule->getName());
 
 		mActiveModule = module;
-		it->setText(module->getName()+" *");	
+		it->setText(module->getName()+" *");
 
 		return true;
 	}
@@ -130,9 +130,9 @@
 		return true;
 	}
 
-	bool MainMenuWindow::handleGraphicOptions()
+	bool MainMenuWindow::handleSettings()
 	{
-		return true;
+		WindowFactory::getSingleton().showGameSettings();
 	}
 
 	void MainMenuWindow::setVisible(bool visible, bool destroyAfterHide)
@@ -140,12 +140,4 @@
 		CeGuiWindow::setVisible(visible, destroyAfterHide);
 		mEngineWindow->setVisible(visible, destroyAfterHide);
 	}
-	
-	bool MainMenuWindow::handleSoundOptions()
-	{
-		WindowFactory::getSingleton().showSoundConfig();
-		return true;
-	}
-
-	
 }

Modified: rl/trunk/engine/ui/src/Makefile.am
===================================================================
--- rl/trunk/engine/ui/src/Makefile.am	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/engine/ui/src/Makefile.am	2007-02-28 12:25:00 UTC (rev 3088)
@@ -19,6 +19,7 @@
 	CommandExecutor.cpp \
 	CommandMapper.cpp \
 	CommandMapperWindow.cpp \
+	ConfigComponent.cpp \
 	Console.cpp \
 	CutsceneCharacterController.cpp \
 	DataLoadingProgressWindow.cpp \
@@ -27,6 +28,7 @@
 	DialogWindow.cpp \
 	FreeFlightCharacterController.cpp \
 	GameLoggerWindow.cpp \
+	GameSettings.cpp \
 	InfoPopup.cpp \
 	InGameMenuWindow.cpp \
 	InputManager.cpp \
@@ -39,8 +41,8 @@
 	MovementCharacterController.cpp \
 	ObjectDescriptionWindow.cpp \
 	PlaylistWindow.cpp \
+	RenderSystemConfigComponent.cpp \
 	Selector.cpp \
-	SoundConfig.cpp \
 	SoundDriverConfigComponent.cpp \
 	SubtitleWindow.cpp \
 	UiSubsystem.cpp \

Modified: rl/trunk/engine/ui/src/SoundDriverConfigComponent.cpp
===================================================================
--- rl/trunk/engine/ui/src/SoundDriverConfigComponent.cpp	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/engine/ui/src/SoundDriverConfigComponent.cpp	2007-02-28 12:25:00 UTC (rev 3088)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -21,34 +21,16 @@
 
 namespace rl {
 	SoundDriverConfigComponent::SoundDriverConfigComponent(const CeGuiString& xmlfile)
-        : mXmlFile(xmlfile)
+        : ConfigComponent(xmlfile)
 	{
 	}
 
     SoundDriverConfigComponent::~SoundDriverConfigComponent()
     {
-        if (mWindow != NULL)
-        {
-            mWindow->getParent()->removeChildWindow(mWindow);
-            CEGUI::WindowManager::getSingleton().destroyWindow(mWindow);
-            CEGUI::WindowManager::getSingleton().cleanDeadPool();
-        }
     }
 
 	const CeGuiString SoundDriverConfigComponent::getDriverName() const
 	{
 		return getDriver()->getName();
 	}
-
-    void SoundDriverConfigComponent::addTo(CEGUI::Window* parent)
-    {
-        mWindow = CEGUI::WindowManager::getSingleton().loadWindowLayout(mXmlFile);
-        parent->addChildWindow(mWindow);
-        initialize();
-    }
-
-    void SoundDriverConfigComponent::setVisible(bool visible)
-    {
-        mWindow->setVisible(visible);
-    }
 }

Modified: rl/trunk/engine/ui/src/WindowFactory.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowFactory.cpp	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/engine/ui/src/WindowFactory.cpp	2007-02-28 12:25:00 UTC (rev 3088)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -32,6 +32,7 @@
 #include "Exception.h"
 #include "GameLoggerWindow.h"
 #include "GameObject.h"
+#include "GameSettings.h"
 #include "InfoPopup.h"
 #include "InGameMenuWindow.h"
 #include "InputManager.h"
@@ -48,8 +49,6 @@
 #include "QuestBook.h"
 #include "RubyInterpreter.h"
 #include "RulesSubsystem.h"
-#include "SoundConfig.h"
-#include "SoundDriverConfigComponent.h"
 #include "SubtitleWindow.h"
 #include "UiSubsystem.h"
 #include "WindowManager.h"
@@ -75,11 +74,11 @@
 		mConsole = new Console();
 		mDebugWindow = new DebugWindow();
 		CoreSubsystem::getSingleton().getRubyInterpreter()->
-			setOutputFunction( 
+			setOutputFunction(
 				(VALUE(*)(...))&WindowFactory::consoleWrite );
 
 		mLogWindow = new LogWindow();
-			      
+
 		mGameLogger = new GameLoggerWindow();
 		mCharacterStateWindow = new CharacterStateWindow();
 		mInGameMenuWindow = new InGameMenuWindow();
@@ -88,15 +87,8 @@
 		mJournalWindow = new JournalWindow();
 		mInfoPopup = new InfoPopup();
 		mObjectDescriptionWindow = new ObjectDescriptionWindow();
-		mSoundConfig = new SoundConfig();
-        for (std::vector<SoundDriverConfigComponent*>::iterator it = 
-            mSoundConfigComponents.begin(); it != mSoundConfigComponents.end(); it++)
-        {
-            mSoundConfig->registerDriverConfig(*it);
-        }
-        
         mCloseConfirmationWindow = NULL;
-        
+
 		RulesSubsystem::getSingleton().getQuestBook()->addQuestListener(mJournalWindow);
 		RulesSubsystem::getSingleton().getQuestBook()->addQuestListener(mInfoPopup);
         mDataLoadingProgressWindow = new DataLoadingProgressWindow();
@@ -125,7 +117,7 @@
 		delete mConsole;
         delete mMainMenuWindow;
         delete mCloseConfirmationWindow;
-        delete mSoundConfig;
+        delete mGameSettings;
 	}
 
 	WindowFactory& WindowFactory::getSingleton()
@@ -150,9 +142,9 @@
 
 	bool WindowFactory::showInputOptionsMenu(Creature* actionHolder)
 	{
-		CommandMapperWindow* wnd = 
+		CommandMapperWindow* wnd =
 			new CommandMapperWindow(
-				actionHolder, 
+				actionHolder,
 				NULL);
 		wnd->setVisible(true);
 
@@ -203,7 +195,7 @@
 		return mInventoryWindow;
 	}
 
-	
+
 	void WindowFactory::showCharacterSheet()
 	{
 		if (mCharacterSheet->isVisible())
@@ -269,7 +261,7 @@
         PlaylistWindow* wnd = new PlaylistWindow();
         wnd->setVisible(true);
     }
-	
+
 	void WindowFactory::checkForErrors()
 	{
 		if (Logger::getSingleton().isErrorPresent())
@@ -288,9 +280,9 @@
     {
         if( mCloseConfirmationWindow != NULL )
             delete mCloseConfirmationWindow;
-        
+
         mCloseConfirmationWindow = new CloseConfirmationWindow();
-		LOG_MESSAGE2(Logger::UI, "Start", "UiSubsystem::requestExit");         
+		LOG_MESSAGE2(Logger::UI, "Start", "UiSubsystem::requestExit");
 		mCloseConfirmationWindow->setVisible(true);
 	}
 
@@ -351,14 +343,14 @@
 		}
 
 		UiSubsystem::getSingleton().setCharacterController(CharacterController::CTRL_DIALOG);
-		DialogCharacterController* controller = 
+		DialogCharacterController* controller =
 			dynamic_cast<DialogCharacterController*>(
 				UiSubsystem::getSingleton().getCharacterController());
 
 		SubtitleWindow* subtitleWnd = new SubtitleWindow();
 		controller->setSubtitleWindow(subtitleWnd);
 		controller->setDialogPartner(bot->getDialogPartner()->getActor());
-		
+
 		DialogWindow* dialogWnd = new DialogWindow(bot, mGameLogger, controller);
 		controller->setDialogWindow(dialogWnd);
 		dialogWnd->start();
@@ -369,11 +361,6 @@
 		(new LogWindow())->setVisible(true);
 	}
 
-	void WindowFactory::showSoundConfig()
-	{
-		mSoundConfig->setVisible(true);
-	}
-
 	void WindowFactory::showPopupMessage(int popupTypes)
 	{
 		if (popupTypes & WindowFactory::ICON_ERROR)
@@ -428,13 +415,11 @@
         mDebugWindow->showNextPage();
     }
 
-	void WindowFactory::registerSoundConfigComponent(SoundDriverConfigComponent* wnd)
+	void WindowFactory::showGameSettings()
 	{
-        mSoundConfigComponents.push_back(wnd);
-		if (mSoundConfig != NULL)
-        {
-            mSoundConfig->registerDriverConfig(wnd);
-        }
+		// Create the game settings window and show it
+		mGameSettings = new GameSettings();
+		mGameSettings->setVisible(true);
 	}
 
     void WindowFactory::logAllWindows()

Modified: rl/trunk/plugins/openaldriver/src/OpenALDriverDllMain.cpp
===================================================================
--- rl/trunk/plugins/openaldriver/src/OpenALDriverDllMain.cpp	2007-02-28 03:31:48 UTC (rev 3087)
+++ rl/trunk/plugins/openaldriver/src/OpenALDriverDllMain.cpp	2007-02-28 12:25:00 UTC (rev 3088)
@@ -1,6 +1,6 @@
 /* This source file is part of Rastullahs Lockenpracht.
  * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
- * 
+ *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the Clarified Artistic License.
  *
@@ -35,7 +35,7 @@
 		SoundManager::getSingleton().registerDriver(openaldriver);
 
 		// Register config window
-		WindowFactory::getSingleton().registerSoundConfigComponent(new OpenALConfig(openaldriver));
+		// WindowFactory::getSingleton().registerSoundConfigComponent(new OpenALConfig(openaldriver));
 	}
 
 	//Called when unloading plugins



From chrber at mail.berlios.de  Wed Feb 28 13:26:04 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Wed, 28 Feb 2007 13:26:04 +0100
Subject: [Dsa-hl-svn] r3089 - in modules/common: gui/windows scripts
Message-ID: <200702281226.l1SCQ41o012436@sheep.berlios.de>

Author: chrber
Date: 2007-02-28 13:26:01 +0100 (Wed, 28 Feb 2007)
New Revision: 3089

Added:
   modules/common/gui/windows/gamesettings.xml
Modified:
   modules/common/gui/windows/mainmenuwindow.xml
   modules/common/scripts/global-actions.rb
   modules/common/scripts/global-settings.rb
Log:
CEGUI layout changes and additions for ConfigurationManager
Script changes to make it work


Added: modules/common/gui/windows/gamesettings.xml
===================================================================
--- modules/common/gui/windows/gamesettings.xml	2007-02-28 12:25:00 UTC (rev 3088)
+++ modules/common/gui/windows/gamesettings.xml	2007-02-28 12:26:01 UTC (rev 3089)
@@ -0,0 +1,114 @@
+<?xml version="1.0" encoding="utf-8"?>
+<GUILayout xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="GUILayout.xsd">
+   <Window Type="RastullahLook/FrameWindow" Name="GameOptionsWindow">
+      <Property Name="UnifiedPosition" Value="{{0,0},{0,0}}"/>
+      <Property Name="UnifiedSize" Value="{{0,640},{0,480}}"/>
+      <Property Name="Text" Value="Game settings"/>
+
+      <Window Type="RastullahLook/TabControl" Name="GameOptionsWindow/Tabs">
+         <Property Name="UnifiedPosition" Value="{{0,20},{0,20}}"/>
+         <Property Name="UnifiedSize" Value="{{0,600},{0,440}}"/>
+
+         <Window Type="DefaultGUISheet" Name="GameOptionsWindow/General">
+            <Property Name="UnifiedPosition" Value="{{0,0},{0,0}}"/>
+            <Property Name="UnifiedSize" Value="{{1,0},{1,0}}"/>
+            <Property Name="Text" Value="General"/>
+         </Window>
+
+         <Window Type="DefaultGUISheet" Name="GameOptionsWindow/Video">
+            <Property Name="UnifiedPosition" Value="{{0,0},{0,0}}"/>
+            <Property Name="UnifiedSize" Value="{{1,0},{1,0}}"/>
+            <Property Name="Text" Value="Video"/>
+
+            <Window Type="RastullahLook/StaticText" Name="GameOptionsWindow/Video/LabelRenderer">
+               <Property Name="UnifiedPosition" Value="{{0.05,0},{0.05,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.9,0},{0,20}}"/>
+               <Property Name="Text" Value="Rendersystem"/>
+            </Window>
+
+            <Window Type="RastullahLook/Combobox" Name="GameOptionsWindow/Video/TableRenderer">
+               <Property Name="UnifiedPosition" Value="{{0.25,0},{0.05,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.7,0},{0,50}}"/>
+            </Window>
+
+            <Window Type="RastullahLook/StaticText" Name="GameOptionsWindow/Video/LabelResolution">
+               <Property Name="UnifiedPosition" Value="{{0.05,0},{0.15,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.9,0},{0,20}}"/>
+               <Property Name="Text" Value="Resolution"/>
+            </Window>
+
+            <Window Type="RastullahLook/Combobox" Name="GameOptionsWindow/Video/TableResolution">
+               <Property Name="UnifiedPosition" Value="{{0.25,0},{0.15,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.7,0},{0,50}}"/>
+            </Window>
+
+            <Window Type="RastullahLook/StaticText" Name="GameOptionsWindow/Video/LabelFullscreen">
+               <Property Name="UnifiedPosition" Value="{{0.05,0},{0.25,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.9,0},{0,20}}"/>
+               <Property Name="Text" Value="Fullscreen"/>
+            </Window>
+
+            <Window Type="RastullahLook/Checkbox" Name="GameOptionsWindow/Video/Fullscreen">
+               <Property Name="UnifiedPosition" Value="{{0.25,0},{0.25,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0,20},{0,20}}"/>
+            </Window>
+         </Window>
+
+         <Window Type="DefaultGUISheet" Name="GameOptionsWindow/Sound">
+            <Property Name="UnifiedPosition" Value="{{0,0},{0,0}}"/>
+            <Property Name="UnifiedSize" Value="{{1,0},{1,0}}"/>
+            <Property Name="Text" Value="Sound"/>
+
+            <Window Type="RastullahLook/StaticText" Name="GameOptionsWindow/Sound/LabelSoundDriver">
+               <Property Name="UnifiedPosition" Value="{{0.05,0},{0.05,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.9,0},{0,20}}"/>
+               <Property Name="Text" Value="Sound driver"/>
+            </Window>
+
+            <Window Type="RastullahLook/Combobox" Name="GameOptionsWindow/Sound/TableSoundDriver">
+               <Property Name="UnifiedPosition" Value="{{0.25,0},{0.05,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.7,0},{0,50}}"/>
+            </Window>
+
+            <Window Type="RastullahLook/StaticText" Name="GameOptionsWindow/Sound/LabelVolumeMaster">
+               <Property Name="Text" Value="Master volume"/>
+               <Property Name="UnifiedPosition" Value="{{0.05,0},{0.15,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.9,0},{0,20}}"/>
+            </Window>
+
+            <Window Type="RastullahLook/HorizontalScrollbar" Name="GameOptionsWindow/Sound/VolumeMaster">
+               <Property Name="UnifiedPosition" Value="{{0.25,0},{0.15,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.7,0},{0,20}}"/>
+            </Window>
+
+            <Window Type="RastullahLook/StaticText" Name="GameOptionsWindow/Sound/LabelVolumeMusic">
+               <Property Name="Text" Value="Music volume"/>
+               <Property Name="UnifiedPosition" Value="{{0.05,0},{0.25,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.9,0},{0,20}}"/>
+            </Window>
+
+            <Window Type="RastullahLook/HorizontalScrollbar" Name="GameOptionsWindow/Sound/VolumeMusic">
+               <Property Name="UnifiedPosition" Value="{{0.25,0},{0.25,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.7,0},{0,20}}"/>
+            </Window>
+
+            <Window Type="RastullahLook/StaticText" Name="GameOptionsWindow/Sound/LabelVolumeSound">
+               <Property Name="Text" Value="Sound volume"/>
+               <Property Name="UnifiedPosition" Value="{{0.05,0},{0.35,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.9,0},{0,20}}"/>
+            </Window>
+
+            <Window Type="RastullahLook/HorizontalScrollbar" Name="GameOptionsWindow/Sound/VolumeSound">
+               <Property Name="UnifiedPosition" Value="{{0.25,0},{0.35,0}}"/>
+               <Property Name="UnifiedSize" Value="{{0.7,0},{0,20}}"/>
+            </Window>
+         </Window>
+
+         <Window Type="DefaultGUISheet" Name="GameOptionsWindow/Input">
+            <Property Name="UnifiedPosition" Value="{{0,0},{0,0}}"/>
+            <Property Name="UnifiedSize" Value="{{1,0},{1,0}}"/>
+            <Property Name="Text" Value="Input"/>
+         </Window>
+      </Window>
+   </Window>
+</GUILayout>

Modified: modules/common/gui/windows/mainmenuwindow.xml
===================================================================
--- modules/common/gui/windows/mainmenuwindow.xml	2007-02-28 12:25:00 UTC (rev 3088)
+++ modules/common/gui/windows/mainmenuwindow.xml	2007-02-28 12:26:01 UTC (rev 3089)
@@ -14,7 +14,7 @@
 					<Property Name="AutoResizeEnabled" Value="True"/>
 
 					<Window Type="RastullahLook/MenuItem" Name="MainMenu/Game/Start">
-						<Property Name="Text" Value="Start"/>	
+						<Property Name="Text" Value="Start"/>
 					</Window>
 					<Window Type="RastullahLook/MenuItem" Name="MainMenu/Game/Quit">
 						<Property Name="Text" Value="Beenden"/>
@@ -25,7 +25,7 @@
 			<Window Type="RastullahLook/MenuItem" Name="MainMenu/Modules">
 				<Property Name="Text" Value="Module"/>
 				<Property Name="MousePassThroughEnabled" Value="False"/>
-				
+
 				<Window Type="RastullahLook/PopupMenu" Name="MainMenu/Modules/Menu">
 					<Property Name="Text" Value="Module"/>
 					<Property Name="AutoResizeEnabled" Value="True"/>
@@ -34,18 +34,6 @@
 
 			<Window Type="RastullahLook/MenuItem" Name="MainMenu/Options">
 				<Property Name="Text" Value="Optionen"/>
-				<Window Type="RastullahLook/PopupMenu" Name="MainMenu/Options/Menu">
-					<Property Name="AutoResizeEnabled" Value="True"/>
-					<Window Type="RastullahLook/MenuItem" Name="MainMenu/Options/Graphics">
-						<Property Name="Text" Value="Grafikoptionen"/>
-					</Window>
-					<Window Type="RastullahLook/MenuItem" Name="MainMenu/Options/Sound">
-						<Property Name="Text" Value="Soundoptionen"/>
-					</Window>
-					<Window Type="RastullahLook/MenuItem" Name="MainMenu/Options/Shortcuts">
-						<Property Name="Text" Value="Tastaturbelegung"/>
-					</Window>
-				</Window>
 			</Window>
 
 		</Window>

Modified: modules/common/scripts/global-actions.rb
===================================================================
--- modules/common/scripts/global-actions.rb	2007-02-28 12:25:00 UTC (rev 3088)
+++ modules/common/scripts/global-actions.rb	2007-02-28 12:26:01 UTC (rev 3089)
@@ -24,7 +24,7 @@
   def initialize
     super("act_toggleconsole", "Konsole zeigen/verstecken")
   end
-  
+
   def doAction(object, actor, target)
     $WF.toggleConsole()
   end
@@ -75,7 +75,7 @@
 	def initialize
 		super("act_toggleinventorywindow", "Das Inventar des aktiven Helden anzeigen")
 	end
-	
+
 	def doAction(object, actor, target)
 		$WF.toggleInventoryWindow()
 	end
@@ -96,7 +96,7 @@
   def initialize
     super("act_makescreenshot", "Screenshot erstellen")
   end
-  
+
   def doAction(object, actor, target)
     $CORE.makeScreenshot("rastullah");
   end
@@ -106,7 +106,7 @@
   def initialize
     super("act_togglecollisiondebug", "Kollisionsk?rper anzeigen")
   end
-  
+
   def doAction(object, actor, target)
     $PM.toggleDebugMode();
   end
@@ -117,7 +117,7 @@
     super("act_toggledebugvisualisation", "Debug-Helfer anzeigen")
     @isShown = false
   end
-  
+
   def doAction(object, actor, target)
     if @isShown:
       $DVM.hideAll()
@@ -172,7 +172,7 @@
   def initialize
     super(GameObject.DEFAULT_VIEW_OBJECT_ACTION, "Anschauen")
   end
-  
+
   def doAction(object, actor, target)
     $WF.showDescriptionWindow(object)
   end
@@ -182,19 +182,19 @@
   def initialize
     super("act_showaboutwindow", "?ber")
   end
-  
+
   def doAction(object, actor, target)
     $WF.showAboutWindow()
   end
 end
 
-class ShowSoundConfigAction < Action
+class ShowGameSettingsAction < Action
   def initialize
-    super("act_showsoundconfig", "Soundeinstellungen")
+    super("act_showgamesettings", "Spieleinstellungen")
   end
 
   def doAction(object, actor, target)
-    $WF.showSoundConfig()
+    $WF.showGameSettings()
   end
 end
 
@@ -222,7 +222,7 @@
   def initialize
     super("act_closecurrentwindow", "Oberstes Fenster schliessen")
   end
-  
+
   def doAction(object, actor, target)
     WindowManager.getSingleton().closeTopWindow()
   end

Modified: modules/common/scripts/global-settings.rb
===================================================================
--- modules/common/scripts/global-settings.rb	2007-02-28 12:25:00 UTC (rev 3088)
+++ modules/common/scripts/global-settings.rb	2007-02-28 12:26:01 UTC (rev 3089)
@@ -24,7 +24,7 @@
       $act19 = ShowAboutWindowAction.new()
       $act20 = ShowJournalWindowAction.new()
       $act21 = CloseCurrentWindowAction.new()
-      $act22 = ShowSoundConfigAction.new()
+      $act22 = ShowGameSettingsAction.new()
       $act23 = ShowLogfilesAction.new()
       $act24 = ToggleCharacterControllerAction.new()
       $act25 = ShowNextDebugWindowPageAction.new()



From chrber at mail.berlios.de  Wed Feb 28 15:31:47 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Wed, 28 Feb 2007 15:31:47 +0100
Subject: [Dsa-hl-svn] r3090 - rl/trunk/engine/ui/include
Message-ID: <200702281431.l1SEVl4i008877@sheep.berlios.de>

Author: chrber
Date: 2007-02-28 15:31:45 +0100 (Wed, 28 Feb 2007)
New Revision: 3090

Added:
   rl/trunk/engine/ui/include/GameSettings.h
   rl/trunk/engine/ui/include/RenderSystemConfigComponent.h
Log:
Added missing header files


Added: rl/trunk/engine/ui/include/GameSettings.h
===================================================================
--- rl/trunk/engine/ui/include/GameSettings.h	2007-02-28 12:26:01 UTC (rev 3089)
+++ rl/trunk/engine/ui/include/GameSettings.h	2007-02-28 14:31:45 UTC (rev 3090)
@@ -0,0 +1,93 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+#ifndef GAMESETTINGS_H
+#define GAMESETTINGS_H
+
+#include "CeGuiWindow.h"
+#include "SoundDriverConfigComponent.h"
+#include "RenderSystemConfigComponent.h"
+
+namespace rl
+{
+	class GameSettings : CeGuiWindow
+	{
+	public:
+		/**
+		 * Constructs a new GameSettings object.
+		 *
+		 * Creates the connections between callback functions and CEGUI
+		 * widgets.
+		 */
+		GameSettings();
+		~GameSettings();
+
+		void registerSoundDriverConfig(SoundDriverConfigComponent* scc);
+		void registerRenderSystemConfig(RenderSystemConfigComponent* rcc);
+
+		void setVisible(bool visible, bool destroyAfterHide = false);
+
+	private:
+		/**
+		 * Helper function, which sets the configuration component for a
+		 * given driver name
+		 *
+		 * Searchs both ConfigComponent lists and activates the correct
+		 * ConfigComponent
+		 *
+		 * @param drivername Name of the driver to set the ConfigComponent for
+		 */
+		void setConfigComponent(const CEGUI::String& drivername);
+
+		/**
+		 * Is called if the user clicks the Apply button
+		 *
+		 * Collects all settings and passes those on to the
+		 * different subsystems like CoreSubsystem or Ogre::RenderSystem.
+		 */
+		bool onApply();
+
+		/**
+		 * Is called if the user clicks the Cancel button
+		 *
+		 * No changes made to any of the configuration pages will be saved.
+		 */
+		bool onCancel();
+
+		/**
+		 * Is called if the user selects a new sounddriver
+		 *
+		 * Initialises the selected sound driver and loads the specific
+		 * configuration section.
+		 */
+		bool onSoundDriverChanged();
+
+		/**
+		 * Is called if the user selected a new rendersystem
+		 *
+		 * Initialises the selected render system and loads the specific
+		 * configuration section.
+		 */
+		bool onRenderSystemChanged();
+
+		std::list<SoundDriverConfigComponent*> mSoundDriverConfigs;   //!< List of registered sounddriver configuration components
+		SoundDriverConfigComponent* mCurrentSoundDriverConfig;        //!< Configuration component of currently selected sound driver
+		std::list<RenderSystemConfigComponent*> mRenderSystemConfigs; //!< List of registered rendersystem configuration components
+		RenderSystemConfigComponent* mCurrentRenderSystemConfig;      //!< Configuration component of currently selected rendersystem
+	};
+}
+
+#endif

Added: rl/trunk/engine/ui/include/RenderSystemConfigComponent.h
===================================================================
--- rl/trunk/engine/ui/include/RenderSystemConfigComponent.h	2007-02-28 12:26:01 UTC (rev 3089)
+++ rl/trunk/engine/ui/include/RenderSystemConfigComponent.h	2007-02-28 14:31:45 UTC (rev 3090)
@@ -0,0 +1,44 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+#ifndef _RenderSystemConfigComponent_H_
+#define _RenderSystemConfigComponent_H_
+
+#include "UiPrerequisites.h"
+#include "ConfigComponent.h"
+
+namespace rl
+{
+	class Ogre::RenderSystem;
+
+	class _RlUiExport RenderSystemConfigComponent : public ConfigComponent
+	{
+	public:
+		RenderSystemConfigComponent(const CEGUI::String& xmlfile);
+		virtual ~RenderSystemConfigComponent();
+
+        virtual void apply() = 0;
+        virtual void resetToDefaults() = 0;
+        virtual void readDriverData() = 0;
+		const CEGUI::String getDriverName() const;
+
+	protected:
+		virtual Ogre::RenderSystem* getDriver() const = 0;
+        virtual void initialize() = 0;
+	};
+}
+
+#endif // _RenderSystemConfigComponent_H_



From chrber at mail.berlios.de  Wed Feb 28 15:36:05 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Wed, 28 Feb 2007 15:36:05 +0100
Subject: [Dsa-hl-svn] r3091 - rl/trunk/engine/ui/include
Message-ID: <200702281436.l1SEa5rR009509@sheep.berlios.de>

Author: chrber
Date: 2007-02-28 15:36:02 +0100 (Wed, 28 Feb 2007)
New Revision: 3091

Added:
   rl/trunk/engine/ui/include/ConfigComponent.h
Log:
Headers, take 2


Added: rl/trunk/engine/ui/include/ConfigComponent.h
===================================================================
--- rl/trunk/engine/ui/include/ConfigComponent.h	2007-02-28 14:31:45 UTC (rev 3090)
+++ rl/trunk/engine/ui/include/ConfigComponent.h	2007-02-28 14:36:02 UTC (rev 3091)
@@ -0,0 +1,67 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+#ifndef CONFIGCOMPONENT_H
+#define CONFIGCOMPONENT_H
+
+#include <CEGUIWindow.h>
+
+#include "UiPrerequisites.h"
+
+namespace rl
+{
+	/**
+	 * Abstract class defining the shared functionality between all
+	 * concrete ConfigComponent implementation classes.
+	 */
+	class _RlUiExport ConfigComponent
+	{
+	public:
+		ConfigComponent(const CEGUI::String& xmlfile);
+		virtual ~ConfigComponent();
+
+		/**
+		 * Adds this component's root window to a given parent window
+		 *
+		 * @param parent Pointer to parent CEGUI::Window
+		 */
+		void addTo(CEGUI::Window* parent);
+
+		/**
+		 * Sets the visibilty state of the window
+		 *
+		 * @param visible true sets window to visible, false the other way
+		 */
+		void setVisible(bool visible);
+
+	protected:
+		/**
+		 * Returns the name for the given driver
+		 */
+		virtual const CEGUI::String getDriverName() const = 0;
+
+		/**
+		 * Initialises the driver of the concrete ConfigComponent
+		 */
+		virtual void initialize() = 0;
+
+	private:
+		CEGUI::Window* mWindow;   //!< CEGUI root window for this component
+		CEGUI::String mXmlFile;   //!< CEGUI layout file
+	};
+}
+
+#endif // CONFIGCOMPONENT_H



From chrber at mail.berlios.de  Wed Feb 28 15:41:50 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Wed, 28 Feb 2007 15:41:50 +0100
Subject: [Dsa-hl-svn] r3092 - rl/trunk/engine/ui/src
Message-ID: <200702281441.l1SEfoTs010413@sheep.berlios.de>

Author: chrber
Date: 2007-02-28 15:41:46 +0100 (Wed, 28 Feb 2007)
New Revision: 3092

Added:
   rl/trunk/engine/ui/src/ConfigComponent.cpp
   rl/trunk/engine/ui/src/GameSettings.cpp
   rl/trunk/engine/ui/src/RenderSystemConfigComponent.cpp
Log:
Missing files, take 3


Added: rl/trunk/engine/ui/src/ConfigComponent.cpp
===================================================================
--- rl/trunk/engine/ui/src/ConfigComponent.cpp	2007-02-28 14:36:02 UTC (rev 3091)
+++ rl/trunk/engine/ui/src/ConfigComponent.cpp	2007-02-28 14:41:46 UTC (rev 3092)
@@ -0,0 +1,51 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+#include <CEGUIWindowManager.h>
+
+#include "ConfigComponent.h"
+
+namespace rl
+{
+	ConfigComponent::ConfigComponent(const CEGUI::String& xmlfile)
+	{
+		// Set layout file for component
+		mXmlFile = xmlfile;
+	}
+
+	ConfigComponent::~ConfigComponent()
+	{
+		// Free components root window and its child windows
+        if (mWindow != NULL)
+        {
+            mWindow->getParent()->removeChildWindow(mWindow);
+            CEGUI::WindowManager::getSingleton().destroyWindow(mWindow);
+            CEGUI::WindowManager::getSingleton().cleanDeadPool();
+        }
+	}
+
+	void ConfigComponent::addTo(CEGUI::Window* parent)
+	{
+        mWindow = CEGUI::WindowManager::getSingleton().loadWindowLayout(mXmlFile);
+        parent->addChildWindow(mWindow);
+        initialize();
+	}
+
+	void ConfigComponent::setVisible(bool visible)
+	{
+		mWindow->setVisible(visible);
+	}
+}

Added: rl/trunk/engine/ui/src/GameSettings.cpp
===================================================================
--- rl/trunk/engine/ui/src/GameSettings.cpp	2007-02-28 14:36:02 UTC (rev 3091)
+++ rl/trunk/engine/ui/src/GameSettings.cpp	2007-02-28 14:41:46 UTC (rev 3092)
@@ -0,0 +1,98 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+#include <boost/bind.hpp>
+
+#include "GameSettings.h"
+
+namespace rl
+{
+	GameSettings::GameSettings()
+	    : CeGuiWindow("gamesettings.xml", WND_MOUSE_INPUT)
+	{
+		// Connect actions to callbacks
+		getWindow()->subscribeEvent(CEGUI::FrameWindow::EventCloseClicked,
+		                            boost::bind(&GameSettings::onCancel, this));
+
+		centerWindow();
+	}
+
+	GameSettings::~GameSettings()
+	{
+	}
+
+	void GameSettings::registerSoundDriverConfig(SoundDriverConfigComponent* scc)
+	{
+	}
+
+	void GameSettings::registerRenderSystemConfig(RenderSystemConfigComponent* rcc)
+	{
+	}
+
+	void GameSettings::setVisible(bool visible, bool destroyAfterHide)
+	{
+		CeGuiWindow::setVisible(visible, destroyAfterHide);
+	}
+
+	void GameSettings::setConfigComponent(const CEGUI::String& drivername)
+	{
+		// Search the sound configuration component list
+		for (std::list<SoundDriverConfigComponent*>::iterator it = mSoundDriverConfigs.begin();
+		     it != mSoundDriverConfigs.end(); it++)
+		{
+			SoundDriverConfigComponent* cmp = *it;
+			if (drivername == cmp->getDriverName() && mCurrentSoundDriverConfig != cmp)
+			{
+				if (mCurrentSoundDriverConfig != NULL)
+				{
+					mCurrentSoundDriverConfig->setVisible(false);
+				}
+				cmp->setVisible(true);
+				mCurrentSoundDriverConfig = cmp;
+				return;
+			}
+		}
+
+		// Search the graphic configuration component list
+		for (std::list<RenderSystemConfigComponent*>::iterator it = mRenderSystemConfigs.begin();
+		     it != mRenderSystemConfigs.end(); it++)
+		{
+			RenderSystemConfigComponent* cmp = *it;
+			if (drivername == cmp->getDriverName() && mCurrentRenderSystemConfig != cmp)
+			{
+				if (mCurrentRenderSystemConfig != NULL)
+				{
+					mCurrentRenderSystemConfig->setVisible(false);
+				}
+				cmp->setVisible(true);
+				mCurrentRenderSystemConfig = cmp;
+				return;
+			}
+		}
+	}
+
+	bool GameSettings::onApply()
+	{
+	}
+
+	bool GameSettings::onCancel()
+	{
+	}
+
+	bool GameSettings::onSoundDriverChanged()
+	{
+	}
+}

Added: rl/trunk/engine/ui/src/RenderSystemConfigComponent.cpp
===================================================================
--- rl/trunk/engine/ui/src/RenderSystemConfigComponent.cpp	2007-02-28 14:36:02 UTC (rev 3091)
+++ rl/trunk/engine/ui/src/RenderSystemConfigComponent.cpp	2007-02-28 14:41:46 UTC (rev 3092)
@@ -0,0 +1,36 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. http://www.team-pantheon.de
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
+ */
+
+#include "RenderSystemConfigComponent.h"
+
+#include <OgreRenderSystem.h>
+#include <CEGUIWindowManager.h>
+
+namespace rl {
+	RenderSystemConfigComponent::RenderSystemConfigComponent(const CeGuiString& xmlfile)
+        : ConfigComponent(xmlfile)
+	{
+	}
+
+    RenderSystemConfigComponent::~RenderSystemConfigComponent()
+    {
+    }
+
+	const CEGUI::String RenderSystemConfigComponent::getDriverName() const
+	{
+		return getDriver()->getName();
+	}
+}



From zero-gravity at mail.berlios.de  Wed Feb 28 15:46:53 2007
From: zero-gravity at mail.berlios.de (zero-gravity at mail.berlios.de)
Date: Wed, 28 Feb 2007 15:46:53 +0100
Subject: [Dsa-hl-svn] r3093 - in rl/trunk/engine: core/include ui ui/src
Message-ID: <200702281446.l1SEkrte011028@sheep.berlios.de>

Author: zero-gravity
Date: 2007-02-28 15:46:48 +0100 (Wed, 28 Feb 2007)
New Revision: 3093

Modified:
   rl/trunk/engine/core/include/CoreSubsystem.h
   rl/trunk/engine/ui/RlUI2005.vcproj
   rl/trunk/engine/ui/src/GameSettings.cpp
   rl/trunk/engine/ui/src/MainMenuWindow.cpp
Log:
Fixed vs_2005 buildfiles
Added missing return values
Corrected line endings

Modified: rl/trunk/engine/core/include/CoreSubsystem.h
===================================================================
--- rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-28 14:41:46 UTC (rev 3092)
+++ rl/trunk/engine/core/include/CoreSubsystem.h	2007-02-28 14:46:48 UTC (rev 3093)
@@ -86,9 +86,9 @@
     void setDeveloperMode(bool developerMode);
     bool getDeveloperMode() const;
 
-    /// Returns time since game started in Milliseconds.
-    /// Uses GameLoop::getClock internally, function is here to allow access from ruby.
-    unsigned long getClock();
+    /// Returns time since game started in Milliseconds.
+    /// Uses GameLoop::getClock internally, function is here to allow access from ruby.
+    unsigned long getClock();
 
     /** Saves a timestamped jpg Screenshot
         @param sName The filename (extended with the timestamp)

Modified: rl/trunk/engine/ui/RlUI2005.vcproj
===================================================================
--- rl/trunk/engine/ui/RlUI2005.vcproj	2007-02-28 14:41:46 UTC (rev 3092)
+++ rl/trunk/engine/ui/RlUI2005.vcproj	2007-02-28 14:46:48 UTC (rev 3093)
@@ -362,6 +362,10 @@
 				>
 			</File>
 			<File
+				RelativePath=".\include\GameSettings.h"
+				>
+			</File>
+			<File
 				RelativePath=".\include\InputManager.h"
 				>
 			</File>
@@ -429,6 +433,10 @@
 					>
 				</File>
 				<File
+					RelativePath=".\include\ConfigComponent.h"
+					>
+				</File>
+				<File
 					RelativePath=".\include\Console.h"
 					>
 				</File>
@@ -489,6 +497,10 @@
 					>
 				</File>
 				<File
+					RelativePath=".\include\RenderSystemConfigComponent.h"
+					>
+				</File>
+				<File
 					RelativePath=".\include\SoundConfig.h"
 					>
 				</File>
@@ -527,6 +539,10 @@
 				>
 			</File>
 			<File
+				RelativePath=".\src\GameSettings.cpp"
+				>
+			</File>
+			<File
 				RelativePath=".\src\InputManager.cpp"
 				>
 			</File>
@@ -590,6 +606,10 @@
 					>
 				</File>
 				<File
+					RelativePath=".\src\ConfigComponent.cpp"
+					>
+				</File>
+				<File
 					RelativePath=".\src\Console.cpp"
 					>
 				</File>
@@ -650,6 +670,10 @@
 					>
 				</File>
 				<File
+					RelativePath=".\src\RenderSystemConfigComponent.cpp"
+					>
+				</File>
+				<File
 					RelativePath=".\src\SoundConfig.cpp"
 					>
 				</File>

Modified: rl/trunk/engine/ui/src/GameSettings.cpp
===================================================================
--- rl/trunk/engine/ui/src/GameSettings.cpp	2007-02-28 14:41:46 UTC (rev 3092)
+++ rl/trunk/engine/ui/src/GameSettings.cpp	2007-02-28 14:46:48 UTC (rev 3093)
@@ -86,13 +86,16 @@
 
 	bool GameSettings::onApply()
 	{
+        return true;
 	}
 
 	bool GameSettings::onCancel()
 	{
+        return true;
 	}
 
 	bool GameSettings::onSoundDriverChanged()
 	{
+        return true;
 	}
 }

Modified: rl/trunk/engine/ui/src/MainMenuWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/MainMenuWindow.cpp	2007-02-28 14:41:46 UTC (rev 3092)
+++ rl/trunk/engine/ui/src/MainMenuWindow.cpp	2007-02-28 14:46:48 UTC (rev 3093)
@@ -133,6 +133,7 @@
 	bool MainMenuWindow::handleSettings()
 	{
 		WindowFactory::getSingleton().showGameSettings();
+        return true;
 	}
 
 	void MainMenuWindow::setVisible(bool visible, bool destroyAfterHide)



From chrber at mail.berlios.de  Wed Feb 28 21:09:35 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Wed, 28 Feb 2007 21:09:35 +0100
Subject: [Dsa-hl-svn] r3094 - dependencies/OgreNewt
Message-ID: <200702282009.l1SK9ZBZ017462@sheep.berlios.de>

Author: chrber
Date: 2007-02-28 21:09:33 +0100 (Wed, 28 Feb 2007)
New Revision: 3094

Modified:
   dependencies/OgreNewt/configure.in
Log:
Updated the needed Ogre version for OgreNewt


Modified: dependencies/OgreNewt/configure.in
===================================================================
--- dependencies/OgreNewt/configure.in	2007-02-28 14:46:48 UTC (rev 3093)
+++ dependencies/OgreNewt/configure.in	2007-02-28 20:09:33 UTC (rev 3094)
@@ -30,7 +30,7 @@
 AC_FUNC_MEMCMP
 
 # Check for Ogre
-PKG_CHECK_MODULES(OGRE, OGRE >= 1.2.0)
+PKG_CHECK_MODULES(OGRE, OGRE >= 1.4.0)
 
 # Check for Newton header
 AC_CHECK_HEADERS(Newton.h, , AC_MSG_ERROR([Can't find Newton headers]))



From natoka at mail.berlios.de  Wed Feb 28 21:22:47 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Wed, 28 Feb 2007 21:22:47 +0100
Subject: [Dsa-hl-svn] r3095 - dependencies/OgreNewt/include/OgreNewt
Message-ID: <200702282022.l1SKMlhV019426@sheep.berlios.de>

Author: natoka
Date: 2007-02-28 21:22:39 +0100 (Wed, 28 Feb 2007)
New Revision: 3095

Modified:
   dependencies/OgreNewt/include/OgreNewt/OgreNewt_Prerequisites.h
Log:
including stddef.h again for needed size_t type


Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt_Prerequisites.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt_Prerequisites.h	2007-02-28 20:09:33 UTC (rev 3094)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt_Prerequisites.h	2007-02-28 20:22:39 UTC (rev 3095)
@@ -27,6 +27,7 @@
 #else // Linux / Mac OSX etc
 #   define _OgreNewtExport
 #   define _CDECL
+#   include <stddef.h>
 #endif
 
 #endif 



From natoka at mail.berlios.de  Wed Feb 28 21:29:43 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Wed, 28 Feb 2007 21:29:43 +0100
Subject: [Dsa-hl-svn] r3096 - dependencies/OgreNewt/src
Message-ID: <200702282029.l1SKThAX019925@sheep.berlios.de>

Author: natoka
Date: 2007-02-28 21:29:41 +0100 (Wed, 28 Feb 2007)
New Revision: 3096

Modified:
   dependencies/OgreNewt/src/OgreNewt_BasicJoints.cpp
Log:
adding prerequisites include again (needed for linux)


Modified: dependencies/OgreNewt/src/OgreNewt_BasicJoints.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_BasicJoints.cpp	2007-02-28 20:22:39 UTC (rev 3095)
+++ dependencies/OgreNewt/src/OgreNewt_BasicJoints.cpp	2007-02-28 20:29:41 UTC (rev 3096)
@@ -1,3 +1,4 @@
+#include <OgreNewt_Prerequisites.h>
 #include <Newton.h>
 #include <OgreNewt_BasicJoints.h>
 #include <OgreNewt_World.h>



From chrber at mail.berlios.de  Wed Feb 28 21:37:48 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Wed, 28 Feb 2007 21:37:48 +0100
Subject: [Dsa-hl-svn] r3097 - dependencies/OgreNewt/src
Message-ID: <200702282037.l1SKbmHx020689@sheep.berlios.de>

Author: chrber
Date: 2007-02-28 21:37:44 +0100 (Wed, 28 Feb 2007)
New Revision: 3097

Modified:
   dependencies/OgreNewt/src/OgreNewt_CollisionPrimitives.cpp
   dependencies/OgreNewt/src/OgreNewt_ContactCallback.cpp
   dependencies/OgreNewt/src/OgreNewt_Joint.cpp
   dependencies/OgreNewt/src/OgreNewt_MaterialID.cpp
   dependencies/OgreNewt/src/OgreNewt_MaterialPair.cpp
   dependencies/OgreNewt/src/OgreNewt_TreeCollisionSerializer.cpp
   dependencies/OgreNewt/src/OgreNewt_Vehicle.cpp
   dependencies/OgreNewt/src/OgreNewt_World.cpp
Log:
Added missing OgreNewt_Prerequisites.h


Modified: dependencies/OgreNewt/src/OgreNewt_CollisionPrimitives.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_CollisionPrimitives.cpp	2007-02-28 20:29:41 UTC (rev 3096)
+++ dependencies/OgreNewt/src/OgreNewt_CollisionPrimitives.cpp	2007-02-28 20:37:44 UTC (rev 3097)
@@ -1,3 +1,4 @@
+#include <OgreNewt_Prerequisites.h>
 #include <OgreNewt_CollisionPrimitives.h>
 #include <OgreNewt_Tools.h>
 

Modified: dependencies/OgreNewt/src/OgreNewt_ContactCallback.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_ContactCallback.cpp	2007-02-28 20:29:41 UTC (rev 3096)
+++ dependencies/OgreNewt/src/OgreNewt_ContactCallback.cpp	2007-02-28 20:37:44 UTC (rev 3097)
@@ -1,3 +1,4 @@
+#include <OgreNewt_Prerequisites.h>
 #include <OgreNewt_ContactCallback.h>
 #include <OgreNewt_Body.h>
 

Modified: dependencies/OgreNewt/src/OgreNewt_Joint.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_Joint.cpp	2007-02-28 20:29:41 UTC (rev 3096)
+++ dependencies/OgreNewt/src/OgreNewt_Joint.cpp	2007-02-28 20:37:44 UTC (rev 3097)
@@ -1,3 +1,4 @@
+#include <OgreNewt_Prerequisites.h>
 #include <assert.h>
 #include <OgreNewt_Joint.h>
 

Modified: dependencies/OgreNewt/src/OgreNewt_MaterialID.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_MaterialID.cpp	2007-02-28 20:29:41 UTC (rev 3096)
+++ dependencies/OgreNewt/src/OgreNewt_MaterialID.cpp	2007-02-28 20:37:44 UTC (rev 3097)
@@ -1,3 +1,4 @@
+#include <OgreNewt_Prerequisites.h>
 #include <OgreNewt_MaterialID.h>
 #include <OgreNewt_World.h>
 

Modified: dependencies/OgreNewt/src/OgreNewt_MaterialPair.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_MaterialPair.cpp	2007-02-28 20:29:41 UTC (rev 3096)
+++ dependencies/OgreNewt/src/OgreNewt_MaterialPair.cpp	2007-02-28 20:37:44 UTC (rev 3097)
@@ -1,3 +1,4 @@
+#include <OgreNewt_Prerequisites.h>
 #include <OgreNewt_MaterialPair.h>
 #include <OgreNewt_World.h>
 #include <OgreNewt_MaterialID.h>

Modified: dependencies/OgreNewt/src/OgreNewt_TreeCollisionSerializer.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_TreeCollisionSerializer.cpp	2007-02-28 20:29:41 UTC (rev 3096)
+++ dependencies/OgreNewt/src/OgreNewt_TreeCollisionSerializer.cpp	2007-02-28 20:37:44 UTC (rev 3097)
@@ -1,3 +1,4 @@
+#include <OgreNewt_Prerequisites.h>
 #include <OgreNewt_TreeCollisionSerializer.h>
 #include <OgreNewt_CollisionPrimitives.h>
 

Modified: dependencies/OgreNewt/src/OgreNewt_Vehicle.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_Vehicle.cpp	2007-02-28 20:29:41 UTC (rev 3096)
+++ dependencies/OgreNewt/src/OgreNewt_Vehicle.cpp	2007-02-28 20:37:44 UTC (rev 3097)
@@ -1,3 +1,4 @@
+#include <OgreNewt_Prerequisites.h>
 #include <OgreNewt_Vehicle.h>
 #include <OgreNewt_Tools.h>
 

Modified: dependencies/OgreNewt/src/OgreNewt_World.cpp
===================================================================
--- dependencies/OgreNewt/src/OgreNewt_World.cpp	2007-02-28 20:29:41 UTC (rev 3096)
+++ dependencies/OgreNewt/src/OgreNewt_World.cpp	2007-02-28 20:37:44 UTC (rev 3097)
@@ -1,3 +1,4 @@
+#include <OgreNewt_Prerequisites.h>
 #include <OgreNewt_World.h>
 #include <OgreNewt_Body.h>
 #include <OgreNewt_MaterialID.h>



From chrber at mail.berlios.de  Wed Feb 28 22:24:42 2007
From: chrber at mail.berlios.de (chrber at mail.berlios.de)
Date: Wed, 28 Feb 2007 22:24:42 +0100
Subject: [Dsa-hl-svn] r3098 - rl/trunk/engine/core/src
Message-ID: <200702282124.l1SLOg1A025325@sheep.berlios.de>

Author: chrber
Date: 2007-02-28 22:24:40 +0100 (Wed, 28 Feb 2007)
New Revision: 3098

Modified:
   rl/trunk/engine/core/src/PhysicsGenericContactCallback.cpp
Log:
Added missing OgreNewt_Prerequisites.h


Modified: rl/trunk/engine/core/src/PhysicsGenericContactCallback.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicsGenericContactCallback.cpp	2007-02-28 20:37:44 UTC (rev 3097)
+++ rl/trunk/engine/core/src/PhysicsGenericContactCallback.cpp	2007-02-28 21:24:40 UTC (rev 3098)
@@ -14,6 +14,8 @@
 *  http://www.jpaulmorrison.com/fbp/artistic2.htm.
 */
 
+#include <OgreNewt_Prerequisites.h>
+
 #include "PhysicsGenericContactCallback.h"
 #include "Actor.h"
 #include "PhysicalThing.h"



From natoka at mail.berlios.de  Wed Feb 28 22:45:47 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Wed, 28 Feb 2007 22:45:47 +0100
Subject: [Dsa-hl-svn] r3099 - in dependencies/OgreNewt: . include/OgreNewt
Message-ID: <200702282145.l1SLjlZG027544@sheep.berlios.de>

Author: natoka
Date: 2007-02-28 22:45:42 +0100 (Wed, 28 Feb 2007)
New Revision: 3099

Modified:
   dependencies/OgreNewt/DifferencesToOgreCVS.txt
   dependencies/OgreNewt/include/OgreNewt/OgreNewt.h
Log:
adding prerequisites include to OgreNewt.h
documented the importance of the other includes

Modified: dependencies/OgreNewt/DifferencesToOgreCVS.txt
===================================================================
--- dependencies/OgreNewt/DifferencesToOgreCVS.txt	2007-02-28 21:24:40 UTC (rev 3098)
+++ dependencies/OgreNewt/DifferencesToOgreCVS.txt	2007-02-28 21:45:42 UTC (rev 3099)
@@ -3,6 +3,10 @@
 have been merged, other pieces might not be mentioned. Therefore this is 
 essentially an overview and by no means complete.
 
+A general information: Many .cpp files contain a #include <OgreNewt_Prerequisites.h>
+additionally OgreNewt.h too. This include is essential for linux (and may become
+essential for windows too).
+
 if you don't understand some parts, feel free to contact me
 
 So enjoy reading it,
@@ -12,9 +16,13 @@
 better approach (which means less files to parse for the compiler).
 
 OgreNewt.h:
+	rl:
+
+	cvs:
 	comment changes
-	rl - #include Framelisterner ...
+	#include Framelisterner 	[not necessary] natoka
 
+-------------------------------------------------------------------------------
 OgreNewt_BasicJoints.h:
 	rl:
 	currently: missing a _OgreNewtExport for CustomRigidJoint
@@ -24,7 +32,7 @@
 	cvs:
 	#include <Newton.h>
 	m_Accel bug (not initialized)
-
+-------------------------------------------------------------------------------
 OgreNewt_Body.h:
 	rl:
 	#include Prerequisites
@@ -54,12 +62,12 @@
 
 	cvs:
 	look above
-
+-------------------------------------------------------------------------------
 OgreNewt_BodyIterator.h:
 	rl:
 	cvs:
 	newline at end of file
-
+-------------------------------------------------------------------------------
 OgreNewt_Collision.h:
 	rl:
 	typedef of CollisionPtr
@@ -67,7 +75,7 @@
 OgreNewt_Collision.cpp:
 	rl:
 	uses CollisionPtr
-
+-------------------------------------------------------------------------------
 OgreNewt_CollisionPrimitives.h:
 	rl:
 	#include Prerequisites
@@ -91,14 +99,14 @@
 	finalize()		[takeover] (should be inlined)
 	unsigned int in loops	[takeover] natoka
 	TreecollisionSceneParser[takeover] natoka
-
+-------------------------------------------------------------------------------
 OgreNewt_ContactCallback.h:
 	rl:
 	#include Prerequisites
 
 	cvs:
 	material and contact get functions for newton mat & contanct
-
+-------------------------------------------------------------------------------
 OgreNewt_Debugger.h:
 	rl:
 	destructor defined with code
@@ -115,28 +123,28 @@
 	uses detachAllObjects		[takeover] natoka
 		in showLines() and
 		hideLines()
-
+-------------------------------------------------------------------------------
 OgreNewt_Joint.h:
 	rl:
 	#include Prerequisites
-
+-------------------------------------------------------------------------------
 OgreNewt_MaterialID.h:
 	rl:
 	#include Prerequisites
 OgreNewt_MaterialID.cpp:
 	rl:
 	missing newline			[fixed] natoka
-
+-------------------------------------------------------------------------------
 OgreNewt_MaterialPair.h:
 	rl:
 	#include Prerequisites
 OgreNewt_MaterialPair.cpp:
 	newline at end
-
+-------------------------------------------------------------------------------
 OgreNewt_Prerequisites.h:
 	rl:
 	include <stddef.h>
-
+-------------------------------------------------------------------------------
 OgreNewt_RayCast.h:
 	rl:
 	BasicRaycastInfo() constructor in the header [fixed] natoka
@@ -149,7 +157,7 @@
 		user callback pre-filter function
 	newtonRaycastPrefilter()		[takeover] natoka
 	nonvirtual ~BasicRaycast()
-
+-------------------------------------------------------------------------------
 OgreNewt_Tools.h:
 	rl:
 	uses 'using namespace Ogre' 	(args)	[fixed]	natoka
@@ -166,8 +174,7 @@
 	uses 'using namespace Ogre' within source (cleaner) [takeover] natoka
 	CollisionPointDistance()
 		globalpt parameter misused for calculation
-
-
+-------------------------------------------------------------------------------
 OgreNewt_TreeCollisionSerializer.h
 	rl:
 	#include Prerequisites
@@ -177,12 +184,11 @@
 
 	cvs:
 	explicitly uses Ogre:: everywere 	[takeover] natoka
-
-
+-------------------------------------------------------------------------------
 OgreNewt_Vehicle.h:
 	rl:
 	#include Prerequisites
-
+-------------------------------------------------------------------------------
 OgreNewt_World.h:
 	rl:
 	uses fastdelegates

Modified: dependencies/OgreNewt/include/OgreNewt/OgreNewt.h
===================================================================
--- dependencies/OgreNewt/include/OgreNewt/OgreNewt.h	2007-02-28 21:24:40 UTC (rev 3098)
+++ dependencies/OgreNewt/include/OgreNewt/OgreNewt.h	2007-02-28 21:45:42 UTC (rev 3099)
@@ -19,6 +19,7 @@
 #ifndef _INCLUDE_OGRENEWT_
 #define _INCLUDE_OGRENEWT_
 
+#include "OgreNewt_Prerequisites.h"
 
 #include "OgreNewt_World.h"
 #include "OgreNewt_Collision.h"



From natoka at mail.berlios.de  Wed Feb 28 22:50:23 2007
From: natoka at mail.berlios.de (natoka at mail.berlios.de)
Date: Wed, 28 Feb 2007 22:50:23 +0100
Subject: [Dsa-hl-svn] r3100 - dependencies/OgreNewt
Message-ID: <200702282150.l1SLoN28028335@sheep.berlios.de>

Author: natoka
Date: 2007-02-28 22:50:18 +0100 (Wed, 28 Feb 2007)
New Revision: 3100

Modified:
   dependencies/OgreNewt/OgreNewt_Main.vcproj
Log:
added documents - readme files to project as docu

Modified: dependencies/OgreNewt/OgreNewt_Main.vcproj
===================================================================
--- dependencies/OgreNewt/OgreNewt_Main.vcproj	2007-02-28 21:45:42 UTC (rev 3099)
+++ dependencies/OgreNewt/OgreNewt_Main.vcproj	2007-02-28 21:50:18 UTC (rev 3100)
@@ -4,6 +4,7 @@
 	Version="8,00"
 	Name="OgreNewt_Main"
 	ProjectGUID="{DCC3C838-9803-497D-8C32-A5985644CCE9}"
+	RootNamespace="OgreNewt_Main"
 	Keyword="Win32Proj"
 	>
 	<Platforms>
@@ -318,6 +319,18 @@
 			UniqueIdentifier="{67DA6AB6-F800-4c08-8B7A-83BB121AAD01}"
 			>
 		</Filter>
+		<Filter
+			Name="doc"
+			>
+			<File
+				RelativePath=".\DifferencesToOgreCVS.txt"
+				>
+			</File>
+			<File
+				RelativePath=".\README"
+				>
+			</File>
+		</Filter>
 	</Files>
 	<Globals>
 	</Globals>



