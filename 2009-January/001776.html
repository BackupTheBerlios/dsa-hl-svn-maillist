<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r4719 - in rl/branches/newton20: .	Mac/Rastullah.xcodeproj Mac/tools engine/ai engine/core	engine/core/include engine/core/include/fmod4driver	engine/core/src engine/core/src/fmod4driver engine/ui/include	engine/ui/src tools
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4719%20-%20in%20rl/branches/newton20%3A%20.%0A%09Mac/Rastullah.xcodeproj%20Mac/tools%20engine/ai%20engine/core%0A%09engine/core/include%20engine/core/include/fmod4driver%0A%09engine/core/src%20engine/core/src/fmod4driver%20engine/ui/include%0A%09engine/ui/src%20tools&In-Reply-To=%3C200901261727.n0QHR7id023826%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001775.html">
   <LINK REL="Next"  HREF="001777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r4719 - in rl/branches/newton20: .	Mac/Rastullah.xcodeproj Mac/tools engine/ai engine/core	engine/core/include engine/core/include/fmod4driver	engine/core/src engine/core/src/fmod4driver engine/ui/include	engine/ui/src tools</H1>
    <B>melven at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r4719%20-%20in%20rl/branches/newton20%3A%20.%0A%09Mac/Rastullah.xcodeproj%20Mac/tools%20engine/ai%20engine/core%0A%09engine/core/include%20engine/core/include/fmod4driver%0A%09engine/core/src%20engine/core/src/fmod4driver%20engine/ui/include%0A%09engine/ui/src%20tools&In-Reply-To=%3C200901261727.n0QHR7id023826%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r4719 - in rl/branches/newton20: .	Mac/Rastullah.xcodeproj Mac/tools engine/ai engine/core	engine/core/include engine/core/include/fmod4driver	engine/core/src engine/core/src/fmod4driver engine/ui/include	engine/ui/src tools">melven at mail.berlios.de
       </A><BR>
    <I>Mon Jan 26 18:27:07 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001775.html">[Dsa-hl-svn] r4718 - rl/trunk/Mac/tools
</A></li>
        <LI>Next message: <A HREF="001777.html">[Dsa-hl-svn] r4720 - rl/branches/newton20
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1776">[ date ]</a>
              <a href="thread.html#1776">[ thread ]</a>
              <a href="subject.html#1776">[ subject ]</a>
              <a href="author.html#1776">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: melven
Date: 2009-01-26 18:26:56 +0100 (Mon, 26 Jan 2009)
New Revision: 4719

Added:
   rl/branches/newton20/engine/core/include/fmod4driver/
   rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Driver.h
   rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Listener.h
   rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Sound.h
   rl/branches/newton20/engine/core/include/fmod4driver/Fmod4SoundStitching.h
   rl/branches/newton20/engine/core/src/fmod4driver/
   rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Driver.cpp
   rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Listener.cpp
   rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Sound.cpp
   rl/branches/newton20/engine/core/src/fmod4driver/Fmod4SoundStitching.cpp
   rl/branches/newton20/engine/ui/include/Fmod4ConfigComponent.h
   rl/branches/newton20/engine/ui/src/Fmod4ConfigComponent.cpp
Removed:
   rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Driver.h
   rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Listener.h
   rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Sound.h
   rl/branches/newton20/engine/core/include/fmod4driver/Fmod4SoundStitching.h
   rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Driver.cpp
   rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Listener.cpp
   rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Sound.cpp
   rl/branches/newton20/engine/core/src/fmod4driver/Fmod4SoundStitching.cpp
   rl/branches/newton20/plugins/
Modified:
   rl/branches/newton20/Mac/Rastullah.xcodeproj/project.pbxproj
   rl/branches/newton20/Mac/tools/renameinstalldirs.sh
   rl/branches/newton20/Rastullah2005.sln
   rl/branches/newton20/engine/ai/
   rl/branches/newton20/engine/core/CMakeLists.txt
   rl/branches/newton20/engine/core/RlCore2005.vcproj
   rl/branches/newton20/engine/core/include/PhysicsMaterialRaycast.h
   rl/branches/newton20/engine/core/src/PhysicsMaterialRaycast.cpp
   rl/branches/newton20/engine/core/src/SoundManager.cpp
   rl/branches/newton20/engine/ui/src/GameSettings.cpp
   rl/branches/newton20/tools/copy_dependencies.bat
   rl/branches/newton20/tools/copy_dlls.bat
Log:
-merged changes from trunk
-PhysicsMaterialRaycast uses now a prefilter for the materials


Modified: rl/branches/newton20/Mac/Rastullah.xcodeproj/project.pbxproj
===================================================================
--- rl/branches/newton20/Mac/Rastullah.xcodeproj/project.pbxproj	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/Mac/Rastullah.xcodeproj/project.pbxproj	2009-01-26 17:26:56 UTC (rev 4719)
@@ -439,18 +439,12 @@
 		483646C40D83D62E00912FEC /* SaveGameFileWriter.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 485A05820D71EDF20024198D /* SaveGameFileWriter.cpp */; };
 		483646C50D83D62E00912FEC /* SaveGameManager.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 485A05830D71EDF20024198D /* SaveGameManager.cpp */; };
 		483646D30D83D6DD00912FEC /* SaveGameFile.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 485A05800D71EDF20024198D /* SaveGameFile.cpp */; };
-		48365BE60D8D560E00BF3313 /* Ogre.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 444EAEBE0BD0F09900C6D4A0 /* Ogre.framework */; };
-		48365BE80D8D562D00BF3313 /* libRlCore.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 444EAB610BD0E2DA00C6D4A0 /* libRlCore.dylib */; };
-		48365BE90D8D562D00BF3313 /* libRlUi.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 444EAC3E0BD0E46000C6D4A0 /* libRlUi.dylib */; };
-		48365BEC0D8D56DC00BF3313 /* libRlCommon.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 444EAAB20BD0E0FB00C6D4A0 /* libRlCommon.dylib */; };
-		48365C950D8D56EA00BF3313 /* CEGUI.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 444EAEBD0BD0F09900C6D4A0 /* CEGUI.framework */; };
 		4836CBC90D8FB0BE002FE5D7 /* Xerces.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4836CBC80D8FB0BE002FE5D7 /* Xerces.framework */; };
 		4836CBCA0D8FB0BE002FE5D7 /* Xerces.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4836CBC80D8FB0BE002FE5D7 /* Xerces.framework */; };
 		4836CBCB0D8FB0BE002FE5D7 /* Xerces.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4836CBC80D8FB0BE002FE5D7 /* Xerces.framework */; };
 		4836CBCC0D8FB0BE002FE5D7 /* Xerces.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4836CBC80D8FB0BE002FE5D7 /* Xerces.framework */; };
 		4836CBCD0D8FB0BE002FE5D7 /* Xerces.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4836CBC80D8FB0BE002FE5D7 /* Xerces.framework */; };
 		4836CBCE0D8FB0BE002FE5D7 /* Xerces.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4836CBC80D8FB0BE002FE5D7 /* Xerces.framework */; };
-		4836CBCF0D8FB0BE002FE5D7 /* Xerces.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4836CBC80D8FB0BE002FE5D7 /* Xerces.framework */; };
 		4836F8BC0D885AAA00E3632F /* libruby.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 483646A10D83D57800912FEC /* libruby.dylib */; };
 		48380B190D800EED0013EE0C /* StartAnimationJob.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 48380B180D800EED0013EE0C /* StartAnimationJob.cpp */; };
 		48380B1A0D8010ED0013EE0C /* TimeSource.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 485A05850D71EDF20024198D /* TimeSource.cpp */; };
@@ -522,18 +516,6 @@
 		483D31800D85B3B7003477A0 /* SimpleVehicle.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 483D31710D85B3B7003477A0 /* SimpleVehicle.cpp */; };
 		483D31810D85B3B7003477A0 /* stdinc.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 483D31720D85B3B7003477A0 /* stdinc.cpp */; };
 		483D31820D85B3B7003477A0 /* WalkPathBehaviour.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 483D31730D85B3B7003477A0 /* WalkPathBehaviour.cpp */; };
-		483D869D0D8C3DA200F3629E /* Fmod4ConfigComponent.h in Headers */ = {isa = PBXBuildFile; fileRef = 483D868C0D8C3DA200F3629E /* Fmod4ConfigComponent.h */; };
-		483D869E0D8C3DA200F3629E /* Fmod4Driver.h in Headers */ = {isa = PBXBuildFile; fileRef = 483D868D0D8C3DA200F3629E /* Fmod4Driver.h */; };
-		483D869F0D8C3DA200F3629E /* Fmod4DriverPrerequisites.h in Headers */ = {isa = PBXBuildFile; fileRef = 483D868E0D8C3DA200F3629E /* Fmod4DriverPrerequisites.h */; };
-		483D86A00D8C3DA200F3629E /* Fmod4Listener.h in Headers */ = {isa = PBXBuildFile; fileRef = 483D868F0D8C3DA200F3629E /* Fmod4Listener.h */; };
-		483D86A10D8C3DA200F3629E /* Fmod4Sound.h in Headers */ = {isa = PBXBuildFile; fileRef = 483D86900D8C3DA200F3629E /* Fmod4Sound.h */; };
-		483D86A20D8C3DA200F3629E /* Fmod4SoundStitching.h in Headers */ = {isa = PBXBuildFile; fileRef = 483D86910D8C3DA200F3629E /* Fmod4SoundStitching.h */; };
-		483D86A30D8C3DA200F3629E /* Fmod4ConfigComponent.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 483D86960D8C3DA200F3629E /* Fmod4ConfigComponent.cpp */; };
-		483D86A40D8C3DA200F3629E /* Fmod4Driver.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 483D86970D8C3DA200F3629E /* Fmod4Driver.cpp */; };
-		483D86A50D8C3DA200F3629E /* Fmod4DriverDllMain.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 483D86980D8C3DA200F3629E /* Fmod4DriverDllMain.cpp */; };
-		483D86A60D8C3DA200F3629E /* Fmod4Listener.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 483D86990D8C3DA200F3629E /* Fmod4Listener.cpp */; };
-		483D86A70D8C3DA200F3629E /* Fmod4Sound.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 483D869A0D8C3DA200F3629E /* Fmod4Sound.cpp */; };
-		483D86A80D8C3DA200F3629E /* Fmod4SoundStitching.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 483D869B0D8C3DA200F3629E /* Fmod4SoundStitching.cpp */; };
 		483D87CE0D8C564400F3629E /* libRlScript.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 48570C1B0D8A6C5400096E35 /* libRlScript.dylib */; };
 		484D8D0B0E1E05F400BCFC2B /* OgreCEGUIRenderer.framework in Copy Frameworks */ = {isa = PBXBuildFile; fileRef = 444EB3720BD1784A00C6D4A0 /* OgreCEGUIRenderer.framework */; };
 		484D8D0C0E1E05F400BCFC2B /* OpenSteer.framework in Copy Frameworks */ = {isa = PBXBuildFile; fileRef = 444EB0DA0BD119BB00C6D4A0 /* OpenSteer.framework */; };
@@ -548,7 +530,6 @@
 		484D92210E1E078100BCFC2B /* libRlRules.dylib in Resources */ = {isa = PBXBuildFile; fileRef = 444EAC370BD0E44900C6D4A0 /* libRlRules.dylib */; };
 		484D92220E1E078100BCFC2B /* libRlUi.dylib in Resources */ = {isa = PBXBuildFile; fileRef = 444EAC3E0BD0E46000C6D4A0 /* libRlUi.dylib */; };
 		484D92230E1E078100BCFC2B /* libRlScript.dylib in Resources */ = {isa = PBXBuildFile; fileRef = 48570C1B0D8A6C5400096E35 /* libRlScript.dylib */; };
-		484D92240E1E078100BCFC2B /* RlFmod4Driver.bundle in Resources */ = {isa = PBXBuildFile; fileRef = 483D86700D8C3A3300F3629E /* RlFmod4Driver.bundle */; };
 		484D92250E1E078100BCFC2B /* RlScript.bundle in Resources */ = {isa = PBXBuildFile; fileRef = 483D87C90D8C55E500F3629E /* RlScript.bundle */; };
 		484FE6BA0E17BC8800FA880F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 484FE6B90E17BC8800FA880F /* Carbon.framework */; };
 		484FE6BB0E17BC8800FA880F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 484FE6B90E17BC8800FA880F /* Carbon.framework */; };
@@ -557,7 +538,6 @@
 		484FE6BE0E17BC8800FA880F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 484FE6B90E17BC8800FA880F /* Carbon.framework */; };
 		484FE6BF0E17BC8800FA880F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 484FE6B90E17BC8800FA880F /* Carbon.framework */; };
 		484FE6C00E17BC8800FA880F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 484FE6B90E17BC8800FA880F /* Carbon.framework */; };
-		484FE6C10E17BC8800FA880F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 484FE6B90E17BC8800FA880F /* Carbon.framework */; };
 		484FE6C20E17BC8800FA880F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 484FE6B90E17BC8800FA880F /* Carbon.framework */; };
 		48500B790D906A1000EAD8DB /* RlScriptExportsMac.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 48500B780D906A1000EAD8DB /* RlScriptExportsMac.cpp */; };
 		4851EA4F0EDDC93300AB79E9 /* NullSoundStitching.h in Headers */ = {isa = PBXBuildFile; fileRef = 4851EA4E0EDDC93300AB79E9 /* NullSoundStitching.h */; };
@@ -665,13 +645,11 @@
 		48A52CBF0E0EF77C008DBDD8 /* libboost_system.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 48A52CAF0E0EF55C008DBDD8 /* libboost_system.dylib */; };
 		48A52CC00E0EF77D008DBDD8 /* libboost_system.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 48A52CAF0E0EF55C008DBDD8 /* libboost_system.dylib */; };
 		48A52CC20E0EF77E008DBDD8 /* libboost_system.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 48A52CAF0E0EF55C008DBDD8 /* libboost_system.dylib */; };
-		48A52CC30E0EF785008DBDD8 /* libboost_system.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 48A52CAF0E0EF55C008DBDD8 /* libboost_system.dylib */; };
 		48B006C50ECAC05F008141C2 /* CharacterSelectionWindow.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 48B006C40ECAC05F008141C2 /* CharacterSelectionWindow.cpp */; };
 		48B006C80ECAC11D008141C2 /* CharacterSelectionWindow.h in Headers */ = {isa = PBXBuildFile; fileRef = 48B006C70ECAC11D008141C2 /* CharacterSelectionWindow.h */; };
 		48B0B0350E6534690023B198 /* PlaneNodeProcessor.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 48B0B0340E6534690023B198 /* PlaneNodeProcessor.cpp */; };
 		48B0B0370E6534810023B198 /* PlaneNodeProcessor.h in Headers */ = {isa = PBXBuildFile; fileRef = 48B0B0360E6534810023B198 /* PlaneNodeProcessor.h */; };
 		48B0B03C0E6535AB0023B198 /* libmeshmagick.dylib in Resources */ = {isa = PBXBuildFile; fileRef = 440785DD0C09D231006E496D /* libmeshmagick.dylib */; };
-		48B0B0490E65BBB30023B198 /* libfmodex.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 48B0B0480E65BBB30023B198 /* libfmodex.dylib */; };
 		48B0B04A0E65BBC10023B198 /* libfmodex.dylib in Resources */ = {isa = PBXBuildFile; fileRef = 48B0B0480E65BBB30023B198 /* libfmodex.dylib */; };
 		48B772DD0D58350B000A3B97 /* XmlProcessor.h in Headers */ = {isa = PBXBuildFile; fileRef = 48B772DA0D58350B000A3B97 /* XmlProcessor.h */; };
 		48B772DE0D58350B000A3B97 /* XmlPropertyReader.h in Headers */ = {isa = PBXBuildFile; fileRef = 48B772DB0D58350B000A3B97 /* XmlPropertyReader.h */; };
@@ -680,6 +658,15 @@
 		48B772E40D583521000A3B97 /* XmlPropertyReader.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 48B772E10D583521000A3B97 /* XmlPropertyReader.cpp */; };
 		48B772E50D583521000A3B97 /* XmlPropertyWriter.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 48B772E20D583521000A3B97 /* XmlPropertyWriter.cpp */; };
 		48C04B8A0E67DF0300CD3A7D /* PCRE.framework in Copy Frameworks */ = {isa = PBXBuildFile; fileRef = 48C04B890E67DF0300CD3A7D /* PCRE.framework */; };
+		48CA78CB0F2A511E00F8E471 /* Fmod4Driver.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 48CA78C70F2A511E00F8E471 /* Fmod4Driver.cpp */; };
+		48CA78CC0F2A511E00F8E471 /* Fmod4Listener.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 48CA78C80F2A511E00F8E471 /* Fmod4Listener.cpp */; };
+		48CA78CD0F2A511E00F8E471 /* Fmod4Sound.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 48CA78C90F2A511E00F8E471 /* Fmod4Sound.cpp */; };
+		48CA78CE0F2A511E00F8E471 /* Fmod4SoundStitching.cpp in Sources */ = {isa = PBXBuildFile; fileRef = 48CA78CA0F2A511E00F8E471 /* Fmod4SoundStitching.cpp */; };
+		48CA78D30F2A513100F8E471 /* Fmod4Driver.h in Headers */ = {isa = PBXBuildFile; fileRef = 48CA78CF0F2A513100F8E471 /* Fmod4Driver.h */; };
+		48CA78D40F2A513100F8E471 /* Fmod4Listener.h in Headers */ = {isa = PBXBuildFile; fileRef = 48CA78D00F2A513100F8E471 /* Fmod4Listener.h */; };
+		48CA78D50F2A513100F8E471 /* Fmod4Sound.h in Headers */ = {isa = PBXBuildFile; fileRef = 48CA78D10F2A513100F8E471 /* Fmod4Sound.h */; };
+		48CA78D60F2A513100F8E471 /* Fmod4SoundStitching.h in Headers */ = {isa = PBXBuildFile; fileRef = 48CA78D20F2A513100F8E471 /* Fmod4SoundStitching.h */; };
+		48CA78D80F2A51A400F8E471 /* libfmodex.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = 48CA78D70F2A51A400F8E471 /* libfmodex.dylib */; };
 		48CFBF8F0E2E869000CD0C51 /* FreeType.framework in Copy Frameworks */ = {isa = PBXBuildFile; fileRef = 48CFBF8E0E2E869000CD0C51 /* FreeType.framework */; };
 		48D0BDC70E23375E00863824 /* libruby.dylib in Copy Frameworks */ = {isa = PBXBuildFile; fileRef = 483646A10D83D57800912FEC /* libruby.dylib */; };
 		48D0BE2C0E273C5E00863824 /* SaveAble.h in Headers */ = {isa = PBXBuildFile; fileRef = 48D0BE280E273C5E00863824 /* SaveAble.h */; };
@@ -824,20 +811,6 @@
 			remoteGlobalIDString = 444EAAB10BD0E0FB00C6D4A0;
 			remoteInfo = RlCommon;
 		};
-		483B6A010D8D4C0A00C4C190 /* PBXContainerItemProxy */ = {
-			isa = PBXContainerItemProxy;
-			containerPortal = 20286C28FDCF999611CA2CEA /* Project object */;
-			proxyType = 1;
-			remoteGlobalIDString = 483D866F0D8C3A3300F3629E;
-			remoteInfo = RlFmod4Driver;
-		};
-		483B6A040D8D4C2700C4C190 /* PBXContainerItemProxy */ = {
-			isa = PBXContainerItemProxy;
-			containerPortal = 20286C28FDCF999611CA2CEA /* Project object */;
-			proxyType = 1;
-			remoteGlobalIDString = 444EAC3D0BD0E46000C6D4A0;
-			remoteInfo = RlUi;
-		};
 		483D87D70D8C566400F3629E /* PBXContainerItemProxy */ = {
 			isa = PBXContainerItemProxy;
 			containerPortal = 20286C28FDCF999611CA2CEA /* Project object */;
@@ -852,6 +825,13 @@
 			remoteGlobalIDString = 48570C1A0D8A6C5400096E35;
 			remoteInfo = RlScript;
 		};
+		48CA789F0F2218BF00F8E471 /* PBXContainerItemProxy */ = {
+			isa = PBXContainerItemProxy;
+			containerPortal = 20286C28FDCF999611CA2CEA /* Project object */;
+			proxyType = 1;
+			remoteGlobalIDString = 8D0C4E890486CD37000505A6 /* Rastullah */;
+			remoteInfo = Rastullah;
+		};
 /* End PBXContainerItemProxy section */
 
 /* Begin PBXCopyFilesBuildPhase section */
@@ -1402,19 +1382,6 @@
 		483D31710D85B3B7003477A0 /* SimpleVehicle.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = SimpleVehicle.cpp; path = ../engine/ai/src/SimpleVehicle.cpp; sourceTree = SOURCE_ROOT; };
 		483D31720D85B3B7003477A0 /* stdinc.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = stdinc.cpp; path = ../engine/ai/src/stdinc.cpp; sourceTree = SOURCE_ROOT; };
 		483D31730D85B3B7003477A0 /* WalkPathBehaviour.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = WalkPathBehaviour.cpp; path = ../engine/ai/src/WalkPathBehaviour.cpp; sourceTree = SOURCE_ROOT; };
-		483D86700D8C3A3300F3629E /* RlFmod4Driver.bundle */ = {isa = PBXFileReference; explicitFileType = &quot;compiled.mach-o.dylib&quot;; includeInIndex = 0; path = RlFmod4Driver.bundle; sourceTree = BUILT_PRODUCTS_DIR; };
-		483D868C0D8C3DA200F3629E /* Fmod4ConfigComponent.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = Fmod4ConfigComponent.h; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D868D0D8C3DA200F3629E /* Fmod4Driver.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = Fmod4Driver.h; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D868E0D8C3DA200F3629E /* Fmod4DriverPrerequisites.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = Fmod4DriverPrerequisites.h; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D868F0D8C3DA200F3629E /* Fmod4Listener.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = Fmod4Listener.h; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D86900D8C3DA200F3629E /* Fmod4Sound.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = Fmod4Sound.h; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D86910D8C3DA200F3629E /* Fmod4SoundStitching.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = Fmod4SoundStitching.h; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D86960D8C3DA200F3629E /* Fmod4ConfigComponent.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = Fmod4ConfigComponent.cpp; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D86970D8C3DA200F3629E /* Fmod4Driver.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = Fmod4Driver.cpp; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D86980D8C3DA200F3629E /* Fmod4DriverDllMain.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = Fmod4DriverDllMain.cpp; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D86990D8C3DA200F3629E /* Fmod4Listener.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = Fmod4Listener.cpp; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D869A0D8C3DA200F3629E /* Fmod4Sound.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = Fmod4Sound.cpp; sourceTree = &quot;&lt;group&gt;&quot;; };
-		483D869B0D8C3DA200F3629E /* Fmod4SoundStitching.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = Fmod4SoundStitching.cpp; sourceTree = &quot;&lt;group&gt;&quot;; };
 		483D87C90D8C55E500F3629E /* RlScript.bundle */ = {isa = PBXFileReference; explicitFileType = &quot;compiled.mach-o.dylib&quot;; includeInIndex = 0; path = RlScript.bundle; sourceTree = BUILT_PRODUCTS_DIR; };
 		484FE6B90E17BC8800FA880F /* Carbon.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Carbon.framework; path = /System/Library/Frameworks/Carbon.framework; sourceTree = &quot;&lt;absolute&gt;&quot;; };
 		48500B780D906A1000EAD8DB /* RlScriptExportsMac.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = RlScriptExportsMac.cpp; path = ../engine/script/swig/RlScriptExportsMac.cpp; sourceTree = SOURCE_ROOT; };
@@ -1504,6 +1471,17 @@
 		48B772E10D583521000A3B97 /* XmlPropertyReader.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = XmlPropertyReader.cpp; path = ../engine/common/src/XmlPropertyReader.cpp; sourceTree = SOURCE_ROOT; };
 		48B772E20D583521000A3B97 /* XmlPropertyWriter.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = XmlPropertyWriter.cpp; path = ../engine/common/src/XmlPropertyWriter.cpp; sourceTree = SOURCE_ROOT; };
 		48C04B890E67DF0300CD3A7D /* PCRE.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = PCRE.framework; path = /Library/Frameworks/PCRE.framework; sourceTree = &quot;&lt;absolute&gt;&quot;; };
+		48CA78990F2218B100F8E471 /* RastullahDeploy.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = RastullahDeploy.app; sourceTree = BUILT_PRODUCTS_DIR; };
+		48CA789B0F2218B100F8E471 /* Rastullah complete-Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; name = &quot;Rastullah complete-Info.plist&quot;; path = &quot;../Rastullah complete-Info.plist&quot;; sourceTree = &quot;&lt;group&gt;&quot;; };
+		48CA78C70F2A511E00F8E471 /* Fmod4Driver.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = Fmod4Driver.cpp; path = fmod4driver/Fmod4Driver.cpp; sourceTree = &quot;&lt;group&gt;&quot;; };
+		48CA78C80F2A511E00F8E471 /* Fmod4Listener.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = Fmod4Listener.cpp; path = fmod4driver/Fmod4Listener.cpp; sourceTree = &quot;&lt;group&gt;&quot;; };
+		48CA78C90F2A511E00F8E471 /* Fmod4Sound.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = Fmod4Sound.cpp; path = fmod4driver/Fmod4Sound.cpp; sourceTree = &quot;&lt;group&gt;&quot;; };
+		48CA78CA0F2A511E00F8E471 /* Fmod4SoundStitching.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = Fmod4SoundStitching.cpp; path = fmod4driver/Fmod4SoundStitching.cpp; sourceTree = &quot;&lt;group&gt;&quot;; };
+		48CA78CF0F2A513100F8E471 /* Fmod4Driver.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = Fmod4Driver.h; path = fmod4driver/Fmod4Driver.h; sourceTree = &quot;&lt;group&gt;&quot;; };
+		48CA78D00F2A513100F8E471 /* Fmod4Listener.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = Fmod4Listener.h; path = fmod4driver/Fmod4Listener.h; sourceTree = &quot;&lt;group&gt;&quot;; };
+		48CA78D10F2A513100F8E471 /* Fmod4Sound.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = Fmod4Sound.h; path = fmod4driver/Fmod4Sound.h; sourceTree = &quot;&lt;group&gt;&quot;; };
+		48CA78D20F2A513100F8E471 /* Fmod4SoundStitching.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = Fmod4SoundStitching.h; path = fmod4driver/Fmod4SoundStitching.h; sourceTree = &quot;&lt;group&gt;&quot;; };
+		48CA78D70F2A51A400F8E471 /* libfmodex.dylib */ = {isa = PBXFileReference; lastKnownFileType = &quot;compiled.mach-o.dylib&quot;; name = libfmodex.dylib; path = &quot;FMOD Programmers API/api/lib/libfmodex.dylib&quot;; sourceTree = SYSTEM_DEVELOPER_DIR; };
 		48CFBF8E0E2E869000CD0C51 /* FreeType.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = FreeType.framework; path = /Library/Frameworks/FreeType.framework; sourceTree = &quot;&lt;absolute&gt;&quot;; };
 		48D0BE280E273C5E00863824 /* SaveAble.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = SaveAble.h; sourceTree = &quot;&lt;group&gt;&quot;; };
 		48D0BE290E273C5E00863824 /* SaveAbleCollection.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = SaveAbleCollection.h; sourceTree = &quot;&lt;group&gt;&quot;; };
@@ -1560,6 +1538,7 @@
 				4836CBCD0D8FB0BE002FE5D7 /* Xerces.framework in Frameworks */,
 				48A52CB10E0EF55C008DBDD8 /* libboost_system.dylib in Frameworks */,
 				484FE6BC0E17BC8800FA880F /* Carbon.framework in Frameworks */,
+				48CA78D80F2A51A400F8E471 /* libfmodex.dylib in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -1616,22 +1595,6 @@
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
-		483D866E0D8C3A3300F3629E /* Frameworks */ = {
-			isa = PBXFrameworksBuildPhase;
-			buildActionMask = 2147483647;
-			files = (
-				48365BE60D8D560E00BF3313 /* Ogre.framework in Frameworks */,
-				48365BE80D8D562D00BF3313 /* libRlCore.dylib in Frameworks */,
-				48365BE90D8D562D00BF3313 /* libRlUi.dylib in Frameworks */,
-				48365BEC0D8D56DC00BF3313 /* libRlCommon.dylib in Frameworks */,
-				48365C950D8D56EA00BF3313 /* CEGUI.framework in Frameworks */,
-				4836CBCF0D8FB0BE002FE5D7 /* Xerces.framework in Frameworks */,
-				48A52CC30E0EF785008DBDD8 /* libboost_system.dylib in Frameworks */,
-				484FE6C10E17BC8800FA880F /* Carbon.framework in Frameworks */,
-				48B0B0490E65BBB30023B198 /* libfmodex.dylib in Frameworks */,
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
 		483D87C70D8C55E500F3629E /* Frameworks */ = {
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
@@ -1661,6 +1624,13 @@
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
+		48CA78970F2218B100F8E471 /* Frameworks */ = {
+			isa = PBXFrameworksBuildPhase;
+			buildActionMask = 2147483647;
+			files = (
+			);
+			runOnlyForDeploymentPostprocessing = 0;
+		};
 		8D0C4E910486CD37000505A6 /* Frameworks */ = {
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
@@ -1695,8 +1665,8 @@
 				444EAC370BD0E44900C6D4A0 /* libRlRules.dylib */,
 				444EAC3E0BD0E46000C6D4A0 /* libRlUi.dylib */,
 				48570C1B0D8A6C5400096E35 /* libRlScript.dylib */,
-				483D86700D8C3A3300F3629E /* RlFmod4Driver.bundle */,
 				483D87C90D8C55E500F3629E /* RlScript.bundle */,
+				48CA78990F2218B100F8E471 /* RastullahDeploy.app */,
 			);
 			name = Products;
 			sourceTree = &quot;&lt;group&gt;&quot;;
@@ -1704,6 +1674,7 @@
 		20286C29FDCF999611CA2CEA /* Rastullah */ = {
 			isa = PBXGroup;
 			children = (
+				48CA78D70F2A51A400F8E471 /* libfmodex.dylib */,
 				20286C2AFDCF999611CA2CEA /* Engine */,
 				48D401810D9E483200AE5340 /* modules */,
 				20286C2CFDCF999611CA2CEA /* Resources */,
@@ -1720,7 +1691,6 @@
 				444EAC220BD0E3E000C6D4A0 /* RlAi */,
 				444EAB1F0BD0E25C00C6D4A0 /* RlCommon */,
 				444EAB200BD0E27400C6D4A0 /* RlCore */,
-				483D86890D8C3DA200F3629E /* RlFmod4Driver */,
 				444EAC590BD0E50600C6D4A0 /* RlRules */,
 				444EAE600BD0E66500C6D4A0 /* RlScript */,
 				444EAC570BD0E4CD00C6D4A0 /* RlUi */,
@@ -1980,45 +1950,13 @@
 			name = swig;
 			sourceTree = &quot;&lt;group&gt;&quot;;
 		};
-		483D86890D8C3DA200F3629E /* RlFmod4Driver */ = {
-			isa = PBXGroup;
-			children = (
-				483D868B0D8C3DA200F3629E /* include */,
-				483D86950D8C3DA200F3629E /* src */,
-			);
-			name = RlFmod4Driver;
-			path = ../plugins/fmod4driver;
-			sourceTree = SOURCE_ROOT;
-		};
-		483D868B0D8C3DA200F3629E /* include */ = {
-			isa = PBXGroup;
-			children = (
-				483D868C0D8C3DA200F3629E /* Fmod4ConfigComponent.h */,
-				483D868D0D8C3DA200F3629E /* Fmod4Driver.h */,
-				483D868E0D8C3DA200F3629E /* Fmod4DriverPrerequisites.h */,
-				483D868F0D8C3DA200F3629E /* Fmod4Listener.h */,
-				483D86900D8C3DA200F3629E /* Fmod4Sound.h */,
-				483D86910D8C3DA200F3629E /* Fmod4SoundStitching.h */,
-			);
-			path = include;
-			sourceTree = &quot;&lt;group&gt;&quot;;
-		};
-		483D86950D8C3DA200F3629E /* src */ = {
-			isa = PBXGroup;
-			children = (
-				483D86960D8C3DA200F3629E /* Fmod4ConfigComponent.cpp */,
-				483D86970D8C3DA200F3629E /* Fmod4Driver.cpp */,
-				483D86980D8C3DA200F3629E /* Fmod4DriverDllMain.cpp */,
-				483D86990D8C3DA200F3629E /* Fmod4Listener.cpp */,
-				483D869A0D8C3DA200F3629E /* Fmod4Sound.cpp */,
-				483D869B0D8C3DA200F3629E /* Fmod4SoundStitching.cpp */,
-			);
-			path = src;
-			sourceTree = &quot;&lt;group&gt;&quot;;
-		};
 		4851EA4C0EDDC82400AB79E9 /* Source */ = {
 			isa = PBXGroup;
 			children = (
+				48CA78C70F2A511E00F8E471 /* Fmod4Driver.cpp */,
+				48CA78C80F2A511E00F8E471 /* Fmod4Listener.cpp */,
+				48CA78C90F2A511E00F8E471 /* Fmod4Sound.cpp */,
+				48CA78CA0F2A511E00F8E471 /* Fmod4SoundStitching.cpp */,
 				48D0BE3C0E273CB000863824 /* SaveAble.cpp */,
 				48D0BE3D0E273CB000863824 /* SaveAbleCollection.cpp */,
 				48D0BE3E0E273CB000863824 /* SaveAbleFactory.cpp */,
@@ -2104,6 +2042,10 @@
 		4851EA4D0EDDC8CA00AB79E9 /* Header */ = {
 			isa = PBXGroup;
 			children = (
+				48CA78CF0F2A513100F8E471 /* Fmod4Driver.h */,
+				48CA78D00F2A513100F8E471 /* Fmod4Listener.h */,
+				48CA78D10F2A513100F8E471 /* Fmod4Sound.h */,
+				48CA78D20F2A513100F8E471 /* Fmod4SoundStitching.h */,
 				48D0BE280E273C5E00863824 /* SaveAble.h */,
 				48D0BE290E273C5E00863824 /* SaveAbleCollection.h */,
 				48D0BE2A0E273C5E00863824 /* SaveAbleFactory.h */,
@@ -2340,6 +2282,7 @@
 		48CFBFD60E2E87A800CD0C51 /* Mac Scripts */ = {
 			isa = PBXGroup;
 			children = (
+				48CA789B0F2218B100F8E471 /* Rastullah complete-Info.plist */,
 				48EFE0D70E8B6EB1007EB7F8 /* mkdmg.sh */,
 				48EFE0D80E8B6EB1007EB7F8 /* renameinstalldirs.sh */,
 			);
@@ -2684,6 +2627,10 @@
 				48D0BE2E0E273C5E00863824 /* SaveAbleFactory.h in Headers */,
 				48D0BE2F0E273C5E00863824 /* SaveAbleManager.h in Headers */,
 				4851EA4F0EDDC93300AB79E9 /* NullSoundStitching.h in Headers */,
+				48CA78D30F2A513100F8E471 /* Fmod4Driver.h in Headers */,
+				48CA78D40F2A513100F8E471 /* Fmod4Listener.h in Headers */,
+				48CA78D50F2A513100F8E471 /* Fmod4Sound.h in Headers */,
+				48CA78D60F2A513100F8E471 /* Fmod4SoundStitching.h in Headers */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -2879,19 +2826,6 @@
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
-		483D866C0D8C3A3300F3629E /* Headers */ = {
-			isa = PBXHeadersBuildPhase;
-			buildActionMask = 2147483647;
-			files = (
-				483D869D0D8C3DA200F3629E /* Fmod4ConfigComponent.h in Headers */,
-				483D869E0D8C3DA200F3629E /* Fmod4Driver.h in Headers */,
-				483D869F0D8C3DA200F3629E /* Fmod4DriverPrerequisites.h in Headers */,
-				483D86A00D8C3DA200F3629E /* Fmod4Listener.h in Headers */,
-				483D86A10D8C3DA200F3629E /* Fmod4Sound.h in Headers */,
-				483D86A20D8C3DA200F3629E /* Fmod4SoundStitching.h in Headers */,
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
 		483D87C50D8C55E500F3629E /* Headers */ = {
 			isa = PBXHeadersBuildPhase;
 			buildActionMask = 2147483647;
@@ -3020,24 +2954,6 @@
 			productReference = 444EAC3E0BD0E46000C6D4A0 /* libRlUi.dylib */;
 			productType = &quot;com.apple.product-type.library.dynamic&quot;;
 		};
-		483D866F0D8C3A3300F3629E /* RlFmod4Driver */ = {
-			isa = PBXNativeTarget;
-			buildConfigurationList = 483D86750D8C3A5F00F3629E /* Build configuration list for PBXNativeTarget &quot;RlFmod4Driver&quot; */;
-			buildPhases = (
-				483D866C0D8C3A3300F3629E /* Headers */,
-				483D866D0D8C3A3300F3629E /* Sources */,
-				483D866E0D8C3A3300F3629E /* Frameworks */,
-			);
-			buildRules = (
-			);
-			dependencies = (
-				483B6A050D8D4C2700C4C190 /* PBXTargetDependency */,
-			);
-			name = RlFmod4Driver;
-			productName = RlFmod4Driver;
-			productReference = 483D86700D8C3A3300F3629E /* RlFmod4Driver.bundle */;
-			productType = &quot;com.apple.product-type.library.dynamic&quot;;
-		};
 		483D87C80D8C55E500F3629E /* RlScriptExports */ = {
 			isa = PBXNativeTarget;
 			buildConfigurationList = 483D87D60D8C564E00F3629E /* Build configuration list for PBXNativeTarget &quot;RlScriptExports&quot; */;
@@ -3079,6 +2995,23 @@
 			productReference = 48570C1B0D8A6C5400096E35 /* libRlScript.dylib */;
 			productType = &quot;com.apple.product-type.library.dynamic&quot;;
 		};
+		48CA78980F2218B100F8E471 /* RastullahDeploy */ = {
+			isa = PBXNativeTarget;
+			buildConfigurationList = 48CA789E0F2218B300F8E471 /* Build configuration list for PBXNativeTarget &quot;RastullahDeploy&quot; */;
+			buildPhases = (
+				48CA78970F2218B100F8E471 /* Frameworks */,
+				48CA78BF0F221DD700F8E471 /* ShellScript */,
+			);
+			buildRules = (
+			);
+			dependencies = (
+				48CA78A00F2218BF00F8E471 /* PBXTargetDependency */,
+			);
+			name = RastullahDeploy;
+			productName = &quot;Rastullah complete&quot;;
+			productReference = 48CA78990F2218B100F8E471 /* RastullahDeploy.app */;
+			productType = &quot;com.apple.product-type.application&quot;;
+		};
 		8D0C4E890486CD37000505A6 /* Rastullah */ = {
 			isa = PBXNativeTarget;
 			buildConfigurationList = C0E91AC508A95435008D54AB /* Build configuration list for PBXNativeTarget &quot;Rastullah&quot; */;
@@ -3092,7 +3025,6 @@
 			buildRules = (
 			);
 			dependencies = (
-				483B6A020D8D4C0A00C4C190 /* PBXTargetDependency */,
 				483D87D80D8C566400F3629E /* PBXTargetDependency */,
 				444EAC1F0BD0E3A800C6D4A0 /* PBXTargetDependency */,
 				444EAC210BD0E3A800C6D4A0 /* PBXTargetDependency */,
@@ -3129,8 +3061,8 @@
 				444EAC360BD0E44900C6D4A0 /* RlRules */,
 				444EAC3D0BD0E46000C6D4A0 /* RlUi */,
 				48570C1A0D8A6C5400096E35 /* RlScript */,
-				483D866F0D8C3A3300F3629E /* RlFmod4Driver */,
 				483D87C80D8C55E500F3629E /* RlScriptExports */,
+				48CA78980F2218B100F8E471 /* RastullahDeploy */,
 			);
 		};
 /* End PBXProject section */
@@ -3150,7 +3082,6 @@
 				484D92220E1E078100BCFC2B /* libRlUi.dylib in Resources */,
 				48B0B04A0E65BBC10023B198 /* libfmodex.dylib in Resources */,
 				484D92230E1E078100BCFC2B /* libRlScript.dylib in Resources */,
-				484D92240E1E078100BCFC2B /* RlFmod4Driver.bundle in Resources */,
 				484D92250E1E078100BCFC2B /* RlScript.bundle in Resources */,
 				8D0C4E8D0486CD37000505A6 /* InfoPlist.strings in Resources */,
 				8D0C4E8E0486CD37000505A6 /* main.nib in Resources */,
@@ -3173,6 +3104,19 @@
 			shellPath = /bin/sh;
 			shellScript = &quot;pwd\ncd ../engine/script/swig\n/usr/local/bin/swig -ruby -minherit -c++ -Fmicrosoft -addextern RlExports.i&quot;;
 		};
+		48CA78BF0F221DD700F8E471 /* ShellScript */ = {
+			isa = PBXShellScriptBuildPhase;
+			buildActionMask = 2147483647;
+			files = (
+			);
+			inputPaths = (
+			);
+			outputPaths = (
+			);
+			runOnlyForDeploymentPostprocessing = 0;
+			shellPath = /bin/sh;
+			shellScript = &quot;cp -r ${BUILT_PRODUCTS_DIR}/Rastullah.app/* ${BUILT_PRODUCTS_DIR}/RastullahDeploy.app\nsvn export <A HREF="http://svn.berlios.de/svnroot/repos/dsa-hl/modules">http://svn.berlios.de/svnroot/repos/dsa-hl/modules</A> ${BUILT_PRODUCTS_DIR}/RastullahDeploy.app/Contents/Resources/modules&quot;;
+		};
 		48D0BDF20E2342F600863824 /* Rename Libs */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
@@ -3297,6 +3241,10 @@
 				48D0BE410E273CB000863824 /* SaveAbleCollection.cpp in Sources */,
 				48D0BE420E273CB000863824 /* SaveAbleFactory.cpp in Sources */,
 				48D0BE430E273CB000863824 /* SaveAbleManager.cpp in Sources */,
+				48CA78CB0F2A511E00F8E471 /* Fmod4Driver.cpp in Sources */,
+				48CA78CC0F2A511E00F8E471 /* Fmod4Listener.cpp in Sources */,
+				48CA78CD0F2A511E00F8E471 /* Fmod4Sound.cpp in Sources */,
+				48CA78CE0F2A511E00F8E471 /* Fmod4SoundStitching.cpp in Sources */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -3477,19 +3425,6 @@
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
-		483D866D0D8C3A3300F3629E /* Sources */ = {
-			isa = PBXSourcesBuildPhase;
-			buildActionMask = 2147483647;
-			files = (
-				483D86A30D8C3DA200F3629E /* Fmod4ConfigComponent.cpp in Sources */,
-				483D86A40D8C3DA200F3629E /* Fmod4Driver.cpp in Sources */,
-				483D86A50D8C3DA200F3629E /* Fmod4DriverDllMain.cpp in Sources */,
-				483D86A60D8C3DA200F3629E /* Fmod4Listener.cpp in Sources */,
-				483D86A70D8C3DA200F3629E /* Fmod4Sound.cpp in Sources */,
-				483D86A80D8C3DA200F3629E /* Fmod4SoundStitching.cpp in Sources */,
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
 		483D87C60D8C55E500F3629E /* Sources */ = {
 			isa = PBXSourcesBuildPhase;
 			buildActionMask = 2147483647;
@@ -3614,16 +3549,6 @@
 			target = 444EAAB10BD0E0FB00C6D4A0 /* RlCommon */;
 			targetProxy = 483B69CB0D8D4A3500C4C190 /* PBXContainerItemProxy */;
 		};
-		483B6A020D8D4C0A00C4C190 /* PBXTargetDependency */ = {
-			isa = PBXTargetDependency;
-			target = 483D866F0D8C3A3300F3629E /* RlFmod4Driver */;
-			targetProxy = 483B6A010D8D4C0A00C4C190 /* PBXContainerItemProxy */;
-		};
-		483B6A050D8D4C2700C4C190 /* PBXTargetDependency */ = {
-			isa = PBXTargetDependency;
-			target = 444EAC3D0BD0E46000C6D4A0 /* RlUi */;
-			targetProxy = 483B6A040D8D4C2700C4C190 /* PBXContainerItemProxy */;
-		};
 		483D87D80D8C566400F3629E /* PBXTargetDependency */ = {
 			isa = PBXTargetDependency;
 			target = 483D87C80D8C55E500F3629E /* RlScriptExports */;
@@ -3634,6 +3559,11 @@
 			target = 48570C1A0D8A6C5400096E35 /* RlScript */;
 			targetProxy = 48570C1E0D8A6C6900096E35 /* PBXContainerItemProxy */;
 		};
+		48CA78A00F2218BF00F8E471 /* PBXTargetDependency */ = {
+			isa = PBXTargetDependency;
+			target = 8D0C4E890486CD37000505A6 /* Rastullah */;
+			targetProxy = 48CA789F0F2218BF00F8E471 /* PBXContainerItemProxy */;
+		};
 /* End PBXTargetDependency section */
 
 /* Begin PBXVariantGroup section */
@@ -3750,15 +3680,19 @@
 					/usr/local/include/meshmagick,
 					/System/Library/Frameworks/Ruby.framework/Headers,
 					/Library/Frameworks/Xerces.framework/Headers,
+					&quot;$(HEADER_SEARCH_PATHS_QUOTED_FOR_TARGET_1)&quot;,
 				);
+				HEADER_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = &quot;\&quot;/Developer/FMOD Programmers API/api/inc\&quot;&quot;;
 				INSTALL_PATH = &quot;@executable_path/../Resources&quot;;
 				LIBRARY_SEARCH_PATHS = (
 					&quot;$(inherited)&quot;,
 					/System/Library/Frameworks/Ruby.framework/Versions/Current/usr/lib,
 					&quot;$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)&quot;,
 					/opt/local/lib,
+					&quot;$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_2)&quot;,
 				);
 				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = &quot;\&quot;$(SYSTEM_LIBRARY_DIR)/Frameworks/Ruby.framework/Versions/1.8/usr/lib\&quot;&quot;;
+				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_2 = &quot;\&quot;$(DEVELOPER_DIR)/FMOD Programmers API/api/lib\&quot;&quot;;
 				MACH_O_TYPE = mh_dylib;
 				OTHER_LDFLAGS = &quot;&quot;;
 				PREBINDING = NO;
@@ -3785,14 +3719,15 @@
 				GCC_PRECOMPILE_PREFIX_HEADER = YES;
 				GCC_PREFIX_HEADER = ../engine/core/include/stdinc.h;
 				HEADER_SEARCH_PATHS = (
-					&quot;/usr/local/include/boost-1_33_1&quot;,
+					&quot;$(inherited)&quot;,
 					&quot;/usr/local/lib/ruby/1.8/i686-darwin8.9.1&quot;,
 					/usr/local/include/OIS,
 					/usr/local/include/meshmagick,
-					/sw/include,
-					/usr/local/include,
 					/System/Library/Frameworks/Ruby.framework/Headers,
+					/Library/Frameworks/Xerces.framework/Headers,
+					&quot;$(HEADER_SEARCH_PATHS_QUOTED_FOR_TARGET_1)&quot;,
 				);
+				HEADER_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = &quot;\&quot;/Developer/FMOD Programmers API/api/inc\&quot;&quot;;
 				INSTALL_PATH = &quot;@executable_path/../Resources&quot;;
 				LIBRARY_SEARCH_PATHS = (
 					&quot;$(inherited)&quot;,
@@ -3800,8 +3735,10 @@
 					/System/Library/Frameworks/Ruby.framework/Versions/Current/usr/lib,
 					&quot;$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)&quot;,
 					/opt/local/lib,
+					&quot;$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_2)&quot;,
 				);
 				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = &quot;\&quot;$(SYSTEM_LIBRARY_DIR)/Frameworks/Ruby.framework/Versions/1.8/usr/lib\&quot;&quot;;
+				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_2 = &quot;\&quot;$(DEVELOPER_DIR)/FMOD Programmers API/api/lib\&quot;&quot;;
 				OTHER_LDFLAGS = &quot;&quot;;
 				PREBINDING = NO;
 				PRODUCT_NAME = RlCore;
@@ -4034,79 +3971,6 @@
 			};
 			name = Release;
 		};
-		483D86710D8C3A3400F3629E /* Debug */ = {
-			isa = XCBuildConfiguration;
-			buildSettings = {
-				COPY_PHASE_STRIP = NO;
-				DYLIB_COMPATIBILITY_VERSION = &quot;&quot;;
-				DYLIB_CURRENT_VERSION = &quot;&quot;;
-				EXECUTABLE_EXTENSION = bundle;
-				EXECUTABLE_PREFIX = &quot;&quot;;
-				FRAMEWORK_SEARCH_PATHS = (
-					&quot;$(inherited)&quot;,
-					&quot;$(FRAMEWORK_SEARCH_PATHS_QUOTED_FOR_TARGET_1)&quot;,
-				);
-				FRAMEWORK_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = &quot;\&quot;$(SYSTEM_LIBRARY_DIR)/Frameworks/Carbon.framework/Versions/A/Frameworks\&quot;&quot;;
-				GCC_DYNAMIC_NO_PIC = NO;
-				GCC_ENABLE_FIX_AND_CONTINUE = YES;
-				GCC_MODEL_TUNING = G5;
-				GCC_OPTIMIZATION_LEVEL = 0;
-				HEADER_SEARCH_PATHS = (
-					&quot;$(inherited)&quot;,
-					&quot;$(HEADER_SEARCH_PATHS_QUOTED_FOR_TARGET_1)&quot;,
-				);
-				HEADER_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = &quot;\&quot;/Developer/FMOD Programmers API/api/inc\&quot;&quot;;
-				INSTALL_PATH = &quot;@executable_path/../Resources&quot;;
-				LIBRARY_SEARCH_PATHS = (
-					&quot;$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)&quot;,
-					&quot;$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_2)&quot;,
-				);
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = &quot;\&quot;/Developer/FMOD Programmers API/api/lib\&quot;&quot;;
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_2 = &quot;\&quot;$(DEVELOPER_DIR)/FMOD Programmers API/api/lib\&quot;&quot;;
-				MACH_O_TYPE = mh_bundle;
-				OTHER_LDFLAGS = &quot;-lfmodex&quot;;
-				PREBINDING = NO;
-				PRODUCT_NAME = RlFmod4Driver;
-				ZERO_LINK = NO;
-			};
-			name = Debug;
-		};
-		483D86720D8C3A3400F3629E /* Release */ = {
-			isa = XCBuildConfiguration;
-			buildSettings = {
-				COPY_PHASE_STRIP = YES;
-				DEBUG_INFORMATION_FORMAT = &quot;dwarf-with-dsym&quot;;
-				DYLIB_COMPATIBILITY_VERSION = &quot;&quot;;
-				DYLIB_CURRENT_VERSION = &quot;&quot;;
-				EXECUTABLE_EXTENSION = bundle;
-				EXECUTABLE_PREFIX = &quot;&quot;;
-				FRAMEWORK_SEARCH_PATHS = (
-					&quot;$(inherited)&quot;,
-					&quot;$(FRAMEWORK_SEARCH_PATHS_QUOTED_FOR_TARGET_1)&quot;,
-				);
-				FRAMEWORK_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = &quot;\&quot;$(SYSTEM_LIBRARY_DIR)/Frameworks/Carbon.framework/Versions/A/Frameworks\&quot;&quot;;
-				GCC_ENABLE_FIX_AND_CONTINUE = NO;
-				GCC_MODEL_TUNING = G5;
-				HEADER_SEARCH_PATHS = (
-					&quot;$(inherited)&quot;,
-					&quot;$(HEADER_SEARCH_PATHS_QUOTED_FOR_TARGET_1)&quot;,
-				);
-				HEADER_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = &quot;\&quot;/Developer/FMOD Programmers API/api/inc\&quot;&quot;;
-				INSTALL_PATH = &quot;@executable_path/../Resources&quot;;
-				LIBRARY_SEARCH_PATHS = (
-					&quot;$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)&quot;,
-					&quot;$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_2)&quot;,
-				);
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = &quot;\&quot;/Developer/FMOD Programmers API/api/lib\&quot;&quot;;
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_2 = &quot;\&quot;$(DEVELOPER_DIR)/FMOD Programmers API/api/lib\&quot;&quot;;
-				MACH_O_TYPE = mh_bundle;
-				OTHER_LDFLAGS = &quot;-lfmodex&quot;;
-				PREBINDING = NO;
-				PRODUCT_NAME = RlFmod4Driver;
-				ZERO_LINK = NO;
-			};
-			name = Release;
-		};
 		483D87CA0D8C55E500F3629E /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
@@ -4237,6 +4101,54 @@
 			};
 			name = Release;
 		};
+		48CA789C0F2218B200F8E471 /* Debug */ = {
+			isa = XCBuildConfiguration;
+			buildSettings = {
+				ALWAYS_SEARCH_USER_PATHS = NO;
+				COPY_PHASE_STRIP = NO;
+				GCC_DYNAMIC_NO_PIC = NO;
+				GCC_ENABLE_FIX_AND_CONTINUE = YES;
+				GCC_MODEL_TUNING = G5;
+				GCC_OPTIMIZATION_LEVEL = 0;
+				GCC_PRECOMPILE_PREFIX_HEADER = YES;
+				GCC_PREFIX_HEADER = &quot;$(SYSTEM_LIBRARY_DIR)/Frameworks/AppKit.framework/Headers/AppKit.h&quot;;
+				INFOPLIST_FILE = &quot;Rastullah complete-Info.plist&quot;;
+				INSTALL_PATH = &quot;$(HOME)/Applications&quot;;
+				OTHER_LDFLAGS = (
+					&quot;-framework&quot;,
+					Foundation,
+					&quot;-framework&quot;,
+					AppKit,
+				);
+				PREBINDING = NO;
+				PRODUCT_NAME = RastullahDeploy;
+			};
+			name = Debug;
+		};
+		48CA789D0F2218B200F8E471 /* Release */ = {
+			isa = XCBuildConfiguration;
+			buildSettings = {
+				ALWAYS_SEARCH_USER_PATHS = NO;
+				COPY_PHASE_STRIP = YES;
+				DEBUG_INFORMATION_FORMAT = &quot;dwarf-with-dsym&quot;;
+				GCC_ENABLE_FIX_AND_CONTINUE = NO;
+				GCC_MODEL_TUNING = G5;
+				GCC_PRECOMPILE_PREFIX_HEADER = YES;
+				GCC_PREFIX_HEADER = &quot;$(SYSTEM_LIBRARY_DIR)/Frameworks/AppKit.framework/Headers/AppKit.h&quot;;
+				INFOPLIST_FILE = &quot;Rastullah complete-Info.plist&quot;;
+				INSTALL_PATH = &quot;$(HOME)/Applications&quot;;
+				OTHER_LDFLAGS = (
+					&quot;-framework&quot;,
+					Foundation,
+					&quot;-framework&quot;,
+					AppKit,
+				);
+				PREBINDING = NO;
+				PRODUCT_NAME = RastullahDeploy;
+				ZERO_LINK = NO;
+			};
+			name = Release;
+		};
 		C0E91AC608A95435008D54AB /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
@@ -4409,15 +4321,6 @@
 			defaultConfigurationIsVisible = 0;
 			defaultConfigurationName = Release;
 		};
-		483D86750D8C3A5F00F3629E /* Build configuration list for PBXNativeTarget &quot;RlFmod4Driver&quot; */ = {
-			isa = XCConfigurationList;
-			buildConfigurations = (
-				483D86710D8C3A3400F3629E /* Debug */,
-				483D86720D8C3A3400F3629E /* Release */,
-			);
-			defaultConfigurationIsVisible = 0;
-			defaultConfigurationName = Release;
-		};
 		483D87D60D8C564E00F3629E /* Build configuration list for PBXNativeTarget &quot;RlScriptExports&quot; */ = {
 			isa = XCConfigurationList;
 			buildConfigurations = (
@@ -4436,6 +4339,15 @@
 			defaultConfigurationIsVisible = 0;
 			defaultConfigurationName = Release;
 		};
+		48CA789E0F2218B300F8E471 /* Build configuration list for PBXNativeTarget &quot;RastullahDeploy&quot; */ = {
+			isa = XCConfigurationList;
+			buildConfigurations = (
+				48CA789C0F2218B200F8E471 /* Debug */,
+				48CA789D0F2218B200F8E471 /* Release */,
+			);
+			defaultConfigurationIsVisible = 0;
+			defaultConfigurationName = Release;
+		};
 		C0E91AC508A95435008D54AB /* Build configuration list for PBXNativeTarget &quot;Rastullah&quot; */ = {
 			isa = XCConfigurationList;
 			buildConfigurations = (

Modified: rl/branches/newton20/Mac/tools/renameinstalldirs.sh
===================================================================
--- rl/branches/newton20/Mac/tools/renameinstalldirs.sh	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/Mac/tools/renameinstalldirs.sh	2009-01-26 17:26:56 UTC (rev 4719)
@@ -17,7 +17,6 @@
     $RASTULLAH_RES_DIR/libRlRules.dylib \
     $RASTULLAH_RES_DIR/libRlScript.dylib \
     $RASTULLAH_RES_DIR/libRlUi.dylib \
-    $RASTULLAH_RES_DIR/libRlFmod4Driver.dylib \
     $RASTULLAH_RES_DIR/libboost_filesystem.dylib \
     $RASTULLAH_RES_DIR/libboost_system.dylib \
     $RASTULLAH_RES_DIR/RlScript.bundle&quot;
@@ -28,6 +27,7 @@
     echo Processing $cur
     install_name_tool -change /Library/Frameworks/CEGUI.framework/Versions/A/CEGUI @executable_path/../Frameworks/CEGUI.framework/Versions/A/CEGUI $cur
     install_name_tool -change libboost_system-mt-1_35.dylib @executable_path/../Resources/libboost_system.dylib $cur
+    install_name_tool -change ./libfmodex.dylib @executable_path/../Resources/libfmodex.dylib $cur
     install_name_tool -change libboost_filesystem-mt-1_35.dylib @executable_path/../Resources/libboost_filesystem.dylib $cur
     install_name_tool -change /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/libruby.1.dylib @executable_path/../Frameworks/libruby.1.dylib $cur
     install_name_tool -change /Users/blakharaz/Library/Frameworks/OgreNewt.framework/Versions/A/OgreNewt @executable_path/../Frameworks/OgreNewt.framework/Versions/A/OgreNewt $cur

Modified: rl/branches/newton20/Rastullah2005.sln
===================================================================
--- rl/branches/newton20/Rastullah2005.sln	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/Rastullah2005.sln	2009-01-26 17:26:56 UTC (rev 4719)
@@ -1,19 +1,35 @@
 Microsoft Visual Studio Solution File, Format Version 9.00
 # Visual Studio 2005
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlCommon&quot;, &quot;engine\common\RlCommon2005.vcproj&quot;, &quot;{D3185FC6-9384-431A-A237-80284F859B21}&quot;
+	ProjectSection(WebsiteProperties) = preProject
+		Debug.AspNetCompiler.Debug = &quot;True&quot;
+		Release.AspNetCompiler.Debug = &quot;False&quot;
+	EndProjectSection
 EndProject
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlCore&quot;, &quot;engine\core\RlCore2005.vcproj&quot;, &quot;{0935F495-4540-40E3-AC8F-AA54C85DC5B2}&quot;
+	ProjectSection(WebsiteProperties) = preProject
+		Debug.AspNetCompiler.Debug = &quot;True&quot;
+		Release.AspNetCompiler.Debug = &quot;False&quot;
+	EndProjectSection
 	ProjectSection(ProjectDependencies) = postProject
 		{D3185FC6-9384-431A-A237-80284F859B21} = {D3185FC6-9384-431A-A237-80284F859B21}
 	EndProjectSection
 EndProject
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlRules&quot;, &quot;engine\rules\RlRules2005.vcproj&quot;, &quot;{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}&quot;
+	ProjectSection(WebsiteProperties) = preProject
+		Debug.AspNetCompiler.Debug = &quot;True&quot;
+		Release.AspNetCompiler.Debug = &quot;False&quot;
+	EndProjectSection
 	ProjectSection(ProjectDependencies) = postProject
 		{D3185FC6-9384-431A-A237-80284F859B21} = {D3185FC6-9384-431A-A237-80284F859B21}
 		{0935F495-4540-40E3-AC8F-AA54C85DC5B2} = {0935F495-4540-40E3-AC8F-AA54C85DC5B2}
 	EndProjectSection
 EndProject
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlScript&quot;, &quot;engine\script\RlScript2005.vcproj&quot;, &quot;{9A41EAE4-302A-4823-8F20-FA1AD58189A1}&quot;
+	ProjectSection(WebsiteProperties) = preProject
+		Debug.AspNetCompiler.Debug = &quot;True&quot;
+		Release.AspNetCompiler.Debug = &quot;False&quot;
+	EndProjectSection
 	ProjectSection(ProjectDependencies) = postProject
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25} = {53FE20F3-E726-44FE-BBEC-D29CAE210D25}
 		{D3185FC6-9384-431A-A237-80284F859B21} = {D3185FC6-9384-431A-A237-80284F859B21}
@@ -23,6 +39,10 @@
 	EndProjectSection
 EndProject
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlStartup&quot;, &quot;engine\startup\RlStartup2005.vcproj&quot;, &quot;{B78AEF70-E618-4E9D-BD67-E17995ECF714}&quot;
+	ProjectSection(WebsiteProperties) = preProject
+		Debug.AspNetCompiler.Debug = &quot;True&quot;
+		Release.AspNetCompiler.Debug = &quot;False&quot;
+	EndProjectSection
 	ProjectSection(ProjectDependencies) = postProject
 		{53FE20F3-E726-44FE-BBEC-D29CAE210D25} = {53FE20F3-E726-44FE-BBEC-D29CAE210D25}
 		{9A41EAE4-302A-4823-8F20-FA1AD58189A1} = {9A41EAE4-302A-4823-8F20-FA1AD58189A1}
@@ -33,6 +53,10 @@
 	EndProjectSection
 EndProject
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlUI&quot;, &quot;engine\ui\RlUI2005.vcproj&quot;, &quot;{53FE20F3-E726-44FE-BBEC-D29CAE210D25}&quot;
+	ProjectSection(WebsiteProperties) = preProject
+		Debug.AspNetCompiler.Debug = &quot;True&quot;
+		Release.AspNetCompiler.Debug = &quot;False&quot;
+	EndProjectSection
 	ProjectSection(ProjectDependencies) = postProject
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7} = {C3E78B89-587B-499A-BE7D-4FE8564F0CD7}
 		{D3185FC6-9384-431A-A237-80284F859B21} = {D3185FC6-9384-431A-A237-80284F859B21}
@@ -41,19 +65,16 @@
 	EndProjectSection
 EndProject
 Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlAI&quot;, &quot;engine\ai\RlAI2005.vcproj&quot;, &quot;{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}&quot;
+	ProjectSection(WebsiteProperties) = preProject
+		Debug.AspNetCompiler.Debug = &quot;True&quot;
+		Release.AspNetCompiler.Debug = &quot;False&quot;
+	EndProjectSection
 	ProjectSection(ProjectDependencies) = postProject
 		{0935F495-4540-40E3-AC8F-AA54C85DC5B2} = {0935F495-4540-40E3-AC8F-AA54C85DC5B2}
 		{D3185FC6-9384-431A-A237-80284F859B21} = {D3185FC6-9384-431A-A237-80284F859B21}
 		{1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070} = {1D1D45B2-A9C3-4D10-93EC-22AE4AA5C070}
 	EndProjectSection
 EndProject
-Project(&quot;{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}&quot;) = &quot;RlFmod4Driver&quot;, &quot;plugins\fmod4driver\RlFmod4Driver.vcproj&quot;, &quot;{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}&quot;
-	ProjectSection(ProjectDependencies) = postProject
-		{53FE20F3-E726-44FE-BBEC-D29CAE210D25} = {53FE20F3-E726-44FE-BBEC-D29CAE210D25}
-		{D3185FC6-9384-431A-A237-80284F859B21} = {D3185FC6-9384-431A-A237-80284F859B21}
-		{0935F495-4540-40E3-AC8F-AA54C85DC5B2} = {0935F495-4540-40E3-AC8F-AA54C85DC5B2}
-	EndProjectSection
-EndProject
 Global
 	GlobalSection(SolutionConfigurationPlatforms) = preSolution
 		Debug|Win32 = Debug|Win32
@@ -103,12 +124,6 @@
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.Release|Win32.Build.0 = Release|Win32
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
 		{C3E78B89-587B-499A-BE7D-4FE8564F0CD7}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
-		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.Debug|Win32.ActiveCfg = Debug|Win32
-		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.Debug|Win32.Build.0 = Debug|Win32
-		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.Release|Win32.ActiveCfg = Release|Win32
-		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.Release|Win32.Build.0 = Release|Win32
-		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.ReleaseWithSymbols|Win32.ActiveCfg = Release with Symbols|Win32
-		{A2DD1E40-4D80-44C5-B04E-1B1C4B07131C}.ReleaseWithSymbols|Win32.Build.0 = Release with Symbols|Win32
 	EndGlobalSection
 	GlobalSection(SolutionProperties) = preSolution
 		HideSolutionNode = FALSE


Property changes on: rl/branches/newton20/engine/ai
___________________________________________________________________
Name: svn:ignore
   - 
Makefile.in
Makefile

   + Makefile.in
Makefile
obj
lib


Modified: rl/branches/newton20/engine/core/CMakeLists.txt
===================================================================
--- rl/branches/newton20/engine/core/CMakeLists.txt	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/CMakeLists.txt	2009-01-26 17:26:56 UTC (rev 4719)
@@ -1,5 +1,6 @@
 INCLUDE_DIRECTORIES(
 ${CMAKE_CURRENT_SOURCE_DIR}/include
+${CMAKE_CURRENT_SOURCE_DIR}/include/fmod4driver
 ${CMAKE_CURRENT_SOURCE_DIR}/include/nulldriver
 ${RL_COMMON_INCLUDE_DIR}
 ${OGRE_INCLUDE_DIRS}
@@ -82,6 +83,10 @@
 src/World.cpp
 src/Zone.cpp
 src/ZoneManager.cpp
+src/fmod4driver/Fmod4Driver.cpp
+src/fmod4driver/Fmod4Listener.cpp
+src/fmod4driver/Fmod4Sound.cpp
+src/fmod4driver/Fmod4SoundStitching.cpp
 src/nulldriver/NullDriver.cpp
 src/nulldriver/NullListener.cpp
 src/nulldriver/NullSound.cpp

Modified: rl/branches/newton20/engine/core/RlCore2005.vcproj
===================================================================
--- rl/branches/newton20/engine/core/RlCore2005.vcproj	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/RlCore2005.vcproj	2009-01-26 17:26:56 UTC (rev 4719)
@@ -48,7 +48,7 @@
 				Name=&quot;VCCLCompilerTool&quot;
 				AdditionalOptions=&quot;-Zm130&quot;
 				Optimization=&quot;0&quot;
-				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\include\OgreNewt;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\meshmagick\include&quot;
+				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;.\include\fmod4driver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\include\OgreNewt;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\meshmagick\include;..\..\dependencies\FMOD4\api\inc&quot;
 				PreprocessorDefinitions=&quot;WITH_FMOD3;_WINDOWS,_DEBUG,WIN32,RLCORE_EXPORTS;_CRT_SECURE_NO_DEPRECATE;RL_USE_PCH&quot;
 				MinimalRebuild=&quot;true&quot;
 				BasicRuntimeChecks=&quot;3&quot;
@@ -85,12 +85,12 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt_d.lib OgreMain_d.lib xerces-c_2D.lib CEGUIBase_d.lib Newton.lib meshmagick_d.lib&quot;
+				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt_d.lib OgreMain_d.lib xerces-c_2D.lib CEGUIBase_d.lib Newton.lib meshmagick_d.lib fmodex_vc.lib&quot;
 				ShowProgress=&quot;0&quot;
 				OutputFile=&quot;./lib/$(ConfigurationName)/RlCore.dll&quot;
 				LinkIncremental=&quot;2&quot;
 				SuppressStartupBanner=&quot;true&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\meshmagick\lib&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\meshmagick\lib;..\..\dependencies\FMOD4\api\lib&quot;
 				IgnoreDefaultLibraryNames=&quot;&quot;
 				TypeLibraryFile=&quot;$(OutDir)\RlCore.lib&quot;
 				GenerateDebugInformation=&quot;true&quot;
@@ -163,7 +163,7 @@
 				Optimization=&quot;3&quot;
 				EnableIntrinsicFunctions=&quot;true&quot;
 				FavorSizeOrSpeed=&quot;1&quot;
-				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\include\OgreNewt;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\meshmagick\include&quot;
+				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;.\include\fmod4driver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\include\OgreNewt;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\meshmagick\include;..\..\dependencies\FMOD4\api\inc&quot;
 				PreprocessorDefinitions=&quot;WITH_FMOD3;NDEBUG,_WINDOWS,WIN32,RLCORE_EXPORTS;_CRT_SECURE_NO_DEPRECATE;RL_USE_PCH&quot;
 				StringPooling=&quot;false&quot;
 				ExceptionHandling=&quot;1&quot;
@@ -198,11 +198,11 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt.lib xerces-c_2.lib CEGUIBase.lib OgreMain.lib Newton.lib meshmagick.lib&quot;
+				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt.lib xerces-c_2.lib CEGUIBase.lib OgreMain.lib Newton.lib meshmagick.lib fmodex_vc.lib&quot;
 				OutputFile=&quot;./lib/$(ConfigurationName)/RlCore.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				SuppressStartupBanner=&quot;true&quot;
-				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\meshmagick\lib&quot;
+				AdditionalLibraryDirectories=&quot;&quot;..\common\lib\$(ConfigurationName)&quot;;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;&quot;..\..\dependencies\ogrenewt\lib\$(ConfigurationName)&quot;;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\meshmagick\lib;..\..\dependencies\FMOD4\api\lib&quot;
 				TypeLibraryFile=&quot;$(OutDir)\RlCore.lib&quot;
 				ProgramDatabaseFile=&quot;&quot;
 				SubSystem=&quot;2&quot;
@@ -270,7 +270,7 @@
 				Optimization=&quot;3&quot;
 				EnableIntrinsicFunctions=&quot;true&quot;
 				FavorSizeOrSpeed=&quot;1&quot;
-				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\include\OgreNewt;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\meshmagick\include&quot;
+				AdditionalIncludeDirectories=&quot;.\include;.\include\nulldriver;.\include\fmod4driver;..\common\include;..\..\dependencies\ogrenew\OgreMain\include;..\..\dependencies\OgreNewt\include\OgreNewt;&quot;..\..\dependencies\ruby\lib\ruby\1.8\i386-mswin32&quot;;..\..\dependencies\boost\include;..\..\dependencies\xerces\include;..\..\dependencies\cegui_mk2\include;..\..\dependencies\NewtonSDK\sdk\;..\..\dependencies\ogrenew\Dependencies\include;..\..\dependencies\meshmagick\include;..\..\dependencies\FMOD4\api\inc&quot;
 				PreprocessorDefinitions=&quot;WITH_FMOD3;NDEBUG,_WINDOWS,WIN32,RLCORE_EXPORTS;_CRT_SECURE_NO_DEPRECATE;RL_USE_PCH&quot;
 				StringPooling=&quot;false&quot;
 				ExceptionHandling=&quot;1&quot;
@@ -305,11 +305,11 @@
 				Name=&quot;VCLinkerTool&quot;
 				IgnoreImportLibrary=&quot;true&quot;
 				AdditionalOptions=&quot;/MACHINE:I386&quot;
-				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt.lib xerces-c_2.lib CEGUIBase.lib OgreMain.lib Newton.lib meshmagick.lib&quot;
+				AdditionalDependencies=&quot;RlCommon.lib msvcrt-ruby18.lib OgreNewt.lib xerces-c_2.lib CEGUIBase.lib OgreMain.lib Newton.lib meshmagick.lib fmodex_vc.lib&quot;
 				OutputFile=&quot;$(OutDir)/RlCore.dll&quot;
 				LinkIncremental=&quot;1&quot;
 				SuppressStartupBanner=&quot;true&quot;
-				AdditionalLibraryDirectories=&quot;..\common\lib\Release;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib\release;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\meshmagick\lib&quot;
+				AdditionalLibraryDirectories=&quot;..\common\lib\Release;..\..\dependencies\ogrenew\lib;..\..\dependencies\ruby\lib;..\..\dependencies\boost\lib;..\..\dependencies\xerces\lib;..\..\dependencies\cegui_mk2\lib;..\..\dependencies\ogrenewt\lib\release;..\..\dependencies\NewtonSDK\sdk\dll;..\..\dependencies\meshmagick\lib;..\..\dependencies\FMOD4\api\lib&quot;
 				TypeLibraryFile=&quot;$(OutDir)\RlCore.lib&quot;
 				GenerateDebugInformation=&quot;true&quot;
 				ProgramDatabaseFile=&quot;$(TargetDir)$(TargetName).pdb&quot;
@@ -699,6 +699,26 @@
 					&gt;
 				&lt;/File&gt;
 			&lt;/Filter&gt;
+			&lt;Filter
+				Name=&quot;fmod4driver&quot;
+				&gt;
+				&lt;File
+					RelativePath=&quot;.\include\fmod4driver\Fmod4Driver.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\fmod4driver\Fmod4Listener.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\fmod4driver\Fmod4Sound.h&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\include\fmod4driver\Fmod4SoundStitching.h&quot;
+					&gt;
+				&lt;/File&gt;
+			&lt;/Filter&gt;
 		&lt;/Filter&gt;
 		&lt;Filter
 			Name=&quot;Source Files&quot;
@@ -1044,6 +1064,26 @@
 					&gt;
 				&lt;/File&gt;
 			&lt;/Filter&gt;
+			&lt;Filter
+				Name=&quot;fmod4driver&quot;
+				&gt;
+				&lt;File
+					RelativePath=&quot;.\src\fmod4driver\Fmod4Driver.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\fmod4driver\Fmod4Listener.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\fmod4driver\Fmod4Sound.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+				&lt;File
+					RelativePath=&quot;.\src\fmod4driver\Fmod4SoundStitching.cpp&quot;
+					&gt;
+				&lt;/File&gt;
+			&lt;/Filter&gt;
 		&lt;/Filter&gt;
 		&lt;Filter
 			Name=&quot;Resource Files&quot;

Modified: rl/branches/newton20/engine/core/include/PhysicsMaterialRaycast.h
===================================================================
--- rl/branches/newton20/engine/core/include/PhysicsMaterialRaycast.h	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/include/PhysicsMaterialRaycast.h	2009-01-26 17:26:56 UTC (rev 4719)
@@ -71,11 +71,13 @@
             const Ogre::Vector3&amp; startpt, const Ogre::Vector3&amp; endpt, bool invertmat = false);
 
         bool userCallback(OgreNewt::Body* body, Ogre::Real distance, const Ogre::Vector3&amp; normal, int collisionID);
+
+
+        bool userPreFilterCallback( OgreNewt::Body *body );  // filtering is now done here!
     private:
         RaycastInfo mInfo;
         const MaterialVector *mMaterialVector;
         const OgreNewt::MaterialID* mMaterial;
-        bool mGetNearest;
         bool mInvertMat;
     };
 

Copied: rl/branches/newton20/engine/core/include/fmod4driver (from rev 4718, rl/trunk/engine/core/include/fmod4driver)

Deleted: rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Driver.h
===================================================================
--- rl/trunk/engine/core/include/fmod4driver/Fmod4Driver.h	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Driver.h	2009-01-26 17:26:56 UTC (rev 4719)
@@ -1,165 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
- */
-#ifndef _FMODDRIVER_H_
-#define _FMODDRIVER_H_
-
-#include &quot;CorePrerequisites.h&quot;
-
-#include &lt;fmod.hpp&gt;
-
-#include &quot;SoundDriver.h&quot;
-
-namespace rl
-{
-
-    typedef std::map&lt;Ogre::String, StringList&gt; DriverMap;
-
-    #define CHECK_FMOD4_ERRORS(fmod4_errorcode)\
-    {\
-        if (fmod4_errorcode != FMOD_OK)\
-        {\
-            Throw(rl::RuntimeException,\
-                &quot;FMOD error #&quot;\
-                + StringConverter::toString(fmod4_errorcode)\
-                + &quot; &quot;\
-                + FMOD_ErrorString(fmod4_errorcode));\
-        }\
-    }
-
-    class Fmod4Sound;
-
-    /** Diese Klasse ist der Treiber, der OpenAL zur
-     * Ausgabe benutzt.
-     */
-    class Fmod4Driver : public rl::SoundDriver
-    {
-    public:
-        /// Der Treibername
-        static Ogre::String NAME;
-        /// Der Konstruktor
-        Fmod4Driver(Ogre::ResourceManager* soundResourceManager);
-        /// Der Destruktor
-        virtual ~Fmod4Driver();
-        /// Ist der Treiber angeschaltet?
-        virtual bool isDriverAvailable();
-        /// Initialisiere den Treiber.
-        virtual bool initialize();
-        /// Deinitialisiere den Treiber.
-        virtual void shutdown();
-        /// Der Name des Treibers
-        virtual Ogre::String getName() const;
-        /// Ist ein Ogre plugin
-        virtual bool isDriverPlugin() { return true; }
-        /// Update-Aufgaben erledigen
-        virtual void update();
-        /// Einen Soundlistener erzeugen
-        virtual ListenerMovable *createListener(const Ogre::String &amp;name);
-
-        virtual void setMasterVolume(const Ogre::Real&amp; vol);
-
-        /**
-         * Returns the current sound driver settings as a key-value list
-         *
-         * @return key-value list of sound options
-         */
-        virtual Ogre::NameValuePairList getSettings() const;
-
-        /**
-         * Sets certain options for the sound driver, like volume settings for
-         * sound effects and music.
-         *
-         * @param settings key-value list of settings
-         */
-        virtual void applySettings(const Ogre::NameValuePairList&amp; settings);
-
-        /**
-         * Sets an eax preset, the preset is defined by a string
-         * @retval true if successfull
-        */
-        virtual bool setEaxPreset(const Ogre::String&amp; name);
-
-        /// Setzt den Faktor f, mit der die Lautstaerke nach der Formel 1/(f*Entfernung) abnimmt
-        virtual void setRolloffFactor(const Ogre::Real&amp;);
-        virtual const Ogre::Real getRolloffFactor();
-
-        /// Datensammlung zurueckgeben
-        const DriverMap&amp; getDriverData() const;
-
-        FMOD::System* _getFmodSystem();
-        void _registerChannel(FMOD::Channel* channel, Fmod4Sound* sound);
-        
-    protected:
-        virtual Sound* createSoundImpl(SoundResourcePtr res, SoundType type);
-        virtual SoundStitching* createSoundStitchingImpl(unsigned int numSlots, const CeGuiString&amp; name);
-
-    private:
-
-        typedef std::map&lt;FMOD::Channel*, Fmod4Sound*&gt; ChannelSoundMap;
-
-        static FMOD_RESULT F_CALLBACK open(
-            const char *  name,
-            int  unicode,
-            unsigned int *  filesize,
-            void **  handle,
-            void **  userdata
-        );
-
-        static FMOD_RESULT F_CALLBACK close(
-            void *  handle,
-            void *  userdata
-        );
-
-        static FMOD_RESULT F_CALLBACK read(
-            void *  handle,
-            void *  buffer,
-            unsigned int  sizebytes,
-            unsigned int *  bytesread,
-            void *  userdata
-        );
-
-        static FMOD_RESULT F_CALLBACK seek(
-            void *  handle,
-            unsigned int  pos,
-            void *  userdata
-        );
-
-        static FMOD_RESULT F_CALLBACK channelCallback(
-            FMOD_CHANNEL* channel,
-            FMOD_CHANNEL_CALLBACKTYPE type,
-            void* commanddata1,
-            void* commanddata2
-        );
-
-        typedef std::map&lt;const Ogre::String, FMOD_REVERB_PROPERTIES&gt; EaxPresetMap;
-        EaxPresetMap mEaxPresetMap;
-
-        void initializeEaxPresetMap();
-
-        /// Log driver config data
-        virtual void printData() const;
-        void printDriverInfo(int driver) const;
-
-        // Wir merken uns die Konfiguration von Fmod4
-        DriverMap mDriverData;
-        /// Stores sounds that are automatically destroyed after having been played.
-        ChannelSoundMap mChannelSoundMap;
-        FMOD::System* mFmod4System;
-        FMOD::ChannelGroup* mMasterChannelGroup;
-
-    };
-}
-
-#endif /*FMODDRIVER_H_*/

Copied: rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Driver.h (from rev 4718, rl/trunk/engine/core/include/fmod4driver/Fmod4Driver.h)

Deleted: rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Listener.h
===================================================================
--- rl/trunk/engine/core/include/fmod4driver/Fmod4Listener.h	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Listener.h	2009-01-26 17:26:56 UTC (rev 4719)
@@ -1,61 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-#ifndef __Fmod4Listener_H__
-#define __Fmod4Listener_H__
-
-#include &quot;CorePrerequisites.h&quot;
-
-#include &lt;fmod.hpp&gt;
-
-#include &quot;ListenerMovable.h&quot;
-
-namespace rl {
-    
-   /** Diese Klasse dient der Interkation mit Ogre3d und Fmod4
-    * und kapselt den Hoerer.
-    * @author Josch
-    * @date 06-29-2005
-    * @version 1.0
-    * @version 2.0
-    */
-    class Fmod4Listener : public ListenerMovable
-    {
-    public:
-        /// Konstruktor
-        Fmod4Listener(const Ogre::String&amp; name, FMOD::System* fmod4system, int listenerId = 0);
-        /// Destruktor
-        virtual ~Fmod4Listener();
-        /// Moveable-Typ
-        virtual const Ogre::String&amp; getMovableType() const;
-    
-        /// Setzt die Position der Soundquelle.
-        virtual void setPosition(const Ogre::Vector3&amp; direction);
-        /// Setzt die Richtung der Soundquelle.
-        virtual void setOrientation(const Ogre::Quaternion &amp;orientation);
-        /// Setzt die Geschwindigkeit der Soundquelle.
-        virtual void setVelocity(const Ogre::Vector3&amp;);
-   
-    protected:
-         /// Shared class-level name for Movable type
-        static Ogre::String msMovableType;
-
-    private:
-        FMOD::System* mFmod4System;
-        int mListenerId;
-    };
-
-}
-#endif

Copied: rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Listener.h (from rev 4718, rl/trunk/engine/core/include/fmod4driver/Fmod4Listener.h)

Deleted: rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Sound.h
===================================================================
--- rl/trunk/engine/core/include/fmod4driver/Fmod4Sound.h	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Sound.h	2009-01-26 17:26:56 UTC (rev 4719)
@@ -1,112 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-#ifndef _FMOD4SOUND_H_
-#define _FMOD4SOUND_H_
-
-#include &quot;CorePrerequisites.h&quot;
-
-#include &lt;fmod.hpp&gt;
-
-#include &quot;Sound.h&quot;
-#include &quot;SoundDriver.h&quot;
-
-namespace rl {
-
-    class Fmod4Driver;
-
-    class Fmod4Sound : public Sound
-    {
-    public:
-        /// Konstruktor
-        Fmod4Sound(Fmod4Driver* driver, SoundResourcePtr soundres, SoundType type = ST_SAMPLE);
-
-        /// Laedt den Sound.
-        virtual void load() throw (RuntimeException);
-        /// Entlaedt den Sound.
-        virtual void unload() throw (RuntimeException);
-        // Running length in seconds
-	    virtual float getLength() const;
-
-		// Sind wir gueltig
-		bool isValid() const throw (RuntimeException);
-
-	    /// Moveable-Typ
-		virtual const Ogre::String&amp; getMovableType() const;
-        /// Gibt die eingestellte Position der Soundquelle zurueck
-		virtual const Ogre::Vector3 getPosition() const;
-		/// Setzt die Position der Soundquelle.
-		virtual void setPosition(const Ogre::Vector3&amp; direction);
-		/// Gibt die eingestellte relative Lautstaerke der Soundquelle zurueck (0..1)
-		virtual const float getVolume() const; 
-		/// Setzt die relative Lautstaerke der Soundquelle (0..1)
-		virtual void setVolume(const float gain);
-		/// Gibt die Richtung der Soundquelle zurueck.
-		virtual const Ogre::Quaternion getDirection() const;
-		/// Gibt die Geschwindigkeit der Soundquelle zurueck.
-		virtual const Ogre::Vector3 getVelocity() const;
-		/// Setzt die Richtung der Soundquelle.
-		virtual void setDirection(const Ogre::Quaternion&amp;);
-		/// Setzt die Geschwindigkeit der Soundquelle.
-		virtual void setVelocity(const Ogre::Vector3&amp;);
-        
-        /// Gibt den FMOD Channel zur&#252;ck.
-        FMOD::Channel* getFmodChannel() const;
-        /// Gibt den FMOD Sound zur&#252;ck.
-        FMOD::Sound* getFmodSound() const;
-
-        virtual void play(bool destroyWhenDone=false);
-		/// Pausiert den Sound.
-		virtual void pause(bool pausing);
-		/// Ist der Sound pausiert?
-		virtual bool isPaused();
-		/// Stoppt den Sound.
-		virtual void stop();
-		/// Laeuft der Sound noch
-		virtual const bool isPlaying() const;
-        
-        // Sets the priority of this sound
-        virtual void setPriority(const int priority);
-        // Gets the priority of this sound
-        virtual const int getPriority() const;
-        
-        
-        /// Should the sound be autodestructed when playing is done.
-        bool isAutoDestroying() const;
-
-    private:
-		/// Shared class-level name for Movable type
-		static Ogre::String msMovableType;
-        FMOD::Channel* mChannel;
-        SoundType mType;
-        FMOD::Sound *mSound;
-        Fmod4Driver* mDriver;
-        bool mAutoDestroy;
-    };
-
-    class Fmod4SoundPtr :
-        public Ogre::SharedPtr&lt;Fmod4Sound&gt;
-    {
-    public:
-        Fmod4SoundPtr() : Ogre::SharedPtr&lt;Fmod4Sound&gt;() {}
-        explicit Fmod4SoundPtr(Fmod4Sound* rep) : Ogre::SharedPtr&lt;Fmod4Sound&gt;(rep) {}
-        Fmod4SoundPtr(const Fmod4SoundPtr&amp; res) : Ogre::SharedPtr&lt;Fmod4Sound&gt;(res) {}
-    protected:
-        void destroy();
-    };
-
-}
-
-#endif /* FMOD3SOUND_H_ */

Copied: rl/branches/newton20/engine/core/include/fmod4driver/Fmod4Sound.h (from rev 4718, rl/trunk/engine/core/include/fmod4driver/Fmod4Sound.h)

Deleted: rl/branches/newton20/engine/core/include/fmod4driver/Fmod4SoundStitching.h
===================================================================
--- rl/trunk/engine/core/include/fmod4driver/Fmod4SoundStitching.h	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/include/fmod4driver/Fmod4SoundStitching.h	2009-01-26 17:26:56 UTC (rev 4719)
@@ -1,116 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-#ifndef _FMOD4SOUNDSTITCHING_H_
-#define _FMOD4SOUNDSTITCHING_H_
-
-#include &quot;CorePrerequisites.h&quot;
-
-#include &lt;fmod.hpp&gt;
-
-#include &quot;SoundStitching.h&quot;
-#include &quot;SoundDriver.h&quot;
-
-namespace rl {
-
-    class Fmod4Driver;
-    typedef std::vector&lt;FMOD::Sound*&gt; SubsoundVector;
-
-    class Fmod4SoundStitching : public SoundStitching
-    {
-    public:
-        /// Konstruktor
-        Fmod4SoundStitching(unsigned int numSlots, const CeGuiString&amp; name, SoundDriver* creator);
-
-        /// Laedt den Sound.
-        virtual void load() throw (RuntimeException);
-        /// Entlaedt den Sound.
-        virtual void unload() throw (RuntimeException);
-
-		// Sind wir gueltig
-		bool isValid() const throw (RuntimeException);
-
-	    /// Moveable-Typ
-		virtual const Ogre::String&amp; getMovableType() const;
-        /// Gibt die eingestellte Position der Soundquelle zurueck
-		virtual const Ogre::Vector3 getPosition() const;
-		/// Setzt die Position der Soundquelle.
-		virtual void setPosition(const Ogre::Vector3&amp; direction);
-		/// Gibt die eingestellte relative Lautstaerke der Soundquelle zurueck (0..1)
-		virtual const float getVolume() const; 
-		/// Setzt die relative Lautstaerke der Soundquelle (0..1)
-		virtual void setVolume(const float gain);
-		/// Gibt die Richtung der Soundquelle zurueck.
-		virtual const Ogre::Quaternion getDirection() const;
-		/// Gibt die Geschwindigkeit der Soundquelle zurueck.
-		virtual const Ogre::Vector3 getVelocity() const;
-		/// Setzt die Richtung der Soundquelle.
-		virtual void setDirection(const Ogre::Quaternion&amp;);
-		/// Setzt die Geschwindigkeit der Soundquelle.
-		virtual void setVelocity(const Ogre::Vector3&amp;);
-        
-        /// Gibt den FMOD Channel zur&#252;ck.
-        FMOD::Channel* getFmodChannel() const;
-        /// Gibt den FMOD Sound zur&#252;ck.
-        FMOD::Sound* getFmodSound() const;
-
-        virtual void play(bool destroyWhenDone=false);
-		/// Pausiert den Sound.
-		virtual void pause(bool pausing);
-		/// Ist der Sound pausiert?
-		virtual bool isPaused();
-		/// Stoppt den Sound.
-		virtual void stop();
-		/// Laeuft der Sound noch
-		virtual const bool isPlaying() const;
-        
-        // Sets the priority of this sound
-        virtual void setPriority(const int priority);
-        // Gets the priority of this sound
-        virtual const int getPriority() const;
-        
-        
-        /// Should the sound be autodestructed when playing is done.
-        bool isAutoDestroying() const;
-
-        /// Assign a sound recource to a slot.
-        virtual void putSoundIntoSlot(unsigned int, CeGuiString label);
-        /// Get the slot of the plaing sound.
-        virtual unsigned int getPlayingSlot();
-
-    private:
-		/// Shared class-level name for Movable type
-		static Ogre::String msMovableType;
-        FMOD::Channel* mChannel;
-        FMOD::Sound *mSound;
-        Fmod4Driver* mDriver;
-        bool mAutoDestroy;
-        SubsoundVector mSoundSlots;
-    };
-
-    class Fmod4SoundStitchingPtr :
-        public Ogre::SharedPtr&lt;Fmod4SoundStitching&gt;
-    {
-    public:
-        Fmod4SoundStitchingPtr() : Ogre::SharedPtr&lt;Fmod4SoundStitching&gt;() {}
-        explicit Fmod4SoundStitchingPtr(Fmod4SoundStitching* rep) : Ogre::SharedPtr&lt;Fmod4SoundStitching&gt;(rep) {}
-        Fmod4SoundStitchingPtr(const Fmod4SoundStitchingPtr&amp; res) : Ogre::SharedPtr&lt;Fmod4SoundStitching&gt;(res) {}
-    protected:
-        void destroy();
-    };
-
-}
-
-#endif /* FMOD3SOUNDSTITCHING_H_ */

Copied: rl/branches/newton20/engine/core/include/fmod4driver/Fmod4SoundStitching.h (from rev 4718, rl/trunk/engine/core/include/fmod4driver/Fmod4SoundStitching.h)

Modified: rl/branches/newton20/engine/core/src/PhysicsMaterialRaycast.cpp
===================================================================
--- rl/branches/newton20/engine/core/src/PhysicsMaterialRaycast.cpp	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/src/PhysicsMaterialRaycast.cpp	2009-01-26 17:26:56 UTC (rev 4719)
@@ -23,7 +23,7 @@
 
 namespace rl {
     PhysicsMaterialRaycast::PhysicsMaterialRaycast()
-        : Raycast(), mInfo(), mMaterial(0), mGetNearest(false)
+        : Raycast(), mInfo(), mMaterial(0)
     {
     }
 
@@ -38,7 +38,6 @@
         mInfo.mDistance = 1.1;
         mInfo.mNormal = Vector3::ZERO;
 
-        mGetNearest = false;
         go(world, start, end);
 
         return mInfo;
@@ -55,14 +54,63 @@
         mInfo.mDistance = 1.1;
         mInfo.mNormal = Vector3::ZERO;
 
-        mGetNearest = false;
         go(world, start, end);
 
         return mInfo;
     }
 
+    bool PhysicsMaterialRaycast::userPreFilterCallback( OgreNewt::Body *body )
+    {
+        if( body-&gt;getMaterialGroupID() == NULL )
+        {
+            LOG_MESSAGE(Logger::CORE, &quot;Warning PhysicsMaterialRaycast found body without material (getMaterialGroupId() == NULL)!&quot;);
+            return true;
+        }
+        else if( body-&gt;getMaterialGroupID() == PhysicsManager::getSingleton().createMaterialID(&quot;gamearea&quot;) ) // don't trigger gameareas
+        {
+            return false;
+        }
+        else
+        {
+            if( mMaterial == NULL &amp;&amp; mMaterialVector == NULL)
+            {
+                return true;
+            }
+            else if( mMaterial != NULL )
+            {
+                if (body-&gt;getMaterialGroupID()-&gt;getID() == mMaterial-&gt;getID() &amp;&amp; !mInvertMat ||
+                    body-&gt;getMaterialGroupID()-&gt;getID() != mMaterial-&gt;getID() &amp;&amp; mInvertMat)
+                {
+                    return true;
+                }
+            }
+            else // mMaterialVector != NULL
+            {
+                bool found = false;
+
+                MaterialVector::const_iterator iter;
+                for(iter = mMaterialVector-&gt;begin(); iter != mMaterialVector-&gt;end(); iter++)
+                {
+                    if (body-&gt;getMaterialGroupID()-&gt;getID() == (*iter)-&gt;getID())
+                    {
+                        found = true;
+                        break;
+                    }
+                }
+
+                if( found &amp;&amp; !mInvertMat || !found &amp;&amp; mInvertMat )
+                {
+                    return true;
+                }
+            }
+        }
+        return false;
+    }
+
     bool PhysicsMaterialRaycast::userCallback(Body* body, Ogre::Real distance, const Ogre::Vector3&amp; normal, int collisionID)
     {
+        return true;
+        /*
         if( body-&gt;getMaterialGroupID() == NULL )
         {
             mInfo.mBody = body;
@@ -118,6 +166,7 @@
             }
         }
         return mGetNearest;
+        */
     }
 
 

Modified: rl/branches/newton20/engine/core/src/SoundManager.cpp
===================================================================
--- rl/branches/newton20/engine/core/src/SoundManager.cpp	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/src/SoundManager.cpp	2009-01-26 17:26:56 UTC (rev 4719)
@@ -29,6 +29,7 @@
 #include &quot;SoundDriver.h&quot;
 #include &quot;SoundResource.h&quot;
 
+#include &quot;Fmod4Driver.h&quot;
 #include &quot;NullDriver.h&quot;
 
 using namespace std;
@@ -59,6 +60,9 @@
         registerDriver(nullDriver);
         setActiveDriver(nullDriver);
 
+		Fmod4Driver* fmod4Driver = new Fmod4Driver(this);
+		registerDriver(fmod4Driver);
+
         mResourceType = &quot;Sound&quot;;
         ResourceGroupManager::getSingleton()._registerResourceManager(mResourceType, this);
 
@@ -250,25 +254,31 @@
             drivername = it-&gt;second;
         }
 
-        try
+
+		SoundDriver *driver = getDriverByName(drivername);
+
+        if (driver == NULL)
         {
-            CoreSubsystem::getSingleton().loadPlugin(drivername);
-        }
-        catch(Ogre::Exception &amp;e)
-        {
-            LOG_MESSAGE(Logger::MULTIMEDIA,
-                CeGuiString(&quot;Soundtreiber kann nicht geladen werden: &quot;)
-                    + drivername + &quot;\n&quot;
-                    + e.getFullDescription());
-        }
-        catch(...)
-        {
-            LOG_MESSAGE(Logger::MULTIMEDIA,
-                 CeGuiString(&quot;Soundtreiber kann nicht geladen werden: &quot;)
-                    + drivername);
-        }
+			try
+			{
+				CoreSubsystem::getSingleton().loadPlugin(drivername);
+			}
+			catch(Ogre::Exception &amp;e)
+			{
+				LOG_MESSAGE(Logger::MULTIMEDIA,
+					CeGuiString(&quot;Soundtreiber kann nicht geladen werden: &quot;)
+						+ drivername + &quot;\n&quot;
+						+ e.getFullDescription());
+			}
+			catch(...)
+			{
+				LOG_MESSAGE(Logger::MULTIMEDIA,
+					 CeGuiString(&quot;Soundtreiber kann nicht geladen werden: &quot;)
+						+ drivername);
+			}
+		}
 
-        SoundDriver *driver = getDriverByName(drivername);
+        driver = getDriverByName(drivername);
 
         if (driver == NULL)
         {

Copied: rl/branches/newton20/engine/core/src/fmod4driver (from rev 4718, rl/trunk/engine/core/src/fmod4driver)

Deleted: rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Driver.cpp
===================================================================
--- rl/trunk/engine/core/src/fmod4driver/Fmod4Driver.cpp	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Driver.cpp	2009-01-26 17:26:56 UTC (rev 4719)
@@ -1,493 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
- */
-#include &quot;stdinc.h&quot;
-
-#include &lt;fmod_errors.h&gt;
-
-#include &quot;Fmod4Driver.h&quot;
-#include &quot;Fmod4Sound.h&quot;
-#include &quot;Fmod4SoundStitching.h&quot;
-#include &quot;Fmod4Listener.h&quot;
-#include &quot;Logger.h&quot;
-#include &quot;SoundResource.h&quot;
-
-using namespace Ogre;
-using namespace std;
-
-namespace rl
-{
-    // Used by FMOD-Callbacks, which are not C++-functions, but C-functions.
-    Ogre::ResourceManager* gSoundResourceManager = NULL;
-    Fmod4Driver* gDriver = NULL;
-
-    String Fmod4Driver::NAME = &quot;RlFmod4Driver&quot;;
-
-    Fmod4Driver::Fmod4Driver(Ogre::ResourceManager *soundResourceManager)
-        : SoundDriver(soundResourceManager),
-        mMasterChannelGroup(NULL)
-    {
-        gSoundResourceManager = soundResourceManager;
-        gDriver = this;
-    }
-
-    Fmod4Driver::~Fmod4Driver()
-    {
-    }
-
-    String Fmod4Driver::getName() const
-    {
-        return NAME;
-    }
-
-    bool Fmod4Driver::initialize()
-    {
-        static int MAX_VIRTUAL_CHANNELS = 100;
-
-        CHECK_FMOD4_ERRORS(FMOD::System_Create(&amp;mFmod4System));
-
-        mFmod4System-&gt;setFileSystem(
-            Fmod4Driver::open,
-            Fmod4Driver::close,
-            Fmod4Driver::read,
-            Fmod4Driver::seek,
-            -1);
-
-        printData();
-
-        mFmod4System-&gt;setDriver(-1);
-        //CHECK_FMOD4_ERRORS(mFmod4System-&gt;setOutput(FMOD_OUTPUTTYPE_ESD));
-
-        FMOD_RESULT result = mFmod4System-&gt;init(MAX_VIRTUAL_CHANNELS, FMOD_INIT_NORMAL, NULL);
-        if (result != FMOD_OK)
-        {
-            LOG_ERROR(Logger::CORE,
-                &quot;FMOD error #&quot;
-                + StringConverter::toString(result)
-                + &quot; &quot;
-                + FMOD_ErrorString(result));
-
-            return false;
-        }
-
-        mFmod4System-&gt;getMasterChannelGroup(&amp;mMasterChannelGroup);
-
-        initializeEaxPresetMap();
-        return true;
-    }
-
-    void Fmod4Driver::shutdown()
-    {
-        CHECK_FMOD4_ERRORS(mFmod4System-&gt;close());
-        CHECK_FMOD4_ERRORS(mFmod4System-&gt;release());
-    }
-
-    bool Fmod4Driver::isDriverAvailable()
-    {
-        FMOD::System* system;
-        FMOD_RESULT result = FMOD::System_Create(&amp;system);
-        if (result != FMOD_OK)
-        {
-            return false;
-        }
-
-        system-&gt;release();
-        return true;
-    }
-
-    void Fmod4Driver::update()
-    {
-        mFmod4System-&gt;update();
-    }
-
-    Sound* Fmod4Driver::createSoundImpl(SoundResourcePtr res, SoundType type)
-    {
-        Sound* sound = new Fmod4Sound(this, res, type);
-        return sound;
-    }
-
-
-    SoundStitching *Fmod4Driver::createSoundStitchingImpl(unsigned int numSlots, const CeGuiString&amp; name)
-    {
-         SoundStitching* soundstitching = new Fmod4SoundStitching(numSlots, name, this);
-         return soundstitching;
-    }
-
-    ListenerMovable *Fmod4Driver::createListener(const Ogre::String &amp;name)
-    {
-        return new Fmod4Listener(name, mFmod4System);
-    }
-
-    FMOD::System* Fmod4Driver::_getFmodSystem()
-    {
-        return mFmod4System;
-    }
-
-    void Fmod4Driver::applySettings(const Ogre::NameValuePairList&amp; settings)
-    {
-        SoundDriver::applySettings(settings);
-        mMasterChannelGroup-&gt;setVolume(mMasterVolume);
-    }
-
-#define DEF_PRESET(NAME, DEFINITION) \
-    { \
-        FMOD_REVERB_PROPERTIES prop = DEFINITION; \
-        mEaxPresetMap.insert(make_pair(NAME, prop)); \
-    }
-
-    void Fmod4Driver::initializeEaxPresetMap()
-    {
-        DEF_PRESET(&quot;Alley&quot;, FMOD_PRESET_ALLEY);
-        DEF_PRESET(&quot;Arena&quot;, FMOD_PRESET_ARENA);
-        DEF_PRESET(&quot;Auditorium&quot;, FMOD_PRESET_AUDITORIUM);
-        DEF_PRESET(&quot;Bathroom&quot;, FMOD_PRESET_BATHROOM);
-        DEF_PRESET(&quot;Carpetted Hallway&quot;, FMOD_PRESET_CARPETTEDHALLWAY);
-        DEF_PRESET(&quot;Cave&quot;, FMOD_PRESET_CAVE);
-        DEF_PRESET(&quot;City&quot;, FMOD_PRESET_CITY);
-        DEF_PRESET(&quot;Concert Hall&quot;, FMOD_PRESET_CONCERTHALL);
-        DEF_PRESET(&quot;Dizzy&quot;, FMOD_PRESET_DIZZY);
-        DEF_PRESET(&quot;Drugged&quot;, FMOD_PRESET_DRUGGED);
-        DEF_PRESET(&quot;Forest&quot;, FMOD_PRESET_FOREST);
-        DEF_PRESET(&quot;Generic&quot;, FMOD_PRESET_GENERIC);
-        DEF_PRESET(&quot;Hallway&quot;, FMOD_PRESET_HALLWAY);
-        DEF_PRESET(&quot;Hangar&quot;, FMOD_PRESET_HANGAR);
-        DEF_PRESET(&quot;Living Room&quot;, FMOD_PRESET_LIVINGROOM);
-        DEF_PRESET(&quot;Mountains&quot;, FMOD_PRESET_MOUNTAINS);
-        DEF_PRESET(&quot;Off&quot;, FMOD_PRESET_OFF);
-        DEF_PRESET(&quot;Padded Cell&quot;, FMOD_PRESET_PADDEDCELL);
-        DEF_PRESET(&quot;Parkinglot&quot;, FMOD_PRESET_PARKINGLOT);
-        DEF_PRESET(&quot;Plain&quot;, FMOD_PRESET_PLAIN);
-        DEF_PRESET(&quot;Psychotic&quot;, FMOD_PRESET_PSYCHOTIC);
-        DEF_PRESET(&quot;Quarry&quot;, FMOD_PRESET_QUARRY);
-        DEF_PRESET(&quot;Room&quot;, FMOD_PRESET_ROOM);
-        DEF_PRESET(&quot;Sewerpipe&quot;, FMOD_PRESET_SEWERPIPE);
-        DEF_PRESET(&quot;Stone Corridor&quot;, FMOD_PRESET_STONECORRIDOR);
-        DEF_PRESET(&quot;Stone Room&quot;, FMOD_PRESET_STONEROOM);
-        DEF_PRESET(&quot;Underwater&quot;, FMOD_PRESET_UNDERWATER);
-    }
-#undef DEF_PRESET
-
-    bool Fmod4Driver::setEaxPreset(const Ogre::String&amp; name)
-    {
-        EaxPresetMap::iterator it = mEaxPresetMap.find(name);
-
-        if( it != mEaxPresetMap.end() )
-        {
-            FMOD_RESULT result;
-            result = mFmod4System-&gt;setReverbProperties(&amp;(it-&gt;second)); ///@todo seems not to work correctly
-            CHECK_FMOD4_ERRORS(result);
-        }
-
-        return false;
-    }
-
-    Ogre::NameValuePairList Fmod4Driver::getSettings() const
-    {
-        return SoundDriver::getSettings();
-    }
-
-    void Fmod4Driver::printData() const
-    {
-        int numDrivers;
-        mFmod4System-&gt;getNumDrivers(&amp;numDrivers);
-
-        for (int i = 0; i &lt; numDrivers; i++)
-        {
-            printDriverInfo(i);
-        }
-
-        int numPlugins;
-        mFmod4System-&gt;getNumPlugins(FMOD_PLUGINTYPE_CODEC, &amp;numPlugins);
-        for (int i = 0; i &lt; numPlugins; i++)
-        {
-            char pluginName[128];
-            unsigned int version;
-			FMOD_PLUGINTYPE type = FMOD_PLUGINTYPE_CODEC;
-			unsigned int handle;
-			FMOD_RESULT result = mFmod4System-&gt;getPluginHandle(FMOD_PLUGINTYPE_CODEC, i, &amp;handle);
-			CHECK_FMOD4_ERRORS(result);
-
-            result = mFmod4System-&gt;getPluginInfo(
-                handle,
-                &amp;type,
-				pluginName,
-                127,
-                &amp;version);
-			CHECK_FMOD4_ERRORS(result);
-            LOG_MESSAGE(Logger::MULTIMEDIA,
-                String(&quot;Fmod4Driver Plugin '&quot;)
-                + pluginName
-                + &quot;' Version &quot;
-                + StringConverter::toString(version));
-        }
-    }
-
-    void Fmod4Driver::printDriverInfo(int driver) const
-    {
-        int curdriver;
-        mFmod4System-&gt;getDriver(&amp;curdriver);
-
-        char name[128];
-        mFmod4System-&gt;getDriverInfo(driver, name, 127, NULL);
-
-        FMOD_CAPS caps;
-        int minfreq, maxfreq;
-        FMOD_SPEAKERMODE speakermode;
-        mFmod4System-&gt;getDriverCaps(driver, &amp;caps, &amp;minfreq, &amp;maxfreq, &amp;speakermode);
-
-        LOG_MESSAGE(Logger::MULTIMEDIA,
-            String(&quot;Fmod4Driver '&quot;)
-            + name
-            + &quot;'&quot;
-            + (driver == curdriver ? &quot;(cur)&quot; : &quot;&quot;)
-            + &quot;: \n&quot;
-            + &quot;Freq &quot; + StringConverter::toString(minfreq)
-            + &quot; - &quot; + StringConverter::toString(maxfreq));
-
-        int hard2d, hard3d, hardtotal;
-        mFmod4System-&gt;getHardwareChannels(&amp;hard2d, &amp;hard3d, &amp;hardtotal);
-        LOG_MESSAGE(Logger::MULTIMEDIA,
-            String(&quot;Fmod4Driver '&quot;)
-            + name + &quot;' Hardware Channels: &quot;
-            + &quot;2D #&quot; + StringConverter::toString(hard2d)
-            + &quot;, 3D #&quot; + StringConverter::toString(hard3d)
-            + &quot;, Total #&quot; + StringConverter::toString(hardtotal));
-
-        int softchannels;
-        mFmod4System-&gt;getSoftwareChannels(&amp;softchannels);
-        LOG_MESSAGE(Logger::MULTIMEDIA,
-            String(&quot;Fmod4Driver '&quot;)
-            + name + &quot;' Software Channels: &quot;
-            + &quot;#&quot; + StringConverter::toString(softchannels));
-
-        FMOD_OUTPUTTYPE output;
-        mFmod4System-&gt;getOutput(&amp;output);
-        String outputName;
-
-        if(output == FMOD_OUTPUTTYPE_AUTODETECT)
-            outputName = &quot;Autodetect&quot;;
-        else if(output == FMOD_OUTPUTTYPE_UNKNOWN)
-            outputName = &quot;Unknown&quot;;
-        else if(output == FMOD_OUTPUTTYPE_NOSOUND)
-            outputName = &quot;No Sound&quot;;
-        else if(output == FMOD_OUTPUTTYPE_WAVWRITER)
-            outputName = &quot;Wave Writer&quot;;
-        else if(output == FMOD_OUTPUTTYPE_NOSOUND_NRT)
-            outputName = &quot;No Sound non realtime&quot;;
-        else if(output == FMOD_OUTPUTTYPE_WAVWRITER_NRT)
-            outputName = &quot;Wave Writer non realtime&quot;;
-        else if(output == FMOD_OUTPUTTYPE_DSOUND)
-            outputName = &quot;DirectSound&quot;;
-        else if(output == FMOD_OUTPUTTYPE_WINMM)
-            outputName = &quot;Windows Multimedia&quot;;
-        else if(output == FMOD_OUTPUTTYPE_ASIO)
-            outputName = &quot;Low Latency ASIO driver&quot;;
-        else if(output == FMOD_OUTPUTTYPE_OSS)
-            outputName = &quot;Open Sound System (OSS)&quot;;
-        else if(output == FMOD_OUTPUTTYPE_ALSA)
-            outputName = &quot;Advanced Linux Sound Architecture (ALSA)&quot;;
-        else if(output == FMOD_OUTPUTTYPE_ESD)
-            outputName = &quot;Enlightment Sound Daemon (ESD)&quot;;
-        else if(output == FMOD_OUTPUTTYPE_SOUNDMANAGER)
-            outputName = &quot;Macintosh SoundManager&quot;;
-        else if(output == FMOD_OUTPUTTYPE_COREAUDIO)
-            outputName = &quot;Macintosh CoreAudio&quot;;
-
-        LOG_MESSAGE(Logger::MULTIMEDIA,
-            String(&quot;Fmod4Driver '&quot;)
-            + name + &quot;' Output: &quot; + outputName);
-    }
-
-    FMOD_RESULT F_CALLBACK Fmod4Driver::open(
-        const char *  name,
-        int  unicode,
-        unsigned int *  filesize,
-        void **  handle,
-        void **  userdata)
-    {
-        SoundResourcePtr* res = new SoundResourcePtr(gSoundResourceManager-&gt;getByName(name));
-        LOG_DEBUG(Logger::MULTIMEDIA,
-            &quot;Opened stream &quot; + (*res)-&gt;getName());
-        (*res)-&gt;load();
-        *filesize = (*res)-&gt;getSize();
-        *handle = res;
-        return FMOD_OK;
-    }
-
-    FMOD_RESULT F_CALLBACK Fmod4Driver::close(
-        void *  handle,
-        void *  userdata)
-    {
-           SoundResourcePtr *res = static_cast&lt;SoundResourcePtr*&gt;(handle);
-        LOG_DEBUG(Logger::MULTIMEDIA,
-            &quot;Closing stream &quot; + (*res)-&gt;getName());
-        (*res)-&gt;unload();
-        delete res;
-        return FMOD_OK;
-    }
-
-    FMOD_RESULT F_CALLBACK Fmod4Driver::read(
-        void*  handle,
-        void*  buffer,
-        unsigned int  sizebytes,
-        unsigned int* bytesread,
-        void*  userdata)
-    {
-        if (handle == NULL)
-        {
-            return FMOD_ERR_INVALID_PARAM;
-        }
-
-        SoundResourcePtr *sound = static_cast&lt;SoundResourcePtr*&gt;(handle);
-        if (!sound-&gt;isNull())
-        {
-            if (!(*sound)-&gt;isLoaded())
-            {
-                (*sound)-&gt;load();
-            }
-
-            DataStreamPtr ds = (*sound)-&gt;getDataStream();
-            if (!ds.isNull())
-            {
-                *bytesread = ds-&gt;read(buffer, sizebytes);
-                if (*bytesread &lt; sizebytes)
-                {
-                    return FMOD_ERR_FILE_EOF;
-                }
-                return FMOD_OK;
-            }
-        }
-
-        return FMOD_ERR_FILE_EOF;
-    }
-
-    FMOD_RESULT F_CALLBACK Fmod4Driver::seek(
-        void *  handle,
-        unsigned int  pos,
-        void *  userdata)
-    {
-        if (handle == NULL)
-        {
-            return FMOD_ERR_INVALID_PARAM;
-        }
-
-        SoundResourcePtr *sound = static_cast&lt;SoundResourcePtr*&gt;(handle);
-        if (!sound-&gt;isNull())
-        {
-            DataStreamPtr ds = (*sound)-&gt;getDataStream();
-            if (!ds.isNull())
-            {
-                ds-&gt;seek(pos);
-                return FMOD_OK;
-            }
-        }
-        return FMOD_ERR_INVALID_PARAM;
-    }
-
-/**
- * This static method is as channel callback, so that we get callbacks
- * from FMOD
- * @author Blakharaz
- * @version 1.0
- * @author JoSch
- * @version 1.1
- * @date 07-03-2007
- * @param _channel The channel for which the callback is registered.
- * @param type Type of the event.
- * @param command A commando
- * @param commanddata1 Data
- * @param commanddata2 Data
- */
-FMOD_RESULT F_CALLBACK Fmod4Driver::channelCallback(
-    FMOD_CHANNEL *_channel,
-    FMOD_CHANNEL_CALLBACKTYPE type,
-    void* commanddata1, 
-    void* commanddata2)
-{
-    /// Extract the Fmod channel and then our Sound object.
-    FMOD::Channel* channel = (FMOD::Channel*)_channel;
-    RlAssert1(channel != NULL);
-    ChannelSoundMap::iterator it = gDriver-&gt;mChannelSoundMap.find((FMOD::Channel*)channel);
-    if (it != gDriver-&gt;mChannelSoundMap.end())
-    {
-        Fmod4Sound* sound = it-&gt;second;
-        RlAssert1(sound != NULL);
-        switch(type)
-        {
-            case FMOD_CHANNEL_CALLBACKTYPE_END:
-                {
-                    // We dispatch a stop event
-                    SoundPlayEvent event(NULL, SoundPlayEvent::STOPEVENT);
-                    sound-&gt;dispatchEvent(&amp;event);
-                    // If the sound is set for autodestruction,
-                    // we destroy it now.
-                    if (sound-&gt;isAutoDestroying())
-                    {
-                        gDriver-&gt;destroySound(sound);
-                        gDriver-&gt;mChannelSoundMap.erase(it);
-                    }
-                }
-                break;
-                
-            case FMOD_CHANNEL_CALLBACKTYPE_SYNCPOINT:
-                {
-                    FMOD::Sound *fmodsound = NULL;
-                    FMOD_SYNCPOINT* syncpoint = NULL;
-                    SoundTimingEvent event(NULL, SoundTimingEvent::TIMEEVENT);
-        
-                    // We get the time point of the sync point and put it in a timing event.
-                    sound-&gt;getFmodChannel()-&gt;getCurrentSound(&amp;fmodsound);
-                    fmodsound-&gt;getSyncPoint(*static_cast&lt;int*&gt;(commanddata1), &amp;syncpoint);
-                    fmodsound-&gt;getSyncPointInfo(syncpoint, NULL, 0, &amp;event.mTime, FMOD_TIMEUNIT_MS);
-                    sound-&gt;dispatchEvent(&amp;event);
-                }
-                break;
-             case FMOD_CHANNEL_CALLBACKTYPE_VIRTUALVOICE:
-                {
-                }
-                break;
-        }
-    }  
-    return FMOD_OK;
-}
-
-
-    void Fmod4Driver::setMasterVolume(const Ogre::Real&amp; vol)
-    {
-        SoundDriver::setMasterVolume(vol);
-    }
-
-    void Fmod4Driver::setRolloffFactor(const Ogre::Real&amp; factor)
-    {
-        float dopplerScale;
-        mFmod4System-&gt;get3DSettings(&amp;dopplerScale, NULL, NULL);
-        mFmod4System-&gt;set3DSettings(dopplerScale, 1.0, factor);
-    }
-
-    const Ogre::Real Fmod4Driver::getRolloffFactor()
-    {
-        float factor;
-        mFmod4System-&gt;get3DSettings(NULL, NULL, &amp;factor);
-        return factor;
-    }
-
-    void Fmod4Driver::_registerChannel(FMOD::Channel* channel, Fmod4Sound* sound)
-    {
-        FMOD_RESULT res = channel-&gt;setCallback(channelCallback);
-        CHECK_FMOD4_ERRORS(res);
-        mChannelSoundMap.insert(std::make_pair(channel, sound));
-    }
-
-}

Copied: rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Driver.cpp (from rev 4718, rl/trunk/engine/core/src/fmod4driver/Fmod4Driver.cpp)

Deleted: rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Listener.cpp
===================================================================
--- rl/trunk/engine/core/src/fmod4driver/Fmod4Listener.cpp	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Listener.cpp	2009-01-26 17:26:56 UTC (rev 4719)
@@ -1,77 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-#include &quot;stdinc.h&quot;
-
-#include &quot;Fmod4Listener.h&quot;
-
-using namespace Ogre;
-
-namespace rl {
-
-String rl::Fmod4Listener::msMovableType = &quot;Fmod4Listener&quot;; 
-
-Fmod4Listener::Fmod4Listener(const Ogre::String &amp;name, FMOD::System *fmod4system, int listenerId)
-: ListenerMovable(name),
-  mFmod4System(fmod4system),
-  mListenerId(listenerId)
-{
-}
-
-Fmod4Listener::~Fmod4Listener()
-{
-}
-
-const String&amp; Fmod4Listener::getMovableType() const
-{
-    return msMovableType;
-}
-
-void Fmod4Listener::setPosition(const Vector3&amp; position)
-{
-    FMOD_VECTOR pos;
-    pos.x = position.x;
-    pos.y = position.y;
-    pos.z = -position.z;
-    mFmod4System-&gt;set3DListenerAttributes(mListenerId, &amp;pos, NULL, NULL, NULL);
-}
-
-void Fmod4Listener::setOrientation(const Ogre::Quaternion &amp;orientation)
-{
-    FMOD_VECTOR up, to;
-
-    Vector3 upVec = orientation * Vector3::UNIT_Y;
-    up.x = upVec.x;
-    up.y = upVec.y;
-    up.z = -upVec.z;
-
-    Vector3 toVec = orientation * Vector3::NEGATIVE_UNIT_Z;
-    to.x = toVec.x;
-    to.y = toVec.y;
-    to.z = -toVec.z;
-
-    mFmod4System-&gt;set3DListenerAttributes(mListenerId, NULL, NULL, &amp;to, &amp;up);
-}
-
-void Fmod4Listener::setVelocity(const Ogre::Vector3&amp; velocity)
-{
-    FMOD_VECTOR vel;
-    vel.x = velocity.x;
-    vel.y = velocity.y;
-    vel.z = -velocity.z;
-    mFmod4System-&gt;set3DListenerAttributes(mListenerId, NULL, &amp;vel, NULL, NULL);
-}
-
-}

Copied: rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Listener.cpp (from rev 4718, rl/trunk/engine/core/src/fmod4driver/Fmod4Listener.cpp)

Deleted: rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Sound.cpp
===================================================================
--- rl/trunk/engine/core/src/fmod4driver/Fmod4Sound.cpp	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Sound.cpp	2009-01-26 17:26:56 UTC (rev 4719)
@@ -1,377 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-#include &quot;stdinc.h&quot;
-
-#include &quot;Fmod4Sound.h&quot;
-
-#include &lt;fmod_errors.h&gt;
-
-#include &quot;Fmod4Driver.h&quot;
-#include &quot;SoundManager.h&quot;
-#include &quot;SoundResource.h&quot;
-
-using namespace Ogre;
-
-namespace rl {
-
-String Fmod4Sound::msMovableType = &quot;Fmod4Sound&quot;;
- 
-Fmod4Sound::Fmod4Sound(Fmod4Driver* driver, SoundResourcePtr soundres, SoundType type)
-  : Sound(soundres, driver),
-    mType(type),
-    mSound(NULL),
-    mDriver(driver),
-    mChannel(NULL)	
-{
-    setPriority(128);
-}
-
-float Fmod4Sound::getLength() const
-{
-    if (!isValid())
-    {
-        return 0.0;
-    }
-
-    unsigned int length;
-    mSound-&gt;getLength(&amp;length, FMOD_TIMEUNIT_MS);
-    return (float)length/1000.0;
-}
-
-void Fmod4Sound::load() throw (RuntimeException)
-{
-    FMOD_MODE mode = FMOD_DEFAULT;
-
-    if (is3d())
-    {
-        mode |= FMOD_3D;
-    }
-    else
-    {
-        mode |= FMOD_2D;
-    }
-
-    if (isLooping())
-    {
-        mode |= FMOD_LOOP_NORMAL;
-    }
-    else
-    {
-        mode |= FMOD_LOOP_OFF;
-    }
-
-    if (mType == ST_SAMPLE)
-    {
-        FMOD_RESULT res = mDriver-&gt;_getFmodSystem()-&gt;createSound(
-            getSoundResource()-&gt;getName().c_str(), 
-            mode, 
-            NULL, 
-            &amp;mSound);
-
-        CHECK_FMOD4_ERRORS(res);
-    }
-    else if (mType == ST_STREAM)
-    {
-        FMOD_RESULT res = mDriver-&gt;_getFmodSystem()-&gt;createStream(
-            getSoundResource()-&gt;getName().c_str(), 
-            mode, 
-            NULL, 
-            &amp;mSound);
-
-        CHECK_FMOD4_ERRORS(res);
-    }
-    else
-    {
-        RlFail(&quot;Unsupported SoundType.&quot;);
-    }
-}
-
-void Fmod4Sound::unload() throw (RuntimeException)
-{
-    mSound-&gt;release();
-}
-
-bool Fmod4Sound::isValid() const throw (RuntimeException)
-{
-    return mSound != NULL &amp;&amp; mChannel != NULL;
-}
-
-void Fmod4SoundPtr::destroy()
-{
-    SharedPtr&lt;Fmod4Sound&gt;::destroy();
-}
-
-const String&amp; Fmod4Sound::getMovableType() const
-{
-    return msMovableType;
-}
-
-void Fmod4Sound::play(bool destroyWhenDone)
-{
-    if (!isValid())
-    {
-        load();
-    }
-
-    FMOD_RESULT res = mDriver-&gt;_getFmodSystem()-&gt;playSound(
-        FMOD_CHANNEL_FREE, 
-        mSound, 
-        true,
-        &amp;mChannel);
-
-    CHECK_FMOD4_ERRORS(res);
-
-    RlAssert1(mChannel != NULL);
-    mAutoDestroy = destroyWhenDone;
-    mDriver-&gt;_registerChannel(mChannel, this);
-
-    float vol;
-	if (is3d())
-	{
-		vol = mDriver-&gt;getDefaultSoundVolume();
-	}
-	else
-	{
-		vol = mDriver-&gt;getDefaultMusicVolume();
-	}
-	setVolume(vol);
-
-    setPriority(mPriority);
-    setPosition(mPosition);
-    setDirection(mDirection);
-	setVelocity(mVelocity); 
-    pause(false);
-    SoundPlayEvent event = SoundPlayEvent(this, SoundPlayEvent::STARTEVENT);
-    dispatchEvent(&amp;event);
-}
-
-void Fmod4Sound::stop()
-{
-    mChannel-&gt;stop();
-}
-
-void Fmod4Sound::setPosition(const Ogre::Vector3&amp; position)
-{
-	mPosition = position;
-
-	if (isValid())
-	{
-		FMOD_VECTOR pos;
-		pos.x = position.x;
-		pos.y = position.y;
-		pos.z = -position.z;
-		mChannel-&gt;set3DAttributes(&amp;pos, NULL);
-	}
-}
-
-const Ogre::Vector3 Fmod4Sound::getPosition() const
-{
-	if (isValid())
-	{
-		FMOD_VECTOR pos;
-		mChannel-&gt;get3DAttributes(&amp;pos, NULL);
-
-		Vector3 rval;
-		rval.x = pos.x;
-		rval.y = pos.y;
-		rval.z = -pos.z;
-
-		return rval;
-	}
-
-	return mPosition;
-}
-
-const Ogre::Vector3 Fmod4Sound::getVelocity() const
-{
-	if (isValid())
-	{
-		FMOD_VECTOR vel;
-		mChannel-&gt;get3DAttributes(NULL, &amp;vel);
-
-		Vector3 rval;
-		rval.x = vel.x;
-		rval.y = vel.y;
-		rval.z = -vel.z;
-
-		return rval;
-	}
-
-	return mVelocity;
-}
-
-void Fmod4Sound::setVelocity(const Ogre::Vector3&amp; velocity)
-{
-	mVelocity = velocity;
-
-	if (isValid())
-	{
-		FMOD_VECTOR vel;
-		vel.x = velocity.x;
-		vel.y = velocity.y;
-		vel.z = -velocity.z;
-		mChannel-&gt;set3DAttributes(NULL, &amp;vel);
-	}
-}
-
-void Fmod4Sound::setDirection(const Ogre::Quaternion &amp;orientation)
-{
-	mDirection = orientation;
-
-	if (isValid())
-	{
-		FMOD_VECTOR to;
-
-		Vector3 toVec = orientation * Vector3::NEGATIVE_UNIT_Z;
-		to.x = toVec.x;
-		to.y = toVec.y;
-		to.z = -toVec.z;
-
-		mChannel-&gt;set3DConeOrientation(&amp;to);
-	}
-}
-
-const Ogre::Quaternion Fmod4Sound::getDirection() const
-{
-	if (isValid())
-	{
-		FMOD_VECTOR to;
-		mChannel-&gt;get3DConeOrientation(&amp;to);
-
-		Vector3 toVec;
-		toVec.x = to.x;
-		toVec.y = to.y;
-		toVec.z = -to.z;
-
-		return Vector3::NEGATIVE_UNIT_Z.getRotationTo(toVec);
-	}
-
-	return mDirection;
-}
-
-bool Fmod4Sound::isPaused()
-{
-    bool paused;
-    FMOD_RESULT error = mChannel-&gt;getPaused(&amp;paused);
-    return !paused;
-}
-
-const bool Fmod4Sound::isPlaying() const
-{
-    bool playing;
-    FMOD_RESULT error = mChannel-&gt;isPlaying(&amp;playing);
-    return playing;
-}
-
-void Fmod4Sound::pause(bool pause)
-{
-    mChannel-&gt;setPaused(pause);
-}
-
-void Fmod4Sound::setVolume(float vol)
-{
-	mVolume = vol;
-	if (isValid())
-	{
-	    mChannel-&gt;setVolume(vol);
-	}
-}
-
-const float Fmod4Sound::getVolume() const
-{
-	if (isValid())
-	{
-		float vol;
-		mChannel-&gt;getVolume(&amp;vol);
-		return vol;
-	}
-	return mVolume;
-}
-
-/**
- * @author JoSch
- * @date 14-03-2007
- * @version 1.0
- * @param priority The new priority of this sound
- */ 
-void Fmod4Sound::setPriority(const int priority)
-{
-    mPriority = priority;
-    if (mPriority &lt; 0)
-    {
-        mPriority = 0;
-    }
-    if (mPriority &gt; 256)
-    {
-        mPriority = 256;
-    }
-    if (isValid())
-    {
-        mChannel-&gt;setPriority(mPriority);
-    }
-}
-
-/**
- * @author JoSch
- * @date 14-03-2007
- * @version 1.0
- * @return The new priority of this sound
- */ 
-const int Fmod4Sound::getPriority() const
-{
-    int priority = mPriority;
-    if (isValid())
-    {
-        mChannel-&gt;getPriority(&amp;priority);
-    }
-    return priority;
-}
-
-
-/**
- * @author JoSch
- * @date 15-03-2007
- * @version 1.0
- * @return The Fmod4 Channel object
- */ 
-FMOD::Channel *Fmod4Sound::getFmodChannel() const
-{
-    return mChannel;
-}
-
-/**
- * @author JoSch
- * @date 15-03-2007
- * @version 1.0
- * @return The Fmod4 Sound object
- */ 
-FMOD::Sound *Fmod4Sound::getFmodSound() const
-{
-    return mSound;
-}
-
-/**
- * @author JoSch
- * @date 15-03-2007
- * @version 1.0
- * @return TRUE, if the sound should autodestroy when playing ended.
- */ 
-bool Fmod4Sound::isAutoDestroying() const
-{
-    return mAutoDestroy;
-}
-
-} // Namespace

Copied: rl/branches/newton20/engine/core/src/fmod4driver/Fmod4Sound.cpp (from rev 4718, rl/trunk/engine/core/src/fmod4driver/Fmod4Sound.cpp)

Deleted: rl/branches/newton20/engine/core/src/fmod4driver/Fmod4SoundStitching.cpp
===================================================================
--- rl/trunk/engine/core/src/fmod4driver/Fmod4SoundStitching.cpp	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/core/src/fmod4driver/Fmod4SoundStitching.cpp	2009-01-26 17:26:56 UTC (rev 4719)
@@ -1,427 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2008 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-#include &quot;stdinc.h&quot;
-
-#include &quot;Fmod4SoundStitching.h&quot;
-
-#include &lt;fmod_errors.h&gt;
-
-#include &quot;Fmod4Driver.h&quot;
-#include &quot;SoundManager.h&quot;
-#include &quot;SoundResource.h&quot;
-
-using namespace Ogre;
-
-namespace rl {
-
-String Fmod4SoundStitching::msMovableType = &quot;Fmod4SoundStitching&quot;;
- 
-Fmod4SoundStitching::Fmod4SoundStitching(unsigned int numSlots, const CeGuiString&amp; name, SoundDriver* creator)
-  : SoundStitching(numSlots, name, creator),
-    mSound(NULL),
-    mChannel(NULL)	
-{
-    setPriority(128);
-}
-
-void Fmod4SoundStitching::load() throw (RuntimeException)
-{
-    FMOD_CREATESOUNDEXINFO exinfo;
-    FMOD_MODE mode = FMOD_OPENUSER;
-
-    if (is3d())
-    {
-        mode |= FMOD_3D;
-    }
-    else
-    {
-        mode |= FMOD_2D;
-    }
-
-    if (isLooping())
-    {
-        mode |= FMOD_LOOP_NORMAL;
-    }
-    else
-    {
-        mode |= FMOD_LOOP_OFF;
-    }
-
-    memset(&amp;exinfo, 0, sizeof(FMOD_CREATESOUNDEXINFO));
-    
-    exinfo.cbsize = sizeof(FMOD_CREATESOUNDEXINFO);
-    exinfo.defaultfrequency = 44100;
-    exinfo.numsubsounds = getNumSlots();
-    exinfo.numchannels = is3d() ? 1 : 2;
-    exinfo.format = FMOD_SOUND_FORMAT_PCM16;
-
-    FMOD_RESULT res = mDriver-&gt;_getFmodSystem()-&gt;createStream(
-        getSoundResource()-&gt;getName().c_str(), 
-        mode, 
-        &amp;exinfo, 
-        &amp;mSound);
-
-    CHECK_FMOD4_ERRORS(res);
-
-    int *sentence = new int[getNumSlots()];
-    for(unsigned int i = 0; i &lt; getNumSlots(); i++)
-    {
-        sentence[i] = i;
-    }
-    res = mSound-&gt;setSubSoundSentence(sentence, getNumSlots());
-    CHECK_FMOD4_ERRORS(res);
-}
-
-void Fmod4SoundStitching::unload() throw (RuntimeException)
-{
-    mSound-&gt;release();
-}
-
-bool Fmod4SoundStitching::isValid() const throw (RuntimeException)
-{
-    return mSound != NULL &amp;&amp; mChannel != NULL;
-}
-
-void Fmod4SoundStitchingPtr::destroy()
-{
-    SharedPtr&lt;Fmod4SoundStitching&gt;::destroy();
-}
-
-const String&amp; Fmod4SoundStitching::getMovableType() const
-{
-    return msMovableType;
-}
-
-void Fmod4SoundStitching::play(bool destroyWhenDone)
-{
-    if (!isValid())
-    {
-        load();
-    }
-
-    FMOD_RESULT res = mDriver-&gt;_getFmodSystem()-&gt;playSound(
-        FMOD_CHANNEL_FREE, 
-        mSound, 
-        true,
-        &amp;mChannel);
-
-    CHECK_FMOD4_ERRORS(res);
-
-    RlAssert1(mChannel != NULL);
-    mAutoDestroy = destroyWhenDone;
-//    mDriver-&gt;_registerChannel(mChannel, this);
-
-    float vol;
-	if (is3d())
-	{
-		vol = mDriver-&gt;getDefaultSoundVolume();
-	}
-	else
-	{
-		vol = mDriver-&gt;getDefaultMusicVolume();
-	}
-	setVolume(vol);
-
-    setPriority(mPriority);
-    setPosition(mPosition);
-    setDirection(mDirection);
-	setVelocity(mVelocity); 
-    pause(false);
-    SoundPlayEvent event = SoundPlayEvent(this, SoundPlayEvent::STARTEVENT);
-    dispatchEvent(&amp;event);
-}
-
-void Fmod4SoundStitching::stop()
-{
-    mChannel-&gt;stop();
-}
-
-void Fmod4SoundStitching::setPosition(const Ogre::Vector3&amp; position)
-{
-	mPosition = position;
-
-	if (isValid())
-	{
-		FMOD_VECTOR pos;
-		pos.x = position.x;
-		pos.y = position.y;
-		pos.z = -position.z;
-		mChannel-&gt;set3DAttributes(&amp;pos, NULL);
-	}
-}
-
-const Ogre::Vector3 Fmod4SoundStitching::getPosition() const
-{
-	if (isValid())
-	{
-		FMOD_VECTOR pos;
-		mChannel-&gt;get3DAttributes(&amp;pos, NULL);
-
-		Vector3 rval;
-		rval.x = pos.x;
-		rval.y = pos.y;
-		rval.z = -pos.z;
-
-		return rval;
-	}
-
-	return mPosition;
-}
-
-const Ogre::Vector3 Fmod4SoundStitching::getVelocity() const
-{
-	if (isValid())
-	{
-		FMOD_VECTOR vel;
-		mChannel-&gt;get3DAttributes(NULL, &amp;vel);
-
-		Vector3 rval;
-		rval.x = vel.x;
-		rval.y = vel.y;
-		rval.z = -vel.z;
-
-		return rval;
-	}
-
-	return mVelocity;
-}
-
-void Fmod4SoundStitching::setVelocity(const Ogre::Vector3&amp; velocity)
-{
-	mVelocity = velocity;
-
-	if (isValid())
-	{
-		FMOD_VECTOR vel;
-		vel.x = velocity.x;
-		vel.y = velocity.y;
-		vel.z = -velocity.z;
-		mChannel-&gt;set3DAttributes(NULL, &amp;vel);
-	}
-}
-
-void Fmod4SoundStitching::setDirection(const Ogre::Quaternion &amp;orientation)
-{
-	mDirection = orientation;
-
-	if (isValid())
-	{
-		FMOD_VECTOR to;
-
-		Vector3 toVec = orientation * Vector3::NEGATIVE_UNIT_Z;
-		to.x = toVec.x;
-		to.y = toVec.y;
-		to.z = -toVec.z;
-
-		mChannel-&gt;set3DConeOrientation(&amp;to);
-	}
-}
-
-const Ogre::Quaternion Fmod4SoundStitching::getDirection() const
-{
-	if (isValid())
-	{
-		FMOD_VECTOR to;
-		mChannel-&gt;get3DConeOrientation(&amp;to);
-
-		Vector3 toVec;
-		toVec.x = to.x;
-		toVec.y = to.y;
-		toVec.z = -to.z;
-
-		return Vector3::NEGATIVE_UNIT_Z.getRotationTo(toVec);
-	}
-
-	return mDirection;
-}
-
-bool Fmod4SoundStitching::isPaused()
-{
-    bool paused;
-    FMOD_RESULT error = mChannel-&gt;getPaused(&amp;paused);
-    return !paused;
-}
-
-const bool Fmod4SoundStitching::isPlaying() const
-{
-    bool playing;
-    FMOD_RESULT error = mChannel-&gt;isPlaying(&amp;playing);
-    return playing;
-}
-
-void Fmod4SoundStitching::pause(bool pause)
-{
-    mChannel-&gt;setPaused(pause);
-}
-
-void Fmod4SoundStitching::setVolume(float vol)
-{
-	mVolume = vol;
-	if (isValid())
-	{
-	    mChannel-&gt;setVolume(vol);
-	}
-}
-
-const float Fmod4SoundStitching::getVolume() const
-{
-	if (isValid())
-	{
-		float vol;
-		mChannel-&gt;getVolume(&amp;vol);
-		return vol;
-	}
-	return mVolume;
-}
-
-/**
- * @author JoSch
- * @date 14-03-2007
- * @version 1.0
- * @param priority The new priority of this sound
- */ 
-void Fmod4SoundStitching::setPriority(const int priority)
-{
-    mPriority = priority;
-    if (mPriority &lt; 0)
-    {
-        mPriority = 0;
-    }
-    if (mPriority &gt; 256)
-    {
-        mPriority = 256;
-    }
-    if (isValid())
-    {
-        mChannel-&gt;setPriority(mPriority);
-    }
-}
-
-/**
- * @author JoSch
- * @date 14-03-2007
- * @version 1.0
- * @return The new priority of this sound
- */ 
-const int Fmod4SoundStitching::getPriority() const
-{
-    int priority = mPriority;
-    if (isValid())
-    {
-        mChannel-&gt;getPriority(&amp;priority);
-    }
-    return priority;
-}
-
-
-/**
- * @author JoSch
- * @date 15-03-2007
- * @version 1.0
- * @return The Fmod4 Channel object
- */ 
-FMOD::Channel *Fmod4SoundStitching::getFmodChannel() const
-{
-    return mChannel;
-}
-
-/**
- * @author JoSch
- * @date 15-03-2007
- * @version 1.0
- * @return The Fmod4 Sound object
- */ 
-FMOD::Sound *Fmod4SoundStitching::getFmodSound() const
-{
-    return mSound;
-}
-
-/**
- * @author JoSch
- * @date 15-03-2007
- * @version 1.0
- * @return TRUE, if the sound should autodestroy when playing ended.
- */ 
-bool Fmod4SoundStitching::isAutoDestroying() const
-{
-    return mAutoDestroy;
-}
-
-/**
- * @author JoSch
- * @date 08-03-2008
- * @version 1.0
- */ 
-void Fmod4SoundStitching::putSoundIntoSlot(unsigned int slot, CeGuiString label)
-{
-    if (isValid())
-    {
-        FMOD_MODE mode = FMOD_DEFAULT;
-
-        if (is3d())
-        {
-            mode |= FMOD_3D;
-        }
-        else
-        {
-            mode |= FMOD_2D;
-        }
-
-        if (isLooping())
-        {
-            mode |= FMOD_LOOP_NORMAL;
-        }
-        else
-        {
-            mode |= FMOD_LOOP_OFF;
-        }
-        FMOD::Sound *sound;
-        FMOD_RESULT result = mDriver-&gt;_getFmodSystem()-&gt;createStream(
-            mSoundCache[label]-&gt;getName().c_str(), 
-            mode, 
-            NULL, 
-            &amp;sound);
-        CHECK_FMOD4_ERRORS(result);
-        if (mSoundSlots[slot] != NULL)
-        {
-            mSoundSlots[slot]-&gt;release();
-        }
-        mSoundSlots[slot] = sound;
-
-        result = sound-&gt;setSubSound(slot, sound);
-        CHECK_FMOD4_ERRORS(result);
-    }
-}
-
-/**
- * @author JoSch
- * @date 08-03-2008
- * @version 1.0
- * @return TRUE, if the sound should autodestroy when playing ended.
- */ 
-unsigned int Fmod4SoundStitching::getPlayingSlot()
-{
-    if (isValid())
-    {
-        unsigned int currentslot = -1;
-        FMOD_RESULT result = mChannel-&gt;getPosition(&amp;currentslot, (FMOD_TIMEUNIT)(FMOD_TIMEUNIT_SENTENCE_SUBSOUND | FMOD_TIMEUNIT_BUFFERED));
-        CHECK_FMOD4_ERRORS(result);
-        return currentslot;
-    }
-    return -1;
-}
-
-} // Namespace

Copied: rl/branches/newton20/engine/core/src/fmod4driver/Fmod4SoundStitching.cpp (from rev 4718, rl/trunk/engine/core/src/fmod4driver/Fmod4SoundStitching.cpp)

Copied: rl/branches/newton20/engine/ui/include/Fmod4ConfigComponent.h (from rev 4718, rl/trunk/engine/ui/include/Fmod4ConfigComponent.h)

Copied: rl/branches/newton20/engine/ui/src/Fmod4ConfigComponent.cpp (from rev 4718, rl/trunk/engine/ui/src/Fmod4ConfigComponent.cpp)

Modified: rl/branches/newton20/engine/ui/src/GameSettings.cpp
===================================================================
--- rl/branches/newton20/engine/ui/src/GameSettings.cpp	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/engine/ui/src/GameSettings.cpp	2009-01-26 17:26:56 UTC (rev 4719)
@@ -48,7 +48,7 @@
         {
             if ((*it)-&gt;isDriverPlugin())
             {
-                registerSoundDriverConfig((*it)-&gt;getConfigComponent());
+                //registerSoundDriverConfig((*it)-&gt;getConfigComponent());
             }
         }
 

Modified: rl/branches/newton20/tools/copy_dependencies.bat
===================================================================
--- rl/branches/newton20/tools/copy_dependencies.bat	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/tools/copy_dependencies.bat	2009-01-26 17:26:56 UTC (rev 4719)
@@ -51,7 +51,6 @@
 REM Die restlichen Abh&#228;ngigkeiten
 REM -----------------------------
 REM 
-copy &quot;%RL_ROOT%\dependencies\fmod\api\fmod.dll&quot; &quot;%RL_DIST%&quot;
 copy &quot;%RL_ROOT%\dependencies\FMOD4\api\fmodex.dll&quot; &quot;%RL_DIST%&quot;
 
 copy &quot;%RL_ROOT%\Dependencies\NewtonSDK\sdk\dll\Newton.dll&quot; &quot;%RL_DIST%&quot;

Modified: rl/branches/newton20/tools/copy_dlls.bat
===================================================================
--- rl/branches/newton20/tools/copy_dlls.bat	2009-01-23 21:41:53 UTC (rev 4718)
+++ rl/branches/newton20/tools/copy_dlls.bat	2009-01-26 17:26:56 UTC (rev 4719)
@@ -18,7 +18,3 @@
 copy &quot;%RL_ROOT%\engine\ui\lib\%BUILD%\RlUi.dll&quot; &quot;%RL_DIST%&quot;
 copy &quot;%RL_ROOT%\engine\uicomponents\lib\%BUILD%\RlUiComponents.dll&quot; &quot;%RL_DIST%&quot;
 copy &quot;%RL_ROOT%\engine\ai\lib\%BUILD%\RlAI.dll&quot; &quot;%RL_DIST%&quot;
-
-copy &quot;%RL_ROOT%\plugins\fmod3driver\lib\%BUILD%\RlFmod3Driver.dll&quot; &quot;%RL_DIST%&quot;
-copy &quot;%RL_ROOT%\plugins\fmod4driver\lib\%BUILD%\RlFmod4Driver.dll&quot; &quot;%RL_DIST%&quot;
-copy &quot;%RL_ROOT%\plugins\openaldriver\lib\%BUILD%\RlOpenALDriver.dll&quot; &quot;%RL_DIST%&quot;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001775.html">[Dsa-hl-svn] r4718 - rl/trunk/Mac/tools
</A></li>
	<LI>Next message: <A HREF="001777.html">[Dsa-hl-svn] r4720 - rl/branches/newton20
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1776">[ date ]</a>
              <a href="thread.html#1776">[ thread ]</a>
              <a href="subject.html#1776">[ subject ]</a>
              <a href="author.html#1776">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
