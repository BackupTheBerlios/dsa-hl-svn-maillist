<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r3160 - in rl/trunk/engine: common/include	core/include core/src dialog/include dialog/src rules/include	script/swig ui ui/include ui/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2007-March/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r3160%20-%20in%20rl/trunk/engine%3A%20common/include%0A%09core/include%20core/src%20dialog/include%20dialog/src%20rules/include%0A%09script/swig%20ui%20ui/include%20ui/src&In-Reply-To=%3C200703102137.l2ALbCej015862%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000230.html">
   <LINK REL="Next"  HREF="000232.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r3160 - in rl/trunk/engine: common/include	core/include core/src dialog/include dialog/src rules/include	script/swig ui ui/include ui/src</H1>
    <B>blakharaz at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r3160%20-%20in%20rl/trunk/engine%3A%20common/include%0A%09core/include%20core/src%20dialog/include%20dialog/src%20rules/include%0A%09script/swig%20ui%20ui/include%20ui/src&In-Reply-To=%3C200703102137.l2ALbCej015862%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r3160 - in rl/trunk/engine: common/include	core/include core/src dialog/include dialog/src rules/include	script/swig ui ui/include ui/src">blakharaz at mail.berlios.de
       </A><BR>
    <I>Sat Mar 10 22:37:12 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000230.html">[Dsa-hl-svn] r3159 - in rl/trunk/engine/rules: include src
</A></li>
        <LI>Next message: <A HREF="000232.html">[Dsa-hl-svn] r3161 - in rl/trunk/engine: rules/include rules/src	script/swig ui ui/include ui/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#231">[ date ]</a>
              <a href="thread.html#231">[ thread ]</a>
              <a href="subject.html#231">[ subject ]</a>
              <a href="author.html#231">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: blakharaz
Date: 2007-03-10 22:36:02 +0100 (Sat, 10 Mar 2007)
New Revision: 3160

Added:
   rl/trunk/engine/ui/include/AbstractWindow.h
   rl/trunk/engine/ui/src/AbstractWindow.cpp
Removed:
   rl/trunk/engine/ui/include/CeGuiWindow.h
   rl/trunk/engine/ui/src/CeGuiWindow.cpp
Modified:
   rl/trunk/engine/common/include/ConfigFile.h
   rl/trunk/engine/common/include/FixRubyHeaders.h
   rl/trunk/engine/common/include/Property.h
   rl/trunk/engine/common/include/RastullahPrerequisites.h
   rl/trunk/engine/common/include/XmlResourceManager.h
   rl/trunk/engine/core/include/MovableText.h
   rl/trunk/engine/core/include/Sound.h
   rl/trunk/engine/core/include/SoundResource.h
   rl/trunk/engine/core/src/ActorControlledObject.cpp
   rl/trunk/engine/core/src/AnimationManager.cpp
   rl/trunk/engine/core/src/CoreSubsystem.cpp
   rl/trunk/engine/core/src/DebugVisualisable.cpp
   rl/trunk/engine/core/src/GameLoop.cpp
   rl/trunk/engine/core/src/MeshObject.cpp
   rl/trunk/engine/core/src/MovableText.cpp
   rl/trunk/engine/core/src/ParticleSystemObject.cpp
   rl/trunk/engine/core/src/PhysicalThing.cpp
   rl/trunk/engine/core/src/SoundResource.cpp
   rl/trunk/engine/core/src/World.cpp
   rl/trunk/engine/dialog/include/AimlParserImplRl.h
   rl/trunk/engine/dialog/include/DialogSubsystem.h
   rl/trunk/engine/dialog/src/ContextConditionProcessor.cpp
   rl/trunk/engine/rules/include/RulesPrerequisites.h
   rl/trunk/engine/script/swig/RlExports.i
   rl/trunk/engine/ui/RlUI2005.vcproj
   rl/trunk/engine/ui/include/AboutWindow.h
   rl/trunk/engine/ui/include/ActionChoiceWindow.h
   rl/trunk/engine/ui/include/CharacterSheetWindow.h
   rl/trunk/engine/ui/include/CharacterStateWindow.h
   rl/trunk/engine/ui/include/CloseConfirmationWindow.h
   rl/trunk/engine/ui/include/CommandMapper.h
   rl/trunk/engine/ui/include/CommandMapperWindow.h
   rl/trunk/engine/ui/include/Console.h
   rl/trunk/engine/ui/include/DataLoadingProgressWindow.h
   rl/trunk/engine/ui/include/DebugWindow.h
   rl/trunk/engine/ui/include/DialogWindow.h
   rl/trunk/engine/ui/include/GameLoggerWindow.h
   rl/trunk/engine/ui/include/GameSettings.h
   rl/trunk/engine/ui/include/InGameMenuWindow.h
   rl/trunk/engine/ui/include/InfoPopup.h
   rl/trunk/engine/ui/include/InputManager.h
   rl/trunk/engine/ui/include/InventoryWindow.h
   rl/trunk/engine/ui/include/JournalWindow.h
   rl/trunk/engine/ui/include/LogWindow.h
   rl/trunk/engine/ui/include/MainMenuEngineWindow.h
   rl/trunk/engine/ui/include/MainMenuWindow.h
   rl/trunk/engine/ui/include/Makefile.am
   rl/trunk/engine/ui/include/MessageWindow.h
   rl/trunk/engine/ui/include/ObjectDescriptionWindow.h
   rl/trunk/engine/ui/include/PlaylistWindow.h
   rl/trunk/engine/ui/include/SoundConfig.h
   rl/trunk/engine/ui/include/SubtitleWindow.h
   rl/trunk/engine/ui/include/WindowFactory.h
   rl/trunk/engine/ui/include/WindowFadeJob.h
   rl/trunk/engine/ui/include/WindowManager.h
   rl/trunk/engine/ui/src/AboutWindow.cpp
   rl/trunk/engine/ui/src/ActionChoiceWindow.cpp
   rl/trunk/engine/ui/src/CharacterSheetWindow.cpp
   rl/trunk/engine/ui/src/CharacterStateWindow.cpp
   rl/trunk/engine/ui/src/CloseConfirmationWindow.cpp
   rl/trunk/engine/ui/src/CommandMapper.cpp
   rl/trunk/engine/ui/src/CommandMapperWindow.cpp
   rl/trunk/engine/ui/src/Console.cpp
   rl/trunk/engine/ui/src/DataLoadingProgressWindow.cpp
   rl/trunk/engine/ui/src/DebugWindow.cpp
   rl/trunk/engine/ui/src/DialogWindow.cpp
   rl/trunk/engine/ui/src/GameLoggerWindow.cpp
   rl/trunk/engine/ui/src/GameSettings.cpp
   rl/trunk/engine/ui/src/InGameMenuWindow.cpp
   rl/trunk/engine/ui/src/InfoPopup.cpp
   rl/trunk/engine/ui/src/InputManager.cpp
   rl/trunk/engine/ui/src/InventoryWindow.cpp
   rl/trunk/engine/ui/src/JournalWindow.cpp
   rl/trunk/engine/ui/src/LogWindow.cpp
   rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp
   rl/trunk/engine/ui/src/MainMenuWindow.cpp
   rl/trunk/engine/ui/src/Makefile.am
   rl/trunk/engine/ui/src/MessageWindow.cpp
   rl/trunk/engine/ui/src/ObjectDescriptionWindow.cpp
   rl/trunk/engine/ui/src/PlaylistWindow.cpp
   rl/trunk/engine/ui/src/SoundConfig.cpp
   rl/trunk/engine/ui/src/SubtitleWindow.cpp
   rl/trunk/engine/ui/src/UiSubsystem.cpp
   rl/trunk/engine/ui/src/WindowFactory.cpp
   rl/trunk/engine/ui/src/WindowFadeJob.cpp
   rl/trunk/engine/ui/src/WindowManager.cpp
Log:
Some cleanup

* clean Ogre imports
  - remove #include Ogre.h, add precise #includes
* rename CeGuiWindow to AbstractWindow 
  - removes issue with similar CeGuiWindow.h/CEGUIWindow.h files
* removed some warnings

Modified: rl/trunk/engine/common/include/ConfigFile.h
===================================================================
--- rl/trunk/engine/common/include/ConfigFile.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/common/include/ConfigFile.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,6 +18,7 @@
 #define CONFIGFILE_H_
 
 #include &quot;CommonPrerequisites.h&quot;
+#include &lt;OgreCommon.h&gt;
 #include &lt;OgreConfigFile.h&gt;
 
 namespace rl

Modified: rl/trunk/engine/common/include/FixRubyHeaders.h
===================================================================
--- rl/trunk/engine/common/include/FixRubyHeaders.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/common/include/FixRubyHeaders.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -37,3 +37,5 @@
     #undef PACKAGE_NAME
     #undef PACKAGE_TARNAME
 #endif
+#undef max
+#undef min
\ No newline at end of file

Modified: rl/trunk/engine/common/include/Property.h
===================================================================
--- rl/trunk/engine/common/include/Property.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/common/include/Property.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -19,6 +19,7 @@
 #include &quot;CommonPrerequisites.h&quot;
 
 #include &lt;boost/any.hpp&gt;
+#include &lt;OgreSharedPtr.h&gt;
 
 #include &quot;Exception.h&quot;
 #include &quot;Tripel.h&quot;

Modified: rl/trunk/engine/common/include/RastullahPrerequisites.h
===================================================================
--- rl/trunk/engine/common/include/RastullahPrerequisites.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/common/include/RastullahPrerequisites.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,8 +18,14 @@
 #define __RastullahPrerequisites_H__
 
 #define OGRE_MEMORY_STRESS_TEST 1
-#include &lt;Ogre.h&gt;
 
+#undef max
+#undef min
+
+#include &lt;OgreString.h&gt;
+#include &lt;OgreStringConverter.h&gt;
+#include &lt;OgreVector3.h&gt;
+
 #if OGRE_PLATFORM != OGRE_PLATFORM_WIN32
 #   define _snprintf snprintf
 template&lt;class T1, class T2&gt;

Modified: rl/trunk/engine/common/include/XmlResourceManager.h
===================================================================
--- rl/trunk/engine/common/include/XmlResourceManager.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/common/include/XmlResourceManager.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -19,9 +19,10 @@
 
 #include &quot;XmlResource.h&quot;
 #include &quot;CommonPrerequisites.h&quot;
+#include &lt;OgreResourceGroupManager.h&gt;
+#include &lt;OgreResourceManager.h&gt;
 
 
-
 namespace rl {
 
 	class _RlCommonExport XmlResourceManager : 

Modified: rl/trunk/engine/core/include/MovableText.h
===================================================================
--- rl/trunk/engine/core/include/MovableText.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/include/MovableText.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -1,5 +1,5 @@
 //-----------------------------------------------------------
-//Copyright &#169; 2003 by cTh
+//Copyright &#239;&#191;&#189; 2003 by cTh
 //Use as you see fit.
 //Questions : <A HREF="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">gavocanov at rambler.ru</A>
 //-----------------------------------------------------------
@@ -10,6 +10,9 @@
 
 #include &quot;CorePrerequisites.h&quot;
 
+#include &lt;OgreMovableObject.h&gt;
+#include &lt;OgreRenderable.h&gt;
+
 namespace rl
 {
     /************************************************************************/

Modified: rl/trunk/engine/core/include/Sound.h
===================================================================
--- rl/trunk/engine/core/include/Sound.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/include/Sound.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,11 +18,12 @@
 #define __Sound_H__
 
 #include &quot;CorePrerequisites.h&quot;
-#include &quot;Exception.h&quot;
 #include &lt;set&gt;
+#include &lt;OgreMovableObject.h&gt;
 #include &lt;OgreVector3.h&gt;
 #include &lt;OgreQuaternion.h&gt;
 
+#include &quot;Exception.h&quot;
 #include &quot;EventCaster.h&quot;
 #include &quot;SoundEvents.h&quot;
 #include &quot;SoundResource.h&quot;

Modified: rl/trunk/engine/core/include/SoundResource.h
===================================================================
--- rl/trunk/engine/core/include/SoundResource.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/include/SoundResource.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,8 +18,9 @@
 #define SOUNDRESOURCE_H
 
 #include &quot;CorePrerequisites.h&quot;
+#include &lt;OgreDataStream.h&gt; 
 #include &lt;OgreResource.h&gt;
-#include &lt;OgreDataStream.h&gt;
+#include &lt;OgreSharedPtr.h&gt;
 
 namespace rl {
  
@@ -46,7 +47,7 @@
             Ogre::ManualResourceLoader* loader);
         /// Der Destruktor
         virtual ~SoundResource();
-        /// Den Datenstrom zur&#252;ckgeben
+        /// Den Datenstrom zur&#239;&#191;&#189;ckgeben
         const Ogre::DataStreamPtr &amp;getDataStream() const;
         /// Groesse zurueckgeben.
         int getSize() const;

Modified: rl/trunk/engine/core/src/ActorControlledObject.cpp
===================================================================
--- rl/trunk/engine/core/src/ActorControlledObject.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/ActorControlledObject.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -15,6 +15,9 @@
 */
 
 #include &quot;ActorControlledObject.h&quot;
+
+#include &lt;OgreSceneNode.h&gt;
+
 #include &quot;Actor.h&quot;
 
 using namespace Ogre;

Modified: rl/trunk/engine/core/src/AnimationManager.cpp
===================================================================
--- rl/trunk/engine/core/src/AnimationManager.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/AnimationManager.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -16,6 +16,8 @@
 
 #include &quot;AnimationManager.h&quot;
 
+#include &lt;OgreAnimationState.h&gt;
+
 #include &quot;Exception.h&quot;
 #include &quot;Actor.h&quot;
 #include &quot;MeshAnimation.h&quot;
@@ -223,7 +225,7 @@
     {
         BaseAnimation* anim = iter-&gt;second;
 
-        // Nicht l&#246;schen, wird noch benutzt
+        // Nicht l&#239;&#191;&#189;schen, wird noch benutzt
         if( isStillInUse( anim ) )
             return;
 

Modified: rl/trunk/engine/core/src/CoreSubsystem.cpp
===================================================================
--- rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/CoreSubsystem.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -287,7 +287,7 @@
         // Initialise the modules
         Ogre::StringVector modulesList = ConfigurationManager::getSingleton().getModuleList();
 
-        for (int i = 0; i &lt; modulesList.size(); i++)
+        for (size_t i = 0; i &lt; modulesList.size(); i++)
         {
             mRubyInterpreter-&gt;executeFile(ContentModule::getInitFile(modulesList[i]));
 

Modified: rl/trunk/engine/core/src/DebugVisualisable.cpp
===================================================================
--- rl/trunk/engine/core/src/DebugVisualisable.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/DebugVisualisable.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -15,9 +15,12 @@
 */
 
 #include &quot;DebugVisualisable.h&quot;
+
+#include &lt;OgreSceneNode.h&gt;
+
+#include &quot;CoreSubsystem.h&quot;
 #include &quot;DebugVisualsManager.h&quot;
 #include &quot;PrimitiveObject.h&quot;
-#include &quot;CoreSubsystem.h&quot;
 #include &quot;World.h&quot;
 
 using namespace Ogre;

Modified: rl/trunk/engine/core/src/GameLoop.cpp
===================================================================
--- rl/trunk/engine/core/src/GameLoop.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/GameLoop.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,10 +13,11 @@
 *  along with this program; if not you can get it here
 *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
 */
+#include &quot;GameLoop.h&quot;
 
 #include &lt;OgreRoot.h&gt;
+#include &lt;OgreWindowEventUtilities.h&gt;
 
-#include &quot;GameLoop.h&quot;
 #include &quot;GameTask.h&quot;
 #include &quot;CoreSubsystem.h&quot;
 #include &quot;FixRubyHeaders.h&quot;

Modified: rl/trunk/engine/core/src/MeshObject.cpp
===================================================================
--- rl/trunk/engine/core/src/MeshObject.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/MeshObject.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,19 +13,22 @@
 *  along with this program; if not you can get it here
 *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
 */
+#include &quot;MeshObject.h&quot;
 
-#include &quot;Exception.h&quot;
-#include &quot;MeshObject.h&quot;
+#include &lt;OgreAnimationState.h&gt;
+#include &lt;OgreMaterialManager.h&gt;
+#include &lt;OgreMeshManager.h&gt;
+#include &lt;OgreSubEntity.h&gt;
+#include &lt;OgreSubMesh.h&gt;
+
 #include &quot;Actor.h&quot;
+#include &quot;AnimationManager.h&quot;
 #include &quot;CoreSubsystem.h&quot;
+#include &quot;MeshAnimation.h&quot;
+#include &quot;Exception.h&quot;
 #include &quot;World.h&quot;
 
-#include &quot;MeshAnimation.h&quot;
-#include &quot;AnimationManager.h&quot;
 
-#include &lt;OgreMeshManager.h&gt;
-#include &lt;OgreAnimationState.h&gt;
-
 using namespace Ogre;
 
 namespace rl {
@@ -327,7 +330,7 @@
             if( subent == NULL )
                 continue;
 
-            // TODO - optimieren, nur wenn der Typ ver&#228;ndert wird
+            // TODO - optimieren, nur wenn der Typ ver&#239;&#191;&#189;ndert wird
             //if(StringUtil::endsWith(subent-&gt;getMaterialName(),nameExtension)
             // == highlight )
             //  continue;  

Modified: rl/trunk/engine/core/src/MovableText.cpp
===================================================================
--- rl/trunk/engine/core/src/MovableText.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/MovableText.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -1,5 +1,5 @@
 //-----------------------------------------------------------
-//Copyright &#169; 2003 by cTh
+//Copyright &#239;&#191;&#189; 2003 by cTh
 //Use as you see fit.
 //Questions : <A HREF="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">gavocanov at rambler.ru</A>
 //-----------------------------------------------------------
@@ -8,8 +8,14 @@
 #include &quot;MovableText.h&quot;
 #include &quot;Exception.h&quot;
 
+#include &lt;OgreCamera.h&gt;
 #include &lt;OgreFontManager.h&gt;
+#include &lt;OgreHardwareBufferManager.h&gt;
+#include &lt;OgreMaterialManager.h&gt;
+#include &lt;OgreNode.h&gt;
+#include &lt;OgreRoot.h&gt;
 
+
 using namespace Ogre;
 namespace rl {
 

Modified: rl/trunk/engine/core/src/ParticleSystemObject.cpp
===================================================================
--- rl/trunk/engine/core/src/ParticleSystemObject.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/ParticleSystemObject.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -15,11 +15,14 @@
 */
 
 #include &quot;ParticleSystemObject.h&quot;
+
+#include &lt;OgreMeshManager.h&gt;
+#include &lt;OgreParticleEmitter.h&gt;
+
 #include &quot;Actor.h&quot;
 #include &quot;CoreSubsystem.h&quot;
 #include &quot;World.h&quot;
 
-#include &lt;OgreMeshManager.h&gt;
 
 using namespace Ogre;
 

Modified: rl/trunk/engine/core/src/PhysicalThing.cpp
===================================================================
--- rl/trunk/engine/core/src/PhysicalThing.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/PhysicalThing.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -15,12 +15,15 @@
  */
 
 #include &quot;PhysicalThing.h&quot;
-#include &quot;OgreLogManager.h&quot;
-#include &quot;MeshObject.h&quot;
+
+
+#include &lt;OgreSceneNode.h&gt;
+
 #include &quot;Actor.h&quot;
 #include &quot;Exception.h&quot;
+#include &quot;MathUtil.h&quot;
+#include &quot;MeshObject.h&quot;
 #include &quot;PhysicalObject.h&quot;
-#include &quot;MathUtil.h&quot;
 
 using namespace Ogre;
 using namespace OgreNewt;

Modified: rl/trunk/engine/core/src/SoundResource.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundResource.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/SoundResource.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -16,6 +16,8 @@
 
 #include &quot;SoundResource.h&quot;
 
+#include &lt;OgreResourceGroupManager.h&gt;
+
 using namespace Ogre;
 
 namespace rl {

Modified: rl/trunk/engine/core/src/World.cpp
===================================================================
--- rl/trunk/engine/core/src/World.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/core/src/World.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,10 +13,11 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
+#include &quot;World.h&quot;
 
+#include &lt;OgreRoot.h&gt;
 #include &lt;OgreSceneManager.h&gt;
 
-#include &quot;World.h&quot;
 #include &quot;Exception.h&quot;
 
 using namespace Ogre;

Modified: rl/trunk/engine/dialog/include/AimlParserImplRl.h
===================================================================
--- rl/trunk/engine/dialog/include/AimlParserImplRl.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/dialog/include/AimlParserImplRl.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -19,6 +19,8 @@
 #include &quot;DialogPrerequisites.h&quot;
 #include &quot;XmlMapper/XmlParser.h&quot;
 
+#include &lt;OgreResource.h&gt;
+
 using namespace XmlMapper;
 
 namespace rl

Modified: rl/trunk/engine/dialog/include/DialogSubsystem.h
===================================================================
--- rl/trunk/engine/dialog/include/DialogSubsystem.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/dialog/include/DialogSubsystem.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -16,11 +16,12 @@
 #ifndef __DialogSubsystem_H__
 #define __DialogSubsystem_H__
 
+#include &quot;DialogPrerequisites.h&quot;
+
+#include &lt;OgreResource.h&gt;
 #include &lt;OgreSingleton.h&gt;
 
-#include &quot;CommonPrerequisites.h&quot;
-#include &quot;DialogPrerequisites.h&quot;
-//#include &quot;AimlCoreComponent.h&quot;
+//#include &quot;CommonPrerequisites.h&quot;
 
 namespace MadaBot
 {

Modified: rl/trunk/engine/dialog/src/ContextConditionProcessor.cpp
===================================================================
--- rl/trunk/engine/dialog/src/ContextConditionProcessor.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/dialog/src/ContextConditionProcessor.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -103,4 +103,4 @@
 {
 }
 
-}
\ No newline at end of file
+}

Modified: rl/trunk/engine/rules/include/RulesPrerequisites.h
===================================================================
--- rl/trunk/engine/rules/include/RulesPrerequisites.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/rules/include/RulesPrerequisites.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -30,13 +30,8 @@
 #   define _RlRulesExport
 #endif
 
-#include &lt;map&gt;
 #include &lt;vector&gt;
 
-#define _t(T) CeGuiString(T)
-
-#include &lt;OgreLogManager.h&gt;
-
 #undef min
 
 namespace rl

Modified: rl/trunk/engine/script/swig/RlExports.i
===================================================================
--- rl/trunk/engine/script/swig/RlExports.i	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/script/swig/RlExports.i	2007-03-10 21:36:02 UTC (rev 3160)
@@ -45,6 +45,8 @@
 
 #include &quot;FixRubyHeaders.h&quot;
 
+#include &lt;CEGUIExceptions.h&gt;
+
 %}
 
 // Header includes

Modified: rl/trunk/engine/ui/RlUI2005.vcproj
===================================================================
--- rl/trunk/engine/ui/RlUI2005.vcproj	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/RlUI2005.vcproj	2007-03-10 21:36:02 UTC (rev 3160)
@@ -413,7 +413,7 @@
 					&gt;
 				&lt;/File&gt;
 				&lt;File
-					RelativePath=&quot;.\include\CeGuiWindow.h&quot;
+					RelativePath=&quot;.\include\AbstractWindow.h&quot;
 					&gt;
 				&lt;/File&gt;
 				&lt;File
@@ -586,7 +586,7 @@
 					&gt;
 				&lt;/File&gt;
 				&lt;File
-					RelativePath=&quot;.\src\CeGuiWindow.cpp&quot;
+					RelativePath=&quot;.\src\AbstractWindow.cpp&quot;
 					&gt;
 				&lt;/File&gt;
 				&lt;File

Modified: rl/trunk/engine/ui/include/AboutWindow.h
===================================================================
--- rl/trunk/engine/ui/include/AboutWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/AboutWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,12 +18,12 @@
 #define __AboutWindow_H__
 
 #include &quot;UiPrerequisites.h&quot;
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl {
 	
 	class _RlUiExport AboutWindow :
-		public CeGuiWindow
+		public AbstractWindow
 	{
 	public:
 		AboutWindow();

Copied: rl/trunk/engine/ui/include/AbstractWindow.h (from rev 3159, rl/trunk/engine/ui/include/CeGuiWindow.h)
===================================================================
--- rl/trunk/engine/ui/include/CeGuiWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/AbstractWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -0,0 +1,123 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
+ */
+
+#ifndef __AbstractWindow_H__
+#define __AbstractWindow_H__
+
+#include &quot;UiPrerequisites.h&quot;
+
+
+#include &lt;CEGUIWindow.h&gt;
+#include &lt;elements/CEGUIEditbox.h&gt;
+#include &lt;elements/CEGUIListbox.h&gt;
+#include &lt;elements/CEGUIMultiColumnList.h&gt;
+#include &lt;elements/CEGUIMultiLineEditbox.h&gt;
+#include &lt;elements/CEGUIProgressBar.h&gt;
+#include &lt;elements/CEGUIMenuBase.h&gt;
+#include &lt;elements/CEGUIMenuItem.h&gt;
+#include &lt;elements/CEGUIPushButton.h&gt;
+#include &lt;elements/CEGUICombobox.h&gt;
+#include &lt;elements/CEGUIComboDropList.h&gt;
+#include &lt;elements/CEGUIScrollablePane.h&gt;
+#include &lt;elements/CEGUISlider.h&gt;
+#include &lt;elements/CEGUITabControl.h&gt;
+
+namespace rl {
+
+	class WindowUpdateTask;
+
+	class _RlUiExport AbstractWindow
+	{
+	public:
+
+		enum WindowType
+		{
+			WND_SHOW,
+			WND_MOUSE_INPUT,
+			WND_KEYBOARD_INPUT,
+			WND_ALL_INPUT,
+		};
+		virtual ~AbstractWindow();	
+
+		CEGUI::Window* getWindow();
+
+		CEGUI::Window* getWindow(const char* name, const char* requiredClass = NULL);
+		CEGUI::Editbox* getEditbox(const char* name);
+		CEGUI::Listbox* getListbox(const char* name);
+		CEGUI::MultiColumnList* getMultiColumnList(const char* name);
+		CEGUI::MultiLineEditbox* getMultiLineEditbox(const char* name);
+		CEGUI::ProgressBar* getProgressBar(const char* name);
+		CEGUI::MenuBase* getMenu(const char* name);
+		CEGUI::MenuItem* getMenuItem(const char* name);
+		CEGUI::PushButton* getPushButton(const char* name);
+		CEGUI::Combobox* getCombobox(const char* name);
+		CEGUI::ComboDropList* getComboDropList(const char* name);
+        CEGUI::ScrollablePane* getScrollablePane(const char* name);
+		CEGUI::Slider* getSlider(const char* name);
+		CEGUI::TabControl* getTabControl(const char* name);
+
+		static CEGUI::Window* loadWindow(const CeGuiString&amp; xmlfile);
+		static CEGUI::Window* getRoot();
+
+		WindowType getWindowType();
+
+        virtual bool isVisible();
+        virtual void setVisible(bool visible, bool destroyAfterHide = false);
+
+		bool isModal();
+		bool isClosingOnEscape();
+
+		const CeGuiString&amp; getName() const;
+		const Ogre::Real&amp; getNormalAlpha() const;
+
+		virtual void windowHid();
+
+	protected:
+		AbstractWindow(
+			const CeGuiString&amp; xmlfile, 
+			WindowType type, 
+			bool closeOnEscape = true,
+			bool modal = false);
+
+		const CeGuiString&amp; getNamePrefix() const;
+		
+		void centerWindow();
+		bool destroyWindow();
+
+		void bindClickToCloseWindow(CEGUI::Window* button);
+		void bindCloseToCloseButton();
+
+		static CEGUI::Window* loadWindow(const CeGuiString&amp; xmlfile, CeGuiString&amp; prefix);
+
+		CEGUI::Window* mWindow;
+		bool mVisible;
+
+	private:
+		
+		WindowType mWindowType;
+		CeGuiString mNamePrefix;
+		CeGuiString mName;
+		bool mModal;
+		bool mCloseOnEscape;
+		Ogre::Real mNormalAlpha;
+
+		static int sNumAbstractWindows;
+
+	};
+
+}
+
+#endif

Modified: rl/trunk/engine/ui/include/ActionChoiceWindow.h
===================================================================
--- rl/trunk/engine/ui/include/ActionChoiceWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/ActionChoiceWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -19,7 +19,7 @@
 
 #include &quot;UiPrerequisites.h&quot;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &lt;set&gt;
 #include &lt;vector&gt;
 #include &quot;Action.h&quot;
@@ -30,7 +30,7 @@
 	class Person;
 	class ActionGroup;
 
-	class _RlUiExport ActionChoiceWindow : public CeGuiWindow
+	class _RlUiExport ActionChoiceWindow : public AbstractWindow
 	{
 	public:
 		ActionChoiceWindow(Person* actor);

Deleted: rl/trunk/engine/ui/include/CeGuiWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CeGuiWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/CeGuiWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -1,111 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
- */
-
-#ifndef __CeGuiWindow_H__
-#define __CeGuiWindow_H__
-
-#include &quot;UiPrerequisites.h&quot;
-
-#include &lt;OgreNoMemoryMacros.h&gt;
-#include &lt;CEGUI.h&gt;
-#include &lt;OgreMemoryMacros.h&gt;
-
-namespace rl {
-
-	class WindowUpdateTask;
-
-	class _RlUiExport CeGuiWindow
-	{
-	public:
-
-		enum WindowType
-		{
-			WND_SHOW,
-			WND_MOUSE_INPUT,
-			WND_KEYBOARD_INPUT,
-			WND_ALL_INPUT,
-		};
-		virtual ~CeGuiWindow();	
-
-		CEGUI::Window* getWindow();
-
-		CEGUI::Window* getWindow(const char* name, const char* requiredClass = NULL);
-		CEGUI::Editbox* getEditbox(const char* name);
-		CEGUI::Listbox* getListbox(const char* name);
-		CEGUI::MultiColumnList* getMultiColumnList(const char* name);
-		CEGUI::MultiLineEditbox* getMultiLineEditbox(const char* name);
-		CEGUI::ProgressBar* getProgressBar(const char* name);
-		CEGUI::MenuBase* getMenu(const char* name);
-		CEGUI::MenuItem* getMenuItem(const char* name);
-		CEGUI::PushButton* getPushButton(const char* name);
-		CEGUI::Combobox* getCombobox(const char* name);
-		CEGUI::ComboDropList* getComboDropList(const char* name);
-        CEGUI::ScrollablePane* getScrollablePane(const char* name);
-		CEGUI::Slider* getSlider(const char* name);
-		CEGUI::TabControl* getTabControl(const char* name);
-
-		static CEGUI::Window* loadWindow(const CeGuiString&amp; xmlfile);
-		static CEGUI::Window* getRoot();
-
-		WindowType getWindowType();
-
-        virtual bool isVisible();
-        virtual void setVisible(bool visible, bool destroyAfterHide = false);
-
-		bool isModal();
-		bool isClosingOnEscape();
-
-		const CeGuiString&amp; getName() const;
-		const Ogre::Real&amp; getNormalAlpha() const;
-
-		virtual void windowHid();
-
-	protected:
-		CeGuiWindow(
-			const CeGuiString&amp; xmlfile, 
-			WindowType type, 
-			bool closeOnEscape = true,
-			bool modal = false);
-
-		const CeGuiString&amp; getNamePrefix() const;
-		
-		void centerWindow();
-		bool destroyWindow();
-
-		void bindClickToCloseWindow(CEGUI::Window* button);
-		void bindCloseToCloseButton();
-
-		static CEGUI::Window* loadWindow(const CeGuiString&amp; xmlfile, CeGuiString&amp; prefix);
-
-		CEGUI::Window* mWindow;
-		bool mVisible;
-
-	private:
-		
-		WindowType mWindowType;
-		CeGuiString mNamePrefix;
-		CeGuiString mName;
-		bool mModal;
-		bool mCloseOnEscape;
-		Ogre::Real mNormalAlpha;
-
-		static int sNumCeGuiWindows;
-
-	};
-
-}
-
-#endif

Modified: rl/trunk/engine/ui/include/CharacterSheetWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CharacterSheetWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/CharacterSheetWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -19,7 +19,7 @@
 
 #include &quot;UiPrerequisites.h&quot;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;Eigenschaft.h&quot;
 #include &quot;ObjectStateChangeListener.h&quot;
 
@@ -28,7 +28,7 @@
 	class Person;
 	class ObjectStateChangeEvent;
 
-	class _RlUiExport CharacterSheetWindow : public CeGuiWindow, public ObjectStateChangeListener
+	class _RlUiExport CharacterSheetWindow : public AbstractWindow, public ObjectStateChangeListener
 	{
 	public:
 		CharacterSheetWindow();

Modified: rl/trunk/engine/ui/include/CharacterStateWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CharacterStateWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/CharacterStateWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -19,7 +19,7 @@
 
 #include &quot;UiPrerequisites.h&quot;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;Eigenschaft.h&quot;
 #include &quot;ObjectStateChangeEventSource.h&quot;
 
@@ -27,7 +27,7 @@
 
 	class Creature;
 
-	class _RlUiExport CharacterStateWindow : public CeGuiWindow, public ObjectStateChangeListener
+	class _RlUiExport CharacterStateWindow : public AbstractWindow, public ObjectStateChangeListener
 	{
 	public:
 		CharacterStateWindow();

Modified: rl/trunk/engine/ui/include/CloseConfirmationWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CloseConfirmationWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/CloseConfirmationWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,11 +18,11 @@
 #define __CloseConfirmationWindow_H__
 
 #include &quot;UiPrerequisites.h&quot;
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl {
 
-	class _RlUiExport CloseConfirmationWindow : public CeGuiWindow
+	class _RlUiExport CloseConfirmationWindow : public AbstractWindow
 	{
 	public:
 		CloseConfirmationWindow();

Modified: rl/trunk/engine/ui/include/CommandMapper.h
===================================================================
--- rl/trunk/engine/ui/include/CommandMapper.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/CommandMapper.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -20,6 +20,7 @@
 #include &quot;UiPrerequisites.h&quot;
 
 #include &lt;map&gt;
+#include &lt;OgreCommon.h&gt;
 
 namespace rl {
 

Modified: rl/trunk/engine/ui/include/CommandMapperWindow.h
===================================================================
--- rl/trunk/engine/ui/include/CommandMapperWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/CommandMapperWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,7 +18,7 @@
 #define __CommandMapperWindow_H__
 
 #include &quot;UiPrerequisites.h&quot;
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl {
 
@@ -26,7 +26,7 @@
 	class CommandMapper;
 
 	class CommandMapperInputWindow :
-		public CeGuiWindow
+		public AbstractWindow
 	{
 	public:
 		CommandMapperInputWindow();
@@ -35,7 +35,7 @@
 	};
 
 	class _RlUiExport CommandMapperWindow :
-		public CeGuiWindow
+		public AbstractWindow
 	{
 	public:
 		CommandMapperWindow(Creature* actionHolder, CommandMapper* commandMapper);

Modified: rl/trunk/engine/ui/include/Console.h
===================================================================
--- rl/trunk/engine/ui/include/Console.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/Console.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -22,7 +22,7 @@
 #include &lt;vector&gt;
 #include &lt;string&gt;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 #include &lt;OgreSingleton.h&gt;
 
@@ -32,7 +32,7 @@
 
 	/** This is a Console System
 	 */
-	class _RlUiExport Console : public CeGuiWindow
+	class _RlUiExport Console : public AbstractWindow
 	{
 		public:
 			Console();

Modified: rl/trunk/engine/ui/include/DataLoadingProgressWindow.h
===================================================================
--- rl/trunk/engine/ui/include/DataLoadingProgressWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/DataLoadingProgressWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,12 +18,12 @@
 #define __DataLoadingProgressWindow_H__
 
 #include &quot;UiPrerequisites.h&quot;
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;CoreEvents.h&quot;
 
 namespace rl {
 
-	class _RlUiExport DataLoadingProgressWindow : public CeGuiWindow, public CoreEventListener
+	class _RlUiExport DataLoadingProgressWindow : public AbstractWindow, public CoreEventListener
 	{
 	public:
 		DataLoadingProgressWindow();

Modified: rl/trunk/engine/ui/include/DebugWindow.h
===================================================================
--- rl/trunk/engine/ui/include/DebugWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/DebugWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -20,7 +20,7 @@
 #include &quot;UiPrerequisites.h&quot;
 #include &lt;OgreSingleton.h&gt;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;GameTask.h&quot;
 
 #include &lt;map&gt;
@@ -28,13 +28,11 @@
 namespace rl {
 
     class _RlUiExport DebugWindow
-		: public Ogre::Singleton&lt;DebugWindow&gt;, public GameTask, public CeGuiWindow
+		: public Ogre::Singleton&lt;DebugWindow&gt;, public GameTask, public AbstractWindow
     {
     public:
         DebugWindow(void);
         ~DebugWindow();
-        static DebugWindow&amp; getSingleton(void);
-        static DebugWindow* getSingletonPtr(void);
 
 		void setVisible(bool visible, bool destroyAfterHide = false);
 

Modified: rl/trunk/engine/ui/include/DialogWindow.h
===================================================================
--- rl/trunk/engine/ui/include/DialogWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/DialogWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -22,7 +22,7 @@
 #include &lt;vector&gt;
 #include &lt;map&gt;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl {
 
@@ -31,7 +31,7 @@
 	class DialogCharacterController;
 	class GameLoggerWindow;
 
-	class _RlUiExport DialogWindow : public CeGuiWindow
+	class _RlUiExport DialogWindow : public AbstractWindow
 	{
 	public:
 		DialogWindow(DialogCharacter* bot, GameLoggerWindow* gamelogger, DialogCharacterController* controller);

Modified: rl/trunk/engine/ui/include/GameLoggerWindow.h
===================================================================
--- rl/trunk/engine/ui/include/GameLoggerWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/GameLoggerWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -19,11 +19,11 @@
 
 #include &quot;UiPrerequisites.h&quot;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl {
 
-	class _RlUiExport GameLoggerWindow : public CeGuiWindow
+	class _RlUiExport GameLoggerWindow : public AbstractWindow
 	{
 	public:
 		GameLoggerWindow();

Modified: rl/trunk/engine/ui/include/GameSettings.h
===================================================================
--- rl/trunk/engine/ui/include/GameSettings.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/GameSettings.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -17,13 +17,13 @@
 #ifndef GAMESETTINGS_H
 #define GAMESETTINGS_H
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;SoundDriverConfigComponent.h&quot;
 #include &quot;RenderSystemConfigComponent.h&quot;
 
 namespace rl
 {
-	class GameSettings : CeGuiWindow
+	class GameSettings : AbstractWindow
 	{
 	public:
 		/**

Modified: rl/trunk/engine/ui/include/InGameMenuWindow.h
===================================================================
--- rl/trunk/engine/ui/include/InGameMenuWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/InGameMenuWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -17,14 +17,14 @@
 #define __InGameMenuWindow_H__
 
 #include &quot;UiPrerequisites.h&quot;
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl {
 	
 	class GameObject;
 	class Action;
 
-	class _RlUiExport InGameMenuWindow : public CeGuiWindow
+	class _RlUiExport InGameMenuWindow : public AbstractWindow
 	{
 	public:
 		InGameMenuWindow();

Modified: rl/trunk/engine/ui/include/InfoPopup.h
===================================================================
--- rl/trunk/engine/ui/include/InfoPopup.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/InfoPopup.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -17,12 +17,12 @@
 #include &quot;UiPrerequisites.h&quot;
 #include &lt;vector&gt;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;QuestListener.h&quot;
 
 namespace rl {
 
-    class _RlUiExport InfoPopup : public CeGuiWindow, public QuestListener
+    class _RlUiExport InfoPopup : public AbstractWindow, public QuestListener
     {
     public:
         InfoPopup();

Modified: rl/trunk/engine/ui/include/InputManager.h
===================================================================
--- rl/trunk/engine/ui/include/InputManager.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/InputManager.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -28,17 +28,17 @@
 #include &quot;FixRubyHeaders.h&quot;
 #include &quot;GameTask.h&quot;
 
-#include &lt;OgreNoMemoryMacros.h&gt;
-#include &lt;CEGUI.h&gt;
-#include &lt;OgreMemoryMacros.h&gt;
+//#include &lt;OgreNoMemoryMacros.h&gt;
+//#include &lt;CEGUI.h&gt;
+//#include &lt;OgreMemoryMacros.h&gt;
 
-namespace CEGUI {
-    enum MouseButton;
-}
+//namespace CEGUI {
+//    enum MouseButton;
+//}
 
 namespace rl {
 
-    class CeGuiWindow;
+    class AbstractWindow;
     class GameObject;
     class CharacterController;
     class CommandMapper;
@@ -64,8 +64,8 @@
 
         void run(Ogre::Real elapsedTime);
 
-        void registerCeGuiWindow(CeGuiWindow* window);
-        void unregisterCeGuiWindow(CeGuiWindow* window);
+        void registerAbstractWindow(AbstractWindow* window);
+        void unregisterAbstractWindow(AbstractWindow* window);
         bool isCeguiActive() const;
 
         virtual bool mousePressed(const OIS::MouseEvent &amp; arg, OIS::MouseButtonID id);

Modified: rl/trunk/engine/ui/include/InventoryWindow.h
===================================================================
--- rl/trunk/engine/ui/include/InventoryWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/InventoryWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,7 +18,7 @@
 #define __InventoryWindow_H__
 
 #include &quot;UiPrerequisites.h&quot;
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;Inventory.h&quot;
 #include &quot;GameTask.h&quot;
 
@@ -38,7 +38,7 @@
         virtual const Ogre::String&amp; getName() const;
 	};
 
-	class _RlUiExport InventoryWindow : public CeGuiWindow
+	class _RlUiExport InventoryWindow : public AbstractWindow
 	{
 	public:
 		InventoryWindow();

Modified: rl/trunk/engine/ui/include/JournalWindow.h
===================================================================
--- rl/trunk/engine/ui/include/JournalWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/JournalWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -19,12 +19,12 @@
 
 #include &quot;UiPrerequisites.h&quot;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;QuestListener.h&quot;
 
 namespace rl {
 
-    class JournalWindow : public CeGuiWindow, public QuestListener {
+    class JournalWindow : public AbstractWindow, public QuestListener {
     public:
         JournalWindow();
         virtual ~JournalWindow();

Modified: rl/trunk/engine/ui/include/LogWindow.h
===================================================================
--- rl/trunk/engine/ui/include/LogWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/LogWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,12 +18,12 @@
 
 #include &quot;UiPrerequisites.h&quot;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl
 {
 
-	class _RlUiExport LogWindow : public CeGuiWindow
+	class _RlUiExport LogWindow : public AbstractWindow
 	{
 	public:
 		LogWindow();

Modified: rl/trunk/engine/ui/include/MainMenuEngineWindow.h
===================================================================
--- rl/trunk/engine/ui/include/MainMenuEngineWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/MainMenuEngineWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -17,13 +17,13 @@
 #define __MainMenuEngineWindow_H__
 
 #include &quot;UiPrerequisites.h&quot;
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl {
 	
 	class ContentModule;
 
-	class _RlUiExport MainMenuEngineWindow : public CeGuiWindow
+	class _RlUiExport MainMenuEngineWindow : public AbstractWindow
 	{
 	public:
 		MainMenuEngineWindow();

Modified: rl/trunk/engine/ui/include/MainMenuWindow.h
===================================================================
--- rl/trunk/engine/ui/include/MainMenuWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/MainMenuWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -17,7 +17,7 @@
 #define __MainMenuWindow_H__
 
 #include &quot;UiPrerequisites.h&quot;
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &lt;elements/CEGUIMenuItem.h&gt;
 
 namespace rl {
@@ -25,7 +25,7 @@
 	class ContentModule;
 	class MainMenuEngineWindow;
 
-	class _RlUiExport MainMenuWindow : public CeGuiWindow
+	class _RlUiExport MainMenuWindow : public AbstractWindow
 	{
 	public:
 		MainMenuWindow(MainMenuEngineWindow* enginewindow);

Modified: rl/trunk/engine/ui/include/Makefile.am
===================================================================
--- rl/trunk/engine/ui/include/Makefile.am	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/Makefile.am	2007-03-10 21:36:02 UTC (rev 3160)
@@ -1,7 +1,7 @@
 noinst_HEADERS = \
 	AboutWindow.h \
 	ActionChoiceWindow.h \
-	CeGuiWindow.h \
+	AbstractWindow.h \
 	CharacterController.h \
 	CharacterSheetWindow.h \
 	CharacterStateWindow.h \

Modified: rl/trunk/engine/ui/include/MessageWindow.h
===================================================================
--- rl/trunk/engine/ui/include/MessageWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/MessageWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,12 +18,12 @@
 #define __MessageWindow_H__
 
 #include &quot;UiPrerequisites.h&quot;
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl {
 	
 	class _RlUiExport MessageWindow :
-		public CeGuiWindow
+		public AbstractWindow
 	{
 	public:
 		MessageWindow();

Modified: rl/trunk/engine/ui/include/ObjectDescriptionWindow.h
===================================================================
--- rl/trunk/engine/ui/include/ObjectDescriptionWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/ObjectDescriptionWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,13 +18,13 @@
 
 #include &quot;UiPrerequisites.h&quot;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl
 {
 	class GameObject;
 
-	class _RlUiExport ObjectDescriptionWindow : public CeGuiWindow
+	class _RlUiExport ObjectDescriptionWindow : public AbstractWindow
 	{
 	public:
 		ObjectDescriptionWindow();

Modified: rl/trunk/engine/ui/include/PlaylistWindow.h
===================================================================
--- rl/trunk/engine/ui/include/PlaylistWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/PlaylistWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -19,13 +19,13 @@
 
 #include &quot;UiPrerequisites.h&quot;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl {
 
 	class Person;
 
-	class _RlUiExport PlaylistWindow : public CeGuiWindow
+	class _RlUiExport PlaylistWindow : public AbstractWindow
 	{
 	public:
 		PlaylistWindow();

Modified: rl/trunk/engine/ui/include/SoundConfig.h
===================================================================
--- rl/trunk/engine/ui/include/SoundConfig.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/SoundConfig.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -17,14 +17,14 @@
 #ifndef SOUNDCONFIG_H_
 #define SOUNDCONFIG_H_
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl
 {
 
 	class SoundDriverConfigComponent;
 
-	class SoundConfig : public rl::CeGuiWindow
+	class SoundConfig : public rl::AbstractWindow
 	{
 	public:
 		SoundConfig();

Modified: rl/trunk/engine/ui/include/SubtitleWindow.h
===================================================================
--- rl/trunk/engine/ui/include/SubtitleWindow.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/SubtitleWindow.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -18,13 +18,13 @@
 
 #include &quot;UiPrerequisites.h&quot;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 
 namespace rl
 {
 	class GameObject;
 
-	class _RlUiExport SubtitleWindow : public CeGuiWindow
+	class _RlUiExport SubtitleWindow : public AbstractWindow
 	{
 	public:
 		SubtitleWindow();

Modified: rl/trunk/engine/ui/include/WindowFactory.h
===================================================================
--- rl/trunk/engine/ui/include/WindowFactory.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/WindowFactory.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -32,7 +32,7 @@
 namespace rl {
 
 	class Actor;
-	class CeGuiWindow;
+	class AbstractWindow;
 	class CharacterStateWindow;
 	class CharacterSheetWindow;
 	class Console;

Modified: rl/trunk/engine/ui/include/WindowFadeJob.h
===================================================================
--- rl/trunk/engine/ui/include/WindowFadeJob.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/WindowFadeJob.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -24,21 +24,21 @@
 
 namespace rl {
 
-    class CeGuiWindow;
+    class AbstractWindow;
 
     class WindowFadeJob : public Job
     {
     public:
         typedef enum {FADE_IN, FADE_OUT, FADE_OUT_AND_DESTROY} Mode;
 
-        WindowFadeJob(CeGuiWindow* window, Mode mode,
+        WindowFadeJob(AbstractWindow* window, Mode mode,
             Ogre::Real targetAlpha, Ogre::Real changeRate = 4.0f);
 
         virtual bool execute(Ogre::Real time);
         virtual void discard();
 
     protected:
-        CeGuiWindow* mWindow;
+        AbstractWindow* mWindow;
         Mode mMode;
         Ogre::Real mChangeRate;
         Ogre::Real mCurrentAlpha;

Modified: rl/trunk/engine/ui/include/WindowManager.h
===================================================================
--- rl/trunk/engine/ui/include/WindowManager.h	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/include/WindowManager.h	2007-03-10 21:36:02 UTC (rev 3160)
@@ -25,13 +25,12 @@
 #include &lt;ruby.h&gt;
 #include &quot;FixRubyHeaders.h&quot;
 #include &lt;OgreMemoryMacros.h&gt;
-#undef min
 
 #include &lt;CEGUIVector.h&gt;
 
 namespace rl {
 
-	class CeGuiWindow;
+	class AbstractWindow;
 	class WindowUpdater;
 
 	class _RlUiExport WindowManager : public Ogre::Singleton&lt;WindowManager&gt;
@@ -43,14 +42,14 @@
 		static WindowManager&amp; getSingleton();
 		static WindowManager* getSingletonPtr();
 
-		void registerWindow(CeGuiWindow* window);
-		void destroyWindow(CeGuiWindow* window);
+		void registerWindow(AbstractWindow* window);
+		void destroyWindow(AbstractWindow* window);
 		void closeTopWindow();
-		bool handleMovedToFront(CeGuiWindow* window);
-		bool handleMovedToBack(CeGuiWindow* window);
+		bool handleMovedToFront(AbstractWindow* window);
+		bool handleMovedToBack(AbstractWindow* window);
 
 	private:
-		std::list&lt;CeGuiWindow*&gt; mWindowList;
+		std::list&lt;AbstractWindow*&gt; mWindowList;
 	};
 }
 

Modified: rl/trunk/engine/ui/src/AboutWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/AboutWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/AboutWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -22,7 +22,7 @@
 namespace rl {
 
 AboutWindow::AboutWindow() :
-    CeGuiWindow(&quot;aboutwindow.xml&quot;, WND_MOUSE_INPUT)
+    AbstractWindow(&quot;aboutwindow.xml&quot;, WND_MOUSE_INPUT)
 {
     getWindow(&quot;AboutWindow/Text&quot;)-&gt;setText(&quot;Rastullahs Lockenpracht\n\nCopyright 2003-2007 Team Pantheon\
 \n\nBenutzte Bibliotheken: Ogre, fmod, Newton, boost, ...&quot;);

Copied: rl/trunk/engine/ui/src/AbstractWindow.cpp (from rev 3159, rl/trunk/engine/ui/src/CeGuiWindow.cpp)
===================================================================
--- rl/trunk/engine/ui/src/CeGuiWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/AbstractWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -0,0 +1,297 @@
+/* This source file is part of Rastullahs Lockenpracht.
+ * Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
+ * 
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the Clarified Artistic License.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  Clarified Artistic License for more details.
+ *
+ *  You should have received a copy of the Clarified Artistic License
+ *  along with this program; if not you can get it here
+ *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
+ */
+#include &lt;boost/bind.hpp&gt;
+#include &lt;CEGUIWindowManager.h&gt;
+#include &lt;elements/CEGUIFrameWindow.h&gt;
+
+#include &quot;UiPrerequisites.h&quot;
+#include &quot;Exception.h&quot;
+
+#include &quot;UiSubsystem.h&quot;
+#include &quot;AbstractWindow.h&quot;
+#include &quot;CeGuiHelper.h&quot;
+#include &quot;InputManager.h&quot;
+#include &quot;WindowManager.h&quot;
+#include &quot;WindowFadeJob.h&quot;
+#include &quot;JobScheduler.h&quot;
+
+using namespace std;
+using namespace CEGUI;
+using namespace Ogre;
+
+namespace rl
+{
+
+	int AbstractWindow::sNumAbstractWindows = 0;
+
+	AbstractWindow::AbstractWindow(const CeGuiString&amp; xmlfile, WindowType type, bool closeOnEscape, bool modal)
+	: mVisible(false),
+		mModal(modal),
+		mWindowType(type),
+		mCloseOnEscape(closeOnEscape)
+	{
+        LOG_MESSAGE(Logger::UI, 
+		    &quot;Lade Fenster '&quot; + Ogre::String(xmlfile.c_str()) + &quot;'&quot;);
+   		mWindow = AbstractWindow::loadWindow(xmlfile, mNamePrefix);
+		if (mWindow == NULL)
+		{
+			Throw(rl::IllegalStateException, Ogre::String(&quot;Could not load window '&quot;)+xmlfile.c_str()+&quot;'.&quot;);
+		}
+		
+		getRoot()-&gt;addChildWindow(mWindow);
+
+        if (modal)
+		{
+			mWindow-&gt;setModalState(true);
+			mWindow-&gt;setAlwaysOnTop(true);
+            mWindow-&gt;moveToFront();
+            mWindow-&gt;show();
+		}
+        else
+        {
+       		mWindow-&gt;hide();
+        }
+
+		mNormalAlpha = mWindow-&gt;getAlpha();
+		mName = mWindow-&gt;getName();
+		WindowManager::getSingleton().registerWindow(this);
+		mWindow-&gt;subscribeEvent(Window::EventActivated, 
+			boost::bind(
+				&amp;rl::WindowManager::handleMovedToFront,
+				rl::WindowManager::getSingletonPtr(),
+				this));
+	}
+
+	AbstractWindow::~AbstractWindow()
+	{
+	}
+
+	CEGUI::Window* AbstractWindow::loadWindow(const CeGuiString&amp; xmlfile)
+	{
+		CeGuiString prefix = &quot;&quot;;
+		return loadWindow(xmlfile, prefix);
+	}
+
+
+	CEGUI::Window* AbstractWindow::loadWindow(const CeGuiString&amp; xmlfile, CeGuiString&amp; prefix)    
+	{
+		CeGuiString namePrefix;
+		if (prefix == &quot;&quot;)
+			prefix.assign(StringConverter::toString(sNumAbstractWindows));
+		sNumAbstractWindows++;
+
+		CEGUI::Window* window = NULL;		
+		try 
+		{
+			window = CEGUI::WindowManager::getSingleton().loadWindowLayout(xmlfile, 
+				prefix);
+		}
+		catch(...)
+		{
+		}
+
+		return window;
+	}
+
+	bool AbstractWindow::isVisible()
+	{
+		return mVisible;
+	}
+
+	void AbstractWindow::setVisible(bool visible, bool destroy)
+	{
+		if(mVisible != visible)
+		{
+			if (visible)
+			{
+				InputManager::getSingleton().registerAbstractWindow(this);
+                JobScheduler::getSingleton().addJob(
+                    new WindowFadeJob(this, WindowFadeJob::FADE_IN, mNormalAlpha));
+			}
+			else
+			{
+				InputManager::getSingleton().unregisterAbstractWindow(this);
+                JobScheduler::getSingleton().addJob(
+                    new WindowFadeJob(this,
+                    destroy ? WindowFadeJob::FADE_OUT_AND_DESTROY : WindowFadeJob::FADE_OUT,
+                    0.0f));
+			}
+            mVisible = visible;
+		}
+	}
+
+	const Ogre::Real&amp; AbstractWindow::getNormalAlpha() const
+	{
+		return mNormalAlpha;
+	}
+
+	bool AbstractWindow::isModal()
+	{
+		return mModal;
+	}
+
+	bool AbstractWindow::isClosingOnEscape()
+	{
+		return mCloseOnEscape;
+	}
+
+	AbstractWindow::WindowType AbstractWindow::getWindowType()
+	{
+		return mWindowType;
+	}
+
+	CEGUI::Window* AbstractWindow::getRoot()
+	{
+		return CEGUI::WindowManager::getSingleton().getWindow(
+			(utf8*)UiSubsystem::CEGUI_ROOT);
+	}
+
+	Window* AbstractWindow::getWindow(const char* name, const char* requiredClass)
+	{
+		CEGUI::Window* wnd = 
+			CEGUI::WindowManager::getSingleton().getWindow(
+				mNamePrefix + (utf8*)name);
+		
+		if (wnd == NULL)
+			Throw(
+				rl::NullPointerException, 
+				&quot;Window &quot; 
+				+ Ogre::String(name) 
+				+ &quot; is NULL&quot;);
+
+		if (requiredClass != NULL &amp;&amp; !wnd-&gt;testClassName(requiredClass))
+			Throw(
+				rl::NullPointerException, 
+				&quot;Window &quot;
+				+ Ogre::String(name) 
+				+ &quot; has not the required class &quot; 
+				+ Ogre::String(requiredClass));
+
+		return wnd;
+	}
+
+	Editbox* AbstractWindow::getEditbox(const char* name)
+	{
+		return static_cast&lt;Editbox*&gt;(getWindow(name, &quot;Editbox&quot;));
+	}
+
+	Listbox* AbstractWindow::getListbox(const char* name)
+	{
+		return static_cast&lt;Listbox*&gt;(getWindow(name, &quot;Listbox&quot;));
+	}
+
+	MultiColumnList* AbstractWindow::getMultiColumnList(const char* name)
+	{
+		return static_cast&lt;MultiColumnList*&gt;(getWindow(name, &quot;MultiColumnList&quot;));
+	}
+
+	MultiLineEditbox* AbstractWindow::getMultiLineEditbox(const char* name)
+	{
+		return static_cast&lt;MultiLineEditbox*&gt;(getWindow(name, &quot;MultiLineEditbox&quot;));
+	}
+
+	ProgressBar* AbstractWindow::getProgressBar(const char* name)
+	{
+		return static_cast&lt;ProgressBar*&gt;(getWindow(name, &quot;ProgressBar&quot;));
+	}
+
+	MenuBase* AbstractWindow::getMenu(const char* name)
+	{
+		return static_cast&lt;MenuBase*&gt;(getWindow(name, &quot;MenuBase&quot;));
+	}
+
+	MenuItem* AbstractWindow::getMenuItem(const char* name)
+	{
+		return static_cast&lt;MenuItem*&gt;(getWindow(name, &quot;MenuItem&quot;));
+	}
+
+	PushButton* AbstractWindow::getPushButton(const char* name)
+	{
+		return static_cast&lt;PushButton*&gt;(getWindow(name, &quot;PushButton&quot;));
+	}
+
+	Combobox* AbstractWindow::getCombobox(const char* name)
+	{
+		return static_cast&lt;Combobox*&gt;(getWindow(name, &quot;Combobox&quot;));
+	}
+	
+	ComboDropList* AbstractWindow::getComboDropList(const char* name)
+	{
+		return static_cast&lt;ComboDropList*&gt;(getWindow(name, &quot;ComboDropList&quot;));
+	}
+
+    ScrollablePane* AbstractWindow::getScrollablePane(const char* name)
+    {
+		return static_cast&lt;ScrollablePane*&gt;(getWindow(name, &quot;ScrollablePane&quot;));
+    }
+
+	Slider* AbstractWindow::getSlider(const char* name)
+	{
+		return static_cast&lt;Slider*&gt;(getWindow(name, &quot;Slider&quot;));
+	}
+
+	TabControl* AbstractWindow::getTabControl(const char* name)
+	{
+		return static_cast&lt;TabControl*&gt;(getWindow(name, &quot;TabControl&quot;));
+	}
+
+	const CeGuiString&amp; AbstractWindow::getName() const
+	{
+		return mName;
+	}
+
+	void AbstractWindow::centerWindow()
+	{
+		Size screenSize = System::getSingleton().getRenderer()-&gt;getSize();
+		Size windowSize = mWindow-&gt;getPixelSize();
+		float x = 0.5f * (screenSize.d_width - windowSize.d_width);
+		float y = 0.5f * (screenSize.d_height - windowSize.d_height);
+		mWindow-&gt;setPosition(CeGuiHelper::asAbsolute(CEGUI::Vector2(x, y)));
+	}
+
+	void AbstractWindow::bindClickToCloseWindow(CEGUI::Window* button)
+	{
+		button-&gt;subscribeEvent(Window::EventMouseClick,
+			boost::bind(&amp;AbstractWindow::destroyWindow, this));
+	}
+
+	void AbstractWindow::bindCloseToCloseButton()
+	{
+		mWindow-&gt;subscribeEvent(FrameWindow::EventCloseClicked,
+			boost::bind(&amp;AbstractWindow::destroyWindow, this));
+	}
+
+	bool AbstractWindow::destroyWindow()
+	{
+		setVisible(false, true);
+		return true;
+	}
+
+	CEGUI::Window* AbstractWindow::getWindow()
+	{
+		return mWindow;
+	}
+
+	const CeGuiString&amp; AbstractWindow::getNamePrefix() const
+	{
+		return mNamePrefix;
+	}
+
+	void AbstractWindow::windowHid()
+	{
+	}
+
+}

Modified: rl/trunk/engine/ui/src/ActionChoiceWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/ActionChoiceWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/ActionChoiceWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,8 +13,9 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
+#include &quot;ActionChoiceWindow.h&quot;
 #include &lt;boost/bind.hpp&gt;
-#include &quot;UiPrerequisites.h&quot;
+#include &lt;CEGUIWindowManager.h&gt;
 
 #include &lt;set&gt;
 #include &lt;algorithm&gt;
@@ -26,7 +27,6 @@
 #include &quot;UiSubsystem.h&quot;
 #include &quot;Exception.h&quot;
 
-#include &quot;ActionChoiceWindow.h&quot;
 
 using namespace CEGUI;
 using namespace std;
@@ -38,7 +38,7 @@
 	const int MAX_NUM_SUBACTIONS = 7;
 
 	ActionChoiceWindow::ActionChoiceWindow(Person* actor)
-		:	CeGuiWindow(&quot;actionchoicewindow.xml&quot;, WND_MOUSE_INPUT),
+		:	AbstractWindow(&quot;actionchoicewindow.xml&quot;, WND_MOUSE_INPUT),
 			mActor(actor)
 	{
 		mHint = getWindow(&quot;ActionChoiceWindow/Hint&quot;);
@@ -85,7 +85,7 @@
 		}
 		mButtons.clear();
 		LOG_DEBUG2(Logger::UI, 
-			&quot;Buttons gel&#246;scht&quot;, &quot;ActionChoiceWindow::showActionsOfObject&quot;);
+			&quot;Buttons gel&#239;&#191;&#189;scht&quot;, &quot;ActionChoiceWindow::showActionsOfObject&quot;);
 
 		CEGUI::UVector2 center(cegui_reldim(0.5), cegui_reldim(0.5));
 		static float RADIUS = 0.10;
@@ -243,11 +243,11 @@
 
 	PushButton* ActionChoiceWindow::createButton(const CeGuiString&amp; name, const CEGUI::UVector2&amp; pos)
 	{
-		Window* button = CeGuiWindow::loadWindow(&quot;buttons/&quot;+name+&quot;.xml&quot;);
+		Window* button = AbstractWindow::loadWindow(&quot;buttons/&quot;+name+&quot;.xml&quot;);
 		if (button == NULL)
 		{
 			button = 
-				CeGuiWindow::loadWindow(
+				AbstractWindow::loadWindow(
 					&quot;buttons/defaultbutton.xml&quot;);
 		}
 

Deleted: rl/trunk/engine/ui/src/CeGuiWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CeGuiWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/CeGuiWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -1,295 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
- */
-#include &lt;boost/bind.hpp&gt;
-#include &lt;CEGUIWindowManager.h&gt;
-#include &quot;UiPrerequisites.h&quot;
-#include &quot;Exception.h&quot;
-
-#include &quot;UiSubsystem.h&quot;
-#include &quot;CeGuiWindow.h&quot;
-#include &quot;CeGuiHelper.h&quot;
-#include &quot;InputManager.h&quot;
-#include &quot;WindowManager.h&quot;
-#include &quot;WindowFadeJob.h&quot;
-#include &quot;JobScheduler.h&quot;
-
-using namespace std;
-using namespace CEGUI;
-using namespace Ogre;
-
-namespace rl
-{
-
-	int CeGuiWindow::sNumCeGuiWindows = 0;
-
-	CeGuiWindow::CeGuiWindow(const CeGuiString&amp; xmlfile, WindowType type, bool closeOnEscape, bool modal)
-	: mVisible(false),
-		mModal(modal),
-		mWindowType(type),
-		mCloseOnEscape(closeOnEscape)
-	{
-        LOG_MESSAGE(Logger::UI, 
-		    &quot;Lade Fenster '&quot; + Ogre::String(xmlfile.c_str()) + &quot;'&quot;);
-   		mWindow = CeGuiWindow::loadWindow(xmlfile, mNamePrefix);
-		if (mWindow == NULL)
-		{
-			Throw(rl::IllegalStateException, Ogre::String(&quot;Could not load window '&quot;)+xmlfile.c_str()+&quot;'.&quot;);
-		}
-		
-		getRoot()-&gt;addChildWindow(mWindow);
-
-        if (modal)
-		{
-			mWindow-&gt;setModalState(true);
-			mWindow-&gt;setAlwaysOnTop(true);
-            mWindow-&gt;moveToFront();
-            mWindow-&gt;show();
-		}
-        else
-        {
-       		mWindow-&gt;hide();
-        }
-
-		mNormalAlpha = mWindow-&gt;getAlpha();
-		mName = mWindow-&gt;getName();
-		WindowManager::getSingleton().registerWindow(this);
-		mWindow-&gt;subscribeEvent(Window::EventActivated, 
-			boost::bind(
-				&amp;rl::WindowManager::handleMovedToFront,
-				rl::WindowManager::getSingletonPtr(),
-				this));
-	}
-
-	CeGuiWindow::~CeGuiWindow()
-	{
-	}
-
-	CEGUI::Window* CeGuiWindow::loadWindow(const CeGuiString&amp; xmlfile)
-	{
-		CeGuiString prefix = &quot;&quot;;
-		return loadWindow(xmlfile, prefix);
-	}
-
-
-	CEGUI::Window* CeGuiWindow::loadWindow(const CeGuiString&amp; xmlfile, CeGuiString&amp; prefix)    
-	{
-		CeGuiString namePrefix;
-		if (prefix == &quot;&quot;)
-			prefix.assign(StringConverter::toString(sNumCeGuiWindows));
-		sNumCeGuiWindows++;
-
-		CEGUI::Window* window = NULL;		
-		try 
-		{
-			window = CEGUI::WindowManager::getSingleton().loadWindowLayout(xmlfile, 
-				prefix);
-		}
-		catch(...)
-		{
-		}
-
-		return window;
-	}
-
-	bool CeGuiWindow::isVisible()
-	{
-		return mVisible;
-	}
-
-	void CeGuiWindow::setVisible(bool visible, bool destroy)
-	{
-		if(mVisible != visible)
-		{
-			if (visible)
-			{
-				InputManager::getSingleton().registerCeGuiWindow(this);
-                JobScheduler::getSingleton().addJob(
-                    new WindowFadeJob(this, WindowFadeJob::FADE_IN, mNormalAlpha));
-			}
-			else
-			{
-				InputManager::getSingleton().unregisterCeGuiWindow(this);
-                JobScheduler::getSingleton().addJob(
-                    new WindowFadeJob(this,
-                    destroy ? WindowFadeJob::FADE_OUT_AND_DESTROY : WindowFadeJob::FADE_OUT,
-                    0.0f));
-			}
-            mVisible = visible;
-		}
-	}
-
-	const Ogre::Real&amp; CeGuiWindow::getNormalAlpha() const
-	{
-		return mNormalAlpha;
-	}
-
-	bool CeGuiWindow::isModal()
-	{
-		return mModal;
-	}
-
-	bool CeGuiWindow::isClosingOnEscape()
-	{
-		return mCloseOnEscape;
-	}
-
-	CeGuiWindow::WindowType CeGuiWindow::getWindowType()
-	{
-		return mWindowType;
-	}
-
-	CEGUI::Window* CeGuiWindow::getRoot()
-	{
-		return CEGUI::WindowManager::getSingleton().getWindow(
-			(utf8*)UiSubsystem::CEGUI_ROOT);
-	}
-
-	Window* CeGuiWindow::getWindow(const char* name, const char* requiredClass)
-	{
-		CEGUI::Window* wnd = 
-			CEGUI::WindowManager::getSingleton().getWindow(
-				mNamePrefix + (utf8*)name);
-		
-		if (wnd == NULL)
-			Throw(
-				rl::NullPointerException, 
-				&quot;Window &quot; 
-				+ Ogre::String(name) 
-				+ &quot; is NULL&quot;);
-
-		if (requiredClass != NULL &amp;&amp; !wnd-&gt;testClassName(requiredClass))
-			Throw(
-				rl::NullPointerException, 
-				&quot;Window &quot;
-				+ Ogre::String(name) 
-				+ &quot; has not the required class &quot; 
-				+ Ogre::String(requiredClass));
-
-		return wnd;
-	}
-
-	Editbox* CeGuiWindow::getEditbox(const char* name)
-	{
-		return static_cast&lt;Editbox*&gt;(getWindow(name, &quot;Editbox&quot;));
-	}
-
-	Listbox* CeGuiWindow::getListbox(const char* name)
-	{
-		return static_cast&lt;Listbox*&gt;(getWindow(name, &quot;Listbox&quot;));
-	}
-
-	MultiColumnList* CeGuiWindow::getMultiColumnList(const char* name)
-	{
-		return static_cast&lt;MultiColumnList*&gt;(getWindow(name, &quot;MultiColumnList&quot;));
-	}
-
-	MultiLineEditbox* CeGuiWindow::getMultiLineEditbox(const char* name)
-	{
-		return static_cast&lt;MultiLineEditbox*&gt;(getWindow(name, &quot;MultiLineEditbox&quot;));
-	}
-
-	ProgressBar* CeGuiWindow::getProgressBar(const char* name)
-	{
-		return static_cast&lt;ProgressBar*&gt;(getWindow(name, &quot;ProgressBar&quot;));
-	}
-
-	MenuBase* CeGuiWindow::getMenu(const char* name)
-	{
-		return static_cast&lt;MenuBase*&gt;(getWindow(name, &quot;MenuBase&quot;));
-	}
-
-	MenuItem* CeGuiWindow::getMenuItem(const char* name)
-	{
-		return static_cast&lt;MenuItem*&gt;(getWindow(name, &quot;MenuItem&quot;));
-	}
-
-	PushButton* CeGuiWindow::getPushButton(const char* name)
-	{
-		return static_cast&lt;PushButton*&gt;(getWindow(name, &quot;PushButton&quot;));
-	}
-
-	Combobox* CeGuiWindow::getCombobox(const char* name)
-	{
-		return static_cast&lt;Combobox*&gt;(getWindow(name, &quot;Combobox&quot;));
-	}
-	
-	ComboDropList* CeGuiWindow::getComboDropList(const char* name)
-	{
-		return static_cast&lt;ComboDropList*&gt;(getWindow(name, &quot;ComboDropList&quot;));
-	}
-
-    ScrollablePane* CeGuiWindow::getScrollablePane(const char* name)
-    {
-		return static_cast&lt;ScrollablePane*&gt;(getWindow(name, &quot;ScrollablePane&quot;));
-    }
-
-	Slider* CeGuiWindow::getSlider(const char* name)
-	{
-		return static_cast&lt;Slider*&gt;(getWindow(name, &quot;Slider&quot;));
-	}
-
-	TabControl* CeGuiWindow::getTabControl(const char* name)
-	{
-		return static_cast&lt;TabControl*&gt;(getWindow(name, &quot;TabControl&quot;));
-	}
-
-	const CeGuiString&amp; CeGuiWindow::getName() const
-	{
-		return mName;
-	}
-
-	void CeGuiWindow::centerWindow()
-	{
-		Size screenSize = System::getSingleton().getRenderer()-&gt;getSize();
-		Size windowSize = mWindow-&gt;getPixelSize();
-		float x = 0.5f * (screenSize.d_width - windowSize.d_width);
-		float y = 0.5f * (screenSize.d_height - windowSize.d_height);
-		mWindow-&gt;setPosition(CeGuiHelper::asAbsolute(CEGUI::Vector2(x, y)));
-	}
-
-	void CeGuiWindow::bindClickToCloseWindow(CEGUI::Window* button)
-	{
-		button-&gt;subscribeEvent(Window::EventMouseClick,
-			boost::bind(&amp;CeGuiWindow::destroyWindow, this));
-	}
-
-	void CeGuiWindow::bindCloseToCloseButton()
-	{
-		mWindow-&gt;subscribeEvent(FrameWindow::EventCloseClicked,
-			boost::bind(&amp;CeGuiWindow::destroyWindow, this));
-	}
-
-	bool CeGuiWindow::destroyWindow()
-	{
-		setVisible(false, true);
-		return true;
-	}
-
-	CEGUI::Window* CeGuiWindow::getWindow()
-	{
-		return mWindow;
-	}
-
-	const CeGuiString&amp; CeGuiWindow::getNamePrefix() const
-	{
-		return mNamePrefix;
-	}
-
-	void CeGuiWindow::windowHid()
-	{
-	}
-
-}

Modified: rl/trunk/engine/ui/src/CharacterSheetWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CharacterSheetWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/CharacterSheetWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,15 +13,17 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
+#include &quot;CharacterSheetWindow.h&quot;
+
 #include &lt;boost/bind.hpp&gt;
-#include &quot;UiPrerequisites.h&quot;
+#include &lt;CEGUIPropertyHelper.h&gt;
+#include &lt;elements/CEGUIListboxTextItem.h&gt;
 
 #include &quot;DsaManager.h&quot;
 #include &quot;Person.h&quot;
 #include &quot;InputManager.h&quot;
 #include &quot;Talent.h&quot;
 
-#include &quot;CharacterSheetWindow.h&quot;
 #include &quot;ObjectStateChangeEvent.h&quot;
 
 using namespace CEGUI;
@@ -31,7 +33,7 @@
 namespace rl {
 
 CharacterSheetWindow::CharacterSheetWindow()
-	: CeGuiWindow(&quot;charactersheet.xml&quot;, WND_MOUSE_INPUT)
+	: AbstractWindow(&quot;charactersheet.xml&quot;, WND_MOUSE_INPUT)
 {
 	mTalentTable = getMultiColumnList(&quot;CharacterSheet/TalentSheet/Table&quot;);
 	mTalentTable-&gt;addColumn((utf8*)&quot;Talent&quot;, 0, cegui_reldim(0.5));

Modified: rl/trunk/engine/ui/src/CharacterStateWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CharacterStateWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/CharacterStateWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -30,7 +30,7 @@
 namespace rl {
 
 CharacterStateWindow::CharacterStateWindow()
-: CeGuiWindow(&quot;characterstatewindow.xml&quot;, WND_SHOW, false),
+: AbstractWindow(&quot;characterstatewindow.xml&quot;, WND_SHOW, false),
 	mCharacter(NULL)
 {
 	mLP = getProgressBar(&quot;CharacterStateWindow/LP&quot;);
@@ -102,7 +102,7 @@
 
 void CharacterStateWindow::setVisible(bool visible, bool destroyAfterHide)
 {
-	CeGuiWindow::setVisible(visible, destroyAfterHide);
+	AbstractWindow::setVisible(visible, destroyAfterHide);
 	if (visible) 
 	{
 		update();

Modified: rl/trunk/engine/ui/src/CloseConfirmationWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CloseConfirmationWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/CloseConfirmationWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -22,7 +22,7 @@
 namespace rl {
 
 CloseConfirmationWindow::CloseConfirmationWindow()
-: CeGuiWindow(&quot;closeconfirmationwindow.xml&quot;, CeGuiWindow::WND_ALL_INPUT, true, true)
+: AbstractWindow(&quot;closeconfirmationwindow.xml&quot;, AbstractWindow::WND_ALL_INPUT, true, true)
 {
 	getPushButton(&quot;CloseConfirmationWindow/YesButton&quot;)-&gt;subscribeEvent(
 		CEGUI::Window::EventMouseClick,

Modified: rl/trunk/engine/ui/src/CommandMapper.cpp
===================================================================
--- rl/trunk/engine/ui/src/CommandMapper.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/CommandMapper.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -153,7 +153,7 @@
         mKeyCommandsGlobal[getKeyCode(&quot;O&quot;)] = CeGuiString(&quot;togglecharacterstatewindow&quot;);
         */
 
-        std::vector&lt;Ogre::String&gt; keys;
+        StringVector keys;
 
         // Extract global actions and movement actions from the list
         for (Ogre::NameValuePairList::const_iterator it = keylist.begin(); it != keylist.end(); it++)
@@ -164,7 +164,7 @@
             // We got a movement action
             if (it-&gt;first.find(&quot;mov_&quot;) != std::string::npos)
             {
-                for (int i = 0; i &lt; keys.size(); i++)
+                for (size_t i = 0; i &lt; keys.size(); i++)
                 {
                     mMovementCommands[InputManager::getSingleton().getScanCode(keys[i])] = getMovement(it-&gt;first);
                     LOG_MESSAGE(Logger::UI,
@@ -178,7 +178,7 @@
             // We got a global action
             if (it-&gt;first.find(&quot;act_&quot;) != std::string::npos)
             {
-                for (int i = 0; i &lt; keys.size(); i++)
+                for (size_t i = 0; i &lt; keys.size(); i++)
                 {
                     mKeyCommandsGlobal[getKeyCode(keys[i])] = CeGuiString(it-&gt;first);
                     LOG_MESSAGE(Logger::UI,

Modified: rl/trunk/engine/ui/src/CommandMapperWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/CommandMapperWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/CommandMapperWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,14 +13,15 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
+
+#include &quot;CommandMapperWindow.h&quot;
+
 #include &lt;boost/bind.hpp&gt;
+#include &lt;elements/CEGUIListboxTextItem.h&gt;
 
-#include &quot;UiPrerequisites.h&quot;
-
 #include &quot;InputManager.h&quot;
 #include &quot;UiSubsystem.h&quot;
 #include &quot;CommandMapper.h&quot;
-#include &quot;CommandMapperWindow.h&quot;
 
 #include &quot;GameObject.h&quot;
 #include &quot;Creature.h&quot;
@@ -32,7 +33,7 @@
 namespace rl {
 
 CommandMapperWindow::CommandMapperWindow(Creature* actionHolder, CommandMapper* commandMapper)
-	:	CeGuiWindow(&quot;commandmapper.xml&quot;, WND_ALL_INPUT),
+	:	AbstractWindow(&quot;commandmapper.xml&quot;, WND_ALL_INPUT),
 		mActionHolder(actionHolder),
 		mInputWindow(new CommandMapperInputWindow()),
 		mCommandMapper(commandMapper)
@@ -177,7 +178,7 @@
 }
 
 CommandMapperInputWindow::CommandMapperInputWindow() :
-	CeGuiWindow(&quot;commandmapperinput.xml&quot;, CeGuiWindow::WND_SHOW)
+	AbstractWindow(&quot;commandmapperinput.xml&quot;, AbstractWindow::WND_SHOW)
 {
 	setVisible(false);
 	mWindow-&gt;moveToFront();
@@ -186,7 +187,7 @@
 
 void CommandMapperInputWindow::setVisible(bool visible, bool destroyAfterHide)
 {
-	CeGuiWindow::setVisible(visible, destroyAfterHide);
+	AbstractWindow::setVisible(visible, destroyAfterHide);
 	if (visible)
 		mWindow-&gt;moveToFront();
 }
@@ -194,7 +195,7 @@
 void CommandMapperWindow::refreshContent()
 {
 	unsigned int row;
-	//// Alle m&#246;glichen Bewegungen aus dem CommandMapper auslesen
+	//// Alle m&#239;&#191;&#189;glichen Bewegungen aus dem CommandMapper auslesen
 	//row = 0;
 	//const std::map&lt;CeGuiString, MovementState&gt; movements = 
 	//	mCommandMapper-&gt;getMovements();

Modified: rl/trunk/engine/ui/src/Console.cpp
===================================================================
--- rl/trunk/engine/ui/src/Console.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/Console.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,24 +13,25 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
+#include &quot;Console.h&quot;
+
 #include &lt;boost/bind.hpp&gt;
-#include &quot;UiPrerequisites.h&quot;
+#include &lt;elements/CEGUIFrameWindow.h&gt;
 
 #include &quot;RubyInterpreter.h&quot;
 #include &quot;ListboxWrappedTextItem.h&quot;
 #include &quot;CoreSubsystem.h&quot;
-#include &quot;Console.h&quot;
 
 using namespace Ogre;
 
-using CEGUI::WindowManager; using CEGUI::utf8; using CEGUI::ListboxTextItem;
+using CEGUI::utf8; using CEGUI::ListboxTextItem;
 using CEGUI::KeyEventArgs; using CEGUI::Key; using CEGUI::colour;
 using CEGUI::ListboxWrappedTextItem; using CEGUI::TextFormatting;
 
 namespace rl 
 {
 	Console::Console() : 
-		CeGuiWindow(&quot;console.xml&quot;, WND_KEYBOARD_INPUT)
+		AbstractWindow(&quot;console.xml&quot;, WND_KEYBOARD_INPUT)
 	{
 		using namespace CEGUI;
 		
@@ -58,7 +59,7 @@
 			mCommandLine-&gt;activate();
 		}
 		
-		CeGuiWindow::setVisible(visible, destroy);
+		AbstractWindow::setVisible(visible, destroy);
 	}
 
 	bool Console::handleKeyDown(const CEGUI::EventArgs&amp; e)

Modified: rl/trunk/engine/ui/src/DataLoadingProgressWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/DataLoadingProgressWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/DataLoadingProgressWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -19,7 +19,7 @@
 namespace rl {
 
 DataLoadingProgressWindow::DataLoadingProgressWindow()
-: CeGuiWindow(&quot;dataloadingprogresswindow.xml&quot;, CeGuiWindow::WND_SHOW, false)
+: AbstractWindow(&quot;dataloadingprogresswindow.xml&quot;, AbstractWindow::WND_SHOW, false)
 {
 	mProgressBar = getProgressBar(&quot;DataLoadingProgressWindow/ProgressBar&quot;);
 	centerWindow();

Modified: rl/trunk/engine/ui/src/DebugWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/DebugWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/DebugWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -35,16 +35,7 @@
 
 namespace rl
 {
-  DebugWindow&amp; DebugWindow::getSingleton(void)
-    {
-        return Ogre::Singleton&lt;DebugWindow&gt;::getSingleton();
-    }
-    DebugWindow* DebugWindow::getSingletonPtr(void)
-    {
-        return Ogre::Singleton&lt;DebugWindow&gt;::getSingletonPtr();
-    }
-
-    DebugWindow::DebugWindow() : CeGuiWindow(&quot;debugwindow.xml&quot;, WND_SHOW),
+    DebugWindow::DebugWindow() : AbstractWindow(&quot;debugwindow.xml&quot;, WND_SHOW),
           mMessageText(),
           mPageCaption(),
           mPageText(),
@@ -212,7 +203,7 @@
 
     void DebugWindow::setVisible(bool visible, bool destroyAfterHide)
     {
-        CeGuiWindow::setVisible(visible, destroyAfterHide);
+        AbstractWindow::setVisible(visible, destroyAfterHide);
         if (visible)
             GameLoop::getSingleton().addTask(this, GameLoop::TG_GRAPHICS);
         else

Modified: rl/trunk/engine/ui/src/DialogWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/DialogWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/DialogWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,10 +13,11 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
+#include &quot;DialogWindow.h&quot;
+
 #include &lt;boost/bind.hpp&gt;
+#include &lt;elements/CEGUIFrameWindow.h&gt;
 
-#include &quot;DialogWindow.h&quot;
-
 #include &quot;Exception.h&quot;
 #include &quot;ConfigurationManager.h&quot;
 #include &quot;Creature.h&quot;
@@ -45,7 +46,7 @@
 
 DialogWindow::DialogWindow(DialogCharacter* bot, GameLoggerWindow* gamelogger,
                            DialogCharacterController* controller)
-  : CeGuiWindow(&quot;dialogwindow.xml&quot;, WND_MOUSE_INPUT, false),
+  : AbstractWindow(&quot;dialogwindow.xml&quot;, WND_MOUSE_INPUT, false),
 	mBot(bot), 
 	mCurrentResponse(NULL),
     mCurrentResponseText(&quot;&quot;),

Modified: rl/trunk/engine/ui/src/GameLoggerWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/GameLoggerWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/GameLoggerWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -27,7 +27,7 @@
 CEGUI::colour GameLoggerWindow::COLOR_MISC(      0xFFFFFFFF);
 
 GameLoggerWindow::GameLoggerWindow() : 
-	CeGuiWindow(&quot;gameloggerwindow.xml&quot;, WND_SHOW)
+	AbstractWindow(&quot;gameloggerwindow.xml&quot;, WND_SHOW)
 {
 	mLog = getListbox (&quot;GameLogger/Log&quot;);
 	bindCloseToCloseButton();

Modified: rl/trunk/engine/ui/src/GameSettings.cpp
===================================================================
--- rl/trunk/engine/ui/src/GameSettings.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/GameSettings.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,18 +13,20 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
+#include &quot;GameSettings.h&quot;
 
 #include &lt;boost/bind.hpp&gt;
+#include &lt;elements/CEGUIFrameWindow.h&gt;
+#include &lt;elements/CEGUIListboxTextItem.h&gt;
 #include &lt;iostream&gt;
 
-#include &quot;GameSettings.h&quot;
 #include &quot;SoundManager.h&quot;
 #include &quot;SoundDriver.h&quot;
 
 namespace rl
 {
     GameSettings::GameSettings()
-        : CeGuiWindow(&quot;gamesettings.xml&quot;, WND_MOUSE_INPUT)
+        : AbstractWindow(&quot;gamesettings.xml&quot;, WND_MOUSE_INPUT)
     {
         // Register sound driver components
         std::list&lt;SoundDriver*&gt; soundDriverList = SoundManager::getSingleton().getDriverList();
@@ -66,7 +68,7 @@
 
     void GameSettings::setVisible(bool visible, bool destroyAfterHide)
     {
-        CeGuiWindow::setVisible(visible, destroyAfterHide);
+        AbstractWindow::setVisible(visible, destroyAfterHide);
     }
 
     void GameSettings::setConfigComponent(const CEGUI::String&amp; drivername)

Modified: rl/trunk/engine/ui/src/InGameMenuWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/InGameMenuWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/InGameMenuWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,16 +13,16 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
+#include &quot;InGameMenuWindow.h&quot;
+
 #include &lt;boost/bind.hpp&gt;
+#include &lt;CEGUIWindowManager.h&gt;
+#include &lt;elements/CEGUIPopupMenu.h&gt;
 
-#include &quot;UiPrerequisites.h&quot;
-
-#include &quot;UiSubsystem.h&quot;
-#include &quot;CoreSubsystem.h&quot;
-
-#include &quot;InGameMenuWindow.h&quot;
 #include &quot;Action.h&quot;
 #include &quot;ActionManager.h&quot;
+#include &quot;CoreSubsystem.h&quot;
+#include &quot;UiSubsystem.h&quot;
 
 #include &lt;map&gt;
 
@@ -33,7 +33,7 @@
 namespace rl {
 
 InGameMenuWindow::InGameMenuWindow()
-: CeGuiWindow(&quot;ingamemenuwindow.xml&quot;, WND_MOUSE_INPUT)
+: AbstractWindow(&quot;ingamemenuwindow.xml&quot;, WND_MOUSE_INPUT)
 {
 	update();
 }

Modified: rl/trunk/engine/ui/src/InfoPopup.cpp
===================================================================
--- rl/trunk/engine/ui/src/InfoPopup.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/InfoPopup.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -22,7 +22,7 @@
 namespace rl {
 
 	InfoPopup::InfoPopup()
-		: CeGuiWindow(&quot;infopopup.xml&quot;, CeGuiWindow::WND_SHOW, false)
+		: AbstractWindow(&quot;infopopup.xml&quot;, AbstractWindow::WND_SHOW, false)
 	{
 		mErrorIcon = getWindow(&quot;InfoPopup/ErrorIcon&quot;);
 		mQuestIcon = getWindow(&quot;InfoPopup/QuestIcon&quot;);
@@ -78,7 +78,7 @@
 
 	void InfoPopup::setVisible(bool visible, bool destroyAfterHide)
 	{
-        CeGuiWindow::setVisible(visible, destroyAfterHide);
+        AbstractWindow::setVisible(visible, destroyAfterHide);
         ///@todo implement the following, when timed jobs are possible.
 		//if (visible &amp;&amp; !isVisible())
 		//{

Modified: rl/trunk/engine/ui/src/InputManager.cpp
===================================================================
--- rl/trunk/engine/ui/src/InputManager.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/InputManager.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -32,7 +32,7 @@
 #include &quot;ActionManager.h&quot;
 #include &quot;Actor.h&quot;
 #include &quot;ActorManager.h&quot;
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;CharacterController.h&quot;
 #include &quot;CommandMapper.h&quot;
 #include &quot;Console.h&quot;
@@ -400,22 +400,22 @@
         return rval;
     }
 
-    void InputManager::registerCeGuiWindow(CeGuiWindow* window)
+    void InputManager::registerAbstractWindow(AbstractWindow* window)
     {
-        if (window-&gt;getWindowType() == CeGuiWindow::WND_SHOW)
+        if (window-&gt;getWindowType() == AbstractWindow::WND_SHOW)
             return;
 
         bool active = isCeguiActive();
 
-        if (window-&gt;getWindowType() == CeGuiWindow::WND_MOUSE_INPUT)
+        if (window-&gt;getWindowType() == AbstractWindow::WND_MOUSE_INPUT)
         {
             mNumActiveWindowsMouseInput++;
         }
-        else if (window-&gt;getWindowType() == CeGuiWindow::WND_KEYBOARD_INPUT)
+        else if (window-&gt;getWindowType() == AbstractWindow::WND_KEYBOARD_INPUT)
         {
             mNumActiveWindowsKeyboardInput++;
         }
-        else if (window-&gt;getWindowType() == CeGuiWindow::WND_ALL_INPUT)
+        else if (window-&gt;getWindowType() == AbstractWindow::WND_ALL_INPUT)
         {
             mNumActiveWindowsAllInput++;
         }
@@ -429,24 +429,24 @@
         }
     }
 
-    void InputManager::unregisterCeGuiWindow(CeGuiWindow* window)
+    void InputManager::unregisterAbstractWindow(AbstractWindow* window)
     {
-        if (window-&gt;getWindowType() == CeGuiWindow::WND_SHOW)
+        if (window-&gt;getWindowType() == AbstractWindow::WND_SHOW)
         {
             return;
         }
 
         bool active = isCeguiActive();
 
-        if (window-&gt;getWindowType() == CeGuiWindow::WND_MOUSE_INPUT)
+        if (window-&gt;getWindowType() == AbstractWindow::WND_MOUSE_INPUT)
         {
             mNumActiveWindowsMouseInput--;
         }
-        else if (window-&gt;getWindowType() == CeGuiWindow::WND_KEYBOARD_INPUT)
+        else if (window-&gt;getWindowType() == AbstractWindow::WND_KEYBOARD_INPUT)
         {
             mNumActiveWindowsKeyboardInput--;
         }
-        else if (window-&gt;getWindowType() == CeGuiWindow::WND_ALL_INPUT)
+        else if (window-&gt;getWindowType() == AbstractWindow::WND_ALL_INPUT)
         {
             mNumActiveWindowsAllInput--;
         }

Modified: rl/trunk/engine/ui/src/InventoryWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/InventoryWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/InventoryWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,11 +13,16 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
+#include &quot;InventoryWindow.h&quot;
 
 
 #include &lt;boost/bind.hpp&gt;
+#include &lt;CEGUIImageset.h&gt;
+#include &lt;CEGUIImagesetManager.h&gt;
+#include &lt;CEGUIWindowManager.h&gt;
+#include &lt;elements/CEGUIDragContainer.h&gt;
+#include &lt;elements/CEGUIFrameWindow.h&gt;
 
-#include &quot;InventoryWindow.h&quot;
 
 #include &quot;Actor.h&quot;
 #include &quot;ActorManager.h&quot;
@@ -75,7 +80,7 @@
 	// ***************** Konstruktor *********************************
 	// ***************************************************************
 	InventoryWindow::InventoryWindow()
-		: CeGuiWindow(&quot;inventorywindow.xml&quot;, WND_MOUSE_INPUT),
+		: AbstractWindow(&quot;inventorywindow.xml&quot;, WND_MOUSE_INPUT),
 		mDescription(NULL),
 		mRenderItemEntity(NULL),
 		mRenderTexture(NULL),

Modified: rl/trunk/engine/ui/src/JournalWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/JournalWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/JournalWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,22 +13,23 @@
 *  along with this program; if not you can get it here
 *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
 */
+#include &quot;JournalWindow.h&quot;
 
 #include &lt;boost/bind.hpp&gt;
+#include &lt;CEGUIPropertyHelper.h&gt;
+#include &lt;elements/CEGUIListboxTextItem.h&gt;
 
-#include &quot;JournalWindow.h&quot;
 #include &quot;RulesSubsystem.h&quot;
 #include &quot;Quest.h&quot;
 #include &quot;QuestBook.h&quot;
 
-#include &lt;CEGUIPropertyHelper.h&gt;
 
 using namespace CEGUI;
 
 namespace rl {
 
     JournalWindow::JournalWindow()
-        : CeGuiWindow(&quot;journalwindow.xml&quot;, WND_MOUSE_INPUT),
+        : AbstractWindow(&quot;journalwindow.xml&quot;, WND_MOUSE_INPUT),
         mQuests(0),
         mQuestTitle(0),
         mQuestState(0),

Modified: rl/trunk/engine/ui/src/LogWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/LogWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/LogWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -23,7 +23,7 @@
 namespace rl
 {
 	LogWindow::LogWindow()
-		: CeGuiWindow(&quot;logwindow.xml&quot;, WND_MOUSE_INPUT)
+		: AbstractWindow(&quot;logwindow.xml&quot;, WND_MOUSE_INPUT)
 	{
 		mRastullahLog = getMultiLineEditbox(&quot;LogWindow/RastullahLog/Text&quot;);
 		mOgreLog = getMultiLineEditbox(&quot;LogWindow/OgreLog/Text&quot;);
@@ -54,7 +54,7 @@
 	
 	void LogWindow::setVisible(bool visible, bool destroyAfterHide)
 	{
-		CeGuiWindow::setVisible(visible, destroyAfterHide);
+		AbstractWindow::setVisible(visible, destroyAfterHide);
 
 		if (visible)
 		{

Modified: rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/MainMenuEngineWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -26,7 +26,7 @@
 namespace rl {
 
     MainMenuEngineWindow::MainMenuEngineWindow() :
-        CeGuiWindow(&quot;mainmenuenginewindow.xml&quot;, WND_SHOW, false)
+        AbstractWindow(&quot;mainmenuenginewindow.xml&quot;, WND_SHOW, false)
     {
         getWindow(&quot;MainMenu/EngineVersion&quot;)-&gt;setText(
             CoreSubsystem::getSingleton().getEngineVersionString()+

Modified: rl/trunk/engine/ui/src/MainMenuWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/MainMenuWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/MainMenuWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,18 +13,17 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
+#include &quot;MainMenuWindow.h&quot;
+
 #include &lt;boost/bind.hpp&gt;
+#include &lt;CEGUIWindowManager.h&gt;
 
-#include &quot;UiPrerequisites.h&quot;
-
-#include &quot;WindowFactory.h&quot;
 #include &quot;CoreSubsystem.h&quot;
 #include &quot;ConfigurationManager.h&quot;
 #include &quot;ContentModule.h&quot;
-
 #include &quot;MainMenuEngineWindow.h&quot;
-#include &quot;MainMenuWindow.h&quot;
 #include &quot;SoundConfig.h&quot;
+#include &quot;WindowFactory.h&quot;
 
 using namespace CEGUI;
 using namespace Ogre;
@@ -32,7 +31,7 @@
 namespace rl {
 
 	MainMenuWindow::MainMenuWindow(MainMenuEngineWindow* enginewindow) :
-		CeGuiWindow(&quot;mainmenuwindow.xml&quot;, WND_MOUSE_INPUT, false, false),
+		AbstractWindow(&quot;mainmenuwindow.xml&quot;, WND_MOUSE_INPUT, false, false),
 		mActiveModule(NULL),
 		mEngineWindow(enginewindow)
 	{
@@ -138,7 +137,7 @@
 
 	void MainMenuWindow::setVisible(bool visible, bool destroyAfterHide)
 	{
-		CeGuiWindow::setVisible(visible, destroyAfterHide);
+		AbstractWindow::setVisible(visible, destroyAfterHide);
 		mEngineWindow-&gt;setVisible(visible, destroyAfterHide);
 	}
 }

Modified: rl/trunk/engine/ui/src/Makefile.am
===================================================================
--- rl/trunk/engine/ui/src/Makefile.am	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/Makefile.am	2007-03-10 21:36:02 UTC (rev 3160)
@@ -11,7 +11,7 @@
 libRlUi_la_SOURCES = \
 	AboutWindow.cpp \
 	ActionChoiceWindow.cpp \
-	CeGuiWindow.cpp \
+	AbstractWindow.cpp \
 	CharacterController.cpp \
 	CharacterSheetWindow.cpp \
 	CharacterStateWindow.cpp \

Modified: rl/trunk/engine/ui/src/MessageWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/MessageWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/MessageWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -20,7 +20,7 @@
 namespace rl {
 
 MessageWindow::MessageWindow() :
-	CeGuiWindow(&quot;messagewindow.xml&quot;, WND_MOUSE_INPUT)
+	AbstractWindow(&quot;messagewindow.xml&quot;, WND_MOUSE_INPUT)
 {
 	mTextField = getWindow(&quot;MessageWindow/Text&quot;);
 

Modified: rl/trunk/engine/ui/src/ObjectDescriptionWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/ObjectDescriptionWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/ObjectDescriptionWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -21,7 +21,7 @@
 namespace rl
 {
 	ObjectDescriptionWindow::ObjectDescriptionWindow()
-		: CeGuiWindow(&quot;objectdescriptionwindow.xml&quot;, WND_SHOW)
+		: AbstractWindow(&quot;objectdescriptionwindow.xml&quot;, WND_SHOW)
 	{
 		mDescription = getMultiLineEditbox(&quot;ObjectDescriptionWindow/Text&quot;);
 	}

Modified: rl/trunk/engine/ui/src/PlaylistWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/PlaylistWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/PlaylistWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -29,7 +29,7 @@
 namespace rl {
 
 PlaylistWindow::PlaylistWindow()
-	: CeGuiWindow(&quot;playlistwindow.xml&quot;, WND_MOUSE_INPUT)
+	: AbstractWindow(&quot;playlistwindow.xml&quot;, WND_MOUSE_INPUT)
 {
 	mPlaylistTable = getMultiColumnList(&quot;PlaylistSheet/PlaylistSheet/Table&quot;);
 	mPlaylistTable-&gt;addColumn((utf8*)&quot;Name&quot;, 0, cegui_reldim(0.5));

Modified: rl/trunk/engine/ui/src/SoundConfig.cpp
===================================================================
--- rl/trunk/engine/ui/src/SoundConfig.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/SoundConfig.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -16,6 +16,9 @@
 #include &quot;SoundConfig.h&quot;
 
 #include &lt;boost/bind.hpp&gt;
+#include &lt;elements/CEGUIFrameWindow.h&gt;
+#include &lt;elements/CEGUIListboxTextItem.h&gt;
+
 #include &quot;Exception.h&quot;
 #include &quot;SoundDriver.h&quot;
 #include &quot;SoundDriverConfigComponent.h&quot;
@@ -28,7 +31,7 @@
 {
 
 	SoundConfig::SoundConfig()
-		: CeGuiWindow(&quot;soundconfig.xml&quot;, WND_ALL_INPUT),
+		: AbstractWindow(&quot;soundconfig.xml&quot;, WND_ALL_INPUT),
 		mDriverBox(NULL),
 		mVolumeSound(0),
 		mVolumeMusic(0),
@@ -100,7 +103,7 @@
 			SoundDriver *activeDriver = SoundManager::getSingleton().getActiveDriver();        
 			if (item-&gt;getText() != activeDriver-&gt;getName())
 			{
-				// Nicht der aktive Treiber, also &#228;ndern.
+				// Nicht der aktive Treiber, also &#239;&#191;&#189;ndern.
                 SoundDriver *driver = SoundManager::getSingleton().getDriverByName(item-&gt;getText().c_str());
                 if (driver != NULL)
 				{
@@ -170,7 +173,7 @@
 
     void SoundConfig::setVisible(bool visible, bool destroyAfterHide)
     {
-        CeGuiWindow::setVisible(visible, destroyAfterHide);
+        AbstractWindow::setVisible(visible, destroyAfterHide);
         if (visible)
         {
             update();
@@ -185,7 +188,7 @@
 
     void SoundConfig::setDriverPage(const CeGuiString&amp; drivername)
     {
-        for ( std::list&lt;SoundDriverConfigComponent*&gt;::iterator it = mDriverConfigs.begin();
+        for (std::list&lt;SoundDriverConfigComponent*&gt;::iterator it = mDriverConfigs.begin();
 				it != mDriverConfigs.end(); it++)
 		{
 			SoundDriverConfigComponent* curr = *it;

Modified: rl/trunk/engine/ui/src/SubtitleWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/SubtitleWindow.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/SubtitleWindow.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -21,7 +21,7 @@
 namespace rl
 {
 	SubtitleWindow::SubtitleWindow()
-		: CeGuiWindow(&quot;subtitlewindow.xml&quot;, WND_SHOW, false)
+		: AbstractWindow(&quot;subtitlewindow.xml&quot;, WND_SHOW, false)
 	{
 		mSubtitle = getMultiLineEditbox(&quot;SubtitleWindow/Text&quot;);
 	}

Modified: rl/trunk/engine/ui/src/UiSubsystem.cpp
===================================================================
--- rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/UiSubsystem.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -16,6 +16,11 @@
 
 #include &quot;UiSubsystem.h&quot;
 
+#include &lt;CEGUISystem.h&gt;
+#include &lt;CEGUIWindowManager.h&gt;
+#include &lt;OgreCEGUIRenderer.h&gt;
+#include &lt;OgreCEGUIResourceProvider.h&gt;
+
 #include &quot;Action.h&quot;
 #include &quot;ActionManager.h&quot;
 #include &quot;Actor.h&quot;
@@ -43,9 +48,6 @@
 #include &quot;WindowManager.h&quot;
 #include &quot;World.h&quot;
 #include &quot;CeGuiHelper.h&quot;
-#include &lt;OgreCEGUIRenderer.h&gt;
-#include &lt;CEGUISystem.h&gt;
-#include &lt;OgreCEGUIResourceProvider.h&gt;
 
 template&lt;&gt; rl::UiSubsystem* Singleton&lt;rl::UiSubsystem&gt;::ms_Singleton = 0;
 using namespace Ogre;
@@ -121,7 +123,7 @@
             &quot;CEGUI System initialized.&quot;, &quot;UiSubsystem::initializeUiSubsystem&quot;);
 
         // load scheme and set up defaults
-        ///@todo Hier sollte was Lookunabh&#228;ngiges rein!!! FIXME TODO BUG!
+        ///@todo Hier sollte was Lookunabh&#239;&#191;&#189;ngiges rein!!! FIXME TODO BUG!
         System::getSingleton().setDefaultMouseCursor((utf8*)&quot;RastullahLook-Images&quot;,
             (utf8*)&quot;MouseArrow&quot;);
         LOG_MESSAGE2(Logger::UI, &quot;Mouse arrow loaded.&quot;,
@@ -183,7 +185,7 @@
             SoundManager::getSingleton().createListenerActor();
         }
 
-        // Nur wenn es sich ver&#228;ndert hat
+        // Nur wenn es sich ver&#239;&#191;&#189;ndert hat
         if( person != mCharacter )
         {
             if( mCharacter != NULL )

Modified: rl/trunk/engine/ui/src/WindowFactory.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowFactory.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/WindowFactory.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -425,7 +425,7 @@
 
     void WindowFactory::logAllWindows()
     {
-        CEGUI::Window* rootWnd = CeGuiWindow::getRoot();
+        CEGUI::Window* rootWnd = AbstractWindow::getRoot();
         CEGUI::uint count = rootWnd-&gt;getChildCount();
         for (CEGUI::uint chIdx =  0; chIdx &lt; count; ++chIdx)
         {

Modified: rl/trunk/engine/ui/src/WindowFadeJob.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowFadeJob.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/WindowFadeJob.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -16,7 +16,7 @@
 
 #include &quot;WindowFadeJob.h&quot;
 
-#include &quot;CeGuiWindow.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;CeGuiHelper.h&quot;
 #include &quot;WindowManager.h&quot;
 
@@ -25,7 +25,7 @@
 
 namespace rl
 {
-    WindowFadeJob::WindowFadeJob(CeGuiWindow* window, Mode mode, Real targetAlpha, Real changeRate)
+    WindowFadeJob::WindowFadeJob(AbstractWindow* window, Mode mode, Real targetAlpha, Real changeRate)
         : Job(true, true),
         mWindow(window),
         mMode(mode),

Modified: rl/trunk/engine/ui/src/WindowManager.cpp
===================================================================
--- rl/trunk/engine/ui/src/WindowManager.cpp	2007-03-09 16:16:41 UTC (rev 3159)
+++ rl/trunk/engine/ui/src/WindowManager.cpp	2007-03-10 21:36:02 UTC (rev 3160)
@@ -13,11 +13,11 @@
  *  along with this program; if not you can get it here
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
-#include &quot;CeGuiWindow.h&quot;
 #include &quot;WindowManager.h&quot;
 #include &lt;CEGUIWindowManager.h&gt;
 
 #include &quot;CoreSubsystem.h&quot;
+#include &quot;AbstractWindow.h&quot;
 #include &quot;Exception.h&quot;
 #include &quot;GameLoop.h&quot;
 #include &quot;UiSubsystem.h&quot;
@@ -36,16 +36,16 @@
 	{
 	}
 	
-	void WindowManager::registerWindow(CeGuiWindow* window)
+	void WindowManager::registerWindow(AbstractWindow* window)
 	{
 		mWindowList.push_back(window);
 	}
 
-	void WindowManager::destroyWindow(CeGuiWindow* window)
+	void WindowManager::destroyWindow(AbstractWindow* window)
 	{
 		mWindowList.remove(window);
 		window-&gt;getWindow()-&gt;hide();
-		CeGuiWindow::getRoot()-&gt;removeChildWindow(window-&gt;getWindow());
+		AbstractWindow::getRoot()-&gt;removeChildWindow(window-&gt;getWindow());
 		CEGUI::WindowManager::getSingleton().destroyWindow(window-&gt;getWindow());
 
 		///@todo memory leak, aber destroyWindow macht sonst Probleme (heap corruption)
@@ -54,9 +54,9 @@
 
 	void WindowManager::closeTopWindow()
 	{
-		for(std::list&lt;CeGuiWindow*&gt;::iterator it = mWindowList.begin(); it != mWindowList.end(); it++)
+		for(std::list&lt;AbstractWindow*&gt;::iterator it = mWindowList.begin(); it != mWindowList.end(); it++)
 		{
-			CeGuiWindow* cur = *it;
+			AbstractWindow* cur = *it;
 			if (cur-&gt;isVisible() &amp;&amp; cur-&gt;isClosingOnEscape())
 			{
 				cur-&gt;setVisible(false);
@@ -65,14 +65,14 @@
 		}
 	}
 
-	bool WindowManager::handleMovedToFront(CeGuiWindow* window)
+	bool WindowManager::handleMovedToFront(AbstractWindow* window)
 	{
 		mWindowList.remove(window);
 		mWindowList.push_front(window);
 		return true;
 	}
 	
-	bool WindowManager::handleMovedToBack(CeGuiWindow* window)
+	bool WindowManager::handleMovedToBack(AbstractWindow* window)
 	{
 		mWindowList.remove(window);
 		mWindowList.push_back(window);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000230.html">[Dsa-hl-svn] r3159 - in rl/trunk/engine/rules: include src
</A></li>
	<LI>Next message: <A HREF="000232.html">[Dsa-hl-svn] r3161 - in rl/trunk/engine: rules/include rules/src	script/swig ui ui/include ui/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#231">[ date ]</a>
              <a href="thread.html#231">[ thread ]</a>
              <a href="subject.html#231">[ subject ]</a>
              <a href="author.html#231">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
