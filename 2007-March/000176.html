<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dsa-hl-svn] r3105 - in rl/trunk/engine: common common/include	common/src core/include core/src rules/src script/swig ui/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dsa-hl-svn/2007-March/index.html" >
   <LINK REL="made" HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r3105%20-%20in%20rl/trunk/engine%3A%20common%20common/include%0A%09common/src%20core/include%20core/src%20rules/src%20script/swig%20ui/src&In-Reply-To=%3C200703012013.l21KDAcN026149%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000175.html">
   <LINK REL="Next"  HREF="000177.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dsa-hl-svn] r3105 - in rl/trunk/engine: common common/include	common/src core/include core/src rules/src script/swig ui/src</H1>
    <B>zero-gravity at mail.berlios.de</B> 
    <A HREF="mailto:dsa-hl-svn%40lists.berlios.de?Subject=Re%3A%20%5BDsa-hl-svn%5D%20r3105%20-%20in%20rl/trunk/engine%3A%20common%20common/include%0A%09common/src%20core/include%20core/src%20rules/src%20script/swig%20ui/src&In-Reply-To=%3C200703012013.l21KDAcN026149%40sheep.berlios.de%3E"
       TITLE="[Dsa-hl-svn] r3105 - in rl/trunk/engine: common common/include	common/src core/include core/src rules/src script/swig ui/src">zero-gravity at mail.berlios.de
       </A><BR>
    <I>Thu Mar  1 21:13:10 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000175.html">[Dsa-hl-svn] r3104 - rl/trunk/docs
</A></li>
        <LI>Next message: <A HREF="000177.html">[Dsa-hl-svn] r3106 - in rl/trunk/engine: ai/include ai/src	core/include
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#176">[ date ]</a>
              <a href="thread.html#176">[ thread ]</a>
              <a href="subject.html#176">[ subject ]</a>
              <a href="author.html#176">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: zero-gravity
Date: 2007-03-01 21:12:51 +0100 (Thu, 01 Mar 2007)
New Revision: 3105

Removed:
   rl/trunk/engine/common/include/LinkedPlaylist.h
   rl/trunk/engine/common/include/Playlist.h
   rl/trunk/engine/common/include/PlaylistEvent.h
   rl/trunk/engine/common/include/PlaylistObject.h
   rl/trunk/engine/common/include/SimplePlaylist.h
   rl/trunk/engine/common/src/LinkedPlaylist.cpp
   rl/trunk/engine/common/src/Playlist.cpp
   rl/trunk/engine/common/src/PlaylistEvent.cpp
   rl/trunk/engine/common/src/PlaylistObject.cpp
   rl/trunk/engine/common/src/SimplePlaylist.cpp
Modified:
   rl/trunk/engine/common/RlCommon2005.vcproj
   rl/trunk/engine/common/include/Exception.h
   rl/trunk/engine/core/include/BaseAnimation.h
   rl/trunk/engine/core/include/SoundObject.h
   rl/trunk/engine/core/src/AnimationListener.cpp
   rl/trunk/engine/core/src/BaseAnimation.cpp
   rl/trunk/engine/core/src/GameAreaListener.cpp
   rl/trunk/engine/core/src/SoundObject.cpp
   rl/trunk/engine/rules/src/ObjectStateChangeListener.cpp
   rl/trunk/engine/rules/src/QuestListener.cpp
   rl/trunk/engine/rules/src/TimerListener.cpp
   rl/trunk/engine/script/swig/RlCommon.head.swig
   rl/trunk/engine/script/swig/RlCommon.swig
   rl/trunk/engine/script/swig/RlExports.i
   rl/trunk/engine/ui/src/ActionChoiceWindow.cpp
   rl/trunk/engine/ui/src/CharacterController.cpp
   rl/trunk/engine/ui/src/InputManager.cpp
Log:
Removed Playlists they are no longer needed because of the Job-System
Removed all ScriptInvocationFailedExceptions
Cleaned up RlExports.i a bit

Modified: rl/trunk/engine/common/RlCommon2005.vcproj
===================================================================
--- rl/trunk/engine/common/RlCommon2005.vcproj	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/RlCommon2005.vcproj	2007-03-01 20:12:51 UTC (rev 3105)
@@ -301,10 +301,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\src\LinkedPlaylist.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\src\Logger.cpp&quot;
 				&gt;
 			&lt;/File&gt;
@@ -317,18 +313,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\src\Playlist.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\src\PlaylistEvent.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\src\PlaylistObject.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\src\Properties.cpp&quot;
 				&gt;
 			&lt;/File&gt;
@@ -345,10 +329,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\src\SimplePlaylist.cpp&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\src\XmlErrorHandler.cpp&quot;
 				&gt;
 			&lt;/File&gt;
@@ -413,10 +393,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\include\LinkedPlaylist.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\include\Logger.h&quot;
 				&gt;
 			&lt;/File&gt;
@@ -429,18 +405,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\include\Playlist.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\include\PlaylistEvent.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
-				RelativePath=&quot;.\include\PlaylistObject.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\include\Properties.h&quot;
 				&gt;
 			&lt;/File&gt;
@@ -461,10 +425,6 @@
 				&gt;
 			&lt;/File&gt;
 			&lt;File
-				RelativePath=&quot;.\include\SimplePlaylist.h&quot;
-				&gt;
-			&lt;/File&gt;
-			&lt;File
 				RelativePath=&quot;.\include\Sleep.h&quot;
 				&gt;
 			&lt;/File&gt;

Modified: rl/trunk/engine/common/include/Exception.h
===================================================================
--- rl/trunk/engine/common/include/Exception.h	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/include/Exception.h	2007-03-01 20:12:51 UTC (rev 3105)
@@ -241,18 +241,6 @@
 
    };
 
-   class ScriptInvocationFailedException : public RuntimeException {
-   public:
-       ScriptInvocationFailedException(const std::string&amp; message,
-           const std::string&amp; file, const std::string&amp; function, int line)
-           : RuntimeException(message, file, function, line) {}
-
-       ScriptInvocationFailedException(const ScriptInvocationFailedException&amp; rhs)
-               : RuntimeException(rhs) {}
-
-       virtual std::string getType() { return &quot;ScriptInvocationFailedException&quot;; }
-   };
-
    class OutOfRangeException : public RuntimeException {
    public:
       OutOfRangeException(const std::string&amp; message,

Deleted: rl/trunk/engine/common/include/LinkedPlaylist.h
===================================================================
--- rl/trunk/engine/common/include/LinkedPlaylist.h	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/include/LinkedPlaylist.h	2007-03-01 20:12:51 UTC (rev 3105)
@@ -1,67 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-
-#ifndef _LINKEDPLAYLIST_H_
-#define _LINKEDPLAYLIST_H_
-
-#include &quot;CommonPrerequisites.h&quot;
-#include &quot;EventListener.h&quot;
-#include &quot;Playlist.h&quot;
-#include &lt;list&gt;
-
-namespace rl
-{
-class PlaylistObject;
-class LinkItem;
-typedef std::list&lt;LinkItem*&gt; LinkedList;
-class _RlCommonExport LinkItem : public EventListener&lt;PlaylistEvent&gt;
-{
-private:
-	LinkedList mChildren;
-	PlaylistObject *mItem;
-
-public:
-	LinkItem(PlaylistObject *item);
-	virtual ~LinkItem();
-	PlaylistObject* getItem() const;
-	void start();
-	void stop();
-	void add(PlaylistObject *child);
-	void remove(PlaylistObject *child);
-	virtual bool eventRaised(PlaylistEvent *anEvent);
-};
-
-
-class _RlCommonExport LinkedPlaylist : public Playlist
-{
-private:
-	LinkItem *mList;
-	LinkItem *mPlaying;
-
-public:
-	LinkedPlaylist();
-	virtual ~LinkedPlaylist();
-    void add(PlaylistObject *object, LinkItem *parent);
-	void remove(PlaylistObject *object, LinkItem *parent);
-    virtual void stop();
-	virtual void start();
-	virtual bool eventRaised(PlaylistEvent *anEvent);
-	LinkItem* getList() const;
-};
-
-}
-
-#endif /* LinkedPlaylist_H_*/

Deleted: rl/trunk/engine/common/include/Playlist.h
===================================================================
--- rl/trunk/engine/common/include/Playlist.h	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/include/Playlist.h	2007-03-01 20:12:51 UTC (rev 3105)
@@ -1,40 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-
-#ifndef _PLAYLIST_H_
-#define _PLAYLIST_H_
-
-#include &quot;CommonPrerequisites.h&quot;
-#include &quot;EventListener.h&quot;
-#include &quot;PlaylistObject.h&quot;
-
-namespace rl
-{
-
-
-class _RlCommonExport Playlist : public EventListener&lt;PlaylistEvent&gt;
-{
-    
-public:
-	Playlist();
-	virtual ~Playlist();
-    virtual void stop() = 0;
-	virtual void start() = 0;
-};
-
-}
-
-#endif /*Playlist_H_*/

Deleted: rl/trunk/engine/common/include/PlaylistEvent.h
===================================================================
--- rl/trunk/engine/common/include/PlaylistEvent.h	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/include/PlaylistEvent.h	2007-03-01 20:12:51 UTC (rev 3105)
@@ -1,42 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
- 
-#ifndef PLAYLISTEVENT_H
-#define PLAYLISTEVENT_H
-
-#include &quot;CommonPrerequisites.h&quot;
-#include &quot;EventObject.h&quot;
-
-namespace rl {
-
-class _RlCommonExport PlaylistEvent : public EventObject
-{
-
-public:
-	PlaylistEvent(EventSource *source);
-    PlaylistEvent(EventSource *source, const unsigned int reason);
-	virtual ~PlaylistEvent();
-
-	static const unsigned int NOPEVENT = 0;
-	static const unsigned int STARTEVENT = 1;
-    static const unsigned int STOPEVENT = 2;
-    static const unsigned int PAUSEEVENT = 3;
-	static const unsigned int LOADEVENT = 4;
-	static const unsigned int UNLOADEVENT = 5;
-};
-
-}
-#endif // PLAYLISTEVENT_H

Deleted: rl/trunk/engine/common/include/PlaylistObject.h
===================================================================
--- rl/trunk/engine/common/include/PlaylistObject.h	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/include/PlaylistObject.h	2007-03-01 20:12:51 UTC (rev 3105)
@@ -1,49 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-
-#ifndef _PLAYLISTOBJECT_H_
-#define _PLAYLISTOBJECT_H_
-
-#include &quot;CommonPrerequisites.h&quot;
-#include &quot;EventCaster.h&quot;
-#include &quot;PlaylistEvent.h&quot;
-#include &quot;EventSource.h&quot;
-
-namespace rl {
-
-class _RlCommonExport PlaylistObject : 
-			public EventCaster&lt;PlaylistEvent&gt;, public virtual EventSource
-{
-public:
-	/// Konstruktor
-	PlaylistObject();
-	/// Destruktor
-	virtual ~PlaylistObject();
-	/// Objekt laden, einrichten etc.
-	virtual void load();
-	/// Objekt entladen, abbauen etc.
-	virtual void unload();
-	/// Objektaktion starten
-	virtual void start();
-	/// Objectaktion stoppen
-	virtual void stop();
-	/// Objektaktion pausieren
-	virtual void pause();
-};
-
-}
-
-#endif

Deleted: rl/trunk/engine/common/include/SimplePlaylist.h
===================================================================
--- rl/trunk/engine/common/include/SimplePlaylist.h	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/include/SimplePlaylist.h	2007-03-01 20:12:51 UTC (rev 3105)
@@ -1,51 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-
-#ifndef _SIMPLEPLAYLIST_H_
-#define _SIMPLEPLAYLIST_H_
-
-#include &quot;CommonPrerequisites.h&quot;
-#include &quot;EventListener.h&quot;
-#include &quot;Playlist.h&quot;
-#include &lt;list&gt;
-
-namespace rl
-{
-
-typedef std::list&lt;PlaylistObject*&gt; ObjectList;
-
-class _RlCommonExport SimplePlaylist : public Playlist
-{
-private:
-    ObjectList mQueue;
-	ObjectList::iterator mItem;
-	bool mLooping;
-    
-public:
-	SimplePlaylist();
-	virtual ~SimplePlaylist();
-    void add(PlaylistObject *object);
-	void remove(PlaylistObject *object);
-    virtual void stop();
-	virtual void start();
-	virtual bool eventRaised(PlaylistEvent *anEvent);
-	void setLooping(bool looping);
-	bool isLooping() const;
-};
-
-}
-
-#endif /* SimplePlaylist_H_*/

Deleted: rl/trunk/engine/common/src/LinkedPlaylist.cpp
===================================================================
--- rl/trunk/engine/common/src/LinkedPlaylist.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/src/LinkedPlaylist.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -1,170 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-
-#include &quot;LinkedPlaylist.h&quot;
-
-namespace rl
-{
-
-LinkItem::LinkItem(PlaylistObject *object)
-	: mItem(object)
-{
-	mItem-&gt;addEventListener(this);
-}
-
-LinkItem::~LinkItem()
-{
-	mItem-&gt;stop();
-	mItem-&gt;removeEventListener(this);
-
-	LinkedList::iterator it;
-	for(it = mChildren.begin(); it != mChildren.end();)
-	{
-		delete *(it++);
-	} 
-}
-
-void LinkItem::add(PlaylistObject *child)
-{
-	if (child != 0)
-	{
-		LinkItem *item = new LinkItem(child);
-		mChildren.push_back(item);
-	}
-}
-
-bool LinkItem::eventRaised(PlaylistEvent *anEvent)
-{
-	switch(anEvent-&gt;getReason())
-	{
-/*	case PlaylistEvent::STARTEVENT:
-		break;
-	case PlaylistEvent::NOPEVENT:
-		break;
-	case PlaylistEvent::PAUSEEVENT:
-		break; */
-	case PlaylistEvent::STOPEVENT:
-		{
-			LinkedList::iterator it;
-			for(it = mChildren.begin(); it != mChildren.end();it++)
-			{
-				(*it)-&gt;start();
-			}
-		}
-		break;
-	default:
-		break;
-	}
-	return true;
-}
-
-PlaylistObject *LinkItem::getItem() const
-{
-	return mItem;
-}
-
-void LinkItem::remove(PlaylistObject *child)
-{
-	LinkedList::iterator it;
-	for(it = mChildren.begin(); it != mChildren.end();)
-	{
-		if ((*it)-&gt;getItem() == child)
-		{
-			mChildren.erase(it++);
-		} else {
-			++it;
-		}
-	}
-}
-
-void LinkItem::start()
-{
-
-	mItem-&gt;start();
-}
-
-void LinkItem::stop()
-{
-}
-
-LinkedPlaylist::LinkedPlaylist() : Playlist(),
-	mList(0)
-{
-}
-
-LinkedPlaylist::~LinkedPlaylist()
-{
-	stop();
-	delete mList;
-}
-
-
-void LinkedPlaylist::add(PlaylistObject *object, LinkItem *parent)
-{
-	if (object)
-	{
-		if (parent == 0)
-		{
-			LinkItem *item = new LinkItem(object);
-			mList = item;
-		} else {
-			parent-&gt;add(object);
-		}
-		object-&gt;load();
-		object-&gt;addEventListener(this);
-	}
-}
-
-void LinkedPlaylist::remove(PlaylistObject *object, LinkItem *parent)
-{
-	if (object &amp;&amp; parent)
-	{
-		object-&gt;removeEventListener(this);
-		object-&gt;unload();
-		parent-&gt;remove(object);
-	}
-}
-
-void LinkedPlaylist::start()
-{
-	stop();
-	if (mList != 0)
-	{
-		mPlaying = mList;
-		mPlaying-&gt;start();
-	}
-}
-
-void LinkedPlaylist::stop()
-{
-	if (mList != 0)
-	{
-		mList-&gt;stop();
-	}
-}
-
-bool LinkedPlaylist::eventRaised(PlaylistEvent *anEvent)
-{
-	mPlaying-&gt;stop();
-	return true;
-}
-
-LinkItem *LinkedPlaylist::getList() const
-{
-	return mList;
-}
-
-}

Deleted: rl/trunk/engine/common/src/Playlist.cpp
===================================================================
--- rl/trunk/engine/common/src/Playlist.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/src/Playlist.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -1,32 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-
-#include &quot;Playlist.h&quot;
-#include &quot;PlaylistObject.h&quot;
-
-namespace rl
-{
-
-Playlist::Playlist() : EventListener&lt;PlaylistEvent&gt;()
-{
-}
-
-Playlist::~Playlist()
-{
-}
-
-
-}

Deleted: rl/trunk/engine/common/src/PlaylistEvent.cpp
===================================================================
--- rl/trunk/engine/common/src/PlaylistEvent.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/src/PlaylistEvent.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -1,34 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-
-#include &quot;PlaylistEvent.h&quot;
-
-namespace rl {
-
-PlaylistEvent::PlaylistEvent(EventSource *source) :
-    EventObject(source)
-{}
-
-PlaylistEvent::PlaylistEvent(EventSource *source, const unsigned int reason):
-    EventObject(source, reason)
-{
-}
-
-PlaylistEvent::~PlaylistEvent()
-{}
-
-
-}

Deleted: rl/trunk/engine/common/src/PlaylistObject.cpp
===================================================================
--- rl/trunk/engine/common/src/PlaylistObject.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/src/PlaylistObject.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -1,68 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
- * Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
- * 
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the Clarified Artistic License.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  Clarified Artistic License for more details.
- *
- *  You should have received a copy of the Clarified Artistic License
- *  along with this program; if not you can get it here
- *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
- */
-
-#include &quot;PlaylistObject.h&quot;
-
-namespace rl {
-/**
- * @author JoSch
- * @date 12-04-2006
- * @version 1.0
- */
-PlaylistObject::PlaylistObject(): EventCaster&lt;PlaylistEvent&gt;(), EventSource()
-{
-}
-
-/**
- * @author JoSch
- * @date 12-04-2006
- * @version 1.0
- */
-PlaylistObject::~PlaylistObject()
-{
-}
-
-void PlaylistObject::start()
-{
-	PlaylistEvent event = PlaylistEvent(this, PlaylistEvent::STARTEVENT);
-	dispatchEvent(&amp;event);
-}
-
-void PlaylistObject::stop()
-{
-	PlaylistEvent event = PlaylistEvent(this, PlaylistEvent::STOPEVENT);
-	dispatchEvent(&amp;event);
-}
-
-void PlaylistObject::pause()
-{
-	PlaylistEvent event = PlaylistEvent(this, PlaylistEvent::PAUSEEVENT);
-	dispatchEvent(&amp;event);
-}
-
-void PlaylistObject::load()
-{
-	PlaylistEvent event = PlaylistEvent(this, PlaylistEvent::LOADEVENT);
-	dispatchEvent(&amp;event);
-}
-
-void PlaylistObject::unload()
-{
-	PlaylistEvent event = PlaylistEvent(this, PlaylistEvent::UNLOADEVENT);
-	dispatchEvent(&amp;event);
-}
-
-}

Deleted: rl/trunk/engine/common/src/SimplePlaylist.cpp
===================================================================
--- rl/trunk/engine/common/src/SimplePlaylist.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/common/src/SimplePlaylist.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -1,106 +0,0 @@
-/* This source file is part of Rastullahs Lockenpracht.
-* Copyright (C) 2003-2007 Team Pantheon. <A HREF="http://www.team-pantheon.de">http://www.team-pantheon.de</A>
-* 
-*  This program is free software; you can redistribute it and/or modify
-*  it under the terms of the Clarified Artistic License.
-*
-*  This program is distributed in the hope that it will be useful,
-*  but WITHOUT ANY WARRANTY; without even the implied warranty of
-*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-*  Clarified Artistic License for more details.
-*
-*  You should have received a copy of the Clarified Artistic License
-*  along with this program; if not you can get it here
-*  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
-*/
-
-#include &quot;SimplePlaylist.h&quot;
-
-namespace rl
-{
-
-SimplePlaylist::SimplePlaylist() : Playlist(),
-	mLooping(false)
-{
-}
-
-SimplePlaylist::~SimplePlaylist()
-{
-	stop();
-/*	for(mItem = mQueue.begin(); mItem != mQueue.end(); mItem++)
-	{
-		remove(*mItem);
-	} */
-}
-
-
-void SimplePlaylist::add(PlaylistObject *object)
-{
-	if (object)
-	{
-		mQueue.push_back(object);
-		object-&gt;load();
-		object-&gt;addEventListener(this);
-	}
-}
-
-void SimplePlaylist::remove(PlaylistObject *object)
-{
-	if (object)
-	{
-		object-&gt;removeEventListener(this);
-		object-&gt;unload();
-		if (*mItem == object)
-		{
-			mItem++;
-		}
-		mQueue.remove(object);
-	}
-}
-
-void SimplePlaylist::start()
-{
-	stop();
-	mItem = mQueue.begin();
-	(*mItem)-&gt;start();
-}
-
-void SimplePlaylist::stop()
-{
-	ObjectList::iterator it;
-	for(it = mQueue.begin(); it != mQueue.end(); it++)
-	{
-		(*it)-&gt;stop();
-	}
-}
-
-bool SimplePlaylist::eventRaised(PlaylistEvent *anEvent)
-{
-	(*mItem)-&gt;stop();
-	if (mItem != mQueue.end())
-	{
-		mItem++;
-	} else {
-		if (mLooping)
-		{
-			mItem = mQueue.begin();
-		}
-	}
-	if (mItem != mQueue.end())
-	{
-		(*mItem)-&gt;start();
-	}
-	return true;
-}
-
-void SimplePlaylist::setLooping(bool looping)
-{
-	mLooping = looping;
-}
-
-bool SimplePlaylist::isLooping() const
-{
-	return mLooping;
-}
-
-}

Modified: rl/trunk/engine/core/include/BaseAnimation.h
===================================================================
--- rl/trunk/engine/core/include/BaseAnimation.h	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/core/include/BaseAnimation.h	2007-03-01 20:12:51 UTC (rev 3105)
@@ -22,7 +22,6 @@
 #include &lt;set&gt;
 #include &lt;map&gt;
 #include &quot;AnimationListener.h&quot;
-#include &quot;PlaylistObject.h&quot;
 
 
 namespace rl {
@@ -33,7 +32,7 @@
 	@remarks Instanzen werden &#252;ber den AnimationManager erzeugt
 	@see AnimationManager
 */
-class _RlCoreExport BaseAnimation : public virtual PlaylistObject
+class _RlCoreExport BaseAnimation : public virtual EventSource
 {
     public:
 		/**

Modified: rl/trunk/engine/core/include/SoundObject.h
===================================================================
--- rl/trunk/engine/core/include/SoundObject.h	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/core/include/SoundObject.h	2007-03-01 20:12:51 UTC (rev 3105)
@@ -19,7 +19,6 @@
 
 #include &quot;CorePrerequisites.h&quot;
 #include &quot;ActorControlledObject.h&quot;
-#include &quot;PlaylistObject.h&quot;
 #include &quot;SoundEvents.h&quot;
 #include &quot;EventListener.h&quot;
 
@@ -33,8 +32,7 @@
      *  heften kann. Zwischen Actor und ActorControlledObject
      *  besteht eine 1:1-Beziehung.
      */
-    class _RlCoreExport SoundObject : public ActorControlledObject, public PlaylistObject,
-        public EventListener&lt;SoundEvent&gt;
+    class _RlCoreExport SoundObject : public ActorControlledObject
     {
     public:
         SoundObject(Sound *sound, const Ogre::String &amp;name);
@@ -84,9 +82,6 @@
         void start();
         /// Pausieren den Sound
         void pause();
-        
-        /// Ein SoundEreignis ist passiert.
-        virtual bool eventRaised(SoundEvent *event);
 
 		virtual bool isMeshObject();
     };

Modified: rl/trunk/engine/core/src/AnimationListener.cpp
===================================================================
--- rl/trunk/engine/core/src/AnimationListener.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/core/src/AnimationListener.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -38,25 +38,18 @@
 
 bool AnimationListener::eventRaised( AnimationEvent* anEvent ) 
 {
-    try
+    switch( anEvent-&gt;getReason() )
     {
-	    switch( anEvent-&gt;getReason() )
-	    {
-	    case AnimationEvent::ANIMATION_FINISHED:
-		    this-&gt;animationFinished( anEvent );
-		    break;
-	    case AnimationEvent::ANIMATION_UNPAUSED:
-		    this-&gt;animationUnpaused( anEvent );
-		    break;
-	    case AnimationEvent::ANIMATION_PAUSED:
-		    this-&gt;animationPaused( anEvent );
-		    break;
-	    }
+    case AnimationEvent::ANIMATION_FINISHED:
+        this-&gt;animationFinished( anEvent );
+        break;
+    case AnimationEvent::ANIMATION_UNPAUSED:
+        this-&gt;animationUnpaused( anEvent );
+        break;
+    case AnimationEvent::ANIMATION_PAUSED:
+        this-&gt;animationPaused( anEvent );
+        break;
     }
-    catch( ScriptInvocationFailedException&amp; sife )
-    {
-        LOG_ERROR(Logger::CORE, sife.toString() );
-    }
 
 	// consumed or not ;)
 	return false;
@@ -64,16 +57,8 @@
 
  bool AnimationFrameListener::eventRaised(AnimationFrameEvent *anEvent)
 {
-    try
-    {
-        this-&gt;animationFrameReached( anEvent );
-    }
-    catch( ScriptInvocationFailedException&amp; sife )
-    {
-        LOG_ERROR(Logger::CORE, sife.toString() );
-    }
+    this-&gt;animationFrameReached( anEvent );
 
-
     // consumed or not ;)
     return false;
 }

Modified: rl/trunk/engine/core/src/BaseAnimation.cpp
===================================================================
--- rl/trunk/engine/core/src/BaseAnimation.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/core/src/BaseAnimation.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -28,7 +28,7 @@
 
 BaseAnimation::BaseAnimation( Ogre::Real length, Ogre::Real speed, 
     unsigned int timesToPlay, bool paused ) :
-    PlaylistObject(),
+    EventSource(),
     mLength(length),
 	mAnimationFrameListener(),
 	mAnimationCaster(),
@@ -427,19 +427,16 @@
 
 void BaseAnimation::start()
 {
-	PlaylistObject::start();
     setPaused(false);
 }
 
 void BaseAnimation::stop()
 {
-	PlaylistObject::stop();
     setPaused(true);
 }
 
 void BaseAnimation::pause()
 {
-	PlaylistObject::pause();
     setPaused(true);
 }
 

Modified: rl/trunk/engine/core/src/GameAreaListener.cpp
===================================================================
--- rl/trunk/engine/core/src/GameAreaListener.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/core/src/GameAreaListener.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -30,22 +30,15 @@
 
     bool GameAreaListener::eventRaised( GameAreaEvent* anEvent )
     {
-        try
+        switch( anEvent-&gt;getReason() )
         {
-            switch( anEvent-&gt;getReason() )
-            {
-            case GameAreaEvent::AREA_ENTERED:
-                this-&gt;areaEntered( anEvent );
-                break;
-            case GameAreaEvent::AREA_LEFT:
-                this-&gt;areaLeft( anEvent );
-                break;
-            }
+        case GameAreaEvent::AREA_ENTERED:
+            this-&gt;areaEntered( anEvent );
+            break;
+        case GameAreaEvent::AREA_LEFT:
+            this-&gt;areaLeft( anEvent );
+            break;
         }
-        catch( ScriptInvocationFailedException&amp; sife )
-        {
-            LOG_ERROR(Logger::CORE, sife.toString() );
-        }
 
 
         // consumed or not ;)

Modified: rl/trunk/engine/core/src/SoundObject.cpp
===================================================================
--- rl/trunk/engine/core/src/SoundObject.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/core/src/SoundObject.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -35,11 +35,8 @@
  * @date 03-11-2005
  */   
 SoundObject::SoundObject(Sound *sound, const Ogre::String &amp;name)
-    : ActorControlledObject(sound),
-	PlaylistObject(),
-	EventListener&lt;SoundEvent&gt;()
+    : ActorControlledObject(sound)
 {
-    sound-&gt;addEventListener(this);
     // The movable has to be registered with the Ogre scene manager, since it is not
     // created by it.
     CoreSubsystem::getSingletonPtr()-&gt;getWorld()-&gt;getSceneManager()-&gt;injectMovableObject(sound);
@@ -53,7 +50,6 @@
 {
     if (mMovableObject != NULL)
     {
-        getSound()-&gt;removeEventListener(this);
 		SoundManager::getSingleton().getActiveDriver()-&gt;destroySound(getSound());
         mMovableObject = NULL;
     }
@@ -121,7 +117,6 @@
 
 void SoundObject::stop()
 {
-	PlaylistObject::stop();
     getSound()-&gt;stop();
 }
 
@@ -153,13 +148,11 @@
 
 void SoundObject::load()
 {
-	PlaylistObject::load();
 	getSound()-&gt;load();
 }
 
 void SoundObject::unload()
 {
-	PlaylistObject::unload();
     getSound()-&gt;unload();
 }
 
@@ -183,37 +176,14 @@
     return &quot;SoundObject&quot;;
 }
 
-bool SoundObject::eventRaised(SoundEvent *event)
-{
-	int newReason = PlaylistEvent::NOPEVENT;
-	switch(event-&gt;getReason())
-	{
-		case SoundPlayEvent::PAUSEEVENT:
-			newReason = PlaylistEvent::PAUSEEVENT;
-			break;
-		case SoundPlayEvent::STARTEVENT:
-			newReason = PlaylistEvent::STARTEVENT;
-			break;
-		case SoundPlayEvent::STOPEVENT:
-			newReason = PlaylistEvent::STOPEVENT;
-			break;
-		default:
-			break;
-	}
-	PlaylistEvent newEvent = PlaylistEvent(event-&gt;getSource(), newReason);
-    dispatchEvent(&amp;newEvent);
-    return true;
-}
 
 void SoundObject::pause()
 {
-	PlaylistObject::pause();
     pause(true);
 }
 
 void SoundObject::start()
 {
-	PlaylistObject::start();
     pause(false);
 }
 

Modified: rl/trunk/engine/rules/src/ObjectStateChangeListener.cpp
===================================================================
--- rl/trunk/engine/rules/src/ObjectStateChangeListener.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/rules/src/ObjectStateChangeListener.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -26,14 +26,7 @@
 
 	bool ObjectStateChangeListener::eventRaised(ObjectStateChangeEvent* evt)
 	{
-        try
-        {
-            objectStateChanged(evt);
-        }
-		catch( ScriptInvocationFailedException&amp; sife )
-        {
-			LOG_ERROR(Logger::RULES, sife.toString() );
-        }
+        objectStateChanged(evt);
 
         // consumed or not
 		return false;

Modified: rl/trunk/engine/rules/src/QuestListener.cpp
===================================================================
--- rl/trunk/engine/rules/src/QuestListener.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/rules/src/QuestListener.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -26,21 +26,14 @@
 
     bool QuestListener::eventRaised(QuestEvent* evt)
     {
-        try
-        {
-            if( evt-&gt;getReason() == QuestEvent::QUEST_STATE )
-                questStateChanged(evt);
-            else if( evt-&gt;getReason() == QuestEvent::QUEST_PARTSDONE )
-                questPartsDoneChanged(evt);
-            else if( evt-&gt;getReason() == QuestEvent::QUEST_KNOWN )
-                questKnownChanged(evt);
-            else if( evt-&gt;getReason() == QuestEvent::QUEST_SUBQUEST )
-                questSubquestAdded(evt);
-        }
-        catch( ScriptInvocationFailedException&amp; sife )
-        {
-            LOG_ERROR(Logger::RULES, sife.toString() );
-        }
+        if( evt-&gt;getReason() == QuestEvent::QUEST_STATE )
+            questStateChanged(evt);
+        else if( evt-&gt;getReason() == QuestEvent::QUEST_PARTSDONE )
+            questPartsDoneChanged(evt);
+        else if( evt-&gt;getReason() == QuestEvent::QUEST_KNOWN )
+            questKnownChanged(evt);
+        else if( evt-&gt;getReason() == QuestEvent::QUEST_SUBQUEST )
+            questSubquestAdded(evt);
 
         // consumed or not
         return false;
@@ -48,17 +41,10 @@
 
     bool QuestListener::eventRaised(JournalEvent* evt)
     {
-        try
+        if (evt-&gt;getReason() == JournalEvent::JOURNAL_ENTRY_ADDED)
         {
-            if (evt-&gt;getReason() == JournalEvent::JOURNAL_ENTRY_ADDED)
-            {
-                journalEntryAdded(evt);
-            }
+            journalEntryAdded(evt);
         }
-        catch (ScriptInvocationFailedException&amp; sife)
-        {
-            LOG_ERROR(Logger::RULES, sife.toString());
-        }
 
         // consumed or not
         return false;

Modified: rl/trunk/engine/rules/src/TimerListener.cpp
===================================================================
--- rl/trunk/engine/rules/src/TimerListener.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/rules/src/TimerListener.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -27,14 +27,7 @@
 
 	bool TimerListener::eventRaised(TimerEvent* evt)
 	{
-        try
-        {
-            timerFired(evt);
-        }
-		catch( ScriptInvocationFailedException&amp; sife )
-        {
-			LOG_ERROR(Logger::CORE, sife.toString() );
-        }
+        timerFired(evt);
 
         // consumed or not
 		return false;

Modified: rl/trunk/engine/script/swig/RlCommon.head.swig
===================================================================
--- rl/trunk/engine/script/swig/RlCommon.head.swig	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/script/swig/RlCommon.head.swig	2007-03-01 20:12:51 UTC (rev 3105)
@@ -23,10 +23,5 @@
 #include &quot;EventListener.h&quot;
 #include &quot;EventObject.h&quot;
 #include &quot;EventCaster.h&quot;
-#include &quot;PlaylistObject.h&quot;
-#include &quot;Playlist.h&quot;
-#include &quot;PlaylistEvent.h&quot;
 #include &quot;Property.h&quot;
-#include &quot;SimplePlaylist.h&quot;
-#include &quot;LinkedPlaylist.h&quot;
 %}

Modified: rl/trunk/engine/script/swig/RlCommon.swig
===================================================================
--- rl/trunk/engine/script/swig/RlCommon.swig	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/script/swig/RlCommon.swig	2007-03-01 20:12:51 UTC (rev 3105)
@@ -97,79 +97,5 @@
    void setReason(const unsigned int reason);
 };
 
-%template(EventObjectEventCaster) EventCaster&lt;rl::EventObject&gt;;
-class PlaylistObject : public rl::EventCaster&lt;rl::EventObject&gt;
-{
-public:
-	/// Konstruktor
-	PlaylistObject();
-	/// Destruktor
-	~PlaylistObject();
-	/// Objekt laden, einrichten etc.
-	virtual void load() = 0;
-	/// Objekt entladen, abbauen etc.
-	virtual void unload() = 0;
-	/// Objektaktion starten
-	virtual void start() = 0;
-	/// Objectaktion stoppen
-	virtual void stop() = 0;
-	/// Objektaktion pausieren
-	virtual void pause() = 0;
-};
-
-class PlaylistEvent : public rl::EventObject
-{
-};
-
-%template(EventObjectEventListener) EventListener&lt;rl::PlaylistEvent&gt;;
-class Playlist : public rl::EventListener&lt;rl::PlaylistEvent&gt;
-{
-public:
-	Playlist();
-	virtual ~Playlist();
-    virtual void start() = 0;
-    virtual void stop() = 0;
-};
-
-class SimplePlaylist : public rl::Playlist
-{
-public:
-	SimplePlaylist();
-	virtual ~SimplePlaylist();
-    virtual void add(rl::PlaylistObject *object);
-    virtual void remove(rl::PlaylistObject *object);
-    virtual void start();
-    virtual void stop();
-    void setLooping(bool looping);
-    bool isLooping() const;
-    virtual bool eventRaised(rl::PlaylistEvent *eventRaised);
-};
-
-class rl::LinkItem;
-typedef std::list&lt;rl::LinkItem*&gt; LinkedList;
-class LinkItem {
-public:
-	LinkItem(rl::PlaylistObject *item);
-	virtual ~LinkItem();
-	rl::PlaylistObject* getItem() const;
-	void start();
-	void stop();
-	void add(rl::PlaylistObject *child);
-	void remove(rl::PlaylistObject *child);
-};
-
-
-class LinkedPlaylist : public rl::Playlist
-{
-public:
-	LinkedPlaylist();
-	virtual ~LinkedPlaylist();
-    void add(rl::PlaylistObject *object, LinkItem *parent);
-	void remove(rl::PlaylistObject *object, LinkItem *parent);
-    virtual void stop();
-	virtual void start();
-	LinkItem* getList() const;
-};
-
 }
 

Modified: rl/trunk/engine/script/swig/RlExports.i
===================================================================
--- rl/trunk/engine/script/swig/RlExports.i	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/script/swig/RlExports.i	2007-03-01 20:12:51 UTC (rev 3105)
@@ -14,6 +14,7 @@
  *  <A HREF="http://www.jpaulmorrison.com/fbp/artistic2.htm.">http://www.jpaulmorrison.com/fbp/artistic2.htm.</A>
  */
 
+// Activate Directors and name the module RlScript
 %module(directors=&quot;1&quot;) RlScript
 /* Tell SWIG to keep track of mappings between C/C++ structs/classes. */
 %trackobjects;
@@ -28,20 +29,25 @@
 #	endif
 #endif
 
-#include &lt;xercesc/util/XMemory.hpp&gt;	// Muss vor Ogre stehen (zumindest fuer VS)
+// Has to be included before Ogre, MemoryManager issues...
+#include &lt;xercesc/util/XMemory.hpp&gt;	
 
-// Exportieren der Ruby Instanz R&#252;ckgabe
+// Exporting the function for getting ruby instances
 VALUE RL_RubyInstanceFor(void* ptr) 
 {
 	return SWIG_RubyInstanceFor(ptr);
 }
+// Exporting the function for removing ruby instances
 void RL_RubyRemoveTracking(void* ptr) 
 {
 	return SWIG_RubyRemoveTracking(ptr);
 }
+
+#include &quot;FixRubyHeaders.h&quot;
+
 %}
 
-
+// Header includes
 %include &quot;RlCommon.head.swig&quot;
 %include &quot;RlUi.head.swig&quot;
 %include &quot;RlCore.head.swig&quot;
@@ -50,13 +56,14 @@
 %include &quot;RlAi.head.swig&quot;
 %include &quot;RlScript.head.swig&quot;
 
-
-
 %include &quot;TypeMaps.i&quot;
 %include &quot;stl.i&quot;
 %include &quot;std_string.i&quot;
 %include &quot;std_pair.i&quot;
 
+
+
+
 // Kopie. Falls das nochmal irgendwohin kopiert werden muss,
 // In separate Datei auslagen.
 #if !defined(RL_LONGLONG)
@@ -67,19 +74,31 @@
 #   endif
 #endif
 
-%feature(&quot;director:except&quot;) {
+
+
+
+// Handling of errors in director methods
+
+%feature(&quot;director:except&quot;) 
+{
+	RL_handleRubyError( error );
+	return Qnil;
+}
+
+%{
+// Error Handling for Ruby
+void RL_handleRubyError( VALUE error )
+{
 	stringstream stream;	
-	VALUE lasterr = rb_gv_get(&quot;$!&quot;);
-
-    // class
-    VALUE klass = rb_class_path(CLASS_OF(lasterr));
+	// get error class
+    VALUE klass = rb_class_path(CLASS_OF(error));
     stream &lt;&lt; RSTRING(klass)-&gt;ptr &lt;&lt; &quot; (&quot;; 
 
-    // message
-    VALUE message = rb_obj_as_string(lasterr);
+    // get error message
+    VALUE message = rb_obj_as_string(error);
     stream &lt;&lt; RSTRING(message)-&gt;ptr &lt;&lt; &quot;) &quot; &lt;&lt; endl;
 
-    // backtrace
+    // get backtrace
     if(!NIL_P(ruby_errinfo)) 
     {
 		stream &lt;&lt; &quot;Callstack: [ &quot;;
@@ -93,11 +112,18 @@
         }
         stream &lt;&lt; &quot;]&quot;;
     }
+    else
+		stream &lt;&lt; &quot;Kein Stacktrace vorhanden...&quot;;
         
-    rl::WindowFactory::getSingleton().writeToConsole( stream.str() );        
-	Throw(rl::ScriptInvocationFailedException, stream.str() );
+    rl::ScriptSubsystem::getSingleton().log( stream.str() );
+    rl::WindowFactory::getSingleton().writeToConsole( stream.str() );  
 }
+%}
 
+
+
+// Converting C++ Exceptions to Ruby Exceptions
+
 namespace Swig {
 	class DirectorException;
 }
@@ -119,8 +145,7 @@
     rb_raise(ogreException, oe.getFullDescription().c_str());
   }
   catch (Swig::DirectorException&amp;) {
-    static VALUE directorException = rb_define_class(&quot;DirectorException&quot;, rb_eRuntimeError);
-    rb_raise(directorException, &quot;Eine Director Exception ist aufgetreten&quot;);
+    SWIG_fail; 
   } 
   catch (std::exception&amp; se) {
     static VALUE stdException = rb_define_class(&quot;StdException&quot;, rb_eRuntimeError);
@@ -132,11 +157,21 @@
   }
 }
 
+
+
+
+// deaktiviere Warnung ueber unreferenzierte lokale Variable, 
+// da dies in allen erzeugten Exceptionhandlern auftritt
 %{
-#pragma warning( disable : 4101 )	// deaktiviere Warnung ueber unreferenzierte lokale Variable, 
-									// da dies in allen erzeugten Exceptionhandlern auftritt
+#pragma warning( disable : 4101 )	
+									
 %}
 
+
+
+
+// These functions will ensure no C++ will have to different Ruby links
+
 // doWithActor( Actor* ) oder andere Director-Methoden Parameter
 %typemap(directorin) SWIGTYPE*
 {
@@ -146,12 +181,11 @@
     if (resultdirector) {
         $input = resultdirector-&gt;swig_get_self();
     }
-    else
-	{
+    else {
 		VALUE val = SWIG_RubyInstanceFor( $1 );
 		
 		// Es gab das SkriptObjekt noch nicht
-		if( val == Qnil )
+		if (NIL_P(val))
 		{
 			$input = SWIG_NewPointerObj((void *) $1, $1_descriptor, NULL);		
 		}
@@ -166,8 +200,7 @@
 	VALUE val = SWIG_RubyInstanceFor( $1 );
 	
 	// Es gab das SkriptObjekt noch nicht
-	if( val == Qnil )
-	{
+	if (NIL_P(val)) {
 		$result = SWIG_NewPointerObj((void *) $1, $1_descriptor, NULL);			
 	}
 	else	
@@ -180,7 +213,7 @@
 	VALUE val = SWIG_RubyInstanceFor( $1 );
 	
 	// Es gab das SkriptObjekt noch nicht
-	if( val == Qnil )
+	if (NIL_P(val))
 	{
 		// Dynamic Cast ausf&#252;hren
 		swig_type_info *ty = SWIG_TypeDynamicCast($1_descriptor, (void **) &amp;$1);
@@ -204,8 +237,7 @@
 		VALUE val = SWIG_RubyInstanceFor( $1 );
 		
 		// Es gab das SkriptObjekt noch nicht
-		if( val == Qnil )
-		{
+		if (NIL_P(val)) {
 			// Dynamic Cast ausf&#252;hren
 			swig_type_info *ty = SWIG_TypeDynamicCast($1_descriptor, (void **) &amp;$1);
 			$input = SWIG_NewPointerObj((void *) $1, ty, 0);		
@@ -215,6 +247,9 @@
 	}
 } 
 
+
+// Include bodies
+
 %include &quot;RlCommon.swig&quot;
 %include &quot;RlCore.swig&quot;
 %include &quot;RlRules.swig&quot;

Modified: rl/trunk/engine/ui/src/ActionChoiceWindow.cpp
===================================================================
--- rl/trunk/engine/ui/src/ActionChoiceWindow.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/ui/src/ActionChoiceWindow.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -197,17 +197,9 @@
 		LOG_DEBUG2(Logger::UI, 
 			action-&gt;getName().c_str(), &quot;ActionChoiceWindow::activateAction&quot;);
 			
+		//TODO: Ask for target
+        action-&gt;doAction(mObject, mActor, NULL); 
 		
-        try
-        {
-            //TODO: Ask for target
-            action-&gt;doAction(mObject, mActor, NULL); 
-        }
-        catch( ScriptInvocationFailedException&amp; sife )
-        {
-            LOG_ERROR(Logger::UI,  sife.toString() );
-        }
-		
 		LOG_DEBUG2(Logger::UI, 
 			&quot;Ende&quot;, &quot;ActionChoiceWindow::activateAction&quot;);
 

Modified: rl/trunk/engine/ui/src/CharacterController.cpp
===================================================================
--- rl/trunk/engine/ui/src/CharacterController.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/ui/src/CharacterController.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -94,23 +94,16 @@
 			return false;
 		}
 
-		try
+        Action* action = ActionManager::getSingleton().getInGameGlobalAction(actionName);
+        if (action != NULL)
+        {
+            action-&gt;doAction(NULL, NULL, NULL);
+        }
+        else if (character != NULL)
 		{
-            Action* action = ActionManager::getSingleton().getInGameGlobalAction(actionName);
-            if (action != NULL)
-            {
-                action-&gt;doAction(NULL, NULL, NULL);
-            }
-            else if (character != NULL)
-			{
-				character-&gt;doAction(actionName, character, character);
-			}
-			return true;
+			character-&gt;doAction(actionName, character, character);
 		}
-		catch( ScriptInvocationFailedException&amp; sife )
-		{
-			LOG_ERROR(Logger::UI, sife.toString() );
-		}
+		return true;
 
 		return false;
 	}

Modified: rl/trunk/engine/ui/src/InputManager.cpp
===================================================================
--- rl/trunk/engine/ui/src/InputManager.cpp	2007-03-01 01:21:32 UTC (rev 3104)
+++ rl/trunk/engine/ui/src/InputManager.cpp	2007-03-01 20:12:51 UTC (rev 3105)
@@ -320,15 +320,8 @@
                 mCommandMapper-&gt;getAction(code, CMDMAP_KEYMAP_GLOBAL));
             if (action != NULL)
             {
-                try
-                {
-                    action-&gt;doAction(NULL, NULL, NULL);
-                    LOG_MESSAGE2(Logger::UI, &quot;    invoked action &quot; + action-&gt;getName(), &quot;InputManager::keyReleased&quot;);
-                }
-                catch( ScriptInvocationFailedException&amp; sife )
-                {
-                    LOG_ERROR(Logger::UI, sife.toString() );
-                }
+                action-&gt;doAction(NULL, NULL, NULL);
+                LOG_MESSAGE2(Logger::UI, &quot;    invoked action &quot; + action-&gt;getName(), &quot;InputManager::keyReleased&quot;);
             }
 
             if (mCharacterController != NULL)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000175.html">[Dsa-hl-svn] r3104 - rl/trunk/docs
</A></li>
	<LI>Next message: <A HREF="000177.html">[Dsa-hl-svn] r3106 - in rl/trunk/engine: ai/include ai/src	core/include
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#176">[ date ]</a>
              <a href="thread.html#176">[ thread ]</a>
              <a href="subject.html#176">[ subject ]</a>
              <a href="author.html#176">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dsa-hl-svn">More information about the Dsa-hl-svn
mailing list</a><br>
</body></html>
